{"version":3,"sources":["docs/js/vendors.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","GlslEditor","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","_dereq_","default","__esModule","core-js/library/fn/get-iterator","2","core-js/library/fn/object/assign","3","core-js/library/fn/object/create","4","core-js/library/fn/object/define-property","5","core-js/library/fn/object/get-own-property-descriptor","6","core-js/library/fn/object/keys","7","core-js/library/fn/object/set-prototype-of","8","core-js/library/fn/promise","9","core-js/library/fn/set","10","instance","Constructor","TypeError","11","_Object$defineProperty","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","babel-runtime/core-js/object/define-property","12","_Object$getOwnPropertyDescriptor","_x","_x2","_x3","_again","object","property","receiver","Function","desc","undefined","value","getter","get","parent","Object","getPrototypeOf","babel-runtime/core-js/object/get-own-property-descriptor","13","_Object$create","_Object$setPrototypeOf","subClass","superClass","constructor","__proto__","babel-runtime/core-js/object/create","babel-runtime/core-js/object/set-prototype-of","14","obj","15","mod","CodeMirror","firstNonWS","str","found","search","nonWS","noOptions","Pos","commands","toggleComment","cm","defineExtension","options","minLine","Infinity","ranges","listSelections","mode","from","to","line","uncomment","lineComment","getModeAt","commentString","blockCommentStart","fullLines","blockComment","getLine","end","Math","min","ch","lastLine","pad","padding","blankLines","commentBlankLines","operation","indent","baseString","whitespace","slice","cut","test","replaceRange","startString","endString","blockCommentEnd","lastLineHasText","lead","blockCommentLead","didSomething","start","lineString","lines","indexOf","getTokenTypeAt","push","pos","endPos","startLine","endLine","open","close","lastIndexOf","lastStart","firstEnd","almostLastStart","openEnd","foundEnd","../../lib/codemirror","16","dialogDiv","template","bottom","dialog","wrap","getWrapperElement","appendChild","document","createElement","className","innerHTML","closeNotification","newVal","state","currentNotificationClose","callback","inp","closed","parentNode","removeChild","me","focus","onClose","button","getElementsByTagName","selectValueOnOpen","select","onInput","on","onKeyUp","onKeyDown","keyCode","closeOnEnter","blur","e_stop","closeOnBlur","callbacks","buttons","blurring","b","e_preventDefault","setTimeout","clearTimeout","doneTimer","duration","17","Panel","node","height","cleared","initPanels","style","getComputedStyle","currentStyle","parseInt","info","panels","setHeight","heightLeft","wrapper","insertBefore","hasFocus","_setSize","setSize","width","newHeight","px","exec","Number","offsetHeight","removePanels","replaceChild","cmWrapper","after","before","nextSibling","replace","clear","position","firstChild","changed","18","clearRulers","display","lineSpace","childNodes","setRulers","val","getOption","cw","defaultCharWidth","left","charCoords","firstLine","minH","scroller","elt","col","conf","column","color","borderColor","lineStyle","borderLeftStyle","borderLeftWidth","top","minHeight","cursorDiv","refreshRulers","defineOption","old","Init","off","19","name","defaults","getConfig","deflt","closeBrackets","getCursor","handleBackspace","Pass","pairs","empty","around","charsAround","head","cur","handleEnter","explode","replaceSelection","execCommand","indentLine","contractSelection","sel","inverted","cmpPos","anchor","handleChar","type","next","triples","identical","charAt","opening","curType","range","getRange","isWordChar","enteringString","isClosingBracket","right","sels","getSelections","replaceSelections","setSelections","triggerElectric","token","getTokenAt","stream","StringStream","type1","getMode","removeKeyMap","keyMap","addKeyMap","bind","Backspace","Enter","20","findMatchingBracket","where","strict","config","getLineHandle","match","matching","text","dir","scanForBracket","forward","maxScanLen","maxScanLineLength","maxScanLines","stack","re","bracketRegex","lineEnd","max","lineNo","pop","matchBrackets","autoclear","maxHighlightLen","maxHighlightLineLength","marks","markText","ie_lt8","focused","doMatchBrackets","currentlyHighlighted","navigator","userAgent","documentMode","(",")","[","]","{","}","21","doFold","force","allowFolded","finder","minSize","findMarksAt","__isFold","myWidget","makeWidget","myRange","replacedWith","clearOnEnter","signal","widget","createTextNode","editorOptions","foldOptions","defaultOptions","newFoldFunction","rangeFinder","toggleFold","foldCode","fold","unfold","foldAll","unfoldAll","registerHelper","funcs","Array","arguments","helpers","getHelpers","auto","minFoldSize","scanUp","22","State","parseOptions","opts","gutter","indicatorOpen","indicatorFolded","isFolded","find","marker","spec","cloneNode","updateFoldInfo","foldGutter","foldOption","func","eachLine","mark","setGutterMarker","updateInViewport","vp","getViewport","onGutterClick","folded","onChange","changeUpdate","foldOnChangeTimeSpan","onViewportChange","updateViewportTimeSpan","onFold","clearGutter","./foldcode","23","tabSize","getIndent","countColumn","myIndent","lastLineInFold","curLine","24","forEach","arr","arrayContains","item","scriptHint","editor","keywords","getToken","innerMode","string","tprop","context","list","getCompletions","javascriptHint","javascriptKeywords","getCoffeeScriptToken","coffeescriptHint","coffeescriptKeywords","maybeAdd","gatherCompletions","stringProps","arrayProps","funcProps","globalScope","base","additionalContext","useGlobalScope","jQuery","_","v","localVars","globalVars","split","25","Completion","debounce","tick","startPos","startLen","getSelection","activityFunc","cursorActivity","hintOptions","out","prop","hint","resolve","getText","completion","buildKeyMap","handle","addBinding","bound","baseMap","hasOwnProperty","ourMap","Up","moveFocus","Down","PageUp","menuSize","PageDown","Home","setFocus","End","pick","Tab","Esc","custom","customKeys","extra","extraKeys","getHintElement","hintsElement","el","nodeName","toUpperCase","Widget","data","picked","hints","selectedHint","completions","HINT_ELEMENT_CLASS","ACTIVE_HINT_ELEMENT_CLASS","render","displayText","hintId","cursorCoords","alignWithWord","below","winW","innerWidth","body","offsetWidth","documentElement","winH","innerHeight","container","box","getBoundingClientRect","cursor","overlapX","avoidWrap","changeActive","screenAmount","closeOnUnfocus","closingOnBlur","onBlur","onFocus","startScroll","getScrollInfo","onScroll","curScroll","newTop","point","pageYOffset","scrollTop","srcElement","completeOnSingleClick","applicableHelpers","somethingSelected","result","supportsSelection","resolveAutoHints","words","resolved","async","run","app","helper","getHelper","fromList","anyword","showHint","getHints","newOpts","selections","completionActive","update","requestAnimationFrame","fn","cancelAnimationFrame","active","closeCharacters","disable","first","myTick","finishUpdate","completeSingle","offsetTop","clientHeight","floor","term","word","autocomplete","26","searchOverlay","query","caseInsensitive","RegExp","source","ignoreCase","lastIndex","index","skipToEnd","SearchState","posFrom","posTo","lastQuery","overlay","getSearchState","queryCaseInsensitive","toLowerCase","getSearchCursor","persistentDialog","openDialog","clearSearch","shortText","prompt","confirmDialog","fs","openConfirm","confirm","parseString","parseQuery","isRE","startSearch","queryText","removeOverlay","addOverlay","showMatchesOnScrollbar","annotate","doSearch","rev","persistent","findNext","q","hiding","queryDialog","event","opacity","shiftKey","querySelector","setSelection","scrollIntoView","replaceAll","all","dialogText","replaceQueryDialog","replacementQueryDialog","advance","doReplaceConfirm","doReplace","findPersistent","findPrev","../dialog/dialog","./searchcursor","27","SearchCursor","doc","caseFold","atOccurrence","clipPos","matches","reverse","cutOff","newMatch","matchLen","origQuery","orig","adjustPos","origTarget","last","ln","pos1","len1","findPrevious","savePosAndFail","maxLine","lineCount","newText","origin","splitLines","defineDocExtension","28","findParagraph","startRE","paragraphStart","endRE","paragraphEnd","findBreakPoint","wrapOn","killTrailingSpace","at","endOfText","wrapRange","killTrailing","changes","curNo","leadingSpace","oldLen","spaceInserted","spaceTrimmed","firstBreak","bp","change","changeEnd","para","wrapLines","span","paras","madeChange","29","findPosSubword","cat","moveSubword","extendSelectionsBy","shift","extend","insertLine","above","len","newSelection","wordAt","selectBetweenBrackets","closing","mirror","sortLines","caseSensitive","selected","toSort","sort","au","bu","modifyWordOrSelection","indices","replacements","getTarget","findAndGoTo","map","sublime","fallthrough","cmds","mac","macDefault","ctrl","scrollLineCombo","visibleBottomLine","lineAtHeight","scrollTo","defaultTextHeight","visibleTopLine","lineRanges","scroll","extended","fullWord","sublimeFindFullWord","addSelection","prev","swapLineCombo","linesToMove","newSels","joined","offset","actual","rangeCount","sublimeBookmarks","current","unshift","findMarks","j","sublimeBookmark","k","splice","clearWhenEmpty","cK","toStartOfLine","indentUnit","prevIndent","findColumn","sublimeMark","setBookmark","tmp","sublimeKilled","setCursor","primaryIndex","normalizeKeyMap","../addon/edit/matchbrackets","../addon/search/searchcursor","../lib/codemirror","30","place","copyObj","setGuttersForLineNumbers","Doc","lineSeparator","input","inputStyles","inputStyle","Display","updateGutters","themeChanged","lineWrapping","autofocus","mobile","initScrollbars","keyMaps","overlays","modeGen","overwrite","delayingBlurEvent","suppressEdits","pasteIncoming","cutIncoming","selectingText","draggingText","highlight","Delayed","keySeq","specialChars","ie","ie_version","reset","registerEventHandlers","ensureGlobalHandlers","startOperation","curOp","forceUpdate","attachDoc","opt","optionHandlers","maybeUpdateLineNumberWidth","finishInit","initHooks","endOperation","webkit","lineDiv","textRendering","d","scrollbarFiller","setAttribute","gutterFiller","selectionDiv","measure","lineMeasure","mover","sizer","sizerWidth","heightForcer","scrollerGap","gutters","lineGutter","zIndex","paddingRight","gecko","draggable","viewFrom","viewTo","reportedViewFrom","reportedViewTo","view","renderedView","externalMeasured","viewOffset","lastWrapHeight","lastWrapWidth","updateLineNumbers","nativeBarWidth","barHeight","barWidth","scrollbarsClipped","lineNumWidth","lineNumInnerWidth","lineNumChars","alignWidgets","cachedCharWidth","cachedTextHeight","cachedPaddingH","maxLineLength","maxLineChanged","wheelDX","wheelDY","wheelStartX","wheelStartY","selForContextMenu","activeTouch","init","loadMode","modeOption","resetModeState","iter","stateAfter","styles","frontier","startWorker","regChange","wrappingChanged","addClass","minWidth","rmClass","findMaxLine","estimateLineHeights","clearCaches","updateScrollbars","estimateHeight","th","textHeight","wrapping","perLine","clientWidth","charWidth","lineIsHidden","widgetsHeight","widgets","ceil","est","estHeight","updateLineHeight","theme","guttersChanged","alignHorizontally","specs","removeChildren","gutterClass","gElt","updateGutterSpace","marginLeft","lineLength","merged","collapsedSpanAtStart","collapsedSpanAtEnd","lineNumbers","concat","measureForScrollbars","gutterW","docH","round","paddingVert","viewHeight","scrollWidth","viewWidth","barLeft","fixedGutter","docHeight","scrollHeight","scrollGap","gutterWidth","NativeScrollbars","vert","horiz","scrollLeft","checkedOverlay","NullScrollbars","scrollbars","scrollbarModel","scrollbarStyle","axis","setScrollLeft","setScrollTop","startWidth","startHeight","updateScrollbarsInner","updateHeightsInViewport","sizes","paddingBottom","coverGutterNextToScrollbar","visibleLines","viewport","paddingTop","ensure","ensureFrom","ensureTo","heightAtLine","comp","compensateForHScroll","hidden","align","alignable","lineNumberFor","size","innerW","String","lineNumberFormatter","firstLineNumber","DisplayUpdate","visible","editorIsHidden","wrapperHeight","wrapperWidth","oldDisplayWidth","displayWidth","dims","getDimensions","events","maybeClipScrollbars","marginBottom","borderRightWidth","updateDisplayIfNeeded","resetView","countDirtyView","viewportMargin","sawCollapsedSpans","visualLineNo","visualLineEndNo","different","adjustView","toUpdate","activeElt","patchDisplay","postUpdateDisplay","displayHeight","barMeasure","updateSelection","setDocumentHeight","updateDisplaySimple","finish","total","prevBottom","bot","diff","updateWidgetHeight","rest","gutterLeft","clientLeft","offsetLeft","fixedPos","gutterTotalWidth","updateNumbersFrom","rm","currentWheelTarget","lineN","lineView","updateNumber","lineNumber","updateLineForChanges","buildLineElement","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","updateLineBackground","cls","bgClass","background","getLineContent","ext","built","buildLineContent","pre","textClass","wrapClass","gutterBackground","markers","gutterMarkers","gutterWrap","setUneditable","id","insertLineWidgets","insertLineWidgetsFor","allowAbove","ws","handleMouseEvents","positionLineWidget","signalLater","noHScroll","coverGutter","paddingLeft","copyPos","x","maxPos","cmp","minPos","ensureFocus","isReadOnly","readOnly","cantEdit","applyTextInput","inserted","deleted","paste","textLines","multiPaste","lastCopied","join","lst","updateInput","changeEvent","makeChange","ensureCursorVisible","typing","handlePaste","pasted","clipboardData","getData","preventDefault","disableInput","runInOp","electricChars","smartIndent","indented","electricInput","copyableRanges","lineRange","disableBrowserMagic","field","TextareaInput","prevInput","pollingFast","polling","inaccurateSelection","hasSelection","composing","hiddenTextarea","te","div","ios","border","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","gracePeriod","posToDOM","findViewForLine","mapFromLineView","order","getOrder","side","getBidiPartAt","nodeAndOffsetInLineMap","collapse","badPos","bad","domToPos","lineNode","locateNodeInLineView","textNode","topNode","maps","curNode","contains","nodeType","nodeValue","dist","textContent","previousSibling","domTextBetween","fromLine","toLine","recognizeMarker","walk","cmText","getAttribute","markerID","getBetween","lineSep","Selection","primIndex","Range","normalizeSelection","prim","inv","simpleSelection","clipLine","clipToLen","linelen","isLine","clipPosArray","array","extendRange","other","posBefore","extendSelection","primary","extendSelections","heads","replaceOneSelection","setSimpleSelection","filterSelectionChange","setSelectionReplaceHistory","done","history","setSelectionNoUndo","addSelectionToHistory","NaN","hasHandler","setSelectionInner","skipAtomicInSelection","bias","equals","selectionChanged","signalCursorActivity","reCheckSelection","sel_dontScroll","mayClear","newAnchor","skipAtomic","newHead","flipped","curPos","markedSpans","sp","m","inclusiveLeft","inclusiveRight","explicitlyCleared","atomic","newPos","showSelection","prepareSelection","curFragment","cursors","createDocumentFragment","selFragment","selection","collapsed","showCursorWhenSelecting","drawSelectionCursor","drawSelectionRange","output","singleCursorHeightPerLine","cursorHeight","otherCursor","add","fragment","rightSide","drawForLine","fromArg","toArg","coords","lineObj","lineLen","iterateBidiSections","rightPos","leftPos","leftSide","paddingH","sFrom","sTo","singleVLine","visualLine","leftEnd","rightStart","restartBlink","clearInterval","blinker","visibility","cursorBlinkRate","setInterval","time","startState","set","highlightWorker","Date","workTime","copyState","getStateBefore","changedLines","oldStyles","tooLong","maxHighlightLength","highlighted","highlightLine","oldCls","styleClasses","newCls","classes","ischange","processLine","workDelay","regLineChange","findStartLine","precise","minindent","minline","lim","save","removeChildrenAndAdd","isNaN","ensureLineHeights","rect","curWidth","heights","rects","getClientRects","abs","cache","caches","updateExternalMeasurement","LineView","measureChar","measureCharPrepared","prepareMeasureForLine","findViewIndex","hasHeights","prepared","varHeight","measureCharInner","bogus","rtop","rbottom","mStart","mEnd","insertLeft","coverStart","coverEnd","isExtendingChar","nullRect","maybeUpdateRectForZooming","rSpan","rbot","mid","screen","logicalXDPI","deviceXDPI","hasBadZoomedRects","scaleX","scaleY","logicalYDPI","deviceYDPI","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","pageScrollX","pageXOffset","pageScrollY","intoCoordSystem","widgetHeight","yOff","lOff","xOff","fromCoordSystem","localBox","lineSpaceBox","preparedMeasure","getBidi","partPos","part","level","bidiLeft","bidiRight","bidiOther","estimateCoords","PosWithInfo","outside","xRel","coordsChar","y","coordsCharInner","mergedPos","getX","wrongLine","innerOff","adjust","bidi","lineLeft","lineRight","fromX","fromOutside","toX","toOutside","moveVisually","xDiff","step","middle","middleX","measureText","viewChanged","changeObjs","cursorActivityHandlers","cursorActivityCalled","updateMaxLine","scrollToPos","nextOpId","operationGroup","ops","ownsGroup","delayedCallbacks","fireCallbacksForOps","group","op","endOperations","endOperation_R1","endOperation_W1","endOperation_R2","endOperation_W2","endOperation_finish","mustUpdate","updatedDisplay","adjustWidthTo","maxScrollLeft","preparedSelection","forceScroll","scrollPosIntoView","margin","isCursor","maybeScrollWindow","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","apply","methodOp","docMethodOp","visualLineContinued","buildViewArray","nextPos","lendiff","viewCuttingPoint","cutTop","cutBot","oldN","newN","dirty","finishTouch","touchFinished","prevTouch","isMouseLikeTouchEvent","touches","touch","radiusX","radiusY","farAway","dx","dy","onMouseDown","signalDOMEvent","posFromMouse","clickInGutter","eventInWidget","findWordAt","captureRightClick","onContextMenu","now","moved","pageX","pageY","onScrollWheel","dragFunctions","enter","over","onDragOver","onDragStart","drop","onDrop","leave","clearDragCursor","getField","onKeyPress","dragDropChanged","toggle","onResize","e_target","liberal","forRect","space","clientX","clientY","colDiff","supportsTouch","e_button","leftButtonDown","lastMiddleDown","delayBlurEvent","lastDoubleClick","lastClick","contained","modifier","metaKey","ctrlKey","dragDrop","dragAndDrop","leftButtonStartDrag","leftButtonSelect","startTime","dragEnd","e2","addNew","extendTo","lastPos","startCol","posCol","startSel","ourIndex","oldRange","ourRange","sel_mouse","curCount","counter","editorSize","move","up","lastSelOrigin","altKey","gutterEvent","prevent","signalfn","mX","mY","lineBox","e_defaultPrevented","lastDrop","files","dataTransfer","FileReader","File","read","file","allowDropFileTypes","reader","onload","content","readAsText","setData","setDragImage","safari","img","src","presto","_top","frag","dragCursor","isScroller","delta","wheelEventDelta","canScrollX","canScrollY","outer","wheelPixelsPerUnit","pixels","wheelSamples","movedX","movedY","sample","doHandleBinding","dropShift","ensurePolled","prevShift","lookupKeyForEditor","lookupKey","dispatchKey","seq","isModifierKey","stopSeq","handleKeyBinding","keyName","motion","handleCharBinding","returnValue","handled","lastStoppedKey","hasCopyEvent","showCrossHair","charCode","which","fromCharCode","receivedFocus","contextMenuInGutter","adjustForChange","computeSelAfterChange","offsetPos","nw","computeReplacedSel","oldPrev","newPrev","filterChange","canceled","cancel","ignoreReadOnly","sawReadOnlySpans","removeReadOnlyRanges","makeChangeInner","selAfter","addChangeToHistory","makeChangeSingleDoc","stretchSpansOverChange","rebased","linkedDocs","sharedHist","rebaseHist","makeChangeFromHistory","allowSelectionOnly","hist","undone","dest","lastOrigin","pushSelectionToHistory","clearRedo","antiChanges","generation","maxGeneration","filter","historyChangeFromChange","mergeOldSpans","shiftDoc","distance","spans","removed","makeChangeSingleDocInEditor","updateDoc","recomputeMaxLength","checkWidthStart","full","isWholeLineUpdate","changesHandler","changeHandler","doScroll","phantom","scrollNode","limit","endCoords","scrollPos","calculateScrollPos","startTop","startLeft","x1","y1","x2","y2","snapMargin","screentop","docBottom","atTop","atBottom","screenleft","screenw","tooWide","addToScrollPos","resolveScrollToPos","cursorScrollMargin","sPos","how","aggressive","curSpace","indentation","curSpaceString","indentString","indentWithTabs","spaceStr","changeLine","changeType","no","deleteNearSelection","compute","kill","toKill","replaced","findPosH","unit","visually","findNextLine","possible","moveOnce","boundToLine","moveLogically","origDir","sawType","hitSide","findPosV","pageSize","option","notOnInit","normalizeKeyName","alt","cmd","parts","getKeyMap","shared","markTextShared","TextMarker","widgetNode","conflictingCollapsedRange","addToHistory","addMarkedSpan","MarkedSpan","clearHistory","nextMarkerId","title","startStyle","endStyle","css","linked","isParent","SharedTextMarker","findSharedMarkers","copySharedMarkers","mFrom","mTo","subMark","detachSharedMarkers","subMarker","getMarkedSpanFor","removeMarkedSpan","attachLine","markedSpansBefore","startCh","isInsert","startsBefore","endsAfter","markedSpansAfter","endCh","oldFirst","oldLast","sameLine","clearEmptySpans","newMarkers","gapMarkers","gap","getOldSpans","stretched","oldCur","stretchCur","mk","p","newParts","dfrom","dto","detachMarkedSpans","detachLine","attachMarkedSpans","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","bPos","fromCmp","toCmp","collapsedSpanAtSide","sps","vis","lineIsHiddenInner","adjustScrollWhenAboveVisible","parentStyle","addLineWidget","LineWidget","insertAt","aboveVisible","updateLine","cleanUpLine","extractLineClasses","lineClass","callBlankLine","blankLine","inner","readToken","takeToken","asArray","getObj","copy","tokens","eol","runMode","lineClasses","forceToEnd","flattenSpans","curStart","curStyle","addModeClass","mName","st","i_end","opaque","getLineStyles","updateFrontier","startAt","interpretTokenStyle","styleToClassCacheWithMode","styleToClassCache","builder","splitSpaces","addToken","buildToken","hasBadBidiRects","buildTokenBadBidi","insertLineContent","joinClasses","zeroWidthElement","lastChild","defaultSpecialCharPlaceholder","charCodeAt","toString","special","mustWrap","skipped","txt","tabWidth","specialCharPlaceholder","fullStyle","buildCollapsedSpan","ignoreWidget","needsContentAttribute","allText","spanStyle","spanEndStyle","spanStartStyle","nextChange","foundBookmarks","upto","tokenText","wholeLineUpdateBefore","spansFor","linesFor","Line","lastText","lastSpans","nlines","insert","remove","added","LeafChunk","BranchChunk","children","chunkSize","sharedHistOnly","propagate","skip","rel","chunk","child","sz","getLines","h","lh","bidiOrdering","History","startGen","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","histChange","attachLocalSpans","clearSelectionEvents","lastChangeEvent","opId","historyEventDelay","selectionEventCanBeMerged","existing","removeClearedSpans","copyHistoryArray","newGroup","instantiateSel","deepCopy","newChanges","rebaseHistSelSingle","rebaseHistArray","sub","ok","copied","defaultPrevented","getHandlers","emitter","_handlers","noHandlers","args","orphanDelayedCallbacks","fireOrphanDelayed","delayed","override","codemirrorIgnore","eventMixin","ctor","spaceStrs","nothing","createObj","inst","create","isWordCharBasic","isEmpty","extendingChars","tag","cssText","count","activeElement","root","classTest","as","forEachCodeMirror","getElementsByClassName","byClass","globalsRegistered","registerGlobalHandlers","resizeTimer","zwspSupported","badBidiRects","r0","r1","badZoomedRects","normal","fromRange","lineStart","visual","lineStartSmart","inWS","compareBidiLevel","linedir","moveInLine","byUnit","platform","ie_upto10","ie_11up","qtwebkit","chrome","vendor","mac_geMountainLion","windows","presto_version","flipCtrlCmd","needsH","needsV","sWidth","totalHeight","totalWidth","overlayHack","w","barMouseDown","native","null","prepareCopyCut","selectInput","lineWiseCopyCut","textarea","poll","fastPoll","moveInputWithCursor","headPos","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","minimal","resetPosition","slowPoll","pollInterval","missed","same","prepareSelectAllHack","selectionStart","extval","selectionEnd","rehide","oldCSS","selectAll","detectingSelectAll","resetSelectionOnContextMenu","oldScrollY","scrollY","mouseup","readOnlyChanged","onCopyCut","clearData","kludge","hadFocus","startData","ours","applyComposition","forceCompositionEnd","pollContent","showPrimarySelection","showMultipleSelections","curAnchor","anchorNode","anchorOffset","curFocus","focusNode","focusOffset","getRangeAt","rng","removeAllRanges","addRange","startGracePeriod","rememberSelection","selectionInEditor","commonAncestorContainer","pollSelection","fromIndex","fromNode","toIndex","toNode","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","contentEditable","contenteditable","here","there","wheelDeltaX","wheelDeltaY","detail","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","wheelEventPixels","setOption","getDoc","modeSpec","indentSelection","newRanges","getLineTokens","help","helperType","_global","pred","getStateAfter","gutterID","lineInfo","addWidget","vspace","hspace","triggerOnKeyDown","triggerOnKeyPress","triggerOnKeyUp","amount","moveH","rtlMoveVisually","sel_move","deleteH","goalColumn","moveV","goals","startChar","check","toggleOverwrite","interpret","refresh","oldHeight","swapDoc","getInputField","getScrollerElement","getGutterElement","setValue","newBreaks","detach","attach","integer","disabled","tabIndex","modes","mimeModes","defineMode","dependencies","defineMIME","mime","resolveMode","mfactory","modeObj","modeExtensions","exts","modeProps","extendMode","properties","defineInitHook","registerGlobalHelper","predicate","nstate","a1","a2","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","delWrappedLineRight","undo","redo","undoSelection","redoSelection","goDocStart","goDocEnd","goLineStart","goLineStartSmart","goLineEnd","goLineRight","goLineLeft","goLineLeftSmart","goLineUp","goLineDown","goPageUp","goPageDown","goCharLeft","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentAuto","indentMore","indentLess","insertTab","insertSoftTab","spaces","defaultTab","transposeChars","newSel","newlineAndIndent","basic","Left","Right","Delete","Shift-Backspace","Shift-Tab","Insert","pcDefault","Ctrl-A","Ctrl-D","Ctrl-Z","Shift-Ctrl-Z","Ctrl-Y","Ctrl-Home","Ctrl-End","Ctrl-Up","Ctrl-Down","Ctrl-Left","Ctrl-Right","Alt-Left","Alt-Right","Ctrl-Backspace","Ctrl-Delete","Ctrl-S","Ctrl-F","Ctrl-G","Shift-Ctrl-G","Shift-Ctrl-F","Shift-Ctrl-R","Ctrl-[","Ctrl-]","Ctrl-U","Shift-Ctrl-U","Alt-U","emacsy","Ctrl-B","Ctrl-P","Ctrl-N","Alt-F","Alt-B","Ctrl-E","Ctrl-V","Shift-Ctrl-V","Ctrl-H","Alt-D","Alt-Backspace","Ctrl-K","Ctrl-T","Cmd-A","Cmd-D","Cmd-Z","Shift-Cmd-Z","Cmd-Y","Cmd-Home","Cmd-Up","Cmd-End","Cmd-Down","Cmd-Left","Cmd-Right","Ctrl-Alt-Backspace","Alt-Delete","Cmd-S","Cmd-F","Cmd-G","Shift-Cmd-G","Cmd-Alt-F","Shift-Cmd-Alt-F","Cmd-[","Cmd-]","Cmd-Backspace","Cmd-Delete","Cmd-U","Shift-Cmd-U","keymap","keyname","keys","keyNames","noShift","altGraphKey","fromTextArea","getValue","tabindex","placeholder","form","leaveSubmitMethodAlone","realSubmit","submit","wrappedSubmit","getTextArea","toTextArea","lastColumnPos","lastColumnValue","sol","peek","eat","eatWhile","eatSpace","skipTo","backUp","pattern","consume","cased","substr","hideFirstChars","withOp","dHeight","oldH","removeInner","insertInner","iterN","spilled","newleaf","maybeSpill","sibling","myIndex","used","nextDocId","cleanGeneration","getLineNumber","getLineHandleVisualStart","dup","setExtending","getExtending","historySize","markClean","changeGeneration","forceSplit","isClean","gen","getHistory","setHistory","histData","addLineClass","removeLineClass","removeLineWidget","realOpts","getAllMarks","posFromIndex","indexFromPos","copyHistory","linkedDoc","unlinkDoc","link","splitIds","iterLinkedDocs","getEditor","splitLinesAuto","dontDelegate","method","e_stopPropagation","stopPropagation","cancelBubble","addEventListener","attachEvent","removeEventListener","detachEvent","handlers","ms","startIndex","startValue","nextTab","goal","_e","nonASCIISingleCaseWordChar","createRange","endNode","setEnd","setStart","createTextRange","moveToElementText","moveEnd","moveStart","host","nl","rt","ownerDocument","parentElement","compareEndPoints","oncopy","32","33","34","35","36","37","38","39","40","44","45","46","59","61","91","92","93","106","107","109","110","111","127","173","186","187","188","189","190","191","192","219","220","221","222","63232","63233","63234","63235","63272","63273","63275","63276","63277","63302","charType","lowTypes","arabicTypes","BidiSpan","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","types","nstart","version","31","propertyIsEnumerable","cppHook","startOfLine","tokenize","pointerHook","_stream","prevToken","cpp14Literal","cpp11StringHook","cpp11RawStringDelim","tokenRawString","cppLooksLikeConstructor","lastTwo","tokenAtString","delim","def","mimes","builtin","atoms","tokenTripleString","escaped","tokenCeylonString","stringTokenizer","parserConfig","tokenBase","hooks","tokenString","isPunctuationChar","curPunc","isNumberChar","tokenComment","isOperatorChar","namespaceSeparator","blockKeywords","defKeywords","isDefKeyword","quote","multiLineStrings","maybeEnd","Context","isStatement","pushContext","popContext","typeBefore","isTopScope","statementIndentUnit","dontAlignCalls","indentStatements","indentSwitch","endStatement","basecolumn","ctx","typeFirstDefinitions","styleDefs","textAfter","firstChar","hook","switchBlock","cKeywords","cTypes","#","*","U","L","R","0","@","\"","'","_state","`","../modules/core.get-iterator","../modules/es6.string.iterator","../modules/web.dom.iterable","assign","../../modules/$.core","../../modules/es6.object.assign","$","P","D","../../modules/$","it","setDesc","getDesc","../../modules/es6.object.get-own-property-descriptor","../../modules/es6.object.keys","setPrototypeOf","../../modules/es6.object.set-prototype-of","Promise","../modules/$.core","../modules/es6.object.to-string","../modules/es6.promise","Set","../modules/es6.set","../modules/es7.set.to-json","41","42","43","isObject","./$.is-object","cof","TAG","ARG","O","T","B","callee","./$.cof","./$.wks","hide","redefineAll","strictNew","defined","forOf","$iterDefine","ID","$has","setSpecies","DESCRIPTORS","isExtensible","SIZE","fastKey","getEntry","that","entry","_i","_f","getConstructor","NAME","IS_MAP","ADDER","C","iterable","_l","delete","callbackfn","has","setStrong","iterated","kind","_t","_k","./$","./$.ctx","./$.defined","./$.descriptors","./$.for-of","./$.has","./$.hide","./$.iter-define","./$.iter-step","./$.redefine-all","./$.set-species","./$.strict-new","./$.uid","47","classof","./$.classof","48","$export","fails","setToStringTag","methods","common","IS_WEAK","Base","proto","entries","_c","each","KEY","IS_ADDER","G","W","F","./$.export","./$.fails","./$.global","./$.set-to-string-tag","49","core","__e","50","aFunction","c","./$.a-function","51","52","defineProperty","53","is","54","own","IS_FORCED","IS_GLOBAL","IS_STATIC","S","IS_PROTO","IS_BIND","IS_WRAP","param","./$.core","55","56","isArrayIter","anObject","toLength","getIterFn","iterator","iterFn","./$.an-object","./$.is-array-iter","./$.iter-call","./$.to-length","./core.get-iterator-method","57","__g","58","createDesc","./$.property-desc","60","un","62","63","Iterators","ITERATOR","ArrayProto","./$.iterators","64","65","ret","66","IteratorPrototype","67","LIBRARY","redefine","$iterCreate","getProto","BUGGY","returnThis","DEFAULT","IS_SET","FORCED","getMethod","DEF_VALUES","VALUES_BUG","$native","$default","values","./$.iter-create","./$.library","./$.redefine","68","SAFE_CLOSING","riter","skipClosing","safe","69","70","71","$Object","isEnum","getOwnPropertyDescriptor","setDescs","getKeys","getNames","getOwnPropertyNames","getSymbols","getOwnPropertySymbols","72","73","notify","macrotask","Observer","MutationObserver","WebKitMutationObserver","process","isNode","flush","domain","exit","nextTick","observe","characterData","then","task","./$.task","74","toObject","IObject","A","Symbol","K","$$","$$len","./$.iobject","./$.to-object","75","exp","76","bitmap","77","78","79","80","buggy","81","SPECIES","82","stat","83","store","84","85","86","toInteger","TO_STRING","./$.to-integer","87","defer","channel","port","invoke","html","cel","setTask","setImmediate","clearTask","clearImmediate","MessageChannel","queue","listner","port2","port1","onmessage","postMessage","importScripts","./$.dom-create","./$.html","./$.invoke","88","89","90","random","uid","./$.shared","94","getIteratorMethod","95","getIterator","96","addToUnscopables","toIObject","Arguments","./$.add-to-unscopables","./$.to-iobject","97","./$.object-assign","98","$getOwnPropertyDescriptor","./$.object-sap","99","$keys","100","./$.set-proto","101","102","Wrapper","setProto","speciesConstructor","asap","testResolve","promise","USE_NATIVE","P2","works","thenableThenGotten","sameConstructor","isThenable","PromiseCapability","reject","$$resolve","$$reject","perform","error","record","isReject","chain","reaction","handler","fail","console","isUnhandled","emit","onunhandledrejection","reason","_d","$reject","$resolve","executor","err","onFulfilled","onRejected","catch","capability","abrupt","remaining","results","alreadyCalled","race","./$.iter-detect","./$.microtask","./$.same-value","./$.species-constructor","103","strong","./$.collection","./$.collection-strong","104","$at","./$.string-at","105","toJSON","./$.collection-to-json","NodeList","HTMLCollection","./es6.array.iterator","CrossStorageClient","url","_id","_generateUUID","_promise","_frameId","frameId","_origin","_getOrigin","_requests","_connected","_closed","_count","_timeout","timeout","_listener","_installListener","frame","getElementById","_poll","_createFrame","_hub","contentWindow","frameStyle","uri","protocol","href","location","onConnect","client","connect","_request","del","message","response","JSON","parse","interval","targetOrigin","params","req","originalToJSON","stringify","108","CrossStorageHub","permissions","available","localStorage","_permissions","listener","request","_permitted","_inArray","allow","_set","setItem","_get","storage","getItem","_del","removeItem","_clear","_getKeys","_now","getTime","./client.js","./hub.js","installCustomElements","polyfill","ASAP","asapQueue","asapTimer","loopAndVerify","action","verifyAndSetupAndAction","loopAndSetup","patch","protos","getTypeIndex","executeAction","isValidNode","querySelectorAll","PREFIX_IS","PREFIX_TAG","isInQSA","onDOMAttrModified","currentTarget","attrChange","attrName","addition","ADDITION","removal","REMOVAL","notFromInnerHTMLHelper","ATTRIBUTE_CHANGED_CALLBACK","prevValue","newValue","onDOMNode","onReadyStateChange","dropDomContentLoaded","DOM_CONTENT_LOADED","DETACHED","ATTACHED","IE8","purge","patchedSetAttribute","onSubtreeModified","setupNode","setPrototype","observer","attributesObserver","doesNotSupportDOMAttrModified","EXPANDO_UID","getAttributesMirror","ADD_EVENT_LISTENER","DOM_SUBTREE_MODIFIED","DOM_ATTR_MODIFIED","CREATED_CALLBACK","created","targets","throwTypeError","patchIfNotAlready","CALLBACK","CustomElementRegistry","CERDefine","Class","EXTENDS","CProto","attributes","observedAttributes","definition","safeProperty","justCreated","DRECEV1","constructors","nodeNames","usableCustomElements","notifyAttributes","CONNECTED_CALLBACK","ATTACHED_CALLBACK","DISCONNECTED_CALLBACK","DETACHED_CALLBACK","secondArgument","REGISTER_ELEMENT","whenDefined","waitingList","getIs","attribute","polyfillV1","customElements","Classes","htmlClass","isNative","Reflect","construct","WebKit","fixGetClass","patchedCreateElement","V0","justSetup","section","tags","catchClass","filterBy","register","tagOrClass","collections","HTMLAllCollection","HTMLFormControlsCollection","HTMLOptionsCollection","elements","Element","HTMLAnchorElement","HTMLAppletElement","HTMLAreaElement","HTMLAttachmentElement","HTMLAudioElement","HTMLBRElement","HTMLBaseElement","HTMLBodyElement","HTMLButtonElement","HTMLCanvasElement","HTMLContentElement","HTMLDListElement","HTMLDataElement","HTMLDataListElement","HTMLDetailsElement","HTMLDialogElement","HTMLDirectoryElement","HTMLDivElement","HTMLDocument","HTMLElement","HTMLEmbedElement","HTMLFieldSetElement","HTMLFontElement","HTMLFormElement","HTMLFrameElement","HTMLFrameSetElement","HTMLHRElement","HTMLHeadElement","HTMLHeadingElement","HTMLHtmlElement","HTMLIFrameElement","HTMLImageElement","HTMLInputElement","HTMLKeygenElement","HTMLLIElement","HTMLLabelElement","HTMLLegendElement","HTMLLinkElement","HTMLMapElement","HTMLMarqueeElement","HTMLMediaElement","HTMLMenuElement","HTMLMenuItemElement","HTMLMetaElement","HTMLMeterElement","HTMLModElement","HTMLOListElement","HTMLObjectElement","HTMLOptGroupElement","HTMLOptionElement","HTMLOutputElement","HTMLParagraphElement","HTMLParamElement","HTMLPictureElement","HTMLPreElement","HTMLProgressElement","HTMLQuoteElement","HTMLScriptElement","HTMLSelectElement","HTMLShadowElement","HTMLSlotElement","HTMLSourceElement","HTMLSpanElement","HTMLStyleElement","HTMLTableCaptionElement","HTMLTableCellElement","HTMLTableColElement","HTMLTableElement","HTMLTableRowElement","HTMLTableSectionElement","HTMLTemplateElement","HTMLTextAreaElement","HTMLTimeElement","HTMLTitleElement","HTMLTrackElement","HTMLUListElement","HTMLUnknownElement","HTMLVideoElement","nodes","Attr","Audio","CDATASection","CharacterData","Comment","Document","DocumentFragment","DocumentType","Image","Option","ProcessingInstruction","ShadowRoot","Text","XMLDocument","callDOMAttrModified","validName","invalidNames","OP","hOP","iPO","isPrototypeOf","gOPD","gOPN","gPO","sPO","hasProto","Dict","Map","V","cb","Bridge","setProperties","names","HTMLElementPrototype","Node","attachShadow","dispatchEvent","hasAttribute","removeAttribute","attributeOldValue","DOMAttrModified","setListener","patchedRemoveAttribute","CustomEvent","bubbles","had","onPropertyChange","superSecret","propertyName","capture","oldAttributes","newAttributes","attr","upperType","attached","detached","checkEmAll","records","addedNodes","removedNodes","attributeName","oldValue","childList","subtree","deep","extending","localName","typeExtension","setup","innerHTMLHelper","DRE","o_O","FireFox","isFunction","forEachArray","forEachString","forEachObject","is-function","112","113","GlslCanvas","core-js/library/fn/array/from","_Array$from","isArray","arr2","babel-runtime/core-js/array/from","../../modules/es6.array.from","../../modules/es6.string.iterator","arrayLike","mapfn","mapping","alert","trim","arg","headers","row","for-each","initParams","xtend","createXHR","_createXHR","readystatechange","xhr","readyState","loadFunc","getBody","responseText","getXml","isJson","errorFunc","evt","timeoutTimer","statusCode","failureResponse","aborted","status","useXDR","rawRequest","getAllResponseHeaders","parseHeaders","called","cors","XDomainRequest","XMLHttpRequest","sync","json","onreadystatechange","onerror","onprogress","onabort","ontimeout","username","password","withCredentials","abort","setRequestHeader","responseType","beforeSend","send","responseXML","firefoxBugTakenEffect","noop","global/window","parse-headers","loadAllGlslCanvas","glslCanvases","sandbox","isValid","_createClass","_classCallCheck","_interopRequireDefault","_xhr","_xhr2","_glGl","_glTexture","_glTexture2","_toolsCommon","_toolsMixin","canvas","RenderLoop","nMouse","setMouse","mouse","forceRender","resize","_this","subscribeMixin","gl","program","textures","uniforms","vbo","vertexString","fragmentString","setupWebGL","timeLoad","timePrev","performance","timeDelta","paused","backgroundColor","load","texCoordsLoc","getAttribLocation","texCoords","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","enableVertexAttribArray","vertexAttribPointer","FLOAT","verticesLoc","vertices","imgList","nImg","setUniform","animated","tex","deleteTexture","att","attribs","deleteBuffer","useProgram","deleteProgram","fragString","vertString","nDelta","nTime","nDate","main","vertexShader","createShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","createProgram","deleteShader","trigger","finishTest","pre_test_paused","pre_test_frag","pre_test_vert","waitForTest","getQueryObjectEXT","QUERY_RESULT_AVAILABLE_EXT","disjoint","getParameter","GPU_DISJOINT_EXT","wasValid","timeElapsedMs","QUERY_RESULT_EXT","getExtension","createQueryEXT","beginQueryEXT","TIME_ELAPSED_EXT","endQueryEXT","urlElementOrData","_this2","element","_len","_key","setUniforms","parsed","parseUniforms","loadTexture","uniform","_len2","_key2","isDiff","getUniformLocation","texture","texureIndex","realToCSSPixels","devicePixelRatio","isCanvasVisible","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","uniformTexture","drawArrays","TRIANGLES","./gl/Texture","./gl/gl","./tools/common","./tools/mixin","babel-runtime/helpers/class-call-check","babel-runtime/helpers/create-class","babel-runtime/helpers/interop-require-default","_Promise","Texture","createTexture","valid","sourceType","loading","Uint8Array","filtering","setFiltering","activeUnit","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","setUrl","setElement","isVideo","autoplay","log","isSafari","crossOrigin","intervalID","currentTime","play","msg","pixelStorei","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","complete","videoWidth","videoHeight","texImage2D","RGBA","UNSIGNED_BYTE","powerOf2","isPowerOf2","defualtFilter","texParameteri","TEXTURE_WRAP_S","repeat","REPEAT","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_LINEAR","TEXTURE_MAG_FILTER","LINEAR","generateMipmap","NEAREST","getMaxTextureSize","MAX_TEXTURE_SIZE","../tools/common","../tools/mixin","babel-runtime/core-js/promise","makeFailHTML","optAttribs","showLink","WebGLRenderingContext","GET_A_WEBGL_BROWSER","create3DContext","OTHER_PROBLEM","ii","getContext","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","lastError","getShaderInfoLog","shaders","optLocations","attachShader","bindAttribLocation","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","prefix","_name","_toConsumableArray","babel-runtime/helpers/to-consumable-array","nextHighestPowerOfTwo","FormatNumberLength","num","getMousePos","listeners","_Set","_Object$assign","subscribe","unsubscribe","unsubscribeAll","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_getIterator","babel-runtime/core-js/get-iterator","babel-runtime/core-js/object/assign","babel-runtime/core-js/set","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_Object$keys","listSubscriptions","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","babel-runtime/core-js/object/keys","114","115","116","117","118","119","_coreShader","_coreShader2","_coreEditor","_uiMenu","_uiMenu2","_uiHelpers","_uiHelpers2","_uiErrorsDisplay","_uiErrorsDisplay2","_uiVisualDebugger","_uiVisualDebugger2","_uiExportIcon","_uiExportIcon2","_ioFileDrop","_ioFileDrop2","_ioHashWatch","_ioHashWatch2","_ioBufferManager","_ioBufferManager2","_ioLocalStorage","_ioLocalStorage2","_vendorFileSaverMinJs","_crossStorage","STORAGE_LAST_EDITOR_CONTENT","EMPTY_FRAG_SHADER","selector","createFontLink","autoupdate","imgs","displayMenu","frag_header","frag_footer","watchHash","menu","multipleBuffers","bufferManager","fileDrops","initEditor","errorsDisplay","visualDebugger","exportIcon","canvas_follow","canvas_float","float","buffers","oldContent","setContent","tabName","debugging","focusAll","filename","ge","getContent","getTitle","blob","Blob","saveAs","testingResults","clean","media","flag","pWindowOpen","openWindow","closeWindow","GlslWebComponent","createdCallback","canvas_size","tooltips","specified","glslEditor","registerElement","./core/Editor","./core/Shader","./io/BufferManager","./io/FileDrop","./io/HashWatch","./io/LocalStorage","./ui/ErrorsDisplay","./ui/ExportIcon","./ui/Helpers","./ui/Menu","./ui/VisualDebugger","./vendor/FileSaver.min.js","cross-storage","document-register-element","120","_codemirror2","autoCloseBrackets","Ctrl-Space","unfocusLine","UNFOCUS_CLASS","unfocusAll","focusLine","_codemirror","codemirror","codemirror/addon/comment/comment","codemirror/addon/dialog/dialog","codemirror/addon/display/panel","codemirror/addon/display/rulers","codemirror/addon/edit/closebrackets","codemirror/addon/edit/matchbrackets","codemirror/addon/fold/foldcode","codemirror/addon/fold/foldgutter","codemirror/addon/fold/indent-fold","codemirror/addon/hint/javascript-hint","codemirror/addon/hint/show-hint","codemirror/addon/search/search","codemirror/addon/search/searchcursor","codemirror/addon/wrap/hardwrap","codemirror/keymap/sublime","codemirror/mode/clike/clike.js","121","_glslCanvas","_glslCanvas2","_toolsInteractiveDom","_toolsMediaCapture","_toolsMediaCapture2","_uiMenuItem","_uiMenuItem2","CONTROLS_CLASSNAME","CONTROLS_PANEL_CLASSNAME","Shader","el_canvas","canvas_width","canvas_height","glslcanvas","premultipliedAlpha","preserveDrawingBuffer","media_capture","setCanvas","completeScreenshot","controls_container","control_pannel","controls","playPause","pause","isCapturing","rec","stopVideoCapture","startVideoCapture","presentationMode","togglePresentationWindow","el_control","showControls","hideControls","offsetY","canvas_draggable","canvas_resizable","canvas_snapable","subscribeInteractiveDom","snap","snapRight","requestRedraw","screenshot","video","originalSize","presentationWindow","setUpPresentationWindow","overflow","fontSize","fontFamily","fontWeight","letterSpacing","textAlign","setProperty","setCanvasSize","onPresentationWindowResize","onPresentationWindowClose","onClosePresentationWindow","../tools/interactiveDom","../tools/mediaCapture","../ui/MenuItem","../vendor/FileSaver.min.js","glslCanvas","122","BufferManager","tabs","tab","panel","getLength","addPanel","buf","bufferName","needChange","getCurrent","123","FileDrop","dropEffect","124","qstr","decodeURIComponent","HashWatch","hash","hashes","path","logs","parseFloat","125","LocalStorage","pushItem","stored","126","saveOnServer","lastReplay","getAuthor","FormData","append","dataURL","toDataURL","blobBin","atob","replay","createOpenFrameArtwork","initiateOfRequest","ofToken","OF_BASE_API_URL","OF_BASE_APP_URL","successListener","author_name","author","is_public","format","thumb_url","getOfToken","getDomOrigin","win","defaultView","parentWindow","docElem","clientTop","getDevicePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","128","isCommented","nLine","isLineAfterMain","totalLines","voidRE","getVariableType","sVariable","nLines","uniformRE","voidIN","constructRE","constructMatch","voidMatch","uniformMatch","getShaderForTypeVarInLine","sType","getResultRange","test_results","min_ms","min_line","max_ms","max_line","getMedian","half","getDeltaSum","getHits","129","setBounds","dom","hintHide","ghostdom","onTouchDown","onDown","onTouchMove","onMove","onTouchEnd","onUp","changedTouches","calc","isResizing","onRightEdge","onBottomEdge","onTopEdge","onLeftEdge","clicked","cx","cy","isMoving","canMove","MARGINS","rightScreenEdge","bottomScreenEdge","redraw","animate","currentWidth","removeProperty","currentHeight","FULLSCREEN_MARGINS","preSnapped","_y","snapped","_mixin","./mixin","130","_urls","MediaCapture","queue_screenshot","video_capture","buffer","MediaRecorder","captureStream","cap","chunks","mimeType","media_recorder","ondataavailable","createObjectURL","getTracks","track","stop","removeTrack","_this3","./urls","131","offAll","132","_createObjectURL","URL","webkitURL","133","ErrorsDisplay","testing","addError","changesObjs","er","icon","134","_modalsExportModal","_modalsExportModal2","ExportIcon","modal","presentModal","./modals/ExportModal","135","_pickersColorPicker","_pickersColorPicker2","_pickersVec3Picker","_pickersVec3Picker2","_pickersVec2Picker","_pickersVec2Picker2","_pickersFloatPicker","_pickersFloatPicker2","_pickersTypesColor","_pickersTypesColor2","_modalsModal","_modalsModal2","execAll","matchArray","Helpers","bgColor","fgColor","getString","fnColor","dimColor","selColor","link_button","debug","getMatch","activeModal","isVisible","removeModal","showAt","newColor","newDir","newpos","number","newNumber","iluminate","rta","getTypeMatch","./modals/Modal","./pickers/ColorPicker","./pickers/FloatPicker","./pickers/Vec2Picker","./pickers/Vec3Picker","./pickers/types/Color","136","_MenuItem","_MenuItem2","Menu","menus","fileInput","click","share","exportModal","bbox","./MenuItem","137","MenuItem","onClick","hiddenClass","138","makeMarker","extra_class","_toolsDebugging","_coreEditorJs","main_ge","VisualDebugger","breakpoint","testingFrag","testingLine","testingSamples","breakpoints","variableRE","mainStartsAt","testLine","sum","hits","pct","marker_html","toFixed","variable","onTest","elapsedMs","N_SAMPLES","debbuging","../core/Editor.js","../tools/debugging","139","_inherits","_Modal2","_Modal3","_ioShare","ExportModal","_Modal","CSS_PREFIX","download","codeURL","shaderURL","shareOF","success","../../io/share","../MenuItem","./Modal","babel-runtime/helpers/get","babel-runtime/helpers/inherits","140","addEvent","caller","removeEvent","Modal","onClickOutsideHandler","onClickOutside","onKeyPressHandler","classList","getModalClass","../../tools/mixin","141","drawDisk","radius","steps","colorCallback","angle","coef","PI","translate","scale","beginPath","moveTo","arc","fillStyle","fill","restore","drawCircle","lineWidth","strokeStyle","stroke","_Picker2","_Picker3","_typesColor","_typesColor2","currentTargetHeight","domCache","ColorPicker","_Picker","disc","barlum","cover","barbg","barwhite","barcursors","leftcursor","rightcursor","hsvMap","hsvMapCover","hsvMapCursor","hsvBarBGLayer","hsvBarWhiteLayer","hsvBarCursors","hsvLeftCursor","hsvRightCursor","colorDisc","luminanceBar","lbutton","colors","colorDiscRadius","pi2","cos","hsv","sin","hueRGB","luminance","onHsvDownHandler","onHsvDown","diskContext","ratio","gradient","createRadialGradient","addColorStop","createLinearGradient","fillRect","draw","onHsvMoveHandler","onHsvMove","onHsvUpHandler","onHsvUp","renderer","offsetX","atan2","sqrt","destroyEvents","../../tools/common","../../tools/interactiveDom","./Picker","./types/Color","142","_typesFloat","_typesFloat2","FloatPicker","prevOffset","clearRect","lineTo","closePath","overPoint","vel","center","./types/Float","143","Picker","drawFrame","onMouseDownHandler","onMouseMoveHandler","onMouseUpHandler","onMouseMove","onMouseUp","144","_typesVector","_typesVector2","Vec2Picker","strokeRect","./types/Vector","145","_typesMatrix","_typesMatrix2","Vec3Picker","camera","shapes","edgeColour","edges","textColour","setCenter","dragOffset","z","shape","getMult","drawShapeEdges","nodeColour","drawShapeNodes","drawShapeText","nodeRadius","coord","viewFromCamera","textBaseline","fillText","getSub","onDbClick","invM","getInv","mult","rotateX","rotateY","neg_x","neg_y","./types/Matrix","146","_ColorConverter","_ColorConverter2","Color","getColorAsRGB","_n","alpha","_n2","limitValue","getValueRanges","convert","rgb","hue2RGB","getLuminance","exceptions","hsl","cmyk","typ","vec","./ColorConverter","147","normalized","RGB","pow","valueRanges","_colors","cmy","Lab","XYZ","X","Y","Z","HEX","XYZMatrix","XYZReference","ColorConverter","hue","chroma","dependent","rgb2hsv","hsv2hsl","sv","sextant","fract","vsf","rgb2cmy","cmy2cmyk","cmyk2cmy","cmy2rgb","M","N","X3","Y3","Z3","rgb2XYZ","XYZ2Lab","Lab2XYZ","XYZ2rgb","148","Float","149","_Vector","_Vector2","Matrix","dim","theta","getTransform","newMatrix","newRow","determinant","invdet","./Vector","150","Vector","strValues","filler","getLengthSq","151","get_URL","save_link","createElementNS","can_use_save_link","MouseEvent","is_safari","webkit_req_fs","webkitRequestFileSystem","req_fs","requestFileSystem","mozRequestFileSystem","throw_outside","ex","fs_min_size","revoke","revoker","revokeObjectURL","dispatch","filesaver","event_types","auto_bom","FileSaver","no_auto_bom","object_url","target_view","blob_changed","dispatch_all","fs_error","onloadend","base64Data","DONE","readAsDataURL","INIT","abortable","create_if_not_found","exclusive","webkitSlice","TEMPORARY","getDirectory","getFile","createWriter","writer","onwriteend","toURL","ABORT_ERR","write","WRITING","NOT_FOUND_ERR","FS_proto","msSaveOrOpenBlob","onwritestart","onwrite"],"mappings":"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iBACE,QAEFC,mBACE,UAEFC,mBACE,UAEFC,oBACE,WAEFC,kBACE,MAEFC,iBACE,QAEFC,qBACE,YAEFC,oBACE,WAEFC,mBACE,UAEFC,sBACE,OAEFC,gBACE,OAEFC,cACE,YAEFC,aACE,UACA,OACA,UACA,UACA,QACA,IACA,MACA,MACA,OACA,OACA,UACA,KACA,MACA,KACA,KACA,aACA,SACA,SACA,SACA,IACA,MACA,OACA,MACA,WACA,KACA,KACA,OACA,IACA,OACA,UACA,QACA,SACA,MACA,UACA,MACA,IACA,MACA,OAEFC,kBACE,SAEFC,qBACE,YAEFC,iBACE,QAEFC,iBACE,QAEFC,kBACE,SAEFC,qBACE,YAEFC,eACE,MAEFC,iBACE,QAEFC,oBACE,KACA,KACA,KACA,KACA,KACA,MAEFC,iBACE,QAEFC,mBACE,UAEFC,kBACE,OAEFC,kBACE,SAEFC,mBACE,UAEFC,eACE,MAEFC,kBACE,SAEFC,mBACE,UAEFC,iBACE,QAEFC,gBACE,OAEFC,oBACE,WAEFC,kBACE,SAEFC,iBACE,QAEFC,qBACE,YAEFC,iBACE,QAEFC,kBACE,SAEFC,gBACE,MACA,OAEFC,kBACE,MAEFC,mBACE,UAEFC,qBACE,YAEFC,mBACE,UAEFC,mBACE,UAEFC,sBACE,KAEFC,kBACE,SAEFC,oBACE,WAEFC,gBACE,OAEFC,qBACE,YAEFC,kBACE,aACA,IACA,SAEFC,mBACE,UAEFC,mBACE,UAEFC,mBACE,UAEFC,iBACE,QAEFC,mBACE,UAEFC,iBACE,QAEFC,kBACE,SAEFC,yBACE,WAEFC,sBACE,KACA,MAEFC,qBACE,MACA,YAEFC,kBACE,SAEFC,qBACE,MAEFC,yBACE,QACA,QACA,SAEFC,qBACE,YAEFC,qBACE,YAEFC,iBACE,QAEFC,kBACE,SAEFC,kBACE,SAEFC,kBACE,MAEFC,oBACE,UACA,WACA,WAEFC,kBACE,UAGJC,OACEC,MACE,QAEFC,OACE,SAEFC,cACE,QAEFC,eACE,QAEFC,SACE,YAEFC,UACE,aAEFC,kBACE,sBAEFC,cACE,QAEFpE,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","file":"docs/js/vendors.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.GlslEditor = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\nmodule.exports = { \"default\": _dereq_(\"core-js/library/fn/get-iterator\"), __esModule: true };\n},{\"core-js/library/fn/get-iterator\":32}],2:[function(_dereq_,module,exports){\nmodule.exports = { \"default\": _dereq_(\"core-js/library/fn/object/assign\"), __esModule: true };\n},{\"core-js/library/fn/object/assign\":33}],3:[function(_dereq_,module,exports){\nmodule.exports = { \"default\": _dereq_(\"core-js/library/fn/object/create\"), __esModule: true };\n},{\"core-js/library/fn/object/create\":34}],4:[function(_dereq_,module,exports){\nmodule.exports = { \"default\": _dereq_(\"core-js/library/fn/object/define-property\"), __esModule: true };\n},{\"core-js/library/fn/object/define-property\":35}],5:[function(_dereq_,module,exports){\nmodule.exports = { \"default\": _dereq_(\"core-js/library/fn/object/get-own-property-descriptor\"), __esModule: true };\n},{\"core-js/library/fn/object/get-own-property-descriptor\":36}],6:[function(_dereq_,module,exports){\nmodule.exports = { \"default\": _dereq_(\"core-js/library/fn/object/keys\"), __esModule: true };\n},{\"core-js/library/fn/object/keys\":37}],7:[function(_dereq_,module,exports){\nmodule.exports = { \"default\": _dereq_(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };\n},{\"core-js/library/fn/object/set-prototype-of\":38}],8:[function(_dereq_,module,exports){\nmodule.exports = { \"default\": _dereq_(\"core-js/library/fn/promise\"), __esModule: true };\n},{\"core-js/library/fn/promise\":39}],9:[function(_dereq_,module,exports){\nmodule.exports = { \"default\": _dereq_(\"core-js/library/fn/set\"), __esModule: true };\n},{\"core-js/library/fn/set\":40}],10:[function(_dereq_,module,exports){\n\"use strict\";\n\nexports[\"default\"] = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nexports.__esModule = true;\n},{}],11:[function(_dereq_,module,exports){\n\"use strict\";\n\nvar _Object$defineProperty = _dereq_(\"babel-runtime/core-js/object/define-property\")[\"default\"];\n\nexports[\"default\"] = (function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n\n      _Object$defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n})();\n\nexports.__esModule = true;\n},{\"babel-runtime/core-js/object/define-property\":4}],12:[function(_dereq_,module,exports){\n\"use strict\";\n\nvar _Object$getOwnPropertyDescriptor = _dereq_(\"babel-runtime/core-js/object/get-own-property-descriptor\")[\"default\"];\n\nexports[\"default\"] = function get(_x, _x2, _x3) {\n  var _again = true;\n\n  _function: while (_again) {\n    var object = _x,\n        property = _x2,\n        receiver = _x3;\n    _again = false;\n    if (object === null) object = Function.prototype;\n\n    var desc = _Object$getOwnPropertyDescriptor(object, property);\n\n    if (desc === undefined) {\n      var parent = Object.getPrototypeOf(object);\n\n      if (parent === null) {\n        return undefined;\n      } else {\n        _x = parent;\n        _x2 = property;\n        _x3 = receiver;\n        _again = true;\n        desc = parent = undefined;\n        continue _function;\n      }\n    } else if (\"value\" in desc) {\n      return desc.value;\n    } else {\n      var getter = desc.get;\n\n      if (getter === undefined) {\n        return undefined;\n      }\n\n      return getter.call(receiver);\n    }\n  }\n};\n\nexports.__esModule = true;\n},{\"babel-runtime/core-js/object/get-own-property-descriptor\":5}],13:[function(_dereq_,module,exports){\n\"use strict\";\n\nvar _Object$create = _dereq_(\"babel-runtime/core-js/object/create\")[\"default\"];\n\nvar _Object$setPrototypeOf = _dereq_(\"babel-runtime/core-js/object/set-prototype-of\")[\"default\"];\n\nexports[\"default\"] = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = _Object$create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _Object$setPrototypeOf ? _Object$setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nexports.__esModule = true;\n},{\"babel-runtime/core-js/object/create\":3,\"babel-runtime/core-js/object/set-prototype-of\":7}],14:[function(_dereq_,module,exports){\n\"use strict\";\n\nexports[\"default\"] = function (obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n};\n\nexports.__esModule = true;\n},{}],15:[function(_dereq_,module,exports){\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(_dereq_(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var noOptions = {};\n  var nonWS = /[^\\s\\u00a0]/;\n  var Pos = CodeMirror.Pos;\n\n  function firstNonWS(str) {\n    var found = str.search(nonWS);\n    return found == -1 ? 0 : found;\n  }\n\n  CodeMirror.commands.toggleComment = function(cm) {\n    cm.toggleComment();\n  };\n\n  CodeMirror.defineExtension(\"toggleComment\", function(options) {\n    if (!options) options = noOptions;\n    var cm = this;\n    var minLine = Infinity, ranges = this.listSelections(), mode = null;\n    for (var i = ranges.length - 1; i >= 0; i--) {\n      var from = ranges[i].from(), to = ranges[i].to();\n      if (from.line >= minLine) continue;\n      if (to.line >= minLine) to = Pos(minLine, 0);\n      minLine = from.line;\n      if (mode == null) {\n        if (cm.uncomment(from, to, options)) mode = \"un\";\n        else { cm.lineComment(from, to, options); mode = \"line\"; }\n      } else if (mode == \"un\") {\n        cm.uncomment(from, to, options);\n      } else {\n        cm.lineComment(from, to, options);\n      }\n    }\n  });\n\n  CodeMirror.defineExtension(\"lineComment\", function(from, to, options) {\n    if (!options) options = noOptions;\n    var self = this, mode = self.getModeAt(from);\n    var commentString = options.lineComment || mode.lineComment;\n    if (!commentString) {\n      if (options.blockCommentStart || mode.blockCommentStart) {\n        options.fullLines = true;\n        self.blockComment(from, to, options);\n      }\n      return;\n    }\n    var firstLine = self.getLine(from.line);\n    if (firstLine == null) return;\n    var end = Math.min(to.ch != 0 || to.line == from.line ? to.line + 1 : to.line, self.lastLine() + 1);\n    var pad = options.padding == null ? \" \" : options.padding;\n    var blankLines = options.commentBlankLines || from.line == to.line;\n\n    self.operation(function() {\n      if (options.indent) {\n        var baseString = null;\n        for (var i = from.line; i < end; ++i) {\n          var line = self.getLine(i);\n          var whitespace = line.slice(0, firstNonWS(line));\n          if (baseString == null || baseString.length > whitespace.length) {\n            baseString = whitespace;\n          }\n        }\n        for (var i = from.line; i < end; ++i) {\n          var line = self.getLine(i), cut = baseString.length;\n          if (!blankLines && !nonWS.test(line)) continue;\n          if (line.slice(0, cut) != baseString) cut = firstNonWS(line);\n          self.replaceRange(baseString + commentString + pad, Pos(i, 0), Pos(i, cut));\n        }\n      } else {\n        for (var i = from.line; i < end; ++i) {\n          if (blankLines || nonWS.test(self.getLine(i)))\n            self.replaceRange(commentString + pad, Pos(i, 0));\n        }\n      }\n    });\n  });\n\n  CodeMirror.defineExtension(\"blockComment\", function(from, to, options) {\n    if (!options) options = noOptions;\n    var self = this, mode = self.getModeAt(from);\n    var startString = options.blockCommentStart || mode.blockCommentStart;\n    var endString = options.blockCommentEnd || mode.blockCommentEnd;\n    if (!startString || !endString) {\n      if ((options.lineComment || mode.lineComment) && options.fullLines != false)\n        self.lineComment(from, to, options);\n      return;\n    }\n\n    var end = Math.min(to.line, self.lastLine());\n    if (end != from.line && to.ch == 0 && nonWS.test(self.getLine(end))) --end;\n\n    var pad = options.padding == null ? \" \" : options.padding;\n    if (from.line > end) return;\n\n    self.operation(function() {\n      if (options.fullLines != false) {\n        var lastLineHasText = nonWS.test(self.getLine(end));\n        self.replaceRange(pad + endString, Pos(end));\n        self.replaceRange(startString + pad, Pos(from.line, 0));\n        var lead = options.blockCommentLead || mode.blockCommentLead;\n        if (lead != null) for (var i = from.line + 1; i <= end; ++i)\n          if (i != end || lastLineHasText)\n            self.replaceRange(lead + pad, Pos(i, 0));\n      } else {\n        self.replaceRange(endString, to);\n        self.replaceRange(startString, from);\n      }\n    });\n  });\n\n  CodeMirror.defineExtension(\"uncomment\", function(from, to, options) {\n    if (!options) options = noOptions;\n    var self = this, mode = self.getModeAt(from);\n    var end = Math.min(to.ch != 0 || to.line == from.line ? to.line : to.line - 1, self.lastLine()), start = Math.min(from.line, end);\n\n    // Try finding line comments\n    var lineString = options.lineComment || mode.lineComment, lines = [];\n    var pad = options.padding == null ? \" \" : options.padding, didSomething;\n    lineComment: {\n      if (!lineString) break lineComment;\n      for (var i = start; i <= end; ++i) {\n        var line = self.getLine(i);\n        var found = line.indexOf(lineString);\n        if (found > -1 && !/comment/.test(self.getTokenTypeAt(Pos(i, found + 1)))) found = -1;\n        if (found == -1 && (i != end || i == start) && nonWS.test(line)) break lineComment;\n        if (found > -1 && nonWS.test(line.slice(0, found))) break lineComment;\n        lines.push(line);\n      }\n      self.operation(function() {\n        for (var i = start; i <= end; ++i) {\n          var line = lines[i - start];\n          var pos = line.indexOf(lineString), endPos = pos + lineString.length;\n          if (pos < 0) continue;\n          if (line.slice(endPos, endPos + pad.length) == pad) endPos += pad.length;\n          didSomething = true;\n          self.replaceRange(\"\", Pos(i, pos), Pos(i, endPos));\n        }\n      });\n      if (didSomething) return true;\n    }\n\n    // Try block comments\n    var startString = options.blockCommentStart || mode.blockCommentStart;\n    var endString = options.blockCommentEnd || mode.blockCommentEnd;\n    if (!startString || !endString) return false;\n    var lead = options.blockCommentLead || mode.blockCommentLead;\n    var startLine = self.getLine(start), endLine = end == start ? startLine : self.getLine(end);\n    var open = startLine.indexOf(startString), close = endLine.lastIndexOf(endString);\n    if (close == -1 && start != end) {\n      endLine = self.getLine(--end);\n      close = endLine.lastIndexOf(endString);\n    }\n    if (open == -1 || close == -1 ||\n        !/comment/.test(self.getTokenTypeAt(Pos(start, open + 1))) ||\n        !/comment/.test(self.getTokenTypeAt(Pos(end, close + 1))))\n      return false;\n\n    // Avoid killing block comments completely outside the selection.\n    // Positions of the last startString before the start of the selection, and the first endString after it.\n    var lastStart = startLine.lastIndexOf(startString, from.ch);\n    var firstEnd = lastStart == -1 ? -1 : startLine.slice(0, from.ch).indexOf(endString, lastStart + startString.length);\n    if (lastStart != -1 && firstEnd != -1 && firstEnd + endString.length != from.ch) return false;\n    // Positions of the first endString after the end of the selection, and the last startString before it.\n    firstEnd = endLine.indexOf(endString, to.ch);\n    var almostLastStart = endLine.slice(to.ch).lastIndexOf(startString, firstEnd - to.ch);\n    lastStart = (firstEnd == -1 || almostLastStart == -1) ? -1 : to.ch + almostLastStart;\n    if (firstEnd != -1 && lastStart != -1 && lastStart != to.ch) return false;\n\n    self.operation(function() {\n      self.replaceRange(\"\", Pos(end, close - (pad && endLine.slice(close - pad.length, close) == pad ? pad.length : 0)),\n                        Pos(end, close + endString.length));\n      var openEnd = open + startString.length;\n      if (pad && startLine.slice(openEnd, openEnd + pad.length) == pad) openEnd += pad.length;\n      self.replaceRange(\"\", Pos(start, open), Pos(start, openEnd));\n      if (lead) for (var i = start + 1; i <= end; ++i) {\n        var line = self.getLine(i), found = line.indexOf(lead);\n        if (found == -1 || nonWS.test(line.slice(0, found))) continue;\n        var foundEnd = found + lead.length;\n        if (pad && line.slice(foundEnd, foundEnd + pad.length) == pad) foundEnd += pad.length;\n        self.replaceRange(\"\", Pos(i, found), Pos(i, foundEnd));\n      }\n    });\n    return true;\n  });\n});\n\n},{\"../../lib/codemirror\":30}],16:[function(_dereq_,module,exports){\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n// Open simple dialogs on top of an editor. Relies on dialog.css.\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(_dereq_(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  function dialogDiv(cm, template, bottom) {\n    var wrap = cm.getWrapperElement();\n    var dialog;\n    dialog = wrap.appendChild(document.createElement(\"div\"));\n    if (bottom)\n      dialog.className = \"CodeMirror-dialog CodeMirror-dialog-bottom\";\n    else\n      dialog.className = \"CodeMirror-dialog CodeMirror-dialog-top\";\n\n    if (typeof template == \"string\") {\n      dialog.innerHTML = template;\n    } else { // Assuming it's a detached DOM element.\n      dialog.appendChild(template);\n    }\n    return dialog;\n  }\n\n  function closeNotification(cm, newVal) {\n    if (cm.state.currentNotificationClose)\n      cm.state.currentNotificationClose();\n    cm.state.currentNotificationClose = newVal;\n  }\n\n  CodeMirror.defineExtension(\"openDialog\", function(template, callback, options) {\n    if (!options) options = {};\n\n    closeNotification(this, null);\n\n    var dialog = dialogDiv(this, template, options.bottom);\n    var closed = false, me = this;\n    function close(newVal) {\n      if (typeof newVal == 'string') {\n        inp.value = newVal;\n      } else {\n        if (closed) return;\n        closed = true;\n        dialog.parentNode.removeChild(dialog);\n        me.focus();\n\n        if (options.onClose) options.onClose(dialog);\n      }\n    }\n\n    var inp = dialog.getElementsByTagName(\"input\")[0], button;\n    if (inp) {\n      if (options.value) {\n        inp.value = options.value;\n        if (options.selectValueOnOpen !== false) {\n          inp.select();\n        }\n      }\n\n      if (options.onInput)\n        CodeMirror.on(inp, \"input\", function(e) { options.onInput(e, inp.value, close);});\n      if (options.onKeyUp)\n        CodeMirror.on(inp, \"keyup\", function(e) {options.onKeyUp(e, inp.value, close);});\n\n      CodeMirror.on(inp, \"keydown\", function(e) {\n        if (options && options.onKeyDown && options.onKeyDown(e, inp.value, close)) { return; }\n        if (e.keyCode == 27 || (options.closeOnEnter !== false && e.keyCode == 13)) {\n          inp.blur();\n          CodeMirror.e_stop(e);\n          close();\n        }\n        if (e.keyCode == 13) callback(inp.value, e);\n      });\n\n      if (options.closeOnBlur !== false) CodeMirror.on(inp, \"blur\", close);\n\n      inp.focus();\n    } else if (button = dialog.getElementsByTagName(\"button\")[0]) {\n      CodeMirror.on(button, \"click\", function() {\n        close();\n        me.focus();\n      });\n\n      if (options.closeOnBlur !== false) CodeMirror.on(button, \"blur\", close);\n\n      button.focus();\n    }\n    return close;\n  });\n\n  CodeMirror.defineExtension(\"openConfirm\", function(template, callbacks, options) {\n    closeNotification(this, null);\n    var dialog = dialogDiv(this, template, options && options.bottom);\n    var buttons = dialog.getElementsByTagName(\"button\");\n    var closed = false, me = this, blurring = 1;\n    function close() {\n      if (closed) return;\n      closed = true;\n      dialog.parentNode.removeChild(dialog);\n      me.focus();\n    }\n    buttons[0].focus();\n    for (var i = 0; i < buttons.length; ++i) {\n      var b = buttons[i];\n      (function(callback) {\n        CodeMirror.on(b, \"click\", function(e) {\n          CodeMirror.e_preventDefault(e);\n          close();\n          if (callback) callback(me);\n        });\n      })(callbacks[i]);\n      CodeMirror.on(b, \"blur\", function() {\n        --blurring;\n        setTimeout(function() { if (blurring <= 0) close(); }, 200);\n      });\n      CodeMirror.on(b, \"focus\", function() { ++blurring; });\n    }\n  });\n\n  /*\n   * openNotification\n   * Opens a notification, that can be closed with an optional timer\n   * (default 5000ms timer) and always closes on click.\n   *\n   * If a notification is opened while another is opened, it will close the\n   * currently opened one and open the new one immediately.\n   */\n  CodeMirror.defineExtension(\"openNotification\", function(template, options) {\n    closeNotification(this, close);\n    var dialog = dialogDiv(this, template, options && options.bottom);\n    var closed = false, doneTimer;\n    var duration = options && typeof options.duration !== \"undefined\" ? options.duration : 5000;\n\n    function close() {\n      if (closed) return;\n      closed = true;\n      clearTimeout(doneTimer);\n      dialog.parentNode.removeChild(dialog);\n    }\n\n    CodeMirror.on(dialog, 'click', function(e) {\n      CodeMirror.e_preventDefault(e);\n      close();\n    });\n\n    if (duration)\n      doneTimer = setTimeout(close, duration);\n\n    return close;\n  });\n});\n\n},{\"../../lib/codemirror\":30}],17:[function(_dereq_,module,exports){\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(_dereq_(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  CodeMirror.defineExtension(\"addPanel\", function(node, options) {\n    options = options || {};\n\n    if (!this.state.panels) initPanels(this);\n\n    var info = this.state.panels;\n    var wrapper = info.wrapper;\n    var cmWrapper = this.getWrapperElement();\n\n    if (options.after instanceof Panel && !options.after.cleared) {\n      wrapper.insertBefore(node, options.before.node.nextSibling);\n    } else if (options.before instanceof Panel && !options.before.cleared) {\n      wrapper.insertBefore(node, options.before.node);\n    } else if (options.replace instanceof Panel && !options.replace.cleared) {\n      wrapper.insertBefore(node, options.replace.node);\n      options.replace.clear();\n    } else if (options.position == \"bottom\") {\n      wrapper.appendChild(node);\n    } else if (options.position == \"before-bottom\") {\n      wrapper.insertBefore(node, cmWrapper.nextSibling);\n    } else if (options.position == \"after-top\") {\n      wrapper.insertBefore(node, cmWrapper);\n    } else {\n      wrapper.insertBefore(node, wrapper.firstChild);\n    }\n\n    var height = (options && options.height) || node.offsetHeight;\n    this._setSize(null, info.heightLeft -= height);\n    info.panels++;\n    return new Panel(this, node, options, height);\n  });\n\n  function Panel(cm, node, options, height) {\n    this.cm = cm;\n    this.node = node;\n    this.options = options;\n    this.height = height;\n    this.cleared = false;\n  }\n\n  Panel.prototype.clear = function() {\n    if (this.cleared) return;\n    this.cleared = true;\n    var info = this.cm.state.panels;\n    this.cm._setSize(null, info.heightLeft += this.height);\n    info.wrapper.removeChild(this.node);\n    if (--info.panels == 0) removePanels(this.cm);\n  };\n\n  Panel.prototype.changed = function(height) {\n    var newHeight = height == null ? this.node.offsetHeight : height;\n    var info = this.cm.state.panels;\n    this.cm._setSize(null, info.height += (newHeight - this.height));\n    this.height = newHeight;\n  };\n\n  function initPanels(cm) {\n    var wrap = cm.getWrapperElement();\n    var style = window.getComputedStyle ? window.getComputedStyle(wrap) : wrap.currentStyle;\n    var height = parseInt(style.height);\n    var info = cm.state.panels = {\n      setHeight: wrap.style.height,\n      heightLeft: height,\n      panels: 0,\n      wrapper: document.createElement(\"div\")\n    };\n    wrap.parentNode.insertBefore(info.wrapper, wrap);\n    var hasFocus = cm.hasFocus();\n    info.wrapper.appendChild(wrap);\n    if (hasFocus) cm.focus();\n\n    cm._setSize = cm.setSize;\n    if (height != null) cm.setSize = function(width, newHeight) {\n      if (newHeight == null) return this._setSize(width, newHeight);\n      info.setHeight = newHeight;\n      if (typeof newHeight != \"number\") {\n        var px = /^(\\d+\\.?\\d*)px$/.exec(newHeight);\n        if (px) {\n          newHeight = Number(px[1]);\n        } else {\n          info.wrapper.style.height = newHeight;\n          newHeight = info.wrapper.offsetHeight;\n          info.wrapper.style.height = \"\";\n        }\n      }\n      cm._setSize(width, info.heightLeft += (newHeight - height));\n      height = newHeight;\n    };\n  }\n\n  function removePanels(cm) {\n    var info = cm.state.panels;\n    cm.state.panels = null;\n\n    var wrap = cm.getWrapperElement();\n    info.wrapper.parentNode.replaceChild(wrap, info.wrapper);\n    wrap.style.height = info.setHeight;\n    cm.setSize = cm._setSize;\n    cm.setSize();\n  }\n});\n\n},{\"../../lib/codemirror\":30}],18:[function(_dereq_,module,exports){\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(_dereq_(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"rulers\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      clearRulers(cm);\n      cm.off(\"refresh\", refreshRulers);\n    }\n    if (val && val.length) {\n      setRulers(cm);\n      cm.on(\"refresh\", refreshRulers);\n    }\n  });\n\n  function clearRulers(cm) {\n    for (var i = cm.display.lineSpace.childNodes.length - 1; i >= 0; i--) {\n      var node = cm.display.lineSpace.childNodes[i];\n      if (/(^|\\s)CodeMirror-ruler($|\\s)/.test(node.className))\n        node.parentNode.removeChild(node);\n    }\n  }\n\n  function setRulers(cm) {\n    var val = cm.getOption(\"rulers\");\n    var cw = cm.defaultCharWidth();\n    var left = cm.charCoords(CodeMirror.Pos(cm.firstLine(), 0), \"div\").left;\n    var minH = cm.display.scroller.offsetHeight + 30;\n    for (var i = 0; i < val.length; i++) {\n      var elt = document.createElement(\"div\");\n      elt.className = \"CodeMirror-ruler\";\n      var col, conf = val[i];\n      if (typeof conf == \"number\") {\n        col = conf;\n      } else {\n        col = conf.column;\n        if (conf.className) elt.className += \" \" + conf.className;\n        if (conf.color) elt.style.borderColor = conf.color;\n        if (conf.lineStyle) elt.style.borderLeftStyle = conf.lineStyle;\n        if (conf.width) elt.style.borderLeftWidth = conf.width;\n      }\n      elt.style.left = (left + col * cw) + \"px\";\n      elt.style.top = \"-50px\";\n      elt.style.bottom = \"-20px\";\n      elt.style.minHeight = minH + \"px\";\n      cm.display.lineSpace.insertBefore(elt, cm.display.cursorDiv);\n    }\n  }\n\n  function refreshRulers(cm) {\n    clearRulers(cm);\n    setRulers(cm);\n  }\n});\n\n},{\"../../lib/codemirror\":30}],19:[function(_dereq_,module,exports){\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(_dereq_(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  var defaults = {\n    pairs: \"()[]{}''\\\"\\\"\",\n    triples: \"\",\n    explode: \"[]{}\"\n  };\n\n  var Pos = CodeMirror.Pos;\n\n  CodeMirror.defineOption(\"autoCloseBrackets\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      cm.removeKeyMap(keyMap);\n      cm.state.closeBrackets = null;\n    }\n    if (val) {\n      cm.state.closeBrackets = val;\n      cm.addKeyMap(keyMap);\n    }\n  });\n\n  function getOption(conf, name) {\n    if (name == \"pairs\" && typeof conf == \"string\") return conf;\n    if (typeof conf == \"object\" && conf[name] != null) return conf[name];\n    return defaults[name];\n  }\n\n  var bind = defaults.pairs + \"`\";\n  var keyMap = {Backspace: handleBackspace, Enter: handleEnter};\n  for (var i = 0; i < bind.length; i++)\n    keyMap[\"'\" + bind.charAt(i) + \"'\"] = handler(bind.charAt(i));\n\n  function handler(ch) {\n    return function(cm) { return handleChar(cm, ch); };\n  }\n\n  function getConfig(cm) {\n    var deflt = cm.state.closeBrackets;\n    if (!deflt) return null;\n    var mode = cm.getModeAt(cm.getCursor());\n    return mode.closeBrackets || deflt;\n  }\n\n  function handleBackspace(cm) {\n    var conf = getConfig(cm);\n    if (!conf || cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n\n    var pairs = getOption(conf, \"pairs\");\n    var ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      var around = charsAround(cm, ranges[i].head);\n      if (!around || pairs.indexOf(around) % 2 != 0) return CodeMirror.Pass;\n    }\n    for (var i = ranges.length - 1; i >= 0; i--) {\n      var cur = ranges[i].head;\n      cm.replaceRange(\"\", Pos(cur.line, cur.ch - 1), Pos(cur.line, cur.ch + 1));\n    }\n  }\n\n  function handleEnter(cm) {\n    var conf = getConfig(cm);\n    var explode = conf && getOption(conf, \"explode\");\n    if (!explode || cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n\n    var ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      var around = charsAround(cm, ranges[i].head);\n      if (!around || explode.indexOf(around) % 2 != 0) return CodeMirror.Pass;\n    }\n    cm.operation(function() {\n      cm.replaceSelection(\"\\n\\n\", null);\n      cm.execCommand(\"goCharLeft\");\n      ranges = cm.listSelections();\n      for (var i = 0; i < ranges.length; i++) {\n        var line = ranges[i].head.line;\n        cm.indentLine(line, null, true);\n        cm.indentLine(line + 1, null, true);\n      }\n    });\n  }\n\n  function contractSelection(sel) {\n    var inverted = CodeMirror.cmpPos(sel.anchor, sel.head) > 0;\n    return {anchor: new Pos(sel.anchor.line, sel.anchor.ch + (inverted ? -1 : 1)),\n            head: new Pos(sel.head.line, sel.head.ch + (inverted ? 1 : -1))};\n  }\n\n  function handleChar(cm, ch) {\n    var conf = getConfig(cm);\n    if (!conf || cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n\n    var pairs = getOption(conf, \"pairs\");\n    var pos = pairs.indexOf(ch);\n    if (pos == -1) return CodeMirror.Pass;\n    var triples = getOption(conf, \"triples\");\n\n    var identical = pairs.charAt(pos + 1) == ch;\n    var ranges = cm.listSelections();\n    var opening = pos % 2 == 0;\n\n    var type, next;\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i], cur = range.head, curType;\n      var next = cm.getRange(cur, Pos(cur.line, cur.ch + 1));\n      if (opening && !range.empty()) {\n        curType = \"surround\";\n      } else if ((identical || !opening) && next == ch) {\n        if (triples.indexOf(ch) >= 0 && cm.getRange(cur, Pos(cur.line, cur.ch + 3)) == ch + ch + ch)\n          curType = \"skipThree\";\n        else\n          curType = \"skip\";\n      } else if (identical && cur.ch > 1 && triples.indexOf(ch) >= 0 &&\n                 cm.getRange(Pos(cur.line, cur.ch - 2), cur) == ch + ch &&\n                 (cur.ch <= 2 || cm.getRange(Pos(cur.line, cur.ch - 3), Pos(cur.line, cur.ch - 2)) != ch)) {\n        curType = \"addFour\";\n      } else if (identical) {\n        if (!CodeMirror.isWordChar(next) && enteringString(cm, cur, ch)) curType = \"both\";\n        else return CodeMirror.Pass;\n      } else if (opening && (cm.getLine(cur.line).length == cur.ch ||\n                             isClosingBracket(next, pairs) ||\n                             /\\s/.test(next))) {\n        curType = \"both\";\n      } else {\n        return CodeMirror.Pass;\n      }\n      if (!type) type = curType;\n      else if (type != curType) return CodeMirror.Pass;\n    }\n\n    var left = pos % 2 ? pairs.charAt(pos - 1) : ch;\n    var right = pos % 2 ? ch : pairs.charAt(pos + 1);\n    cm.operation(function() {\n      if (type == \"skip\") {\n        cm.execCommand(\"goCharRight\");\n      } else if (type == \"skipThree\") {\n        for (var i = 0; i < 3; i++)\n          cm.execCommand(\"goCharRight\");\n      } else if (type == \"surround\") {\n        var sels = cm.getSelections();\n        for (var i = 0; i < sels.length; i++)\n          sels[i] = left + sels[i] + right;\n        cm.replaceSelections(sels, \"around\");\n        sels = cm.listSelections().slice();\n        for (var i = 0; i < sels.length; i++)\n          sels[i] = contractSelection(sels[i]);\n        cm.setSelections(sels);\n      } else if (type == \"both\") {\n        cm.replaceSelection(left + right, null);\n        cm.triggerElectric(left + right);\n        cm.execCommand(\"goCharLeft\");\n      } else if (type == \"addFour\") {\n        cm.replaceSelection(left + left + left + left, \"before\");\n        cm.execCommand(\"goCharRight\");\n      }\n    });\n  }\n\n  function isClosingBracket(ch, pairs) {\n    var pos = pairs.lastIndexOf(ch);\n    return pos > -1 && pos % 2 == 1;\n  }\n\n  function charsAround(cm, pos) {\n    var str = cm.getRange(Pos(pos.line, pos.ch - 1),\n                          Pos(pos.line, pos.ch + 1));\n    return str.length == 2 ? str : null;\n  }\n\n  // Project the token type that will exists after the given char is\n  // typed, and use it to determine whether it would cause the start\n  // of a string token.\n  function enteringString(cm, pos, ch) {\n    var line = cm.getLine(pos.line);\n    var token = cm.getTokenAt(pos);\n    if (/\\bstring2?\\b/.test(token.type)) return false;\n    var stream = new CodeMirror.StringStream(line.slice(0, pos.ch) + ch + line.slice(pos.ch), 4);\n    stream.pos = stream.start = token.start;\n    for (;;) {\n      var type1 = cm.getMode().token(stream, token.state);\n      if (stream.pos >= pos.ch + 1) return /\\bstring2?\\b/.test(type1);\n      stream.start = stream.pos;\n    }\n  }\n});\n\n},{\"../../lib/codemirror\":30}],20:[function(_dereq_,module,exports){\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(_dereq_(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  var ie_lt8 = /MSIE \\d/.test(navigator.userAgent) &&\n    (document.documentMode == null || document.documentMode < 8);\n\n  var Pos = CodeMirror.Pos;\n\n  var matching = {\"(\": \")>\", \")\": \"(<\", \"[\": \"]>\", \"]\": \"[<\", \"{\": \"}>\", \"}\": \"{<\"};\n\n  function findMatchingBracket(cm, where, strict, config) {\n    var line = cm.getLineHandle(where.line), pos = where.ch - 1;\n    var match = (pos >= 0 && matching[line.text.charAt(pos)]) || matching[line.text.charAt(++pos)];\n    if (!match) return null;\n    var dir = match.charAt(1) == \">\" ? 1 : -1;\n    if (strict && (dir > 0) != (pos == where.ch)) return null;\n    var style = cm.getTokenTypeAt(Pos(where.line, pos + 1));\n\n    var found = scanForBracket(cm, Pos(where.line, pos + (dir > 0 ? 1 : 0)), dir, style || null, config);\n    if (found == null) return null;\n    return {from: Pos(where.line, pos), to: found && found.pos,\n            match: found && found.ch == match.charAt(0), forward: dir > 0};\n  }\n\n  // bracketRegex is used to specify which type of bracket to scan\n  // should be a regexp, e.g. /[[\\]]/\n  //\n  // Note: If \"where\" is on an open bracket, then this bracket is ignored.\n  //\n  // Returns false when no bracket was found, null when it reached\n  // maxScanLines and gave up\n  function scanForBracket(cm, where, dir, style, config) {\n    var maxScanLen = (config && config.maxScanLineLength) || 10000;\n    var maxScanLines = (config && config.maxScanLines) || 1000;\n\n    var stack = [];\n    var re = config && config.bracketRegex ? config.bracketRegex : /[(){}[\\]]/;\n    var lineEnd = dir > 0 ? Math.min(where.line + maxScanLines, cm.lastLine() + 1)\n                          : Math.max(cm.firstLine() - 1, where.line - maxScanLines);\n    for (var lineNo = where.line; lineNo != lineEnd; lineNo += dir) {\n      var line = cm.getLine(lineNo);\n      if (!line) continue;\n      var pos = dir > 0 ? 0 : line.length - 1, end = dir > 0 ? line.length : -1;\n      if (line.length > maxScanLen) continue;\n      if (lineNo == where.line) pos = where.ch - (dir < 0 ? 1 : 0);\n      for (; pos != end; pos += dir) {\n        var ch = line.charAt(pos);\n        if (re.test(ch) && (style === undefined || cm.getTokenTypeAt(Pos(lineNo, pos + 1)) == style)) {\n          var match = matching[ch];\n          if ((match.charAt(1) == \">\") == (dir > 0)) stack.push(ch);\n          else if (!stack.length) return {pos: Pos(lineNo, pos), ch: ch};\n          else stack.pop();\n        }\n      }\n    }\n    return lineNo - dir == (dir > 0 ? cm.lastLine() : cm.firstLine()) ? false : null;\n  }\n\n  function matchBrackets(cm, autoclear, config) {\n    // Disable brace matching in long lines, since it'll cause hugely slow updates\n    var maxHighlightLen = cm.state.matchBrackets.maxHighlightLineLength || 1000;\n    var marks = [], ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++) {\n      var match = ranges[i].empty() && findMatchingBracket(cm, ranges[i].head, false, config);\n      if (match && cm.getLine(match.from.line).length <= maxHighlightLen) {\n        var style = match.match ? \"CodeMirror-matchingbracket\" : \"CodeMirror-nonmatchingbracket\";\n        marks.push(cm.markText(match.from, Pos(match.from.line, match.from.ch + 1), {className: style}));\n        if (match.to && cm.getLine(match.to.line).length <= maxHighlightLen)\n          marks.push(cm.markText(match.to, Pos(match.to.line, match.to.ch + 1), {className: style}));\n      }\n    }\n\n    if (marks.length) {\n      // Kludge to work around the IE bug from issue #1193, where text\n      // input stops going to the textare whever this fires.\n      if (ie_lt8 && cm.state.focused) cm.focus();\n\n      var clear = function() {\n        cm.operation(function() {\n          for (var i = 0; i < marks.length; i++) marks[i].clear();\n        });\n      };\n      if (autoclear) setTimeout(clear, 800);\n      else return clear;\n    }\n  }\n\n  var currentlyHighlighted = null;\n  function doMatchBrackets(cm) {\n    cm.operation(function() {\n      if (currentlyHighlighted) {currentlyHighlighted(); currentlyHighlighted = null;}\n      currentlyHighlighted = matchBrackets(cm, false, cm.state.matchBrackets);\n    });\n  }\n\n  CodeMirror.defineOption(\"matchBrackets\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init)\n      cm.off(\"cursorActivity\", doMatchBrackets);\n    if (val) {\n      cm.state.matchBrackets = typeof val == \"object\" ? val : {};\n      cm.on(\"cursorActivity\", doMatchBrackets);\n    }\n  });\n\n  CodeMirror.defineExtension(\"matchBrackets\", function() {matchBrackets(this, true);});\n  CodeMirror.defineExtension(\"findMatchingBracket\", function(pos, strict, config){\n    return findMatchingBracket(this, pos, strict, config);\n  });\n  CodeMirror.defineExtension(\"scanForBracket\", function(pos, dir, style, config){\n    return scanForBracket(this, pos, dir, style, config);\n  });\n});\n\n},{\"../../lib/codemirror\":30}],21:[function(_dereq_,module,exports){\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(_dereq_(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  function doFold(cm, pos, options, force) {\n    if (options && options.call) {\n      var finder = options;\n      options = null;\n    } else {\n      var finder = getOption(cm, options, \"rangeFinder\");\n    }\n    if (typeof pos == \"number\") pos = CodeMirror.Pos(pos, 0);\n    var minSize = getOption(cm, options, \"minFoldSize\");\n\n    function getRange(allowFolded) {\n      var range = finder(cm, pos);\n      if (!range || range.to.line - range.from.line < minSize) return null;\n      var marks = cm.findMarksAt(range.from);\n      for (var i = 0; i < marks.length; ++i) {\n        if (marks[i].__isFold && force !== \"fold\") {\n          if (!allowFolded) return null;\n          range.cleared = true;\n          marks[i].clear();\n        }\n      }\n      return range;\n    }\n\n    var range = getRange(true);\n    if (getOption(cm, options, \"scanUp\")) while (!range && pos.line > cm.firstLine()) {\n      pos = CodeMirror.Pos(pos.line - 1, 0);\n      range = getRange(false);\n    }\n    if (!range || range.cleared || force === \"unfold\") return;\n\n    var myWidget = makeWidget(cm, options);\n    CodeMirror.on(myWidget, \"mousedown\", function(e) {\n      myRange.clear();\n      CodeMirror.e_preventDefault(e);\n    });\n    var myRange = cm.markText(range.from, range.to, {\n      replacedWith: myWidget,\n      clearOnEnter: true,\n      __isFold: true\n    });\n    myRange.on(\"clear\", function(from, to) {\n      CodeMirror.signal(cm, \"unfold\", cm, from, to);\n    });\n    CodeMirror.signal(cm, \"fold\", cm, range.from, range.to);\n  }\n\n  function makeWidget(cm, options) {\n    var widget = getOption(cm, options, \"widget\");\n    if (typeof widget == \"string\") {\n      var text = document.createTextNode(widget);\n      widget = document.createElement(\"span\");\n      widget.appendChild(text);\n      widget.className = \"CodeMirror-foldmarker\";\n    }\n    return widget;\n  }\n\n  // Clumsy backwards-compatible interface\n  CodeMirror.newFoldFunction = function(rangeFinder, widget) {\n    return function(cm, pos) { doFold(cm, pos, {rangeFinder: rangeFinder, widget: widget}); };\n  };\n\n  // New-style interface\n  CodeMirror.defineExtension(\"foldCode\", function(pos, options, force) {\n    doFold(this, pos, options, force);\n  });\n\n  CodeMirror.defineExtension(\"isFolded\", function(pos) {\n    var marks = this.findMarksAt(pos);\n    for (var i = 0; i < marks.length; ++i)\n      if (marks[i].__isFold) return true;\n  });\n\n  CodeMirror.commands.toggleFold = function(cm) {\n    cm.foldCode(cm.getCursor());\n  };\n  CodeMirror.commands.fold = function(cm) {\n    cm.foldCode(cm.getCursor(), null, \"fold\");\n  };\n  CodeMirror.commands.unfold = function(cm) {\n    cm.foldCode(cm.getCursor(), null, \"unfold\");\n  };\n  CodeMirror.commands.foldAll = function(cm) {\n    cm.operation(function() {\n      for (var i = cm.firstLine(), e = cm.lastLine(); i <= e; i++)\n        cm.foldCode(CodeMirror.Pos(i, 0), null, \"fold\");\n    });\n  };\n  CodeMirror.commands.unfoldAll = function(cm) {\n    cm.operation(function() {\n      for (var i = cm.firstLine(), e = cm.lastLine(); i <= e; i++)\n        cm.foldCode(CodeMirror.Pos(i, 0), null, \"unfold\");\n    });\n  };\n\n  CodeMirror.registerHelper(\"fold\", \"combine\", function() {\n    var funcs = Array.prototype.slice.call(arguments, 0);\n    return function(cm, start) {\n      for (var i = 0; i < funcs.length; ++i) {\n        var found = funcs[i](cm, start);\n        if (found) return found;\n      }\n    };\n  });\n\n  CodeMirror.registerHelper(\"fold\", \"auto\", function(cm, start) {\n    var helpers = cm.getHelpers(start, \"fold\");\n    for (var i = 0; i < helpers.length; i++) {\n      var cur = helpers[i](cm, start);\n      if (cur) return cur;\n    }\n  });\n\n  var defaultOptions = {\n    rangeFinder: CodeMirror.fold.auto,\n    widget: \"\\u2194\",\n    minFoldSize: 0,\n    scanUp: false\n  };\n\n  CodeMirror.defineOption(\"foldOptions\", null);\n\n  function getOption(cm, options, name) {\n    if (options && options[name] !== undefined)\n      return options[name];\n    var editorOptions = cm.options.foldOptions;\n    if (editorOptions && editorOptions[name] !== undefined)\n      return editorOptions[name];\n    return defaultOptions[name];\n  }\n\n  CodeMirror.defineExtension(\"foldOption\", function(options, name) {\n    return getOption(this, options, name);\n  });\n});\n\n},{\"../../lib/codemirror\":30}],22:[function(_dereq_,module,exports){\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(_dereq_(\"../../lib/codemirror\"), _dereq_(\"./foldcode\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"./foldcode\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"foldGutter\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      cm.clearGutter(cm.state.foldGutter.options.gutter);\n      cm.state.foldGutter = null;\n      cm.off(\"gutterClick\", onGutterClick);\n      cm.off(\"change\", onChange);\n      cm.off(\"viewportChange\", onViewportChange);\n      cm.off(\"fold\", onFold);\n      cm.off(\"unfold\", onFold);\n      cm.off(\"swapDoc\", updateInViewport);\n    }\n    if (val) {\n      cm.state.foldGutter = new State(parseOptions(val));\n      updateInViewport(cm);\n      cm.on(\"gutterClick\", onGutterClick);\n      cm.on(\"change\", onChange);\n      cm.on(\"viewportChange\", onViewportChange);\n      cm.on(\"fold\", onFold);\n      cm.on(\"unfold\", onFold);\n      cm.on(\"swapDoc\", updateInViewport);\n    }\n  });\n\n  var Pos = CodeMirror.Pos;\n\n  function State(options) {\n    this.options = options;\n    this.from = this.to = 0;\n  }\n\n  function parseOptions(opts) {\n    if (opts === true) opts = {};\n    if (opts.gutter == null) opts.gutter = \"CodeMirror-foldgutter\";\n    if (opts.indicatorOpen == null) opts.indicatorOpen = \"CodeMirror-foldgutter-open\";\n    if (opts.indicatorFolded == null) opts.indicatorFolded = \"CodeMirror-foldgutter-folded\";\n    return opts;\n  }\n\n  function isFolded(cm, line) {\n    var marks = cm.findMarksAt(Pos(line));\n    for (var i = 0; i < marks.length; ++i)\n      if (marks[i].__isFold && marks[i].find().from.line == line) return marks[i];\n  }\n\n  function marker(spec) {\n    if (typeof spec == \"string\") {\n      var elt = document.createElement(\"div\");\n      elt.className = spec + \" CodeMirror-guttermarker-subtle\";\n      return elt;\n    } else {\n      return spec.cloneNode(true);\n    }\n  }\n\n  function updateFoldInfo(cm, from, to) {\n    var opts = cm.state.foldGutter.options, cur = from;\n    var minSize = cm.foldOption(opts, \"minFoldSize\");\n    var func = cm.foldOption(opts, \"rangeFinder\");\n    cm.eachLine(from, to, function(line) {\n      var mark = null;\n      if (isFolded(cm, cur)) {\n        mark = marker(opts.indicatorFolded);\n      } else {\n        var pos = Pos(cur, 0);\n        var range = func && func(cm, pos);\n        if (range && range.to.line - range.from.line >= minSize)\n          mark = marker(opts.indicatorOpen);\n      }\n      cm.setGutterMarker(line, opts.gutter, mark);\n      ++cur;\n    });\n  }\n\n  function updateInViewport(cm) {\n    var vp = cm.getViewport(), state = cm.state.foldGutter;\n    if (!state) return;\n    cm.operation(function() {\n      updateFoldInfo(cm, vp.from, vp.to);\n    });\n    state.from = vp.from; state.to = vp.to;\n  }\n\n  function onGutterClick(cm, line, gutter) {\n    var state = cm.state.foldGutter;\n    if (!state) return;\n    var opts = state.options;\n    if (gutter != opts.gutter) return;\n    var folded = isFolded(cm, line);\n    if (folded) folded.clear();\n    else cm.foldCode(Pos(line, 0), opts.rangeFinder);\n  }\n\n  function onChange(cm) {\n    var state = cm.state.foldGutter;\n    if (!state) return;\n    var opts = state.options;\n    state.from = state.to = 0;\n    clearTimeout(state.changeUpdate);\n    state.changeUpdate = setTimeout(function() { updateInViewport(cm); }, opts.foldOnChangeTimeSpan || 600);\n  }\n\n  function onViewportChange(cm) {\n    var state = cm.state.foldGutter;\n    if (!state) return;\n    var opts = state.options;\n    clearTimeout(state.changeUpdate);\n    state.changeUpdate = setTimeout(function() {\n      var vp = cm.getViewport();\n      if (state.from == state.to || vp.from - state.to > 20 || state.from - vp.to > 20) {\n        updateInViewport(cm);\n      } else {\n        cm.operation(function() {\n          if (vp.from < state.from) {\n            updateFoldInfo(cm, vp.from, state.from);\n            state.from = vp.from;\n          }\n          if (vp.to > state.to) {\n            updateFoldInfo(cm, state.to, vp.to);\n            state.to = vp.to;\n          }\n        });\n      }\n    }, opts.updateViewportTimeSpan || 400);\n  }\n\n  function onFold(cm, from) {\n    var state = cm.state.foldGutter;\n    if (!state) return;\n    var line = from.line;\n    if (line >= state.from && line < state.to)\n      updateFoldInfo(cm, line, line + 1);\n  }\n});\n\n},{\"../../lib/codemirror\":30,\"./foldcode\":21}],23:[function(_dereq_,module,exports){\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(_dereq_(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.registerHelper(\"fold\", \"indent\", function(cm, start) {\n  var tabSize = cm.getOption(\"tabSize\"), firstLine = cm.getLine(start.line);\n  if (!/\\S/.test(firstLine)) return;\n  var getIndent = function(line) {\n    return CodeMirror.countColumn(line, null, tabSize);\n  };\n  var myIndent = getIndent(firstLine);\n  var lastLineInFold = null;\n  // Go through lines until we find a line that definitely doesn't belong in\n  // the block we're folding, or to the end.\n  for (var i = start.line + 1, end = cm.lastLine(); i <= end; ++i) {\n    var curLine = cm.getLine(i);\n    var curIndent = getIndent(curLine);\n    if (curIndent > myIndent) {\n      // Lines with a greater indent are considered part of the block.\n      lastLineInFold = i;\n    } else if (!/\\S/.test(curLine)) {\n      // Empty lines might be breaks within the block we're trying to fold.\n    } else {\n      // A non-empty line at an indent equal to or less than ours marks the\n      // start of another block.\n      break;\n    }\n  }\n  if (lastLineInFold) return {\n    from: CodeMirror.Pos(start.line, firstLine.length),\n    to: CodeMirror.Pos(lastLineInFold, cm.getLine(lastLineInFold).length)\n  };\n});\n\n});\n\n},{\"../../lib/codemirror\":30}],24:[function(_dereq_,module,exports){\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(_dereq_(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  var Pos = CodeMirror.Pos;\n\n  function forEach(arr, f) {\n    for (var i = 0, e = arr.length; i < e; ++i) f(arr[i]);\n  }\n\n  function arrayContains(arr, item) {\n    if (!Array.prototype.indexOf) {\n      var i = arr.length;\n      while (i--) {\n        if (arr[i] === item) {\n          return true;\n        }\n      }\n      return false;\n    }\n    return arr.indexOf(item) != -1;\n  }\n\n  function scriptHint(editor, keywords, getToken, options) {\n    // Find the token at the cursor\n    var cur = editor.getCursor(), token = getToken(editor, cur);\n    if (/\\b(?:string|comment)\\b/.test(token.type)) return;\n    token.state = CodeMirror.innerMode(editor.getMode(), token.state).state;\n\n    // If it's not a 'word-style' token, ignore the token.\n    if (!/^[\\w$_]*$/.test(token.string)) {\n      token = {start: cur.ch, end: cur.ch, string: \"\", state: token.state,\n               type: token.string == \".\" ? \"property\" : null};\n    } else if (token.end > cur.ch) {\n      token.end = cur.ch;\n      token.string = token.string.slice(0, cur.ch - token.start);\n    }\n\n    var tprop = token;\n    // If it is a property, find out what it is a property of.\n    while (tprop.type == \"property\") {\n      tprop = getToken(editor, Pos(cur.line, tprop.start));\n      if (tprop.string != \".\") return;\n      tprop = getToken(editor, Pos(cur.line, tprop.start));\n      if (!context) var context = [];\n      context.push(tprop);\n    }\n    return {list: getCompletions(token, context, keywords, options),\n            from: Pos(cur.line, token.start),\n            to: Pos(cur.line, token.end)};\n  }\n\n  function javascriptHint(editor, options) {\n    return scriptHint(editor, javascriptKeywords,\n                      function (e, cur) {return e.getTokenAt(cur);},\n                      options);\n  };\n  CodeMirror.registerHelper(\"hint\", \"javascript\", javascriptHint);\n\n  function getCoffeeScriptToken(editor, cur) {\n  // This getToken, it is for coffeescript, imitates the behavior of\n  // getTokenAt method in javascript.js, that is, returning \"property\"\n  // type and treat \".\" as indepenent token.\n    var token = editor.getTokenAt(cur);\n    if (cur.ch == token.start + 1 && token.string.charAt(0) == '.') {\n      token.end = token.start;\n      token.string = '.';\n      token.type = \"property\";\n    }\n    else if (/^\\.[\\w$_]*$/.test(token.string)) {\n      token.type = \"property\";\n      token.start++;\n      token.string = token.string.replace(/\\./, '');\n    }\n    return token;\n  }\n\n  function coffeescriptHint(editor, options) {\n    return scriptHint(editor, coffeescriptKeywords, getCoffeeScriptToken, options);\n  }\n  CodeMirror.registerHelper(\"hint\", \"coffeescript\", coffeescriptHint);\n\n  var stringProps = (\"charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight \" +\n                     \"toUpperCase toLowerCase split concat match replace search\").split(\" \");\n  var arrayProps = (\"length concat join splice push pop shift unshift slice reverse sort indexOf \" +\n                    \"lastIndexOf every some filter forEach map reduce reduceRight \").split(\" \");\n  var funcProps = \"prototype apply call bind\".split(\" \");\n  var javascriptKeywords = (\"break case catch continue debugger default delete do else false finally for function \" +\n                  \"if in instanceof new null return switch throw true try typeof var void while with\").split(\" \");\n  var coffeescriptKeywords = (\"and break catch class continue delete do else extends false finally for \" +\n                  \"if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes\").split(\" \");\n\n  function getCompletions(token, context, keywords, options) {\n    var found = [], start = token.string, global = options && options.globalScope || window;\n    function maybeAdd(str) {\n      if (str.lastIndexOf(start, 0) == 0 && !arrayContains(found, str)) found.push(str);\n    }\n    function gatherCompletions(obj) {\n      if (typeof obj == \"string\") forEach(stringProps, maybeAdd);\n      else if (obj instanceof Array) forEach(arrayProps, maybeAdd);\n      else if (obj instanceof Function) forEach(funcProps, maybeAdd);\n      for (var name in obj) maybeAdd(name);\n    }\n\n    if (context && context.length) {\n      // If this is a property, see if it belongs to some object we can\n      // find in the current environment.\n      var obj = context.pop(), base;\n      if (obj.type && obj.type.indexOf(\"variable\") === 0) {\n        if (options && options.additionalContext)\n          base = options.additionalContext[obj.string];\n        if (!options || options.useGlobalScope !== false)\n          base = base || global[obj.string];\n      } else if (obj.type == \"string\") {\n        base = \"\";\n      } else if (obj.type == \"atom\") {\n        base = 1;\n      } else if (obj.type == \"function\") {\n        if (global.jQuery != null && (obj.string == '$' || obj.string == 'jQuery') &&\n            (typeof global.jQuery == 'function'))\n          base = global.jQuery();\n        else if (global._ != null && (obj.string == '_') && (typeof global._ == 'function'))\n          base = global._();\n      }\n      while (base != null && context.length)\n        base = base[context.pop().string];\n      if (base != null) gatherCompletions(base);\n    } else {\n      // If not, just look in the global object and any local scope\n      // (reading into JS mode internals to get at the local and global variables)\n      for (var v = token.state.localVars; v; v = v.next) maybeAdd(v.name);\n      for (var v = token.state.globalVars; v; v = v.next) maybeAdd(v.name);\n      if (!options || options.useGlobalScope !== false)\n        gatherCompletions(global);\n      forEach(keywords, maybeAdd);\n    }\n    return found;\n  }\n});\n\n},{\"../../lib/codemirror\":30}],25:[function(_dereq_,module,exports){\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(_dereq_(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var HINT_ELEMENT_CLASS        = \"CodeMirror-hint\";\n  var ACTIVE_HINT_ELEMENT_CLASS = \"CodeMirror-hint-active\";\n\n  // This is the old interface, kept around for now to stay\n  // backwards-compatible.\n  CodeMirror.showHint = function(cm, getHints, options) {\n    if (!getHints) return cm.showHint(options);\n    if (options && options.async) getHints.async = true;\n    var newOpts = {hint: getHints};\n    if (options) for (var prop in options) newOpts[prop] = options[prop];\n    return cm.showHint(newOpts);\n  };\n\n  CodeMirror.defineExtension(\"showHint\", function(options) {\n    options = parseOptions(this, this.getCursor(\"start\"), options);\n    var selections = this.listSelections()\n    if (selections.length > 1) return;\n    // By default, don't allow completion when something is selected.\n    // A hint function can have a `supportsSelection` property to\n    // indicate that it can handle selections.\n    if (this.somethingSelected()) {\n      if (!options.hint.supportsSelection) return;\n      // Don't try with cross-line selections\n      for (var i = 0; i < selections.length; i++)\n        if (selections[i].head.line != selections[i].anchor.line) return;\n    }\n\n    if (this.state.completionActive) this.state.completionActive.close();\n    var completion = this.state.completionActive = new Completion(this, options);\n    if (!completion.options.hint) return;\n\n    CodeMirror.signal(this, \"startCompletion\", this);\n    completion.update(true);\n  });\n\n  function Completion(cm, options) {\n    this.cm = cm;\n    this.options = options;\n    this.widget = null;\n    this.debounce = 0;\n    this.tick = 0;\n    this.startPos = this.cm.getCursor(\"start\");\n    this.startLen = this.cm.getLine(this.startPos.line).length - this.cm.getSelection().length;\n\n    var self = this;\n    cm.on(\"cursorActivity\", this.activityFunc = function() { self.cursorActivity(); });\n  }\n\n  var requestAnimationFrame = window.requestAnimationFrame || function(fn) {\n    return setTimeout(fn, 1000/60);\n  };\n  var cancelAnimationFrame = window.cancelAnimationFrame || clearTimeout;\n\n  Completion.prototype = {\n    close: function() {\n      if (!this.active()) return;\n      this.cm.state.completionActive = null;\n      this.tick = null;\n      this.cm.off(\"cursorActivity\", this.activityFunc);\n\n      if (this.widget && this.data) CodeMirror.signal(this.data, \"close\");\n      if (this.widget) this.widget.close();\n      CodeMirror.signal(this.cm, \"endCompletion\", this.cm);\n    },\n\n    active: function() {\n      return this.cm.state.completionActive == this;\n    },\n\n    pick: function(data, i) {\n      var completion = data.list[i];\n      if (completion.hint) completion.hint(this.cm, data, completion);\n      else this.cm.replaceRange(getText(completion), completion.from || data.from,\n                                completion.to || data.to, \"complete\");\n      CodeMirror.signal(data, \"pick\", completion);\n      this.close();\n    },\n\n    cursorActivity: function() {\n      if (this.debounce) {\n        cancelAnimationFrame(this.debounce);\n        this.debounce = 0;\n      }\n\n      var pos = this.cm.getCursor(), line = this.cm.getLine(pos.line);\n      if (pos.line != this.startPos.line || line.length - pos.ch != this.startLen - this.startPos.ch ||\n          pos.ch < this.startPos.ch || this.cm.somethingSelected() ||\n          (pos.ch && this.options.closeCharacters.test(line.charAt(pos.ch - 1)))) {\n        this.close();\n      } else {\n        var self = this;\n        this.debounce = requestAnimationFrame(function() {self.update();});\n        if (this.widget) this.widget.disable();\n      }\n    },\n\n    update: function(first) {\n      if (this.tick == null) return;\n      if (!this.options.hint.async) {\n        this.finishUpdate(this.options.hint(this.cm, this.options), first);\n      } else {\n        var myTick = ++this.tick, self = this;\n        this.options.hint(this.cm, function(data) {\n          if (self.tick == myTick) self.finishUpdate(data, first);\n        }, this.options);\n      }\n    },\n\n    finishUpdate: function(data, first) {\n      if (this.data) CodeMirror.signal(this.data, \"update\");\n      if (data && this.data && CodeMirror.cmpPos(data.from, this.data.from)) data = null;\n      this.data = data;\n\n      var picked = (this.widget && this.widget.picked) || (first && this.options.completeSingle);\n      if (this.widget) this.widget.close();\n      if (data && data.list.length) {\n        if (picked && data.list.length == 1) {\n          this.pick(data, 0);\n        } else {\n          this.widget = new Widget(this, data);\n          CodeMirror.signal(data, \"shown\");\n        }\n      }\n    }\n  };\n\n  function parseOptions(cm, pos, options) {\n    var editor = cm.options.hintOptions;\n    var out = {};\n    for (var prop in defaultOptions) out[prop] = defaultOptions[prop];\n    if (editor) for (var prop in editor)\n      if (editor[prop] !== undefined) out[prop] = editor[prop];\n    if (options) for (var prop in options)\n      if (options[prop] !== undefined) out[prop] = options[prop];\n    if (out.hint.resolve) out.hint = out.hint.resolve(cm, pos)\n    return out;\n  }\n\n  function getText(completion) {\n    if (typeof completion == \"string\") return completion;\n    else return completion.text;\n  }\n\n  function buildKeyMap(completion, handle) {\n    var baseMap = {\n      Up: function() {handle.moveFocus(-1);},\n      Down: function() {handle.moveFocus(1);},\n      PageUp: function() {handle.moveFocus(-handle.menuSize() + 1, true);},\n      PageDown: function() {handle.moveFocus(handle.menuSize() - 1, true);},\n      Home: function() {handle.setFocus(0);},\n      End: function() {handle.setFocus(handle.length - 1);},\n      Enter: handle.pick,\n      Tab: handle.pick,\n      Esc: handle.close\n    };\n    var custom = completion.options.customKeys;\n    var ourMap = custom ? {} : baseMap;\n    function addBinding(key, val) {\n      var bound;\n      if (typeof val != \"string\")\n        bound = function(cm) { return val(cm, handle); };\n      // This mechanism is deprecated\n      else if (baseMap.hasOwnProperty(val))\n        bound = baseMap[val];\n      else\n        bound = val;\n      ourMap[key] = bound;\n    }\n    if (custom)\n      for (var key in custom) if (custom.hasOwnProperty(key))\n        addBinding(key, custom[key]);\n    var extra = completion.options.extraKeys;\n    if (extra)\n      for (var key in extra) if (extra.hasOwnProperty(key))\n        addBinding(key, extra[key]);\n    return ourMap;\n  }\n\n  function getHintElement(hintsElement, el) {\n    while (el && el != hintsElement) {\n      if (el.nodeName.toUpperCase() === \"LI\" && el.parentNode == hintsElement) return el;\n      el = el.parentNode;\n    }\n  }\n\n  function Widget(completion, data) {\n    this.completion = completion;\n    this.data = data;\n    this.picked = false;\n    var widget = this, cm = completion.cm;\n\n    var hints = this.hints = document.createElement(\"ul\");\n    hints.className = \"CodeMirror-hints\";\n    this.selectedHint = data.selectedHint || 0;\n\n    var completions = data.list;\n    for (var i = 0; i < completions.length; ++i) {\n      var elt = hints.appendChild(document.createElement(\"li\")), cur = completions[i];\n      var className = HINT_ELEMENT_CLASS + (i != this.selectedHint ? \"\" : \" \" + ACTIVE_HINT_ELEMENT_CLASS);\n      if (cur.className != null) className = cur.className + \" \" + className;\n      elt.className = className;\n      if (cur.render) cur.render(elt, data, cur);\n      else elt.appendChild(document.createTextNode(cur.displayText || getText(cur)));\n      elt.hintId = i;\n    }\n\n    var pos = cm.cursorCoords(completion.options.alignWithWord ? data.from : null);\n    var left = pos.left, top = pos.bottom, below = true;\n    hints.style.left = left + \"px\";\n    hints.style.top = top + \"px\";\n    // If we're at the edge of the screen, then we want the menu to appear on the left of the cursor.\n    var winW = window.innerWidth || Math.max(document.body.offsetWidth, document.documentElement.offsetWidth);\n    var winH = window.innerHeight || Math.max(document.body.offsetHeight, document.documentElement.offsetHeight);\n    (completion.options.container || document.body).appendChild(hints);\n    var box = hints.getBoundingClientRect(), overlapY = box.bottom - winH;\n    if (overlapY > 0) {\n      var height = box.bottom - box.top, curTop = pos.top - (pos.bottom - box.top);\n      if (curTop - height > 0) { // Fits above cursor\n        hints.style.top = (top = pos.top - height) + \"px\";\n        below = false;\n      } else if (height > winH) {\n        hints.style.height = (winH - 5) + \"px\";\n        hints.style.top = (top = pos.bottom - box.top) + \"px\";\n        var cursor = cm.getCursor();\n        if (data.from.ch != cursor.ch) {\n          pos = cm.cursorCoords(cursor);\n          hints.style.left = (left = pos.left) + \"px\";\n          box = hints.getBoundingClientRect();\n        }\n      }\n    }\n    var overlapX = box.right - winW;\n    if (overlapX > 0) {\n      if (box.right - box.left > winW) {\n        hints.style.width = (winW - 5) + \"px\";\n        overlapX -= (box.right - box.left) - winW;\n      }\n      hints.style.left = (left = pos.left - overlapX) + \"px\";\n    }\n\n    cm.addKeyMap(this.keyMap = buildKeyMap(completion, {\n      moveFocus: function(n, avoidWrap) { widget.changeActive(widget.selectedHint + n, avoidWrap); },\n      setFocus: function(n) { widget.changeActive(n); },\n      menuSize: function() { return widget.screenAmount(); },\n      length: completions.length,\n      close: function() { completion.close(); },\n      pick: function() { widget.pick(); },\n      data: data\n    }));\n\n    if (completion.options.closeOnUnfocus) {\n      var closingOnBlur;\n      cm.on(\"blur\", this.onBlur = function() { closingOnBlur = setTimeout(function() { completion.close(); }, 100); });\n      cm.on(\"focus\", this.onFocus = function() { clearTimeout(closingOnBlur); });\n    }\n\n    var startScroll = cm.getScrollInfo();\n    cm.on(\"scroll\", this.onScroll = function() {\n      var curScroll = cm.getScrollInfo(), editor = cm.getWrapperElement().getBoundingClientRect();\n      var newTop = top + startScroll.top - curScroll.top;\n      var point = newTop - (window.pageYOffset || (document.documentElement || document.body).scrollTop);\n      if (!below) point += hints.offsetHeight;\n      if (point <= editor.top || point >= editor.bottom) return completion.close();\n      hints.style.top = newTop + \"px\";\n      hints.style.left = (left + startScroll.left - curScroll.left) + \"px\";\n    });\n\n    CodeMirror.on(hints, \"dblclick\", function(e) {\n      var t = getHintElement(hints, e.target || e.srcElement);\n      if (t && t.hintId != null) {widget.changeActive(t.hintId); widget.pick();}\n    });\n\n    CodeMirror.on(hints, \"click\", function(e) {\n      var t = getHintElement(hints, e.target || e.srcElement);\n      if (t && t.hintId != null) {\n        widget.changeActive(t.hintId);\n        if (completion.options.completeOnSingleClick) widget.pick();\n      }\n    });\n\n    CodeMirror.on(hints, \"mousedown\", function() {\n      setTimeout(function(){cm.focus();}, 20);\n    });\n\n    CodeMirror.signal(data, \"select\", completions[0], hints.firstChild);\n    return true;\n  }\n\n  Widget.prototype = {\n    close: function() {\n      if (this.completion.widget != this) return;\n      this.completion.widget = null;\n      this.hints.parentNode.removeChild(this.hints);\n      this.completion.cm.removeKeyMap(this.keyMap);\n\n      var cm = this.completion.cm;\n      if (this.completion.options.closeOnUnfocus) {\n        cm.off(\"blur\", this.onBlur);\n        cm.off(\"focus\", this.onFocus);\n      }\n      cm.off(\"scroll\", this.onScroll);\n    },\n\n    disable: function() {\n      this.completion.cm.removeKeyMap(this.keyMap);\n      var widget = this;\n      this.keyMap = {Enter: function() { widget.picked = true; }};\n      this.completion.cm.addKeyMap(this.keyMap);\n    },\n\n    pick: function() {\n      this.completion.pick(this.data, this.selectedHint);\n    },\n\n    changeActive: function(i, avoidWrap) {\n      if (i >= this.data.list.length)\n        i = avoidWrap ? this.data.list.length - 1 : 0;\n      else if (i < 0)\n        i = avoidWrap ? 0  : this.data.list.length - 1;\n      if (this.selectedHint == i) return;\n      var node = this.hints.childNodes[this.selectedHint];\n      node.className = node.className.replace(\" \" + ACTIVE_HINT_ELEMENT_CLASS, \"\");\n      node = this.hints.childNodes[this.selectedHint = i];\n      node.className += \" \" + ACTIVE_HINT_ELEMENT_CLASS;\n      if (node.offsetTop < this.hints.scrollTop)\n        this.hints.scrollTop = node.offsetTop - 3;\n      else if (node.offsetTop + node.offsetHeight > this.hints.scrollTop + this.hints.clientHeight)\n        this.hints.scrollTop = node.offsetTop + node.offsetHeight - this.hints.clientHeight + 3;\n      CodeMirror.signal(this.data, \"select\", this.data.list[this.selectedHint], node);\n    },\n\n    screenAmount: function() {\n      return Math.floor(this.hints.clientHeight / this.hints.firstChild.offsetHeight) || 1;\n    }\n  };\n\n  function applicableHelpers(cm, helpers) {\n    if (!cm.somethingSelected()) return helpers\n    var result = []\n    for (var i = 0; i < helpers.length; i++)\n      if (helpers[i].supportsSelection) result.push(helpers[i])\n    return result\n  }\n\n  function resolveAutoHints(cm, pos) {\n    var helpers = cm.getHelpers(pos, \"hint\"), words\n    if (helpers.length) {\n      var async = false, resolved\n      for (var i = 0; i < helpers.length; i++) if (helpers[i].async) async = true\n      if (async) {\n        resolved = function(cm, callback, options) {\n          var app = applicableHelpers(cm, helpers)\n          function run(i, result) {\n            if (i == app.length) return callback(null)\n            var helper = app[i]\n            if (helper.async) {\n              helper(cm, function(result) {\n                if (result) callback(result)\n                else run(i + 1)\n              }, options)\n            } else {\n              var result = helper(cm, options)\n              if (result) callback(result)\n              else run(i + 1)\n            }\n          }\n          run(0)\n        }\n        resolved.async = true\n      } else {\n        resolved = function(cm, options) {\n          var app = applicableHelpers(cm, helpers)\n          for (var i = 0; i < app.length; i++) {\n            var cur = app[i](cm, options)\n            if (cur && cur.list.length) return cur\n          }\n        }\n      }\n      resolved.supportsSelection = true\n      return resolved\n    } else if (words = cm.getHelper(cm.getCursor(), \"hintWords\")) {\n      return function(cm) { return CodeMirror.hint.fromList(cm, {words: words}) }\n    } else if (CodeMirror.hint.anyword) {\n      return function(cm, options) { return CodeMirror.hint.anyword(cm, options) }\n    } else {\n      return function() {}\n    }\n  }\n\n  CodeMirror.registerHelper(\"hint\", \"auto\", {\n    resolve: resolveAutoHints\n  });\n\n  CodeMirror.registerHelper(\"hint\", \"fromList\", function(cm, options) {\n    var cur = cm.getCursor(), token = cm.getTokenAt(cur);\n    var to = CodeMirror.Pos(cur.line, token.end);\n    if (token.string && /\\w/.test(token.string[token.string.length - 1])) {\n      var term = token.string, from = CodeMirror.Pos(cur.line, token.start);\n    } else {\n      var term = \"\", from = to;\n    }\n    var found = [];\n    for (var i = 0; i < options.words.length; i++) {\n      var word = options.words[i];\n      if (word.slice(0, term.length) == term)\n        found.push(word);\n    }\n\n    if (found.length) return {list: found, from: from, to: to};\n  });\n\n  CodeMirror.commands.autocomplete = CodeMirror.showHint;\n\n  var defaultOptions = {\n    hint: CodeMirror.hint.auto,\n    completeSingle: true,\n    alignWithWord: true,\n    closeCharacters: /[\\s()\\[\\]{};:>,]/,\n    closeOnUnfocus: true,\n    completeOnSingleClick: false,\n    container: null,\n    customKeys: null,\n    extraKeys: null\n  };\n\n  CodeMirror.defineOption(\"hintOptions\", null);\n});\n\n},{\"../../lib/codemirror\":30}],26:[function(_dereq_,module,exports){\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n// Define search commands. Depends on dialog.js or another\n// implementation of the openDialog method.\n\n// Replace works a little oddly -- it will do the replace on the next\n// Ctrl-G (or whatever is bound to findNext) press. You prevent a\n// replace by making sure the match is no longer selected when hitting\n// Ctrl-G.\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(_dereq_(\"../../lib/codemirror\"), _dereq_(\"./searchcursor\"), _dereq_(\"../dialog/dialog\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"./searchcursor\", \"../dialog/dialog\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  function searchOverlay(query, caseInsensitive) {\n    if (typeof query == \"string\")\n      query = new RegExp(query.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\"), caseInsensitive ? \"gi\" : \"g\");\n    else if (!query.global)\n      query = new RegExp(query.source, query.ignoreCase ? \"gi\" : \"g\");\n\n    return {token: function(stream) {\n      query.lastIndex = stream.pos;\n      var match = query.exec(stream.string);\n      if (match && match.index == stream.pos) {\n        stream.pos += match[0].length;\n        return \"searching\";\n      } else if (match) {\n        stream.pos = match.index;\n      } else {\n        stream.skipToEnd();\n      }\n    }};\n  }\n\n  function SearchState() {\n    this.posFrom = this.posTo = this.lastQuery = this.query = null;\n    this.overlay = null;\n  }\n\n  function getSearchState(cm) {\n    return cm.state.search || (cm.state.search = new SearchState());\n  }\n\n  function queryCaseInsensitive(query) {\n    return typeof query == \"string\" && query == query.toLowerCase();\n  }\n\n  function getSearchCursor(cm, query, pos) {\n    // Heuristic: if the query string is all lowercase, do a case insensitive search.\n    return cm.getSearchCursor(query, pos, queryCaseInsensitive(query));\n  }\n\n  function persistentDialog(cm, text, deflt, f) {\n    cm.openDialog(text, f, {\n      value: deflt,\n      selectValueOnOpen: true,\n      closeOnEnter: false,\n      onClose: function() { clearSearch(cm); }\n    });\n  }\n\n  function dialog(cm, text, shortText, deflt, f) {\n    if (cm.openDialog) cm.openDialog(text, f, {value: deflt, selectValueOnOpen: true});\n    else f(prompt(shortText, deflt));\n  }\n\n  function confirmDialog(cm, text, shortText, fs) {\n    if (cm.openConfirm) cm.openConfirm(text, fs);\n    else if (confirm(shortText)) fs[0]();\n  }\n\n  function parseString(string) {\n    return string.replace(/\\\\(.)/g, function(_, ch) {\n      if (ch == \"n\") return \"\\n\"\n      if (ch == \"r\") return \"\\r\"\n      return ch\n    })\n  }\n\n  function parseQuery(query) {\n    var isRE = query.match(/^\\/(.*)\\/([a-z]*)$/);\n    if (isRE) {\n      try { query = new RegExp(isRE[1], isRE[2].indexOf(\"i\") == -1 ? \"\" : \"i\"); }\n      catch(e) {} // Not a regular expression after all, do a string search\n    } else {\n      query = parseString(query)\n    }\n    if (typeof query == \"string\" ? query == \"\" : query.test(\"\"))\n      query = /x^/;\n    return query;\n  }\n\n  var queryDialog =\n    'Search: <input type=\"text\" style=\"width: 10em\" class=\"CodeMirror-search-field\"/> <span style=\"color: #888\" class=\"CodeMirror-search-hint\">(Use /re/ syntax for regexp search)</span>';\n\n  function startSearch(cm, state, query) {\n    state.queryText = query;\n    state.query = parseQuery(query);\n    cm.removeOverlay(state.overlay, queryCaseInsensitive(state.query));\n    state.overlay = searchOverlay(state.query, queryCaseInsensitive(state.query));\n    cm.addOverlay(state.overlay);\n    if (cm.showMatchesOnScrollbar) {\n      if (state.annotate) { state.annotate.clear(); state.annotate = null; }\n      state.annotate = cm.showMatchesOnScrollbar(state.query, queryCaseInsensitive(state.query));\n    }\n  }\n\n  function doSearch(cm, rev, persistent) {\n    var state = getSearchState(cm);\n    if (state.query) return findNext(cm, rev);\n    var q = cm.getSelection() || state.lastQuery;\n    if (persistent && cm.openDialog) {\n      var hiding = null\n      persistentDialog(cm, queryDialog, q, function(query, event) {\n        CodeMirror.e_stop(event);\n        if (!query) return;\n        if (query != state.queryText) startSearch(cm, state, query);\n        if (hiding) hiding.style.opacity = 1\n        findNext(cm, event.shiftKey, function(_, to) {\n          var dialog\n          if (to.line < 3 && document.querySelector &&\n              (dialog = cm.display.wrapper.querySelector(\".CodeMirror-dialog\")) &&\n              dialog.getBoundingClientRect().bottom - 4 > cm.cursorCoords(to, \"window\").top)\n            (hiding = dialog).style.opacity = .4\n        })\n      });\n    } else {\n      dialog(cm, queryDialog, \"Search for:\", q, function(query) {\n        if (query && !state.query) cm.operation(function() {\n          startSearch(cm, state, query);\n          state.posFrom = state.posTo = cm.getCursor();\n          findNext(cm, rev);\n        });\n      });\n    }\n  }\n\n  function findNext(cm, rev, callback) {cm.operation(function() {\n    var state = getSearchState(cm);\n    var cursor = getSearchCursor(cm, state.query, rev ? state.posFrom : state.posTo);\n    if (!cursor.find(rev)) {\n      cursor = getSearchCursor(cm, state.query, rev ? CodeMirror.Pos(cm.lastLine()) : CodeMirror.Pos(cm.firstLine(), 0));\n      if (!cursor.find(rev)) return;\n    }\n    cm.setSelection(cursor.from(), cursor.to());\n    cm.scrollIntoView({from: cursor.from(), to: cursor.to()}, 20);\n    state.posFrom = cursor.from(); state.posTo = cursor.to();\n    if (callback) callback(cursor.from(), cursor.to())\n  });}\n\n  function clearSearch(cm) {cm.operation(function() {\n    var state = getSearchState(cm);\n    state.lastQuery = state.query;\n    if (!state.query) return;\n    state.query = state.queryText = null;\n    cm.removeOverlay(state.overlay);\n    if (state.annotate) { state.annotate.clear(); state.annotate = null; }\n  });}\n\n  var replaceQueryDialog =\n    ' <input type=\"text\" style=\"width: 10em\" class=\"CodeMirror-search-field\"/> <span style=\"color: #888\" class=\"CodeMirror-search-hint\">(Use /re/ syntax for regexp search)</span>';\n  var replacementQueryDialog = 'With: <input type=\"text\" style=\"width: 10em\" class=\"CodeMirror-search-field\"/>';\n  var doReplaceConfirm = \"Replace? <button>Yes</button> <button>No</button> <button>All</button> <button>Stop</button>\";\n\n  function replaceAll(cm, query, text) {\n    cm.operation(function() {\n      for (var cursor = getSearchCursor(cm, query); cursor.findNext();) {\n        if (typeof query != \"string\") {\n          var match = cm.getRange(cursor.from(), cursor.to()).match(query);\n          cursor.replace(text.replace(/\\$(\\d)/g, function(_, i) {return match[i];}));\n        } else cursor.replace(text);\n      }\n    });\n  }\n\n  function replace(cm, all) {\n    if (cm.getOption(\"readOnly\")) return;\n    var query = cm.getSelection() || getSearchState(cm).lastQuery;\n    var dialogText = all ? \"Replace all:\" : \"Replace:\"\n    dialog(cm, dialogText + replaceQueryDialog, dialogText, query, function(query) {\n      if (!query) return;\n      query = parseQuery(query);\n      dialog(cm, replacementQueryDialog, \"Replace with:\", \"\", function(text) {\n        text = parseString(text)\n        if (all) {\n          replaceAll(cm, query, text)\n        } else {\n          clearSearch(cm);\n          var cursor = getSearchCursor(cm, query, cm.getCursor());\n          var advance = function() {\n            var start = cursor.from(), match;\n            if (!(match = cursor.findNext())) {\n              cursor = getSearchCursor(cm, query);\n              if (!(match = cursor.findNext()) ||\n                  (start && cursor.from().line == start.line && cursor.from().ch == start.ch)) return;\n            }\n            cm.setSelection(cursor.from(), cursor.to());\n            cm.scrollIntoView({from: cursor.from(), to: cursor.to()});\n            confirmDialog(cm, doReplaceConfirm, \"Replace?\",\n                          [function() {doReplace(match);}, advance,\n                           function() {replaceAll(cm, query, text)}]);\n          };\n          var doReplace = function(match) {\n            cursor.replace(typeof query == \"string\" ? text :\n                           text.replace(/\\$(\\d)/g, function(_, i) {return match[i];}));\n            advance();\n          };\n          advance();\n        }\n      });\n    });\n  }\n\n  CodeMirror.commands.find = function(cm) {clearSearch(cm); doSearch(cm);};\n  CodeMirror.commands.findPersistent = function(cm) {clearSearch(cm); doSearch(cm, false, true);};\n  CodeMirror.commands.findNext = doSearch;\n  CodeMirror.commands.findPrev = function(cm) {doSearch(cm, true);};\n  CodeMirror.commands.clearSearch = clearSearch;\n  CodeMirror.commands.replace = replace;\n  CodeMirror.commands.replaceAll = function(cm) {replace(cm, true);};\n});\n\n},{\"../../lib/codemirror\":30,\"../dialog/dialog\":16,\"./searchcursor\":27}],27:[function(_dereq_,module,exports){\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(_dereq_(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n  var Pos = CodeMirror.Pos;\n\n  function SearchCursor(doc, query, pos, caseFold) {\n    this.atOccurrence = false; this.doc = doc;\n    if (caseFold == null && typeof query == \"string\") caseFold = false;\n\n    pos = pos ? doc.clipPos(pos) : Pos(0, 0);\n    this.pos = {from: pos, to: pos};\n\n    // The matches method is filled in based on the type of query.\n    // It takes a position and a direction, and returns an object\n    // describing the next occurrence of the query, or null if no\n    // more matches were found.\n    if (typeof query != \"string\") { // Regexp match\n      if (!query.global) query = new RegExp(query.source, query.ignoreCase ? \"ig\" : \"g\");\n      this.matches = function(reverse, pos) {\n        if (reverse) {\n          query.lastIndex = 0;\n          var line = doc.getLine(pos.line).slice(0, pos.ch), cutOff = 0, match, start;\n          for (;;) {\n            query.lastIndex = cutOff;\n            var newMatch = query.exec(line);\n            if (!newMatch) break;\n            match = newMatch;\n            start = match.index;\n            cutOff = match.index + (match[0].length || 1);\n            if (cutOff == line.length) break;\n          }\n          var matchLen = (match && match[0].length) || 0;\n          if (!matchLen) {\n            if (start == 0 && line.length == 0) {match = undefined;}\n            else if (start != doc.getLine(pos.line).length) {\n              matchLen++;\n            }\n          }\n        } else {\n          query.lastIndex = pos.ch;\n          var line = doc.getLine(pos.line), match = query.exec(line);\n          var matchLen = (match && match[0].length) || 0;\n          var start = match && match.index;\n          if (start + matchLen != line.length && !matchLen) matchLen = 1;\n        }\n        if (match && matchLen)\n          return {from: Pos(pos.line, start),\n                  to: Pos(pos.line, start + matchLen),\n                  match: match};\n      };\n    } else { // String query\n      var origQuery = query;\n      if (caseFold) query = query.toLowerCase();\n      var fold = caseFold ? function(str){return str.toLowerCase();} : function(str){return str;};\n      var target = query.split(\"\\n\");\n      // Different methods for single-line and multi-line queries\n      if (target.length == 1) {\n        if (!query.length) {\n          // Empty string would match anything and never progress, so\n          // we define it to match nothing instead.\n          this.matches = function() {};\n        } else {\n          this.matches = function(reverse, pos) {\n            if (reverse) {\n              var orig = doc.getLine(pos.line).slice(0, pos.ch), line = fold(orig);\n              var match = line.lastIndexOf(query);\n              if (match > -1) {\n                match = adjustPos(orig, line, match);\n                return {from: Pos(pos.line, match), to: Pos(pos.line, match + origQuery.length)};\n              }\n             } else {\n               var orig = doc.getLine(pos.line).slice(pos.ch), line = fold(orig);\n               var match = line.indexOf(query);\n               if (match > -1) {\n                 match = adjustPos(orig, line, match) + pos.ch;\n                 return {from: Pos(pos.line, match), to: Pos(pos.line, match + origQuery.length)};\n               }\n            }\n          };\n        }\n      } else {\n        var origTarget = origQuery.split(\"\\n\");\n        this.matches = function(reverse, pos) {\n          var last = target.length - 1;\n          if (reverse) {\n            if (pos.line - (target.length - 1) < doc.firstLine()) return;\n            if (fold(doc.getLine(pos.line).slice(0, origTarget[last].length)) != target[target.length - 1]) return;\n            var to = Pos(pos.line, origTarget[last].length);\n            for (var ln = pos.line - 1, i = last - 1; i >= 1; --i, --ln)\n              if (target[i] != fold(doc.getLine(ln))) return;\n            var line = doc.getLine(ln), cut = line.length - origTarget[0].length;\n            if (fold(line.slice(cut)) != target[0]) return;\n            return {from: Pos(ln, cut), to: to};\n          } else {\n            if (pos.line + (target.length - 1) > doc.lastLine()) return;\n            var line = doc.getLine(pos.line), cut = line.length - origTarget[0].length;\n            if (fold(line.slice(cut)) != target[0]) return;\n            var from = Pos(pos.line, cut);\n            for (var ln = pos.line + 1, i = 1; i < last; ++i, ++ln)\n              if (target[i] != fold(doc.getLine(ln))) return;\n            if (fold(doc.getLine(ln).slice(0, origTarget[last].length)) != target[last]) return;\n            return {from: from, to: Pos(ln, origTarget[last].length)};\n          }\n        };\n      }\n    }\n  }\n\n  SearchCursor.prototype = {\n    findNext: function() {return this.find(false);},\n    findPrevious: function() {return this.find(true);},\n\n    find: function(reverse) {\n      var self = this, pos = this.doc.clipPos(reverse ? this.pos.from : this.pos.to);\n      function savePosAndFail(line) {\n        var pos = Pos(line, 0);\n        self.pos = {from: pos, to: pos};\n        self.atOccurrence = false;\n        return false;\n      }\n\n      for (;;) {\n        if (this.pos = this.matches(reverse, pos)) {\n          this.atOccurrence = true;\n          return this.pos.match || true;\n        }\n        if (reverse) {\n          if (!pos.line) return savePosAndFail(0);\n          pos = Pos(pos.line-1, this.doc.getLine(pos.line-1).length);\n        }\n        else {\n          var maxLine = this.doc.lineCount();\n          if (pos.line == maxLine - 1) return savePosAndFail(maxLine);\n          pos = Pos(pos.line + 1, 0);\n        }\n      }\n    },\n\n    from: function() {if (this.atOccurrence) return this.pos.from;},\n    to: function() {if (this.atOccurrence) return this.pos.to;},\n\n    replace: function(newText, origin) {\n      if (!this.atOccurrence) return;\n      var lines = CodeMirror.splitLines(newText);\n      this.doc.replaceRange(lines, this.pos.from, this.pos.to, origin);\n      this.pos.to = Pos(this.pos.from.line + lines.length - 1,\n                        lines[lines.length - 1].length + (lines.length == 1 ? this.pos.from.ch : 0));\n    }\n  };\n\n  // Maps a position in a case-folded line back to a position in the original line\n  // (compensating for codepoints increasing in number during folding)\n  function adjustPos(orig, folded, pos) {\n    if (orig.length == folded.length) return pos;\n    for (var pos1 = Math.min(pos, orig.length);;) {\n      var len1 = orig.slice(0, pos1).toLowerCase().length;\n      if (len1 < pos) ++pos1;\n      else if (len1 > pos) --pos1;\n      else return pos1;\n    }\n  }\n\n  CodeMirror.defineExtension(\"getSearchCursor\", function(query, pos, caseFold) {\n    return new SearchCursor(this.doc, query, pos, caseFold);\n  });\n  CodeMirror.defineDocExtension(\"getSearchCursor\", function(query, pos, caseFold) {\n    return new SearchCursor(this, query, pos, caseFold);\n  });\n\n  CodeMirror.defineExtension(\"selectMatches\", function(query, caseFold) {\n    var ranges = [];\n    var cur = this.getSearchCursor(query, this.getCursor(\"from\"), caseFold);\n    while (cur.findNext()) {\n      if (CodeMirror.cmpPos(cur.to(), this.getCursor(\"to\")) > 0) break;\n      ranges.push({anchor: cur.from(), head: cur.to()});\n    }\n    if (ranges.length)\n      this.setSelections(ranges, 0);\n  });\n});\n\n},{\"../../lib/codemirror\":30}],28:[function(_dereq_,module,exports){\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(_dereq_(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var Pos = CodeMirror.Pos;\n\n  function findParagraph(cm, pos, options) {\n    var startRE = options.paragraphStart || cm.getHelper(pos, \"paragraphStart\");\n    for (var start = pos.line, first = cm.firstLine(); start > first; --start) {\n      var line = cm.getLine(start);\n      if (startRE && startRE.test(line)) break;\n      if (!/\\S/.test(line)) { ++start; break; }\n    }\n    var endRE = options.paragraphEnd || cm.getHelper(pos, \"paragraphEnd\");\n    for (var end = pos.line + 1, last = cm.lastLine(); end <= last; ++end) {\n      var line = cm.getLine(end);\n      if (endRE && endRE.test(line)) { ++end; break; }\n      if (!/\\S/.test(line)) break;\n    }\n    return {from: start, to: end};\n  }\n\n  function findBreakPoint(text, column, wrapOn, killTrailingSpace) {\n    for (var at = column; at > 0; --at)\n      if (wrapOn.test(text.slice(at - 1, at + 1))) break;\n    for (var first = true;; first = false) {\n      var endOfText = at;\n      if (killTrailingSpace)\n        while (text.charAt(endOfText - 1) == \" \") --endOfText;\n      if (endOfText == 0 && first) at = column;\n      else return {from: endOfText, to: at};\n    }\n  }\n\n  function wrapRange(cm, from, to, options) {\n    from = cm.clipPos(from); to = cm.clipPos(to);\n    var column = options.column || 80;\n    var wrapOn = options.wrapOn || /\\s\\S|-[^\\.\\d]/;\n    var killTrailing = options.killTrailingSpace !== false;\n    var changes = [], curLine = \"\", curNo = from.line;\n    var lines = cm.getRange(from, to, false);\n    if (!lines.length) return null;\n    var leadingSpace = lines[0].match(/^[ \\t]*/)[0];\n\n    for (var i = 0; i < lines.length; ++i) {\n      var text = lines[i], oldLen = curLine.length, spaceInserted = 0;\n      if (curLine && text && !wrapOn.test(curLine.charAt(curLine.length - 1) + text.charAt(0))) {\n        curLine += \" \";\n        spaceInserted = 1;\n      }\n      var spaceTrimmed = \"\";\n      if (i) {\n        spaceTrimmed = text.match(/^\\s*/)[0];\n        text = text.slice(spaceTrimmed.length);\n      }\n      curLine += text;\n      if (i) {\n        var firstBreak = curLine.length > column && leadingSpace == spaceTrimmed &&\n          findBreakPoint(curLine, column, wrapOn, killTrailing);\n        // If this isn't broken, or is broken at a different point, remove old break\n        if (!firstBreak || firstBreak.from != oldLen || firstBreak.to != oldLen + spaceInserted) {\n          changes.push({text: [spaceInserted ? \" \" : \"\"],\n                        from: Pos(curNo, oldLen),\n                        to: Pos(curNo + 1, spaceTrimmed.length)});\n        } else {\n          curLine = leadingSpace + text;\n          ++curNo;\n        }\n      }\n      while (curLine.length > column) {\n        var bp = findBreakPoint(curLine, column, wrapOn, killTrailing);\n        changes.push({text: [\"\", leadingSpace],\n                      from: Pos(curNo, bp.from),\n                      to: Pos(curNo, bp.to)});\n        curLine = leadingSpace + curLine.slice(bp.to);\n        ++curNo;\n      }\n    }\n    if (changes.length) cm.operation(function() {\n      for (var i = 0; i < changes.length; ++i) {\n        var change = changes[i];\n        if (change.text || CodeMirror.cmpPos(change.from, change.to))\n          cm.replaceRange(change.text, change.from, change.to);\n      }\n    });\n    return changes.length ? {from: changes[0].from, to: CodeMirror.changeEnd(changes[changes.length - 1])} : null;\n  }\n\n  CodeMirror.defineExtension(\"wrapParagraph\", function(pos, options) {\n    options = options || {};\n    if (!pos) pos = this.getCursor();\n    var para = findParagraph(this, pos, options);\n    return wrapRange(this, Pos(para.from, 0), Pos(para.to - 1), options);\n  });\n\n  CodeMirror.commands.wrapLines = function(cm) {\n    cm.operation(function() {\n      var ranges = cm.listSelections(), at = cm.lastLine() + 1;\n      for (var i = ranges.length - 1; i >= 0; i--) {\n        var range = ranges[i], span;\n        if (range.empty()) {\n          var para = findParagraph(cm, range.head, {});\n          span = {from: Pos(para.from, 0), to: Pos(para.to - 1)};\n        } else {\n          span = {from: range.from(), to: range.to()};\n        }\n        if (span.to.line >= at) continue;\n        at = span.from.line;\n        wrapRange(cm, span.from, span.to, {});\n      }\n    });\n  };\n\n  CodeMirror.defineExtension(\"wrapRange\", function(from, to, options) {\n    return wrapRange(this, from, to, options || {});\n  });\n\n  CodeMirror.defineExtension(\"wrapParagraphsInRange\", function(from, to, options) {\n    options = options || {};\n    var cm = this, paras = [];\n    for (var line = from.line; line <= to.line;) {\n      var para = findParagraph(cm, Pos(line, 0), options);\n      paras.push(para);\n      line = para.to;\n    }\n    var madeChange = false;\n    if (paras.length) cm.operation(function() {\n      for (var i = paras.length - 1; i >= 0; --i)\n        madeChange = madeChange || wrapRange(cm, Pos(paras[i].from, 0), Pos(paras[i].to - 1), options);\n    });\n    return madeChange;\n  });\n});\n\n},{\"../../lib/codemirror\":30}],29:[function(_dereq_,module,exports){\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n// A rough approximation of Sublime Text's keybindings\n// Depends on addon/search/searchcursor.js and optionally addon/dialog/dialogs.js\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(_dereq_(\"../lib/codemirror\"), _dereq_(\"../addon/search/searchcursor\"), _dereq_(\"../addon/edit/matchbrackets\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../lib/codemirror\", \"../addon/search/searchcursor\", \"../addon/edit/matchbrackets\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var map = CodeMirror.keyMap.sublime = {fallthrough: \"default\"};\n  var cmds = CodeMirror.commands;\n  var Pos = CodeMirror.Pos;\n  var mac = CodeMirror.keyMap[\"default\"] == CodeMirror.keyMap.macDefault;\n  var ctrl = mac ? \"Cmd-\" : \"Ctrl-\";\n\n  // This is not exactly Sublime's algorithm. I couldn't make heads or tails of that.\n  function findPosSubword(doc, start, dir) {\n    if (dir < 0 && start.ch == 0) return doc.clipPos(Pos(start.line - 1));\n    var line = doc.getLine(start.line);\n    if (dir > 0 && start.ch >= line.length) return doc.clipPos(Pos(start.line + 1, 0));\n    var state = \"start\", type;\n    for (var pos = start.ch, e = dir < 0 ? 0 : line.length, i = 0; pos != e; pos += dir, i++) {\n      var next = line.charAt(dir < 0 ? pos - 1 : pos);\n      var cat = next != \"_\" && CodeMirror.isWordChar(next) ? \"w\" : \"o\";\n      if (cat == \"w\" && next.toUpperCase() == next) cat = \"W\";\n      if (state == \"start\") {\n        if (cat != \"o\") { state = \"in\"; type = cat; }\n      } else if (state == \"in\") {\n        if (type != cat) {\n          if (type == \"w\" && cat == \"W\" && dir < 0) pos--;\n          if (type == \"W\" && cat == \"w\" && dir > 0) { type = \"w\"; continue; }\n          break;\n        }\n      }\n    }\n    return Pos(start.line, pos);\n  }\n\n  function moveSubword(cm, dir) {\n    cm.extendSelectionsBy(function(range) {\n      if (cm.display.shift || cm.doc.extend || range.empty())\n        return findPosSubword(cm.doc, range.head, dir);\n      else\n        return dir < 0 ? range.from() : range.to();\n    });\n  }\n\n  cmds[map[\"Alt-Left\"] = \"goSubwordLeft\"] = function(cm) { moveSubword(cm, -1); };\n  cmds[map[\"Alt-Right\"] = \"goSubwordRight\"] = function(cm) { moveSubword(cm, 1); };\n\n  var scrollLineCombo = mac ? \"Ctrl-Alt-\" : \"Ctrl-\";\n\n  cmds[map[scrollLineCombo + \"Up\"] = \"scrollLineUp\"] = function(cm) {\n    var info = cm.getScrollInfo();\n    if (!cm.somethingSelected()) {\n      var visibleBottomLine = cm.lineAtHeight(info.top + info.clientHeight, \"local\");\n      if (cm.getCursor().line >= visibleBottomLine)\n        cm.execCommand(\"goLineUp\");\n    }\n    cm.scrollTo(null, info.top - cm.defaultTextHeight());\n  };\n  cmds[map[scrollLineCombo + \"Down\"] = \"scrollLineDown\"] = function(cm) {\n    var info = cm.getScrollInfo();\n    if (!cm.somethingSelected()) {\n      var visibleTopLine = cm.lineAtHeight(info.top, \"local\")+1;\n      if (cm.getCursor().line <= visibleTopLine)\n        cm.execCommand(\"goLineDown\");\n    }\n    cm.scrollTo(null, info.top + cm.defaultTextHeight());\n  };\n\n  cmds[map[\"Shift-\" + ctrl + \"L\"] = \"splitSelectionByLine\"] = function(cm) {\n    var ranges = cm.listSelections(), lineRanges = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var from = ranges[i].from(), to = ranges[i].to();\n      for (var line = from.line; line <= to.line; ++line)\n        if (!(to.line > from.line && line == to.line && to.ch == 0))\n          lineRanges.push({anchor: line == from.line ? from : Pos(line, 0),\n                           head: line == to.line ? to : Pos(line)});\n    }\n    cm.setSelections(lineRanges, 0);\n  };\n\n  map[\"Shift-Tab\"] = \"indentLess\";\n\n  cmds[map[\"Esc\"] = \"singleSelectionTop\"] = function(cm) {\n    var range = cm.listSelections()[0];\n    cm.setSelection(range.anchor, range.head, {scroll: false});\n  };\n\n  cmds[map[ctrl + \"L\"] = \"selectLine\"] = function(cm) {\n    var ranges = cm.listSelections(), extended = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i];\n      extended.push({anchor: Pos(range.from().line, 0),\n                     head: Pos(range.to().line + 1, 0)});\n    }\n    cm.setSelections(extended);\n  };\n\n  map[\"Shift-\" + ctrl + \"K\"] = \"deleteLine\";\n\n  function insertLine(cm, above) {\n    cm.operation(function() {\n      var len = cm.listSelections().length, newSelection = [], last = -1;\n      for (var i = 0; i < len; i++) {\n        var head = cm.listSelections()[i].head;\n        if (head.line <= last) continue;\n        var at = Pos(head.line + (above ? 0 : 1), 0);\n        cm.replaceRange(\"\\n\", at, null, \"+insertLine\");\n        cm.indentLine(at.line, null, true);\n        newSelection.push({head: at, anchor: at});\n        last = head.line + 1;\n      }\n      cm.setSelections(newSelection);\n    });\n  }\n\n  cmds[map[ctrl + \"Enter\"] = \"insertLineAfter\"] = function(cm) { insertLine(cm, false); };\n\n  cmds[map[\"Shift-\" + ctrl + \"Enter\"] = \"insertLineBefore\"] = function(cm) { insertLine(cm, true); };\n\n  function wordAt(cm, pos) {\n    var start = pos.ch, end = start, line = cm.getLine(pos.line);\n    while (start && CodeMirror.isWordChar(line.charAt(start - 1))) --start;\n    while (end < line.length && CodeMirror.isWordChar(line.charAt(end))) ++end;\n    return {from: Pos(pos.line, start), to: Pos(pos.line, end), word: line.slice(start, end)};\n  }\n\n  cmds[map[ctrl + \"D\"] = \"selectNextOccurrence\"] = function(cm) {\n    var from = cm.getCursor(\"from\"), to = cm.getCursor(\"to\");\n    var fullWord = cm.state.sublimeFindFullWord == cm.doc.sel;\n    if (CodeMirror.cmpPos(from, to) == 0) {\n      var word = wordAt(cm, from);\n      if (!word.word) return;\n      cm.setSelection(word.from, word.to);\n      fullWord = true;\n    } else {\n      var text = cm.getRange(from, to);\n      var query = fullWord ? new RegExp(\"\\\\b\" + text + \"\\\\b\") : text;\n      var cur = cm.getSearchCursor(query, to);\n      if (cur.findNext()) {\n        cm.addSelection(cur.from(), cur.to());\n      } else {\n        cur = cm.getSearchCursor(query, Pos(cm.firstLine(), 0));\n        if (cur.findNext())\n          cm.addSelection(cur.from(), cur.to());\n      }\n    }\n    if (fullWord)\n      cm.state.sublimeFindFullWord = cm.doc.sel;\n  };\n\n  var mirror = \"(){}[]\";\n  function selectBetweenBrackets(cm) {\n    var pos = cm.getCursor(), opening = cm.scanForBracket(pos, -1);\n    if (!opening) return;\n    for (;;) {\n      var closing = cm.scanForBracket(pos, 1);\n      if (!closing) return;\n      if (closing.ch == mirror.charAt(mirror.indexOf(opening.ch) + 1)) {\n        cm.setSelection(Pos(opening.pos.line, opening.pos.ch + 1), closing.pos, false);\n        return true;\n      }\n      pos = Pos(closing.pos.line, closing.pos.ch + 1);\n    }\n  }\n\n  cmds[map[\"Shift-\" + ctrl + \"Space\"] = \"selectScope\"] = function(cm) {\n    selectBetweenBrackets(cm) || cm.execCommand(\"selectAll\");\n  };\n  cmds[map[\"Shift-\" + ctrl + \"M\"] = \"selectBetweenBrackets\"] = function(cm) {\n    if (!selectBetweenBrackets(cm)) return CodeMirror.Pass;\n  };\n\n  cmds[map[ctrl + \"M\"] = \"goToBracket\"] = function(cm) {\n    cm.extendSelectionsBy(function(range) {\n      var next = cm.scanForBracket(range.head, 1);\n      if (next && CodeMirror.cmpPos(next.pos, range.head) != 0) return next.pos;\n      var prev = cm.scanForBracket(range.head, -1);\n      return prev && Pos(prev.pos.line, prev.pos.ch + 1) || range.head;\n    });\n  };\n\n  var swapLineCombo = mac ? \"Cmd-Ctrl-\" : \"Shift-Ctrl-\";\n\n  cmds[map[swapLineCombo + \"Up\"] = \"swapLineUp\"] = function(cm) {\n    var ranges = cm.listSelections(), linesToMove = [], at = cm.firstLine() - 1, newSels = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i], from = range.from().line - 1, to = range.to().line;\n      newSels.push({anchor: Pos(range.anchor.line - 1, range.anchor.ch),\n                    head: Pos(range.head.line - 1, range.head.ch)});\n      if (range.to().ch == 0 && !range.empty()) --to;\n      if (from > at) linesToMove.push(from, to);\n      else if (linesToMove.length) linesToMove[linesToMove.length - 1] = to;\n      at = to;\n    }\n    cm.operation(function() {\n      for (var i = 0; i < linesToMove.length; i += 2) {\n        var from = linesToMove[i], to = linesToMove[i + 1];\n        var line = cm.getLine(from);\n        cm.replaceRange(\"\", Pos(from, 0), Pos(from + 1, 0), \"+swapLine\");\n        if (to > cm.lastLine())\n          cm.replaceRange(\"\\n\" + line, Pos(cm.lastLine()), null, \"+swapLine\");\n        else\n          cm.replaceRange(line + \"\\n\", Pos(to, 0), null, \"+swapLine\");\n      }\n      cm.setSelections(newSels);\n      cm.scrollIntoView();\n    });\n  };\n\n  cmds[map[swapLineCombo + \"Down\"] = \"swapLineDown\"] = function(cm) {\n    var ranges = cm.listSelections(), linesToMove = [], at = cm.lastLine() + 1;\n    for (var i = ranges.length - 1; i >= 0; i--) {\n      var range = ranges[i], from = range.to().line + 1, to = range.from().line;\n      if (range.to().ch == 0 && !range.empty()) from--;\n      if (from < at) linesToMove.push(from, to);\n      else if (linesToMove.length) linesToMove[linesToMove.length - 1] = to;\n      at = to;\n    }\n    cm.operation(function() {\n      for (var i = linesToMove.length - 2; i >= 0; i -= 2) {\n        var from = linesToMove[i], to = linesToMove[i + 1];\n        var line = cm.getLine(from);\n        if (from == cm.lastLine())\n          cm.replaceRange(\"\", Pos(from - 1), Pos(from), \"+swapLine\");\n        else\n          cm.replaceRange(\"\", Pos(from, 0), Pos(from + 1, 0), \"+swapLine\");\n        cm.replaceRange(line + \"\\n\", Pos(to, 0), null, \"+swapLine\");\n      }\n      cm.scrollIntoView();\n    });\n  };\n\n  map[ctrl + \"/\"] = function(cm) {\n    cm.toggleComment({ indent: true });\n  }\n\n  cmds[map[ctrl + \"J\"] = \"joinLines\"] = function(cm) {\n    var ranges = cm.listSelections(), joined = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i], from = range.from();\n      var start = from.line, end = range.to().line;\n      while (i < ranges.length - 1 && ranges[i + 1].from().line == end)\n        end = ranges[++i].to().line;\n      joined.push({start: start, end: end, anchor: !range.empty() && from});\n    }\n    cm.operation(function() {\n      var offset = 0, ranges = [];\n      for (var i = 0; i < joined.length; i++) {\n        var obj = joined[i];\n        var anchor = obj.anchor && Pos(obj.anchor.line - offset, obj.anchor.ch), head;\n        for (var line = obj.start; line <= obj.end; line++) {\n          var actual = line - offset;\n          if (line == obj.end) head = Pos(actual, cm.getLine(actual).length + 1);\n          if (actual < cm.lastLine()) {\n            cm.replaceRange(\" \", Pos(actual), Pos(actual + 1, /^\\s*/.exec(cm.getLine(actual + 1))[0].length));\n            ++offset;\n          }\n        }\n        ranges.push({anchor: anchor || head, head: head});\n      }\n      cm.setSelections(ranges, 0);\n    });\n  };\n\n  cmds[map[\"Shift-\" + ctrl + \"D\"] = \"duplicateLine\"] = function(cm) {\n    cm.operation(function() {\n      var rangeCount = cm.listSelections().length;\n      for (var i = 0; i < rangeCount; i++) {\n        var range = cm.listSelections()[i];\n        if (range.empty())\n          cm.replaceRange(cm.getLine(range.head.line) + \"\\n\", Pos(range.head.line, 0));\n        else\n          cm.replaceRange(cm.getRange(range.from(), range.to()), range.from());\n      }\n      cm.scrollIntoView();\n    });\n  };\n\n  map[ctrl + \"T\"] = \"transposeChars\";\n\n  function sortLines(cm, caseSensitive) {\n    var ranges = cm.listSelections(), toSort = [], selected;\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i];\n      if (range.empty()) continue;\n      var from = range.from().line, to = range.to().line;\n      while (i < ranges.length - 1 && ranges[i + 1].from().line == to)\n        to = range[++i].to().line;\n      toSort.push(from, to);\n    }\n    if (toSort.length) selected = true;\n    else toSort.push(cm.firstLine(), cm.lastLine());\n\n    cm.operation(function() {\n      var ranges = [];\n      for (var i = 0; i < toSort.length; i += 2) {\n        var from = toSort[i], to = toSort[i + 1];\n        var start = Pos(from, 0), end = Pos(to);\n        var lines = cm.getRange(start, end, false);\n        if (caseSensitive)\n          lines.sort();\n        else\n          lines.sort(function(a, b) {\n            var au = a.toUpperCase(), bu = b.toUpperCase();\n            if (au != bu) { a = au; b = bu; }\n            return a < b ? -1 : a == b ? 0 : 1;\n          });\n        cm.replaceRange(lines, start, end);\n        if (selected) ranges.push({anchor: start, head: end});\n      }\n      if (selected) cm.setSelections(ranges, 0);\n    });\n  }\n\n  cmds[map[\"F9\"] = \"sortLines\"] = function(cm) { sortLines(cm, true); };\n  cmds[map[ctrl + \"F9\"] = \"sortLinesInsensitive\"] = function(cm) { sortLines(cm, false); };\n\n  cmds[map[\"F2\"] = \"nextBookmark\"] = function(cm) {\n    var marks = cm.state.sublimeBookmarks;\n    if (marks) while (marks.length) {\n      var current = marks.shift();\n      var found = current.find();\n      if (found) {\n        marks.push(current);\n        return cm.setSelection(found.from, found.to);\n      }\n    }\n  };\n\n  cmds[map[\"Shift-F2\"] = \"prevBookmark\"] = function(cm) {\n    var marks = cm.state.sublimeBookmarks;\n    if (marks) while (marks.length) {\n      marks.unshift(marks.pop());\n      var found = marks[marks.length - 1].find();\n      if (!found)\n        marks.pop();\n      else\n        return cm.setSelection(found.from, found.to);\n    }\n  };\n\n  cmds[map[ctrl + \"F2\"] = \"toggleBookmark\"] = function(cm) {\n    var ranges = cm.listSelections();\n    var marks = cm.state.sublimeBookmarks || (cm.state.sublimeBookmarks = []);\n    for (var i = 0; i < ranges.length; i++) {\n      var from = ranges[i].from(), to = ranges[i].to();\n      var found = cm.findMarks(from, to);\n      for (var j = 0; j < found.length; j++) {\n        if (found[j].sublimeBookmark) {\n          found[j].clear();\n          for (var k = 0; k < marks.length; k++)\n            if (marks[k] == found[j])\n              marks.splice(k--, 1);\n          break;\n        }\n      }\n      if (j == found.length)\n        marks.push(cm.markText(from, to, {sublimeBookmark: true, clearWhenEmpty: false}));\n    }\n  };\n\n  cmds[map[\"Shift-\" + ctrl + \"F2\"] = \"clearBookmarks\"] = function(cm) {\n    var marks = cm.state.sublimeBookmarks;\n    if (marks) for (var i = 0; i < marks.length; i++) marks[i].clear();\n    marks.length = 0;\n  };\n\n  cmds[map[\"Alt-F2\"] = \"selectBookmarks\"] = function(cm) {\n    var marks = cm.state.sublimeBookmarks, ranges = [];\n    if (marks) for (var i = 0; i < marks.length; i++) {\n      var found = marks[i].find();\n      if (!found)\n        marks.splice(i--, 0);\n      else\n        ranges.push({anchor: found.from, head: found.to});\n    }\n    if (ranges.length)\n      cm.setSelections(ranges, 0);\n  };\n\n  map[\"Alt-Q\"] = \"wrapLines\";\n\n  var cK = ctrl + \"K \";\n\n  function modifyWordOrSelection(cm, mod) {\n    cm.operation(function() {\n      var ranges = cm.listSelections(), indices = [], replacements = [];\n      for (var i = 0; i < ranges.length; i++) {\n        var range = ranges[i];\n        if (range.empty()) { indices.push(i); replacements.push(\"\"); }\n        else replacements.push(mod(cm.getRange(range.from(), range.to())));\n      }\n      cm.replaceSelections(replacements, \"around\", \"case\");\n      for (var i = indices.length - 1, at; i >= 0; i--) {\n        var range = ranges[indices[i]];\n        if (at && CodeMirror.cmpPos(range.head, at) > 0) continue;\n        var word = wordAt(cm, range.head);\n        at = word.from;\n        cm.replaceRange(mod(word.word), word.from, word.to);\n      }\n    });\n  }\n\n  map[cK + ctrl + \"Backspace\"] = \"delLineLeft\";\n\n  cmds[map[\"Backspace\"] = \"smartBackspace\"] = function(cm) {\n    if (cm.somethingSelected()) return CodeMirror.Pass;\n\n    var cursor = cm.getCursor();\n    var toStartOfLine = cm.getRange({line: cursor.line, ch: 0}, cursor);\n    var column = CodeMirror.countColumn(toStartOfLine, null, cm.getOption(\"tabSize\"));\n    var indentUnit = cm.getOption(\"indentUnit\");\n\n    if (toStartOfLine && !/\\S/.test(toStartOfLine) && column % indentUnit == 0) {\n      var prevIndent = new Pos(cursor.line,\n        CodeMirror.findColumn(toStartOfLine, column - indentUnit, indentUnit));\n\n      // If no smart delete is happening (due to tab sizing) just do a regular delete\n      if (prevIndent.ch == cursor.ch) return CodeMirror.Pass;\n\n      return cm.replaceRange(\"\", prevIndent, cursor, \"+delete\");\n    } else {\n      return CodeMirror.Pass;\n    }\n  };\n\n  cmds[map[cK + ctrl + \"K\"] = \"delLineRight\"] = function(cm) {\n    cm.operation(function() {\n      var ranges = cm.listSelections();\n      for (var i = ranges.length - 1; i >= 0; i--)\n        cm.replaceRange(\"\", ranges[i].anchor, Pos(ranges[i].to().line), \"+delete\");\n      cm.scrollIntoView();\n    });\n  };\n\n  cmds[map[cK + ctrl + \"U\"] = \"upcaseAtCursor\"] = function(cm) {\n    modifyWordOrSelection(cm, function(str) { return str.toUpperCase(); });\n  };\n  cmds[map[cK + ctrl + \"L\"] = \"downcaseAtCursor\"] = function(cm) {\n    modifyWordOrSelection(cm, function(str) { return str.toLowerCase(); });\n  };\n\n  cmds[map[cK + ctrl + \"Space\"] = \"setSublimeMark\"] = function(cm) {\n    if (cm.state.sublimeMark) cm.state.sublimeMark.clear();\n    cm.state.sublimeMark = cm.setBookmark(cm.getCursor());\n  };\n  cmds[map[cK + ctrl + \"A\"] = \"selectToSublimeMark\"] = function(cm) {\n    var found = cm.state.sublimeMark && cm.state.sublimeMark.find();\n    if (found) cm.setSelection(cm.getCursor(), found);\n  };\n  cmds[map[cK + ctrl + \"W\"] = \"deleteToSublimeMark\"] = function(cm) {\n    var found = cm.state.sublimeMark && cm.state.sublimeMark.find();\n    if (found) {\n      var from = cm.getCursor(), to = found;\n      if (CodeMirror.cmpPos(from, to) > 0) { var tmp = to; to = from; from = tmp; }\n      cm.state.sublimeKilled = cm.getRange(from, to);\n      cm.replaceRange(\"\", from, to);\n    }\n  };\n  cmds[map[cK + ctrl + \"X\"] = \"swapWithSublimeMark\"] = function(cm) {\n    var found = cm.state.sublimeMark && cm.state.sublimeMark.find();\n    if (found) {\n      cm.state.sublimeMark.clear();\n      cm.state.sublimeMark = cm.setBookmark(cm.getCursor());\n      cm.setCursor(found);\n    }\n  };\n  cmds[map[cK + ctrl + \"Y\"] = \"sublimeYank\"] = function(cm) {\n    if (cm.state.sublimeKilled != null)\n      cm.replaceSelection(cm.state.sublimeKilled, null, \"paste\");\n  };\n\n  map[cK + ctrl + \"G\"] = \"clearBookmarks\";\n  cmds[map[cK + ctrl + \"C\"] = \"showInCenter\"] = function(cm) {\n    var pos = cm.cursorCoords(null, \"local\");\n    cm.scrollTo(null, (pos.top + pos.bottom) / 2 - cm.getScrollInfo().clientHeight / 2);\n  };\n\n  cmds[map[\"Shift-Alt-Up\"] = \"selectLinesUpward\"] = function(cm) {\n    cm.operation(function() {\n      var ranges = cm.listSelections();\n      for (var i = 0; i < ranges.length; i++) {\n        var range = ranges[i];\n        if (range.head.line > cm.firstLine())\n          cm.addSelection(Pos(range.head.line - 1, range.head.ch));\n      }\n    });\n  };\n  cmds[map[\"Shift-Alt-Down\"] = \"selectLinesDownward\"] = function(cm) {\n    cm.operation(function() {\n      var ranges = cm.listSelections();\n      for (var i = 0; i < ranges.length; i++) {\n        var range = ranges[i];\n        if (range.head.line < cm.lastLine())\n          cm.addSelection(Pos(range.head.line + 1, range.head.ch));\n      }\n    });\n  };\n\n  function getTarget(cm) {\n    var from = cm.getCursor(\"from\"), to = cm.getCursor(\"to\");\n    if (CodeMirror.cmpPos(from, to) == 0) {\n      var word = wordAt(cm, from);\n      if (!word.word) return;\n      from = word.from;\n      to = word.to;\n    }\n    return {from: from, to: to, query: cm.getRange(from, to), word: word};\n  }\n\n  function findAndGoTo(cm, forward) {\n    var target = getTarget(cm);\n    if (!target) return;\n    var query = target.query;\n    var cur = cm.getSearchCursor(query, forward ? target.to : target.from);\n\n    if (forward ? cur.findNext() : cur.findPrevious()) {\n      cm.setSelection(cur.from(), cur.to());\n    } else {\n      cur = cm.getSearchCursor(query, forward ? Pos(cm.firstLine(), 0)\n                                              : cm.clipPos(Pos(cm.lastLine())));\n      if (forward ? cur.findNext() : cur.findPrevious())\n        cm.setSelection(cur.from(), cur.to());\n      else if (target.word)\n        cm.setSelection(target.from, target.to);\n    }\n  };\n  cmds[map[ctrl + \"F3\"] = \"findUnder\"] = function(cm) { findAndGoTo(cm, true); };\n  cmds[map[\"Shift-\" + ctrl + \"F3\"] = \"findUnderPrevious\"] = function(cm) { findAndGoTo(cm,false); };\n  cmds[map[\"Alt-F3\"] = \"findAllUnder\"] = function(cm) {\n    var target = getTarget(cm);\n    if (!target) return;\n    var cur = cm.getSearchCursor(target.query);\n    var matches = [];\n    var primaryIndex = -1;\n    while (cur.findNext()) {\n      matches.push({anchor: cur.from(), head: cur.to()});\n      if (cur.from().line <= target.from.line && cur.from().ch <= target.from.ch)\n        primaryIndex++;\n    }\n    cm.setSelections(matches, primaryIndex);\n  };\n\n  map[\"Shift-\" + ctrl + \"[\"] = \"fold\";\n  map[\"Shift-\" + ctrl + \"]\"] = \"unfold\";\n  map[cK + ctrl + \"0\"] = map[cK + ctrl + \"j\"] = \"unfoldAll\";\n\n  map[ctrl + \"I\"] = \"findIncremental\";\n  map[\"Shift-\" + ctrl + \"I\"] = \"findIncrementalReverse\";\n  map[ctrl + \"H\"] = \"replace\";\n  map[\"F3\"] = \"findNext\";\n  map[\"Shift-F3\"] = \"findPrev\";\n\n  CodeMirror.normalizeKeyMap(map);\n});\n\n},{\"../addon/edit/matchbrackets\":20,\"../addon/search/searchcursor\":27,\"../lib/codemirror\":30}],30:[function(_dereq_,module,exports){\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n// This is CodeMirror (http://codemirror.net), a code editor\n// implemented in JavaScript on top of the browser's DOM.\n//\n// You can find some technical background for some of the code below\n// at http://marijnhaverbeke.nl/blog/#cm-internals .\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    module.exports = mod();\n  else if (typeof define == \"function\" && define.amd) // AMD\n    return define([], mod);\n  else // Plain browser env\n    this.CodeMirror = mod();\n})(function() {\n  \"use strict\";\n\n  // BROWSER SNIFFING\n\n  // Kludges for bugs and behavior differences that can't be feature\n  // detected are enabled based on userAgent etc sniffing.\n  var userAgent = navigator.userAgent;\n  var platform = navigator.platform;\n\n  var gecko = /gecko\\/\\d/i.test(userAgent);\n  var ie_upto10 = /MSIE \\d/.test(userAgent);\n  var ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\n  var ie = ie_upto10 || ie_11up;\n  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : ie_11up[1]);\n  var webkit = /WebKit\\//.test(userAgent);\n  var qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\n  var chrome = /Chrome\\//.test(userAgent);\n  var presto = /Opera\\//.test(userAgent);\n  var safari = /Apple Computer/.test(navigator.vendor);\n  var mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\n  var phantom = /PhantomJS/.test(userAgent);\n\n  var ios = /AppleWebKit/.test(userAgent) && /Mobile\\/\\w+/.test(userAgent);\n  // This is woefully incomplete. Suggestions for alternative methods welcome.\n  var mobile = ios || /Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\n  var mac = ios || /Mac/.test(platform);\n  var windows = /win/i.test(platform);\n\n  var presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\n  if (presto_version) presto_version = Number(presto_version[1]);\n  if (presto_version && presto_version >= 15) { presto = false; webkit = true; }\n  // Some browsers use the wrong event properties to signal cmd/ctrl on OS X\n  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\n  var captureRightClick = gecko || (ie && ie_version >= 9);\n\n  // Optimize some code when these features are not used.\n  var sawReadOnlySpans = false, sawCollapsedSpans = false;\n\n  // EDITOR CONSTRUCTOR\n\n  // A CodeMirror instance represents an editor. This is the object\n  // that user code is usually dealing with.\n\n  function CodeMirror(place, options) {\n    if (!(this instanceof CodeMirror)) return new CodeMirror(place, options);\n\n    this.options = options = options ? copyObj(options) : {};\n    // Determine effective options based on given values and defaults.\n    copyObj(defaults, options, false);\n    setGuttersForLineNumbers(options);\n\n    var doc = options.value;\n    if (typeof doc == \"string\") doc = new Doc(doc, options.mode, null, options.lineSeparator);\n    this.doc = doc;\n\n    var input = new CodeMirror.inputStyles[options.inputStyle](this);\n    var display = this.display = new Display(place, doc, input);\n    display.wrapper.CodeMirror = this;\n    updateGutters(this);\n    themeChanged(this);\n    if (options.lineWrapping)\n      this.display.wrapper.className += \" CodeMirror-wrap\";\n    if (options.autofocus && !mobile) display.input.focus();\n    initScrollbars(this);\n\n    this.state = {\n      keyMaps: [],  // stores maps added by addKeyMap\n      overlays: [], // highlighting overlays, as added by addOverlay\n      modeGen: 0,   // bumped when mode/overlay changes, used to invalidate highlighting info\n      overwrite: false,\n      delayingBlurEvent: false,\n      focused: false,\n      suppressEdits: false, // used to disable editing during key handlers when in readOnly mode\n      pasteIncoming: false, cutIncoming: false, // help recognize paste/cut edits in input.poll\n      selectingText: false,\n      draggingText: false,\n      highlight: new Delayed(), // stores highlight worker timeout\n      keySeq: null,  // Unfinished key sequence\n      specialChars: null\n    };\n\n    var cm = this;\n\n    // Override magic textarea content restore that IE sometimes does\n    // on our hidden textarea on reload\n    if (ie && ie_version < 11) setTimeout(function() { cm.display.input.reset(true); }, 20);\n\n    registerEventHandlers(this);\n    ensureGlobalHandlers();\n\n    startOperation(this);\n    this.curOp.forceUpdate = true;\n    attachDoc(this, doc);\n\n    if ((options.autofocus && !mobile) || cm.hasFocus())\n      setTimeout(bind(onFocus, this), 20);\n    else\n      onBlur(this);\n\n    for (var opt in optionHandlers) if (optionHandlers.hasOwnProperty(opt))\n      optionHandlers[opt](this, options[opt], Init);\n    maybeUpdateLineNumberWidth(this);\n    if (options.finishInit) options.finishInit(this);\n    for (var i = 0; i < initHooks.length; ++i) initHooks[i](this);\n    endOperation(this);\n    // Suppress optimizelegibility in Webkit, since it breaks text\n    // measuring on line wrapping boundaries.\n    if (webkit && options.lineWrapping &&\n        getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\")\n      display.lineDiv.style.textRendering = \"auto\";\n  }\n\n  // DISPLAY CONSTRUCTOR\n\n  // The display handles the DOM integration, both for input reading\n  // and content drawing. It holds references to DOM nodes and\n  // display-related state.\n\n  function Display(place, doc, input) {\n    var d = this;\n    this.input = input;\n\n    // Covers bottom-right square when both scrollbars are present.\n    d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n    d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Covers bottom of gutter when coverGutterNextToScrollbar is on\n    // and h scrollbar is present.\n    d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n    d.gutterFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Will contain the actual code, positioned to cover the viewport.\n    d.lineDiv = elt(\"div\", null, \"CodeMirror-code\");\n    // Elements are added to these to represent selection and cursors.\n    d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n    d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\");\n    // A visibility: hidden element used to find the size of things.\n    d.measure = elt(\"div\", null, \"CodeMirror-measure\");\n    // When lines outside of the viewport are measured, they are drawn in this.\n    d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\");\n    // Wraps everything that needs to exist inside the vertically-padded coordinate system\n    d.lineSpace = elt(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv],\n                      null, \"position: relative; outline: none\");\n    // Moved around its parent to cover visible view.\n    d.mover = elt(\"div\", [elt(\"div\", [d.lineSpace], \"CodeMirror-lines\")], null, \"position: relative\");\n    // Set to the height of the document, allowing scrolling.\n    d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n    d.sizerWidth = null;\n    // Behavior of elts with overflow: auto and padding is\n    // inconsistent across browsers. This is used to ensure the\n    // scrollable area is big enough.\n    d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\");\n    // Will contain the gutters, if any.\n    d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n    d.lineGutter = null;\n    // Actual scrollable element.\n    d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n    d.scroller.setAttribute(\"tabIndex\", \"-1\");\n    // The element in which the editor lives.\n    d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\");\n\n    // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n    if (ie && ie_version < 8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0; }\n    if (!webkit && !(gecko && mobile)) d.scroller.draggable = true;\n\n    if (place) {\n      if (place.appendChild) place.appendChild(d.wrapper);\n      else place(d.wrapper);\n    }\n\n    // Current rendered range (may be bigger than the view window).\n    d.viewFrom = d.viewTo = doc.first;\n    d.reportedViewFrom = d.reportedViewTo = doc.first;\n    // Information about the rendered lines.\n    d.view = [];\n    d.renderedView = null;\n    // Holds info about a single rendered line when it was rendered\n    // for measurement, while not in view.\n    d.externalMeasured = null;\n    // Empty space (in pixels) above the view\n    d.viewOffset = 0;\n    d.lastWrapHeight = d.lastWrapWidth = 0;\n    d.updateLineNumbers = null;\n\n    d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n    d.scrollbarsClipped = false;\n\n    // Used to only resize the line number gutter when necessary (when\n    // the amount of lines crosses a boundary that makes its width change)\n    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;\n    // Set to true when a non-horizontal-scrolling line widget is\n    // added. As an optimization, line widget aligning is skipped when\n    // this is false.\n    d.alignWidgets = false;\n\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n\n    // Tracks the maximum line length so that the horizontal scrollbar\n    // can be kept static when scrolling.\n    d.maxLine = null;\n    d.maxLineLength = 0;\n    d.maxLineChanged = false;\n\n    // Used for measuring wheel scrolling granularity\n    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;\n\n    // True when shift is held down.\n    d.shift = false;\n\n    // Used to track whether anything happened since the context menu\n    // was opened.\n    d.selForContextMenu = null;\n\n    d.activeTouch = null;\n\n    input.init(d);\n  }\n\n  // STATE UPDATES\n\n  // Used to get the editor into a consistent state again when options change.\n\n  function loadMode(cm) {\n    cm.doc.mode = CodeMirror.getMode(cm.options, cm.doc.modeOption);\n    resetModeState(cm);\n  }\n\n  function resetModeState(cm) {\n    cm.doc.iter(function(line) {\n      if (line.stateAfter) line.stateAfter = null;\n      if (line.styles) line.styles = null;\n    });\n    cm.doc.frontier = cm.doc.first;\n    startWorker(cm, 100);\n    cm.state.modeGen++;\n    if (cm.curOp) regChange(cm);\n  }\n\n  function wrappingChanged(cm) {\n    if (cm.options.lineWrapping) {\n      addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      cm.display.sizer.style.minWidth = \"\";\n      cm.display.sizerWidth = null;\n    } else {\n      rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      findMaxLine(cm);\n    }\n    estimateLineHeights(cm);\n    regChange(cm);\n    clearCaches(cm);\n    setTimeout(function(){updateScrollbars(cm);}, 100);\n  }\n\n  // Returns a function that estimates the height of a line, to use as\n  // first approximation until the line becomes visible (and is thus\n  // properly measurable).\n  function estimateHeight(cm) {\n    var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;\n    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n    return function(line) {\n      if (lineIsHidden(cm.doc, line)) return 0;\n\n      var widgetsHeight = 0;\n      if (line.widgets) for (var i = 0; i < line.widgets.length; i++) {\n        if (line.widgets[i].height) widgetsHeight += line.widgets[i].height;\n      }\n\n      if (wrapping)\n        return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th;\n      else\n        return widgetsHeight + th;\n    };\n  }\n\n  function estimateLineHeights(cm) {\n    var doc = cm.doc, est = estimateHeight(cm);\n    doc.iter(function(line) {\n      var estHeight = est(line);\n      if (estHeight != line.height) updateLineHeight(line, estHeight);\n    });\n  }\n\n  function themeChanged(cm) {\n    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") +\n      cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n    clearCaches(cm);\n  }\n\n  function guttersChanged(cm) {\n    updateGutters(cm);\n    regChange(cm);\n    setTimeout(function(){alignHorizontally(cm);}, 20);\n  }\n\n  // Rebuild the gutter elements, ensure the margin to the left of the\n  // code matches their width.\n  function updateGutters(cm) {\n    var gutters = cm.display.gutters, specs = cm.options.gutters;\n    removeChildren(gutters);\n    for (var i = 0; i < specs.length; ++i) {\n      var gutterClass = specs[i];\n      var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + gutterClass));\n      if (gutterClass == \"CodeMirror-linenumbers\") {\n        cm.display.lineGutter = gElt;\n        gElt.style.width = (cm.display.lineNumWidth || 1) + \"px\";\n      }\n    }\n    gutters.style.display = i ? \"\" : \"none\";\n    updateGutterSpace(cm);\n  }\n\n  function updateGutterSpace(cm) {\n    var width = cm.display.gutters.offsetWidth;\n    cm.display.sizer.style.marginLeft = width + \"px\";\n  }\n\n  // Compute the character length of a line, taking into account\n  // collapsed ranges (see markText) that might hide parts, and join\n  // other lines onto it.\n  function lineLength(line) {\n    if (line.height == 0) return 0;\n    var len = line.text.length, merged, cur = line;\n    while (merged = collapsedSpanAtStart(cur)) {\n      var found = merged.find(0, true);\n      cur = found.from.line;\n      len += found.from.ch - found.to.ch;\n    }\n    cur = line;\n    while (merged = collapsedSpanAtEnd(cur)) {\n      var found = merged.find(0, true);\n      len -= cur.text.length - found.from.ch;\n      cur = found.to.line;\n      len += cur.text.length - found.to.ch;\n    }\n    return len;\n  }\n\n  // Find the longest line in the document.\n  function findMaxLine(cm) {\n    var d = cm.display, doc = cm.doc;\n    d.maxLine = getLine(doc, doc.first);\n    d.maxLineLength = lineLength(d.maxLine);\n    d.maxLineChanged = true;\n    doc.iter(function(line) {\n      var len = lineLength(line);\n      if (len > d.maxLineLength) {\n        d.maxLineLength = len;\n        d.maxLine = line;\n      }\n    });\n  }\n\n  // Make sure the gutters options contains the element\n  // \"CodeMirror-linenumbers\" when the lineNumbers option is true.\n  function setGuttersForLineNumbers(options) {\n    var found = indexOf(options.gutters, \"CodeMirror-linenumbers\");\n    if (found == -1 && options.lineNumbers) {\n      options.gutters = options.gutters.concat([\"CodeMirror-linenumbers\"]);\n    } else if (found > -1 && !options.lineNumbers) {\n      options.gutters = options.gutters.slice(0);\n      options.gutters.splice(found, 1);\n    }\n  }\n\n  // SCROLLBARS\n\n  // Prepare DOM reads needed to update the scrollbars. Done in one\n  // shot to minimize update/measure roundtrips.\n  function measureForScrollbars(cm) {\n    var d = cm.display, gutterW = d.gutters.offsetWidth;\n    var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n    return {\n      clientHeight: d.scroller.clientHeight,\n      viewHeight: d.wrapper.clientHeight,\n      scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,\n      viewWidth: d.wrapper.clientWidth,\n      barLeft: cm.options.fixedGutter ? gutterW : 0,\n      docHeight: docH,\n      scrollHeight: docH + scrollGap(cm) + d.barHeight,\n      nativeBarWidth: d.nativeBarWidth,\n      gutterWidth: gutterW\n    };\n  }\n\n  function NativeScrollbars(place, scroll, cm) {\n    this.cm = cm;\n    var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n    var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n    place(vert); place(horiz);\n\n    on(vert, \"scroll\", function() {\n      if (vert.clientHeight) scroll(vert.scrollTop, \"vertical\");\n    });\n    on(horiz, \"scroll\", function() {\n      if (horiz.clientWidth) scroll(horiz.scrollLeft, \"horizontal\");\n    });\n\n    this.checkedOverlay = false;\n    // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n    if (ie && ie_version < 8) this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\";\n  }\n\n  NativeScrollbars.prototype = copyObj({\n    update: function(measure) {\n      var needsH = measure.scrollWidth > measure.clientWidth + 1;\n      var needsV = measure.scrollHeight > measure.clientHeight + 1;\n      var sWidth = measure.nativeBarWidth;\n\n      if (needsV) {\n        this.vert.style.display = \"block\";\n        this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n        var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);\n        // A bug in IE8 can cause this value to be negative, so guard it.\n        this.vert.firstChild.style.height =\n          Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n      } else {\n        this.vert.style.display = \"\";\n        this.vert.firstChild.style.height = \"0\";\n      }\n\n      if (needsH) {\n        this.horiz.style.display = \"block\";\n        this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n        this.horiz.style.left = measure.barLeft + \"px\";\n        var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n        this.horiz.firstChild.style.width =\n          (measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n      } else {\n        this.horiz.style.display = \"\";\n        this.horiz.firstChild.style.width = \"0\";\n      }\n\n      if (!this.checkedOverlay && measure.clientHeight > 0) {\n        if (sWidth == 0) this.overlayHack();\n        this.checkedOverlay = true;\n      }\n\n      return {right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0};\n    },\n    setScrollLeft: function(pos) {\n      if (this.horiz.scrollLeft != pos) this.horiz.scrollLeft = pos;\n    },\n    setScrollTop: function(pos) {\n      if (this.vert.scrollTop != pos) this.vert.scrollTop = pos;\n    },\n    overlayHack: function() {\n      var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n      this.horiz.style.minHeight = this.vert.style.minWidth = w;\n      var self = this;\n      var barMouseDown = function(e) {\n        if (e_target(e) != self.vert && e_target(e) != self.horiz)\n          operation(self.cm, onMouseDown)(e);\n      };\n      on(this.vert, \"mousedown\", barMouseDown);\n      on(this.horiz, \"mousedown\", barMouseDown);\n    },\n    clear: function() {\n      var parent = this.horiz.parentNode;\n      parent.removeChild(this.horiz);\n      parent.removeChild(this.vert);\n    }\n  }, NativeScrollbars.prototype);\n\n  function NullScrollbars() {}\n\n  NullScrollbars.prototype = copyObj({\n    update: function() { return {bottom: 0, right: 0}; },\n    setScrollLeft: function() {},\n    setScrollTop: function() {},\n    clear: function() {}\n  }, NullScrollbars.prototype);\n\n  CodeMirror.scrollbarModel = {\"native\": NativeScrollbars, \"null\": NullScrollbars};\n\n  function initScrollbars(cm) {\n    if (cm.display.scrollbars) {\n      cm.display.scrollbars.clear();\n      if (cm.display.scrollbars.addClass)\n        rmClass(cm.display.wrapper, cm.display.scrollbars.addClass);\n    }\n\n    cm.display.scrollbars = new CodeMirror.scrollbarModel[cm.options.scrollbarStyle](function(node) {\n      cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);\n      // Prevent clicks in the scrollbars from killing focus\n      on(node, \"mousedown\", function() {\n        if (cm.state.focused) setTimeout(function() { cm.display.input.focus(); }, 0);\n      });\n      node.setAttribute(\"cm-not-content\", \"true\");\n    }, function(pos, axis) {\n      if (axis == \"horizontal\") setScrollLeft(cm, pos);\n      else setScrollTop(cm, pos);\n    }, cm);\n    if (cm.display.scrollbars.addClass)\n      addClass(cm.display.wrapper, cm.display.scrollbars.addClass);\n  }\n\n  function updateScrollbars(cm, measure) {\n    if (!measure) measure = measureForScrollbars(cm);\n    var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight;\n    updateScrollbarsInner(cm, measure);\n    for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n      if (startWidth != cm.display.barWidth && cm.options.lineWrapping)\n        updateHeightsInViewport(cm);\n      updateScrollbarsInner(cm, measureForScrollbars(cm));\n      startWidth = cm.display.barWidth; startHeight = cm.display.barHeight;\n    }\n  }\n\n  // Re-synchronize the fake scrollbars with the actual size of the\n  // content.\n  function updateScrollbarsInner(cm, measure) {\n    var d = cm.display;\n    var sizes = d.scrollbars.update(measure);\n\n    d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n    d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n\n    if (sizes.right && sizes.bottom) {\n      d.scrollbarFiller.style.display = \"block\";\n      d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n      d.scrollbarFiller.style.width = sizes.right + \"px\";\n    } else d.scrollbarFiller.style.display = \"\";\n    if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n      d.gutterFiller.style.display = \"block\";\n      d.gutterFiller.style.height = sizes.bottom + \"px\";\n      d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n    } else d.gutterFiller.style.display = \"\";\n  }\n\n  // Compute the lines that are visible in a given viewport (defaults\n  // the the current scroll position). viewport may contain top,\n  // height, and ensure (see op.scrollToPos) properties.\n  function visibleLines(display, doc, viewport) {\n    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n    top = Math.floor(top - paddingTop(display));\n    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n\n    var from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom);\n    // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n    // forces those lines into the viewport (if possible).\n    if (viewport && viewport.ensure) {\n      var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;\n      if (ensureFrom < from) {\n        from = ensureFrom;\n        to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n      } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n        from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n        to = ensureTo;\n      }\n    }\n    return {from: from, to: Math.max(to, from + 1)};\n  }\n\n  // LINE NUMBERS\n\n  // Re-align line numbers and gutter marks to compensate for\n  // horizontal scrolling.\n  function alignHorizontally(cm) {\n    var display = cm.display, view = display.view;\n    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) return;\n    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n    var gutterW = display.gutters.offsetWidth, left = comp + \"px\";\n    for (var i = 0; i < view.length; i++) if (!view[i].hidden) {\n      if (cm.options.fixedGutter && view[i].gutter)\n        view[i].gutter.style.left = left;\n      var align = view[i].alignable;\n      if (align) for (var j = 0; j < align.length; j++)\n        align[j].style.left = left;\n    }\n    if (cm.options.fixedGutter)\n      display.gutters.style.left = (comp + gutterW) + \"px\";\n  }\n\n  // Used to ensure that the line number gutter is still the right\n  // size for the current document size. Returns true when an update\n  // is needed.\n  function maybeUpdateLineNumberWidth(cm) {\n    if (!cm.options.lineNumbers) return false;\n    var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;\n    if (last.length != display.lineNumChars) {\n      var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)],\n                                                 \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n      var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;\n      display.lineGutter.style.width = \"\";\n      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n      display.lineNumWidth = display.lineNumInnerWidth + padding;\n      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n      display.lineGutter.style.width = display.lineNumWidth + \"px\";\n      updateGutterSpace(cm);\n      return true;\n    }\n    return false;\n  }\n\n  function lineNumberFor(options, i) {\n    return String(options.lineNumberFormatter(i + options.firstLineNumber));\n  }\n\n  // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n  // but using getBoundingClientRect to get a sub-pixel-accurate\n  // result.\n  function compensateForHScroll(display) {\n    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left;\n  }\n\n  // DISPLAY DRAWING\n\n  function DisplayUpdate(cm, viewport, force) {\n    var display = cm.display;\n\n    this.viewport = viewport;\n    // Store some values that we'll need later (but don't want to force a relayout for)\n    this.visible = visibleLines(display, cm.doc, viewport);\n    this.editorIsHidden = !display.wrapper.offsetWidth;\n    this.wrapperHeight = display.wrapper.clientHeight;\n    this.wrapperWidth = display.wrapper.clientWidth;\n    this.oldDisplayWidth = displayWidth(cm);\n    this.force = force;\n    this.dims = getDimensions(cm);\n    this.events = [];\n  }\n\n  DisplayUpdate.prototype.signal = function(emitter, type) {\n    if (hasHandler(emitter, type))\n      this.events.push(arguments);\n  };\n  DisplayUpdate.prototype.finish = function() {\n    for (var i = 0; i < this.events.length; i++)\n      signal.apply(null, this.events[i]);\n  };\n\n  function maybeClipScrollbars(cm) {\n    var display = cm.display;\n    if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n      display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n      display.heightForcer.style.height = scrollGap(cm) + \"px\";\n      display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n      display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n      display.scrollbarsClipped = true;\n    }\n  }\n\n  // Does the actual updating of the line display. Bails out\n  // (returning false) when there is nothing to be done and forced is\n  // false.\n  function updateDisplayIfNeeded(cm, update) {\n    var display = cm.display, doc = cm.doc;\n\n    if (update.editorIsHidden) {\n      resetView(cm);\n      return false;\n    }\n\n    // Bail out if the visible area is already rendered and nothing changed.\n    if (!update.force &&\n        update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) &&\n        display.renderedView == display.view && countDirtyView(cm) == 0)\n      return false;\n\n    if (maybeUpdateLineNumberWidth(cm)) {\n      resetView(cm);\n      update.dims = getDimensions(cm);\n    }\n\n    // Compute a suitable new viewport (from & to)\n    var end = doc.first + doc.size;\n    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n    if (display.viewFrom < from && from - display.viewFrom < 20) from = Math.max(doc.first, display.viewFrom);\n    if (display.viewTo > to && display.viewTo - to < 20) to = Math.min(end, display.viewTo);\n    if (sawCollapsedSpans) {\n      from = visualLineNo(cm.doc, from);\n      to = visualLineEndNo(cm.doc, to);\n    }\n\n    var different = from != display.viewFrom || to != display.viewTo ||\n      display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n    adjustView(cm, from, to);\n\n    display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));\n    // Position the mover div to align with the current scroll position\n    cm.display.mover.style.top = display.viewOffset + \"px\";\n\n    var toUpdate = countDirtyView(cm);\n    if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))\n      return false;\n\n    // For big changes, we hide the enclosing element during the\n    // update, since that speeds up the operations on most browsers.\n    var focused = activeElt();\n    if (toUpdate > 4) display.lineDiv.style.display = \"none\";\n    patchDisplay(cm, display.updateLineNumbers, update.dims);\n    if (toUpdate > 4) display.lineDiv.style.display = \"\";\n    display.renderedView = display.view;\n    // There might have been a widget with a focused element that got\n    // hidden or updated, if so re-focus it.\n    if (focused && activeElt() != focused && focused.offsetHeight) focused.focus();\n\n    // Prevent selection and cursors from interfering with the scroll\n    // width and height.\n    removeChildren(display.cursorDiv);\n    removeChildren(display.selectionDiv);\n    display.gutters.style.height = display.sizer.style.minHeight = 0;\n\n    if (different) {\n      display.lastWrapHeight = update.wrapperHeight;\n      display.lastWrapWidth = update.wrapperWidth;\n      startWorker(cm, 400);\n    }\n\n    display.updateLineNumbers = null;\n\n    return true;\n  }\n\n  function postUpdateDisplay(cm, update) {\n    var viewport = update.viewport;\n    for (var first = true;; first = false) {\n      if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n        // Clip forced viewport to actual scrollable area.\n        if (viewport && viewport.top != null)\n          viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)};\n        // Updated line heights might result in the drawn area not\n        // actually covering the viewport. Keep looping until it does.\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)\n          break;\n      }\n      if (!updateDisplayIfNeeded(cm, update)) break;\n      updateHeightsInViewport(cm);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      setDocumentHeight(cm, barMeasure);\n      updateScrollbars(cm, barMeasure);\n    }\n\n    update.signal(cm, \"update\", cm);\n    if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n      update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n      cm.display.reportedViewFrom = cm.display.viewFrom; cm.display.reportedViewTo = cm.display.viewTo;\n    }\n  }\n\n  function updateDisplaySimple(cm, viewport) {\n    var update = new DisplayUpdate(cm, viewport);\n    if (updateDisplayIfNeeded(cm, update)) {\n      updateHeightsInViewport(cm);\n      postUpdateDisplay(cm, update);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      setDocumentHeight(cm, barMeasure);\n      updateScrollbars(cm, barMeasure);\n      update.finish();\n    }\n  }\n\n  function setDocumentHeight(cm, measure) {\n    cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n    var total = measure.docHeight + cm.display.barHeight;\n    cm.display.heightForcer.style.top = total + \"px\";\n    cm.display.gutters.style.height = Math.max(total + scrollGap(cm), measure.clientHeight) + \"px\";\n  }\n\n  // Read the actual heights of the rendered lines, and update their\n  // stored heights to match.\n  function updateHeightsInViewport(cm) {\n    var display = cm.display;\n    var prevBottom = display.lineDiv.offsetTop;\n    for (var i = 0; i < display.view.length; i++) {\n      var cur = display.view[i], height;\n      if (cur.hidden) continue;\n      if (ie && ie_version < 8) {\n        var bot = cur.node.offsetTop + cur.node.offsetHeight;\n        height = bot - prevBottom;\n        prevBottom = bot;\n      } else {\n        var box = cur.node.getBoundingClientRect();\n        height = box.bottom - box.top;\n      }\n      var diff = cur.line.height - height;\n      if (height < 2) height = textHeight(display);\n      if (diff > .001 || diff < -.001) {\n        updateLineHeight(cur.line, height);\n        updateWidgetHeight(cur.line);\n        if (cur.rest) for (var j = 0; j < cur.rest.length; j++)\n          updateWidgetHeight(cur.rest[j]);\n      }\n    }\n  }\n\n  // Read and store the height of line widgets associated with the\n  // given line.\n  function updateWidgetHeight(line) {\n    if (line.widgets) for (var i = 0; i < line.widgets.length; ++i)\n      line.widgets[i].height = line.widgets[i].node.offsetHeight;\n  }\n\n  // Do a bulk-read of the DOM positions and sizes needed to draw the\n  // view, so that we don't interleave reading and writing to the DOM.\n  function getDimensions(cm) {\n    var d = cm.display, left = {}, width = {};\n    var gutterLeft = d.gutters.clientLeft;\n    for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n      left[cm.options.gutters[i]] = n.offsetLeft + n.clientLeft + gutterLeft;\n      width[cm.options.gutters[i]] = n.clientWidth;\n    }\n    return {fixedPos: compensateForHScroll(d),\n            gutterTotalWidth: d.gutters.offsetWidth,\n            gutterLeft: left,\n            gutterWidth: width,\n            wrapperWidth: d.wrapper.clientWidth};\n  }\n\n  // Sync the actual display DOM structure with display.view, removing\n  // nodes for lines that are no longer in view, and creating the ones\n  // that are not there yet, and updating the ones that are out of\n  // date.\n  function patchDisplay(cm, updateNumbersFrom, dims) {\n    var display = cm.display, lineNumbers = cm.options.lineNumbers;\n    var container = display.lineDiv, cur = container.firstChild;\n\n    function rm(node) {\n      var next = node.nextSibling;\n      // Works around a throw-scroll bug in OS X Webkit\n      if (webkit && mac && cm.display.currentWheelTarget == node)\n        node.style.display = \"none\";\n      else\n        node.parentNode.removeChild(node);\n      return next;\n    }\n\n    var view = display.view, lineN = display.viewFrom;\n    // Loop over the elements in the view, syncing cur (the DOM nodes\n    // in display.lineDiv) with the view as we go.\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (lineView.hidden) {\n      } else if (!lineView.node || lineView.node.parentNode != container) { // Not drawn yet\n        var node = buildLineElement(cm, lineView, lineN, dims);\n        container.insertBefore(node, cur);\n      } else { // Already drawn\n        while (cur != lineView.node) cur = rm(cur);\n        var updateNumber = lineNumbers && updateNumbersFrom != null &&\n          updateNumbersFrom <= lineN && lineView.lineNumber;\n        if (lineView.changes) {\n          if (indexOf(lineView.changes, \"gutter\") > -1) updateNumber = false;\n          updateLineForChanges(cm, lineView, lineN, dims);\n        }\n        if (updateNumber) {\n          removeChildren(lineView.lineNumber);\n          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n        }\n        cur = lineView.node.nextSibling;\n      }\n      lineN += lineView.size;\n    }\n    while (cur) cur = rm(cur);\n  }\n\n  // When an aspect of a line changes, a string is added to\n  // lineView.changes. This updates the relevant part of the line's\n  // DOM structure.\n  function updateLineForChanges(cm, lineView, lineN, dims) {\n    for (var j = 0; j < lineView.changes.length; j++) {\n      var type = lineView.changes[j];\n      if (type == \"text\") updateLineText(cm, lineView);\n      else if (type == \"gutter\") updateLineGutter(cm, lineView, lineN, dims);\n      else if (type == \"class\") updateLineClasses(lineView);\n      else if (type == \"widget\") updateLineWidgets(cm, lineView, dims);\n    }\n    lineView.changes = null;\n  }\n\n  // Lines with gutter elements, widgets or a background class need to\n  // be wrapped, and have the extra elements added to the wrapper div\n  function ensureLineWrapped(lineView) {\n    if (lineView.node == lineView.text) {\n      lineView.node = elt(\"div\", null, null, \"position: relative\");\n      if (lineView.text.parentNode)\n        lineView.text.parentNode.replaceChild(lineView.node, lineView.text);\n      lineView.node.appendChild(lineView.text);\n      if (ie && ie_version < 8) lineView.node.style.zIndex = 2;\n    }\n    return lineView.node;\n  }\n\n  function updateLineBackground(lineView) {\n    var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n    if (cls) cls += \" CodeMirror-linebackground\";\n    if (lineView.background) {\n      if (cls) lineView.background.className = cls;\n      else { lineView.background.parentNode.removeChild(lineView.background); lineView.background = null; }\n    } else if (cls) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n    }\n  }\n\n  // Wrapper around buildLineContent which will reuse the structure\n  // in display.externalMeasured when possible.\n  function getLineContent(cm, lineView) {\n    var ext = cm.display.externalMeasured;\n    if (ext && ext.line == lineView.line) {\n      cm.display.externalMeasured = null;\n      lineView.measure = ext.measure;\n      return ext.built;\n    }\n    return buildLineContent(cm, lineView);\n  }\n\n  // Redraw the line's text. Interacts with the background and text\n  // classes because the mode may output tokens that influence these\n  // classes.\n  function updateLineText(cm, lineView) {\n    var cls = lineView.text.className;\n    var built = getLineContent(cm, lineView);\n    if (lineView.text == lineView.node) lineView.node = built.pre;\n    lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n    lineView.text = built.pre;\n    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n      lineView.bgClass = built.bgClass;\n      lineView.textClass = built.textClass;\n      updateLineClasses(lineView);\n    } else if (cls) {\n      lineView.text.className = cls;\n    }\n  }\n\n  function updateLineClasses(lineView) {\n    updateLineBackground(lineView);\n    if (lineView.line.wrapClass)\n      ensureLineWrapped(lineView).className = lineView.line.wrapClass;\n    else if (lineView.node != lineView.text)\n      lineView.node.className = \"\";\n    var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n    lineView.text.className = textClass || \"\";\n  }\n\n  function updateLineGutter(cm, lineView, lineN, dims) {\n    if (lineView.gutter) {\n      lineView.node.removeChild(lineView.gutter);\n      lineView.gutter = null;\n    }\n    if (lineView.gutterBackground) {\n      lineView.node.removeChild(lineView.gutterBackground);\n      lineView.gutterBackground = null;\n    }\n    if (lineView.line.gutterClass) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass,\n                                      \"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) +\n                                      \"px; width: \" + dims.gutterTotalWidth + \"px\");\n      wrap.insertBefore(lineView.gutterBackground, lineView.text);\n    }\n    var markers = lineView.line.gutterMarkers;\n    if (cm.options.lineNumbers || markers) {\n      var wrap = ensureLineWrapped(lineView);\n      var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", \"left: \" +\n                                             (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\");\n      cm.display.input.setUneditable(gutterWrap);\n      wrap.insertBefore(gutterWrap, lineView.text);\n      if (lineView.line.gutterClass)\n        gutterWrap.className += \" \" + lineView.line.gutterClass;\n      if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"]))\n        lineView.lineNumber = gutterWrap.appendChild(\n          elt(\"div\", lineNumberFor(cm.options, lineN),\n              \"CodeMirror-linenumber CodeMirror-gutter-elt\",\n              \"left: \" + dims.gutterLeft[\"CodeMirror-linenumbers\"] + \"px; width: \"\n              + cm.display.lineNumInnerWidth + \"px\"));\n      if (markers) for (var k = 0; k < cm.options.gutters.length; ++k) {\n        var id = cm.options.gutters[k], found = markers.hasOwnProperty(id) && markers[id];\n        if (found)\n          gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\", \"left: \" +\n                                     dims.gutterLeft[id] + \"px; width: \" + dims.gutterWidth[id] + \"px\"));\n      }\n    }\n  }\n\n  function updateLineWidgets(cm, lineView, dims) {\n    if (lineView.alignable) lineView.alignable = null;\n    for (var node = lineView.node.firstChild, next; node; node = next) {\n      var next = node.nextSibling;\n      if (node.className == \"CodeMirror-linewidget\")\n        lineView.node.removeChild(node);\n    }\n    insertLineWidgets(cm, lineView, dims);\n  }\n\n  // Build a line's DOM representation from scratch\n  function buildLineElement(cm, lineView, lineN, dims) {\n    var built = getLineContent(cm, lineView);\n    lineView.text = lineView.node = built.pre;\n    if (built.bgClass) lineView.bgClass = built.bgClass;\n    if (built.textClass) lineView.textClass = built.textClass;\n\n    updateLineClasses(lineView);\n    updateLineGutter(cm, lineView, lineN, dims);\n    insertLineWidgets(cm, lineView, dims);\n    return lineView.node;\n  }\n\n  // A lineView may contain multiple logical lines (when merged by\n  // collapsed spans). The widgets for all of them need to be drawn.\n  function insertLineWidgets(cm, lineView, dims) {\n    insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n    if (lineView.rest) for (var i = 0; i < lineView.rest.length; i++)\n      insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false);\n  }\n\n  function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n    if (!line.widgets) return;\n    var wrap = ensureLineWrapped(lineView);\n    for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n      var widget = ws[i], node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\");\n      if (!widget.handleMouseEvents) node.setAttribute(\"cm-ignore-events\", \"true\");\n      positionLineWidget(widget, node, lineView, dims);\n      cm.display.input.setUneditable(node);\n      if (allowAbove && widget.above)\n        wrap.insertBefore(node, lineView.gutter || lineView.text);\n      else\n        wrap.appendChild(node);\n      signalLater(widget, \"redraw\");\n    }\n  }\n\n  function positionLineWidget(widget, node, lineView, dims) {\n    if (widget.noHScroll) {\n      (lineView.alignable || (lineView.alignable = [])).push(node);\n      var width = dims.wrapperWidth;\n      node.style.left = dims.fixedPos + \"px\";\n      if (!widget.coverGutter) {\n        width -= dims.gutterTotalWidth;\n        node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n      }\n      node.style.width = width + \"px\";\n    }\n    if (widget.coverGutter) {\n      node.style.zIndex = 5;\n      node.style.position = \"relative\";\n      if (!widget.noHScroll) node.style.marginLeft = -dims.gutterTotalWidth + \"px\";\n    }\n  }\n\n  // POSITION OBJECT\n\n  // A Pos instance represents a position within the text.\n  var Pos = CodeMirror.Pos = function(line, ch) {\n    if (!(this instanceof Pos)) return new Pos(line, ch);\n    this.line = line; this.ch = ch;\n  };\n\n  // Compare two positions, return 0 if they are the same, a negative\n  // number when a is less, and a positive number otherwise.\n  var cmp = CodeMirror.cmpPos = function(a, b) { return a.line - b.line || a.ch - b.ch; };\n\n  function copyPos(x) {return Pos(x.line, x.ch);}\n  function maxPos(a, b) { return cmp(a, b) < 0 ? b : a; }\n  function minPos(a, b) { return cmp(a, b) < 0 ? a : b; }\n\n  // INPUT HANDLING\n\n  function ensureFocus(cm) {\n    if (!cm.state.focused) { cm.display.input.focus(); onFocus(cm); }\n  }\n\n  function isReadOnly(cm) {\n    return cm.options.readOnly || cm.doc.cantEdit;\n  }\n\n  // This will be set to an array of strings when copying, so that,\n  // when pasting, we know what kind of selections the copied text\n  // was made out of.\n  var lastCopied = null;\n\n  function applyTextInput(cm, inserted, deleted, sel, origin) {\n    var doc = cm.doc;\n    cm.display.shift = false;\n    if (!sel) sel = doc.sel;\n\n    var paste = cm.state.pasteIncoming || origin == \"paste\";\n    var textLines = doc.splitLines(inserted), multiPaste = null;\n    // When pasing N lines into N selections, insert one line per selection\n    if (paste && sel.ranges.length > 1) {\n      if (lastCopied && lastCopied.join(\"\\n\") == inserted) {\n        if (sel.ranges.length % lastCopied.length == 0) {\n          multiPaste = [];\n          for (var i = 0; i < lastCopied.length; i++)\n            multiPaste.push(doc.splitLines(lastCopied[i]));\n        }\n      } else if (textLines.length == sel.ranges.length) {\n        multiPaste = map(textLines, function(l) { return [l]; });\n      }\n    }\n\n    // Normal behavior is to insert the new text into every selection\n    for (var i = sel.ranges.length - 1; i >= 0; i--) {\n      var range = sel.ranges[i];\n      var from = range.from(), to = range.to();\n      if (range.empty()) {\n        if (deleted && deleted > 0) // Handle deletion\n          from = Pos(from.line, from.ch - deleted);\n        else if (cm.state.overwrite && !paste) // Handle overwrite\n          to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length));\n      }\n      var updateInput = cm.curOp.updateInput;\n      var changeEvent = {from: from, to: to, text: multiPaste ? multiPaste[i % multiPaste.length] : textLines,\n                         origin: origin || (paste ? \"paste\" : cm.state.cutIncoming ? \"cut\" : \"+input\")};\n      makeChange(cm.doc, changeEvent);\n      signalLater(cm, \"inputRead\", cm, changeEvent);\n    }\n    if (inserted && !paste)\n      triggerElectric(cm, inserted);\n\n    ensureCursorVisible(cm);\n    cm.curOp.updateInput = updateInput;\n    cm.curOp.typing = true;\n    cm.state.pasteIncoming = cm.state.cutIncoming = false;\n  }\n\n  function handlePaste(e, cm) {\n    var pasted = e.clipboardData && e.clipboardData.getData(\"text/plain\");\n    if (pasted) {\n      e.preventDefault();\n      if (!isReadOnly(cm) && !cm.options.disableInput)\n        runInOp(cm, function() { applyTextInput(cm, pasted, 0, null, \"paste\"); });\n      return true;\n    }\n  }\n\n  function triggerElectric(cm, inserted) {\n    // When an 'electric' character is inserted, immediately trigger a reindent\n    if (!cm.options.electricChars || !cm.options.smartIndent) return;\n    var sel = cm.doc.sel;\n\n    for (var i = sel.ranges.length - 1; i >= 0; i--) {\n      var range = sel.ranges[i];\n      if (range.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range.head.line)) continue;\n      var mode = cm.getModeAt(range.head);\n      var indented = false;\n      if (mode.electricChars) {\n        for (var j = 0; j < mode.electricChars.length; j++)\n          if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n            indented = indentLine(cm, range.head.line, \"smart\");\n            break;\n          }\n      } else if (mode.electricInput) {\n        if (mode.electricInput.test(getLine(cm.doc, range.head.line).text.slice(0, range.head.ch)))\n          indented = indentLine(cm, range.head.line, \"smart\");\n      }\n      if (indented) signalLater(cm, \"electricInput\", cm, range.head.line);\n    }\n  }\n\n  function copyableRanges(cm) {\n    var text = [], ranges = [];\n    for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n      var line = cm.doc.sel.ranges[i].head.line;\n      var lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)};\n      ranges.push(lineRange);\n      text.push(cm.getRange(lineRange.anchor, lineRange.head));\n    }\n    return {text: text, ranges: ranges};\n  }\n\n  function disableBrowserMagic(field) {\n    field.setAttribute(\"autocorrect\", \"off\");\n    field.setAttribute(\"autocapitalize\", \"off\");\n    field.setAttribute(\"spellcheck\", \"false\");\n  }\n\n  // TEXTAREA INPUT STYLE\n\n  function TextareaInput(cm) {\n    this.cm = cm;\n    // See input.poll and input.reset\n    this.prevInput = \"\";\n\n    // Flag that indicates whether we expect input to appear real soon\n    // now (after some event like 'keypress' or 'input') and are\n    // polling intensively.\n    this.pollingFast = false;\n    // Self-resetting timeout for the poller\n    this.polling = new Delayed();\n    // Tracks when input.reset has punted to just putting a short\n    // string into the textarea instead of the full selection.\n    this.inaccurateSelection = false;\n    // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n    this.hasSelection = false;\n    this.composing = null;\n  };\n\n  function hiddenTextarea() {\n    var te = elt(\"textarea\", null, null, \"position: absolute; padding: 0; width: 1px; height: 1em; outline: none\");\n    var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\");\n    // The textarea is kept positioned near the cursor to prevent the\n    // fact that it'll be scrolled into view on input from scrolling\n    // our fake cursor out of view. On webkit, when wrap=off, paste is\n    // very slow. So make the area wide instead.\n    if (webkit) te.style.width = \"1000px\";\n    else te.setAttribute(\"wrap\", \"off\");\n    // If border: 0; -- iOS fails to open keyboard (issue #1287)\n    if (ios) te.style.border = \"1px solid black\";\n    disableBrowserMagic(te);\n    return div;\n  }\n\n  TextareaInput.prototype = copyObj({\n    init: function(display) {\n      var input = this, cm = this.cm;\n\n      // Wraps and hides input textarea\n      var div = this.wrapper = hiddenTextarea();\n      // The semihidden textarea that is focused when the editor is\n      // focused, and receives input.\n      var te = this.textarea = div.firstChild;\n      display.wrapper.insertBefore(div, display.wrapper.firstChild);\n\n      // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n      if (ios) te.style.width = \"0px\";\n\n      on(te, \"input\", function() {\n        if (ie && ie_version >= 9 && input.hasSelection) input.hasSelection = null;\n        input.poll();\n      });\n\n      on(te, \"paste\", function(e) {\n        if (handlePaste(e, cm)) return true;\n\n        cm.state.pasteIncoming = true;\n        input.fastPoll();\n      });\n\n      function prepareCopyCut(e) {\n        if (cm.somethingSelected()) {\n          lastCopied = cm.getSelections();\n          if (input.inaccurateSelection) {\n            input.prevInput = \"\";\n            input.inaccurateSelection = false;\n            te.value = lastCopied.join(\"\\n\");\n            selectInput(te);\n          }\n        } else if (!cm.options.lineWiseCopyCut) {\n          return;\n        } else {\n          var ranges = copyableRanges(cm);\n          lastCopied = ranges.text;\n          if (e.type == \"cut\") {\n            cm.setSelections(ranges.ranges, null, sel_dontScroll);\n          } else {\n            input.prevInput = \"\";\n            te.value = ranges.text.join(\"\\n\");\n            selectInput(te);\n          }\n        }\n        if (e.type == \"cut\") cm.state.cutIncoming = true;\n      }\n      on(te, \"cut\", prepareCopyCut);\n      on(te, \"copy\", prepareCopyCut);\n\n      on(display.scroller, \"paste\", function(e) {\n        if (eventInWidget(display, e)) return;\n        cm.state.pasteIncoming = true;\n        input.focus();\n      });\n\n      // Prevent normal selection in the editor (we handle our own)\n      on(display.lineSpace, \"selectstart\", function(e) {\n        if (!eventInWidget(display, e)) e_preventDefault(e);\n      });\n\n      on(te, \"compositionstart\", function() {\n        var start = cm.getCursor(\"from\");\n        if (input.composing) input.composing.range.clear()\n        input.composing = {\n          start: start,\n          range: cm.markText(start, cm.getCursor(\"to\"), {className: \"CodeMirror-composing\"})\n        };\n      });\n      on(te, \"compositionend\", function() {\n        if (input.composing) {\n          input.poll();\n          input.composing.range.clear();\n          input.composing = null;\n        }\n      });\n    },\n\n    prepareSelection: function() {\n      // Redraw the selection and/or cursor\n      var cm = this.cm, display = cm.display, doc = cm.doc;\n      var result = prepareSelection(cm);\n\n      // Move the hidden textarea near the cursor to prevent scrolling artifacts\n      if (cm.options.moveInputWithCursor) {\n        var headPos = cursorCoords(cm, doc.sel.primary().head, \"div\");\n        var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();\n        result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10,\n                                            headPos.top + lineOff.top - wrapOff.top));\n        result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10,\n                                             headPos.left + lineOff.left - wrapOff.left));\n      }\n\n      return result;\n    },\n\n    showSelection: function(drawn) {\n      var cm = this.cm, display = cm.display;\n      removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n      removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n      if (drawn.teTop != null) {\n        this.wrapper.style.top = drawn.teTop + \"px\";\n        this.wrapper.style.left = drawn.teLeft + \"px\";\n      }\n    },\n\n    // Reset the input to correspond to the selection (or to be empty,\n    // when not typing and nothing is selected)\n    reset: function(typing) {\n      if (this.contextMenuPending) return;\n      var minimal, selected, cm = this.cm, doc = cm.doc;\n      if (cm.somethingSelected()) {\n        this.prevInput = \"\";\n        var range = doc.sel.primary();\n        minimal = hasCopyEvent &&\n          (range.to().line - range.from().line > 100 || (selected = cm.getSelection()).length > 1000);\n        var content = minimal ? \"-\" : selected || cm.getSelection();\n        this.textarea.value = content;\n        if (cm.state.focused) selectInput(this.textarea);\n        if (ie && ie_version >= 9) this.hasSelection = content;\n      } else if (!typing) {\n        this.prevInput = this.textarea.value = \"\";\n        if (ie && ie_version >= 9) this.hasSelection = null;\n      }\n      this.inaccurateSelection = minimal;\n    },\n\n    getField: function() { return this.textarea; },\n\n    supportsTouch: function() { return false; },\n\n    focus: function() {\n      if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n        try { this.textarea.focus(); }\n        catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n      }\n    },\n\n    blur: function() { this.textarea.blur(); },\n\n    resetPosition: function() {\n      this.wrapper.style.top = this.wrapper.style.left = 0;\n    },\n\n    receivedFocus: function() { this.slowPoll(); },\n\n    // Poll for input changes, using the normal rate of polling. This\n    // runs as long as the editor is focused.\n    slowPoll: function() {\n      var input = this;\n      if (input.pollingFast) return;\n      input.polling.set(this.cm.options.pollInterval, function() {\n        input.poll();\n        if (input.cm.state.focused) input.slowPoll();\n      });\n    },\n\n    // When an event has just come in that is likely to add or change\n    // something in the input textarea, we poll faster, to ensure that\n    // the change appears on the screen quickly.\n    fastPoll: function() {\n      var missed = false, input = this;\n      input.pollingFast = true;\n      function p() {\n        var changed = input.poll();\n        if (!changed && !missed) {missed = true; input.polling.set(60, p);}\n        else {input.pollingFast = false; input.slowPoll();}\n      }\n      input.polling.set(20, p);\n    },\n\n    // Read input from the textarea, and update the document to match.\n    // When something is selected, it is present in the textarea, and\n    // selected (unless it is huge, in which case a placeholder is\n    // used). When nothing is selected, the cursor sits after previously\n    // seen text (can be empty), which is stored in prevInput (we must\n    // not reset the textarea when typing, because that breaks IME).\n    poll: function() {\n      var cm = this.cm, input = this.textarea, prevInput = this.prevInput;\n      // Since this is called a *lot*, try to bail out as cheaply as\n      // possible when it is clear that nothing happened. hasSelection\n      // will be the case when there is a lot of text in the textarea,\n      // in which case reading its value would be expensive.\n      if (this.contextMenuPending || !cm.state.focused ||\n          (hasSelection(input) && !prevInput && !this.composing) ||\n          isReadOnly(cm) || cm.options.disableInput || cm.state.keySeq)\n        return false;\n\n      var text = input.value;\n      // If nothing changed, bail.\n      if (text == prevInput && !cm.somethingSelected()) return false;\n      // Work around nonsensical selection resetting in IE9/10, and\n      // inexplicable appearance of private area unicode characters on\n      // some key combos in Mac (#2689).\n      if (ie && ie_version >= 9 && this.hasSelection === text ||\n          mac && /[\\uf700-\\uf7ff]/.test(text)) {\n        cm.display.input.reset();\n        return false;\n      }\n\n      if (cm.doc.sel == cm.display.selForContextMenu) {\n        var first = text.charCodeAt(0);\n        if (first == 0x200b && !prevInput) prevInput = \"\\u200b\";\n        if (first == 0x21da) { this.reset(); return this.cm.execCommand(\"undo\"); }\n      }\n      // Find the part of the input that is actually new\n      var same = 0, l = Math.min(prevInput.length, text.length);\n      while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) ++same;\n\n      var self = this;\n      runInOp(cm, function() {\n        applyTextInput(cm, text.slice(same), prevInput.length - same,\n                       null, self.composing ? \"*compose\" : null);\n\n        // Don't leave long text in the textarea, since it makes further polling slow\n        if (text.length > 1000 || text.indexOf(\"\\n\") > -1) input.value = self.prevInput = \"\";\n        else self.prevInput = text;\n\n        if (self.composing) {\n          self.composing.range.clear();\n          self.composing.range = cm.markText(self.composing.start, cm.getCursor(\"to\"),\n                                             {className: \"CodeMirror-composing\"});\n        }\n      });\n      return true;\n    },\n\n    ensurePolled: function() {\n      if (this.pollingFast && this.poll()) this.pollingFast = false;\n    },\n\n    onKeyPress: function() {\n      if (ie && ie_version >= 9) this.hasSelection = null;\n      this.fastPoll();\n    },\n\n    onContextMenu: function(e) {\n      var input = this, cm = input.cm, display = cm.display, te = input.textarea;\n      var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;\n      if (!pos || presto) return; // Opera is difficult.\n\n      // Reset the current text selection only if the click is done outside of the selection\n      // and 'resetSelectionOnContextMenu' option is true.\n      var reset = cm.options.resetSelectionOnContextMenu;\n      if (reset && cm.doc.sel.contains(pos) == -1)\n        operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll);\n\n      var oldCSS = te.style.cssText;\n      input.wrapper.style.position = \"absolute\";\n      te.style.cssText = \"position: fixed; width: 30px; height: 30px; top: \" + (e.clientY - 5) +\n        \"px; left: \" + (e.clientX - 5) + \"px; z-index: 1000; background: \" +\n        (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") +\n        \"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n      if (webkit) var oldScrollY = window.scrollY; // Work around Chrome issue (#2712)\n      display.input.focus();\n      if (webkit) window.scrollTo(null, oldScrollY);\n      display.input.reset();\n      // Adds \"Select all\" to context menu in FF\n      if (!cm.somethingSelected()) te.value = input.prevInput = \" \";\n      input.contextMenuPending = true;\n      display.selForContextMenu = cm.doc.sel;\n      clearTimeout(display.detectingSelectAll);\n\n      // Select-all will be greyed out if there's nothing to select, so\n      // this adds a zero-width space so that we can later check whether\n      // it got selected.\n      function prepareSelectAllHack() {\n        if (te.selectionStart != null) {\n          var selected = cm.somethingSelected();\n          var extval = \"\\u200b\" + (selected ? te.value : \"\");\n          te.value = \"\\u21da\"; // Used to catch context-menu undo\n          te.value = extval;\n          input.prevInput = selected ? \"\" : \"\\u200b\";\n          te.selectionStart = 1; te.selectionEnd = extval.length;\n          // Re-set this, in case some other handler touched the\n          // selection in the meantime.\n          display.selForContextMenu = cm.doc.sel;\n        }\n      }\n      function rehide() {\n        input.contextMenuPending = false;\n        input.wrapper.style.position = \"relative\";\n        te.style.cssText = oldCSS;\n        if (ie && ie_version < 9) display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos);\n\n        // Try to detect the user choosing select-all\n        if (te.selectionStart != null) {\n          if (!ie || (ie && ie_version < 9)) prepareSelectAllHack();\n          var i = 0, poll = function() {\n            if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 &&\n                te.selectionEnd > 0 && input.prevInput == \"\\u200b\")\n              operation(cm, commands.selectAll)(cm);\n            else if (i++ < 10) display.detectingSelectAll = setTimeout(poll, 500);\n            else display.input.reset();\n          };\n          display.detectingSelectAll = setTimeout(poll, 200);\n        }\n      }\n\n      if (ie && ie_version >= 9) prepareSelectAllHack();\n      if (captureRightClick) {\n        e_stop(e);\n        var mouseup = function() {\n          off(window, \"mouseup\", mouseup);\n          setTimeout(rehide, 20);\n        };\n        on(window, \"mouseup\", mouseup);\n      } else {\n        setTimeout(rehide, 50);\n      }\n    },\n\n    readOnlyChanged: function(val) {\n      if (!val) this.reset();\n    },\n\n    setUneditable: nothing,\n\n    needsContentAttribute: false\n  }, TextareaInput.prototype);\n\n  // CONTENTEDITABLE INPUT STYLE\n\n  function ContentEditableInput(cm) {\n    this.cm = cm;\n    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n    this.polling = new Delayed();\n    this.gracePeriod = false;\n  }\n\n  ContentEditableInput.prototype = copyObj({\n    init: function(display) {\n      var input = this, cm = input.cm;\n      var div = input.div = display.lineDiv;\n      disableBrowserMagic(div);\n\n      on(div, \"paste\", function(e) { handlePaste(e, cm); })\n\n      on(div, \"compositionstart\", function(e) {\n        var data = e.data;\n        input.composing = {sel: cm.doc.sel, data: data, startData: data};\n        if (!data) return;\n        var prim = cm.doc.sel.primary();\n        var line = cm.getLine(prim.head.line);\n        var found = line.indexOf(data, Math.max(0, prim.head.ch - data.length));\n        if (found > -1 && found <= prim.head.ch)\n          input.composing.sel = simpleSelection(Pos(prim.head.line, found),\n                                                Pos(prim.head.line, found + data.length));\n      });\n      on(div, \"compositionupdate\", function(e) {\n        input.composing.data = e.data;\n      });\n      on(div, \"compositionend\", function(e) {\n        var ours = input.composing;\n        if (!ours) return;\n        if (e.data != ours.startData && !/\\u200b/.test(e.data))\n          ours.data = e.data;\n        // Need a small delay to prevent other code (input event,\n        // selection polling) from doing damage when fired right after\n        // compositionend.\n        setTimeout(function() {\n          if (!ours.handled)\n            input.applyComposition(ours);\n          if (input.composing == ours)\n            input.composing = null;\n        }, 50);\n      });\n\n      on(div, \"touchstart\", function() {\n        input.forceCompositionEnd();\n      });\n\n      on(div, \"input\", function() {\n        if (input.composing) return;\n        if (isReadOnly(cm) || !input.pollContent())\n          runInOp(input.cm, function() {regChange(cm);});\n      });\n\n      function onCopyCut(e) {\n        if (cm.somethingSelected()) {\n          lastCopied = cm.getSelections();\n          if (e.type == \"cut\") cm.replaceSelection(\"\", null, \"cut\");\n        } else if (!cm.options.lineWiseCopyCut) {\n          return;\n        } else {\n          var ranges = copyableRanges(cm);\n          lastCopied = ranges.text;\n          if (e.type == \"cut\") {\n            cm.operation(function() {\n              cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n              cm.replaceSelection(\"\", null, \"cut\");\n            });\n          }\n        }\n        // iOS exposes the clipboard API, but seems to discard content inserted into it\n        if (e.clipboardData && !ios) {\n          e.preventDefault();\n          e.clipboardData.clearData();\n          e.clipboardData.setData(\"text/plain\", lastCopied.join(\"\\n\"));\n        } else {\n          // Old-fashioned briefly-focus-a-textarea hack\n          var kludge = hiddenTextarea(), te = kludge.firstChild;\n          cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n          te.value = lastCopied.join(\"\\n\");\n          var hadFocus = document.activeElement;\n          selectInput(te);\n          setTimeout(function() {\n            cm.display.lineSpace.removeChild(kludge);\n            hadFocus.focus();\n          }, 50);\n        }\n      }\n      on(div, \"copy\", onCopyCut);\n      on(div, \"cut\", onCopyCut);\n    },\n\n    prepareSelection: function() {\n      var result = prepareSelection(this.cm, false);\n      result.focus = this.cm.state.focused;\n      return result;\n    },\n\n    showSelection: function(info) {\n      if (!info || !this.cm.display.view.length) return;\n      if (info.focus) this.showPrimarySelection();\n      this.showMultipleSelections(info);\n    },\n\n    showPrimarySelection: function() {\n      var sel = window.getSelection(), prim = this.cm.doc.sel.primary();\n      var curAnchor = domToPos(this.cm, sel.anchorNode, sel.anchorOffset);\n      var curFocus = domToPos(this.cm, sel.focusNode, sel.focusOffset);\n      if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad &&\n          cmp(minPos(curAnchor, curFocus), prim.from()) == 0 &&\n          cmp(maxPos(curAnchor, curFocus), prim.to()) == 0)\n        return;\n\n      var start = posToDOM(this.cm, prim.from());\n      var end = posToDOM(this.cm, prim.to());\n      if (!start && !end) return;\n\n      var view = this.cm.display.view;\n      var old = sel.rangeCount && sel.getRangeAt(0);\n      if (!start) {\n        start = {node: view[0].measure.map[2], offset: 0};\n      } else if (!end) { // FIXME dangerously hacky\n        var measure = view[view.length - 1].measure;\n        var map = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n        end = {node: map[map.length - 1], offset: map[map.length - 2] - map[map.length - 3]};\n      }\n\n      try { var rng = range(start.node, start.offset, end.offset, end.node); }\n      catch(e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n      if (rng) {\n        sel.removeAllRanges();\n        sel.addRange(rng);\n        if (old && sel.anchorNode == null) sel.addRange(old);\n        else if (gecko) this.startGracePeriod();\n      }\n      this.rememberSelection();\n    },\n\n    startGracePeriod: function() {\n      var input = this;\n      clearTimeout(this.gracePeriod);\n      this.gracePeriod = setTimeout(function() {\n        input.gracePeriod = false;\n        if (input.selectionChanged())\n          input.cm.operation(function() { input.cm.curOp.selectionChanged = true; });\n      }, 20);\n    },\n\n    showMultipleSelections: function(info) {\n      removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n      removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n    },\n\n    rememberSelection: function() {\n      var sel = window.getSelection();\n      this.lastAnchorNode = sel.anchorNode; this.lastAnchorOffset = sel.anchorOffset;\n      this.lastFocusNode = sel.focusNode; this.lastFocusOffset = sel.focusOffset;\n    },\n\n    selectionInEditor: function() {\n      var sel = window.getSelection();\n      if (!sel.rangeCount) return false;\n      var node = sel.getRangeAt(0).commonAncestorContainer;\n      return contains(this.div, node);\n    },\n\n    focus: function() {\n      if (this.cm.options.readOnly != \"nocursor\") this.div.focus();\n    },\n    blur: function() { this.div.blur(); },\n    getField: function() { return this.div; },\n\n    supportsTouch: function() { return true; },\n\n    receivedFocus: function() {\n      var input = this;\n      if (this.selectionInEditor())\n        this.pollSelection();\n      else\n        runInOp(this.cm, function() { input.cm.curOp.selectionChanged = true; });\n\n      function poll() {\n        if (input.cm.state.focused) {\n          input.pollSelection();\n          input.polling.set(input.cm.options.pollInterval, poll);\n        }\n      }\n      this.polling.set(this.cm.options.pollInterval, poll);\n    },\n\n    selectionChanged: function() {\n      var sel = window.getSelection();\n      return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset ||\n        sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset;\n    },\n\n    pollSelection: function() {\n      if (!this.composing && !this.gracePeriod && this.selectionChanged()) {\n        var sel = window.getSelection(), cm = this.cm;\n        this.rememberSelection();\n        var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n        var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n        if (anchor && head) runInOp(cm, function() {\n          setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n          if (anchor.bad || head.bad) cm.curOp.selectionChanged = true;\n        });\n      }\n    },\n\n    pollContent: function() {\n      var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary();\n      var from = sel.from(), to = sel.to();\n      if (from.line < display.viewFrom || to.line > display.viewTo - 1) return false;\n\n      var fromIndex;\n      if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n        var fromLine = lineNo(display.view[0].line);\n        var fromNode = display.view[0].node;\n      } else {\n        var fromLine = lineNo(display.view[fromIndex].line);\n        var fromNode = display.view[fromIndex - 1].node.nextSibling;\n      }\n      var toIndex = findViewIndex(cm, to.line);\n      if (toIndex == display.view.length - 1) {\n        var toLine = display.viewTo - 1;\n        var toNode = display.lineDiv.lastChild;\n      } else {\n        var toLine = lineNo(display.view[toIndex + 1].line) - 1;\n        var toNode = display.view[toIndex + 1].node.previousSibling;\n      }\n\n      var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n      var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n      while (newText.length > 1 && oldText.length > 1) {\n        if (lst(newText) == lst(oldText)) { newText.pop(); oldText.pop(); toLine--; }\n        else if (newText[0] == oldText[0]) { newText.shift(); oldText.shift(); fromLine++; }\n        else break;\n      }\n\n      var cutFront = 0, cutEnd = 0;\n      var newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length);\n      while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))\n        ++cutFront;\n      var newBot = lst(newText), oldBot = lst(oldText);\n      var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0),\n                               oldBot.length - (oldText.length == 1 ? cutFront : 0));\n      while (cutEnd < maxCutEnd &&\n             newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))\n        ++cutEnd;\n\n      newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd);\n      newText[0] = newText[0].slice(cutFront);\n\n      var chFrom = Pos(fromLine, cutFront);\n      var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n      if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n        replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n        return true;\n      }\n    },\n\n    ensurePolled: function() {\n      this.forceCompositionEnd();\n    },\n    reset: function() {\n      this.forceCompositionEnd();\n    },\n    forceCompositionEnd: function() {\n      if (!this.composing || this.composing.handled) return;\n      this.applyComposition(this.composing);\n      this.composing.handled = true;\n      this.div.blur();\n      this.div.focus();\n    },\n    applyComposition: function(composing) {\n      if (isReadOnly(this.cm))\n        operation(this.cm, regChange)(this.cm)\n      else if (composing.data && composing.data != composing.startData)\n        operation(this.cm, applyTextInput)(this.cm, composing.data, 0, composing.sel);\n    },\n\n    setUneditable: function(node) {\n      node.contentEditable = \"false\"\n    },\n\n    onKeyPress: function(e) {\n      e.preventDefault();\n      if (!isReadOnly(this.cm))\n        operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0);\n    },\n\n    readOnlyChanged: function(val) {\n      this.div.contentEditable = String(val != \"nocursor\")\n    },\n\n    onContextMenu: nothing,\n    resetPosition: nothing,\n\n    needsContentAttribute: true\n  }, ContentEditableInput.prototype);\n\n  function posToDOM(cm, pos) {\n    var view = findViewForLine(cm, pos.line);\n    if (!view || view.hidden) return null;\n    var line = getLine(cm.doc, pos.line);\n    var info = mapFromLineView(view, line, pos.line);\n\n    var order = getOrder(line), side = \"left\";\n    if (order) {\n      var partPos = getBidiPartAt(order, pos.ch);\n      side = partPos % 2 ? \"right\" : \"left\";\n    }\n    var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n    result.offset = result.collapse == \"right\" ? result.end : result.start;\n    return result;\n  }\n\n  function badPos(pos, bad) { if (bad) pos.bad = true; return pos; }\n\n  function domToPos(cm, node, offset) {\n    var lineNode;\n    if (node == cm.display.lineDiv) {\n      lineNode = cm.display.lineDiv.childNodes[offset];\n      if (!lineNode) return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true);\n      node = null; offset = 0;\n    } else {\n      for (lineNode = node;; lineNode = lineNode.parentNode) {\n        if (!lineNode || lineNode == cm.display.lineDiv) return null;\n        if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) break;\n      }\n    }\n    for (var i = 0; i < cm.display.view.length; i++) {\n      var lineView = cm.display.view[i];\n      if (lineView.node == lineNode)\n        return locateNodeInLineView(lineView, node, offset);\n    }\n  }\n\n  function locateNodeInLineView(lineView, node, offset) {\n    var wrapper = lineView.text.firstChild, bad = false;\n    if (!node || !contains(wrapper, node)) return badPos(Pos(lineNo(lineView.line), 0), true);\n    if (node == wrapper) {\n      bad = true;\n      node = wrapper.childNodes[offset];\n      offset = 0;\n      if (!node) {\n        var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n        return badPos(Pos(lineNo(line), line.text.length), bad);\n      }\n    }\n\n    var textNode = node.nodeType == 3 ? node : null, topNode = node;\n    if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n      textNode = node.firstChild;\n      if (offset) offset = textNode.nodeValue.length;\n    }\n    while (topNode.parentNode != wrapper) topNode = topNode.parentNode;\n    var measure = lineView.measure, maps = measure.maps;\n\n    function find(textNode, topNode, offset) {\n      for (var i = -1; i < (maps ? maps.length : 0); i++) {\n        var map = i < 0 ? measure.map : maps[i];\n        for (var j = 0; j < map.length; j += 3) {\n          var curNode = map[j + 2];\n          if (curNode == textNode || curNode == topNode) {\n            var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n            var ch = map[j] + offset;\n            if (offset < 0 || curNode != textNode) ch = map[j + (offset ? 1 : 0)];\n            return Pos(line, ch);\n          }\n        }\n      }\n    }\n    var found = find(textNode, topNode, offset);\n    if (found) return badPos(found, bad);\n\n    // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n    for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n      found = find(after, after.firstChild, 0);\n      if (found)\n        return badPos(Pos(found.line, found.ch - dist), bad);\n      else\n        dist += after.textContent.length;\n    }\n    for (var before = topNode.previousSibling, dist = offset; before; before = before.previousSibling) {\n      found = find(before, before.firstChild, -1);\n      if (found)\n        return badPos(Pos(found.line, found.ch + dist), bad);\n      else\n        dist += after.textContent.length;\n    }\n  }\n\n  function domTextBetween(cm, from, to, fromLine, toLine) {\n    var text = \"\", closing = false, lineSep = cm.doc.lineSeparator();\n    function recognizeMarker(id) { return function(marker) { return marker.id == id; }; }\n    function walk(node) {\n      if (node.nodeType == 1) {\n        var cmText = node.getAttribute(\"cm-text\");\n        if (cmText != null) {\n          if (cmText == \"\") cmText = node.textContent.replace(/\\u200b/g, \"\");\n          text += cmText;\n          return;\n        }\n        var markerID = node.getAttribute(\"cm-marker\"), range;\n        if (markerID) {\n          var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n          if (found.length && (range = found[0].find()))\n            text += getBetween(cm.doc, range.from, range.to).join(lineSep);\n          return;\n        }\n        if (node.getAttribute(\"contenteditable\") == \"false\") return;\n        for (var i = 0; i < node.childNodes.length; i++)\n          walk(node.childNodes[i]);\n        if (/^(pre|div|p)$/i.test(node.nodeName))\n          closing = true;\n      } else if (node.nodeType == 3) {\n        var val = node.nodeValue;\n        if (!val) return;\n        if (closing) {\n          text += lineSep;\n          closing = false;\n        }\n        text += val;\n      }\n    }\n    for (;;) {\n      walk(from);\n      if (from == to) break;\n      from = from.nextSibling;\n    }\n    return text;\n  }\n\n  CodeMirror.inputStyles = {\"textarea\": TextareaInput, \"contenteditable\": ContentEditableInput};\n\n  // SELECTION / CURSOR\n\n  // Selection objects are immutable. A new one is created every time\n  // the selection changes. A selection is one or more non-overlapping\n  // (and non-touching) ranges, sorted, and an integer that indicates\n  // which one is the primary selection (the one that's scrolled into\n  // view, that getCursor returns, etc).\n  function Selection(ranges, primIndex) {\n    this.ranges = ranges;\n    this.primIndex = primIndex;\n  }\n\n  Selection.prototype = {\n    primary: function() { return this.ranges[this.primIndex]; },\n    equals: function(other) {\n      if (other == this) return true;\n      if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) return false;\n      for (var i = 0; i < this.ranges.length; i++) {\n        var here = this.ranges[i], there = other.ranges[i];\n        if (cmp(here.anchor, there.anchor) != 0 || cmp(here.head, there.head) != 0) return false;\n      }\n      return true;\n    },\n    deepCopy: function() {\n      for (var out = [], i = 0; i < this.ranges.length; i++)\n        out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head));\n      return new Selection(out, this.primIndex);\n    },\n    somethingSelected: function() {\n      for (var i = 0; i < this.ranges.length; i++)\n        if (!this.ranges[i].empty()) return true;\n      return false;\n    },\n    contains: function(pos, end) {\n      if (!end) end = pos;\n      for (var i = 0; i < this.ranges.length; i++) {\n        var range = this.ranges[i];\n        if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)\n          return i;\n      }\n      return -1;\n    }\n  };\n\n  function Range(anchor, head) {\n    this.anchor = anchor; this.head = head;\n  }\n\n  Range.prototype = {\n    from: function() { return minPos(this.anchor, this.head); },\n    to: function() { return maxPos(this.anchor, this.head); },\n    empty: function() {\n      return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch;\n    }\n  };\n\n  // Take an unsorted, potentially overlapping set of ranges, and\n  // build a selection out of it. 'Consumes' ranges array (modifying\n  // it).\n  function normalizeSelection(ranges, primIndex) {\n    var prim = ranges[primIndex];\n    ranges.sort(function(a, b) { return cmp(a.from(), b.from()); });\n    primIndex = indexOf(ranges, prim);\n    for (var i = 1; i < ranges.length; i++) {\n      var cur = ranges[i], prev = ranges[i - 1];\n      if (cmp(prev.to(), cur.from()) >= 0) {\n        var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to());\n        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n        if (i <= primIndex) --primIndex;\n        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n      }\n    }\n    return new Selection(ranges, primIndex);\n  }\n\n  function simpleSelection(anchor, head) {\n    return new Selection([new Range(anchor, head || anchor)], 0);\n  }\n\n  // Most of the external API clips given positions to make sure they\n  // actually exist within the document.\n  function clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1));}\n  function clipPos(doc, pos) {\n    if (pos.line < doc.first) return Pos(doc.first, 0);\n    var last = doc.first + doc.size - 1;\n    if (pos.line > last) return Pos(last, getLine(doc, last).text.length);\n    return clipToLen(pos, getLine(doc, pos.line).text.length);\n  }\n  function clipToLen(pos, linelen) {\n    var ch = pos.ch;\n    if (ch == null || ch > linelen) return Pos(pos.line, linelen);\n    else if (ch < 0) return Pos(pos.line, 0);\n    else return pos;\n  }\n  function isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size;}\n  function clipPosArray(doc, array) {\n    for (var out = [], i = 0; i < array.length; i++) out[i] = clipPos(doc, array[i]);\n    return out;\n  }\n\n  // SELECTION UPDATES\n\n  // The 'scroll' parameter given to many of these indicated whether\n  // the new cursor position should be scrolled into view after\n  // modifying the selection.\n\n  // If shift is held or the extend flag is set, extends a range to\n  // include a given position (and optionally a second position).\n  // Otherwise, simply returns the range between the given positions.\n  // Used for cursor motion and such.\n  function extendRange(doc, range, head, other) {\n    if (doc.cm && doc.cm.display.shift || doc.extend) {\n      var anchor = range.anchor;\n      if (other) {\n        var posBefore = cmp(head, anchor) < 0;\n        if (posBefore != (cmp(other, anchor) < 0)) {\n          anchor = head;\n          head = other;\n        } else if (posBefore != (cmp(head, other) < 0)) {\n          head = other;\n        }\n      }\n      return new Range(anchor, head);\n    } else {\n      return new Range(other || head, head);\n    }\n  }\n\n  // Extend the primary selection range, discard the rest.\n  function extendSelection(doc, head, other, options) {\n    setSelection(doc, new Selection([extendRange(doc, doc.sel.primary(), head, other)], 0), options);\n  }\n\n  // Extend all selections (pos is an array of selections with length\n  // equal the number of selections)\n  function extendSelections(doc, heads, options) {\n    for (var out = [], i = 0; i < doc.sel.ranges.length; i++)\n      out[i] = extendRange(doc, doc.sel.ranges[i], heads[i], null);\n    var newSel = normalizeSelection(out, doc.sel.primIndex);\n    setSelection(doc, newSel, options);\n  }\n\n  // Updates a single range in the selection.\n  function replaceOneSelection(doc, i, range, options) {\n    var ranges = doc.sel.ranges.slice(0);\n    ranges[i] = range;\n    setSelection(doc, normalizeSelection(ranges, doc.sel.primIndex), options);\n  }\n\n  // Reset the selection to a single range.\n  function setSimpleSelection(doc, anchor, head, options) {\n    setSelection(doc, simpleSelection(anchor, head), options);\n  }\n\n  // Give beforeSelectionChange handlers a change to influence a\n  // selection update.\n  function filterSelectionChange(doc, sel) {\n    var obj = {\n      ranges: sel.ranges,\n      update: function(ranges) {\n        this.ranges = [];\n        for (var i = 0; i < ranges.length; i++)\n          this.ranges[i] = new Range(clipPos(doc, ranges[i].anchor),\n                                     clipPos(doc, ranges[i].head));\n      }\n    };\n    signal(doc, \"beforeSelectionChange\", doc, obj);\n    if (doc.cm) signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj);\n    if (obj.ranges != sel.ranges) return normalizeSelection(obj.ranges, obj.ranges.length - 1);\n    else return sel;\n  }\n\n  function setSelectionReplaceHistory(doc, sel, options) {\n    var done = doc.history.done, last = lst(done);\n    if (last && last.ranges) {\n      done[done.length - 1] = sel;\n      setSelectionNoUndo(doc, sel, options);\n    } else {\n      setSelection(doc, sel, options);\n    }\n  }\n\n  // Set a new selection.\n  function setSelection(doc, sel, options) {\n    setSelectionNoUndo(doc, sel, options);\n    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n  }\n\n  function setSelectionNoUndo(doc, sel, options) {\n    if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\"))\n      sel = filterSelectionChange(doc, sel);\n\n    var bias = options && options.bias ||\n      (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n\n    if (!(options && options.scroll === false) && doc.cm)\n      ensureCursorVisible(doc.cm);\n  }\n\n  function setSelectionInner(doc, sel) {\n    if (sel.equals(doc.sel)) return;\n\n    doc.sel = sel;\n\n    if (doc.cm) {\n      doc.cm.curOp.updateInput = doc.cm.curOp.selectionChanged = true;\n      signalCursorActivity(doc.cm);\n    }\n    signalLater(doc, \"cursorActivity\", doc);\n  }\n\n  // Verify that the selection does not partially select any atomic\n  // marked ranges.\n  function reCheckSelection(doc) {\n    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false), sel_dontScroll);\n  }\n\n  // Return a selection that does not partially select any atomic\n  // ranges.\n  function skipAtomicInSelection(doc, sel, bias, mayClear) {\n    var out;\n    for (var i = 0; i < sel.ranges.length; i++) {\n      var range = sel.ranges[i];\n      var newAnchor = skipAtomic(doc, range.anchor, bias, mayClear);\n      var newHead = skipAtomic(doc, range.head, bias, mayClear);\n      if (out || newAnchor != range.anchor || newHead != range.head) {\n        if (!out) out = sel.ranges.slice(0, i);\n        out[i] = new Range(newAnchor, newHead);\n      }\n    }\n    return out ? normalizeSelection(out, sel.primIndex) : sel;\n  }\n\n  // Ensure a given position is not inside an atomic range.\n  function skipAtomic(doc, pos, bias, mayClear) {\n    var flipped = false, curPos = pos;\n    var dir = bias || 1;\n    doc.cantEdit = false;\n    search: for (;;) {\n      var line = getLine(doc, curPos.line);\n      if (line.markedSpans) {\n        for (var i = 0; i < line.markedSpans.length; ++i) {\n          var sp = line.markedSpans[i], m = sp.marker;\n          if ((sp.from == null || (m.inclusiveLeft ? sp.from <= curPos.ch : sp.from < curPos.ch)) &&\n              (sp.to == null || (m.inclusiveRight ? sp.to >= curPos.ch : sp.to > curPos.ch))) {\n            if (mayClear) {\n              signal(m, \"beforeCursorEnter\");\n              if (m.explicitlyCleared) {\n                if (!line.markedSpans) break;\n                else {--i; continue;}\n              }\n            }\n            if (!m.atomic) continue;\n            var newPos = m.find(dir < 0 ? -1 : 1);\n            if (cmp(newPos, curPos) == 0) {\n              newPos.ch += dir;\n              if (newPos.ch < 0) {\n                if (newPos.line > doc.first) newPos = clipPos(doc, Pos(newPos.line - 1));\n                else newPos = null;\n              } else if (newPos.ch > line.text.length) {\n                if (newPos.line < doc.first + doc.size - 1) newPos = Pos(newPos.line + 1, 0);\n                else newPos = null;\n              }\n              if (!newPos) {\n                if (flipped) {\n                  // Driven in a corner -- no valid cursor position found at all\n                  // -- try again *with* clearing, if we didn't already\n                  if (!mayClear) return skipAtomic(doc, pos, bias, true);\n                  // Otherwise, turn off editing until further notice, and return the start of the doc\n                  doc.cantEdit = true;\n                  return Pos(doc.first, 0);\n                }\n                flipped = true; newPos = pos; dir = -dir;\n              }\n            }\n            curPos = newPos;\n            continue search;\n          }\n        }\n      }\n      return curPos;\n    }\n  }\n\n  // SELECTION DRAWING\n\n  function updateSelection(cm) {\n    cm.display.input.showSelection(cm.display.input.prepareSelection());\n  }\n\n  function prepareSelection(cm, primary) {\n    var doc = cm.doc, result = {};\n    var curFragment = result.cursors = document.createDocumentFragment();\n    var selFragment = result.selection = document.createDocumentFragment();\n\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      if (primary === false && i == doc.sel.primIndex) continue;\n      var range = doc.sel.ranges[i];\n      var collapsed = range.empty();\n      if (collapsed || cm.options.showCursorWhenSelecting)\n        drawSelectionCursor(cm, range.head, curFragment);\n      if (!collapsed)\n        drawSelectionRange(cm, range, selFragment);\n    }\n    return result;\n  }\n\n  // Draws a cursor for the given range\n  function drawSelectionCursor(cm, head, output) {\n    var pos = cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n\n    var cursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor\"));\n    cursor.style.left = pos.left + \"px\";\n    cursor.style.top = pos.top + \"px\";\n    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n\n    if (pos.other) {\n      // Secondary cursor, shown when on a 'jump' in bi-directional text\n      var otherCursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n      otherCursor.style.display = \"\";\n      otherCursor.style.left = pos.other.left + \"px\";\n      otherCursor.style.top = pos.other.top + \"px\";\n      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n    }\n  }\n\n  // Draws the given range as a highlighted selection\n  function drawSelectionRange(cm, range, output) {\n    var display = cm.display, doc = cm.doc;\n    var fragment = document.createDocumentFragment();\n    var padding = paddingH(cm.display), leftSide = padding.left;\n    var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n\n    function add(left, top, width, bottom) {\n      if (top < 0) top = 0;\n      top = Math.round(top);\n      bottom = Math.round(bottom);\n      fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", \"position: absolute; left: \" + left +\n                               \"px; top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) +\n                               \"px; height: \" + (bottom - top) + \"px\"));\n    }\n\n    function drawForLine(line, fromArg, toArg) {\n      var lineObj = getLine(doc, line);\n      var lineLen = lineObj.text.length;\n      var start, end;\n      function coords(ch, bias) {\n        return charCoords(cm, Pos(line, ch), \"div\", lineObj, bias);\n      }\n\n      iterateBidiSections(getOrder(lineObj), fromArg || 0, toArg == null ? lineLen : toArg, function(from, to, dir) {\n        var leftPos = coords(from, \"left\"), rightPos, left, right;\n        if (from == to) {\n          rightPos = leftPos;\n          left = right = leftPos.left;\n        } else {\n          rightPos = coords(to - 1, \"right\");\n          if (dir == \"rtl\") { var tmp = leftPos; leftPos = rightPos; rightPos = tmp; }\n          left = leftPos.left;\n          right = rightPos.right;\n        }\n        if (fromArg == null && from == 0) left = leftSide;\n        if (rightPos.top - leftPos.top > 3) { // Different lines, draw top part\n          add(left, leftPos.top, null, leftPos.bottom);\n          left = leftSide;\n          if (leftPos.bottom < rightPos.top) add(left, leftPos.bottom, null, rightPos.top);\n        }\n        if (toArg == null && to == lineLen) right = rightSide;\n        if (!start || leftPos.top < start.top || leftPos.top == start.top && leftPos.left < start.left)\n          start = leftPos;\n        if (!end || rightPos.bottom > end.bottom || rightPos.bottom == end.bottom && rightPos.right > end.right)\n          end = rightPos;\n        if (left < leftSide + 1) left = leftSide;\n        add(left, rightPos.top, right - left, rightPos.bottom);\n      });\n      return {start: start, end: end};\n    }\n\n    var sFrom = range.from(), sTo = range.to();\n    if (sFrom.line == sTo.line) {\n      drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n    } else {\n      var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line);\n      var singleVLine = visualLine(fromLine) == visualLine(toLine);\n      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n      if (singleVLine) {\n        if (leftEnd.top < rightStart.top - 2) {\n          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n        } else {\n          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n        }\n      }\n      if (leftEnd.bottom < rightStart.top)\n        add(leftSide, leftEnd.bottom, null, rightStart.top);\n    }\n\n    output.appendChild(fragment);\n  }\n\n  // Cursor-blinking\n  function restartBlink(cm) {\n    if (!cm.state.focused) return;\n    var display = cm.display;\n    clearInterval(display.blinker);\n    var on = true;\n    display.cursorDiv.style.visibility = \"\";\n    if (cm.options.cursorBlinkRate > 0)\n      display.blinker = setInterval(function() {\n        display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\";\n      }, cm.options.cursorBlinkRate);\n    else if (cm.options.cursorBlinkRate < 0)\n      display.cursorDiv.style.visibility = \"hidden\";\n  }\n\n  // HIGHLIGHT WORKER\n\n  function startWorker(cm, time) {\n    if (cm.doc.mode.startState && cm.doc.frontier < cm.display.viewTo)\n      cm.state.highlight.set(time, bind(highlightWorker, cm));\n  }\n\n  function highlightWorker(cm) {\n    var doc = cm.doc;\n    if (doc.frontier < doc.first) doc.frontier = doc.first;\n    if (doc.frontier >= cm.display.viewTo) return;\n    var end = +new Date + cm.options.workTime;\n    var state = copyState(doc.mode, getStateBefore(cm, doc.frontier));\n    var changedLines = [];\n\n    doc.iter(doc.frontier, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function(line) {\n      if (doc.frontier >= cm.display.viewFrom) { // Visible\n        var oldStyles = line.styles, tooLong = line.text.length > cm.options.maxHighlightLength;\n        var highlighted = highlightLine(cm, line, tooLong ? copyState(doc.mode, state) : state, true);\n        line.styles = highlighted.styles;\n        var oldCls = line.styleClasses, newCls = highlighted.classes;\n        if (newCls) line.styleClasses = newCls;\n        else if (oldCls) line.styleClasses = null;\n        var ischange = !oldStyles || oldStyles.length != line.styles.length ||\n          oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n        for (var i = 0; !ischange && i < oldStyles.length; ++i) ischange = oldStyles[i] != line.styles[i];\n        if (ischange) changedLines.push(doc.frontier);\n        line.stateAfter = tooLong ? state : copyState(doc.mode, state);\n      } else {\n        if (line.text.length <= cm.options.maxHighlightLength)\n          processLine(cm, line.text, state);\n        line.stateAfter = doc.frontier % 5 == 0 ? copyState(doc.mode, state) : null;\n      }\n      ++doc.frontier;\n      if (+new Date > end) {\n        startWorker(cm, cm.options.workDelay);\n        return true;\n      }\n    });\n    if (changedLines.length) runInOp(cm, function() {\n      for (var i = 0; i < changedLines.length; i++)\n        regLineChange(cm, changedLines[i], \"text\");\n    });\n  }\n\n  // Finds the line to start with when starting a parse. Tries to\n  // find a line with a stateAfter, so that it can start with a\n  // valid state. If that fails, it returns the line with the\n  // smallest indentation, which tends to need the least context to\n  // parse correctly.\n  function findStartLine(cm, n, precise) {\n    var minindent, minline, doc = cm.doc;\n    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n    for (var search = n; search > lim; --search) {\n      if (search <= doc.first) return doc.first;\n      var line = getLine(doc, search - 1);\n      if (line.stateAfter && (!precise || search <= doc.frontier)) return search;\n      var indented = countColumn(line.text, null, cm.options.tabSize);\n      if (minline == null || minindent > indented) {\n        minline = search - 1;\n        minindent = indented;\n      }\n    }\n    return minline;\n  }\n\n  function getStateBefore(cm, n, precise) {\n    var doc = cm.doc, display = cm.display;\n    if (!doc.mode.startState) return true;\n    var pos = findStartLine(cm, n, precise), state = pos > doc.first && getLine(doc, pos-1).stateAfter;\n    if (!state) state = startState(doc.mode);\n    else state = copyState(doc.mode, state);\n    doc.iter(pos, n, function(line) {\n      processLine(cm, line.text, state);\n      var save = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo;\n      line.stateAfter = save ? copyState(doc.mode, state) : null;\n      ++pos;\n    });\n    if (precise) doc.frontier = pos;\n    return state;\n  }\n\n  // POSITION MEASUREMENT\n\n  function paddingTop(display) {return display.lineSpace.offsetTop;}\n  function paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight;}\n  function paddingH(display) {\n    if (display.cachedPaddingH) return display.cachedPaddingH;\n    var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\"));\n    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n    var data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)};\n    if (!isNaN(data.left) && !isNaN(data.right)) display.cachedPaddingH = data;\n    return data;\n  }\n\n  function scrollGap(cm) { return scrollerGap - cm.display.nativeBarWidth; }\n  function displayWidth(cm) {\n    return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth;\n  }\n  function displayHeight(cm) {\n    return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight;\n  }\n\n  // Ensure the lineView.wrapping.heights array is populated. This is\n  // an array of bottom offsets for the lines that make up a drawn\n  // line. When lineWrapping is on, there might be more than one\n  // height.\n  function ensureLineHeights(cm, lineView, rect) {\n    var wrapping = cm.options.lineWrapping;\n    var curWidth = wrapping && displayWidth(cm);\n    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n      var heights = lineView.measure.heights = [];\n      if (wrapping) {\n        lineView.measure.width = curWidth;\n        var rects = lineView.text.firstChild.getClientRects();\n        for (var i = 0; i < rects.length - 1; i++) {\n          var cur = rects[i], next = rects[i + 1];\n          if (Math.abs(cur.bottom - next.bottom) > 2)\n            heights.push((cur.bottom + next.top) / 2 - rect.top);\n        }\n      }\n      heights.push(rect.bottom - rect.top);\n    }\n  }\n\n  // Find a line map (mapping character offsets to text nodes) and a\n  // measurement cache for the given line number. (A line view might\n  // contain multiple lines when collapsed ranges are present.)\n  function mapFromLineView(lineView, line, lineN) {\n    if (lineView.line == line)\n      return {map: lineView.measure.map, cache: lineView.measure.cache};\n    for (var i = 0; i < lineView.rest.length; i++)\n      if (lineView.rest[i] == line)\n        return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i]};\n    for (var i = 0; i < lineView.rest.length; i++)\n      if (lineNo(lineView.rest[i]) > lineN)\n        return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i], before: true};\n  }\n\n  // Render a line into the hidden node display.externalMeasured. Used\n  // when measurement is needed for a line that's not in the viewport.\n  function updateExternalMeasurement(cm, line) {\n    line = visualLine(line);\n    var lineN = lineNo(line);\n    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n    view.lineN = lineN;\n    var built = view.built = buildLineContent(cm, view);\n    view.text = built.pre;\n    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n    return view;\n  }\n\n  // Get a {top, bottom, left, right} box (in line-local coordinates)\n  // for a given character.\n  function measureChar(cm, line, ch, bias) {\n    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias);\n  }\n\n  // Find a line view that corresponds to the given line number.\n  function findViewForLine(cm, lineN) {\n    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)\n      return cm.display.view[findViewIndex(cm, lineN)];\n    var ext = cm.display.externalMeasured;\n    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)\n      return ext;\n  }\n\n  // Measurement can be split in two steps, the set-up work that\n  // applies to the whole line, and the measurement of the actual\n  // character. Functions like coordsChar, that need to do a lot of\n  // measurements in a row, can thus ensure that the set-up work is\n  // only done once.\n  function prepareMeasureForLine(cm, line) {\n    var lineN = lineNo(line);\n    var view = findViewForLine(cm, lineN);\n    if (view && !view.text) {\n      view = null;\n    } else if (view && view.changes) {\n      updateLineForChanges(cm, view, lineN, getDimensions(cm));\n      cm.curOp.forceUpdate = true;\n    }\n    if (!view)\n      view = updateExternalMeasurement(cm, line);\n\n    var info = mapFromLineView(view, line, lineN);\n    return {\n      line: line, view: view, rect: null,\n      map: info.map, cache: info.cache, before: info.before,\n      hasHeights: false\n    };\n  }\n\n  // Given a prepared measurement object, measures the position of an\n  // actual character (or fetches it from the cache).\n  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n    if (prepared.before) ch = -1;\n    var key = ch + (bias || \"\"), found;\n    if (prepared.cache.hasOwnProperty(key)) {\n      found = prepared.cache[key];\n    } else {\n      if (!prepared.rect)\n        prepared.rect = prepared.view.text.getBoundingClientRect();\n      if (!prepared.hasHeights) {\n        ensureLineHeights(cm, prepared.view, prepared.rect);\n        prepared.hasHeights = true;\n      }\n      found = measureCharInner(cm, prepared, ch, bias);\n      if (!found.bogus) prepared.cache[key] = found;\n    }\n    return {left: found.left, right: found.right,\n            top: varHeight ? found.rtop : found.top,\n            bottom: varHeight ? found.rbottom : found.bottom};\n  }\n\n  var nullRect = {left: 0, right: 0, top: 0, bottom: 0};\n\n  function nodeAndOffsetInLineMap(map, ch, bias) {\n    var node, start, end, collapse;\n    // First, search the line map for the text node corresponding to,\n    // or closest to, the target character.\n    for (var i = 0; i < map.length; i += 3) {\n      var mStart = map[i], mEnd = map[i + 1];\n      if (ch < mStart) {\n        start = 0; end = 1;\n        collapse = \"left\";\n      } else if (ch < mEnd) {\n        start = ch - mStart;\n        end = start + 1;\n      } else if (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) {\n        end = mEnd - mStart;\n        start = end - 1;\n        if (ch >= mEnd) collapse = \"right\";\n      }\n      if (start != null) {\n        node = map[i + 2];\n        if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\"))\n          collapse = bias;\n        if (bias == \"left\" && start == 0)\n          while (i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft) {\n            node = map[(i -= 3) + 2];\n            collapse = \"left\";\n          }\n        if (bias == \"right\" && start == mEnd - mStart)\n          while (i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft) {\n            node = map[(i += 3) + 2];\n            collapse = \"right\";\n          }\n        break;\n      }\n    }\n    return {node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd};\n  }\n\n  function measureCharInner(cm, prepared, ch, bias) {\n    var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n    var node = place.node, start = place.start, end = place.end, collapse = place.collapse;\n\n    var rect;\n    if (node.nodeType == 3) { // If it is a text node, use a range to retrieve the coordinates.\n      for (var i = 0; i < 4; i++) { // Retry a maximum of 4 times when nonsense rectangles are returned\n        while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) --start;\n        while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) ++end;\n        if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart) {\n          rect = node.parentNode.getBoundingClientRect();\n        } else if (ie && cm.options.lineWrapping) {\n          var rects = range(node, start, end).getClientRects();\n          if (rects.length)\n            rect = rects[bias == \"right\" ? rects.length - 1 : 0];\n          else\n            rect = nullRect;\n        } else {\n          rect = range(node, start, end).getBoundingClientRect() || nullRect;\n        }\n        if (rect.left || rect.right || start == 0) break;\n        end = start;\n        start = start - 1;\n        collapse = \"right\";\n      }\n      if (ie && ie_version < 11) rect = maybeUpdateRectForZooming(cm.display.measure, rect);\n    } else { // If it is a widget, simply get the box for the whole widget.\n      if (start > 0) collapse = bias = \"right\";\n      var rects;\n      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)\n        rect = rects[bias == \"right\" ? rects.length - 1 : 0];\n      else\n        rect = node.getBoundingClientRect();\n    }\n    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n      var rSpan = node.parentNode.getClientRects()[0];\n      if (rSpan)\n        rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom};\n      else\n        rect = nullRect;\n    }\n\n    var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top;\n    var mid = (rtop + rbot) / 2;\n    var heights = prepared.view.measure.heights;\n    for (var i = 0; i < heights.length - 1; i++)\n      if (mid < heights[i]) break;\n    var top = i ? heights[i - 1] : 0, bot = heights[i];\n    var result = {left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n                  right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n                  top: top, bottom: bot};\n    if (!rect.left && !rect.right) result.bogus = true;\n    if (!cm.options.singleCursorHeightPerLine) { result.rtop = rtop; result.rbottom = rbot; }\n\n    return result;\n  }\n\n  // Work around problem with bounding client rects on ranges being\n  // returned incorrectly when zoomed on IE10 and below.\n  function maybeUpdateRectForZooming(measure, rect) {\n    if (!window.screen || screen.logicalXDPI == null ||\n        screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))\n      return rect;\n    var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n    var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n    return {left: rect.left * scaleX, right: rect.right * scaleX,\n            top: rect.top * scaleY, bottom: rect.bottom * scaleY};\n  }\n\n  function clearLineMeasurementCacheFor(lineView) {\n    if (lineView.measure) {\n      lineView.measure.cache = {};\n      lineView.measure.heights = null;\n      if (lineView.rest) for (var i = 0; i < lineView.rest.length; i++)\n        lineView.measure.caches[i] = {};\n    }\n  }\n\n  function clearLineMeasurementCache(cm) {\n    cm.display.externalMeasure = null;\n    removeChildren(cm.display.lineMeasure);\n    for (var i = 0; i < cm.display.view.length; i++)\n      clearLineMeasurementCacheFor(cm.display.view[i]);\n  }\n\n  function clearCaches(cm) {\n    clearLineMeasurementCache(cm);\n    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n    if (!cm.options.lineWrapping) cm.display.maxLineChanged = true;\n    cm.display.lineNumChars = null;\n  }\n\n  function pageScrollX() { return window.pageXOffset || (document.documentElement || document.body).scrollLeft; }\n  function pageScrollY() { return window.pageYOffset || (document.documentElement || document.body).scrollTop; }\n\n  // Converts a {top, bottom, left, right} box from line-local\n  // coordinates into another coordinate system. Context may be one of\n  // \"line\", \"div\" (display.lineDiv), \"local\"/null (editor), \"window\",\n  // or \"page\".\n  function intoCoordSystem(cm, lineObj, rect, context) {\n    if (lineObj.widgets) for (var i = 0; i < lineObj.widgets.length; ++i) if (lineObj.widgets[i].above) {\n      var size = widgetHeight(lineObj.widgets[i]);\n      rect.top += size; rect.bottom += size;\n    }\n    if (context == \"line\") return rect;\n    if (!context) context = \"local\";\n    var yOff = heightAtLine(lineObj);\n    if (context == \"local\") yOff += paddingTop(cm.display);\n    else yOff -= cm.display.viewOffset;\n    if (context == \"page\" || context == \"window\") {\n      var lOff = cm.display.lineSpace.getBoundingClientRect();\n      yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY());\n      var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX());\n      rect.left += xOff; rect.right += xOff;\n    }\n    rect.top += yOff; rect.bottom += yOff;\n    return rect;\n  }\n\n  // Coverts a box from \"div\" coords to another coordinate system.\n  // Context may be \"window\", \"page\", \"div\", or \"local\"/null.\n  function fromCoordSystem(cm, coords, context) {\n    if (context == \"div\") return coords;\n    var left = coords.left, top = coords.top;\n    // First move into \"page\" coordinate system\n    if (context == \"page\") {\n      left -= pageScrollX();\n      top -= pageScrollY();\n    } else if (context == \"local\" || !context) {\n      var localBox = cm.display.sizer.getBoundingClientRect();\n      left += localBox.left;\n      top += localBox.top;\n    }\n\n    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n    return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top};\n  }\n\n  function charCoords(cm, pos, context, lineObj, bias) {\n    if (!lineObj) lineObj = getLine(cm.doc, pos.line);\n    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context);\n  }\n\n  // Returns a box for a given cursor position, which may have an\n  // 'other' property containing the position of the secondary cursor\n  // on a bidi boundary.\n  function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n    lineObj = lineObj || getLine(cm.doc, pos.line);\n    if (!preparedMeasure) preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    function get(ch, right) {\n      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n      if (right) m.left = m.right; else m.right = m.left;\n      return intoCoordSystem(cm, lineObj, m, context);\n    }\n    function getBidi(ch, partPos) {\n      var part = order[partPos], right = part.level % 2;\n      if (ch == bidiLeft(part) && partPos && part.level < order[partPos - 1].level) {\n        part = order[--partPos];\n        ch = bidiRight(part) - (part.level % 2 ? 0 : 1);\n        right = true;\n      } else if (ch == bidiRight(part) && partPos < order.length - 1 && part.level < order[partPos + 1].level) {\n        part = order[++partPos];\n        ch = bidiLeft(part) - part.level % 2;\n        right = false;\n      }\n      if (right && ch == part.to && ch > part.from) return get(ch - 1);\n      return get(ch, right);\n    }\n    var order = getOrder(lineObj), ch = pos.ch;\n    if (!order) return get(ch);\n    var partPos = getBidiPartAt(order, ch);\n    var val = getBidi(ch, partPos);\n    if (bidiOther != null) val.other = getBidi(ch, bidiOther);\n    return val;\n  }\n\n  // Used to cheaply estimate the coordinates for a position. Used for\n  // intermediate scroll updates.\n  function estimateCoords(cm, pos) {\n    var left = 0, pos = clipPos(cm.doc, pos);\n    if (!cm.options.lineWrapping) left = charWidth(cm.display) * pos.ch;\n    var lineObj = getLine(cm.doc, pos.line);\n    var top = heightAtLine(lineObj) + paddingTop(cm.display);\n    return {left: left, right: left, top: top, bottom: top + lineObj.height};\n  }\n\n  // Positions returned by coordsChar contain some extra information.\n  // xRel is the relative x position of the input coordinates compared\n  // to the found position (so xRel > 0 means the coordinates are to\n  // the right of the character position, for example). When outside\n  // is true, that means the coordinates lie outside the line's\n  // vertical range.\n  function PosWithInfo(line, ch, outside, xRel) {\n    var pos = Pos(line, ch);\n    pos.xRel = xRel;\n    if (outside) pos.outside = true;\n    return pos;\n  }\n\n  // Compute the character position closest to the given coordinates.\n  // Input must be lineSpace-local (\"div\" coordinate system).\n  function coordsChar(cm, x, y) {\n    var doc = cm.doc;\n    y += cm.display.viewOffset;\n    if (y < 0) return PosWithInfo(doc.first, 0, true, -1);\n    var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1;\n    if (lineN > last)\n      return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, true, 1);\n    if (x < 0) x = 0;\n\n    var lineObj = getLine(doc, lineN);\n    for (;;) {\n      var found = coordsCharInner(cm, lineObj, lineN, x, y);\n      var merged = collapsedSpanAtEnd(lineObj);\n      var mergedPos = merged && merged.find(0, true);\n      if (merged && (found.ch > mergedPos.from.ch || found.ch == mergedPos.from.ch && found.xRel > 0))\n        lineN = lineNo(lineObj = mergedPos.to.line);\n      else\n        return found;\n    }\n  }\n\n  function coordsCharInner(cm, lineObj, lineNo, x, y) {\n    var innerOff = y - heightAtLine(lineObj);\n    var wrongLine = false, adjust = 2 * cm.display.wrapper.clientWidth;\n    var preparedMeasure = prepareMeasureForLine(cm, lineObj);\n\n    function getX(ch) {\n      var sp = cursorCoords(cm, Pos(lineNo, ch), \"line\", lineObj, preparedMeasure);\n      wrongLine = true;\n      if (innerOff > sp.bottom) return sp.left - adjust;\n      else if (innerOff < sp.top) return sp.left + adjust;\n      else wrongLine = false;\n      return sp.left;\n    }\n\n    var bidi = getOrder(lineObj), dist = lineObj.text.length;\n    var from = lineLeft(lineObj), to = lineRight(lineObj);\n    var fromX = getX(from), fromOutside = wrongLine, toX = getX(to), toOutside = wrongLine;\n\n    if (x > toX) return PosWithInfo(lineNo, to, toOutside, 1);\n    // Do a binary search between these bounds.\n    for (;;) {\n      if (bidi ? to == from || to == moveVisually(lineObj, from, 1) : to - from <= 1) {\n        var ch = x < fromX || x - fromX <= toX - x ? from : to;\n        var xDiff = x - (ch == from ? fromX : toX);\n        while (isExtendingChar(lineObj.text.charAt(ch))) ++ch;\n        var pos = PosWithInfo(lineNo, ch, ch == from ? fromOutside : toOutside,\n                              xDiff < -1 ? -1 : xDiff > 1 ? 1 : 0);\n        return pos;\n      }\n      var step = Math.ceil(dist / 2), middle = from + step;\n      if (bidi) {\n        middle = from;\n        for (var i = 0; i < step; ++i) middle = moveVisually(lineObj, middle, 1);\n      }\n      var middleX = getX(middle);\n      if (middleX > x) {to = middle; toX = middleX; if (toOutside = wrongLine) toX += 1000; dist = step;}\n      else {from = middle; fromX = middleX; fromOutside = wrongLine; dist -= step;}\n    }\n  }\n\n  var measureText;\n  // Compute the default text height.\n  function textHeight(display) {\n    if (display.cachedTextHeight != null) return display.cachedTextHeight;\n    if (measureText == null) {\n      measureText = elt(\"pre\");\n      // Measure a bunch of lines, for browsers that compute\n      // fractional heights.\n      for (var i = 0; i < 49; ++i) {\n        measureText.appendChild(document.createTextNode(\"x\"));\n        measureText.appendChild(elt(\"br\"));\n      }\n      measureText.appendChild(document.createTextNode(\"x\"));\n    }\n    removeChildrenAndAdd(display.measure, measureText);\n    var height = measureText.offsetHeight / 50;\n    if (height > 3) display.cachedTextHeight = height;\n    removeChildren(display.measure);\n    return height || 1;\n  }\n\n  // Compute the default character width.\n  function charWidth(display) {\n    if (display.cachedCharWidth != null) return display.cachedCharWidth;\n    var anchor = elt(\"span\", \"xxxxxxxxxx\");\n    var pre = elt(\"pre\", [anchor]);\n    removeChildrenAndAdd(display.measure, pre);\n    var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;\n    if (width > 2) display.cachedCharWidth = width;\n    return width || 10;\n  }\n\n  // OPERATIONS\n\n  // Operations are used to wrap a series of changes to the editor\n  // state in such a way that each change won't have to update the\n  // cursor and display (which would be awkward, slow, and\n  // error-prone). Instead, display updates are batched and then all\n  // combined and executed at once.\n\n  var operationGroup = null;\n\n  var nextOpId = 0;\n  // Start a new operation.\n  function startOperation(cm) {\n    cm.curOp = {\n      cm: cm,\n      viewChanged: false,      // Flag that indicates that lines might need to be redrawn\n      startHeight: cm.doc.height, // Used to detect need to update scrollbar\n      forceUpdate: false,      // Used to force a redraw\n      updateInput: null,       // Whether to reset the input textarea\n      typing: false,           // Whether this reset should be careful to leave existing text (for compositing)\n      changeObjs: null,        // Accumulated changes, for firing change events\n      cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on\n      cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already\n      selectionChanged: false, // Whether the selection needs to be redrawn\n      updateMaxLine: false,    // Set when the widest line needs to be determined anew\n      scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet\n      scrollToPos: null,       // Used to scroll to a specific position\n      focus: false,\n      id: ++nextOpId           // Unique ID\n    };\n    if (operationGroup) {\n      operationGroup.ops.push(cm.curOp);\n    } else {\n      cm.curOp.ownsGroup = operationGroup = {\n        ops: [cm.curOp],\n        delayedCallbacks: []\n      };\n    }\n  }\n\n  function fireCallbacksForOps(group) {\n    // Calls delayed callbacks and cursorActivity handlers until no\n    // new ones appear\n    var callbacks = group.delayedCallbacks, i = 0;\n    do {\n      for (; i < callbacks.length; i++)\n        callbacks[i].call(null);\n      for (var j = 0; j < group.ops.length; j++) {\n        var op = group.ops[j];\n        if (op.cursorActivityHandlers)\n          while (op.cursorActivityCalled < op.cursorActivityHandlers.length)\n            op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm);\n      }\n    } while (i < callbacks.length);\n  }\n\n  // Finish an operation, updating the display and signalling delayed events\n  function endOperation(cm) {\n    var op = cm.curOp, group = op.ownsGroup;\n    if (!group) return;\n\n    try { fireCallbacksForOps(group); }\n    finally {\n      operationGroup = null;\n      for (var i = 0; i < group.ops.length; i++)\n        group.ops[i].cm.curOp = null;\n      endOperations(group);\n    }\n  }\n\n  // The DOM updates done when an operation finishes are batched so\n  // that the minimum number of relayouts are required.\n  function endOperations(group) {\n    var ops = group.ops;\n    for (var i = 0; i < ops.length; i++) // Read DOM\n      endOperation_R1(ops[i]);\n    for (var i = 0; i < ops.length; i++) // Write DOM (maybe)\n      endOperation_W1(ops[i]);\n    for (var i = 0; i < ops.length; i++) // Read DOM\n      endOperation_R2(ops[i]);\n    for (var i = 0; i < ops.length; i++) // Write DOM (maybe)\n      endOperation_W2(ops[i]);\n    for (var i = 0; i < ops.length; i++) // Read DOM\n      endOperation_finish(ops[i]);\n  }\n\n  function endOperation_R1(op) {\n    var cm = op.cm, display = cm.display;\n    maybeClipScrollbars(cm);\n    if (op.updateMaxLine) findMaxLine(cm);\n\n    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null ||\n      op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom ||\n                         op.scrollToPos.to.line >= display.viewTo) ||\n      display.maxLineChanged && cm.options.lineWrapping;\n    op.update = op.mustUpdate &&\n      new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate);\n  }\n\n  function endOperation_W1(op) {\n    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n  }\n\n  function endOperation_R2(op) {\n    var cm = op.cm, display = cm.display;\n    if (op.updatedDisplay) updateHeightsInViewport(cm);\n\n    op.barMeasure = measureForScrollbars(cm);\n\n    // If the max line changed since it was last measured, measure it,\n    // and ensure the document's width matches it.\n    // updateDisplay_W2 will use these properties to do the actual resizing\n    if (display.maxLineChanged && !cm.options.lineWrapping) {\n      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n      cm.display.sizerWidth = op.adjustWidthTo;\n      op.barMeasure.scrollWidth =\n        Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n    }\n\n    if (op.updatedDisplay || op.selectionChanged)\n      op.preparedSelection = display.input.prepareSelection();\n  }\n\n  function endOperation_W2(op) {\n    var cm = op.cm;\n\n    if (op.adjustWidthTo != null) {\n      cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n      if (op.maxScrollLeft < cm.doc.scrollLeft)\n        setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true);\n      cm.display.maxLineChanged = false;\n    }\n\n    if (op.preparedSelection)\n      cm.display.input.showSelection(op.preparedSelection);\n    if (op.updatedDisplay)\n      setDocumentHeight(cm, op.barMeasure);\n    if (op.updatedDisplay || op.startHeight != cm.doc.height)\n      updateScrollbars(cm, op.barMeasure);\n\n    if (op.selectionChanged) restartBlink(cm);\n\n    if (cm.state.focused && op.updateInput)\n      cm.display.input.reset(op.typing);\n    if (op.focus && op.focus == activeElt()) ensureFocus(op.cm);\n  }\n\n  function endOperation_finish(op) {\n    var cm = op.cm, display = cm.display, doc = cm.doc;\n\n    if (op.updatedDisplay) postUpdateDisplay(cm, op.update);\n\n    // Abort mouse wheel delta measurement, when scrolling explicitly\n    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))\n      display.wheelStartX = display.wheelStartY = null;\n\n    // Propagate the scroll position to the actual DOM scroller\n    if (op.scrollTop != null && (display.scroller.scrollTop != op.scrollTop || op.forceScroll)) {\n      doc.scrollTop = Math.max(0, Math.min(display.scroller.scrollHeight - display.scroller.clientHeight, op.scrollTop));\n      display.scrollbars.setScrollTop(doc.scrollTop);\n      display.scroller.scrollTop = doc.scrollTop;\n    }\n    if (op.scrollLeft != null && (display.scroller.scrollLeft != op.scrollLeft || op.forceScroll)) {\n      doc.scrollLeft = Math.max(0, Math.min(display.scroller.scrollWidth - displayWidth(cm), op.scrollLeft));\n      display.scrollbars.setScrollLeft(doc.scrollLeft);\n      display.scroller.scrollLeft = doc.scrollLeft;\n      alignHorizontally(cm);\n    }\n    // If we need to scroll a specific position into view, do so.\n    if (op.scrollToPos) {\n      var coords = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from),\n                                     clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n      if (op.scrollToPos.isCursor && cm.state.focused) maybeScrollWindow(cm, coords);\n    }\n\n    // Fire events for markers that are hidden/unidden by editing or\n    // undoing\n    var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;\n    if (hidden) for (var i = 0; i < hidden.length; ++i)\n      if (!hidden[i].lines.length) signal(hidden[i], \"hide\");\n    if (unhidden) for (var i = 0; i < unhidden.length; ++i)\n      if (unhidden[i].lines.length) signal(unhidden[i], \"unhide\");\n\n    if (display.wrapper.offsetHeight)\n      doc.scrollTop = cm.display.scroller.scrollTop;\n\n    // Fire change events, and delayed event handlers\n    if (op.changeObjs)\n      signal(cm, \"changes\", cm, op.changeObjs);\n    if (op.update)\n      op.update.finish();\n  }\n\n  // Run the given function in an operation\n  function runInOp(cm, f) {\n    if (cm.curOp) return f();\n    startOperation(cm);\n    try { return f(); }\n    finally { endOperation(cm); }\n  }\n  // Wraps a function in an operation. Returns the wrapped function.\n  function operation(cm, f) {\n    return function() {\n      if (cm.curOp) return f.apply(cm, arguments);\n      startOperation(cm);\n      try { return f.apply(cm, arguments); }\n      finally { endOperation(cm); }\n    };\n  }\n  // Used to add methods to editor and doc instances, wrapping them in\n  // operations.\n  function methodOp(f) {\n    return function() {\n      if (this.curOp) return f.apply(this, arguments);\n      startOperation(this);\n      try { return f.apply(this, arguments); }\n      finally { endOperation(this); }\n    };\n  }\n  function docMethodOp(f) {\n    return function() {\n      var cm = this.cm;\n      if (!cm || cm.curOp) return f.apply(this, arguments);\n      startOperation(cm);\n      try { return f.apply(this, arguments); }\n      finally { endOperation(cm); }\n    };\n  }\n\n  // VIEW TRACKING\n\n  // These objects are used to represent the visible (currently drawn)\n  // part of the document. A LineView may correspond to multiple\n  // logical lines, if those are connected by collapsed ranges.\n  function LineView(doc, line, lineN) {\n    // The starting line\n    this.line = line;\n    // Continuing lines, if any\n    this.rest = visualLineContinued(line);\n    // Number of logical lines in this visual line\n    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n    this.node = this.text = null;\n    this.hidden = lineIsHidden(doc, line);\n  }\n\n  // Create a range of LineView objects for the given lines.\n  function buildViewArray(cm, from, to) {\n    var array = [], nextPos;\n    for (var pos = from; pos < to; pos = nextPos) {\n      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n      nextPos = pos + view.size;\n      array.push(view);\n    }\n    return array;\n  }\n\n  // Updates the display.view data structure for a given change to the\n  // document. From and to are in pre-change coordinates. Lendiff is\n  // the amount of lines added or subtracted by the change. This is\n  // used for changes that span multiple lines, or change the way\n  // lines are divided into visual lines. regLineChange (below)\n  // registers single-line changes.\n  function regChange(cm, from, to, lendiff) {\n    if (from == null) from = cm.doc.first;\n    if (to == null) to = cm.doc.first + cm.doc.size;\n    if (!lendiff) lendiff = 0;\n\n    var display = cm.display;\n    if (lendiff && to < display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers > from))\n      display.updateLineNumbers = from;\n\n    cm.curOp.viewChanged = true;\n\n    if (from >= display.viewTo) { // Change after\n      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)\n        resetView(cm);\n    } else if (to <= display.viewFrom) { // Change before\n      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n        resetView(cm);\n      } else {\n        display.viewFrom += lendiff;\n        display.viewTo += lendiff;\n      }\n    } else if (from <= display.viewFrom && to >= display.viewTo) { // Full overlap\n      resetView(cm);\n    } else if (from <= display.viewFrom) { // Top overlap\n      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cut) {\n        display.view = display.view.slice(cut.index);\n        display.viewFrom = cut.lineN;\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    } else if (to >= display.viewTo) { // Bottom overlap\n      var cut = viewCuttingPoint(cm, from, from, -1);\n      if (cut) {\n        display.view = display.view.slice(0, cut.index);\n        display.viewTo = cut.lineN;\n      } else {\n        resetView(cm);\n      }\n    } else { // Gap in the middle\n      var cutTop = viewCuttingPoint(cm, from, from, -1);\n      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cutTop && cutBot) {\n        display.view = display.view.slice(0, cutTop.index)\n          .concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN))\n          .concat(display.view.slice(cutBot.index));\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    }\n\n    var ext = display.externalMeasured;\n    if (ext) {\n      if (to < ext.lineN)\n        ext.lineN += lendiff;\n      else if (from < ext.lineN + ext.size)\n        display.externalMeasured = null;\n    }\n  }\n\n  // Register a change to a single line. Type must be one of \"text\",\n  // \"gutter\", \"class\", \"widget\"\n  function regLineChange(cm, line, type) {\n    cm.curOp.viewChanged = true;\n    var display = cm.display, ext = cm.display.externalMeasured;\n    if (ext && line >= ext.lineN && line < ext.lineN + ext.size)\n      display.externalMeasured = null;\n\n    if (line < display.viewFrom || line >= display.viewTo) return;\n    var lineView = display.view[findViewIndex(cm, line)];\n    if (lineView.node == null) return;\n    var arr = lineView.changes || (lineView.changes = []);\n    if (indexOf(arr, type) == -1) arr.push(type);\n  }\n\n  // Clear the view.\n  function resetView(cm) {\n    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n    cm.display.view = [];\n    cm.display.viewOffset = 0;\n  }\n\n  // Find the view element corresponding to a given line. Return null\n  // when the line isn't visible.\n  function findViewIndex(cm, n) {\n    if (n >= cm.display.viewTo) return null;\n    n -= cm.display.viewFrom;\n    if (n < 0) return null;\n    var view = cm.display.view;\n    for (var i = 0; i < view.length; i++) {\n      n -= view[i].size;\n      if (n < 0) return i;\n    }\n  }\n\n  function viewCuttingPoint(cm, oldN, newN, dir) {\n    var index = findViewIndex(cm, oldN), diff, view = cm.display.view;\n    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)\n      return {index: index, lineN: newN};\n    for (var i = 0, n = cm.display.viewFrom; i < index; i++)\n      n += view[i].size;\n    if (n != oldN) {\n      if (dir > 0) {\n        if (index == view.length - 1) return null;\n        diff = (n + view[index].size) - oldN;\n        index++;\n      } else {\n        diff = n - oldN;\n      }\n      oldN += diff; newN += diff;\n    }\n    while (visualLineNo(cm.doc, newN) != newN) {\n      if (index == (dir < 0 ? 0 : view.length - 1)) return null;\n      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n      index += dir;\n    }\n    return {index: index, lineN: newN};\n  }\n\n  // Force the view to cover a given range, adding empty view element\n  // or clipping off existing ones as needed.\n  function adjustView(cm, from, to) {\n    var display = cm.display, view = display.view;\n    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n      display.view = buildViewArray(cm, from, to);\n      display.viewFrom = from;\n    } else {\n      if (display.viewFrom > from)\n        display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view);\n      else if (display.viewFrom < from)\n        display.view = display.view.slice(findViewIndex(cm, from));\n      display.viewFrom = from;\n      if (display.viewTo < to)\n        display.view = display.view.concat(buildViewArray(cm, display.viewTo, to));\n      else if (display.viewTo > to)\n        display.view = display.view.slice(0, findViewIndex(cm, to));\n    }\n    display.viewTo = to;\n  }\n\n  // Count the number of lines in the view whose DOM representation is\n  // out of date (or nonexistent).\n  function countDirtyView(cm) {\n    var view = cm.display.view, dirty = 0;\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (!lineView.hidden && (!lineView.node || lineView.changes)) ++dirty;\n    }\n    return dirty;\n  }\n\n  // EVENT HANDLERS\n\n  // Attach the necessary event handlers when initializing the editor\n  function registerEventHandlers(cm) {\n    var d = cm.display;\n    on(d.scroller, \"mousedown\", operation(cm, onMouseDown));\n    // Older IE's will not fire a second mousedown for a double click\n    if (ie && ie_version < 11)\n      on(d.scroller, \"dblclick\", operation(cm, function(e) {\n        if (signalDOMEvent(cm, e)) return;\n        var pos = posFromMouse(cm, e);\n        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) return;\n        e_preventDefault(e);\n        var word = cm.findWordAt(pos);\n        extendSelection(cm.doc, word.anchor, word.head);\n      }));\n    else\n      on(d.scroller, \"dblclick\", function(e) { signalDOMEvent(cm, e) || e_preventDefault(e); });\n    // Some browsers fire contextmenu *after* opening the menu, at\n    // which point we can't mess with it anymore. Context menu is\n    // handled in onMouseDown for these browsers.\n    if (!captureRightClick) on(d.scroller, \"contextmenu\", function(e) {onContextMenu(cm, e);});\n\n    // Used to suppress mouse event handling when a touch happens\n    var touchFinished, prevTouch = {end: 0};\n    function finishTouch() {\n      if (d.activeTouch) {\n        touchFinished = setTimeout(function() {d.activeTouch = null;}, 1000);\n        prevTouch = d.activeTouch;\n        prevTouch.end = +new Date;\n      }\n    };\n    function isMouseLikeTouchEvent(e) {\n      if (e.touches.length != 1) return false;\n      var touch = e.touches[0];\n      return touch.radiusX <= 1 && touch.radiusY <= 1;\n    }\n    function farAway(touch, other) {\n      if (other.left == null) return true;\n      var dx = other.left - touch.left, dy = other.top - touch.top;\n      return dx * dx + dy * dy > 20 * 20;\n    }\n    on(d.scroller, \"touchstart\", function(e) {\n      if (!isMouseLikeTouchEvent(e)) {\n        clearTimeout(touchFinished);\n        var now = +new Date;\n        d.activeTouch = {start: now, moved: false,\n                         prev: now - prevTouch.end <= 300 ? prevTouch : null};\n        if (e.touches.length == 1) {\n          d.activeTouch.left = e.touches[0].pageX;\n          d.activeTouch.top = e.touches[0].pageY;\n        }\n      }\n    });\n    on(d.scroller, \"touchmove\", function() {\n      if (d.activeTouch) d.activeTouch.moved = true;\n    });\n    on(d.scroller, \"touchend\", function(e) {\n      var touch = d.activeTouch;\n      if (touch && !eventInWidget(d, e) && touch.left != null &&\n          !touch.moved && new Date - touch.start < 300) {\n        var pos = cm.coordsChar(d.activeTouch, \"page\"), range;\n        if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n          range = new Range(pos, pos);\n        else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n          range = cm.findWordAt(pos);\n        else // Triple tap\n          range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0)));\n        cm.setSelection(range.anchor, range.head);\n        cm.focus();\n        e_preventDefault(e);\n      }\n      finishTouch();\n    });\n    on(d.scroller, \"touchcancel\", finishTouch);\n\n    // Sync scrolling between fake scrollbars and real scrollable\n    // area, ensure viewport is updated when scrolling.\n    on(d.scroller, \"scroll\", function() {\n      if (d.scroller.clientHeight) {\n        setScrollTop(cm, d.scroller.scrollTop);\n        setScrollLeft(cm, d.scroller.scrollLeft, true);\n        signal(cm, \"scroll\", cm);\n      }\n    });\n\n    // Listen to wheel events in order to try and update the viewport on time.\n    on(d.scroller, \"mousewheel\", function(e){onScrollWheel(cm, e);});\n    on(d.scroller, \"DOMMouseScroll\", function(e){onScrollWheel(cm, e);});\n\n    // Prevent wrapper from ever scrolling\n    on(d.wrapper, \"scroll\", function() { d.wrapper.scrollTop = d.wrapper.scrollLeft = 0; });\n\n    d.dragFunctions = {\n      enter: function(e) {if (!signalDOMEvent(cm, e)) e_stop(e);},\n      over: function(e) {if (!signalDOMEvent(cm, e)) { onDragOver(cm, e); e_stop(e); }},\n      start: function(e){onDragStart(cm, e);},\n      drop: operation(cm, onDrop),\n      leave: function() {clearDragCursor(cm);}\n    };\n\n    var inp = d.input.getField();\n    on(inp, \"keyup\", function(e) { onKeyUp.call(cm, e); });\n    on(inp, \"keydown\", operation(cm, onKeyDown));\n    on(inp, \"keypress\", operation(cm, onKeyPress));\n    on(inp, \"focus\", bind(onFocus, cm));\n    on(inp, \"blur\", bind(onBlur, cm));\n  }\n\n  function dragDropChanged(cm, value, old) {\n    var wasOn = old && old != CodeMirror.Init;\n    if (!value != !wasOn) {\n      var funcs = cm.display.dragFunctions;\n      var toggle = value ? on : off;\n      toggle(cm.display.scroller, \"dragstart\", funcs.start);\n      toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n      toggle(cm.display.scroller, \"dragover\", funcs.over);\n      toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n      toggle(cm.display.scroller, \"drop\", funcs.drop);\n    }\n  }\n\n  // Called when the window resizes\n  function onResize(cm) {\n    var d = cm.display;\n    if (d.lastWrapHeight == d.wrapper.clientHeight && d.lastWrapWidth == d.wrapper.clientWidth)\n      return;\n    // Might be a text scaling operation, clear size caches.\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n    d.scrollbarsClipped = false;\n    cm.setSize();\n  }\n\n  // MOUSE EVENTS\n\n  // Return true when the given mouse event happened in a widget\n  function eventInWidget(display, e) {\n    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n      if (!n || (n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\") ||\n          (n.parentNode == display.sizer && n != display.mover))\n        return true;\n    }\n  }\n\n  // Given a mouse event, find the corresponding position. If liberal\n  // is false, it checks whether a gutter or scrollbar was clicked,\n  // and returns null if it was. forRect is used by rectangular\n  // selections, and tries to estimate a character position even for\n  // coordinates beyond the right of the text.\n  function posFromMouse(cm, e, liberal, forRect) {\n    var display = cm.display;\n    if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") return null;\n\n    var x, y, space = display.lineSpace.getBoundingClientRect();\n    // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n    try { x = e.clientX - space.left; y = e.clientY - space.top; }\n    catch (e) { return null; }\n    var coords = coordsChar(cm, x, y), line;\n    if (forRect && coords.xRel == 1 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n    }\n    return coords;\n  }\n\n  // A mouse down can be a single click, double click, triple click,\n  // start of selection drag, start of text drag, new cursor\n  // (ctrl-click), rectangle drag (alt-drag), or xwin\n  // middle-click-paste. Or it might be a click on something we should\n  // not interfere with, such as a scrollbar or widget.\n  function onMouseDown(e) {\n    var cm = this, display = cm.display;\n    if (display.activeTouch && display.input.supportsTouch() || signalDOMEvent(cm, e)) return;\n    display.shift = e.shiftKey;\n\n    if (eventInWidget(display, e)) {\n      if (!webkit) {\n        // Briefly turn off draggability, to allow widgets to do\n        // normal dragging things.\n        display.scroller.draggable = false;\n        setTimeout(function(){display.scroller.draggable = true;}, 100);\n      }\n      return;\n    }\n    if (clickInGutter(cm, e)) return;\n    var start = posFromMouse(cm, e);\n    window.focus();\n\n    switch (e_button(e)) {\n    case 1:\n      // #3261: make sure, that we're not starting a second selection\n      if (cm.state.selectingText)\n        cm.state.selectingText(e);\n      else if (start)\n        leftButtonDown(cm, e, start);\n      else if (e_target(e) == display.scroller)\n        e_preventDefault(e);\n      break;\n    case 2:\n      if (webkit) cm.state.lastMiddleDown = +new Date;\n      if (start) extendSelection(cm.doc, start);\n      setTimeout(function() {display.input.focus();}, 20);\n      e_preventDefault(e);\n      break;\n    case 3:\n      if (captureRightClick) onContextMenu(cm, e);\n      else delayBlurEvent(cm);\n      break;\n    }\n  }\n\n  var lastClick, lastDoubleClick;\n  function leftButtonDown(cm, e, start) {\n    if (ie) setTimeout(bind(ensureFocus, cm), 0);\n    else cm.curOp.focus = activeElt();\n\n    var now = +new Date, type;\n    if (lastDoubleClick && lastDoubleClick.time > now - 400 && cmp(lastDoubleClick.pos, start) == 0) {\n      type = \"triple\";\n    } else if (lastClick && lastClick.time > now - 400 && cmp(lastClick.pos, start) == 0) {\n      type = \"double\";\n      lastDoubleClick = {time: now, pos: start};\n    } else {\n      type = \"single\";\n      lastClick = {time: now, pos: start};\n    }\n\n    var sel = cm.doc.sel, modifier = mac ? e.metaKey : e.ctrlKey, contained;\n    if (cm.options.dragDrop && dragAndDrop && !isReadOnly(cm) &&\n        type == \"single\" && (contained = sel.contains(start)) > -1 &&\n        (cmp((contained = sel.ranges[contained]).from(), start) < 0 || start.xRel > 0) &&\n        (cmp(contained.to(), start) > 0 || start.xRel < 0))\n      leftButtonStartDrag(cm, e, start, modifier);\n    else\n      leftButtonSelect(cm, e, start, type, modifier);\n  }\n\n  // Start a text drag. When it ends, see if any dragging actually\n  // happen, and treat as a click if it didn't.\n  function leftButtonStartDrag(cm, e, start, modifier) {\n    var display = cm.display, startTime = +new Date;\n    var dragEnd = operation(cm, function(e2) {\n      if (webkit) display.scroller.draggable = false;\n      cm.state.draggingText = false;\n      off(document, \"mouseup\", dragEnd);\n      off(display.scroller, \"drop\", dragEnd);\n      if (Math.abs(e.clientX - e2.clientX) + Math.abs(e.clientY - e2.clientY) < 10) {\n        e_preventDefault(e2);\n        if (!modifier && +new Date - 200 < startTime)\n          extendSelection(cm.doc, start);\n        // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n        if (webkit || ie && ie_version == 9)\n          setTimeout(function() {document.body.focus(); display.input.focus();}, 20);\n        else\n          display.input.focus();\n      }\n    });\n    // Let the drag handler handle this.\n    if (webkit) display.scroller.draggable = true;\n    cm.state.draggingText = dragEnd;\n    // IE's approach to draggable\n    if (display.scroller.dragDrop) display.scroller.dragDrop();\n    on(document, \"mouseup\", dragEnd);\n    on(display.scroller, \"drop\", dragEnd);\n  }\n\n  // Normal selection, as opposed to text dragging.\n  function leftButtonSelect(cm, e, start, type, addNew) {\n    var display = cm.display, doc = cm.doc;\n    e_preventDefault(e);\n\n    var ourRange, ourIndex, startSel = doc.sel, ranges = startSel.ranges;\n    if (addNew && !e.shiftKey) {\n      ourIndex = doc.sel.contains(start);\n      if (ourIndex > -1)\n        ourRange = ranges[ourIndex];\n      else\n        ourRange = new Range(start, start);\n    } else {\n      ourRange = doc.sel.primary();\n      ourIndex = doc.sel.primIndex;\n    }\n\n    if (e.altKey) {\n      type = \"rect\";\n      if (!addNew) ourRange = new Range(start, start);\n      start = posFromMouse(cm, e, true, true);\n      ourIndex = -1;\n    } else if (type == \"double\") {\n      var word = cm.findWordAt(start);\n      if (cm.display.shift || doc.extend)\n        ourRange = extendRange(doc, ourRange, word.anchor, word.head);\n      else\n        ourRange = word;\n    } else if (type == \"triple\") {\n      var line = new Range(Pos(start.line, 0), clipPos(doc, Pos(start.line + 1, 0)));\n      if (cm.display.shift || doc.extend)\n        ourRange = extendRange(doc, ourRange, line.anchor, line.head);\n      else\n        ourRange = line;\n    } else {\n      ourRange = extendRange(doc, ourRange, start);\n    }\n\n    if (!addNew) {\n      ourIndex = 0;\n      setSelection(doc, new Selection([ourRange], 0), sel_mouse);\n      startSel = doc.sel;\n    } else if (ourIndex == -1) {\n      ourIndex = ranges.length;\n      setSelection(doc, normalizeSelection(ranges.concat([ourRange]), ourIndex),\n                   {scroll: false, origin: \"*mouse\"});\n    } else if (ranges.length > 1 && ranges[ourIndex].empty() && type == \"single\" && !e.shiftKey) {\n      setSelection(doc, normalizeSelection(ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0),\n                   {scroll: false, origin: \"*mouse\"});\n      startSel = doc.sel;\n    } else {\n      replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\n    }\n\n    var lastPos = start;\n    function extendTo(pos) {\n      if (cmp(lastPos, pos) == 0) return;\n      lastPos = pos;\n\n      if (type == \"rect\") {\n        var ranges = [], tabSize = cm.options.tabSize;\n        var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\n        var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\n        var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol);\n        for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line));\n             line <= end; line++) {\n          var text = getLine(doc, line).text, leftPos = findColumn(text, left, tabSize);\n          if (left == right)\n            ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos)));\n          else if (text.length > leftPos)\n            ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize))));\n        }\n        if (!ranges.length) ranges.push(new Range(start, start));\n        setSelection(doc, normalizeSelection(startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex),\n                     {origin: \"*mouse\", scroll: false});\n        cm.scrollIntoView(pos);\n      } else {\n        var oldRange = ourRange;\n        var anchor = oldRange.anchor, head = pos;\n        if (type != \"single\") {\n          if (type == \"double\")\n            var range = cm.findWordAt(pos);\n          else\n            var range = new Range(Pos(pos.line, 0), clipPos(doc, Pos(pos.line + 1, 0)));\n          if (cmp(range.anchor, anchor) > 0) {\n            head = range.head;\n            anchor = minPos(oldRange.from(), range.anchor);\n          } else {\n            head = range.anchor;\n            anchor = maxPos(oldRange.to(), range.head);\n          }\n        }\n        var ranges = startSel.ranges.slice(0);\n        ranges[ourIndex] = new Range(clipPos(doc, anchor), head);\n        setSelection(doc, normalizeSelection(ranges, ourIndex), sel_mouse);\n      }\n    }\n\n    var editorSize = display.wrapper.getBoundingClientRect();\n    // Used to ensure timeout re-tries don't fire when another extend\n    // happened in the meantime (clearTimeout isn't reliable -- at\n    // least on Chrome, the timeouts still happen even when cleared,\n    // if the clear happens after their scheduled firing time).\n    var counter = 0;\n\n    function extend(e) {\n      var curCount = ++counter;\n      var cur = posFromMouse(cm, e, true, type == \"rect\");\n      if (!cur) return;\n      if (cmp(cur, lastPos) != 0) {\n        cm.curOp.focus = activeElt();\n        extendTo(cur);\n        var visible = visibleLines(display, doc);\n        if (cur.line >= visible.to || cur.line < visible.from)\n          setTimeout(operation(cm, function(){if (counter == curCount) extend(e);}), 150);\n      } else {\n        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n        if (outside) setTimeout(operation(cm, function() {\n          if (counter != curCount) return;\n          display.scroller.scrollTop += outside;\n          extend(e);\n        }), 50);\n      }\n    }\n\n    function done(e) {\n      cm.state.selectingText = false;\n      counter = Infinity;\n      e_preventDefault(e);\n      display.input.focus();\n      off(document, \"mousemove\", move);\n      off(document, \"mouseup\", up);\n      doc.history.lastSelOrigin = null;\n    }\n\n    var move = operation(cm, function(e) {\n      if (!e_button(e)) done(e);\n      else extend(e);\n    });\n    var up = operation(cm, done);\n    cm.state.selectingText = up;\n    on(document, \"mousemove\", move);\n    on(document, \"mouseup\", up);\n  }\n\n  // Determines whether an event happened in the gutter, and fires the\n  // handlers for the corresponding event.\n  function gutterEvent(cm, e, type, prevent, signalfn) {\n    try { var mX = e.clientX, mY = e.clientY; }\n    catch(e) { return false; }\n    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) return false;\n    if (prevent) e_preventDefault(e);\n\n    var display = cm.display;\n    var lineBox = display.lineDiv.getBoundingClientRect();\n\n    if (mY > lineBox.bottom || !hasHandler(cm, type)) return e_defaultPrevented(e);\n    mY -= lineBox.top - display.viewOffset;\n\n    for (var i = 0; i < cm.options.gutters.length; ++i) {\n      var g = display.gutters.childNodes[i];\n      if (g && g.getBoundingClientRect().right >= mX) {\n        var line = lineAtHeight(cm.doc, mY);\n        var gutter = cm.options.gutters[i];\n        signalfn(cm, type, cm, line, gutter, e);\n        return e_defaultPrevented(e);\n      }\n    }\n  }\n\n  function clickInGutter(cm, e) {\n    return gutterEvent(cm, e, \"gutterClick\", true, signalLater);\n  }\n\n  // Kludge to work around strange IE behavior where it'll sometimes\n  // re-fire a series of drag-related events right after the drop (#1551)\n  var lastDrop = 0;\n\n  function onDrop(e) {\n    var cm = this;\n    clearDragCursor(cm);\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))\n      return;\n    e_preventDefault(e);\n    if (ie) lastDrop = +new Date;\n    var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;\n    if (!pos || isReadOnly(cm)) return;\n    // Might be a file drop, in which case we simply extract the text\n    // and insert it.\n    if (files && files.length && window.FileReader && window.File) {\n      var n = files.length, text = Array(n), read = 0;\n      var loadFile = function(file, i) {\n        if (cm.options.allowDropFileTypes &&\n            indexOf(cm.options.allowDropFileTypes, file.type) == -1)\n          return;\n\n        var reader = new FileReader;\n        reader.onload = operation(cm, function() {\n          var content = reader.result;\n          if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) content = \"\";\n          text[i] = content;\n          if (++read == n) {\n            pos = clipPos(cm.doc, pos);\n            var change = {from: pos, to: pos,\n                          text: cm.doc.splitLines(text.join(cm.doc.lineSeparator())),\n                          origin: \"paste\"};\n            makeChange(cm.doc, change);\n            setSelectionReplaceHistory(cm.doc, simpleSelection(pos, changeEnd(change)));\n          }\n        });\n        reader.readAsText(file);\n      };\n      for (var i = 0; i < n; ++i) loadFile(files[i], i);\n    } else { // Normal drop\n      // Don't do a replace if the drop happened inside of the selected text.\n      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n        cm.state.draggingText(e);\n        // Ensure the editor is re-focused\n        setTimeout(function() {cm.display.input.focus();}, 20);\n        return;\n      }\n      try {\n        var text = e.dataTransfer.getData(\"Text\");\n        if (text) {\n          if (cm.state.draggingText && !(mac ? e.altKey : e.ctrlKey))\n            var selected = cm.listSelections();\n          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n          if (selected) for (var i = 0; i < selected.length; ++i)\n            replaceRange(cm.doc, \"\", selected[i].anchor, selected[i].head, \"drag\");\n          cm.replaceSelection(text, \"around\", \"paste\");\n          cm.display.input.focus();\n        }\n      }\n      catch(e){}\n    }\n  }\n\n  function onDragStart(cm, e) {\n    if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return; }\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) return;\n\n    e.dataTransfer.setData(\"Text\", cm.getSelection());\n\n    // Use dummy image instead of default browsers image.\n    // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n    if (e.dataTransfer.setDragImage && !safari) {\n      var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n      img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n      if (presto) {\n        img.width = img.height = 1;\n        cm.display.wrapper.appendChild(img);\n        // Force a relayout, or Opera won't use our image for some obscure reason\n        img._top = img.offsetTop;\n      }\n      e.dataTransfer.setDragImage(img, 0, 0);\n      if (presto) img.parentNode.removeChild(img);\n    }\n  }\n\n  function onDragOver(cm, e) {\n    var pos = posFromMouse(cm, e);\n    if (!pos) return;\n    var frag = document.createDocumentFragment();\n    drawSelectionCursor(cm, pos, frag);\n    if (!cm.display.dragCursor) {\n      cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n      cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n    }\n    removeChildrenAndAdd(cm.display.dragCursor, frag);\n  }\n\n  function clearDragCursor(cm) {\n    if (cm.display.dragCursor) {\n      cm.display.lineSpace.removeChild(cm.display.dragCursor);\n      cm.display.dragCursor = null;\n    }\n  }\n\n  // SCROLL EVENTS\n\n  // Sync the scrollable area and scrollbars, ensure the viewport\n  // covers the visible area.\n  function setScrollTop(cm, val) {\n    if (Math.abs(cm.doc.scrollTop - val) < 2) return;\n    cm.doc.scrollTop = val;\n    if (!gecko) updateDisplaySimple(cm, {top: val});\n    if (cm.display.scroller.scrollTop != val) cm.display.scroller.scrollTop = val;\n    cm.display.scrollbars.setScrollTop(val);\n    if (gecko) updateDisplaySimple(cm);\n    startWorker(cm, 100);\n  }\n  // Sync scroller and scrollbar, ensure the gutter elements are\n  // aligned.\n  function setScrollLeft(cm, val, isScroller) {\n    if (isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) return;\n    val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth);\n    cm.doc.scrollLeft = val;\n    alignHorizontally(cm);\n    if (cm.display.scroller.scrollLeft != val) cm.display.scroller.scrollLeft = val;\n    cm.display.scrollbars.setScrollLeft(val);\n  }\n\n  // Since the delta values reported on mouse wheel events are\n  // unstandardized between browsers and even browser versions, and\n  // generally horribly unpredictable, this code starts by measuring\n  // the scroll effect that the first few mouse wheel events have,\n  // and, from that, detects the way it can convert deltas to pixel\n  // offsets afterwards.\n  //\n  // The reason we want to know the amount a wheel event will scroll\n  // is that it gives us a chance to update the display before the\n  // actual scrolling happens, reducing flickering.\n\n  var wheelSamples = 0, wheelPixelsPerUnit = null;\n  // Fill in a browser-detected starting value on browsers where we\n  // know one. These don't have to be accurate -- the result of them\n  // being wrong would just be a slight flicker on the first wheel\n  // scroll (if it is large enough).\n  if (ie) wheelPixelsPerUnit = -.53;\n  else if (gecko) wheelPixelsPerUnit = 15;\n  else if (chrome) wheelPixelsPerUnit = -.7;\n  else if (safari) wheelPixelsPerUnit = -1/3;\n\n  var wheelEventDelta = function(e) {\n    var dx = e.wheelDeltaX, dy = e.wheelDeltaY;\n    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) dx = e.detail;\n    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) dy = e.detail;\n    else if (dy == null) dy = e.wheelDelta;\n    return {x: dx, y: dy};\n  };\n  CodeMirror.wheelEventPixels = function(e) {\n    var delta = wheelEventDelta(e);\n    delta.x *= wheelPixelsPerUnit;\n    delta.y *= wheelPixelsPerUnit;\n    return delta;\n  };\n\n  function onScrollWheel(cm, e) {\n    var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y;\n\n    var display = cm.display, scroll = display.scroller;\n    // Quit if there's nothing to scroll here\n    var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n    var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n    if (!(dx && canScrollX || dy && canScrollY)) return;\n\n    // Webkit browsers on OS X abort momentum scrolls when the target\n    // of the scroll event is removed from the scrollable element.\n    // This hack (see related code in patchDisplay) makes sure the\n    // element is kept around.\n    if (dy && mac && webkit) {\n      outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n        for (var i = 0; i < view.length; i++) {\n          if (view[i].node == cur) {\n            cm.display.currentWheelTarget = cur;\n            break outer;\n          }\n        }\n      }\n    }\n\n    // On some browsers, horizontal scrolling will cause redraws to\n    // happen before the gutter has been realigned, causing it to\n    // wriggle around in a most unseemly way. When we have an\n    // estimated pixels/delta value, we just handle horizontal\n    // scrolling entirely here. It'll be slightly off from native, but\n    // better than glitching out.\n    if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\n      if (dy && canScrollY)\n        setScrollTop(cm, Math.max(0, Math.min(scroll.scrollTop + dy * wheelPixelsPerUnit, scroll.scrollHeight - scroll.clientHeight)));\n      setScrollLeft(cm, Math.max(0, Math.min(scroll.scrollLeft + dx * wheelPixelsPerUnit, scroll.scrollWidth - scroll.clientWidth)));\n      // Only prevent default scrolling if vertical scrolling is\n      // actually possible. Otherwise, it causes vertical scroll\n      // jitter on OSX trackpads when deltaX is small and deltaY\n      // is large (issue #3579)\n      if (!dy || (dy && canScrollY))\n        e_preventDefault(e);\n      display.wheelStartX = null; // Abort measurement, if in progress\n      return;\n    }\n\n    // 'Project' the visible viewport to cover the area that is being\n    // scrolled into view (if we know enough to estimate it).\n    if (dy && wheelPixelsPerUnit != null) {\n      var pixels = dy * wheelPixelsPerUnit;\n      var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;\n      if (pixels < 0) top = Math.max(0, top + pixels - 50);\n      else bot = Math.min(cm.doc.height, bot + pixels + 50);\n      updateDisplaySimple(cm, {top: top, bottom: bot});\n    }\n\n    if (wheelSamples < 20) {\n      if (display.wheelStartX == null) {\n        display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop;\n        display.wheelDX = dx; display.wheelDY = dy;\n        setTimeout(function() {\n          if (display.wheelStartX == null) return;\n          var movedX = scroll.scrollLeft - display.wheelStartX;\n          var movedY = scroll.scrollTop - display.wheelStartY;\n          var sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||\n            (movedX && display.wheelDX && movedX / display.wheelDX);\n          display.wheelStartX = display.wheelStartY = null;\n          if (!sample) return;\n          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n          ++wheelSamples;\n        }, 200);\n      } else {\n        display.wheelDX += dx; display.wheelDY += dy;\n      }\n    }\n  }\n\n  // KEY EVENTS\n\n  // Run a handler that was bound to a key.\n  function doHandleBinding(cm, bound, dropShift) {\n    if (typeof bound == \"string\") {\n      bound = commands[bound];\n      if (!bound) return false;\n    }\n    // Ensure previous input has been read, so that the handler sees a\n    // consistent view of the document\n    cm.display.input.ensurePolled();\n    var prevShift = cm.display.shift, done = false;\n    try {\n      if (isReadOnly(cm)) cm.state.suppressEdits = true;\n      if (dropShift) cm.display.shift = false;\n      done = bound(cm) != Pass;\n    } finally {\n      cm.display.shift = prevShift;\n      cm.state.suppressEdits = false;\n    }\n    return done;\n  }\n\n  function lookupKeyForEditor(cm, name, handle) {\n    for (var i = 0; i < cm.state.keyMaps.length; i++) {\n      var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n      if (result) return result;\n    }\n    return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm))\n      || lookupKey(name, cm.options.keyMap, handle, cm);\n  }\n\n  var stopSeq = new Delayed;\n  function dispatchKey(cm, name, e, handle) {\n    var seq = cm.state.keySeq;\n    if (seq) {\n      if (isModifierKey(name)) return \"handled\";\n      stopSeq.set(50, function() {\n        if (cm.state.keySeq == seq) {\n          cm.state.keySeq = null;\n          cm.display.input.reset();\n        }\n      });\n      name = seq + \" \" + name;\n    }\n    var result = lookupKeyForEditor(cm, name, handle);\n\n    if (result == \"multi\")\n      cm.state.keySeq = name;\n    if (result == \"handled\")\n      signalLater(cm, \"keyHandled\", cm, name, e);\n\n    if (result == \"handled\" || result == \"multi\") {\n      e_preventDefault(e);\n      restartBlink(cm);\n    }\n\n    if (seq && !result && /\\'$/.test(name)) {\n      e_preventDefault(e);\n      return true;\n    }\n    return !!result;\n  }\n\n  // Handle a key from the keydown event.\n  function handleKeyBinding(cm, e) {\n    var name = keyName(e, true);\n    if (!name) return false;\n\n    if (e.shiftKey && !cm.state.keySeq) {\n      // First try to resolve full name (including 'Shift-'). Failing\n      // that, see if there is a cursor-motion command (starting with\n      // 'go') bound to the keyname without 'Shift-'.\n      return dispatchKey(cm, \"Shift-\" + name, e, function(b) {return doHandleBinding(cm, b, true);})\n          || dispatchKey(cm, name, e, function(b) {\n               if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion)\n                 return doHandleBinding(cm, b);\n             });\n    } else {\n      return dispatchKey(cm, name, e, function(b) { return doHandleBinding(cm, b); });\n    }\n  }\n\n  // Handle a key from the keypress event\n  function handleCharBinding(cm, e, ch) {\n    return dispatchKey(cm, \"'\" + ch + \"'\", e,\n                       function(b) { return doHandleBinding(cm, b, true); });\n  }\n\n  var lastStoppedKey = null;\n  function onKeyDown(e) {\n    var cm = this;\n    cm.curOp.focus = activeElt();\n    if (signalDOMEvent(cm, e)) return;\n    // IE does strange things with escape.\n    if (ie && ie_version < 11 && e.keyCode == 27) e.returnValue = false;\n    var code = e.keyCode;\n    cm.display.shift = code == 16 || e.shiftKey;\n    var handled = handleKeyBinding(cm, e);\n    if (presto) {\n      lastStoppedKey = handled ? code : null;\n      // Opera has no cut event... we try to at least catch the key combo\n      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))\n        cm.replaceSelection(\"\", null, \"cut\");\n    }\n\n    // Turn mouse into crosshair when Alt is held on Mac.\n    if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className))\n      showCrossHair(cm);\n  }\n\n  function showCrossHair(cm) {\n    var lineDiv = cm.display.lineDiv;\n    addClass(lineDiv, \"CodeMirror-crosshair\");\n\n    function up(e) {\n      if (e.keyCode == 18 || !e.altKey) {\n        rmClass(lineDiv, \"CodeMirror-crosshair\");\n        off(document, \"keyup\", up);\n        off(document, \"mouseover\", up);\n      }\n    }\n    on(document, \"keyup\", up);\n    on(document, \"mouseover\", up);\n  }\n\n  function onKeyUp(e) {\n    if (e.keyCode == 16) this.doc.sel.shift = false;\n    signalDOMEvent(this, e);\n  }\n\n  function onKeyPress(e) {\n    var cm = this;\n    if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) return;\n    var keyCode = e.keyCode, charCode = e.charCode;\n    if (presto && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return;}\n    if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e)) return;\n    var ch = String.fromCharCode(charCode == null ? keyCode : charCode);\n    if (handleCharBinding(cm, e, ch)) return;\n    cm.display.input.onKeyPress(e);\n  }\n\n  // FOCUS/BLUR EVENTS\n\n  function delayBlurEvent(cm) {\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function() {\n      if (cm.state.delayingBlurEvent) {\n        cm.state.delayingBlurEvent = false;\n        onBlur(cm);\n      }\n    }, 100);\n  }\n\n  function onFocus(cm) {\n    if (cm.state.delayingBlurEvent) cm.state.delayingBlurEvent = false;\n\n    if (cm.options.readOnly == \"nocursor\") return;\n    if (!cm.state.focused) {\n      signal(cm, \"focus\", cm);\n      cm.state.focused = true;\n      addClass(cm.display.wrapper, \"CodeMirror-focused\");\n      // This test prevents this from firing when a context\n      // menu is closed (since the input reset would kill the\n      // select-all detection hack)\n      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n        cm.display.input.reset();\n        if (webkit) setTimeout(function() { cm.display.input.reset(true); }, 20); // Issue #1730\n      }\n      cm.display.input.receivedFocus();\n    }\n    restartBlink(cm);\n  }\n  function onBlur(cm) {\n    if (cm.state.delayingBlurEvent) return;\n\n    if (cm.state.focused) {\n      signal(cm, \"blur\", cm);\n      cm.state.focused = false;\n      rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n    }\n    clearInterval(cm.display.blinker);\n    setTimeout(function() {if (!cm.state.focused) cm.display.shift = false;}, 150);\n  }\n\n  // CONTEXT MENU HANDLING\n\n  // To make the context menu work, we need to briefly unhide the\n  // textarea (making it as unobtrusive as possible) to let the\n  // right-click take effect on it.\n  function onContextMenu(cm, e) {\n    if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) return;\n    if (signalDOMEvent(cm, e, \"contextmenu\")) return;\n    cm.display.input.onContextMenu(e);\n  }\n\n  function contextMenuInGutter(cm, e) {\n    if (!hasHandler(cm, \"gutterContextMenu\")) return false;\n    return gutterEvent(cm, e, \"gutterContextMenu\", false, signal);\n  }\n\n  // UPDATING\n\n  // Compute the position of the end of a change (its 'to' property\n  // refers to the pre-change end).\n  var changeEnd = CodeMirror.changeEnd = function(change) {\n    if (!change.text) return change.to;\n    return Pos(change.from.line + change.text.length - 1,\n               lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0));\n  };\n\n  // Adjust a position to refer to the post-change position of the\n  // same text, or the end of the change if the change covers it.\n  function adjustForChange(pos, change) {\n    if (cmp(pos, change.from) < 0) return pos;\n    if (cmp(pos, change.to) <= 0) return changeEnd(change);\n\n    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;\n    if (pos.line == change.to.line) ch += changeEnd(change).ch - change.to.ch;\n    return Pos(line, ch);\n  }\n\n  function computeSelAfterChange(doc, change) {\n    var out = [];\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      var range = doc.sel.ranges[i];\n      out.push(new Range(adjustForChange(range.anchor, change),\n                         adjustForChange(range.head, change)));\n    }\n    return normalizeSelection(out, doc.sel.primIndex);\n  }\n\n  function offsetPos(pos, old, nw) {\n    if (pos.line == old.line)\n      return Pos(nw.line, pos.ch - old.ch + nw.ch);\n    else\n      return Pos(nw.line + (pos.line - old.line), pos.ch);\n  }\n\n  // Used by replaceSelections to allow moving the selection to the\n  // start or around the replaced test. Hint may be \"start\" or \"around\".\n  function computeReplacedSel(doc, changes, hint) {\n    var out = [];\n    var oldPrev = Pos(doc.first, 0), newPrev = oldPrev;\n    for (var i = 0; i < changes.length; i++) {\n      var change = changes[i];\n      var from = offsetPos(change.from, oldPrev, newPrev);\n      var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n      oldPrev = change.to;\n      newPrev = to;\n      if (hint == \"around\") {\n        var range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0;\n        out[i] = new Range(inv ? to : from, inv ? from : to);\n      } else {\n        out[i] = new Range(from, from);\n      }\n    }\n    return new Selection(out, doc.sel.primIndex);\n  }\n\n  // Allow \"beforeChange\" event handlers to influence a change\n  function filterChange(doc, change, update) {\n    var obj = {\n      canceled: false,\n      from: change.from,\n      to: change.to,\n      text: change.text,\n      origin: change.origin,\n      cancel: function() { this.canceled = true; }\n    };\n    if (update) obj.update = function(from, to, text, origin) {\n      if (from) this.from = clipPos(doc, from);\n      if (to) this.to = clipPos(doc, to);\n      if (text) this.text = text;\n      if (origin !== undefined) this.origin = origin;\n    };\n    signal(doc, \"beforeChange\", doc, obj);\n    if (doc.cm) signal(doc.cm, \"beforeChange\", doc.cm, obj);\n\n    if (obj.canceled) return null;\n    return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin};\n  }\n\n  // Apply a change to a document, and add it to the document's\n  // history, and propagating it to all linked documents.\n  function makeChange(doc, change, ignoreReadOnly) {\n    if (doc.cm) {\n      if (!doc.cm.curOp) return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly);\n      if (doc.cm.state.suppressEdits) return;\n    }\n\n    if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n      change = filterChange(doc, change, true);\n      if (!change) return;\n    }\n\n    // Possibly split or suppress the update based on the presence\n    // of read-only spans in its range.\n    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n    if (split) {\n      for (var i = split.length - 1; i >= 0; --i)\n        makeChangeInner(doc, {from: split[i].from, to: split[i].to, text: i ? [\"\"] : change.text});\n    } else {\n      makeChangeInner(doc, change);\n    }\n  }\n\n  function makeChangeInner(doc, change) {\n    if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) return;\n    var selAfter = computeSelAfterChange(doc, change);\n    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n\n    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n    var rebased = [];\n\n    linkedDocs(doc, function(doc, sharedHist) {\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n        rebaseHist(doc.history, change);\n        rebased.push(doc.history);\n      }\n      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n    });\n  }\n\n  // Revert a change stored in a document's history.\n  function makeChangeFromHistory(doc, type, allowSelectionOnly) {\n    if (doc.cm && doc.cm.state.suppressEdits) return;\n\n    var hist = doc.history, event, selAfter = doc.sel;\n    var source = type == \"undo\" ? hist.done : hist.undone, dest = type == \"undo\" ? hist.undone : hist.done;\n\n    // Verify that there is a useable event (so that ctrl-z won't\n    // needlessly clear selection events)\n    for (var i = 0; i < source.length; i++) {\n      event = source[i];\n      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)\n        break;\n    }\n    if (i == source.length) return;\n    hist.lastOrigin = hist.lastSelOrigin = null;\n\n    for (;;) {\n      event = source.pop();\n      if (event.ranges) {\n        pushSelectionToHistory(event, dest);\n        if (allowSelectionOnly && !event.equals(doc.sel)) {\n          setSelection(doc, event, {clearRedo: false});\n          return;\n        }\n        selAfter = event;\n      }\n      else break;\n    }\n\n    // Build up a reverse change object to add to the opposite history\n    // stack (redo when undoing, and vice versa).\n    var antiChanges = [];\n    pushSelectionToHistory(selAfter, dest);\n    dest.push({changes: antiChanges, generation: hist.generation});\n    hist.generation = event.generation || ++hist.maxGeneration;\n\n    var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n\n    for (var i = event.changes.length - 1; i >= 0; --i) {\n      var change = event.changes[i];\n      change.origin = type;\n      if (filter && !filterChange(doc, change, false)) {\n        source.length = 0;\n        return;\n      }\n\n      antiChanges.push(historyChangeFromChange(doc, change));\n\n      var after = i ? computeSelAfterChange(doc, change) : lst(source);\n      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n      if (!i && doc.cm) doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)});\n      var rebased = [];\n\n      // Propagate to the linked documents\n      linkedDocs(doc, function(doc, sharedHist) {\n        if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n          rebaseHist(doc.history, change);\n          rebased.push(doc.history);\n        }\n        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n      });\n    }\n  }\n\n  // Sub-views need their line numbers shifted when text is added\n  // above or below them in the parent document.\n  function shiftDoc(doc, distance) {\n    if (distance == 0) return;\n    doc.first += distance;\n    doc.sel = new Selection(map(doc.sel.ranges, function(range) {\n      return new Range(Pos(range.anchor.line + distance, range.anchor.ch),\n                       Pos(range.head.line + distance, range.head.ch));\n    }), doc.sel.primIndex);\n    if (doc.cm) {\n      regChange(doc.cm, doc.first, doc.first - distance, distance);\n      for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++)\n        regLineChange(doc.cm, l, \"gutter\");\n    }\n  }\n\n  // More lower-level change function, handling only a single document\n  // (not linked ones).\n  function makeChangeSingleDoc(doc, change, selAfter, spans) {\n    if (doc.cm && !doc.cm.curOp)\n      return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans);\n\n    if (change.to.line < doc.first) {\n      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n      return;\n    }\n    if (change.from.line > doc.lastLine()) return;\n\n    // Clip the change to the size of this doc\n    if (change.from.line < doc.first) {\n      var shift = change.text.length - 1 - (doc.first - change.from.line);\n      shiftDoc(doc, shift);\n      change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),\n                text: [lst(change.text)], origin: change.origin};\n    }\n    var last = doc.lastLine();\n    if (change.to.line > last) {\n      change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),\n                text: [change.text[0]], origin: change.origin};\n    }\n\n    change.removed = getBetween(doc, change.from, change.to);\n\n    if (!selAfter) selAfter = computeSelAfterChange(doc, change);\n    if (doc.cm) makeChangeSingleDocInEditor(doc.cm, change, spans);\n    else updateDoc(doc, change, spans);\n    setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n  }\n\n  // Handle the interaction of a change to a document with the editor\n  // that this document is part of.\n  function makeChangeSingleDocInEditor(cm, change, spans) {\n    var doc = cm.doc, display = cm.display, from = change.from, to = change.to;\n\n    var recomputeMaxLength = false, checkWidthStart = from.line;\n    if (!cm.options.lineWrapping) {\n      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n      doc.iter(checkWidthStart, to.line + 1, function(line) {\n        if (line == display.maxLine) {\n          recomputeMaxLength = true;\n          return true;\n        }\n      });\n    }\n\n    if (doc.sel.contains(change.from, change.to) > -1)\n      signalCursorActivity(cm);\n\n    updateDoc(doc, change, spans, estimateHeight(cm));\n\n    if (!cm.options.lineWrapping) {\n      doc.iter(checkWidthStart, from.line + change.text.length, function(line) {\n        var len = lineLength(line);\n        if (len > display.maxLineLength) {\n          display.maxLine = line;\n          display.maxLineLength = len;\n          display.maxLineChanged = true;\n          recomputeMaxLength = false;\n        }\n      });\n      if (recomputeMaxLength) cm.curOp.updateMaxLine = true;\n    }\n\n    // Adjust frontier, schedule worker\n    doc.frontier = Math.min(doc.frontier, from.line);\n    startWorker(cm, 400);\n\n    var lendiff = change.text.length - (to.line - from.line) - 1;\n    // Remember that these lines changed, for updating the display\n    if (change.full)\n      regChange(cm);\n    else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))\n      regLineChange(cm, from.line, \"text\");\n    else\n      regChange(cm, from.line, to.line + 1, lendiff);\n\n    var changesHandler = hasHandler(cm, \"changes\"), changeHandler = hasHandler(cm, \"change\");\n    if (changeHandler || changesHandler) {\n      var obj = {\n        from: from, to: to,\n        text: change.text,\n        removed: change.removed,\n        origin: change.origin\n      };\n      if (changeHandler) signalLater(cm, \"change\", cm, obj);\n      if (changesHandler) (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj);\n    }\n    cm.display.selForContextMenu = null;\n  }\n\n  function replaceRange(doc, code, from, to, origin) {\n    if (!to) to = from;\n    if (cmp(to, from) < 0) { var tmp = to; to = from; from = tmp; }\n    if (typeof code == \"string\") code = doc.splitLines(code);\n    makeChange(doc, {from: from, to: to, text: code, origin: origin});\n  }\n\n  // SCROLLING THINGS INTO VIEW\n\n  // If an editor sits on the top or bottom of the window, partially\n  // scrolled out of view, this ensures that the cursor is visible.\n  function maybeScrollWindow(cm, coords) {\n    if (signalDOMEvent(cm, \"scrollCursorIntoView\")) return;\n\n    var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;\n    if (coords.top + box.top < 0) doScroll = true;\n    else if (coords.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) doScroll = false;\n    if (doScroll != null && !phantom) {\n      var scrollNode = elt(\"div\", \"\\u200b\", null, \"position: absolute; top: \" +\n                           (coords.top - display.viewOffset - paddingTop(cm.display)) + \"px; height: \" +\n                           (coords.bottom - coords.top + scrollGap(cm) + display.barHeight) + \"px; left: \" +\n                           coords.left + \"px; width: 2px;\");\n      cm.display.lineSpace.appendChild(scrollNode);\n      scrollNode.scrollIntoView(doScroll);\n      cm.display.lineSpace.removeChild(scrollNode);\n    }\n  }\n\n  // Scroll a given position into view (immediately), verifying that\n  // it actually became visible (as line heights are accurately\n  // measured, the position of something may 'drift' during drawing).\n  function scrollPosIntoView(cm, pos, end, margin) {\n    if (margin == null) margin = 0;\n    for (var limit = 0; limit < 5; limit++) {\n      var changed = false, coords = cursorCoords(cm, pos);\n      var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);\n      var scrollPos = calculateScrollPos(cm, Math.min(coords.left, endCoords.left),\n                                         Math.min(coords.top, endCoords.top) - margin,\n                                         Math.max(coords.left, endCoords.left),\n                                         Math.max(coords.bottom, endCoords.bottom) + margin);\n      var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;\n      if (scrollPos.scrollTop != null) {\n        setScrollTop(cm, scrollPos.scrollTop);\n        if (Math.abs(cm.doc.scrollTop - startTop) > 1) changed = true;\n      }\n      if (scrollPos.scrollLeft != null) {\n        setScrollLeft(cm, scrollPos.scrollLeft);\n        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) changed = true;\n      }\n      if (!changed) break;\n    }\n    return coords;\n  }\n\n  // Scroll a given set of coordinates into view (immediately).\n  function scrollIntoView(cm, x1, y1, x2, y2) {\n    var scrollPos = calculateScrollPos(cm, x1, y1, x2, y2);\n    if (scrollPos.scrollTop != null) setScrollTop(cm, scrollPos.scrollTop);\n    if (scrollPos.scrollLeft != null) setScrollLeft(cm, scrollPos.scrollLeft);\n  }\n\n  // Calculate a new scroll position needed to scroll the given\n  // rectangle into view. Returns an object with scrollTop and\n  // scrollLeft properties. When these are undefined, the\n  // vertical/horizontal position does not need to be adjusted.\n  function calculateScrollPos(cm, x1, y1, x2, y2) {\n    var display = cm.display, snapMargin = textHeight(cm.display);\n    if (y1 < 0) y1 = 0;\n    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n    var screen = displayHeight(cm), result = {};\n    if (y2 - y1 > screen) y2 = y1 + screen;\n    var docBottom = cm.doc.height + paddingVert(display);\n    var atTop = y1 < snapMargin, atBottom = y2 > docBottom - snapMargin;\n    if (y1 < screentop) {\n      result.scrollTop = atTop ? 0 : y1;\n    } else if (y2 > screentop + screen) {\n      var newTop = Math.min(y1, (atBottom ? docBottom : y2) - screen);\n      if (newTop != screentop) result.scrollTop = newTop;\n    }\n\n    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;\n    var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0);\n    var tooWide = x2 - x1 > screenw;\n    if (tooWide) x2 = x1 + screenw;\n    if (x1 < 10)\n      result.scrollLeft = 0;\n    else if (x1 < screenleft)\n      result.scrollLeft = Math.max(0, x1 - (tooWide ? 0 : 10));\n    else if (x2 > screenw + screenleft - 3)\n      result.scrollLeft = x2 + (tooWide ? 0 : 10) - screenw;\n    return result;\n  }\n\n  // Store a relative adjustment to the scroll position in the current\n  // operation (to be applied when the operation finishes).\n  function addToScrollPos(cm, left, top) {\n    if (left != null || top != null) resolveScrollToPos(cm);\n    if (left != null)\n      cm.curOp.scrollLeft = (cm.curOp.scrollLeft == null ? cm.doc.scrollLeft : cm.curOp.scrollLeft) + left;\n    if (top != null)\n      cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n  }\n\n  // Make sure that at the end of the operation the current cursor is\n  // shown.\n  function ensureCursorVisible(cm) {\n    resolveScrollToPos(cm);\n    var cur = cm.getCursor(), from = cur, to = cur;\n    if (!cm.options.lineWrapping) {\n      from = cur.ch ? Pos(cur.line, cur.ch - 1) : cur;\n      to = Pos(cur.line, cur.ch + 1);\n    }\n    cm.curOp.scrollToPos = {from: from, to: to, margin: cm.options.cursorScrollMargin, isCursor: true};\n  }\n\n  // When an operation has its scrollToPos property set, and another\n  // scroll action is applied before the end of the operation, this\n  // 'simulates' scrolling that position into view in a cheap way, so\n  // that the effect of intermediate scroll commands is not ignored.\n  function resolveScrollToPos(cm) {\n    var range = cm.curOp.scrollToPos;\n    if (range) {\n      cm.curOp.scrollToPos = null;\n      var from = estimateCoords(cm, range.from), to = estimateCoords(cm, range.to);\n      var sPos = calculateScrollPos(cm, Math.min(from.left, to.left),\n                                    Math.min(from.top, to.top) - range.margin,\n                                    Math.max(from.right, to.right),\n                                    Math.max(from.bottom, to.bottom) + range.margin);\n      cm.scrollTo(sPos.scrollLeft, sPos.scrollTop);\n    }\n  }\n\n  // API UTILITIES\n\n  // Indent the given line. The how parameter can be \"smart\",\n  // \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n  // (typically set to true for forced single-line indents), empty\n  // lines are not indented, and places where the mode returns Pass\n  // are left alone.\n  function indentLine(cm, n, how, aggressive) {\n    var doc = cm.doc, state;\n    if (how == null) how = \"add\";\n    if (how == \"smart\") {\n      // Fall back to \"prev\" when the mode doesn't have an indentation\n      // method.\n      if (!doc.mode.indent) how = \"prev\";\n      else state = getStateBefore(cm, n);\n    }\n\n    var tabSize = cm.options.tabSize;\n    var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);\n    if (line.stateAfter) line.stateAfter = null;\n    var curSpaceString = line.text.match(/^\\s*/)[0], indentation;\n    if (!aggressive && !/\\S/.test(line.text)) {\n      indentation = 0;\n      how = \"not\";\n    } else if (how == \"smart\") {\n      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n      if (indentation == Pass || indentation > 150) {\n        if (!aggressive) return;\n        how = \"prev\";\n      }\n    }\n    if (how == \"prev\") {\n      if (n > doc.first) indentation = countColumn(getLine(doc, n-1).text, null, tabSize);\n      else indentation = 0;\n    } else if (how == \"add\") {\n      indentation = curSpace + cm.options.indentUnit;\n    } else if (how == \"subtract\") {\n      indentation = curSpace - cm.options.indentUnit;\n    } else if (typeof how == \"number\") {\n      indentation = curSpace + how;\n    }\n    indentation = Math.max(0, indentation);\n\n    var indentString = \"\", pos = 0;\n    if (cm.options.indentWithTabs)\n      for (var i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += \"\\t\";}\n    if (pos < indentation) indentString += spaceStr(indentation - pos);\n\n    if (indentString != curSpaceString) {\n      replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n      line.stateAfter = null;\n      return true;\n    } else {\n      // Ensure that, if the cursor was in the whitespace at the start\n      // of the line, it is moved to the end of that space.\n      for (var i = 0; i < doc.sel.ranges.length; i++) {\n        var range = doc.sel.ranges[i];\n        if (range.head.line == n && range.head.ch < curSpaceString.length) {\n          var pos = Pos(n, curSpaceString.length);\n          replaceOneSelection(doc, i, new Range(pos, pos));\n          break;\n        }\n      }\n    }\n  }\n\n  // Utility for applying a change to a line by handle or number,\n  // returning the number and optionally registering the line as\n  // changed.\n  function changeLine(doc, handle, changeType, op) {\n    var no = handle, line = handle;\n    if (typeof handle == \"number\") line = getLine(doc, clipLine(doc, handle));\n    else no = lineNo(handle);\n    if (no == null) return null;\n    if (op(line, no) && doc.cm) regLineChange(doc.cm, no, changeType);\n    return line;\n  }\n\n  // Helper for deleting text near the selection(s), used to implement\n  // backspace, delete, and similar functionality.\n  function deleteNearSelection(cm, compute) {\n    var ranges = cm.doc.sel.ranges, kill = [];\n    // Build up a set of ranges to kill first, merging overlapping\n    // ranges.\n    for (var i = 0; i < ranges.length; i++) {\n      var toKill = compute(ranges[i]);\n      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n        var replaced = kill.pop();\n        if (cmp(replaced.from, toKill.from) < 0) {\n          toKill.from = replaced.from;\n          break;\n        }\n      }\n      kill.push(toKill);\n    }\n    // Next, remove those actual ranges.\n    runInOp(cm, function() {\n      for (var i = kill.length - 1; i >= 0; i--)\n        replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\");\n      ensureCursorVisible(cm);\n    });\n  }\n\n  // Used for horizontal relative motion. Dir is -1 or 1 (left or\n  // right), unit can be \"char\", \"column\" (like char, but doesn't\n  // cross line boundaries), \"word\" (across next word), or \"group\" (to\n  // the start of next group of word or non-word-non-whitespace\n  // chars). The visually param controls whether, in right-to-left\n  // text, direction 1 means to move towards the next index in the\n  // string, or towards the character to the right of the current\n  // position. The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n  function findPosH(doc, pos, dir, unit, visually) {\n    var line = pos.line, ch = pos.ch, origDir = dir;\n    var lineObj = getLine(doc, line);\n    var possible = true;\n    function findNextLine() {\n      var l = line + dir;\n      if (l < doc.first || l >= doc.first + doc.size) return (possible = false);\n      line = l;\n      return lineObj = getLine(doc, l);\n    }\n    function moveOnce(boundToLine) {\n      var next = (visually ? moveVisually : moveLogically)(lineObj, ch, dir, true);\n      if (next == null) {\n        if (!boundToLine && findNextLine()) {\n          if (visually) ch = (dir < 0 ? lineRight : lineLeft)(lineObj);\n          else ch = dir < 0 ? lineObj.text.length : 0;\n        } else return (possible = false);\n      } else ch = next;\n      return true;\n    }\n\n    if (unit == \"char\") moveOnce();\n    else if (unit == \"column\") moveOnce(true);\n    else if (unit == \"word\" || unit == \"group\") {\n      var sawType = null, group = unit == \"group\";\n      var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n      for (var first = true;; first = false) {\n        if (dir < 0 && !moveOnce(!first)) break;\n        var cur = lineObj.text.charAt(ch) || \"\\n\";\n        var type = isWordChar(cur, helper) ? \"w\"\n          : group && cur == \"\\n\" ? \"n\"\n          : !group || /\\s/.test(cur) ? null\n          : \"p\";\n        if (group && !first && !type) type = \"s\";\n        if (sawType && sawType != type) {\n          if (dir < 0) {dir = 1; moveOnce();}\n          break;\n        }\n\n        if (type) sawType = type;\n        if (dir > 0 && !moveOnce(!first)) break;\n      }\n    }\n    var result = skipAtomic(doc, Pos(line, ch), origDir, true);\n    if (!possible) result.hitSide = true;\n    return result;\n  }\n\n  // For relative vertical movement. Dir may be -1 or 1. Unit can be\n  // \"page\" or \"line\". The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n  function findPosV(cm, pos, dir, unit) {\n    var doc = cm.doc, x = pos.left, y;\n    if (unit == \"page\") {\n      var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\n      y = pos.top + dir * (pageSize - (dir < 0 ? 1.5 : .5) * textHeight(cm.display));\n    } else if (unit == \"line\") {\n      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n    }\n    for (;;) {\n      var target = coordsChar(cm, x, y);\n      if (!target.outside) break;\n      if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break; }\n      y += dir * 5;\n    }\n    return target;\n  }\n\n  // EDITOR METHODS\n\n  // The publicly visible API. Note that methodOp(f) means\n  // 'wrap f in an operation, performed on its `this` parameter'.\n\n  // This is not the complete set of editor methods. Most of the\n  // methods defined on the Doc type are also injected into\n  // CodeMirror.prototype, for backwards compatibility and\n  // convenience.\n\n  CodeMirror.prototype = {\n    constructor: CodeMirror,\n    focus: function(){window.focus(); this.display.input.focus();},\n\n    setOption: function(option, value) {\n      var options = this.options, old = options[option];\n      if (options[option] == value && option != \"mode\") return;\n      options[option] = value;\n      if (optionHandlers.hasOwnProperty(option))\n        operation(this, optionHandlers[option])(this, value, old);\n    },\n\n    getOption: function(option) {return this.options[option];},\n    getDoc: function() {return this.doc;},\n\n    addKeyMap: function(map, bottom) {\n      this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map));\n    },\n    removeKeyMap: function(map) {\n      var maps = this.state.keyMaps;\n      for (var i = 0; i < maps.length; ++i)\n        if (maps[i] == map || maps[i].name == map) {\n          maps.splice(i, 1);\n          return true;\n        }\n    },\n\n    addOverlay: methodOp(function(spec, options) {\n      var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n      if (mode.startState) throw new Error(\"Overlays may not be stateful.\");\n      this.state.overlays.push({mode: mode, modeSpec: spec, opaque: options && options.opaque});\n      this.state.modeGen++;\n      regChange(this);\n    }),\n    removeOverlay: methodOp(function(spec) {\n      var overlays = this.state.overlays;\n      for (var i = 0; i < overlays.length; ++i) {\n        var cur = overlays[i].modeSpec;\n        if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n          overlays.splice(i, 1);\n          this.state.modeGen++;\n          regChange(this);\n          return;\n        }\n      }\n    }),\n\n    indentLine: methodOp(function(n, dir, aggressive) {\n      if (typeof dir != \"string\" && typeof dir != \"number\") {\n        if (dir == null) dir = this.options.smartIndent ? \"smart\" : \"prev\";\n        else dir = dir ? \"add\" : \"subtract\";\n      }\n      if (isLine(this.doc, n)) indentLine(this, n, dir, aggressive);\n    }),\n    indentSelection: methodOp(function(how) {\n      var ranges = this.doc.sel.ranges, end = -1;\n      for (var i = 0; i < ranges.length; i++) {\n        var range = ranges[i];\n        if (!range.empty()) {\n          var from = range.from(), to = range.to();\n          var start = Math.max(end, from.line);\n          end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n          for (var j = start; j < end; ++j)\n            indentLine(this, j, how);\n          var newRanges = this.doc.sel.ranges;\n          if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)\n            replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll);\n        } else if (range.head.line > end) {\n          indentLine(this, range.head.line, how, true);\n          end = range.head.line;\n          if (i == this.doc.sel.primIndex) ensureCursorVisible(this);\n        }\n      }\n    }),\n\n    // Fetch the parser token for a given character. Useful for hacks\n    // that want to inspect the mode state (say, for completion).\n    getTokenAt: function(pos, precise) {\n      return takeToken(this, pos, precise);\n    },\n\n    getLineTokens: function(line, precise) {\n      return takeToken(this, Pos(line), precise, true);\n    },\n\n    getTokenTypeAt: function(pos) {\n      pos = clipPos(this.doc, pos);\n      var styles = getLineStyles(this, getLine(this.doc, pos.line));\n      var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;\n      var type;\n      if (ch == 0) type = styles[2];\n      else for (;;) {\n        var mid = (before + after) >> 1;\n        if ((mid ? styles[mid * 2 - 1] : 0) >= ch) after = mid;\n        else if (styles[mid * 2 + 1] < ch) before = mid + 1;\n        else { type = styles[mid * 2 + 2]; break; }\n      }\n      var cut = type ? type.indexOf(\"cm-overlay \") : -1;\n      return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1);\n    },\n\n    getModeAt: function(pos) {\n      var mode = this.doc.mode;\n      if (!mode.innerMode) return mode;\n      return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode;\n    },\n\n    getHelper: function(pos, type) {\n      return this.getHelpers(pos, type)[0];\n    },\n\n    getHelpers: function(pos, type) {\n      var found = [];\n      if (!helpers.hasOwnProperty(type)) return found;\n      var help = helpers[type], mode = this.getModeAt(pos);\n      if (typeof mode[type] == \"string\") {\n        if (help[mode[type]]) found.push(help[mode[type]]);\n      } else if (mode[type]) {\n        for (var i = 0; i < mode[type].length; i++) {\n          var val = help[mode[type][i]];\n          if (val) found.push(val);\n        }\n      } else if (mode.helperType && help[mode.helperType]) {\n        found.push(help[mode.helperType]);\n      } else if (help[mode.name]) {\n        found.push(help[mode.name]);\n      }\n      for (var i = 0; i < help._global.length; i++) {\n        var cur = help._global[i];\n        if (cur.pred(mode, this) && indexOf(found, cur.val) == -1)\n          found.push(cur.val);\n      }\n      return found;\n    },\n\n    getStateAfter: function(line, precise) {\n      var doc = this.doc;\n      line = clipLine(doc, line == null ? doc.first + doc.size - 1: line);\n      return getStateBefore(this, line + 1, precise);\n    },\n\n    cursorCoords: function(start, mode) {\n      var pos, range = this.doc.sel.primary();\n      if (start == null) pos = range.head;\n      else if (typeof start == \"object\") pos = clipPos(this.doc, start);\n      else pos = start ? range.from() : range.to();\n      return cursorCoords(this, pos, mode || \"page\");\n    },\n\n    charCoords: function(pos, mode) {\n      return charCoords(this, clipPos(this.doc, pos), mode || \"page\");\n    },\n\n    coordsChar: function(coords, mode) {\n      coords = fromCoordSystem(this, coords, mode || \"page\");\n      return coordsChar(this, coords.left, coords.top);\n    },\n\n    lineAtHeight: function(height, mode) {\n      height = fromCoordSystem(this, {top: height, left: 0}, mode || \"page\").top;\n      return lineAtHeight(this.doc, height + this.display.viewOffset);\n    },\n    heightAtLine: function(line, mode) {\n      var end = false, lineObj;\n      if (typeof line == \"number\") {\n        var last = this.doc.first + this.doc.size - 1;\n        if (line < this.doc.first) line = this.doc.first;\n        else if (line > last) { line = last; end = true; }\n        lineObj = getLine(this.doc, line);\n      } else {\n        lineObj = line;\n      }\n      return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || \"page\").top +\n        (end ? this.doc.height - heightAtLine(lineObj) : 0);\n    },\n\n    defaultTextHeight: function() { return textHeight(this.display); },\n    defaultCharWidth: function() { return charWidth(this.display); },\n\n    setGutterMarker: methodOp(function(line, gutterID, value) {\n      return changeLine(this.doc, line, \"gutter\", function(line) {\n        var markers = line.gutterMarkers || (line.gutterMarkers = {});\n        markers[gutterID] = value;\n        if (!value && isEmpty(markers)) line.gutterMarkers = null;\n        return true;\n      });\n    }),\n\n    clearGutter: methodOp(function(gutterID) {\n      var cm = this, doc = cm.doc, i = doc.first;\n      doc.iter(function(line) {\n        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n          line.gutterMarkers[gutterID] = null;\n          regLineChange(cm, i, \"gutter\");\n          if (isEmpty(line.gutterMarkers)) line.gutterMarkers = null;\n        }\n        ++i;\n      });\n    }),\n\n    lineInfo: function(line) {\n      if (typeof line == \"number\") {\n        if (!isLine(this.doc, line)) return null;\n        var n = line;\n        line = getLine(this.doc, line);\n        if (!line) return null;\n      } else {\n        var n = lineNo(line);\n        if (n == null) return null;\n      }\n      return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,\n              textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,\n              widgets: line.widgets};\n    },\n\n    getViewport: function() { return {from: this.display.viewFrom, to: this.display.viewTo};},\n\n    addWidget: function(pos, node, scroll, vert, horiz) {\n      var display = this.display;\n      pos = cursorCoords(this, clipPos(this.doc, pos));\n      var top = pos.bottom, left = pos.left;\n      node.style.position = \"absolute\";\n      node.setAttribute(\"cm-ignore-events\", \"true\");\n      this.display.input.setUneditable(node);\n      display.sizer.appendChild(node);\n      if (vert == \"over\") {\n        top = pos.top;\n      } else if (vert == \"above\" || vert == \"near\") {\n        var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n        hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);\n        // Default to positioning above (if specified and possible); otherwise default to positioning below\n        if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)\n          top = pos.top - node.offsetHeight;\n        else if (pos.bottom + node.offsetHeight <= vspace)\n          top = pos.bottom;\n        if (left + node.offsetWidth > hspace)\n          left = hspace - node.offsetWidth;\n      }\n      node.style.top = top + \"px\";\n      node.style.left = node.style.right = \"\";\n      if (horiz == \"right\") {\n        left = display.sizer.clientWidth - node.offsetWidth;\n        node.style.right = \"0px\";\n      } else {\n        if (horiz == \"left\") left = 0;\n        else if (horiz == \"middle\") left = (display.sizer.clientWidth - node.offsetWidth) / 2;\n        node.style.left = left + \"px\";\n      }\n      if (scroll)\n        scrollIntoView(this, left, top, left + node.offsetWidth, top + node.offsetHeight);\n    },\n\n    triggerOnKeyDown: methodOp(onKeyDown),\n    triggerOnKeyPress: methodOp(onKeyPress),\n    triggerOnKeyUp: onKeyUp,\n\n    execCommand: function(cmd) {\n      if (commands.hasOwnProperty(cmd))\n        return commands[cmd].call(null, this);\n    },\n\n    triggerElectric: methodOp(function(text) { triggerElectric(this, text); }),\n\n    findPosH: function(from, amount, unit, visually) {\n      var dir = 1;\n      if (amount < 0) { dir = -1; amount = -amount; }\n      for (var i = 0, cur = clipPos(this.doc, from); i < amount; ++i) {\n        cur = findPosH(this.doc, cur, dir, unit, visually);\n        if (cur.hitSide) break;\n      }\n      return cur;\n    },\n\n    moveH: methodOp(function(dir, unit) {\n      var cm = this;\n      cm.extendSelectionsBy(function(range) {\n        if (cm.display.shift || cm.doc.extend || range.empty())\n          return findPosH(cm.doc, range.head, dir, unit, cm.options.rtlMoveVisually);\n        else\n          return dir < 0 ? range.from() : range.to();\n      }, sel_move);\n    }),\n\n    deleteH: methodOp(function(dir, unit) {\n      var sel = this.doc.sel, doc = this.doc;\n      if (sel.somethingSelected())\n        doc.replaceSelection(\"\", null, \"+delete\");\n      else\n        deleteNearSelection(this, function(range) {\n          var other = findPosH(doc, range.head, dir, unit, false);\n          return dir < 0 ? {from: other, to: range.head} : {from: range.head, to: other};\n        });\n    }),\n\n    findPosV: function(from, amount, unit, goalColumn) {\n      var dir = 1, x = goalColumn;\n      if (amount < 0) { dir = -1; amount = -amount; }\n      for (var i = 0, cur = clipPos(this.doc, from); i < amount; ++i) {\n        var coords = cursorCoords(this, cur, \"div\");\n        if (x == null) x = coords.left;\n        else coords.left = x;\n        cur = findPosV(this, coords, dir, unit);\n        if (cur.hitSide) break;\n      }\n      return cur;\n    },\n\n    moveV: methodOp(function(dir, unit) {\n      var cm = this, doc = this.doc, goals = [];\n      var collapse = !cm.display.shift && !doc.extend && doc.sel.somethingSelected();\n      doc.extendSelectionsBy(function(range) {\n        if (collapse)\n          return dir < 0 ? range.from() : range.to();\n        var headPos = cursorCoords(cm, range.head, \"div\");\n        if (range.goalColumn != null) headPos.left = range.goalColumn;\n        goals.push(headPos.left);\n        var pos = findPosV(cm, headPos, dir, unit);\n        if (unit == \"page\" && range == doc.sel.primary())\n          addToScrollPos(cm, null, charCoords(cm, pos, \"div\").top - headPos.top);\n        return pos;\n      }, sel_move);\n      if (goals.length) for (var i = 0; i < doc.sel.ranges.length; i++)\n        doc.sel.ranges[i].goalColumn = goals[i];\n    }),\n\n    // Find the word at the given position (as returned by coordsChar).\n    findWordAt: function(pos) {\n      var doc = this.doc, line = getLine(doc, pos.line).text;\n      var start = pos.ch, end = pos.ch;\n      if (line) {\n        var helper = this.getHelper(pos, \"wordChars\");\n        if ((pos.xRel < 0 || end == line.length) && start) --start; else ++end;\n        var startChar = line.charAt(start);\n        var check = isWordChar(startChar, helper)\n          ? function(ch) { return isWordChar(ch, helper); }\n          : /\\s/.test(startChar) ? function(ch) {return /\\s/.test(ch);}\n          : function(ch) {return !/\\s/.test(ch) && !isWordChar(ch);};\n        while (start > 0 && check(line.charAt(start - 1))) --start;\n        while (end < line.length && check(line.charAt(end))) ++end;\n      }\n      return new Range(Pos(pos.line, start), Pos(pos.line, end));\n    },\n\n    toggleOverwrite: function(value) {\n      if (value != null && value == this.state.overwrite) return;\n      if (this.state.overwrite = !this.state.overwrite)\n        addClass(this.display.cursorDiv, \"CodeMirror-overwrite\");\n      else\n        rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\");\n\n      signal(this, \"overwriteToggle\", this, this.state.overwrite);\n    },\n    hasFocus: function() { return this.display.input.getField() == activeElt(); },\n\n    scrollTo: methodOp(function(x, y) {\n      if (x != null || y != null) resolveScrollToPos(this);\n      if (x != null) this.curOp.scrollLeft = x;\n      if (y != null) this.curOp.scrollTop = y;\n    }),\n    getScrollInfo: function() {\n      var scroller = this.display.scroller;\n      return {left: scroller.scrollLeft, top: scroller.scrollTop,\n              height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n              width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n              clientHeight: displayHeight(this), clientWidth: displayWidth(this)};\n    },\n\n    scrollIntoView: methodOp(function(range, margin) {\n      if (range == null) {\n        range = {from: this.doc.sel.primary().head, to: null};\n        if (margin == null) margin = this.options.cursorScrollMargin;\n      } else if (typeof range == \"number\") {\n        range = {from: Pos(range, 0), to: null};\n      } else if (range.from == null) {\n        range = {from: range, to: null};\n      }\n      if (!range.to) range.to = range.from;\n      range.margin = margin || 0;\n\n      if (range.from.line != null) {\n        resolveScrollToPos(this);\n        this.curOp.scrollToPos = range;\n      } else {\n        var sPos = calculateScrollPos(this, Math.min(range.from.left, range.to.left),\n                                      Math.min(range.from.top, range.to.top) - range.margin,\n                                      Math.max(range.from.right, range.to.right),\n                                      Math.max(range.from.bottom, range.to.bottom) + range.margin);\n        this.scrollTo(sPos.scrollLeft, sPos.scrollTop);\n      }\n    }),\n\n    setSize: methodOp(function(width, height) {\n      var cm = this;\n      function interpret(val) {\n        return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val;\n      }\n      if (width != null) cm.display.wrapper.style.width = interpret(width);\n      if (height != null) cm.display.wrapper.style.height = interpret(height);\n      if (cm.options.lineWrapping) clearLineMeasurementCache(this);\n      var lineNo = cm.display.viewFrom;\n      cm.doc.iter(lineNo, cm.display.viewTo, function(line) {\n        if (line.widgets) for (var i = 0; i < line.widgets.length; i++)\n          if (line.widgets[i].noHScroll) { regLineChange(cm, lineNo, \"widget\"); break; }\n        ++lineNo;\n      });\n      cm.curOp.forceUpdate = true;\n      signal(cm, \"refresh\", this);\n    }),\n\n    operation: function(f){return runInOp(this, f);},\n\n    refresh: methodOp(function() {\n      var oldHeight = this.display.cachedTextHeight;\n      regChange(this);\n      this.curOp.forceUpdate = true;\n      clearCaches(this);\n      this.scrollTo(this.doc.scrollLeft, this.doc.scrollTop);\n      updateGutterSpace(this);\n      if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5)\n        estimateLineHeights(this);\n      signal(this, \"refresh\", this);\n    }),\n\n    swapDoc: methodOp(function(doc) {\n      var old = this.doc;\n      old.cm = null;\n      attachDoc(this, doc);\n      clearCaches(this);\n      this.display.input.reset();\n      this.scrollTo(doc.scrollLeft, doc.scrollTop);\n      this.curOp.forceScroll = true;\n      signalLater(this, \"swapDoc\", this, old);\n      return old;\n    }),\n\n    getInputField: function(){return this.display.input.getField();},\n    getWrapperElement: function(){return this.display.wrapper;},\n    getScrollerElement: function(){return this.display.scroller;},\n    getGutterElement: function(){return this.display.gutters;}\n  };\n  eventMixin(CodeMirror);\n\n  // OPTION DEFAULTS\n\n  // The default configuration options.\n  var defaults = CodeMirror.defaults = {};\n  // Functions to run when options are changed.\n  var optionHandlers = CodeMirror.optionHandlers = {};\n\n  function option(name, deflt, handle, notOnInit) {\n    CodeMirror.defaults[name] = deflt;\n    if (handle) optionHandlers[name] =\n      notOnInit ? function(cm, val, old) {if (old != Init) handle(cm, val, old);} : handle;\n  }\n\n  // Passed to option handlers when there is no old value.\n  var Init = CodeMirror.Init = {toString: function(){return \"CodeMirror.Init\";}};\n\n  // These two are, on init, called from the constructor because they\n  // have to be initialized before the editor can start at all.\n  option(\"value\", \"\", function(cm, val) {\n    cm.setValue(val);\n  }, true);\n  option(\"mode\", null, function(cm, val) {\n    cm.doc.modeOption = val;\n    loadMode(cm);\n  }, true);\n\n  option(\"indentUnit\", 2, loadMode, true);\n  option(\"indentWithTabs\", false);\n  option(\"smartIndent\", true);\n  option(\"tabSize\", 4, function(cm) {\n    resetModeState(cm);\n    clearCaches(cm);\n    regChange(cm);\n  }, true);\n  option(\"lineSeparator\", null, function(cm, val) {\n    cm.doc.lineSep = val;\n    if (!val) return;\n    var newBreaks = [], lineNo = cm.doc.first;\n    cm.doc.iter(function(line) {\n      for (var pos = 0;;) {\n        var found = line.text.indexOf(val, pos);\n        if (found == -1) break;\n        pos = found + val.length;\n        newBreaks.push(Pos(lineNo, found));\n      }\n      lineNo++;\n    });\n    for (var i = newBreaks.length - 1; i >= 0; i--)\n      replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length))\n  });\n  option(\"specialChars\", /[\\t\\u0000-\\u0019\\u00ad\\u200b-\\u200f\\u2028\\u2029\\ufeff]/g, function(cm, val, old) {\n    cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n    if (old != CodeMirror.Init) cm.refresh();\n  });\n  option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function(cm) {cm.refresh();}, true);\n  option(\"electricChars\", true);\n  option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function() {\n    throw new Error(\"inputStyle can not (yet) be changed in a running editor\"); // FIXME\n  }, true);\n  option(\"rtlMoveVisually\", !windows);\n  option(\"wholeLineUpdateBefore\", true);\n\n  option(\"theme\", \"default\", function(cm) {\n    themeChanged(cm);\n    guttersChanged(cm);\n  }, true);\n  option(\"keyMap\", \"default\", function(cm, val, old) {\n    var next = getKeyMap(val);\n    var prev = old != CodeMirror.Init && getKeyMap(old);\n    if (prev && prev.detach) prev.detach(cm, next);\n    if (next.attach) next.attach(cm, prev || null);\n  });\n  option(\"extraKeys\", null);\n\n  option(\"lineWrapping\", false, wrappingChanged, true);\n  option(\"gutters\", [], function(cm) {\n    setGuttersForLineNumbers(cm.options);\n    guttersChanged(cm);\n  }, true);\n  option(\"fixedGutter\", true, function(cm, val) {\n    cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n    cm.refresh();\n  }, true);\n  option(\"coverGutterNextToScrollbar\", false, function(cm) {updateScrollbars(cm);}, true);\n  option(\"scrollbarStyle\", \"native\", function(cm) {\n    initScrollbars(cm);\n    updateScrollbars(cm);\n    cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n    cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n  }, true);\n  option(\"lineNumbers\", false, function(cm) {\n    setGuttersForLineNumbers(cm.options);\n    guttersChanged(cm);\n  }, true);\n  option(\"firstLineNumber\", 1, guttersChanged, true);\n  option(\"lineNumberFormatter\", function(integer) {return integer;}, guttersChanged, true);\n  option(\"showCursorWhenSelecting\", false, updateSelection, true);\n\n  option(\"resetSelectionOnContextMenu\", true);\n  option(\"lineWiseCopyCut\", true);\n\n  option(\"readOnly\", false, function(cm, val) {\n    if (val == \"nocursor\") {\n      onBlur(cm);\n      cm.display.input.blur();\n      cm.display.disabled = true;\n    } else {\n      cm.display.disabled = false;\n    }\n    cm.display.input.readOnlyChanged(val)\n  });\n  option(\"disableInput\", false, function(cm, val) {if (!val) cm.display.input.reset();}, true);\n  option(\"dragDrop\", true, dragDropChanged);\n  option(\"allowDropFileTypes\", null);\n\n  option(\"cursorBlinkRate\", 530);\n  option(\"cursorScrollMargin\", 0);\n  option(\"cursorHeight\", 1, updateSelection, true);\n  option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n  option(\"workTime\", 100);\n  option(\"workDelay\", 100);\n  option(\"flattenSpans\", true, resetModeState, true);\n  option(\"addModeClass\", false, resetModeState, true);\n  option(\"pollInterval\", 100);\n  option(\"undoDepth\", 200, function(cm, val){cm.doc.history.undoDepth = val;});\n  option(\"historyEventDelay\", 1250);\n  option(\"viewportMargin\", 10, function(cm){cm.refresh();}, true);\n  option(\"maxHighlightLength\", 10000, resetModeState, true);\n  option(\"moveInputWithCursor\", true, function(cm, val) {\n    if (!val) cm.display.input.resetPosition();\n  });\n\n  option(\"tabindex\", null, function(cm, val) {\n    cm.display.input.getField().tabIndex = val || \"\";\n  });\n  option(\"autofocus\", null);\n\n  // MODE DEFINITION AND QUERYING\n\n  // Known modes, by name and by MIME\n  var modes = CodeMirror.modes = {}, mimeModes = CodeMirror.mimeModes = {};\n\n  // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n  CodeMirror.defineMode = function(name, mode) {\n    if (!CodeMirror.defaults.mode && name != \"null\") CodeMirror.defaults.mode = name;\n    if (arguments.length > 2)\n      mode.dependencies = Array.prototype.slice.call(arguments, 2);\n    modes[name] = mode;\n  };\n\n  CodeMirror.defineMIME = function(mime, spec) {\n    mimeModes[mime] = spec;\n  };\n\n  // Given a MIME type, a {name, ...options} config object, or a name\n  // string, return a mode config object.\n  CodeMirror.resolveMode = function(spec) {\n    if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n      spec = mimeModes[spec];\n    } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n      var found = mimeModes[spec.name];\n      if (typeof found == \"string\") found = {name: found};\n      spec = createObj(found, spec);\n      spec.name = found.name;\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n      return CodeMirror.resolveMode(\"application/xml\");\n    }\n    if (typeof spec == \"string\") return {name: spec};\n    else return spec || {name: \"null\"};\n  };\n\n  // Given a mode spec (anything that resolveMode accepts), find and\n  // initialize an actual mode object.\n  CodeMirror.getMode = function(options, spec) {\n    var spec = CodeMirror.resolveMode(spec);\n    var mfactory = modes[spec.name];\n    if (!mfactory) return CodeMirror.getMode(options, \"text/plain\");\n    var modeObj = mfactory(options, spec);\n    if (modeExtensions.hasOwnProperty(spec.name)) {\n      var exts = modeExtensions[spec.name];\n      for (var prop in exts) {\n        if (!exts.hasOwnProperty(prop)) continue;\n        if (modeObj.hasOwnProperty(prop)) modeObj[\"_\" + prop] = modeObj[prop];\n        modeObj[prop] = exts[prop];\n      }\n    }\n    modeObj.name = spec.name;\n    if (spec.helperType) modeObj.helperType = spec.helperType;\n    if (spec.modeProps) for (var prop in spec.modeProps)\n      modeObj[prop] = spec.modeProps[prop];\n\n    return modeObj;\n  };\n\n  // Minimal default mode.\n  CodeMirror.defineMode(\"null\", function() {\n    return {token: function(stream) {stream.skipToEnd();}};\n  });\n  CodeMirror.defineMIME(\"text/plain\", \"null\");\n\n  // This can be used to attach properties to mode objects from\n  // outside the actual mode definition.\n  var modeExtensions = CodeMirror.modeExtensions = {};\n  CodeMirror.extendMode = function(mode, properties) {\n    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});\n    copyObj(properties, exts);\n  };\n\n  // EXTENSIONS\n\n  CodeMirror.defineExtension = function(name, func) {\n    CodeMirror.prototype[name] = func;\n  };\n  CodeMirror.defineDocExtension = function(name, func) {\n    Doc.prototype[name] = func;\n  };\n  CodeMirror.defineOption = option;\n\n  var initHooks = [];\n  CodeMirror.defineInitHook = function(f) {initHooks.push(f);};\n\n  var helpers = CodeMirror.helpers = {};\n  CodeMirror.registerHelper = function(type, name, value) {\n    if (!helpers.hasOwnProperty(type)) helpers[type] = CodeMirror[type] = {_global: []};\n    helpers[type][name] = value;\n  };\n  CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {\n    CodeMirror.registerHelper(type, name, value);\n    helpers[type]._global.push({pred: predicate, val: value});\n  };\n\n  // MODE STATE HANDLING\n\n  // Utility functions for working with state. Exported because nested\n  // modes need to do this for their inner modes.\n\n  var copyState = CodeMirror.copyState = function(mode, state) {\n    if (state === true) return state;\n    if (mode.copyState) return mode.copyState(state);\n    var nstate = {};\n    for (var n in state) {\n      var val = state[n];\n      if (val instanceof Array) val = val.concat([]);\n      nstate[n] = val;\n    }\n    return nstate;\n  };\n\n  var startState = CodeMirror.startState = function(mode, a1, a2) {\n    return mode.startState ? mode.startState(a1, a2) : true;\n  };\n\n  // Given a mode and a state (for that mode), find the inner mode and\n  // state at the position that the state refers to.\n  CodeMirror.innerMode = function(mode, state) {\n    while (mode.innerMode) {\n      var info = mode.innerMode(state);\n      if (!info || info.mode == mode) break;\n      state = info.state;\n      mode = info.mode;\n    }\n    return info || {mode: mode, state: state};\n  };\n\n  // STANDARD COMMANDS\n\n  // Commands are parameter-less actions that can be performed on an\n  // editor, mostly used for keybindings.\n  var commands = CodeMirror.commands = {\n    selectAll: function(cm) {cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);},\n    singleSelection: function(cm) {\n      cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll);\n    },\n    killLine: function(cm) {\n      deleteNearSelection(cm, function(range) {\n        if (range.empty()) {\n          var len = getLine(cm.doc, range.head.line).text.length;\n          if (range.head.ch == len && range.head.line < cm.lastLine())\n            return {from: range.head, to: Pos(range.head.line + 1, 0)};\n          else\n            return {from: range.head, to: Pos(range.head.line, len)};\n        } else {\n          return {from: range.from(), to: range.to()};\n        }\n      });\n    },\n    deleteLine: function(cm) {\n      deleteNearSelection(cm, function(range) {\n        return {from: Pos(range.from().line, 0),\n                to: clipPos(cm.doc, Pos(range.to().line + 1, 0))};\n      });\n    },\n    delLineLeft: function(cm) {\n      deleteNearSelection(cm, function(range) {\n        return {from: Pos(range.from().line, 0), to: range.from()};\n      });\n    },\n    delWrappedLineLeft: function(cm) {\n      deleteNearSelection(cm, function(range) {\n        var top = cm.charCoords(range.head, \"div\").top + 5;\n        var leftPos = cm.coordsChar({left: 0, top: top}, \"div\");\n        return {from: leftPos, to: range.from()};\n      });\n    },\n    delWrappedLineRight: function(cm) {\n      deleteNearSelection(cm, function(range) {\n        var top = cm.charCoords(range.head, \"div\").top + 5;\n        var rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\");\n        return {from: range.from(), to: rightPos };\n      });\n    },\n    undo: function(cm) {cm.undo();},\n    redo: function(cm) {cm.redo();},\n    undoSelection: function(cm) {cm.undoSelection();},\n    redoSelection: function(cm) {cm.redoSelection();},\n    goDocStart: function(cm) {cm.extendSelection(Pos(cm.firstLine(), 0));},\n    goDocEnd: function(cm) {cm.extendSelection(Pos(cm.lastLine()));},\n    goLineStart: function(cm) {\n      cm.extendSelectionsBy(function(range) { return lineStart(cm, range.head.line); },\n                            {origin: \"+move\", bias: 1});\n    },\n    goLineStartSmart: function(cm) {\n      cm.extendSelectionsBy(function(range) {\n        return lineStartSmart(cm, range.head);\n      }, {origin: \"+move\", bias: 1});\n    },\n    goLineEnd: function(cm) {\n      cm.extendSelectionsBy(function(range) { return lineEnd(cm, range.head.line); },\n                            {origin: \"+move\", bias: -1});\n    },\n    goLineRight: function(cm) {\n      cm.extendSelectionsBy(function(range) {\n        var top = cm.charCoords(range.head, \"div\").top + 5;\n        return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\");\n      }, sel_move);\n    },\n    goLineLeft: function(cm) {\n      cm.extendSelectionsBy(function(range) {\n        var top = cm.charCoords(range.head, \"div\").top + 5;\n        return cm.coordsChar({left: 0, top: top}, \"div\");\n      }, sel_move);\n    },\n    goLineLeftSmart: function(cm) {\n      cm.extendSelectionsBy(function(range) {\n        var top = cm.charCoords(range.head, \"div\").top + 5;\n        var pos = cm.coordsChar({left: 0, top: top}, \"div\");\n        if (pos.ch < cm.getLine(pos.line).search(/\\S/)) return lineStartSmart(cm, range.head);\n        return pos;\n      }, sel_move);\n    },\n    goLineUp: function(cm) {cm.moveV(-1, \"line\");},\n    goLineDown: function(cm) {cm.moveV(1, \"line\");},\n    goPageUp: function(cm) {cm.moveV(-1, \"page\");},\n    goPageDown: function(cm) {cm.moveV(1, \"page\");},\n    goCharLeft: function(cm) {cm.moveH(-1, \"char\");},\n    goCharRight: function(cm) {cm.moveH(1, \"char\");},\n    goColumnLeft: function(cm) {cm.moveH(-1, \"column\");},\n    goColumnRight: function(cm) {cm.moveH(1, \"column\");},\n    goWordLeft: function(cm) {cm.moveH(-1, \"word\");},\n    goGroupRight: function(cm) {cm.moveH(1, \"group\");},\n    goGroupLeft: function(cm) {cm.moveH(-1, \"group\");},\n    goWordRight: function(cm) {cm.moveH(1, \"word\");},\n    delCharBefore: function(cm) {cm.deleteH(-1, \"char\");},\n    delCharAfter: function(cm) {cm.deleteH(1, \"char\");},\n    delWordBefore: function(cm) {cm.deleteH(-1, \"word\");},\n    delWordAfter: function(cm) {cm.deleteH(1, \"word\");},\n    delGroupBefore: function(cm) {cm.deleteH(-1, \"group\");},\n    delGroupAfter: function(cm) {cm.deleteH(1, \"group\");},\n    indentAuto: function(cm) {cm.indentSelection(\"smart\");},\n    indentMore: function(cm) {cm.indentSelection(\"add\");},\n    indentLess: function(cm) {cm.indentSelection(\"subtract\");},\n    insertTab: function(cm) {cm.replaceSelection(\"\\t\");},\n    insertSoftTab: function(cm) {\n      var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize;\n      for (var i = 0; i < ranges.length; i++) {\n        var pos = ranges[i].from();\n        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n        spaces.push(new Array(tabSize - col % tabSize + 1).join(\" \"));\n      }\n      cm.replaceSelections(spaces);\n    },\n    defaultTab: function(cm) {\n      if (cm.somethingSelected()) cm.indentSelection(\"add\");\n      else cm.execCommand(\"insertTab\");\n    },\n    transposeChars: function(cm) {\n      runInOp(cm, function() {\n        var ranges = cm.listSelections(), newSel = [];\n        for (var i = 0; i < ranges.length; i++) {\n          var cur = ranges[i].head, line = getLine(cm.doc, cur.line).text;\n          if (line) {\n            if (cur.ch == line.length) cur = new Pos(cur.line, cur.ch - 1);\n            if (cur.ch > 0) {\n              cur = new Pos(cur.line, cur.ch + 1);\n              cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),\n                              Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n            } else if (cur.line > cm.doc.first) {\n              var prev = getLine(cm.doc, cur.line - 1).text;\n              if (prev)\n                cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() +\n                                prev.charAt(prev.length - 1),\n                                Pos(cur.line - 1, prev.length - 1), Pos(cur.line, 1), \"+transpose\");\n            }\n          }\n          newSel.push(new Range(cur, cur));\n        }\n        cm.setSelections(newSel);\n      });\n    },\n    newlineAndIndent: function(cm) {\n      runInOp(cm, function() {\n        var len = cm.listSelections().length;\n        for (var i = 0; i < len; i++) {\n          var range = cm.listSelections()[i];\n          cm.replaceRange(cm.doc.lineSeparator(), range.anchor, range.head, \"+input\");\n          cm.indentLine(range.from().line + 1, null, true);\n        }\n        ensureCursorVisible(cm);\n      });\n    },\n    toggleOverwrite: function(cm) {cm.toggleOverwrite();}\n  };\n\n\n  // STANDARD KEYMAPS\n\n  var keyMap = CodeMirror.keyMap = {};\n\n  keyMap.basic = {\n    \"Left\": \"goCharLeft\", \"Right\": \"goCharRight\", \"Up\": \"goLineUp\", \"Down\": \"goLineDown\",\n    \"End\": \"goLineEnd\", \"Home\": \"goLineStartSmart\", \"PageUp\": \"goPageUp\", \"PageDown\": \"goPageDown\",\n    \"Delete\": \"delCharAfter\", \"Backspace\": \"delCharBefore\", \"Shift-Backspace\": \"delCharBefore\",\n    \"Tab\": \"defaultTab\", \"Shift-Tab\": \"indentAuto\",\n    \"Enter\": \"newlineAndIndent\", \"Insert\": \"toggleOverwrite\",\n    \"Esc\": \"singleSelection\"\n  };\n  // Note that the save and find-related commands aren't defined by\n  // default. User code or addons can define them. Unknown commands\n  // are simply ignored.\n  keyMap.pcDefault = {\n    \"Ctrl-A\": \"selectAll\", \"Ctrl-D\": \"deleteLine\", \"Ctrl-Z\": \"undo\", \"Shift-Ctrl-Z\": \"redo\", \"Ctrl-Y\": \"redo\",\n    \"Ctrl-Home\": \"goDocStart\", \"Ctrl-End\": \"goDocEnd\", \"Ctrl-Up\": \"goLineUp\", \"Ctrl-Down\": \"goLineDown\",\n    \"Ctrl-Left\": \"goGroupLeft\", \"Ctrl-Right\": \"goGroupRight\", \"Alt-Left\": \"goLineStart\", \"Alt-Right\": \"goLineEnd\",\n    \"Ctrl-Backspace\": \"delGroupBefore\", \"Ctrl-Delete\": \"delGroupAfter\", \"Ctrl-S\": \"save\", \"Ctrl-F\": \"find\",\n    \"Ctrl-G\": \"findNext\", \"Shift-Ctrl-G\": \"findPrev\", \"Shift-Ctrl-F\": \"replace\", \"Shift-Ctrl-R\": \"replaceAll\",\n    \"Ctrl-[\": \"indentLess\", \"Ctrl-]\": \"indentMore\",\n    \"Ctrl-U\": \"undoSelection\", \"Shift-Ctrl-U\": \"redoSelection\", \"Alt-U\": \"redoSelection\",\n    fallthrough: \"basic\"\n  };\n  // Very basic readline/emacs-style bindings, which are standard on Mac.\n  keyMap.emacsy = {\n    \"Ctrl-F\": \"goCharRight\", \"Ctrl-B\": \"goCharLeft\", \"Ctrl-P\": \"goLineUp\", \"Ctrl-N\": \"goLineDown\",\n    \"Alt-F\": \"goWordRight\", \"Alt-B\": \"goWordLeft\", \"Ctrl-A\": \"goLineStart\", \"Ctrl-E\": \"goLineEnd\",\n    \"Ctrl-V\": \"goPageDown\", \"Shift-Ctrl-V\": \"goPageUp\", \"Ctrl-D\": \"delCharAfter\", \"Ctrl-H\": \"delCharBefore\",\n    \"Alt-D\": \"delWordAfter\", \"Alt-Backspace\": \"delWordBefore\", \"Ctrl-K\": \"killLine\", \"Ctrl-T\": \"transposeChars\"\n  };\n  keyMap.macDefault = {\n    \"Cmd-A\": \"selectAll\", \"Cmd-D\": \"deleteLine\", \"Cmd-Z\": \"undo\", \"Shift-Cmd-Z\": \"redo\", \"Cmd-Y\": \"redo\",\n    \"Cmd-Home\": \"goDocStart\", \"Cmd-Up\": \"goDocStart\", \"Cmd-End\": \"goDocEnd\", \"Cmd-Down\": \"goDocEnd\", \"Alt-Left\": \"goGroupLeft\",\n    \"Alt-Right\": \"goGroupRight\", \"Cmd-Left\": \"goLineLeft\", \"Cmd-Right\": \"goLineRight\", \"Alt-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Alt-Backspace\": \"delGroupAfter\", \"Alt-Delete\": \"delGroupAfter\", \"Cmd-S\": \"save\", \"Cmd-F\": \"find\",\n    \"Cmd-G\": \"findNext\", \"Shift-Cmd-G\": \"findPrev\", \"Cmd-Alt-F\": \"replace\", \"Shift-Cmd-Alt-F\": \"replaceAll\",\n    \"Cmd-[\": \"indentLess\", \"Cmd-]\": \"indentMore\", \"Cmd-Backspace\": \"delWrappedLineLeft\", \"Cmd-Delete\": \"delWrappedLineRight\",\n    \"Cmd-U\": \"undoSelection\", \"Shift-Cmd-U\": \"redoSelection\", \"Ctrl-Up\": \"goDocStart\", \"Ctrl-Down\": \"goDocEnd\",\n    fallthrough: [\"basic\", \"emacsy\"]\n  };\n  keyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault;\n\n  // KEYMAP DISPATCH\n\n  function normalizeKeyName(name) {\n    var parts = name.split(/-(?!$)/), name = parts[parts.length - 1];\n    var alt, ctrl, shift, cmd;\n    for (var i = 0; i < parts.length - 1; i++) {\n      var mod = parts[i];\n      if (/^(cmd|meta|m)$/i.test(mod)) cmd = true;\n      else if (/^a(lt)?$/i.test(mod)) alt = true;\n      else if (/^(c|ctrl|control)$/i.test(mod)) ctrl = true;\n      else if (/^s(hift)$/i.test(mod)) shift = true;\n      else throw new Error(\"Unrecognized modifier name: \" + mod);\n    }\n    if (alt) name = \"Alt-\" + name;\n    if (ctrl) name = \"Ctrl-\" + name;\n    if (cmd) name = \"Cmd-\" + name;\n    if (shift) name = \"Shift-\" + name;\n    return name;\n  }\n\n  // This is a kludge to keep keymaps mostly working as raw objects\n  // (backwards compatibility) while at the same time support features\n  // like normalization and multi-stroke key bindings. It compiles a\n  // new normalized keymap, and then updates the old object to reflect\n  // this.\n  CodeMirror.normalizeKeyMap = function(keymap) {\n    var copy = {};\n    for (var keyname in keymap) if (keymap.hasOwnProperty(keyname)) {\n      var value = keymap[keyname];\n      if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) continue;\n      if (value == \"...\") { delete keymap[keyname]; continue; }\n\n      var keys = map(keyname.split(\" \"), normalizeKeyName);\n      for (var i = 0; i < keys.length; i++) {\n        var val, name;\n        if (i == keys.length - 1) {\n          name = keys.join(\" \");\n          val = value;\n        } else {\n          name = keys.slice(0, i + 1).join(\" \");\n          val = \"...\";\n        }\n        var prev = copy[name];\n        if (!prev) copy[name] = val;\n        else if (prev != val) throw new Error(\"Inconsistent bindings for \" + name);\n      }\n      delete keymap[keyname];\n    }\n    for (var prop in copy) keymap[prop] = copy[prop];\n    return keymap;\n  };\n\n  var lookupKey = CodeMirror.lookupKey = function(key, map, handle, context) {\n    map = getKeyMap(map);\n    var found = map.call ? map.call(key, context) : map[key];\n    if (found === false) return \"nothing\";\n    if (found === \"...\") return \"multi\";\n    if (found != null && handle(found)) return \"handled\";\n\n    if (map.fallthrough) {\n      if (Object.prototype.toString.call(map.fallthrough) != \"[object Array]\")\n        return lookupKey(key, map.fallthrough, handle, context);\n      for (var i = 0; i < map.fallthrough.length; i++) {\n        var result = lookupKey(key, map.fallthrough[i], handle, context);\n        if (result) return result;\n      }\n    }\n  };\n\n  // Modifier key presses don't count as 'real' key presses for the\n  // purpose of keymap fallthrough.\n  var isModifierKey = CodeMirror.isModifierKey = function(value) {\n    var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n    return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\";\n  };\n\n  // Look up the name of a key as indicated by an event object.\n  var keyName = CodeMirror.keyName = function(event, noShift) {\n    if (presto && event.keyCode == 34 && event[\"char\"]) return false;\n    var base = keyNames[event.keyCode], name = base;\n    if (name == null || event.altGraphKey) return false;\n    if (event.altKey && base != \"Alt\") name = \"Alt-\" + name;\n    if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") name = \"Ctrl-\" + name;\n    if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Cmd\") name = \"Cmd-\" + name;\n    if (!noShift && event.shiftKey && base != \"Shift\") name = \"Shift-\" + name;\n    return name;\n  };\n\n  function getKeyMap(val) {\n    return typeof val == \"string\" ? keyMap[val] : val;\n  }\n\n  // FROMTEXTAREA\n\n  CodeMirror.fromTextArea = function(textarea, options) {\n    options = options ? copyObj(options) : {};\n    options.value = textarea.value;\n    if (!options.tabindex && textarea.tabIndex)\n      options.tabindex = textarea.tabIndex;\n    if (!options.placeholder && textarea.placeholder)\n      options.placeholder = textarea.placeholder;\n    // Set autofocus to true if this textarea is focused, or if it has\n    // autofocus and no other element is focused.\n    if (options.autofocus == null) {\n      var hasFocus = activeElt();\n      options.autofocus = hasFocus == textarea ||\n        textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n    }\n\n    function save() {textarea.value = cm.getValue();}\n    if (textarea.form) {\n      on(textarea.form, \"submit\", save);\n      // Deplorable hack to make the submit method do the right thing.\n      if (!options.leaveSubmitMethodAlone) {\n        var form = textarea.form, realSubmit = form.submit;\n        try {\n          var wrappedSubmit = form.submit = function() {\n            save();\n            form.submit = realSubmit;\n            form.submit();\n            form.submit = wrappedSubmit;\n          };\n        } catch(e) {}\n      }\n    }\n\n    options.finishInit = function(cm) {\n      cm.save = save;\n      cm.getTextArea = function() { return textarea; };\n      cm.toTextArea = function() {\n        cm.toTextArea = isNaN; // Prevent this from being ran twice\n        save();\n        textarea.parentNode.removeChild(cm.getWrapperElement());\n        textarea.style.display = \"\";\n        if (textarea.form) {\n          off(textarea.form, \"submit\", save);\n          if (typeof textarea.form.submit == \"function\")\n            textarea.form.submit = realSubmit;\n        }\n      };\n    };\n\n    textarea.style.display = \"none\";\n    var cm = CodeMirror(function(node) {\n      textarea.parentNode.insertBefore(node, textarea.nextSibling);\n    }, options);\n    return cm;\n  };\n\n  // STRING STREAM\n\n  // Fed to the mode parsers, provides helper functions to make\n  // parsers more succinct.\n\n  var StringStream = CodeMirror.StringStream = function(string, tabSize) {\n    this.pos = this.start = 0;\n    this.string = string;\n    this.tabSize = tabSize || 8;\n    this.lastColumnPos = this.lastColumnValue = 0;\n    this.lineStart = 0;\n  };\n\n  StringStream.prototype = {\n    eol: function() {return this.pos >= this.string.length;},\n    sol: function() {return this.pos == this.lineStart;},\n    peek: function() {return this.string.charAt(this.pos) || undefined;},\n    next: function() {\n      if (this.pos < this.string.length)\n        return this.string.charAt(this.pos++);\n    },\n    eat: function(match) {\n      var ch = this.string.charAt(this.pos);\n      if (typeof match == \"string\") var ok = ch == match;\n      else var ok = ch && (match.test ? match.test(ch) : match(ch));\n      if (ok) {++this.pos; return ch;}\n    },\n    eatWhile: function(match) {\n      var start = this.pos;\n      while (this.eat(match)){}\n      return this.pos > start;\n    },\n    eatSpace: function() {\n      var start = this.pos;\n      while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) ++this.pos;\n      return this.pos > start;\n    },\n    skipToEnd: function() {this.pos = this.string.length;},\n    skipTo: function(ch) {\n      var found = this.string.indexOf(ch, this.pos);\n      if (found > -1) {this.pos = found; return true;}\n    },\n    backUp: function(n) {this.pos -= n;},\n    column: function() {\n      if (this.lastColumnPos < this.start) {\n        this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n        this.lastColumnPos = this.start;\n      }\n      return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);\n    },\n    indentation: function() {\n      return countColumn(this.string, null, this.tabSize) -\n        (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);\n    },\n    match: function(pattern, consume, caseInsensitive) {\n      if (typeof pattern == \"string\") {\n        var cased = function(str) {return caseInsensitive ? str.toLowerCase() : str;};\n        var substr = this.string.substr(this.pos, pattern.length);\n        if (cased(substr) == cased(pattern)) {\n          if (consume !== false) this.pos += pattern.length;\n          return true;\n        }\n      } else {\n        var match = this.string.slice(this.pos).match(pattern);\n        if (match && match.index > 0) return null;\n        if (match && consume !== false) this.pos += match[0].length;\n        return match;\n      }\n    },\n    current: function(){return this.string.slice(this.start, this.pos);},\n    hideFirstChars: function(n, inner) {\n      this.lineStart += n;\n      try { return inner(); }\n      finally { this.lineStart -= n; }\n    }\n  };\n\n  // TEXTMARKERS\n\n  // Created with markText and setBookmark methods. A TextMarker is a\n  // handle that can be used to clear or find a marked position in the\n  // document. Line objects hold arrays (markedSpans) containing\n  // {from, to, marker} object pointing to such marker objects, and\n  // indicating that such a marker is present on that line. Multiple\n  // lines may point to the same marker when it spans across lines.\n  // The spans will have null for their from/to properties when the\n  // marker continues beyond the start/end of the line. Markers have\n  // links back to the lines they currently touch.\n\n  var nextMarkerId = 0;\n\n  var TextMarker = CodeMirror.TextMarker = function(doc, type) {\n    this.lines = [];\n    this.type = type;\n    this.doc = doc;\n    this.id = ++nextMarkerId;\n  };\n  eventMixin(TextMarker);\n\n  // Clear the marker.\n  TextMarker.prototype.clear = function() {\n    if (this.explicitlyCleared) return;\n    var cm = this.doc.cm, withOp = cm && !cm.curOp;\n    if (withOp) startOperation(cm);\n    if (hasHandler(this, \"clear\")) {\n      var found = this.find();\n      if (found) signalLater(this, \"clear\", found.from, found.to);\n    }\n    var min = null, max = null;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (cm && !this.collapsed) regLineChange(cm, lineNo(line), \"text\");\n      else if (cm) {\n        if (span.to != null) max = lineNo(line);\n        if (span.from != null) min = lineNo(line);\n      }\n      line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n      if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm)\n        updateLineHeight(line, textHeight(cm.display));\n    }\n    if (cm && this.collapsed && !cm.options.lineWrapping) for (var i = 0; i < this.lines.length; ++i) {\n      var visual = visualLine(this.lines[i]), len = lineLength(visual);\n      if (len > cm.display.maxLineLength) {\n        cm.display.maxLine = visual;\n        cm.display.maxLineLength = len;\n        cm.display.maxLineChanged = true;\n      }\n    }\n\n    if (min != null && cm && this.collapsed) regChange(cm, min, max + 1);\n    this.lines.length = 0;\n    this.explicitlyCleared = true;\n    if (this.atomic && this.doc.cantEdit) {\n      this.doc.cantEdit = false;\n      if (cm) reCheckSelection(cm.doc);\n    }\n    if (cm) signalLater(cm, \"markerCleared\", cm, this);\n    if (withOp) endOperation(cm);\n    if (this.parent) this.parent.clear();\n  };\n\n  // Find the position of the marker in the document. Returns a {from,\n  // to} object by default. Side can be passed to get a specific side\n  // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n  // Pos objects returned contain a line object, rather than a line\n  // number (used to prevent looking up the same line twice).\n  TextMarker.prototype.find = function(side, lineObj) {\n    if (side == null && this.type == \"bookmark\") side = 1;\n    var from, to;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (span.from != null) {\n        from = Pos(lineObj ? line : lineNo(line), span.from);\n        if (side == -1) return from;\n      }\n      if (span.to != null) {\n        to = Pos(lineObj ? line : lineNo(line), span.to);\n        if (side == 1) return to;\n      }\n    }\n    return from && {from: from, to: to};\n  };\n\n  // Signals that the marker's widget changed, and surrounding layout\n  // should be recomputed.\n  TextMarker.prototype.changed = function() {\n    var pos = this.find(-1, true), widget = this, cm = this.doc.cm;\n    if (!pos || !cm) return;\n    runInOp(cm, function() {\n      var line = pos.line, lineN = lineNo(pos.line);\n      var view = findViewForLine(cm, lineN);\n      if (view) {\n        clearLineMeasurementCacheFor(view);\n        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n      }\n      cm.curOp.updateMaxLine = true;\n      if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n        var oldHeight = widget.height;\n        widget.height = null;\n        var dHeight = widgetHeight(widget) - oldHeight;\n        if (dHeight)\n          updateLineHeight(line, line.height + dHeight);\n      }\n    });\n  };\n\n  TextMarker.prototype.attachLine = function(line) {\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)\n        (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this);\n    }\n    this.lines.push(line);\n  };\n  TextMarker.prototype.detachLine = function(line) {\n    this.lines.splice(indexOf(this.lines, line), 1);\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n      (op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n    }\n  };\n\n  // Collapsed markers have unique ids, in order to be able to order\n  // them, which is needed for uniquely determining an outer marker\n  // when they overlap (they may nest, but not partially overlap).\n  var nextMarkerId = 0;\n\n  // Create a marker, wire it up to the right lines, and\n  function markText(doc, from, to, options, type) {\n    // Shared markers (across linked documents) are handled separately\n    // (markTextShared will call out to this again, once per\n    // document).\n    if (options && options.shared) return markTextShared(doc, from, to, options, type);\n    // Ensure we are in an operation.\n    if (doc.cm && !doc.cm.curOp) return operation(doc.cm, markText)(doc, from, to, options, type);\n\n    var marker = new TextMarker(doc, type), diff = cmp(from, to);\n    if (options) copyObj(options, marker, false);\n    // Don't connect empty markers unless clearWhenEmpty is false\n    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)\n      return marker;\n    if (marker.replacedWith) {\n      // Showing up as a widget implies collapsed (widget replaces text)\n      marker.collapsed = true;\n      marker.widgetNode = elt(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n      if (!options.handleMouseEvents) marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\");\n      if (options.insertLeft) marker.widgetNode.insertLeft = true;\n    }\n    if (marker.collapsed) {\n      if (conflictingCollapsedRange(doc, from.line, from, to, marker) ||\n          from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))\n        throw new Error(\"Inserting collapsed marker partially overlapping an existing one\");\n      sawCollapsedSpans = true;\n    }\n\n    if (marker.addToHistory)\n      addChangeToHistory(doc, {from: from, to: to, origin: \"markText\"}, doc.sel, NaN);\n\n    var curLine = from.line, cm = doc.cm, updateMaxLine;\n    doc.iter(curLine, to.line + 1, function(line) {\n      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)\n        updateMaxLine = true;\n      if (marker.collapsed && curLine != from.line) updateLineHeight(line, 0);\n      addMarkedSpan(line, new MarkedSpan(marker,\n                                         curLine == from.line ? from.ch : null,\n                                         curLine == to.line ? to.ch : null));\n      ++curLine;\n    });\n    // lineIsHidden depends on the presence of the spans, so needs a second pass\n    if (marker.collapsed) doc.iter(from.line, to.line + 1, function(line) {\n      if (lineIsHidden(doc, line)) updateLineHeight(line, 0);\n    });\n\n    if (marker.clearOnEnter) on(marker, \"beforeCursorEnter\", function() { marker.clear(); });\n\n    if (marker.readOnly) {\n      sawReadOnlySpans = true;\n      if (doc.history.done.length || doc.history.undone.length)\n        doc.clearHistory();\n    }\n    if (marker.collapsed) {\n      marker.id = ++nextMarkerId;\n      marker.atomic = true;\n    }\n    if (cm) {\n      // Sync editor state\n      if (updateMaxLine) cm.curOp.updateMaxLine = true;\n      if (marker.collapsed)\n        regChange(cm, from.line, to.line + 1);\n      else if (marker.className || marker.title || marker.startStyle || marker.endStyle || marker.css)\n        for (var i = from.line; i <= to.line; i++) regLineChange(cm, i, \"text\");\n      if (marker.atomic) reCheckSelection(cm.doc);\n      signalLater(cm, \"markerAdded\", cm, marker);\n    }\n    return marker;\n  }\n\n  // SHARED TEXTMARKERS\n\n  // A shared marker spans multiple linked documents. It is\n  // implemented as a meta-marker-object controlling multiple normal\n  // markers.\n  var SharedTextMarker = CodeMirror.SharedTextMarker = function(markers, primary) {\n    this.markers = markers;\n    this.primary = primary;\n    for (var i = 0; i < markers.length; ++i)\n      markers[i].parent = this;\n  };\n  eventMixin(SharedTextMarker);\n\n  SharedTextMarker.prototype.clear = function() {\n    if (this.explicitlyCleared) return;\n    this.explicitlyCleared = true;\n    for (var i = 0; i < this.markers.length; ++i)\n      this.markers[i].clear();\n    signalLater(this, \"clear\");\n  };\n  SharedTextMarker.prototype.find = function(side, lineObj) {\n    return this.primary.find(side, lineObj);\n  };\n\n  function markTextShared(doc, from, to, options, type) {\n    options = copyObj(options);\n    options.shared = false;\n    var markers = [markText(doc, from, to, options, type)], primary = markers[0];\n    var widget = options.widgetNode;\n    linkedDocs(doc, function(doc) {\n      if (widget) options.widgetNode = widget.cloneNode(true);\n      markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));\n      for (var i = 0; i < doc.linked.length; ++i)\n        if (doc.linked[i].isParent) return;\n      primary = lst(markers);\n    });\n    return new SharedTextMarker(markers, primary);\n  }\n\n  function findSharedMarkers(doc) {\n    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())),\n                         function(m) { return m.parent; });\n  }\n\n  function copySharedMarkers(doc, markers) {\n    for (var i = 0; i < markers.length; i++) {\n      var marker = markers[i], pos = marker.find();\n      var mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to);\n      if (cmp(mFrom, mTo)) {\n        var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n        marker.markers.push(subMark);\n        subMark.parent = marker;\n      }\n    }\n  }\n\n  function detachSharedMarkers(markers) {\n    for (var i = 0; i < markers.length; i++) {\n      var marker = markers[i], linked = [marker.primary.doc];;\n      linkedDocs(marker.primary.doc, function(d) { linked.push(d); });\n      for (var j = 0; j < marker.markers.length; j++) {\n        var subMarker = marker.markers[j];\n        if (indexOf(linked, subMarker.doc) == -1) {\n          subMarker.parent = null;\n          marker.markers.splice(j--, 1);\n        }\n      }\n    }\n  }\n\n  // TEXTMARKER SPANS\n\n  function MarkedSpan(marker, from, to) {\n    this.marker = marker;\n    this.from = from; this.to = to;\n  }\n\n  // Search an array of spans for a span matching the given marker.\n  function getMarkedSpanFor(spans, marker) {\n    if (spans) for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.marker == marker) return span;\n    }\n  }\n  // Remove a span from an array, returning undefined if no spans are\n  // left (we don't store arrays for lines without spans).\n  function removeMarkedSpan(spans, span) {\n    for (var r, i = 0; i < spans.length; ++i)\n      if (spans[i] != span) (r || (r = [])).push(spans[i]);\n    return r;\n  }\n  // Add a span to a line.\n  function addMarkedSpan(line, span) {\n    line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n    span.marker.attachLine(line);\n  }\n\n  // Used for the algorithm that adjusts markers for a change in the\n  // document. These functions cut an array of spans at a given\n  // character position, returning an array of remaining chunks (or\n  // undefined if nothing remains).\n  function markedSpansBefore(old, startCh, isInsert) {\n    if (old) for (var i = 0, nw; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n      if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh);\n        (nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n      }\n    }\n    return nw;\n  }\n  function markedSpansAfter(old, endCh, isInsert) {\n    if (old) for (var i = 0, nw; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n      if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh);\n        (nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh,\n                                              span.to == null ? null : span.to - endCh));\n      }\n    }\n    return nw;\n  }\n\n  // Given a change object, compute the new set of marker spans that\n  // cover the line in which the change took place. Removes spans\n  // entirely within the change, reconnects spans belonging to the\n  // same marker that appear on both sides of the change, and cuts off\n  // spans partially within the change. Returns an array of span\n  // arrays with one element for each line in (after) the change.\n  function stretchSpansOverChange(doc, change) {\n    if (change.full) return null;\n    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n    if (!oldFirst && !oldLast) return null;\n\n    var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0;\n    // Get the spans that 'stick out' on both sides\n    var first = markedSpansBefore(oldFirst, startCh, isInsert);\n    var last = markedSpansAfter(oldLast, endCh, isInsert);\n\n    // Next, merge those two ends\n    var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);\n    if (first) {\n      // Fix up .to properties of first\n      for (var i = 0; i < first.length; ++i) {\n        var span = first[i];\n        if (span.to == null) {\n          var found = getMarkedSpanFor(last, span.marker);\n          if (!found) span.to = startCh;\n          else if (sameLine) span.to = found.to == null ? null : found.to + offset;\n        }\n      }\n    }\n    if (last) {\n      // Fix up .from in last (or move them into first in case of sameLine)\n      for (var i = 0; i < last.length; ++i) {\n        var span = last[i];\n        if (span.to != null) span.to += offset;\n        if (span.from == null) {\n          var found = getMarkedSpanFor(first, span.marker);\n          if (!found) {\n            span.from = offset;\n            if (sameLine) (first || (first = [])).push(span);\n          }\n        } else {\n          span.from += offset;\n          if (sameLine) (first || (first = [])).push(span);\n        }\n      }\n    }\n    // Make sure we didn't create any zero-length spans\n    if (first) first = clearEmptySpans(first);\n    if (last && last != first) last = clearEmptySpans(last);\n\n    var newMarkers = [first];\n    if (!sameLine) {\n      // Fill gap with whole-line-spans\n      var gap = change.text.length - 2, gapMarkers;\n      if (gap > 0 && first)\n        for (var i = 0; i < first.length; ++i)\n          if (first[i].to == null)\n            (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i].marker, null, null));\n      for (var i = 0; i < gap; ++i)\n        newMarkers.push(gapMarkers);\n      newMarkers.push(last);\n    }\n    return newMarkers;\n  }\n\n  // Remove spans that are empty and don't have a clearWhenEmpty\n  // option of false.\n  function clearEmptySpans(spans) {\n    for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)\n        spans.splice(i--, 1);\n    }\n    if (!spans.length) return null;\n    return spans;\n  }\n\n  // Used for un/re-doing changes from the history. Combines the\n  // result of computing the existing spans with the set of spans that\n  // existed in the history (so that deleting around a span and then\n  // undoing brings back the span).\n  function mergeOldSpans(doc, change) {\n    var old = getOldSpans(doc, change);\n    var stretched = stretchSpansOverChange(doc, change);\n    if (!old) return stretched;\n    if (!stretched) return old;\n\n    for (var i = 0; i < old.length; ++i) {\n      var oldCur = old[i], stretchCur = stretched[i];\n      if (oldCur && stretchCur) {\n        spans: for (var j = 0; j < stretchCur.length; ++j) {\n          var span = stretchCur[j];\n          for (var k = 0; k < oldCur.length; ++k)\n            if (oldCur[k].marker == span.marker) continue spans;\n          oldCur.push(span);\n        }\n      } else if (stretchCur) {\n        old[i] = stretchCur;\n      }\n    }\n    return old;\n  }\n\n  // Used to 'clip' out readOnly ranges when making a change.\n  function removeReadOnlyRanges(doc, from, to) {\n    var markers = null;\n    doc.iter(from.line, to.line + 1, function(line) {\n      if (line.markedSpans) for (var i = 0; i < line.markedSpans.length; ++i) {\n        var mark = line.markedSpans[i].marker;\n        if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))\n          (markers || (markers = [])).push(mark);\n      }\n    });\n    if (!markers) return null;\n    var parts = [{from: from, to: to}];\n    for (var i = 0; i < markers.length; ++i) {\n      var mk = markers[i], m = mk.find(0);\n      for (var j = 0; j < parts.length; ++j) {\n        var p = parts[j];\n        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) continue;\n        var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);\n        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)\n          newParts.push({from: p.from, to: m.from});\n        if (dto > 0 || !mk.inclusiveRight && !dto)\n          newParts.push({from: m.to, to: p.to});\n        parts.splice.apply(parts, newParts);\n        j += newParts.length - 1;\n      }\n    }\n    return parts;\n  }\n\n  // Connect or disconnect spans from a line.\n  function detachMarkedSpans(line) {\n    var spans = line.markedSpans;\n    if (!spans) return;\n    for (var i = 0; i < spans.length; ++i)\n      spans[i].marker.detachLine(line);\n    line.markedSpans = null;\n  }\n  function attachMarkedSpans(line, spans) {\n    if (!spans) return;\n    for (var i = 0; i < spans.length; ++i)\n      spans[i].marker.attachLine(line);\n    line.markedSpans = spans;\n  }\n\n  // Helpers used when computing which overlapping collapsed span\n  // counts as the larger one.\n  function extraLeft(marker) { return marker.inclusiveLeft ? -1 : 0; }\n  function extraRight(marker) { return marker.inclusiveRight ? 1 : 0; }\n\n  // Returns a number indicating which of two overlapping collapsed\n  // spans is larger (and thus includes the other). Falls back to\n  // comparing ids when the spans cover exactly the same range.\n  function compareCollapsedMarkers(a, b) {\n    var lenDiff = a.lines.length - b.lines.length;\n    if (lenDiff != 0) return lenDiff;\n    var aPos = a.find(), bPos = b.find();\n    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n    if (fromCmp) return -fromCmp;\n    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n    if (toCmp) return toCmp;\n    return b.id - a.id;\n  }\n\n  // Find out whether a line ends or starts in a collapsed span. If\n  // so, return the marker for that span.\n  function collapsedSpanAtSide(line, start) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) for (var sp, i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (sp.marker.collapsed && (start ? sp.from : sp.to) == null &&\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0))\n        found = sp.marker;\n    }\n    return found;\n  }\n  function collapsedSpanAtStart(line) { return collapsedSpanAtSide(line, true); }\n  function collapsedSpanAtEnd(line) { return collapsedSpanAtSide(line, false); }\n\n  // Test whether there exists a collapsed span that partially\n  // overlaps (covers the start or end, but not both) of a new span.\n  // Such overlap is not allowed.\n  function conflictingCollapsedRange(doc, lineNo, from, to, marker) {\n    var line = getLine(doc, lineNo);\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) for (var i = 0; i < sps.length; ++i) {\n      var sp = sps[i];\n      if (!sp.marker.collapsed) continue;\n      var found = sp.marker.find(0);\n      var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n      var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n      if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) continue;\n      if (fromCmp <= 0 && (cmp(found.to, from) > 0 || (sp.marker.inclusiveRight && marker.inclusiveLeft)) ||\n          fromCmp >= 0 && (cmp(found.from, to) < 0 || (sp.marker.inclusiveLeft && marker.inclusiveRight)))\n        return true;\n    }\n  }\n\n  // A visual line is a line as drawn on the screen. Folding, for\n  // example, can cause multiple logical lines to appear on the same\n  // visual line. This finds the start of the visual line that the\n  // given line is part of (usually that is the line itself).\n  function visualLine(line) {\n    var merged;\n    while (merged = collapsedSpanAtStart(line))\n      line = merged.find(-1, true).line;\n    return line;\n  }\n\n  // Returns an array of logical lines that continue the visual line\n  // started by the argument, or undefined if there are no such lines.\n  function visualLineContinued(line) {\n    var merged, lines;\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line;\n      (lines || (lines = [])).push(line);\n    }\n    return lines;\n  }\n\n  // Get the line number of the start of the visual line that the\n  // given line number is part of.\n  function visualLineNo(doc, lineN) {\n    var line = getLine(doc, lineN), vis = visualLine(line);\n    if (line == vis) return lineN;\n    return lineNo(vis);\n  }\n  // Get the line number of the start of the next visual line after\n  // the given line.\n  function visualLineEndNo(doc, lineN) {\n    if (lineN > doc.lastLine()) return lineN;\n    var line = getLine(doc, lineN), merged;\n    if (!lineIsHidden(doc, line)) return lineN;\n    while (merged = collapsedSpanAtEnd(line))\n      line = merged.find(1, true).line;\n    return lineNo(line) + 1;\n  }\n\n  // Compute whether a line is hidden. Lines count as hidden when they\n  // are part of a visual line that starts with another line, or when\n  // they are entirely covered by collapsed, non-widget span.\n  function lineIsHidden(doc, line) {\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) for (var sp, i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (!sp.marker.collapsed) continue;\n      if (sp.from == null) return true;\n      if (sp.marker.widgetNode) continue;\n      if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))\n        return true;\n    }\n  }\n  function lineIsHiddenInner(doc, line, span) {\n    if (span.to == null) {\n      var end = span.marker.find(1, true);\n      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker));\n    }\n    if (span.marker.inclusiveRight && span.to == line.text.length)\n      return true;\n    for (var sp, i = 0; i < line.markedSpans.length; ++i) {\n      sp = line.markedSpans[i];\n      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to &&\n          (sp.to == null || sp.to != span.from) &&\n          (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&\n          lineIsHiddenInner(doc, line, sp)) return true;\n    }\n  }\n\n  // LINE WIDGETS\n\n  // Line widgets are block elements displayed above or below a line.\n\n  var LineWidget = CodeMirror.LineWidget = function(doc, node, options) {\n    if (options) for (var opt in options) if (options.hasOwnProperty(opt))\n      this[opt] = options[opt];\n    this.doc = doc;\n    this.node = node;\n  };\n  eventMixin(LineWidget);\n\n  function adjustScrollWhenAboveVisible(cm, line, diff) {\n    if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))\n      addToScrollPos(cm, null, diff);\n  }\n\n  LineWidget.prototype.clear = function() {\n    var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);\n    if (no == null || !ws) return;\n    for (var i = 0; i < ws.length; ++i) if (ws[i] == this) ws.splice(i--, 1);\n    if (!ws.length) line.widgets = null;\n    var height = widgetHeight(this);\n    updateLineHeight(line, Math.max(0, line.height - height));\n    if (cm) runInOp(cm, function() {\n      adjustScrollWhenAboveVisible(cm, line, -height);\n      regLineChange(cm, no, \"widget\");\n    });\n  };\n  LineWidget.prototype.changed = function() {\n    var oldH = this.height, cm = this.doc.cm, line = this.line;\n    this.height = null;\n    var diff = widgetHeight(this) - oldH;\n    if (!diff) return;\n    updateLineHeight(line, line.height + diff);\n    if (cm) runInOp(cm, function() {\n      cm.curOp.forceUpdate = true;\n      adjustScrollWhenAboveVisible(cm, line, diff);\n    });\n  };\n\n  function widgetHeight(widget) {\n    if (widget.height != null) return widget.height;\n    var cm = widget.doc.cm;\n    if (!cm) return 0;\n    if (!contains(document.body, widget.node)) {\n      var parentStyle = \"position: relative;\";\n      if (widget.coverGutter)\n        parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\";\n      if (widget.noHScroll)\n        parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\";\n      removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n    }\n    return widget.height = widget.node.offsetHeight;\n  }\n\n  function addLineWidget(doc, handle, node, options) {\n    var widget = new LineWidget(doc, node, options);\n    var cm = doc.cm;\n    if (cm && widget.noHScroll) cm.display.alignWidgets = true;\n    changeLine(doc, handle, \"widget\", function(line) {\n      var widgets = line.widgets || (line.widgets = []);\n      if (widget.insertAt == null) widgets.push(widget);\n      else widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget);\n      widget.line = line;\n      if (cm && !lineIsHidden(doc, line)) {\n        var aboveVisible = heightAtLine(line) < doc.scrollTop;\n        updateLineHeight(line, line.height + widgetHeight(widget));\n        if (aboveVisible) addToScrollPos(cm, null, widget.height);\n        cm.curOp.forceUpdate = true;\n      }\n      return true;\n    });\n    return widget;\n  }\n\n  // LINE DATA STRUCTURE\n\n  // Line objects. These hold state related to a line, including\n  // highlighting info (the styles array).\n  var Line = CodeMirror.Line = function(text, markedSpans, estimateHeight) {\n    this.text = text;\n    attachMarkedSpans(this, markedSpans);\n    this.height = estimateHeight ? estimateHeight(this) : 1;\n  };\n  eventMixin(Line);\n  Line.prototype.lineNo = function() { return lineNo(this); };\n\n  // Change the content (text, markers) of a line. Automatically\n  // invalidates cached information and tries to re-estimate the\n  // line's height.\n  function updateLine(line, text, markedSpans, estimateHeight) {\n    line.text = text;\n    if (line.stateAfter) line.stateAfter = null;\n    if (line.styles) line.styles = null;\n    if (line.order != null) line.order = null;\n    detachMarkedSpans(line);\n    attachMarkedSpans(line, markedSpans);\n    var estHeight = estimateHeight ? estimateHeight(line) : 1;\n    if (estHeight != line.height) updateLineHeight(line, estHeight);\n  }\n\n  // Detach a line from the document tree and its markers.\n  function cleanUpLine(line) {\n    line.parent = null;\n    detachMarkedSpans(line);\n  }\n\n  function extractLineClasses(type, output) {\n    if (type) for (;;) {\n      var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n      if (!lineClass) break;\n      type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n      var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n      if (output[prop] == null)\n        output[prop] = lineClass[2];\n      else if (!(new RegExp(\"(?:^|\\s)\" + lineClass[2] + \"(?:$|\\s)\")).test(output[prop]))\n        output[prop] += \" \" + lineClass[2];\n    }\n    return type;\n  }\n\n  function callBlankLine(mode, state) {\n    if (mode.blankLine) return mode.blankLine(state);\n    if (!mode.innerMode) return;\n    var inner = CodeMirror.innerMode(mode, state);\n    if (inner.mode.blankLine) return inner.mode.blankLine(inner.state);\n  }\n\n  function readToken(mode, stream, state, inner) {\n    for (var i = 0; i < 10; i++) {\n      if (inner) inner[0] = CodeMirror.innerMode(mode, state).mode;\n      var style = mode.token(stream, state);\n      if (stream.pos > stream.start) return style;\n    }\n    throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\");\n  }\n\n  // Utility for getTokenAt and getLineTokens\n  function takeToken(cm, pos, precise, asArray) {\n    function getObj(copy) {\n      return {start: stream.start, end: stream.pos,\n              string: stream.current(),\n              type: style || null,\n              state: copy ? copyState(doc.mode, state) : state};\n    }\n\n    var doc = cm.doc, mode = doc.mode, style;\n    pos = clipPos(doc, pos);\n    var line = getLine(doc, pos.line), state = getStateBefore(cm, pos.line, precise);\n    var stream = new StringStream(line.text, cm.options.tabSize), tokens;\n    if (asArray) tokens = [];\n    while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n      stream.start = stream.pos;\n      style = readToken(mode, stream, state);\n      if (asArray) tokens.push(getObj(true));\n    }\n    return asArray ? tokens : getObj();\n  }\n\n  // Run the given mode's parser over a line, calling f for each token.\n  function runMode(cm, text, mode, state, f, lineClasses, forceToEnd) {\n    var flattenSpans = mode.flattenSpans;\n    if (flattenSpans == null) flattenSpans = cm.options.flattenSpans;\n    var curStart = 0, curStyle = null;\n    var stream = new StringStream(text, cm.options.tabSize), style;\n    var inner = cm.options.addModeClass && [null];\n    if (text == \"\") extractLineClasses(callBlankLine(mode, state), lineClasses);\n    while (!stream.eol()) {\n      if (stream.pos > cm.options.maxHighlightLength) {\n        flattenSpans = false;\n        if (forceToEnd) processLine(cm, text, state, stream.pos);\n        stream.pos = text.length;\n        style = null;\n      } else {\n        style = extractLineClasses(readToken(mode, stream, state, inner), lineClasses);\n      }\n      if (inner) {\n        var mName = inner[0].name;\n        if (mName) style = \"m-\" + (style ? mName + \" \" + style : mName);\n      }\n      if (!flattenSpans || curStyle != style) {\n        while (curStart < stream.start) {\n          curStart = Math.min(stream.start, curStart + 50000);\n          f(curStart, curStyle);\n        }\n        curStyle = style;\n      }\n      stream.start = stream.pos;\n    }\n    while (curStart < stream.pos) {\n      // Webkit seems to refuse to render text nodes longer than 57444 characters\n      var pos = Math.min(stream.pos, curStart + 50000);\n      f(pos, curStyle);\n      curStart = pos;\n    }\n  }\n\n  // Compute a style array (an array starting with a mode generation\n  // -- for invalidation -- followed by pairs of end positions and\n  // style strings), which is used to highlight the tokens on the\n  // line.\n  function highlightLine(cm, line, state, forceToEnd) {\n    // A styles array always starts with a number identifying the\n    // mode/overlays that it is based on (for easy invalidation).\n    var st = [cm.state.modeGen], lineClasses = {};\n    // Compute the base array of styles\n    runMode(cm, line.text, cm.doc.mode, state, function(end, style) {\n      st.push(end, style);\n    }, lineClasses, forceToEnd);\n\n    // Run overlays, adjust style array.\n    for (var o = 0; o < cm.state.overlays.length; ++o) {\n      var overlay = cm.state.overlays[o], i = 1, at = 0;\n      runMode(cm, line.text, overlay.mode, true, function(end, style) {\n        var start = i;\n        // Ensure there's a token end at the current position, and that i points at it\n        while (at < end) {\n          var i_end = st[i];\n          if (i_end > end)\n            st.splice(i, 1, end, st[i+1], i_end);\n          i += 2;\n          at = Math.min(end, i_end);\n        }\n        if (!style) return;\n        if (overlay.opaque) {\n          st.splice(start, i - start, end, \"cm-overlay \" + style);\n          i = start + 2;\n        } else {\n          for (; start < i; start += 2) {\n            var cur = st[start+1];\n            st[start+1] = (cur ? cur + \" \" : \"\") + \"cm-overlay \" + style;\n          }\n        }\n      }, lineClasses);\n    }\n\n    return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null};\n  }\n\n  function getLineStyles(cm, line, updateFrontier) {\n    if (!line.styles || line.styles[0] != cm.state.modeGen) {\n      var state = getStateBefore(cm, lineNo(line));\n      var result = highlightLine(cm, line, line.text.length > cm.options.maxHighlightLength ? copyState(cm.doc.mode, state) : state);\n      line.stateAfter = state;\n      line.styles = result.styles;\n      if (result.classes) line.styleClasses = result.classes;\n      else if (line.styleClasses) line.styleClasses = null;\n      if (updateFrontier === cm.doc.frontier) cm.doc.frontier++;\n    }\n    return line.styles;\n  }\n\n  // Lightweight form of highlight -- proceed over this line and\n  // update state, but don't save a style array. Used for lines that\n  // aren't currently visible.\n  function processLine(cm, text, state, startAt) {\n    var mode = cm.doc.mode;\n    var stream = new StringStream(text, cm.options.tabSize);\n    stream.start = stream.pos = startAt || 0;\n    if (text == \"\") callBlankLine(mode, state);\n    while (!stream.eol()) {\n      readToken(mode, stream, state);\n      stream.start = stream.pos;\n    }\n  }\n\n  // Convert a style as returned by a mode (either null, or a string\n  // containing one or more styles) to a CSS style. This is cached,\n  // and also looks for line-wide styles.\n  var styleToClassCache = {}, styleToClassCacheWithMode = {};\n  function interpretTokenStyle(style, options) {\n    if (!style || /^\\s*$/.test(style)) return null;\n    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n    return cache[style] ||\n      (cache[style] = style.replace(/\\S+/g, \"cm-$&\"));\n  }\n\n  // Render the DOM representation of the text of a line. Also builds\n  // up a 'line map', which points at the DOM nodes that represent\n  // specific stretches of text, and is used by the measuring code.\n  // The returned object contains the DOM node, this map, and\n  // information about line-wide styles that were set by the mode.\n  function buildLineContent(cm, lineView) {\n    // The padding-right forces the element to have a 'border', which\n    // is needed on Webkit to be able to get line-level bounding\n    // rectangles for it (in measureChar).\n    var content = elt(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n    var builder = {pre: elt(\"pre\", [content], \"CodeMirror-line\"), content: content,\n                   col: 0, pos: 0, cm: cm,\n                   splitSpaces: (ie || webkit) && cm.getOption(\"lineWrapping\")};\n    lineView.measure = {};\n\n    // Iterate over the logical lines that make up this visual line.\n    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n      var line = i ? lineView.rest[i - 1] : lineView.line, order;\n      builder.pos = 0;\n      builder.addToken = buildToken;\n      // Optionally wire in some hacks into the token-rendering\n      // algorithm, to deal with browser quirks.\n      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line)))\n        builder.addToken = buildTokenBadBidi(builder.addToken, order);\n      builder.map = [];\n      var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n      insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n      if (line.styleClasses) {\n        if (line.styleClasses.bgClass)\n          builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\");\n        if (line.styleClasses.textClass)\n          builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\");\n      }\n\n      // Ensure at least a single node is present, for measuring.\n      if (builder.map.length == 0)\n        builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure)));\n\n      // Store the map and a cache object for the current logical line\n      if (i == 0) {\n        lineView.measure.map = builder.map;\n        lineView.measure.cache = {};\n      } else {\n        (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map);\n        (lineView.measure.caches || (lineView.measure.caches = [])).push({});\n      }\n    }\n\n    // See issue #2901\n    if (webkit && /\\bcm-tab\\b/.test(builder.content.lastChild.className))\n      builder.content.className = \"cm-tab-wrap-hack\";\n\n    signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n    if (builder.pre.className)\n      builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\");\n\n    return builder;\n  }\n\n  function defaultSpecialCharPlaceholder(ch) {\n    var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n    token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n    token.setAttribute(\"aria-label\", token.title);\n    return token;\n  }\n\n  // Build up the DOM representation for a single token, and add it to\n  // the line map. Takes care to render special characters separately.\n  function buildToken(builder, text, style, startStyle, endStyle, title, css) {\n    if (!text) return;\n    var displayText = builder.splitSpaces ? text.replace(/ {3,}/g, splitSpaces) : text;\n    var special = builder.cm.state.specialChars, mustWrap = false;\n    if (!special.test(text)) {\n      builder.col += text.length;\n      var content = document.createTextNode(displayText);\n      builder.map.push(builder.pos, builder.pos + text.length, content);\n      if (ie && ie_version < 9) mustWrap = true;\n      builder.pos += text.length;\n    } else {\n      var content = document.createDocumentFragment(), pos = 0;\n      while (true) {\n        special.lastIndex = pos;\n        var m = special.exec(text);\n        var skipped = m ? m.index - pos : text.length - pos;\n        if (skipped) {\n          var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n          if (ie && ie_version < 9) content.appendChild(elt(\"span\", [txt]));\n          else content.appendChild(txt);\n          builder.map.push(builder.pos, builder.pos + skipped, txt);\n          builder.col += skipped;\n          builder.pos += skipped;\n        }\n        if (!m) break;\n        pos += skipped + 1;\n        if (m[0] == \"\\t\") {\n          var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;\n          var txt = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n          txt.setAttribute(\"role\", \"presentation\");\n          txt.setAttribute(\"cm-text\", \"\\t\");\n          builder.col += tabWidth;\n        } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n          var txt = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240d\" : \"\\u2424\", \"cm-invalidchar\"));\n          txt.setAttribute(\"cm-text\", m[0]);\n          builder.col += 1;\n        } else {\n          var txt = builder.cm.options.specialCharPlaceholder(m[0]);\n          txt.setAttribute(\"cm-text\", m[0]);\n          if (ie && ie_version < 9) content.appendChild(elt(\"span\", [txt]));\n          else content.appendChild(txt);\n          builder.col += 1;\n        }\n        builder.map.push(builder.pos, builder.pos + 1, txt);\n        builder.pos++;\n      }\n    }\n    if (style || startStyle || endStyle || mustWrap || css) {\n      var fullStyle = style || \"\";\n      if (startStyle) fullStyle += startStyle;\n      if (endStyle) fullStyle += endStyle;\n      var token = elt(\"span\", [content], fullStyle, css);\n      if (title) token.title = title;\n      return builder.content.appendChild(token);\n    }\n    builder.content.appendChild(content);\n  }\n\n  function splitSpaces(old) {\n    var out = \" \";\n    for (var i = 0; i < old.length - 2; ++i) out += i % 2 ? \" \" : \"\\u00a0\";\n    out += \" \";\n    return out;\n  }\n\n  // Work around nonsense dimensions being reported for stretches of\n  // right-to-left text.\n  function buildTokenBadBidi(inner, order) {\n    return function(builder, text, style, startStyle, endStyle, title, css) {\n      style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n      var start = builder.pos, end = start + text.length;\n      for (;;) {\n        // Find the part that overlaps with the start of this text\n        for (var i = 0; i < order.length; i++) {\n          var part = order[i];\n          if (part.to > start && part.from <= start) break;\n        }\n        if (part.to >= end) return inner(builder, text, style, startStyle, endStyle, title, css);\n        inner(builder, text.slice(0, part.to - start), style, startStyle, null, title, css);\n        startStyle = null;\n        text = text.slice(part.to - start);\n        start = part.to;\n      }\n    };\n  }\n\n  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n    var widget = !ignoreWidget && marker.widgetNode;\n    if (widget) builder.map.push(builder.pos, builder.pos + size, widget);\n    if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n      if (!widget)\n        widget = builder.content.appendChild(document.createElement(\"span\"));\n      widget.setAttribute(\"cm-marker\", marker.id);\n    }\n    if (widget) {\n      builder.cm.display.input.setUneditable(widget);\n      builder.content.appendChild(widget);\n    }\n    builder.pos += size;\n  }\n\n  // Outputs a number of spans to make up a line, taking highlighting\n  // and marked text into account.\n  function insertLineContent(line, builder, styles) {\n    var spans = line.markedSpans, allText = line.text, at = 0;\n    if (!spans) {\n      for (var i = 1; i < styles.length; i+=2)\n        builder.addToken(builder, allText.slice(at, at = styles[i]), interpretTokenStyle(styles[i+1], builder.cm.options));\n      return;\n    }\n\n    var len = allText.length, pos = 0, i = 1, text = \"\", style, css;\n    var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, title, collapsed;\n    for (;;) {\n      if (nextChange == pos) { // Update current marker set\n        spanStyle = spanEndStyle = spanStartStyle = title = css = \"\";\n        collapsed = null; nextChange = Infinity;\n        var foundBookmarks = [];\n        for (var j = 0; j < spans.length; ++j) {\n          var sp = spans[j], m = sp.marker;\n          if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n            foundBookmarks.push(m);\n          } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n            if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n              nextChange = sp.to;\n              spanEndStyle = \"\";\n            }\n            if (m.className) spanStyle += \" \" + m.className;\n            if (m.css) css = m.css;\n            if (m.startStyle && sp.from == pos) spanStartStyle += \" \" + m.startStyle;\n            if (m.endStyle && sp.to == nextChange) spanEndStyle += \" \" + m.endStyle;\n            if (m.title && !title) title = m.title;\n            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))\n              collapsed = sp;\n          } else if (sp.from > pos && nextChange > sp.from) {\n            nextChange = sp.from;\n          }\n        }\n        if (collapsed && (collapsed.from || 0) == pos) {\n          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos,\n                             collapsed.marker, collapsed.from == null);\n          if (collapsed.to == null) return;\n          if (collapsed.to == pos) collapsed = false;\n        }\n        if (!collapsed && foundBookmarks.length) for (var j = 0; j < foundBookmarks.length; ++j)\n          buildCollapsedSpan(builder, 0, foundBookmarks[j]);\n      }\n      if (pos >= len) break;\n\n      var upto = Math.min(len, nextChange);\n      while (true) {\n        if (text) {\n          var end = pos + text.length;\n          if (!collapsed) {\n            var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,\n                             spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", title, css);\n          }\n          if (end >= upto) {text = text.slice(upto - pos); pos = upto; break;}\n          pos = end;\n          spanStartStyle = \"\";\n        }\n        text = allText.slice(at, at = styles[i++]);\n        style = interpretTokenStyle(styles[i++], builder.cm.options);\n      }\n    }\n  }\n\n  // DOCUMENT DATA STRUCTURE\n\n  // By default, updates that start and end at the beginning of a line\n  // are treated specially, in order to make the association of line\n  // widgets and marker elements with the text behave more intuitive.\n  function isWholeLineUpdate(doc, change) {\n    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" &&\n      (!doc.cm || doc.cm.options.wholeLineUpdateBefore);\n  }\n\n  // Perform a change on the document data structure.\n  function updateDoc(doc, change, markedSpans, estimateHeight) {\n    function spansFor(n) {return markedSpans ? markedSpans[n] : null;}\n    function update(line, text, spans) {\n      updateLine(line, text, spans, estimateHeight);\n      signalLater(line, \"change\", line, change);\n    }\n    function linesFor(start, end) {\n      for (var i = start, result = []; i < end; ++i)\n        result.push(new Line(text[i], spansFor(i), estimateHeight));\n      return result;\n    }\n\n    var from = change.from, to = change.to, text = change.text;\n    var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line);\n    var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;\n\n    // Adjust the line structure\n    if (change.full) {\n      doc.insert(0, linesFor(0, text.length));\n      doc.remove(text.length, doc.size - text.length);\n    } else if (isWholeLineUpdate(doc, change)) {\n      // This is a whole-line replace. Treated specially to make\n      // sure line objects move the way they are supposed to.\n      var added = linesFor(0, text.length - 1);\n      update(lastLine, lastLine.text, lastSpans);\n      if (nlines) doc.remove(from.line, nlines);\n      if (added.length) doc.insert(from.line, added);\n    } else if (firstLine == lastLine) {\n      if (text.length == 1) {\n        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n      } else {\n        var added = linesFor(1, text.length - 1);\n        added.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight));\n        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n        doc.insert(from.line + 1, added);\n      }\n    } else if (text.length == 1) {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n      doc.remove(from.line + 1, nlines);\n    } else {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n      var added = linesFor(1, text.length - 1);\n      if (nlines > 1) doc.remove(from.line + 1, nlines - 1);\n      doc.insert(from.line + 1, added);\n    }\n\n    signalLater(doc, \"change\", doc, change);\n  }\n\n  // The document is represented as a BTree consisting of leaves, with\n  // chunk of lines in them, and branches, with up to ten leaves or\n  // other branch nodes below them. The top node is always a branch\n  // node, and is the document object itself (meaning it has\n  // additional methods and properties).\n  //\n  // All nodes have parent links. The tree is used both to go from\n  // line numbers to line objects, and to go from objects to numbers.\n  // It also indexes by height, and is used to convert between height\n  // and line object, and to find the total height of the document.\n  //\n  // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\n  function LeafChunk(lines) {\n    this.lines = lines;\n    this.parent = null;\n    for (var i = 0, height = 0; i < lines.length; ++i) {\n      lines[i].parent = this;\n      height += lines[i].height;\n    }\n    this.height = height;\n  }\n\n  LeafChunk.prototype = {\n    chunkSize: function() { return this.lines.length; },\n    // Remove the n lines at offset 'at'.\n    removeInner: function(at, n) {\n      for (var i = at, e = at + n; i < e; ++i) {\n        var line = this.lines[i];\n        this.height -= line.height;\n        cleanUpLine(line);\n        signalLater(line, \"delete\");\n      }\n      this.lines.splice(at, n);\n    },\n    // Helper used to collapse a small branch into a single leaf.\n    collapse: function(lines) {\n      lines.push.apply(lines, this.lines);\n    },\n    // Insert the given array of lines at offset 'at', count them as\n    // having the given height.\n    insertInner: function(at, lines, height) {\n      this.height += height;\n      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n      for (var i = 0; i < lines.length; ++i) lines[i].parent = this;\n    },\n    // Used to iterate over a part of the tree.\n    iterN: function(at, n, op) {\n      for (var e = at + n; at < e; ++at)\n        if (op(this.lines[at])) return true;\n    }\n  };\n\n  function BranchChunk(children) {\n    this.children = children;\n    var size = 0, height = 0;\n    for (var i = 0; i < children.length; ++i) {\n      var ch = children[i];\n      size += ch.chunkSize(); height += ch.height;\n      ch.parent = this;\n    }\n    this.size = size;\n    this.height = height;\n    this.parent = null;\n  }\n\n  BranchChunk.prototype = {\n    chunkSize: function() { return this.size; },\n    removeInner: function(at, n) {\n      this.size -= n;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var rm = Math.min(n, sz - at), oldHeight = child.height;\n          child.removeInner(at, rm);\n          this.height -= oldHeight - child.height;\n          if (sz == rm) { this.children.splice(i--, 1); child.parent = null; }\n          if ((n -= rm) == 0) break;\n          at = 0;\n        } else at -= sz;\n      }\n      // If the result is smaller than 25 lines, ensure that it is a\n      // single leaf node.\n      if (this.size - n < 25 &&\n          (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n        var lines = [];\n        this.collapse(lines);\n        this.children = [new LeafChunk(lines)];\n        this.children[0].parent = this;\n      }\n    },\n    collapse: function(lines) {\n      for (var i = 0; i < this.children.length; ++i) this.children[i].collapse(lines);\n    },\n    insertInner: function(at, lines, height) {\n      this.size += lines.length;\n      this.height += height;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at <= sz) {\n          child.insertInner(at, lines, height);\n          if (child.lines && child.lines.length > 50) {\n            while (child.lines.length > 50) {\n              var spilled = child.lines.splice(child.lines.length - 25, 25);\n              var newleaf = new LeafChunk(spilled);\n              child.height -= newleaf.height;\n              this.children.splice(i + 1, 0, newleaf);\n              newleaf.parent = this;\n            }\n            this.maybeSpill();\n          }\n          break;\n        }\n        at -= sz;\n      }\n    },\n    // When a node has grown, check whether it should be split.\n    maybeSpill: function() {\n      if (this.children.length <= 10) return;\n      var me = this;\n      do {\n        var spilled = me.children.splice(me.children.length - 5, 5);\n        var sibling = new BranchChunk(spilled);\n        if (!me.parent) { // Become the parent node\n          var copy = new BranchChunk(me.children);\n          copy.parent = me;\n          me.children = [copy, sibling];\n          me = copy;\n        } else {\n          me.size -= sibling.size;\n          me.height -= sibling.height;\n          var myIndex = indexOf(me.parent.children, me);\n          me.parent.children.splice(myIndex + 1, 0, sibling);\n        }\n        sibling.parent = me.parent;\n      } while (me.children.length > 10);\n      me.parent.maybeSpill();\n    },\n    iterN: function(at, n, op) {\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var used = Math.min(n, sz - at);\n          if (child.iterN(at, used, op)) return true;\n          if ((n -= used) == 0) break;\n          at = 0;\n        } else at -= sz;\n      }\n    }\n  };\n\n  var nextDocId = 0;\n  var Doc = CodeMirror.Doc = function(text, mode, firstLine, lineSep) {\n    if (!(this instanceof Doc)) return new Doc(text, mode, firstLine, lineSep);\n    if (firstLine == null) firstLine = 0;\n\n    BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n    this.first = firstLine;\n    this.scrollTop = this.scrollLeft = 0;\n    this.cantEdit = false;\n    this.cleanGeneration = 1;\n    this.frontier = firstLine;\n    var start = Pos(firstLine, 0);\n    this.sel = simpleSelection(start);\n    this.history = new History(null);\n    this.id = ++nextDocId;\n    this.modeOption = mode;\n    this.lineSep = lineSep;\n\n    if (typeof text == \"string\") text = this.splitLines(text);\n    updateDoc(this, {from: start, to: start, text: text});\n    setSelection(this, simpleSelection(start), sel_dontScroll);\n  };\n\n  Doc.prototype = createObj(BranchChunk.prototype, {\n    constructor: Doc,\n    // Iterate over the document. Supports two forms -- with only one\n    // argument, it calls that for each line in the document. With\n    // three, it iterates over the range given by the first two (with\n    // the second being non-inclusive).\n    iter: function(from, to, op) {\n      if (op) this.iterN(from - this.first, to - from, op);\n      else this.iterN(this.first, this.first + this.size, from);\n    },\n\n    // Non-public interface for adding and removing lines.\n    insert: function(at, lines) {\n      var height = 0;\n      for (var i = 0; i < lines.length; ++i) height += lines[i].height;\n      this.insertInner(at - this.first, lines, height);\n    },\n    remove: function(at, n) { this.removeInner(at - this.first, n); },\n\n    // From here, the methods are part of the public interface. Most\n    // are also available from CodeMirror (editor) instances.\n\n    getValue: function(lineSep) {\n      var lines = getLines(this, this.first, this.first + this.size);\n      if (lineSep === false) return lines;\n      return lines.join(lineSep || this.lineSeparator());\n    },\n    setValue: docMethodOp(function(code) {\n      var top = Pos(this.first, 0), last = this.first + this.size - 1;\n      makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),\n                        text: this.splitLines(code), origin: \"setValue\", full: true}, true);\n      setSelection(this, simpleSelection(top));\n    }),\n    replaceRange: function(code, from, to, origin) {\n      from = clipPos(this, from);\n      to = to ? clipPos(this, to) : from;\n      replaceRange(this, code, from, to, origin);\n    },\n    getRange: function(from, to, lineSep) {\n      var lines = getBetween(this, clipPos(this, from), clipPos(this, to));\n      if (lineSep === false) return lines;\n      return lines.join(lineSep || this.lineSeparator());\n    },\n\n    getLine: function(line) {var l = this.getLineHandle(line); return l && l.text;},\n\n    getLineHandle: function(line) {if (isLine(this, line)) return getLine(this, line);},\n    getLineNumber: function(line) {return lineNo(line);},\n\n    getLineHandleVisualStart: function(line) {\n      if (typeof line == \"number\") line = getLine(this, line);\n      return visualLine(line);\n    },\n\n    lineCount: function() {return this.size;},\n    firstLine: function() {return this.first;},\n    lastLine: function() {return this.first + this.size - 1;},\n\n    clipPos: function(pos) {return clipPos(this, pos);},\n\n    getCursor: function(start) {\n      var range = this.sel.primary(), pos;\n      if (start == null || start == \"head\") pos = range.head;\n      else if (start == \"anchor\") pos = range.anchor;\n      else if (start == \"end\" || start == \"to\" || start === false) pos = range.to();\n      else pos = range.from();\n      return pos;\n    },\n    listSelections: function() { return this.sel.ranges; },\n    somethingSelected: function() {return this.sel.somethingSelected();},\n\n    setCursor: docMethodOp(function(line, ch, options) {\n      setSimpleSelection(this, clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n    }),\n    setSelection: docMethodOp(function(anchor, head, options) {\n      setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);\n    }),\n    extendSelection: docMethodOp(function(head, other, options) {\n      extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);\n    }),\n    extendSelections: docMethodOp(function(heads, options) {\n      extendSelections(this, clipPosArray(this, heads, options));\n    }),\n    extendSelectionsBy: docMethodOp(function(f, options) {\n      extendSelections(this, map(this.sel.ranges, f), options);\n    }),\n    setSelections: docMethodOp(function(ranges, primary, options) {\n      if (!ranges.length) return;\n      for (var i = 0, out = []; i < ranges.length; i++)\n        out[i] = new Range(clipPos(this, ranges[i].anchor),\n                           clipPos(this, ranges[i].head));\n      if (primary == null) primary = Math.min(ranges.length - 1, this.sel.primIndex);\n      setSelection(this, normalizeSelection(out, primary), options);\n    }),\n    addSelection: docMethodOp(function(anchor, head, options) {\n      var ranges = this.sel.ranges.slice(0);\n      ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));\n      setSelection(this, normalizeSelection(ranges, ranges.length - 1), options);\n    }),\n\n    getSelection: function(lineSep) {\n      var ranges = this.sel.ranges, lines;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        lines = lines ? lines.concat(sel) : sel;\n      }\n      if (lineSep === false) return lines;\n      else return lines.join(lineSep || this.lineSeparator());\n    },\n    getSelections: function(lineSep) {\n      var parts = [], ranges = this.sel.ranges;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        if (lineSep !== false) sel = sel.join(lineSep || this.lineSeparator());\n        parts[i] = sel;\n      }\n      return parts;\n    },\n    replaceSelection: function(code, collapse, origin) {\n      var dup = [];\n      for (var i = 0; i < this.sel.ranges.length; i++)\n        dup[i] = code;\n      this.replaceSelections(dup, collapse, origin || \"+input\");\n    },\n    replaceSelections: docMethodOp(function(code, collapse, origin) {\n      var changes = [], sel = this.sel;\n      for (var i = 0; i < sel.ranges.length; i++) {\n        var range = sel.ranges[i];\n        changes[i] = {from: range.from(), to: range.to(), text: this.splitLines(code[i]), origin: origin};\n      }\n      var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n      for (var i = changes.length - 1; i >= 0; i--)\n        makeChange(this, changes[i]);\n      if (newSel) setSelectionReplaceHistory(this, newSel);\n      else if (this.cm) ensureCursorVisible(this.cm);\n    }),\n    undo: docMethodOp(function() {makeChangeFromHistory(this, \"undo\");}),\n    redo: docMethodOp(function() {makeChangeFromHistory(this, \"redo\");}),\n    undoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"undo\", true);}),\n    redoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"redo\", true);}),\n\n    setExtending: function(val) {this.extend = val;},\n    getExtending: function() {return this.extend;},\n\n    historySize: function() {\n      var hist = this.history, done = 0, undone = 0;\n      for (var i = 0; i < hist.done.length; i++) if (!hist.done[i].ranges) ++done;\n      for (var i = 0; i < hist.undone.length; i++) if (!hist.undone[i].ranges) ++undone;\n      return {undo: done, redo: undone};\n    },\n    clearHistory: function() {this.history = new History(this.history.maxGeneration);},\n\n    markClean: function() {\n      this.cleanGeneration = this.changeGeneration(true);\n    },\n    changeGeneration: function(forceSplit) {\n      if (forceSplit)\n        this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null;\n      return this.history.generation;\n    },\n    isClean: function (gen) {\n      return this.history.generation == (gen || this.cleanGeneration);\n    },\n\n    getHistory: function() {\n      return {done: copyHistoryArray(this.history.done),\n              undone: copyHistoryArray(this.history.undone)};\n    },\n    setHistory: function(histData) {\n      var hist = this.history = new History(this.history.maxGeneration);\n      hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n    },\n\n    addLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function(line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        if (!line[prop]) line[prop] = cls;\n        else if (classTest(cls).test(line[prop])) return false;\n        else line[prop] += \" \" + cls;\n        return true;\n      });\n    }),\n    removeLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function(line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        var cur = line[prop];\n        if (!cur) return false;\n        else if (cls == null) line[prop] = null;\n        else {\n          var found = cur.match(classTest(cls));\n          if (!found) return false;\n          var end = found.index + found[0].length;\n          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n        }\n        return true;\n      });\n    }),\n\n    addLineWidget: docMethodOp(function(handle, node, options) {\n      return addLineWidget(this, handle, node, options);\n    }),\n    removeLineWidget: function(widget) { widget.clear(); },\n\n    markText: function(from, to, options) {\n      return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || \"range\");\n    },\n    setBookmark: function(pos, options) {\n      var realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),\n                      insertLeft: options && options.insertLeft,\n                      clearWhenEmpty: false, shared: options && options.shared,\n                      handleMouseEvents: options && options.handleMouseEvents};\n      pos = clipPos(this, pos);\n      return markText(this, pos, pos, realOpts, \"bookmark\");\n    },\n    findMarksAt: function(pos) {\n      pos = clipPos(this, pos);\n      var markers = [], spans = getLine(this, pos.line).markedSpans;\n      if (spans) for (var i = 0; i < spans.length; ++i) {\n        var span = spans[i];\n        if ((span.from == null || span.from <= pos.ch) &&\n            (span.to == null || span.to >= pos.ch))\n          markers.push(span.marker.parent || span.marker);\n      }\n      return markers;\n    },\n    findMarks: function(from, to, filter) {\n      from = clipPos(this, from); to = clipPos(this, to);\n      var found = [], lineNo = from.line;\n      this.iter(from.line, to.line + 1, function(line) {\n        var spans = line.markedSpans;\n        if (spans) for (var i = 0; i < spans.length; i++) {\n          var span = spans[i];\n          if (!(lineNo == from.line && from.ch > span.to ||\n                span.from == null && lineNo != from.line||\n                lineNo == to.line && span.from > to.ch) &&\n              (!filter || filter(span.marker)))\n            found.push(span.marker.parent || span.marker);\n        }\n        ++lineNo;\n      });\n      return found;\n    },\n    getAllMarks: function() {\n      var markers = [];\n      this.iter(function(line) {\n        var sps = line.markedSpans;\n        if (sps) for (var i = 0; i < sps.length; ++i)\n          if (sps[i].from != null) markers.push(sps[i].marker);\n      });\n      return markers;\n    },\n\n    posFromIndex: function(off) {\n      var ch, lineNo = this.first;\n      this.iter(function(line) {\n        var sz = line.text.length + 1;\n        if (sz > off) { ch = off; return true; }\n        off -= sz;\n        ++lineNo;\n      });\n      return clipPos(this, Pos(lineNo, ch));\n    },\n    indexFromPos: function (coords) {\n      coords = clipPos(this, coords);\n      var index = coords.ch;\n      if (coords.line < this.first || coords.ch < 0) return 0;\n      this.iter(this.first, coords.line, function (line) {\n        index += line.text.length + 1;\n      });\n      return index;\n    },\n\n    copy: function(copyHistory) {\n      var doc = new Doc(getLines(this, this.first, this.first + this.size),\n                        this.modeOption, this.first, this.lineSep);\n      doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft;\n      doc.sel = this.sel;\n      doc.extend = false;\n      if (copyHistory) {\n        doc.history.undoDepth = this.history.undoDepth;\n        doc.setHistory(this.getHistory());\n      }\n      return doc;\n    },\n\n    linkedDoc: function(options) {\n      if (!options) options = {};\n      var from = this.first, to = this.first + this.size;\n      if (options.from != null && options.from > from) from = options.from;\n      if (options.to != null && options.to < to) to = options.to;\n      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep);\n      if (options.sharedHist) copy.history = this.history;\n      (this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist});\n      copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}];\n      copySharedMarkers(copy, findSharedMarkers(this));\n      return copy;\n    },\n    unlinkDoc: function(other) {\n      if (other instanceof CodeMirror) other = other.doc;\n      if (this.linked) for (var i = 0; i < this.linked.length; ++i) {\n        var link = this.linked[i];\n        if (link.doc != other) continue;\n        this.linked.splice(i, 1);\n        other.unlinkDoc(this);\n        detachSharedMarkers(findSharedMarkers(this));\n        break;\n      }\n      // If the histories were shared, split them again\n      if (other.history == this.history) {\n        var splitIds = [other.id];\n        linkedDocs(other, function(doc) {splitIds.push(doc.id);}, true);\n        other.history = new History(null);\n        other.history.done = copyHistoryArray(this.history.done, splitIds);\n        other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n      }\n    },\n    iterLinkedDocs: function(f) {linkedDocs(this, f);},\n\n    getMode: function() {return this.mode;},\n    getEditor: function() {return this.cm;},\n\n    splitLines: function(str) {\n      if (this.lineSep) return str.split(this.lineSep);\n      return splitLinesAuto(str);\n    },\n    lineSeparator: function() { return this.lineSep || \"\\n\"; }\n  });\n\n  // Public alias.\n  Doc.prototype.eachLine = Doc.prototype.iter;\n\n  // Set up methods on CodeMirror's prototype to redirect to the editor's document.\n  var dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\n  for (var prop in Doc.prototype) if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)\n    CodeMirror.prototype[prop] = (function(method) {\n      return function() {return method.apply(this.doc, arguments);};\n    })(Doc.prototype[prop]);\n\n  eventMixin(Doc);\n\n  // Call f for all linked documents.\n  function linkedDocs(doc, f, sharedHistOnly) {\n    function propagate(doc, skip, sharedHist) {\n      if (doc.linked) for (var i = 0; i < doc.linked.length; ++i) {\n        var rel = doc.linked[i];\n        if (rel.doc == skip) continue;\n        var shared = sharedHist && rel.sharedHist;\n        if (sharedHistOnly && !shared) continue;\n        f(rel.doc, shared);\n        propagate(rel.doc, doc, shared);\n      }\n    }\n    propagate(doc, null, true);\n  }\n\n  // Attach a document to an editor.\n  function attachDoc(cm, doc) {\n    if (doc.cm) throw new Error(\"This document is already in use.\");\n    cm.doc = doc;\n    doc.cm = cm;\n    estimateLineHeights(cm);\n    loadMode(cm);\n    if (!cm.options.lineWrapping) findMaxLine(cm);\n    cm.options.mode = doc.modeOption;\n    regChange(cm);\n  }\n\n  // LINE UTILITIES\n\n  // Find the line object corresponding to the given line number.\n  function getLine(doc, n) {\n    n -= doc.first;\n    if (n < 0 || n >= doc.size) throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\");\n    for (var chunk = doc; !chunk.lines;) {\n      for (var i = 0;; ++i) {\n        var child = chunk.children[i], sz = child.chunkSize();\n        if (n < sz) { chunk = child; break; }\n        n -= sz;\n      }\n    }\n    return chunk.lines[n];\n  }\n\n  // Get the part of a document between two positions, as an array of\n  // strings.\n  function getBetween(doc, start, end) {\n    var out = [], n = start.line;\n    doc.iter(start.line, end.line + 1, function(line) {\n      var text = line.text;\n      if (n == end.line) text = text.slice(0, end.ch);\n      if (n == start.line) text = text.slice(start.ch);\n      out.push(text);\n      ++n;\n    });\n    return out;\n  }\n  // Get the lines between from and to, as array of strings.\n  function getLines(doc, from, to) {\n    var out = [];\n    doc.iter(from, to, function(line) { out.push(line.text); });\n    return out;\n  }\n\n  // Update the height of a line, propagating the height change\n  // upwards to parent nodes.\n  function updateLineHeight(line, height) {\n    var diff = height - line.height;\n    if (diff) for (var n = line; n; n = n.parent) n.height += diff;\n  }\n\n  // Given a line object, find its line number by walking up through\n  // its parent links.\n  function lineNo(line) {\n    if (line.parent == null) return null;\n    var cur = line.parent, no = indexOf(cur.lines, line);\n    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n      for (var i = 0;; ++i) {\n        if (chunk.children[i] == cur) break;\n        no += chunk.children[i].chunkSize();\n      }\n    }\n    return no + cur.first;\n  }\n\n  // Find the line at the given vertical position, using the height\n  // information in the document tree.\n  function lineAtHeight(chunk, h) {\n    var n = chunk.first;\n    outer: do {\n      for (var i = 0; i < chunk.children.length; ++i) {\n        var child = chunk.children[i], ch = child.height;\n        if (h < ch) { chunk = child; continue outer; }\n        h -= ch;\n        n += child.chunkSize();\n      }\n      return n;\n    } while (!chunk.lines);\n    for (var i = 0; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i], lh = line.height;\n      if (h < lh) break;\n      h -= lh;\n    }\n    return n + i;\n  }\n\n\n  // Find the height above the given line.\n  function heightAtLine(lineObj) {\n    lineObj = visualLine(lineObj);\n\n    var h = 0, chunk = lineObj.parent;\n    for (var i = 0; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i];\n      if (line == lineObj) break;\n      else h += line.height;\n    }\n    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n      for (var i = 0; i < p.children.length; ++i) {\n        var cur = p.children[i];\n        if (cur == chunk) break;\n        else h += cur.height;\n      }\n    }\n    return h;\n  }\n\n  // Get the bidi ordering for the given line (and cache it). Returns\n  // false for lines that are fully left-to-right, and an array of\n  // BidiSpan objects otherwise.\n  function getOrder(line) {\n    var order = line.order;\n    if (order == null) order = line.order = bidiOrdering(line.text);\n    return order;\n  }\n\n  // HISTORY\n\n  function History(startGen) {\n    // Arrays of change events and selections. Doing something adds an\n    // event to done and clears undo. Undoing moves events from done\n    // to undone, redoing moves them in the other direction.\n    this.done = []; this.undone = [];\n    this.undoDepth = Infinity;\n    // Used to track when changes can be merged into a single undo\n    // event\n    this.lastModTime = this.lastSelTime = 0;\n    this.lastOp = this.lastSelOp = null;\n    this.lastOrigin = this.lastSelOrigin = null;\n    // Used by the isClean() method\n    this.generation = this.maxGeneration = startGen || 1;\n  }\n\n  // Create a history change event from an updateDoc-style change\n  // object.\n  function historyChangeFromChange(doc, change) {\n    var histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)};\n    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    linkedDocs(doc, function(doc) {attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);}, true);\n    return histChange;\n  }\n\n  // Pop all selection events off the end of a history array. Stop at\n  // a change event.\n  function clearSelectionEvents(array) {\n    while (array.length) {\n      var last = lst(array);\n      if (last.ranges) array.pop();\n      else break;\n    }\n  }\n\n  // Find the top change event in the history. Pop off selection\n  // events that are in the way.\n  function lastChangeEvent(hist, force) {\n    if (force) {\n      clearSelectionEvents(hist.done);\n      return lst(hist.done);\n    } else if (hist.done.length && !lst(hist.done).ranges) {\n      return lst(hist.done);\n    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n      hist.done.pop();\n      return lst(hist.done);\n    }\n  }\n\n  // Register a change in the history. Merges changes that are within\n  // a single operation, ore are close together with an origin that\n  // allows merging (starting with \"+\") into a single event.\n  function addChangeToHistory(doc, change, selAfter, opId) {\n    var hist = doc.history;\n    hist.undone.length = 0;\n    var time = +new Date, cur;\n\n    if ((hist.lastOp == opId ||\n         hist.lastOrigin == change.origin && change.origin &&\n         ((change.origin.charAt(0) == \"+\" && doc.cm && hist.lastModTime > time - doc.cm.options.historyEventDelay) ||\n          change.origin.charAt(0) == \"*\")) &&\n        (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n      // Merge this change into the last event\n      var last = lst(cur.changes);\n      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n        // Optimized case for simple insertion -- don't want to add\n        // new changesets for every character typed\n        last.to = changeEnd(change);\n      } else {\n        // Add new sub-event\n        cur.changes.push(historyChangeFromChange(doc, change));\n      }\n    } else {\n      // Can not be merged, start a new event.\n      var before = lst(hist.done);\n      if (!before || !before.ranges)\n        pushSelectionToHistory(doc.sel, hist.done);\n      cur = {changes: [historyChangeFromChange(doc, change)],\n             generation: hist.generation};\n      hist.done.push(cur);\n      while (hist.done.length > hist.undoDepth) {\n        hist.done.shift();\n        if (!hist.done[0].ranges) hist.done.shift();\n      }\n    }\n    hist.done.push(selAfter);\n    hist.generation = ++hist.maxGeneration;\n    hist.lastModTime = hist.lastSelTime = time;\n    hist.lastOp = hist.lastSelOp = opId;\n    hist.lastOrigin = hist.lastSelOrigin = change.origin;\n\n    if (!last) signal(doc, \"historyAdded\");\n  }\n\n  function selectionEventCanBeMerged(doc, origin, prev, sel) {\n    var ch = origin.charAt(0);\n    return ch == \"*\" ||\n      ch == \"+\" &&\n      prev.ranges.length == sel.ranges.length &&\n      prev.somethingSelected() == sel.somethingSelected() &&\n      new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500);\n  }\n\n  // Called whenever the selection changes, sets the new selection as\n  // the pending selection in the history, and pushes the old pending\n  // selection into the 'done' array when it was significantly\n  // different (in number of selected ranges, emptiness, or time).\n  function addSelectionToHistory(doc, sel, opId, options) {\n    var hist = doc.history, origin = options && options.origin;\n\n    // A new event is started when the previous origin does not match\n    // the current, or the origins don't allow matching. Origins\n    // starting with * are always merged, those starting with + are\n    // merged when similar and close together in time.\n    if (opId == hist.lastSelOp ||\n        (origin && hist.lastSelOrigin == origin &&\n         (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin ||\n          selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))\n      hist.done[hist.done.length - 1] = sel;\n    else\n      pushSelectionToHistory(sel, hist.done);\n\n    hist.lastSelTime = +new Date;\n    hist.lastSelOrigin = origin;\n    hist.lastSelOp = opId;\n    if (options && options.clearRedo !== false)\n      clearSelectionEvents(hist.undone);\n  }\n\n  function pushSelectionToHistory(sel, dest) {\n    var top = lst(dest);\n    if (!(top && top.ranges && top.equals(sel)))\n      dest.push(sel);\n  }\n\n  // Used to store marked span information in the history.\n  function attachLocalSpans(doc, change, from, to) {\n    var existing = change[\"spans_\" + doc.id], n = 0;\n    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function(line) {\n      if (line.markedSpans)\n        (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans;\n      ++n;\n    });\n  }\n\n  // When un/re-doing restores text containing marked spans, those\n  // that have been explicitly cleared should not be restored.\n  function removeClearedSpans(spans) {\n    if (!spans) return null;\n    for (var i = 0, out; i < spans.length; ++i) {\n      if (spans[i].marker.explicitlyCleared) { if (!out) out = spans.slice(0, i); }\n      else if (out) out.push(spans[i]);\n    }\n    return !out ? spans : out.length ? out : null;\n  }\n\n  // Retrieve and filter the old marked spans stored in a change event.\n  function getOldSpans(doc, change) {\n    var found = change[\"spans_\" + doc.id];\n    if (!found) return null;\n    for (var i = 0, nw = []; i < change.text.length; ++i)\n      nw.push(removeClearedSpans(found[i]));\n    return nw;\n  }\n\n  // Used both to provide a JSON-safe object in .getHistory, and, when\n  // detaching a document, to split the history in two\n  function copyHistoryArray(events, newGroup, instantiateSel) {\n    for (var i = 0, copy = []; i < events.length; ++i) {\n      var event = events[i];\n      if (event.ranges) {\n        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n        continue;\n      }\n      var changes = event.changes, newChanges = [];\n      copy.push({changes: newChanges});\n      for (var j = 0; j < changes.length; ++j) {\n        var change = changes[j], m;\n        newChanges.push({from: change.from, to: change.to, text: change.text});\n        if (newGroup) for (var prop in change) if (m = prop.match(/^spans_(\\d+)$/)) {\n          if (indexOf(newGroup, Number(m[1])) > -1) {\n            lst(newChanges)[prop] = change[prop];\n            delete change[prop];\n          }\n        }\n      }\n    }\n    return copy;\n  }\n\n  // Rebasing/resetting history to deal with externally-sourced changes\n\n  function rebaseHistSelSingle(pos, from, to, diff) {\n    if (to < pos.line) {\n      pos.line += diff;\n    } else if (from < pos.line) {\n      pos.line = from;\n      pos.ch = 0;\n    }\n  }\n\n  // Tries to rebase an array of history events given a change in the\n  // document. If the change touches the same lines as the event, the\n  // event, and everything 'behind' it, is discarded. If the change is\n  // before the event, the event's positions are updated. Uses a\n  // copy-on-write scheme for the positions, to avoid having to\n  // reallocate them all on every rebase, but also avoid problems with\n  // shared position objects being unsafely updated.\n  function rebaseHistArray(array, from, to, diff) {\n    for (var i = 0; i < array.length; ++i) {\n      var sub = array[i], ok = true;\n      if (sub.ranges) {\n        if (!sub.copied) { sub = array[i] = sub.deepCopy(); sub.copied = true; }\n        for (var j = 0; j < sub.ranges.length; j++) {\n          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n        }\n        continue;\n      }\n      for (var j = 0; j < sub.changes.length; ++j) {\n        var cur = sub.changes[j];\n        if (to < cur.from.line) {\n          cur.from = Pos(cur.from.line + diff, cur.from.ch);\n          cur.to = Pos(cur.to.line + diff, cur.to.ch);\n        } else if (from <= cur.to.line) {\n          ok = false;\n          break;\n        }\n      }\n      if (!ok) {\n        array.splice(0, i + 1);\n        i = 0;\n      }\n    }\n  }\n\n  function rebaseHist(hist, change) {\n    var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;\n    rebaseHistArray(hist.done, from, to, diff);\n    rebaseHistArray(hist.undone, from, to, diff);\n  }\n\n  // EVENT UTILITIES\n\n  // Due to the fact that we still support jurassic IE versions, some\n  // compatibility wrappers are needed.\n\n  var e_preventDefault = CodeMirror.e_preventDefault = function(e) {\n    if (e.preventDefault) e.preventDefault();\n    else e.returnValue = false;\n  };\n  var e_stopPropagation = CodeMirror.e_stopPropagation = function(e) {\n    if (e.stopPropagation) e.stopPropagation();\n    else e.cancelBubble = true;\n  };\n  function e_defaultPrevented(e) {\n    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false;\n  }\n  var e_stop = CodeMirror.e_stop = function(e) {e_preventDefault(e); e_stopPropagation(e);};\n\n  function e_target(e) {return e.target || e.srcElement;}\n  function e_button(e) {\n    var b = e.which;\n    if (b == null) {\n      if (e.button & 1) b = 1;\n      else if (e.button & 2) b = 3;\n      else if (e.button & 4) b = 2;\n    }\n    if (mac && e.ctrlKey && b == 1) b = 3;\n    return b;\n  }\n\n  // EVENT HANDLING\n\n  // Lightweight event framework. on/off also work on DOM nodes,\n  // registering native DOM handlers.\n\n  var on = CodeMirror.on = function(emitter, type, f) {\n    if (emitter.addEventListener)\n      emitter.addEventListener(type, f, false);\n    else if (emitter.attachEvent)\n      emitter.attachEvent(\"on\" + type, f);\n    else {\n      var map = emitter._handlers || (emitter._handlers = {});\n      var arr = map[type] || (map[type] = []);\n      arr.push(f);\n    }\n  };\n\n  var noHandlers = []\n  function getHandlers(emitter, type, copy) {\n    var arr = emitter._handlers && emitter._handlers[type]\n    if (copy) return arr && arr.length > 0 ? arr.slice() : noHandlers\n    else return arr || noHandlers\n  }\n\n  var off = CodeMirror.off = function(emitter, type, f) {\n    if (emitter.removeEventListener)\n      emitter.removeEventListener(type, f, false);\n    else if (emitter.detachEvent)\n      emitter.detachEvent(\"on\" + type, f);\n    else {\n      var handlers = getHandlers(emitter, type, false)\n      for (var i = 0; i < handlers.length; ++i)\n        if (handlers[i] == f) { handlers.splice(i, 1); break; }\n    }\n  };\n\n  var signal = CodeMirror.signal = function(emitter, type /*, values...*/) {\n    var handlers = getHandlers(emitter, type, true)\n    if (!handlers.length) return;\n    var args = Array.prototype.slice.call(arguments, 2);\n    for (var i = 0; i < handlers.length; ++i) handlers[i].apply(null, args);\n  };\n\n  var orphanDelayedCallbacks = null;\n\n  // Often, we want to signal events at a point where we are in the\n  // middle of some work, but don't want the handler to start calling\n  // other methods on the editor, which might be in an inconsistent\n  // state or simply not expect any other events to happen.\n  // signalLater looks whether there are any handlers, and schedules\n  // them to be executed when the last operation ends, or, if no\n  // operation is active, when a timeout fires.\n  function signalLater(emitter, type /*, values...*/) {\n    var arr = getHandlers(emitter, type, false)\n    if (!arr.length) return;\n    var args = Array.prototype.slice.call(arguments, 2), list;\n    if (operationGroup) {\n      list = operationGroup.delayedCallbacks;\n    } else if (orphanDelayedCallbacks) {\n      list = orphanDelayedCallbacks;\n    } else {\n      list = orphanDelayedCallbacks = [];\n      setTimeout(fireOrphanDelayed, 0);\n    }\n    function bnd(f) {return function(){f.apply(null, args);};};\n    for (var i = 0; i < arr.length; ++i)\n      list.push(bnd(arr[i]));\n  }\n\n  function fireOrphanDelayed() {\n    var delayed = orphanDelayedCallbacks;\n    orphanDelayedCallbacks = null;\n    for (var i = 0; i < delayed.length; ++i) delayed[i]();\n  }\n\n  // The DOM events that CodeMirror handles can be overridden by\n  // registering a (non-DOM) handler on the editor for the event name,\n  // and preventDefault-ing the event in that handler.\n  function signalDOMEvent(cm, e, override) {\n    if (typeof e == \"string\")\n      e = {type: e, preventDefault: function() { this.defaultPrevented = true; }};\n    signal(cm, override || e.type, cm, e);\n    return e_defaultPrevented(e) || e.codemirrorIgnore;\n  }\n\n  function signalCursorActivity(cm) {\n    var arr = cm._handlers && cm._handlers.cursorActivity;\n    if (!arr) return;\n    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n    for (var i = 0; i < arr.length; ++i) if (indexOf(set, arr[i]) == -1)\n      set.push(arr[i]);\n  }\n\n  function hasHandler(emitter, type) {\n    return getHandlers(emitter, type).length > 0\n  }\n\n  // Add on and off methods to a constructor's prototype, to make\n  // registering events on such objects more convenient.\n  function eventMixin(ctor) {\n    ctor.prototype.on = function(type, f) {on(this, type, f);};\n    ctor.prototype.off = function(type, f) {off(this, type, f);};\n  }\n\n  // MISC UTILITIES\n\n  // Number of pixels added to scroller and sizer to hide scrollbar\n  var scrollerGap = 30;\n\n  // Returned or thrown by various protocols to signal 'I'm not\n  // handling this'.\n  var Pass = CodeMirror.Pass = {toString: function(){return \"CodeMirror.Pass\";}};\n\n  // Reused option objects for setSelection & friends\n  var sel_dontScroll = {scroll: false}, sel_mouse = {origin: \"*mouse\"}, sel_move = {origin: \"+move\"};\n\n  function Delayed() {this.id = null;}\n  Delayed.prototype.set = function(ms, f) {\n    clearTimeout(this.id);\n    this.id = setTimeout(f, ms);\n  };\n\n  // Counts the column offset in a string, taking tabs into account.\n  // Used mostly to find indentation.\n  var countColumn = CodeMirror.countColumn = function(string, end, tabSize, startIndex, startValue) {\n    if (end == null) {\n      end = string.search(/[^\\s\\u00a0]/);\n      if (end == -1) end = string.length;\n    }\n    for (var i = startIndex || 0, n = startValue || 0;;) {\n      var nextTab = string.indexOf(\"\\t\", i);\n      if (nextTab < 0 || nextTab >= end)\n        return n + (end - i);\n      n += nextTab - i;\n      n += tabSize - (n % tabSize);\n      i = nextTab + 1;\n    }\n  };\n\n  // The inverse of countColumn -- find the offset that corresponds to\n  // a particular column.\n  var findColumn = CodeMirror.findColumn = function(string, goal, tabSize) {\n    for (var pos = 0, col = 0;;) {\n      var nextTab = string.indexOf(\"\\t\", pos);\n      if (nextTab == -1) nextTab = string.length;\n      var skipped = nextTab - pos;\n      if (nextTab == string.length || col + skipped >= goal)\n        return pos + Math.min(skipped, goal - col);\n      col += nextTab - pos;\n      col += tabSize - (col % tabSize);\n      pos = nextTab + 1;\n      if (col >= goal) return pos;\n    }\n  }\n\n  var spaceStrs = [\"\"];\n  function spaceStr(n) {\n    while (spaceStrs.length <= n)\n      spaceStrs.push(lst(spaceStrs) + \" \");\n    return spaceStrs[n];\n  }\n\n  function lst(arr) { return arr[arr.length-1]; }\n\n  var selectInput = function(node) { node.select(); };\n  if (ios) // Mobile Safari apparently has a bug where select() is broken.\n    selectInput = function(node) { node.selectionStart = 0; node.selectionEnd = node.value.length; };\n  else if (ie) // Suppress mysterious IE10 errors\n    selectInput = function(node) { try { node.select(); } catch(_e) {} };\n\n  function indexOf(array, elt) {\n    for (var i = 0; i < array.length; ++i)\n      if (array[i] == elt) return i;\n    return -1;\n  }\n  function map(array, f) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) out[i] = f(array[i], i);\n    return out;\n  }\n\n  function nothing() {}\n\n  function createObj(base, props) {\n    var inst;\n    if (Object.create) {\n      inst = Object.create(base);\n    } else {\n      nothing.prototype = base;\n      inst = new nothing();\n    }\n    if (props) copyObj(props, inst);\n    return inst;\n  };\n\n  function copyObj(obj, target, overwrite) {\n    if (!target) target = {};\n    for (var prop in obj)\n      if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))\n        target[prop] = obj[prop];\n    return target;\n  }\n\n  function bind(f) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    return function(){return f.apply(null, args);};\n  }\n\n  var nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n  var isWordCharBasic = CodeMirror.isWordChar = function(ch) {\n    return /\\w/.test(ch) || ch > \"\\x80\" &&\n      (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch));\n  };\n  function isWordChar(ch, helper) {\n    if (!helper) return isWordCharBasic(ch);\n    if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) return true;\n    return helper.test(ch);\n  }\n\n  function isEmpty(obj) {\n    for (var n in obj) if (obj.hasOwnProperty(n) && obj[n]) return false;\n    return true;\n  }\n\n  // Extending unicode characters. A series of a non-extending char +\n  // any number of extending chars is treated as a single unit as far\n  // as editing and measuring is concerned. This is not fully correct,\n  // since some scripts/fonts/browsers also treat other configurations\n  // of code points as a group.\n  var extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\n  function isExtendingChar(ch) { return ch.charCodeAt(0) >= 768 && extendingChars.test(ch); }\n\n  // DOM UTILITIES\n\n  function elt(tag, content, className, style) {\n    var e = document.createElement(tag);\n    if (className) e.className = className;\n    if (style) e.style.cssText = style;\n    if (typeof content == \"string\") e.appendChild(document.createTextNode(content));\n    else if (content) for (var i = 0; i < content.length; ++i) e.appendChild(content[i]);\n    return e;\n  }\n\n  var range;\n  if (document.createRange) range = function(node, start, end, endNode) {\n    var r = document.createRange();\n    r.setEnd(endNode || node, end);\n    r.setStart(node, start);\n    return r;\n  };\n  else range = function(node, start, end) {\n    var r = document.body.createTextRange();\n    try { r.moveToElementText(node.parentNode); }\n    catch(e) { return r; }\n    r.collapse(true);\n    r.moveEnd(\"character\", end);\n    r.moveStart(\"character\", start);\n    return r;\n  };\n\n  function removeChildren(e) {\n    for (var count = e.childNodes.length; count > 0; --count)\n      e.removeChild(e.firstChild);\n    return e;\n  }\n\n  function removeChildrenAndAdd(parent, e) {\n    return removeChildren(parent).appendChild(e);\n  }\n\n  var contains = CodeMirror.contains = function(parent, child) {\n    if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n      child = child.parentNode;\n    if (parent.contains)\n      return parent.contains(child);\n    do {\n      if (child.nodeType == 11) child = child.host;\n      if (child == parent) return true;\n    } while (child = child.parentNode);\n  };\n\n  function activeElt() {\n    var activeElement = document.activeElement;\n    while (activeElement && activeElement.root && activeElement.root.activeElement)\n      activeElement = activeElement.root.activeElement;\n    return activeElement;\n  }\n  // Older versions of IE throws unspecified error when touching\n  // document.activeElement in some cases (during loading, in iframe)\n  if (ie && ie_version < 11) activeElt = function() {\n    try { return document.activeElement; }\n    catch(e) { return document.body; }\n  };\n\n  function classTest(cls) { return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\"); }\n  var rmClass = CodeMirror.rmClass = function(node, cls) {\n    var current = node.className;\n    var match = classTest(cls).exec(current);\n    if (match) {\n      var after = current.slice(match.index + match[0].length);\n      node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n    }\n  };\n  var addClass = CodeMirror.addClass = function(node, cls) {\n    var current = node.className;\n    if (!classTest(cls).test(current)) node.className += (current ? \" \" : \"\") + cls;\n  };\n  function joinClasses(a, b) {\n    var as = a.split(\" \");\n    for (var i = 0; i < as.length; i++)\n      if (as[i] && !classTest(as[i]).test(b)) b += \" \" + as[i];\n    return b;\n  }\n\n  // WINDOW-WIDE EVENTS\n\n  // These must be handled carefully, because naively registering a\n  // handler for each editor will cause the editors to never be\n  // garbage collected.\n\n  function forEachCodeMirror(f) {\n    if (!document.body.getElementsByClassName) return;\n    var byClass = document.body.getElementsByClassName(\"CodeMirror\");\n    for (var i = 0; i < byClass.length; i++) {\n      var cm = byClass[i].CodeMirror;\n      if (cm) f(cm);\n    }\n  }\n\n  var globalsRegistered = false;\n  function ensureGlobalHandlers() {\n    if (globalsRegistered) return;\n    registerGlobalHandlers();\n    globalsRegistered = true;\n  }\n  function registerGlobalHandlers() {\n    // When the window resizes, we need to refresh active editors.\n    var resizeTimer;\n    on(window, \"resize\", function() {\n      if (resizeTimer == null) resizeTimer = setTimeout(function() {\n        resizeTimer = null;\n        forEachCodeMirror(onResize);\n      }, 100);\n    });\n    // When the window loses focus, we want to show the editor as blurred\n    on(window, \"blur\", function() {\n      forEachCodeMirror(onBlur);\n    });\n  }\n\n  // FEATURE DETECTION\n\n  // Detect drag-and-drop\n  var dragAndDrop = function() {\n    // There is *some* kind of drag-and-drop support in IE6-8, but I\n    // couldn't get it to work yet.\n    if (ie && ie_version < 9) return false;\n    var div = elt('div');\n    return \"draggable\" in div || \"dragDrop\" in div;\n  }();\n\n  var zwspSupported;\n  function zeroWidthElement(measure) {\n    if (zwspSupported == null) {\n      var test = elt(\"span\", \"\\u200b\");\n      removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n      if (measure.firstChild.offsetHeight != 0)\n        zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8);\n    }\n    var node = zwspSupported ? elt(\"span\", \"\\u200b\") :\n      elt(\"span\", \"\\u00a0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n    node.setAttribute(\"cm-text\", \"\");\n    return node;\n  }\n\n  // Feature-detect IE's crummy client rect reporting for bidi text\n  var badBidiRects;\n  function hasBadBidiRects(measure) {\n    if (badBidiRects != null) return badBidiRects;\n    var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062eA\"));\n    var r0 = range(txt, 0, 1).getBoundingClientRect();\n    if (!r0 || r0.left == r0.right) return false; // Safari returns null in some cases (#2780)\n    var r1 = range(txt, 1, 2).getBoundingClientRect();\n    return badBidiRects = (r1.right - r0.right < 3);\n  }\n\n  // See if \"\".split is the broken IE version, if so, provide an\n  // alternative way to split lines.\n  var splitLinesAuto = CodeMirror.splitLines = \"\\n\\nb\".split(/\\n/).length != 3 ? function(string) {\n    var pos = 0, result = [], l = string.length;\n    while (pos <= l) {\n      var nl = string.indexOf(\"\\n\", pos);\n      if (nl == -1) nl = string.length;\n      var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n      var rt = line.indexOf(\"\\r\");\n      if (rt != -1) {\n        result.push(line.slice(0, rt));\n        pos += rt + 1;\n      } else {\n        result.push(line);\n        pos = nl + 1;\n      }\n    }\n    return result;\n  } : function(string){return string.split(/\\r\\n?|\\n/);};\n\n  var hasSelection = window.getSelection ? function(te) {\n    try { return te.selectionStart != te.selectionEnd; }\n    catch(e) { return false; }\n  } : function(te) {\n    try {var range = te.ownerDocument.selection.createRange();}\n    catch(e) {}\n    if (!range || range.parentElement() != te) return false;\n    return range.compareEndPoints(\"StartToEnd\", range) != 0;\n  };\n\n  var hasCopyEvent = (function() {\n    var e = elt(\"div\");\n    if (\"oncopy\" in e) return true;\n    e.setAttribute(\"oncopy\", \"return;\");\n    return typeof e.oncopy == \"function\";\n  })();\n\n  var badZoomedRects = null;\n  function hasBadZoomedRects(measure) {\n    if (badZoomedRects != null) return badZoomedRects;\n    var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n    var normal = node.getBoundingClientRect();\n    var fromRange = range(node, 0, 1).getBoundingClientRect();\n    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1;\n  }\n\n  // KEY NAMES\n\n  var keyNames = CodeMirror.keyNames = {\n    3: \"Enter\", 8: \"Backspace\", 9: \"Tab\", 13: \"Enter\", 16: \"Shift\", 17: \"Ctrl\", 18: \"Alt\",\n    19: \"Pause\", 20: \"CapsLock\", 27: \"Esc\", 32: \"Space\", 33: \"PageUp\", 34: \"PageDown\", 35: \"End\",\n    36: \"Home\", 37: \"Left\", 38: \"Up\", 39: \"Right\", 40: \"Down\", 44: \"PrintScrn\", 45: \"Insert\",\n    46: \"Delete\", 59: \";\", 61: \"=\", 91: \"Mod\", 92: \"Mod\", 93: \"Mod\",\n    106: \"*\", 107: \"=\", 109: \"-\", 110: \".\", 111: \"/\", 127: \"Delete\",\n    173: \"-\", 186: \";\", 187: \"=\", 188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\",\n    221: \"]\", 222: \"'\", 63232: \"Up\", 63233: \"Down\", 63234: \"Left\", 63235: \"Right\", 63272: \"Delete\",\n    63273: \"Home\", 63275: \"End\", 63276: \"PageUp\", 63277: \"PageDown\", 63302: \"Insert\"\n  };\n  (function() {\n    // Number keys\n    for (var i = 0; i < 10; i++) keyNames[i + 48] = keyNames[i + 96] = String(i);\n    // Alphabetic keys\n    for (var i = 65; i <= 90; i++) keyNames[i] = String.fromCharCode(i);\n    // Function keys\n    for (var i = 1; i <= 12; i++) keyNames[i + 111] = keyNames[i + 63235] = \"F\" + i;\n  })();\n\n  // BIDI HELPERS\n\n  function iterateBidiSections(order, from, to, f) {\n    if (!order) return f(from, to, \"ltr\");\n    var found = false;\n    for (var i = 0; i < order.length; ++i) {\n      var part = order[i];\n      if (part.from < to && part.to > from || from == to && part.to == from) {\n        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\");\n        found = true;\n      }\n    }\n    if (!found) f(from, to, \"ltr\");\n  }\n\n  function bidiLeft(part) { return part.level % 2 ? part.to : part.from; }\n  function bidiRight(part) { return part.level % 2 ? part.from : part.to; }\n\n  function lineLeft(line) { var order = getOrder(line); return order ? bidiLeft(order[0]) : 0; }\n  function lineRight(line) {\n    var order = getOrder(line);\n    if (!order) return line.text.length;\n    return bidiRight(lst(order));\n  }\n\n  function lineStart(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLine(line);\n    if (visual != line) lineN = lineNo(visual);\n    var order = getOrder(visual);\n    var ch = !order ? 0 : order[0].level % 2 ? lineRight(visual) : lineLeft(visual);\n    return Pos(lineN, ch);\n  }\n  function lineEnd(cm, lineN) {\n    var merged, line = getLine(cm.doc, lineN);\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line;\n      lineN = null;\n    }\n    var order = getOrder(line);\n    var ch = !order ? line.text.length : order[0].level % 2 ? lineLeft(line) : lineRight(line);\n    return Pos(lineN == null ? lineNo(line) : lineN, ch);\n  }\n  function lineStartSmart(cm, pos) {\n    var start = lineStart(cm, pos.line);\n    var line = getLine(cm.doc, start.line);\n    var order = getOrder(line);\n    if (!order || order[0].level == 0) {\n      var firstNonWS = Math.max(0, line.text.search(/\\S/));\n      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n      return Pos(start.line, inWS ? 0 : firstNonWS);\n    }\n    return start;\n  }\n\n  function compareBidiLevel(order, a, b) {\n    var linedir = order[0].level;\n    if (a == linedir) return true;\n    if (b == linedir) return false;\n    return a < b;\n  }\n  var bidiOther;\n  function getBidiPartAt(order, pos) {\n    bidiOther = null;\n    for (var i = 0, found; i < order.length; ++i) {\n      var cur = order[i];\n      if (cur.from < pos && cur.to > pos) return i;\n      if ((cur.from == pos || cur.to == pos)) {\n        if (found == null) {\n          found = i;\n        } else if (compareBidiLevel(order, cur.level, order[found].level)) {\n          if (cur.from != cur.to) bidiOther = found;\n          return i;\n        } else {\n          if (cur.from != cur.to) bidiOther = i;\n          return found;\n        }\n      }\n    }\n    return found;\n  }\n\n  function moveInLine(line, pos, dir, byUnit) {\n    if (!byUnit) return pos + dir;\n    do pos += dir;\n    while (pos > 0 && isExtendingChar(line.text.charAt(pos)));\n    return pos;\n  }\n\n  // This is needed in order to move 'visually' through bi-directional\n  // text -- i.e., pressing left should make the cursor go left, even\n  // when in RTL text. The tricky part is the 'jumps', where RTL and\n  // LTR text touch each other. This often requires the cursor offset\n  // to move more than one unit, in order to visually move one unit.\n  function moveVisually(line, start, dir, byUnit) {\n    var bidi = getOrder(line);\n    if (!bidi) return moveLogically(line, start, dir, byUnit);\n    var pos = getBidiPartAt(bidi, start), part = bidi[pos];\n    var target = moveInLine(line, start, part.level % 2 ? -dir : dir, byUnit);\n\n    for (;;) {\n      if (target > part.from && target < part.to) return target;\n      if (target == part.from || target == part.to) {\n        if (getBidiPartAt(bidi, target) == pos) return target;\n        part = bidi[pos += dir];\n        return (dir > 0) == part.level % 2 ? part.to : part.from;\n      } else {\n        part = bidi[pos += dir];\n        if (!part) return null;\n        if ((dir > 0) == part.level % 2)\n          target = moveInLine(line, part.to, -1, byUnit);\n        else\n          target = moveInLine(line, part.from, 1, byUnit);\n      }\n    }\n  }\n\n  function moveLogically(line, start, dir, byUnit) {\n    var target = start + dir;\n    if (byUnit) while (target > 0 && isExtendingChar(line.text.charAt(target))) target += dir;\n    return target < 0 || target > line.text.length ? null : target;\n  }\n\n  // Bidirectional ordering algorithm\n  // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n  // that this (partially) implements.\n\n  // One-char codes used for character types:\n  // L (L):   Left-to-Right\n  // R (R):   Right-to-Left\n  // r (AL):  Right-to-Left Arabic\n  // 1 (EN):  European Number\n  // + (ES):  European Number Separator\n  // % (ET):  European Number Terminator\n  // n (AN):  Arabic Number\n  // , (CS):  Common Number Separator\n  // m (NSM): Non-Spacing Mark\n  // b (BN):  Boundary Neutral\n  // s (B):   Paragraph Separator\n  // t (S):   Segment Separator\n  // w (WS):  Whitespace\n  // N (ON):  Other Neutrals\n\n  // Returns null if characters are ordered as they appear\n  // (left-to-right), or an array of sections ({from, to, level}\n  // objects) in the order in which they occur visually.\n  var bidiOrdering = (function() {\n    // Character types for codepoints 0 to 0xff\n    var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\";\n    // Character types for codepoints 0x600 to 0x6ff\n    var arabicTypes = \"rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm\";\n    function charType(code) {\n      if (code <= 0xf7) return lowTypes.charAt(code);\n      else if (0x590 <= code && code <= 0x5f4) return \"R\";\n      else if (0x600 <= code && code <= 0x6ed) return arabicTypes.charAt(code - 0x600);\n      else if (0x6ee <= code && code <= 0x8ac) return \"r\";\n      else if (0x2000 <= code && code <= 0x200b) return \"w\";\n      else if (code == 0x200c) return \"b\";\n      else return \"L\";\n    }\n\n    var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n    var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;\n    // Browsers seem to always treat the boundaries of block elements as being L.\n    var outerType = \"L\";\n\n    function BidiSpan(level, from, to) {\n      this.level = level;\n      this.from = from; this.to = to;\n    }\n\n    return function(str) {\n      if (!bidiRE.test(str)) return false;\n      var len = str.length, types = [];\n      for (var i = 0, type; i < len; ++i)\n        types.push(type = charType(str.charCodeAt(i)));\n\n      // W1. Examine each non-spacing mark (NSM) in the level run, and\n      // change the type of the NSM to the type of the previous\n      // character. If the NSM is at the start of the level run, it will\n      // get the type of sor.\n      for (var i = 0, prev = outerType; i < len; ++i) {\n        var type = types[i];\n        if (type == \"m\") types[i] = prev;\n        else prev = type;\n      }\n\n      // W2. Search backwards from each instance of a European number\n      // until the first strong type (R, L, AL, or sor) is found. If an\n      // AL is found, change the type of the European number to Arabic\n      // number.\n      // W3. Change all ALs to R.\n      for (var i = 0, cur = outerType; i < len; ++i) {\n        var type = types[i];\n        if (type == \"1\" && cur == \"r\") types[i] = \"n\";\n        else if (isStrong.test(type)) { cur = type; if (type == \"r\") types[i] = \"R\"; }\n      }\n\n      // W4. A single European separator between two European numbers\n      // changes to a European number. A single common separator between\n      // two numbers of the same type changes to that type.\n      for (var i = 1, prev = types[0]; i < len - 1; ++i) {\n        var type = types[i];\n        if (type == \"+\" && prev == \"1\" && types[i+1] == \"1\") types[i] = \"1\";\n        else if (type == \",\" && prev == types[i+1] &&\n                 (prev == \"1\" || prev == \"n\")) types[i] = prev;\n        prev = type;\n      }\n\n      // W5. A sequence of European terminators adjacent to European\n      // numbers changes to all European numbers.\n      // W6. Otherwise, separators and terminators change to Other\n      // Neutral.\n      for (var i = 0; i < len; ++i) {\n        var type = types[i];\n        if (type == \",\") types[i] = \"N\";\n        else if (type == \"%\") {\n          for (var end = i + 1; end < len && types[end] == \"%\"; ++end) {}\n          var replace = (i && types[i-1] == \"!\") || (end < len && types[end] == \"1\") ? \"1\" : \"N\";\n          for (var j = i; j < end; ++j) types[j] = replace;\n          i = end - 1;\n        }\n      }\n\n      // W7. Search backwards from each instance of a European number\n      // until the first strong type (R, L, or sor) is found. If an L is\n      // found, then change the type of the European number to L.\n      for (var i = 0, cur = outerType; i < len; ++i) {\n        var type = types[i];\n        if (cur == \"L\" && type == \"1\") types[i] = \"L\";\n        else if (isStrong.test(type)) cur = type;\n      }\n\n      // N1. A sequence of neutrals takes the direction of the\n      // surrounding strong text if the text on both sides has the same\n      // direction. European and Arabic numbers act as if they were R in\n      // terms of their influence on neutrals. Start-of-level-run (sor)\n      // and end-of-level-run (eor) are used at level run boundaries.\n      // N2. Any remaining neutrals take the embedding direction.\n      for (var i = 0; i < len; ++i) {\n        if (isNeutral.test(types[i])) {\n          for (var end = i + 1; end < len && isNeutral.test(types[end]); ++end) {}\n          var before = (i ? types[i-1] : outerType) == \"L\";\n          var after = (end < len ? types[end] : outerType) == \"L\";\n          var replace = before || after ? \"L\" : \"R\";\n          for (var j = i; j < end; ++j) types[j] = replace;\n          i = end - 1;\n        }\n      }\n\n      // Here we depart from the documented algorithm, in order to avoid\n      // building up an actual levels array. Since there are only three\n      // levels (0, 1, 2) in an implementation that doesn't take\n      // explicit embedding into account, we can build up the order on\n      // the fly, without following the level-based algorithm.\n      var order = [], m;\n      for (var i = 0; i < len;) {\n        if (countsAsLeft.test(types[i])) {\n          var start = i;\n          for (++i; i < len && countsAsLeft.test(types[i]); ++i) {}\n          order.push(new BidiSpan(0, start, i));\n        } else {\n          var pos = i, at = order.length;\n          for (++i; i < len && types[i] != \"L\"; ++i) {}\n          for (var j = pos; j < i;) {\n            if (countsAsNum.test(types[j])) {\n              if (pos < j) order.splice(at, 0, new BidiSpan(1, pos, j));\n              var nstart = j;\n              for (++j; j < i && countsAsNum.test(types[j]); ++j) {}\n              order.splice(at, 0, new BidiSpan(2, nstart, j));\n              pos = j;\n            } else ++j;\n          }\n          if (pos < i) order.splice(at, 0, new BidiSpan(1, pos, i));\n        }\n      }\n      if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n        order[0].from = m[0].length;\n        order.unshift(new BidiSpan(0, 0, m[0].length));\n      }\n      if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n        lst(order).to -= m[0].length;\n        order.push(new BidiSpan(0, len - m[0].length, len));\n      }\n      if (order[0].level == 2)\n        order.unshift(new BidiSpan(1, order[0].to, order[0].to));\n      if (order[0].level != lst(order).level)\n        order.push(new BidiSpan(order[0].level, len, len));\n\n      return order;\n    };\n  })();\n\n  // THE END\n\n  CodeMirror.version = \"5.8.0\";\n\n  return CodeMirror;\n});\n\n},{}],31:[function(_dereq_,module,exports){\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(_dereq_(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"clike\", function(config, parserConfig) {\n  var indentUnit = config.indentUnit,\n      statementIndentUnit = parserConfig.statementIndentUnit || indentUnit,\n      dontAlignCalls = parserConfig.dontAlignCalls,\n      keywords = parserConfig.keywords || {},\n      types = parserConfig.types || {},\n      builtin = parserConfig.builtin || {},\n      blockKeywords = parserConfig.blockKeywords || {},\n      defKeywords = parserConfig.defKeywords || {},\n      atoms = parserConfig.atoms || {},\n      hooks = parserConfig.hooks || {},\n      multiLineStrings = parserConfig.multiLineStrings,\n      indentStatements = parserConfig.indentStatements !== false,\n      indentSwitch = parserConfig.indentSwitch !== false,\n      namespaceSeparator = parserConfig.namespaceSeparator,\n      isPunctuationChar = parserConfig.isPunctuationChar || /[\\[\\]{}\\(\\),;\\:\\.]/,\n      isNumberChar = parserConfig.isNumberChar || /\\d/,\n      isOperatorChar = parserConfig.isOperatorChar || /[+\\-*&%=<>!?|\\/]/,\n      endStatement = parserConfig.endStatement || /^[;:,]$/;\n\n  var curPunc, isDefKeyword;\n\n  function tokenBase(stream, state) {\n    var ch = stream.next();\n    if (hooks[ch]) {\n      var result = hooks[ch](stream, state);\n      if (result !== false) return result;\n    }\n    if (ch == '\"' || ch == \"'\") {\n      state.tokenize = tokenString(ch);\n      return state.tokenize(stream, state);\n    }\n    if (isPunctuationChar.test(ch)) {\n      curPunc = ch;\n      return null;\n    }\n    if (isNumberChar.test(ch)) {\n      stream.eatWhile(/[\\w\\.]/);\n      return \"number\";\n    }\n    if (ch == \"/\") {\n      if (stream.eat(\"*\")) {\n        state.tokenize = tokenComment;\n        return tokenComment(stream, state);\n      }\n      if (stream.eat(\"/\")) {\n        stream.skipToEnd();\n        return \"comment\";\n      }\n    }\n    if (isOperatorChar.test(ch)) {\n      stream.eatWhile(isOperatorChar);\n      return \"operator\";\n    }\n    stream.eatWhile(/[\\w\\$_\\xa1-\\uffff]/);\n    if (namespaceSeparator) while (stream.match(namespaceSeparator))\n      stream.eatWhile(/[\\w\\$_\\xa1-\\uffff]/);\n\n    var cur = stream.current();\n    if (contains(keywords, cur)) {\n      if (contains(blockKeywords, cur)) curPunc = \"newstatement\";\n      if (contains(defKeywords, cur)) isDefKeyword = true;\n      return \"keyword\";\n    }\n    if (contains(types, cur)) return \"variable-3\";\n    if (contains(builtin, cur)) {\n      if (contains(blockKeywords, cur)) curPunc = \"newstatement\";\n      return \"builtin\";\n    }\n    if (contains(atoms, cur)) return \"atom\";\n    return \"variable\";\n  }\n\n  function tokenString(quote) {\n    return function(stream, state) {\n      var escaped = false, next, end = false;\n      while ((next = stream.next()) != null) {\n        if (next == quote && !escaped) {end = true; break;}\n        escaped = !escaped && next == \"\\\\\";\n      }\n      if (end || !(escaped || multiLineStrings))\n        state.tokenize = null;\n      return \"string\";\n    };\n  }\n\n  function tokenComment(stream, state) {\n    var maybeEnd = false, ch;\n    while (ch = stream.next()) {\n      if (ch == \"/\" && maybeEnd) {\n        state.tokenize = null;\n        break;\n      }\n      maybeEnd = (ch == \"*\");\n    }\n    return \"comment\";\n  }\n\n  function Context(indented, column, type, align, prev) {\n    this.indented = indented;\n    this.column = column;\n    this.type = type;\n    this.align = align;\n    this.prev = prev;\n  }\n  function isStatement(type) {\n    return type == \"statement\" || type == \"switchstatement\" || type == \"namespace\";\n  }\n  function pushContext(state, col, type) {\n    var indent = state.indented;\n    if (state.context && isStatement(state.context.type) && !isStatement(type))\n      indent = state.context.indented;\n    return state.context = new Context(indent, col, type, null, state.context);\n  }\n  function popContext(state) {\n    var t = state.context.type;\n    if (t == \")\" || t == \"]\" || t == \"}\")\n      state.indented = state.context.indented;\n    return state.context = state.context.prev;\n  }\n\n  function typeBefore(stream, state) {\n    if (state.prevToken == \"variable\" || state.prevToken == \"variable-3\") return true;\n    if (/\\S(?:[^- ]>|[*\\]])\\s*$|\\*$/.test(stream.string.slice(0, stream.start))) return true;\n  }\n\n  function isTopScope(context) {\n    for (;;) {\n      if (!context || context.type == \"top\") return true;\n      if (context.type == \"}\" && context.prev.type != \"namespace\") return false;\n      context = context.prev;\n    }\n  }\n\n  // Interface\n\n  return {\n    startState: function(basecolumn) {\n      return {\n        tokenize: null,\n        context: new Context((basecolumn || 0) - indentUnit, 0, \"top\", false),\n        indented: 0,\n        startOfLine: true,\n        prevToken: null\n      };\n    },\n\n    token: function(stream, state) {\n      var ctx = state.context;\n      if (stream.sol()) {\n        if (ctx.align == null) ctx.align = false;\n        state.indented = stream.indentation();\n        state.startOfLine = true;\n      }\n      if (stream.eatSpace()) return null;\n      curPunc = isDefKeyword = null;\n      var style = (state.tokenize || tokenBase)(stream, state);\n      if (style == \"comment\" || style == \"meta\") return style;\n      if (ctx.align == null) ctx.align = true;\n\n      if (endStatement.test(curPunc)) while (isStatement(state.context.type)) popContext(state);\n      else if (curPunc == \"{\") pushContext(state, stream.column(), \"}\");\n      else if (curPunc == \"[\") pushContext(state, stream.column(), \"]\");\n      else if (curPunc == \"(\") pushContext(state, stream.column(), \")\");\n      else if (curPunc == \"}\") {\n        while (isStatement(ctx.type)) ctx = popContext(state);\n        if (ctx.type == \"}\") ctx = popContext(state);\n        while (isStatement(ctx.type)) ctx = popContext(state);\n      }\n      else if (curPunc == ctx.type) popContext(state);\n      else if (indentStatements &&\n               (((ctx.type == \"}\" || ctx.type == \"top\") && curPunc != \";\") ||\n                (isStatement(ctx.type) && curPunc == \"newstatement\"))) {\n        var type = \"statement\";\n        if (curPunc == \"newstatement\" && indentSwitch && stream.current() == \"switch\")\n          type = \"switchstatement\";\n        else if (style == \"keyword\" && stream.current() == \"namespace\")\n          type = \"namespace\";\n        pushContext(state, stream.column(), type);\n      }\n\n      if (style == \"variable\" &&\n          ((state.prevToken == \"def\" ||\n            (parserConfig.typeFirstDefinitions && typeBefore(stream, state) &&\n             isTopScope(state.context) && stream.match(/^\\s*\\(/, false)))))\n        style = \"def\";\n\n      if (hooks.token) {\n        var result = hooks.token(stream, state, style);\n        if (result !== undefined) style = result;\n      }\n\n      if (style == \"def\" && parserConfig.styleDefs === false) style = \"variable\";\n\n      state.startOfLine = false;\n      state.prevToken = isDefKeyword ? \"def\" : style || curPunc;\n      return style;\n    },\n\n    indent: function(state, textAfter) {\n      if (state.tokenize != tokenBase && state.tokenize != null) return CodeMirror.Pass;\n      var ctx = state.context, firstChar = textAfter && textAfter.charAt(0);\n      if (isStatement(ctx.type) && firstChar == \"}\") ctx = ctx.prev;\n      if (hooks.indent) {\n        var hook = hooks.indent(state, ctx, textAfter);\n        if (typeof hook == \"number\") return hook\n      }\n      var closing = firstChar == ctx.type;\n      var switchBlock = ctx.prev && ctx.prev.type == \"switchstatement\";\n      if (isStatement(ctx.type))\n        return ctx.indented + (firstChar == \"{\" ? 0 : statementIndentUnit);\n      if (ctx.align && (!dontAlignCalls || ctx.type != \")\"))\n        return ctx.column + (closing ? 0 : 1);\n      if (ctx.type == \")\" && !closing)\n        return ctx.indented + statementIndentUnit;\n\n      return ctx.indented + (closing ? 0 : indentUnit) +\n        (!closing && switchBlock && !/^(?:case|default)\\b/.test(textAfter) ? indentUnit : 0);\n    },\n\n    electricInput: indentSwitch ? /^\\s*(?:case .*?:|default:|\\{\\}?|\\})$/ : /^\\s*[{}]$/,\n    blockCommentStart: \"/*\",\n    blockCommentEnd: \"*/\",\n    lineComment: \"//\",\n    fold: \"brace\"\n  };\n});\n\n  function words(str) {\n    var obj = {}, words = str.split(\" \");\n    for (var i = 0; i < words.length; ++i) obj[words[i]] = true;\n    return obj;\n  }\n  function contains(words, word) {\n    if (typeof words === \"function\") {\n      return words(word);\n    } else {\n      return words.propertyIsEnumerable(word);\n    }\n  }\n  var cKeywords = \"auto if break case register continue return default do sizeof \" +\n    \"static else struct switch extern typedef float union for \" +\n    \"goto while enum const volatile\";\n  var cTypes = \"int long char short double float unsigned signed void size_t ptrdiff_t\";\n\n  function cppHook(stream, state) {\n    if (!state.startOfLine) return false;\n    for (;;) {\n      if (stream.skipTo(\"\\\\\")) {\n        stream.next();\n        if (stream.eol()) {\n          state.tokenize = cppHook;\n          break;\n        }\n      } else {\n        stream.skipToEnd();\n        state.tokenize = null;\n        break;\n      }\n    }\n    return \"meta\";\n  }\n\n  function pointerHook(_stream, state) {\n    if (state.prevToken == \"variable-3\") return \"variable-3\";\n    return false;\n  }\n\n  function cpp14Literal(stream) {\n    stream.eatWhile(/[\\w\\.']/);\n    return \"number\";\n  }\n\n  function cpp11StringHook(stream, state) {\n    stream.backUp(1);\n    // Raw strings.\n    if (stream.match(/(R|u8R|uR|UR|LR)/)) {\n      var match = stream.match(/\"([^\\s\\\\()]{0,16})\\(/);\n      if (!match) {\n        return false;\n      }\n      state.cpp11RawStringDelim = match[1];\n      state.tokenize = tokenRawString;\n      return tokenRawString(stream, state);\n    }\n    // Unicode strings/chars.\n    if (stream.match(/(u8|u|U|L)/)) {\n      if (stream.match(/[\"']/, /* eat */ false)) {\n        return \"string\";\n      }\n      return false;\n    }\n    // Ignore this hook.\n    stream.next();\n    return false;\n  }\n\n  function cppLooksLikeConstructor(word) {\n    var lastTwo = /(\\w+)::(\\w+)$/.exec(word);\n    return lastTwo && lastTwo[1] == lastTwo[2];\n  }\n\n  // C#-style strings where \"\" escapes a quote.\n  function tokenAtString(stream, state) {\n    var next;\n    while ((next = stream.next()) != null) {\n      if (next == '\"' && !stream.eat('\"')) {\n        state.tokenize = null;\n        break;\n      }\n    }\n    return \"string\";\n  }\n\n  // C++11 raw string literal is <prefix>\"<delim>( anything )<delim>\", where\n  // <delim> can be a string up to 16 characters long.\n  function tokenRawString(stream, state) {\n    // Escape characters that have special regex meanings.\n    var delim = state.cpp11RawStringDelim.replace(/[^\\w\\s]/g, '\\\\$&');\n    var match = stream.match(new RegExp(\".*?\\\\)\" + delim + '\"'));\n    if (match)\n      state.tokenize = null;\n    else\n      stream.skipToEnd();\n    return \"string\";\n  }\n\n  function def(mimes, mode) {\n    if (typeof mimes == \"string\") mimes = [mimes];\n    var words = [];\n    function add(obj) {\n      if (obj) for (var prop in obj) if (obj.hasOwnProperty(prop))\n        words.push(prop);\n    }\n    add(mode.keywords);\n    add(mode.types);\n    add(mode.builtin);\n    add(mode.atoms);\n    if (words.length) {\n      mode.helperType = mimes[0];\n      CodeMirror.registerHelper(\"hintWords\", mimes[0], words);\n    }\n\n    for (var i = 0; i < mimes.length; ++i)\n      CodeMirror.defineMIME(mimes[i], mode);\n  }\n\n  def([\"text/x-csrc\", \"text/x-c\", \"text/x-chdr\"], {\n    name: \"clike\",\n    keywords: words(cKeywords),\n    types: words(cTypes + \" bool _Complex _Bool float_t double_t intptr_t intmax_t \" +\n                 \"int8_t int16_t int32_t int64_t uintptr_t uintmax_t uint8_t uint16_t \" +\n                 \"uint32_t uint64_t\"),\n    blockKeywords: words(\"case do else for if switch while struct\"),\n    defKeywords: words(\"struct\"),\n    typeFirstDefinitions: true,\n    atoms: words(\"null true false\"),\n    hooks: {\"#\": cppHook, \"*\": pointerHook},\n    modeProps: {fold: [\"brace\", \"include\"]}\n  });\n\n  def([\"text/x-c++src\", \"text/x-c++hdr\"], {\n    name: \"clike\",\n    keywords: words(cKeywords + \" asm dynamic_cast namespace reinterpret_cast try explicit new \" +\n                    \"static_cast typeid catch operator template typename class friend private \" +\n                    \"this using const_cast inline public throw virtual delete mutable protected \" +\n                    \"alignas alignof constexpr decltype nullptr noexcept thread_local final \" +\n                    \"static_assert override\"),\n    types: words(cTypes + \" bool wchar_t\"),\n    blockKeywords: words(\"catch class do else finally for if struct switch try while\"),\n    defKeywords: words(\"class namespace struct enum union\"),\n    typeFirstDefinitions: true,\n    atoms: words(\"true false null\"),\n    hooks: {\n      \"#\": cppHook,\n      \"*\": pointerHook,\n      \"u\": cpp11StringHook,\n      \"U\": cpp11StringHook,\n      \"L\": cpp11StringHook,\n      \"R\": cpp11StringHook,\n      \"0\": cpp14Literal,\n      \"1\": cpp14Literal,\n      \"2\": cpp14Literal,\n      \"3\": cpp14Literal,\n      \"4\": cpp14Literal,\n      \"5\": cpp14Literal,\n      \"6\": cpp14Literal,\n      \"7\": cpp14Literal,\n      \"8\": cpp14Literal,\n      \"9\": cpp14Literal,\n      token: function(stream, state, style) {\n        if (style == \"variable\" && stream.peek() == \"(\" &&\n            (state.prevToken == \";\" || state.prevToken == null ||\n             state.prevToken == \"}\") &&\n            cppLooksLikeConstructor(stream.current()))\n          return \"def\";\n      }\n    },\n    namespaceSeparator: \"::\",\n    modeProps: {fold: [\"brace\", \"include\"]}\n  });\n\n  def(\"text/x-java\", {\n    name: \"clike\",\n    keywords: words(\"abstract assert break case catch class const continue default \" +\n                    \"do else enum extends final finally float for goto if implements import \" +\n                    \"instanceof interface native new package private protected public \" +\n                    \"return static strictfp super switch synchronized this throw throws transient \" +\n                    \"try volatile while\"),\n    types: words(\"byte short int long float double boolean char void Boolean Byte Character Double Float \" +\n                 \"Integer Long Number Object Short String StringBuffer StringBuilder Void\"),\n    blockKeywords: words(\"catch class do else finally for if switch try while\"),\n    defKeywords: words(\"class interface package enum\"),\n    typeFirstDefinitions: true,\n    atoms: words(\"true false null\"),\n    endStatement: /^[;:]$/,\n    hooks: {\n      \"@\": function(stream) {\n        stream.eatWhile(/[\\w\\$_]/);\n        return \"meta\";\n      }\n    },\n    modeProps: {fold: [\"brace\", \"import\"]}\n  });\n\n  def(\"text/x-csharp\", {\n    name: \"clike\",\n    keywords: words(\"abstract as async await base break case catch checked class const continue\" +\n                    \" default delegate do else enum event explicit extern finally fixed for\" +\n                    \" foreach goto if implicit in interface internal is lock namespace new\" +\n                    \" operator out override params private protected public readonly ref return sealed\" +\n                    \" sizeof stackalloc static struct switch this throw try typeof unchecked\" +\n                    \" unsafe using virtual void volatile while add alias ascending descending dynamic from get\" +\n                    \" global group into join let orderby partial remove select set value var yield\"),\n    types: words(\"Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func\" +\n                 \" Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32\" +\n                 \" UInt64 bool byte char decimal double short int long object\"  +\n                 \" sbyte float string ushort uint ulong\"),\n    blockKeywords: words(\"catch class do else finally for foreach if struct switch try while\"),\n    defKeywords: words(\"class interface namespace struct var\"),\n    typeFirstDefinitions: true,\n    atoms: words(\"true false null\"),\n    hooks: {\n      \"@\": function(stream, state) {\n        if (stream.eat('\"')) {\n          state.tokenize = tokenAtString;\n          return tokenAtString(stream, state);\n        }\n        stream.eatWhile(/[\\w\\$_]/);\n        return \"meta\";\n      }\n    }\n  });\n\n  function tokenTripleString(stream, state) {\n    var escaped = false;\n    while (!stream.eol()) {\n      if (!escaped && stream.match('\"\"\"')) {\n        state.tokenize = null;\n        break;\n      }\n      escaped = stream.next() == \"\\\\\" && !escaped;\n    }\n    return \"string\";\n  }\n\n  def(\"text/x-scala\", {\n    name: \"clike\",\n    keywords: words(\n\n      /* scala */\n      \"abstract case catch class def do else extends final finally for forSome if \" +\n      \"implicit import lazy match new null object override package private protected return \" +\n      \"sealed super this throw trait try type val var while with yield _ : = => <- <: \" +\n      \"<% >: # @ \" +\n\n      /* package scala */\n      \"assert assume require print println printf readLine readBoolean readByte readShort \" +\n      \"readChar readInt readLong readFloat readDouble \" +\n\n      \":: #:: \"\n    ),\n    types: words(\n      \"AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either \" +\n      \"Enumeration Equiv Error Exception Fractional Function IndexedSeq Integral Iterable \" +\n      \"Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering \" +\n      \"Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder \" +\n      \"StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector \" +\n\n      /* package java.lang */\n      \"Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable \" +\n      \"Compiler Double Exception Float Integer Long Math Number Object Package Pair Process \" +\n      \"Runtime Runnable SecurityManager Short StackTraceElement StrictMath String \" +\n      \"StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void\"\n    ),\n    multiLineStrings: true,\n    blockKeywords: words(\"catch class do else finally for forSome if match switch try while\"),\n    defKeywords: words(\"class def object package trait type val var\"),\n    atoms: words(\"true false null\"),\n    indentStatements: false,\n    indentSwitch: false,\n    hooks: {\n      \"@\": function(stream) {\n        stream.eatWhile(/[\\w\\$_]/);\n        return \"meta\";\n      },\n      '\"': function(stream, state) {\n        if (!stream.match('\"\"')) return false;\n        state.tokenize = tokenTripleString;\n        return state.tokenize(stream, state);\n      },\n      \"'\": function(stream) {\n        stream.eatWhile(/[\\w\\$_\\xa1-\\uffff]/);\n        return \"atom\";\n      }\n    },\n    modeProps: {closeBrackets: {triples: '\"'}}\n  });\n\n  def(\"text/x-kotlin\", {\n    name: \"clike\",\n    keywords: words(\n      /*keywords*/\n      \"package as typealias class interface this super val \" +\n      \"var fun for is in This throw return \" +\n      \"break continue object if else while do try when !in !is as?\" +\n\n      /*soft keywords*/\n      \"file import where by get set abstract enum open inner override private public internal \" +\n      \"protected catch finally out final vararg reified dynamic companion constructor init \" +\n      \"sealed field property receiver param sparam lateinit data inline noinline tailrec \" +\n      \"external annotation crossinline\"\n    ),\n    types: words(\n      /* package java.lang */\n      \"Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable \" +\n      \"Compiler Double Exception Float Integer Long Math Number Object Package Pair Process \" +\n      \"Runtime Runnable SecurityManager Short StackTraceElement StrictMath String \" +\n      \"StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void\"\n    ),\n    multiLineStrings: true,\n    blockKeywords: words(\"catch class do else finally for if where try while enum\"),\n    defKeywords: words(\"class val var object package interface fun\"),\n    atoms: words(\"true false null this\"),\n    modeProps: {closeBrackets: {triples: '\"'}}\n  });\n\n  def([\"x-shader/x-vertex\", \"x-shader/x-fragment\"], {\n    name: \"clike\",\n    keywords: words(\"sampler1D sampler2D sampler3D samplerCube \" +\n                    \"sampler1DShadow sampler2DShadow \" +\n                    \"const attribute uniform varying \" +\n                    \"break continue discard return \" +\n                    \"for while do if else struct \" +\n                    \"in out inout\"),\n    types: words(\"float int bool void \" +\n                 \"vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 \" +\n                 \"mat2 mat3 mat4\"),\n    blockKeywords: words(\"for while do if else struct\"),\n    builtin: words(\"radians degrees sin cos tan asin acos atan \" +\n                    \"pow exp log exp2 sqrt inversesqrt \" +\n                    \"abs sign floor ceil fract mod min max clamp mix step smoothstep \" +\n                    \"length distance dot cross normalize ftransform faceforward \" +\n                    \"reflect refract matrixCompMult \" +\n                    \"lessThan lessThanEqual greaterThan greaterThanEqual \" +\n                    \"equal notEqual any all not \" +\n                    \"texture1D texture1DProj texture1DLod texture1DProjLod \" +\n                    \"texture2D texture2DProj texture2DLod texture2DProjLod \" +\n                    \"texture3D texture3DProj texture3DLod texture3DProjLod \" +\n                    \"textureCube textureCubeLod \" +\n                    \"shadow1D shadow2D shadow1DProj shadow2DProj \" +\n                    \"shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod \" +\n                    \"dFdx dFdy fwidth \" +\n                    \"noise1 noise2 noise3 noise4\"),\n    atoms: words(\"true false \" +\n                \"gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex \" +\n                \"gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 \" +\n                \"gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 \" +\n                \"gl_FogCoord gl_PointCoord \" +\n                \"gl_Position gl_PointSize gl_ClipVertex \" +\n                \"gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor \" +\n                \"gl_TexCoord gl_FogFragCoord \" +\n                \"gl_FragCoord gl_FrontFacing \" +\n                \"gl_FragData gl_FragDepth \" +\n                \"gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix \" +\n                \"gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse \" +\n                \"gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse \" +\n                \"gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose \" +\n                \"gl_ProjectionMatrixInverseTranspose \" +\n                \"gl_ModelViewProjectionMatrixInverseTranspose \" +\n                \"gl_TextureMatrixInverseTranspose \" +\n                \"gl_NormalScale gl_DepthRange gl_ClipPlane \" +\n                \"gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel \" +\n                \"gl_FrontLightModelProduct gl_BackLightModelProduct \" +\n                \"gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ \" +\n                \"gl_FogParameters \" +\n                \"gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords \" +\n                \"gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats \" +\n                \"gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits \" +\n                \"gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits \" +\n                \"gl_MaxDrawBuffers\"),\n    indentSwitch: false,\n    hooks: {\"#\": cppHook},\n    modeProps: {fold: [\"brace\", \"include\"]}\n  });\n\n  def(\"text/x-nesc\", {\n    name: \"clike\",\n    keywords: words(cKeywords + \"as atomic async call command component components configuration event generic \" +\n                    \"implementation includes interface module new norace nx_struct nx_union post provides \" +\n                    \"signal task uses abstract extends\"),\n    types: words(cTypes),\n    blockKeywords: words(\"case do else for if switch while struct\"),\n    atoms: words(\"null true false\"),\n    hooks: {\"#\": cppHook},\n    modeProps: {fold: [\"brace\", \"include\"]}\n  });\n\n  def(\"text/x-objectivec\", {\n    name: \"clike\",\n    keywords: words(cKeywords + \"inline restrict _Bool _Complex _Imaginery BOOL Class bycopy byref id IMP in \" +\n                    \"inout nil oneway out Protocol SEL self super atomic nonatomic retain copy readwrite readonly\"),\n    types: words(cTypes),\n    atoms: words(\"YES NO NULL NILL ON OFF true false\"),\n    hooks: {\n      \"@\": function(stream) {\n        stream.eatWhile(/[\\w\\$]/);\n        return \"keyword\";\n      },\n      \"#\": cppHook,\n      indent: function(_state, ctx, textAfter) {\n        if (ctx.type == \"statement\" && /^@\\w/.test(textAfter)) return ctx.indented\n      }\n    },\n    modeProps: {fold: \"brace\"}\n  });\n\n  def(\"text/x-squirrel\", {\n    name: \"clike\",\n    keywords: words(\"base break clone continue const default delete enum extends function in class\" +\n                    \" foreach local resume return this throw typeof yield constructor instanceof static\"),\n    types: words(cTypes),\n    blockKeywords: words(\"case catch class else for foreach if switch try while\"),\n    defKeywords: words(\"function local class\"),\n    typeFirstDefinitions: true,\n    atoms: words(\"true false null\"),\n    hooks: {\"#\": cppHook},\n    modeProps: {fold: [\"brace\", \"include\"]}\n  });\n\n  // Ceylon Strings need to deal with interpolation\n  var stringTokenizer = null;\n  function tokenCeylonString(type) {\n    return function(stream, state) {\n      var escaped = false, next, end = false;\n      while (!stream.eol()) {\n        if (!escaped && stream.match('\"') &&\n              (type == \"single\" || stream.match('\"\"'))) {\n          end = true;\n          break;\n        }\n        if (!escaped && stream.match('``')) {\n          stringTokenizer = tokenCeylonString(type);\n          end = true;\n          break;\n        }\n        next = stream.next();\n        escaped = type == \"single\" && !escaped && next == \"\\\\\";\n      }\n      if (end)\n          state.tokenize = null;\n      return \"string\";\n    }\n  }\n\n  def(\"text/x-ceylon\", {\n    name: \"clike\",\n    keywords: words(\"abstracts alias assembly assert assign break case catch class continue dynamic else\" +\n                    \" exists extends finally for function given if import in interface is let module new\" +\n                    \" nonempty object of out outer package return satisfies super switch then this throw\" +\n                    \" try value void while\"),\n    types: function(word) {\n        // In Ceylon all identifiers that start with an uppercase are types\n        var first = word.charAt(0);\n        return (first === first.toUpperCase() && first !== first.toLowerCase());\n    },\n    blockKeywords: words(\"case catch class dynamic else finally for function if interface module new object switch try while\"),\n    defKeywords: words(\"class dynamic function interface module object package value\"),\n    builtin: words(\"abstract actual aliased annotation by default deprecated doc final formal late license\" +\n                   \" native optional sealed see serializable shared suppressWarnings tagged throws variable\"),\n    isPunctuationChar: /[\\[\\]{}\\(\\),;\\:\\.`]/,\n    isOperatorChar: /[+\\-*&%=<>!?|^~:\\/]/,\n    isNumberChar: /[\\d#$]/,\n    multiLineStrings: true,\n    typeFirstDefinitions: true,\n    atoms: words(\"true false null larger smaller equal empty finished\"),\n    indentSwitch: false,\n    styleDefs: false,\n    hooks: {\n      \"@\": function(stream) {\n        stream.eatWhile(/[\\w\\$_]/);\n        return \"meta\";\n      },\n      '\"': function(stream, state) {\n          state.tokenize = tokenCeylonString(stream.match('\"\"') ? \"triple\" : \"single\");\n          return state.tokenize(stream, state);\n        },\n      '`': function(stream, state) {\n          if (!stringTokenizer || !stream.match('`')) return false;\n          state.tokenize = stringTokenizer;\n          stringTokenizer = null;\n          return state.tokenize(stream, state);\n        },\n      \"'\": function(stream) {\n        stream.eatWhile(/[\\w\\$_\\xa1-\\uffff]/);\n        return \"atom\";\n      },\n      token: function(_stream, state, style) {\n          if ((style == \"variable\" || style == \"variable-3\") &&\n              state.prevToken == \".\") {\n            return \"variable-2\";\n          }\n        }\n    },\n    modeProps: {\n        fold: [\"brace\", \"import\"],\n        closeBrackets: {triples: '\"'}\n    }\n  });\n\n});\n\n},{\"../../lib/codemirror\":30}],32:[function(_dereq_,module,exports){\n_dereq_('../modules/web.dom.iterable');\n_dereq_('../modules/es6.string.iterator');\nmodule.exports = _dereq_('../modules/core.get-iterator');\n},{\"../modules/core.get-iterator\":95,\"../modules/es6.string.iterator\":104,\"../modules/web.dom.iterable\":106}],33:[function(_dereq_,module,exports){\n_dereq_('../../modules/es6.object.assign');\nmodule.exports = _dereq_('../../modules/$.core').Object.assign;\n},{\"../../modules/$.core\":49,\"../../modules/es6.object.assign\":97}],34:[function(_dereq_,module,exports){\nvar $ = _dereq_('../../modules/$');\nmodule.exports = function create(P, D){\n  return $.create(P, D);\n};\n},{\"../../modules/$\":71}],35:[function(_dereq_,module,exports){\nvar $ = _dereq_('../../modules/$');\nmodule.exports = function defineProperty(it, key, desc){\n  return $.setDesc(it, key, desc);\n};\n},{\"../../modules/$\":71}],36:[function(_dereq_,module,exports){\nvar $ = _dereq_('../../modules/$');\n_dereq_('../../modules/es6.object.get-own-property-descriptor');\nmodule.exports = function getOwnPropertyDescriptor(it, key){\n  return $.getDesc(it, key);\n};\n},{\"../../modules/$\":71,\"../../modules/es6.object.get-own-property-descriptor\":98}],37:[function(_dereq_,module,exports){\n_dereq_('../../modules/es6.object.keys');\nmodule.exports = _dereq_('../../modules/$.core').Object.keys;\n},{\"../../modules/$.core\":49,\"../../modules/es6.object.keys\":99}],38:[function(_dereq_,module,exports){\n_dereq_('../../modules/es6.object.set-prototype-of');\nmodule.exports = _dereq_('../../modules/$.core').Object.setPrototypeOf;\n},{\"../../modules/$.core\":49,\"../../modules/es6.object.set-prototype-of\":100}],39:[function(_dereq_,module,exports){\n_dereq_('../modules/es6.object.to-string');\n_dereq_('../modules/es6.string.iterator');\n_dereq_('../modules/web.dom.iterable');\n_dereq_('../modules/es6.promise');\nmodule.exports = _dereq_('../modules/$.core').Promise;\n},{\"../modules/$.core\":49,\"../modules/es6.object.to-string\":101,\"../modules/es6.promise\":102,\"../modules/es6.string.iterator\":104,\"../modules/web.dom.iterable\":106}],40:[function(_dereq_,module,exports){\n_dereq_('../modules/es6.object.to-string');\n_dereq_('../modules/es6.string.iterator');\n_dereq_('../modules/web.dom.iterable');\n_dereq_('../modules/es6.set');\n_dereq_('../modules/es7.set.to-json');\nmodule.exports = _dereq_('../modules/$.core').Set;\n},{\"../modules/$.core\":49,\"../modules/es6.object.to-string\":101,\"../modules/es6.set\":103,\"../modules/es6.string.iterator\":104,\"../modules/es7.set.to-json\":105,\"../modules/web.dom.iterable\":106}],41:[function(_dereq_,module,exports){\nmodule.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n},{}],42:[function(_dereq_,module,exports){\nmodule.exports = function(){ /* empty */ };\n},{}],43:[function(_dereq_,module,exports){\nvar isObject = _dereq_('./$.is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n},{\"./$.is-object\":64}],44:[function(_dereq_,module,exports){\n// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = _dereq_('./$.cof')\n  , TAG = _dereq_('./$.wks')('toStringTag')\n  // ES3 wrong here\n  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\nmodule.exports = function(it){\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = (O = Object(it))[TAG]) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n},{\"./$.cof\":45,\"./$.wks\":93}],45:[function(_dereq_,module,exports){\nvar toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n},{}],46:[function(_dereq_,module,exports){\n'use strict';\nvar $            = _dereq_('./$')\n  , hide         = _dereq_('./$.hide')\n  , redefineAll  = _dereq_('./$.redefine-all')\n  , ctx          = _dereq_('./$.ctx')\n  , strictNew    = _dereq_('./$.strict-new')\n  , defined      = _dereq_('./$.defined')\n  , forOf        = _dereq_('./$.for-of')\n  , $iterDefine  = _dereq_('./$.iter-define')\n  , step         = _dereq_('./$.iter-step')\n  , ID           = _dereq_('./$.uid')('id')\n  , $has         = _dereq_('./$.has')\n  , isObject     = _dereq_('./$.is-object')\n  , setSpecies   = _dereq_('./$.set-species')\n  , DESCRIPTORS  = _dereq_('./$.descriptors')\n  , isExtensible = Object.isExtensible || isObject\n  , SIZE         = DESCRIPTORS ? '_s' : 'size'\n  , id           = 0;\n\nvar fastKey = function(it, create){\n  // return primitive with prefix\n  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if(!$has(it, ID)){\n    // can't set id to frozen object\n    if(!isExtensible(it))return 'F';\n    // not necessary to add id\n    if(!create)return 'E';\n    // add missing object id\n    hide(it, ID, ++id);\n  // return object id with prefix\n  } return 'O' + it[ID];\n};\n\nvar getEntry = function(that, key){\n  // fast case\n  var index = fastKey(key), entry;\n  if(index !== 'F')return that._i[index];\n  // frozen object case\n  for(entry = that._f; entry; entry = entry.n){\n    if(entry.k == key)return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function(wrapper, NAME, IS_MAP, ADDER){\n    var C = wrapper(function(that, iterable){\n      strictNew(that, C, NAME);\n      that._i = $.create(null); // index\n      that._f = undefined;      // first entry\n      that._l = undefined;      // last entry\n      that[SIZE] = 0;           // size\n      if(iterable != undefined)forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear(){\n        for(var that = this, data = that._i, entry = that._f; entry; entry = entry.n){\n          entry.r = true;\n          if(entry.p)entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function(key){\n        var that  = this\n          , entry = getEntry(that, key);\n        if(entry){\n          var next = entry.n\n            , prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if(prev)prev.n = next;\n          if(next)next.p = prev;\n          if(that._f == entry)that._f = next;\n          if(that._l == entry)that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /*, that = undefined */){\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3)\n          , entry;\n        while(entry = entry ? entry.n : this._f){\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while(entry && entry.r)entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key){\n        return !!getEntry(this, key);\n      }\n    });\n    if(DESCRIPTORS)$.setDesc(C.prototype, 'size', {\n      get: function(){\n        return defined(this[SIZE]);\n      }\n    });\n    return C;\n  },\n  def: function(that, key, value){\n    var entry = getEntry(that, key)\n      , prev, index;\n    // change existing entry\n    if(entry){\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if(!that._f)that._f = entry;\n      if(prev)prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if(index !== 'F')that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function(C, NAME, IS_MAP){\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function(iterated, kind){\n      this._t = iterated;  // target\n      this._k = kind;      // kind\n      this._l = undefined; // previous\n    }, function(){\n      var that  = this\n        , kind  = that._k\n        , entry = that._l;\n      // revert to the last existing entry\n      while(entry && entry.r)entry = entry.p;\n      // get next entry\n      if(!that._t || !(that._l = entry = entry ? entry.n : that._t._f)){\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if(kind == 'keys'  )return step(0, entry.k);\n      if(kind == 'values')return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values' , !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};\n},{\"./$\":71,\"./$.ctx\":50,\"./$.defined\":51,\"./$.descriptors\":52,\"./$.for-of\":56,\"./$.has\":58,\"./$.hide\":59,\"./$.is-object\":64,\"./$.iter-define\":67,\"./$.iter-step\":69,\"./$.redefine-all\":77,\"./$.set-species\":81,\"./$.strict-new\":85,\"./$.uid\":92}],47:[function(_dereq_,module,exports){\n// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar forOf   = _dereq_('./$.for-of')\n  , classof = _dereq_('./$.classof');\nmodule.exports = function(NAME){\n  return function toJSON(){\n    if(classof(this) != NAME)throw TypeError(NAME + \"#toJSON isn't generic\");\n    var arr = [];\n    forOf(this, false, arr.push, arr);\n    return arr;\n  };\n};\n},{\"./$.classof\":44,\"./$.for-of\":56}],48:[function(_dereq_,module,exports){\n'use strict';\nvar $              = _dereq_('./$')\n  , global         = _dereq_('./$.global')\n  , $export        = _dereq_('./$.export')\n  , fails          = _dereq_('./$.fails')\n  , hide           = _dereq_('./$.hide')\n  , redefineAll    = _dereq_('./$.redefine-all')\n  , forOf          = _dereq_('./$.for-of')\n  , strictNew      = _dereq_('./$.strict-new')\n  , isObject       = _dereq_('./$.is-object')\n  , setToStringTag = _dereq_('./$.set-to-string-tag')\n  , DESCRIPTORS    = _dereq_('./$.descriptors');\n\nmodule.exports = function(NAME, wrapper, methods, common, IS_MAP, IS_WEAK){\n  var Base  = global[NAME]\n    , C     = Base\n    , ADDER = IS_MAP ? 'set' : 'add'\n    , proto = C && C.prototype\n    , O     = {};\n  if(!DESCRIPTORS || typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function(){\n    new C().entries().next();\n  }))){\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n  } else {\n    C = wrapper(function(target, iterable){\n      strictNew(target, C, NAME);\n      target._c = new Base;\n      if(iterable != undefined)forOf(iterable, IS_MAP, target[ADDER], target);\n    });\n    $.each.call('add,clear,delete,forEach,get,has,set,keys,values,entries'.split(','),function(KEY){\n      var IS_ADDER = KEY == 'add' || KEY == 'set';\n      if(KEY in proto && !(IS_WEAK && KEY == 'clear'))hide(C.prototype, KEY, function(a, b){\n        if(!IS_ADDER && IS_WEAK && !isObject(a))return KEY == 'get' ? undefined : false;\n        var result = this._c[KEY](a === 0 ? 0 : a, b);\n        return IS_ADDER ? this : result;\n      });\n    });\n    if('size' in proto)$.setDesc(C.prototype, 'size', {\n      get: function(){\n        return this._c.size;\n      }\n    });\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F, O);\n\n  if(!IS_WEAK)common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n},{\"./$\":71,\"./$.descriptors\":52,\"./$.export\":54,\"./$.fails\":55,\"./$.for-of\":56,\"./$.global\":57,\"./$.hide\":59,\"./$.is-object\":64,\"./$.redefine-all\":77,\"./$.set-to-string-tag\":82,\"./$.strict-new\":85}],49:[function(_dereq_,module,exports){\nvar core = module.exports = {version: '1.2.6'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n},{}],50:[function(_dereq_,module,exports){\n// optional / simple context binding\nvar aFunction = _dereq_('./$.a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n},{\"./$.a-function\":41}],51:[function(_dereq_,module,exports){\n// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n},{}],52:[function(_dereq_,module,exports){\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !_dereq_('./$.fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n},{\"./$.fails\":55}],53:[function(_dereq_,module,exports){\nvar isObject = _dereq_('./$.is-object')\n  , document = _dereq_('./$.global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n},{\"./$.global\":57,\"./$.is-object\":64}],54:[function(_dereq_,module,exports){\nvar global    = _dereq_('./$.global')\n  , core      = _dereq_('./$.core')\n  , ctx       = _dereq_('./$.ctx')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && key in target;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(param){\n        return this instanceof C ? new C(param) : C(param);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    if(IS_PROTO)(exports[PROTOTYPE] || (exports[PROTOTYPE] = {}))[key] = out;\n  }\n};\n// type bitmap\n$export.F = 1;  // forced\n$export.G = 2;  // global\n$export.S = 4;  // static\n$export.P = 8;  // proto\n$export.B = 16; // bind\n$export.W = 32; // wrap\nmodule.exports = $export;\n},{\"./$.core\":49,\"./$.ctx\":50,\"./$.global\":57}],55:[function(_dereq_,module,exports){\nmodule.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n},{}],56:[function(_dereq_,module,exports){\nvar ctx         = _dereq_('./$.ctx')\n  , call        = _dereq_('./$.iter-call')\n  , isArrayIter = _dereq_('./$.is-array-iter')\n  , anObject    = _dereq_('./$.an-object')\n  , toLength    = _dereq_('./$.to-length')\n  , getIterFn   = _dereq_('./core.get-iterator-method');\nmodule.exports = function(iterable, entries, fn, that){\n  var iterFn = getIterFn(iterable)\n    , f      = ctx(fn, that, entries ? 2 : 1)\n    , index  = 0\n    , length, step, iterator;\n  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){\n    entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){\n    call(iterator, f, step.value, entries);\n  }\n};\n},{\"./$.an-object\":43,\"./$.ctx\":50,\"./$.is-array-iter\":63,\"./$.iter-call\":65,\"./$.to-length\":90,\"./core.get-iterator-method\":94}],57:[function(_dereq_,module,exports){\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n},{}],58:[function(_dereq_,module,exports){\nvar hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n},{}],59:[function(_dereq_,module,exports){\nvar $          = _dereq_('./$')\n  , createDesc = _dereq_('./$.property-desc');\nmodule.exports = _dereq_('./$.descriptors') ? function(object, key, value){\n  return $.setDesc(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n},{\"./$\":71,\"./$.descriptors\":52,\"./$.property-desc\":76}],60:[function(_dereq_,module,exports){\nmodule.exports = _dereq_('./$.global').document && document.documentElement;\n},{\"./$.global\":57}],61:[function(_dereq_,module,exports){\n// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function(fn, args, that){\n  var un = that === undefined;\n  switch(args.length){\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return              fn.apply(that, args);\n};\n},{}],62:[function(_dereq_,module,exports){\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = _dereq_('./$.cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n},{\"./$.cof\":45}],63:[function(_dereq_,module,exports){\n// check on default Array iterator\nvar Iterators  = _dereq_('./$.iterators')\n  , ITERATOR   = _dereq_('./$.wks')('iterator')\n  , ArrayProto = Array.prototype;\n\nmodule.exports = function(it){\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n},{\"./$.iterators\":70,\"./$.wks\":93}],64:[function(_dereq_,module,exports){\nmodule.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n},{}],65:[function(_dereq_,module,exports){\n// call something on iterator step with safe closing on error\nvar anObject = _dereq_('./$.an-object');\nmodule.exports = function(iterator, fn, value, entries){\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch(e){\n    var ret = iterator['return'];\n    if(ret !== undefined)anObject(ret.call(iterator));\n    throw e;\n  }\n};\n},{\"./$.an-object\":43}],66:[function(_dereq_,module,exports){\n'use strict';\nvar $              = _dereq_('./$')\n  , descriptor     = _dereq_('./$.property-desc')\n  , setToStringTag = _dereq_('./$.set-to-string-tag')\n  , IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\n_dereq_('./$.hide')(IteratorPrototype, _dereq_('./$.wks')('iterator'), function(){ return this; });\n\nmodule.exports = function(Constructor, NAME, next){\n  Constructor.prototype = $.create(IteratorPrototype, {next: descriptor(1, next)});\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n},{\"./$\":71,\"./$.hide\":59,\"./$.property-desc\":76,\"./$.set-to-string-tag\":82,\"./$.wks\":93}],67:[function(_dereq_,module,exports){\n'use strict';\nvar LIBRARY        = _dereq_('./$.library')\n  , $export        = _dereq_('./$.export')\n  , redefine       = _dereq_('./$.redefine')\n  , hide           = _dereq_('./$.hide')\n  , has            = _dereq_('./$.has')\n  , Iterators      = _dereq_('./$.iterators')\n  , $iterCreate    = _dereq_('./$.iter-create')\n  , setToStringTag = _dereq_('./$.set-to-string-tag')\n  , getProto       = _dereq_('./$').getProto\n  , ITERATOR       = _dereq_('./$.wks')('iterator')\n  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n  , FF_ITERATOR    = '@@iterator'\n  , KEYS           = 'keys'\n  , VALUES         = 'values';\n\nvar returnThis = function(){ return this; };\n\nmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function(kind){\n    if(!BUGGY && kind in proto)return proto[kind];\n    switch(kind){\n      case KEYS: return function keys(){ return new Constructor(this, kind); };\n      case VALUES: return function values(){ return new Constructor(this, kind); };\n    } return function entries(){ return new Constructor(this, kind); };\n  };\n  var TAG        = NAME + ' Iterator'\n    , DEF_VALUES = DEFAULT == VALUES\n    , VALUES_BUG = false\n    , proto      = Base.prototype\n    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n    , $default   = $native || getMethod(DEFAULT)\n    , methods, key;\n  // Fix native\n  if($native){\n    var IteratorPrototype = getProto($default.call(new Base));\n    // Set @@toStringTag to native iterators\n    setToStringTag(IteratorPrototype, TAG, true);\n    // FF fix\n    if(!LIBRARY && has(proto, FF_ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n    // fix Array#{values, @@iterator}.name in V8 / FF\n    if(DEF_VALUES && $native.name !== VALUES){\n      VALUES_BUG = true;\n      $default = function values(){ return $native.call(this); };\n    }\n  }\n  // Define iterator\n  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG]  = returnThis;\n  if(DEFAULT){\n    methods = {\n      values:  DEF_VALUES  ? $default : getMethod(VALUES),\n      keys:    IS_SET      ? $default : getMethod(KEYS),\n      entries: !DEF_VALUES ? $default : getMethod('entries')\n    };\n    if(FORCED)for(key in methods){\n      if(!(key in proto))redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n},{\"./$\":71,\"./$.export\":54,\"./$.has\":58,\"./$.hide\":59,\"./$.iter-create\":66,\"./$.iterators\":70,\"./$.library\":72,\"./$.redefine\":78,\"./$.set-to-string-tag\":82,\"./$.wks\":93}],68:[function(_dereq_,module,exports){\nvar ITERATOR     = _dereq_('./$.wks')('iterator')\n  , SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function(){ SAFE_CLOSING = true; };\n  Array.from(riter, function(){ throw 2; });\n} catch(e){ /* empty */ }\n\nmodule.exports = function(exec, skipClosing){\n  if(!skipClosing && !SAFE_CLOSING)return false;\n  var safe = false;\n  try {\n    var arr  = [7]\n      , iter = arr[ITERATOR]();\n    iter.next = function(){ return {done: safe = true}; };\n    arr[ITERATOR] = function(){ return iter; };\n    exec(arr);\n  } catch(e){ /* empty */ }\n  return safe;\n};\n},{\"./$.wks\":93}],69:[function(_dereq_,module,exports){\nmodule.exports = function(done, value){\n  return {value: value, done: !!done};\n};\n},{}],70:[function(_dereq_,module,exports){\nmodule.exports = {};\n},{}],71:[function(_dereq_,module,exports){\nvar $Object = Object;\nmodule.exports = {\n  create:     $Object.create,\n  getProto:   $Object.getPrototypeOf,\n  isEnum:     {}.propertyIsEnumerable,\n  getDesc:    $Object.getOwnPropertyDescriptor,\n  setDesc:    $Object.defineProperty,\n  setDescs:   $Object.defineProperties,\n  getKeys:    $Object.keys,\n  getNames:   $Object.getOwnPropertyNames,\n  getSymbols: $Object.getOwnPropertySymbols,\n  each:       [].forEach\n};\n},{}],72:[function(_dereq_,module,exports){\nmodule.exports = true;\n},{}],73:[function(_dereq_,module,exports){\nvar global    = _dereq_('./$.global')\n  , macrotask = _dereq_('./$.task').set\n  , Observer  = global.MutationObserver || global.WebKitMutationObserver\n  , process   = global.process\n  , Promise   = global.Promise\n  , isNode    = _dereq_('./$.cof')(process) == 'process'\n  , head, last, notify;\n\nvar flush = function(){\n  var parent, domain, fn;\n  if(isNode && (parent = process.domain)){\n    process.domain = null;\n    parent.exit();\n  }\n  while(head){\n    domain = head.domain;\n    fn     = head.fn;\n    if(domain)domain.enter();\n    fn(); // <- currently we use it only for Promise - try / catch not required\n    if(domain)domain.exit();\n    head = head.next;\n  } last = undefined;\n  if(parent)parent.enter();\n};\n\n// Node.js\nif(isNode){\n  notify = function(){\n    process.nextTick(flush);\n  };\n// browsers with MutationObserver\n} else if(Observer){\n  var toggle = 1\n    , node   = document.createTextNode('');\n  new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\n  notify = function(){\n    node.data = toggle = -toggle;\n  };\n// environments with maybe non-completely correct, but existent Promise\n} else if(Promise && Promise.resolve){\n  notify = function(){\n    Promise.resolve().then(flush);\n  };\n// for other environments - macrotask based on:\n// - setImmediate\n// - MessageChannel\n// - window.postMessag\n// - onreadystatechange\n// - setTimeout\n} else {\n  notify = function(){\n    // strange IE + webpack dev server bug - use .call(global)\n    macrotask.call(global, flush);\n  };\n}\n\nmodule.exports = function asap(fn){\n  var task = {fn: fn, next: undefined, domain: isNode && process.domain};\n  if(last)last.next = task;\n  if(!head){\n    head = task;\n    notify();\n  } last = task;\n};\n},{\"./$.cof\":45,\"./$.global\":57,\"./$.task\":87}],74:[function(_dereq_,module,exports){\n// 19.1.2.1 Object.assign(target, source, ...)\nvar $        = _dereq_('./$')\n  , toObject = _dereq_('./$.to-object')\n  , IObject  = _dereq_('./$.iobject');\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = _dereq_('./$.fails')(function(){\n  var a = Object.assign\n    , A = {}\n    , B = {}\n    , S = Symbol()\n    , K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function(k){ B[k] = k; });\n  return a({}, A)[S] != 7 || Object.keys(a({}, B)).join('') != K;\n}) ? function assign(target, source){ // eslint-disable-line no-unused-vars\n  var T     = toObject(target)\n    , $$    = arguments\n    , $$len = $$.length\n    , index = 1\n    , getKeys    = $.getKeys\n    , getSymbols = $.getSymbols\n    , isEnum     = $.isEnum;\n  while($$len > index){\n    var S      = IObject($$[index++])\n      , keys   = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S)\n      , length = keys.length\n      , j      = 0\n      , key;\n    while(length > j)if(isEnum.call(S, key = keys[j++]))T[key] = S[key];\n  }\n  return T;\n} : Object.assign;\n},{\"./$\":71,\"./$.fails\":55,\"./$.iobject\":62,\"./$.to-object\":91}],75:[function(_dereq_,module,exports){\n// most Object methods by ES6 should accept primitives\nvar $export = _dereq_('./$.export')\n  , core    = _dereq_('./$.core')\n  , fails   = _dereq_('./$.fails');\nmodule.exports = function(KEY, exec){\n  var fn  = (core.Object || {})[KEY] || Object[KEY]\n    , exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);\n};\n},{\"./$.core\":49,\"./$.export\":54,\"./$.fails\":55}],76:[function(_dereq_,module,exports){\nmodule.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n},{}],77:[function(_dereq_,module,exports){\nvar redefine = _dereq_('./$.redefine');\nmodule.exports = function(target, src){\n  for(var key in src)redefine(target, key, src[key]);\n  return target;\n};\n},{\"./$.redefine\":78}],78:[function(_dereq_,module,exports){\nmodule.exports = _dereq_('./$.hide');\n},{\"./$.hide\":59}],79:[function(_dereq_,module,exports){\n// 7.2.9 SameValue(x, y)\nmodule.exports = Object.is || function is(x, y){\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n},{}],80:[function(_dereq_,module,exports){\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar getDesc  = _dereq_('./$').getDesc\n  , isObject = _dereq_('./$.is-object')\n  , anObject = _dereq_('./$.an-object');\nvar check = function(O, proto){\n  anObject(O);\n  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function(test, buggy, set){\n      try {\n        set = _dereq_('./$.ctx')(Function.call, getDesc(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch(e){ buggy = true; }\n      return function setPrototypeOf(O, proto){\n        check(O, proto);\n        if(buggy)O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n},{\"./$\":71,\"./$.an-object\":43,\"./$.ctx\":50,\"./$.is-object\":64}],81:[function(_dereq_,module,exports){\n'use strict';\nvar core        = _dereq_('./$.core')\n  , $           = _dereq_('./$')\n  , DESCRIPTORS = _dereq_('./$.descriptors')\n  , SPECIES     = _dereq_('./$.wks')('species');\n\nmodule.exports = function(KEY){\n  var C = core[KEY];\n  if(DESCRIPTORS && C && !C[SPECIES])$.setDesc(C, SPECIES, {\n    configurable: true,\n    get: function(){ return this; }\n  });\n};\n},{\"./$\":71,\"./$.core\":49,\"./$.descriptors\":52,\"./$.wks\":93}],82:[function(_dereq_,module,exports){\nvar def = _dereq_('./$').setDesc\n  , has = _dereq_('./$.has')\n  , TAG = _dereq_('./$.wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};\n},{\"./$\":71,\"./$.has\":58,\"./$.wks\":93}],83:[function(_dereq_,module,exports){\nvar global = _dereq_('./$.global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n},{\"./$.global\":57}],84:[function(_dereq_,module,exports){\n// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject  = _dereq_('./$.an-object')\n  , aFunction = _dereq_('./$.a-function')\n  , SPECIES   = _dereq_('./$.wks')('species');\nmodule.exports = function(O, D){\n  var C = anObject(O).constructor, S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n},{\"./$.a-function\":41,\"./$.an-object\":43,\"./$.wks\":93}],85:[function(_dereq_,module,exports){\nmodule.exports = function(it, Constructor, name){\n  if(!(it instanceof Constructor))throw TypeError(name + \": use the 'new' operator!\");\n  return it;\n};\n},{}],86:[function(_dereq_,module,exports){\nvar toInteger = _dereq_('./$.to-integer')\n  , defined   = _dereq_('./$.defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function(TO_STRING){\n  return function(that, pos){\n    var s = String(defined(that))\n      , i = toInteger(pos)\n      , l = s.length\n      , a, b;\n    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n},{\"./$.defined\":51,\"./$.to-integer\":88}],87:[function(_dereq_,module,exports){\nvar ctx                = _dereq_('./$.ctx')\n  , invoke             = _dereq_('./$.invoke')\n  , html               = _dereq_('./$.html')\n  , cel                = _dereq_('./$.dom-create')\n  , global             = _dereq_('./$.global')\n  , process            = global.process\n  , setTask            = global.setImmediate\n  , clearTask          = global.clearImmediate\n  , MessageChannel     = global.MessageChannel\n  , counter            = 0\n  , queue              = {}\n  , ONREADYSTATECHANGE = 'onreadystatechange'\n  , defer, channel, port;\nvar run = function(){\n  var id = +this;\n  if(queue.hasOwnProperty(id)){\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listner = function(event){\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif(!setTask || !clearTask){\n  setTask = function setImmediate(fn){\n    var args = [], i = 1;\n    while(arguments.length > i)args.push(arguments[i++]);\n    queue[++counter] = function(){\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id){\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if(_dereq_('./$.cof')(process) == 'process'){\n    defer = function(id){\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if(MessageChannel){\n    channel = new MessageChannel;\n    port    = channel.port2;\n    channel.port1.onmessage = listner;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n    defer = function(id){\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listner, false);\n  // IE8-\n  } else if(ONREADYSTATECHANGE in cel('script')){\n    defer = function(id){\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function(id){\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set:   setTask,\n  clear: clearTask\n};\n},{\"./$.cof\":45,\"./$.ctx\":50,\"./$.dom-create\":53,\"./$.global\":57,\"./$.html\":60,\"./$.invoke\":61}],88:[function(_dereq_,module,exports){\n// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n},{}],89:[function(_dereq_,module,exports){\n// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = _dereq_('./$.iobject')\n  , defined = _dereq_('./$.defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n},{\"./$.defined\":51,\"./$.iobject\":62}],90:[function(_dereq_,module,exports){\n// 7.1.15 ToLength\nvar toInteger = _dereq_('./$.to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n},{\"./$.to-integer\":88}],91:[function(_dereq_,module,exports){\n// 7.1.13 ToObject(argument)\nvar defined = _dereq_('./$.defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};\n},{\"./$.defined\":51}],92:[function(_dereq_,module,exports){\nvar id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n},{}],93:[function(_dereq_,module,exports){\nvar store  = _dereq_('./$.shared')('wks')\n  , uid    = _dereq_('./$.uid')\n  , Symbol = _dereq_('./$.global').Symbol;\nmodule.exports = function(name){\n  return store[name] || (store[name] =\n    Symbol && Symbol[name] || (Symbol || uid)('Symbol.' + name));\n};\n},{\"./$.global\":57,\"./$.shared\":83,\"./$.uid\":92}],94:[function(_dereq_,module,exports){\nvar classof   = _dereq_('./$.classof')\n  , ITERATOR  = _dereq_('./$.wks')('iterator')\n  , Iterators = _dereq_('./$.iterators');\nmodule.exports = _dereq_('./$.core').getIteratorMethod = function(it){\n  if(it != undefined)return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n},{\"./$.classof\":44,\"./$.core\":49,\"./$.iterators\":70,\"./$.wks\":93}],95:[function(_dereq_,module,exports){\nvar anObject = _dereq_('./$.an-object')\n  , get      = _dereq_('./core.get-iterator-method');\nmodule.exports = _dereq_('./$.core').getIterator = function(it){\n  var iterFn = get(it);\n  if(typeof iterFn != 'function')throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n},{\"./$.an-object\":43,\"./$.core\":49,\"./core.get-iterator-method\":94}],96:[function(_dereq_,module,exports){\n'use strict';\nvar addToUnscopables = _dereq_('./$.add-to-unscopables')\n  , step             = _dereq_('./$.iter-step')\n  , Iterators        = _dereq_('./$.iterators')\n  , toIObject        = _dereq_('./$.to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = _dereq_('./$.iter-define')(Array, 'Array', function(iterated, kind){\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , kind  = this._k\n    , index = this._i++;\n  if(!O || index >= O.length){\n    this._t = undefined;\n    return step(1);\n  }\n  if(kind == 'keys'  )return step(0, index);\n  if(kind == 'values')return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n},{\"./$.add-to-unscopables\":42,\"./$.iter-define\":67,\"./$.iter-step\":69,\"./$.iterators\":70,\"./$.to-iobject\":89}],97:[function(_dereq_,module,exports){\n// 19.1.3.1 Object.assign(target, source)\nvar $export = _dereq_('./$.export');\n\n$export($export.S + $export.F, 'Object', {assign: _dereq_('./$.object-assign')});\n},{\"./$.export\":54,\"./$.object-assign\":74}],98:[function(_dereq_,module,exports){\n// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\nvar toIObject = _dereq_('./$.to-iobject');\n\n_dereq_('./$.object-sap')('getOwnPropertyDescriptor', function($getOwnPropertyDescriptor){\n  return function getOwnPropertyDescriptor(it, key){\n    return $getOwnPropertyDescriptor(toIObject(it), key);\n  };\n});\n},{\"./$.object-sap\":75,\"./$.to-iobject\":89}],99:[function(_dereq_,module,exports){\n// 19.1.2.14 Object.keys(O)\nvar toObject = _dereq_('./$.to-object');\n\n_dereq_('./$.object-sap')('keys', function($keys){\n  return function keys(it){\n    return $keys(toObject(it));\n  };\n});\n},{\"./$.object-sap\":75,\"./$.to-object\":91}],100:[function(_dereq_,module,exports){\n// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = _dereq_('./$.export');\n$export($export.S, 'Object', {setPrototypeOf: _dereq_('./$.set-proto').set});\n},{\"./$.export\":54,\"./$.set-proto\":80}],101:[function(_dereq_,module,exports){\n\n},{}],102:[function(_dereq_,module,exports){\n'use strict';\nvar $          = _dereq_('./$')\n  , LIBRARY    = _dereq_('./$.library')\n  , global     = _dereq_('./$.global')\n  , ctx        = _dereq_('./$.ctx')\n  , classof    = _dereq_('./$.classof')\n  , $export    = _dereq_('./$.export')\n  , isObject   = _dereq_('./$.is-object')\n  , anObject   = _dereq_('./$.an-object')\n  , aFunction  = _dereq_('./$.a-function')\n  , strictNew  = _dereq_('./$.strict-new')\n  , forOf      = _dereq_('./$.for-of')\n  , setProto   = _dereq_('./$.set-proto').set\n  , same       = _dereq_('./$.same-value')\n  , SPECIES    = _dereq_('./$.wks')('species')\n  , speciesConstructor = _dereq_('./$.species-constructor')\n  , asap       = _dereq_('./$.microtask')\n  , PROMISE    = 'Promise'\n  , process    = global.process\n  , isNode     = classof(process) == 'process'\n  , P          = global[PROMISE]\n  , empty      = function(){ /* empty */ }\n  , Wrapper;\n\nvar testResolve = function(sub){\n  var test = new P(empty), promise;\n  if(sub)test.constructor = function(exec){\n    exec(empty, empty);\n  };\n  (promise = P.resolve(test))['catch'](empty);\n  return promise === test;\n};\n\nvar USE_NATIVE = function(){\n  var works = false;\n  function P2(x){\n    var self = new P(x);\n    setProto(self, P2.prototype);\n    return self;\n  }\n  try {\n    works = P && P.resolve && testResolve();\n    setProto(P2, P);\n    P2.prototype = $.create(P.prototype, {constructor: {value: P2}});\n    // actual Firefox has broken subclass support, test that\n    if(!(P2.resolve(5).then(function(){}) instanceof P2)){\n      works = false;\n    }\n    // actual V8 bug, https://code.google.com/p/v8/issues/detail?id=4162\n    if(works && _dereq_('./$.descriptors')){\n      var thenableThenGotten = false;\n      P.resolve($.setDesc({}, 'then', {\n        get: function(){ thenableThenGotten = true; }\n      }));\n      works = thenableThenGotten;\n    }\n  } catch(e){ works = false; }\n  return works;\n}();\n\n// helpers\nvar sameConstructor = function(a, b){\n  // library wrapper special case\n  if(LIBRARY && a === P && b === Wrapper)return true;\n  return same(a, b);\n};\nvar getConstructor = function(C){\n  var S = anObject(C)[SPECIES];\n  return S != undefined ? S : C;\n};\nvar isThenable = function(it){\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar PromiseCapability = function(C){\n  var resolve, reject;\n  this.promise = new C(function($$resolve, $$reject){\n    if(resolve !== undefined || reject !== undefined)throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject  = $$reject;\n  });\n  this.resolve = aFunction(resolve),\n  this.reject  = aFunction(reject)\n};\nvar perform = function(exec){\n  try {\n    exec();\n  } catch(e){\n    return {error: e};\n  }\n};\nvar notify = function(record, isReject){\n  if(record.n)return;\n  record.n = true;\n  var chain = record.c;\n  asap(function(){\n    var value = record.v\n      , ok    = record.s == 1\n      , i     = 0;\n    var run = function(reaction){\n      var handler = ok ? reaction.ok : reaction.fail\n        , resolve = reaction.resolve\n        , reject  = reaction.reject\n        , result, then;\n      try {\n        if(handler){\n          if(!ok)record.h = true;\n          result = handler === true ? value : handler(value);\n          if(result === reaction.promise){\n            reject(TypeError('Promise-chain cycle'));\n          } else if(then = isThenable(result)){\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch(e){\n        reject(e);\n      }\n    };\n    while(chain.length > i)run(chain[i++]); // variable length - can't use forEach\n    chain.length = 0;\n    record.n = false;\n    if(isReject)setTimeout(function(){\n      var promise = record.p\n        , handler, console;\n      if(isUnhandled(promise)){\n        if(isNode){\n          process.emit('unhandledRejection', value, promise);\n        } else if(handler = global.onunhandledrejection){\n          handler({promise: promise, reason: value});\n        } else if((console = global.console) && console.error){\n          console.error('Unhandled promise rejection', value);\n        }\n      } record.a = undefined;\n    }, 1);\n  });\n};\nvar isUnhandled = function(promise){\n  var record = promise._d\n    , chain  = record.a || record.c\n    , i      = 0\n    , reaction;\n  if(record.h)return false;\n  while(chain.length > i){\n    reaction = chain[i++];\n    if(reaction.fail || !isUnhandled(reaction.promise))return false;\n  } return true;\n};\nvar $reject = function(value){\n  var record = this;\n  if(record.d)return;\n  record.d = true;\n  record = record.r || record; // unwrap\n  record.v = value;\n  record.s = 2;\n  record.a = record.c.slice();\n  notify(record, true);\n};\nvar $resolve = function(value){\n  var record = this\n    , then;\n  if(record.d)return;\n  record.d = true;\n  record = record.r || record; // unwrap\n  try {\n    if(record.p === value)throw TypeError(\"Promise can't be resolved itself\");\n    if(then = isThenable(value)){\n      asap(function(){\n        var wrapper = {r: record, d: false}; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch(e){\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      record.v = value;\n      record.s = 1;\n      notify(record, false);\n    }\n  } catch(e){\n    $reject.call({r: record, d: false}, e); // wrap\n  }\n};\n\n// constructor polyfill\nif(!USE_NATIVE){\n  // 25.4.3.1 Promise(executor)\n  P = function Promise(executor){\n    aFunction(executor);\n    var record = this._d = {\n      p: strictNew(this, P, PROMISE),         // <- promise\n      c: [],                                  // <- awaiting reactions\n      a: undefined,                           // <- checked in isUnhandled reactions\n      s: 0,                                   // <- state\n      d: false,                               // <- done\n      v: undefined,                           // <- value\n      h: false,                               // <- handled rejection\n      n: false                                // <- notify\n    };\n    try {\n      executor(ctx($resolve, record, 1), ctx($reject, record, 1));\n    } catch(err){\n      $reject.call(record, err);\n    }\n  };\n  _dereq_('./$.redefine-all')(P.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected){\n      var reaction = new PromiseCapability(speciesConstructor(this, P))\n        , promise  = reaction.promise\n        , record   = this._d;\n      reaction.ok   = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      record.c.push(reaction);\n      if(record.a)record.a.push(reaction);\n      if(record.s)notify(record, false);\n      return promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function(onRejected){\n      return this.then(undefined, onRejected);\n    }\n  });\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Promise: P});\n_dereq_('./$.set-to-string-tag')(P, PROMISE);\n_dereq_('./$.set-species')(PROMISE);\nWrapper = _dereq_('./$.core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r){\n    var capability = new PromiseCapability(this)\n      , $$reject   = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (!USE_NATIVE || testResolve(true)), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x){\n    // instanceof instead of internal slot check because we should fix it without replacement native Promise core\n    if(x instanceof P && sameConstructor(x.constructor, this))return x;\n    var capability = new PromiseCapability(this)\n      , $$resolve  = capability.resolve;\n    $$resolve(x);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && _dereq_('./$.iter-detect')(function(iter){\n  P.all(iter)['catch'](function(){});\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable){\n    var C          = getConstructor(this)\n      , capability = new PromiseCapability(C)\n      , resolve    = capability.resolve\n      , reject     = capability.reject\n      , values     = [];\n    var abrupt = perform(function(){\n      forOf(iterable, false, values.push, values);\n      var remaining = values.length\n        , results   = Array(remaining);\n      if(remaining)$.each.call(values, function(promise, index){\n        var alreadyCalled = false;\n        C.resolve(promise).then(function(value){\n          if(alreadyCalled)return;\n          alreadyCalled = true;\n          results[index] = value;\n          --remaining || resolve(results);\n        }, reject);\n      });\n      else resolve(results);\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable){\n    var C          = getConstructor(this)\n      , capability = new PromiseCapability(C)\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      forOf(iterable, false, function(promise){\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  }\n});\n},{\"./$\":71,\"./$.a-function\":41,\"./$.an-object\":43,\"./$.classof\":44,\"./$.core\":49,\"./$.ctx\":50,\"./$.descriptors\":52,\"./$.export\":54,\"./$.for-of\":56,\"./$.global\":57,\"./$.is-object\":64,\"./$.iter-detect\":68,\"./$.library\":72,\"./$.microtask\":73,\"./$.redefine-all\":77,\"./$.same-value\":79,\"./$.set-proto\":80,\"./$.set-species\":81,\"./$.set-to-string-tag\":82,\"./$.species-constructor\":84,\"./$.strict-new\":85,\"./$.wks\":93}],103:[function(_dereq_,module,exports){\n'use strict';\nvar strong = _dereq_('./$.collection-strong');\n\n// 23.2 Set Objects\n_dereq_('./$.collection')('Set', function(get){\n  return function Set(){ return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.2.3.1 Set.prototype.add(value)\n  add: function add(value){\n    return strong.def(this, value = value === 0 ? 0 : value, value);\n  }\n}, strong);\n},{\"./$.collection\":48,\"./$.collection-strong\":46}],104:[function(_dereq_,module,exports){\n'use strict';\nvar $at  = _dereq_('./$.string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\n_dereq_('./$.iter-define')(String, 'String', function(iterated){\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , index = this._i\n    , point;\n  if(index >= O.length)return {value: undefined, done: true};\n  point = $at(O, index);\n  this._i += point.length;\n  return {value: point, done: false};\n});\n},{\"./$.iter-define\":67,\"./$.string-at\":86}],105:[function(_dereq_,module,exports){\n// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export  = _dereq_('./$.export');\n\n$export($export.P, 'Set', {toJSON: _dereq_('./$.collection-to-json')('Set')});\n},{\"./$.collection-to-json\":47,\"./$.export\":54}],106:[function(_dereq_,module,exports){\n_dereq_('./es6.array.iterator');\nvar Iterators = _dereq_('./$.iterators');\nIterators.NodeList = Iterators.HTMLCollection = Iterators.Array;\n},{\"./$.iterators\":70,\"./es6.array.iterator\":96}],107:[function(_dereq_,module,exports){\n;(function(root) {\n  /**\n   * Constructs a new cross storage client given the url to a hub. By default,\n   * an iframe is created within the document body that points to the url. It\n   * also accepts an options object, which may include a timeout, frameId, and\n   * promise. The timeout, in milliseconds, is applied to each request and\n   * defaults to 5000ms. The options object may also include a frameId,\n   * identifying an existing frame on which to install its listeners. If the\n   * promise key is supplied the constructor for a Promise, that Promise library\n   * will be used instead of the default window.Promise.\n   *\n   * @example\n   * var storage = new CrossStorageClient('https://store.example.com/hub.html');\n   *\n   * @example\n   * var storage = new CrossStorageClient('https://store.example.com/hub.html', {\n   *   timeout: 5000,\n   *   frameId: 'storageFrame'\n   * });\n   *\n   * @constructor\n   *\n   * @param {string} url    The url to a cross storage hub\n   * @param {object} [opts] An optional object containing additional options,\n   *                        including timeout, frameId, and promise\n   *\n   * @property {string}   _id        A UUID v4 id\n   * @property {function} _promise   The Promise object to use\n   * @property {string}   _frameId   The id of the iFrame pointing to the hub url\n   * @property {string}   _origin    The hub's origin\n   * @property {object}   _requests  Mapping of request ids to callbacks\n   * @property {bool}     _connected Whether or not it has connected\n   * @property {bool}     _closed    Whether or not the client has closed\n   * @property {int}      _count     Number of requests sent\n   * @property {function} _listener  The listener added to the window\n   * @property {Window}   _hub       The hub window\n   */\n  function CrossStorageClient(url, opts) {\n    opts = opts || {};\n\n    this._id        = CrossStorageClient._generateUUID();\n    this._promise   = opts.promise || Promise;\n    this._frameId   = opts.frameId || 'CrossStorageClient-' + this._id;\n    this._origin    = CrossStorageClient._getOrigin(url);\n    this._requests  = {};\n    this._connected = false;\n    this._closed    = false;\n    this._count     = 0;\n    this._timeout   = opts.timeout || 5000;\n    this._listener  = null;\n\n    this._installListener();\n\n    var frame;\n    if (opts.frameId) {\n      frame = document.getElementById(opts.frameId);\n    }\n\n    // If using a passed iframe, poll the hub for a ready message\n    if (frame) {\n      this._poll();\n    }\n\n    // Create the frame if not found or specified\n    frame = frame || this._createFrame(url);\n    this._hub = frame.contentWindow;\n  }\n\n  /**\n   * The styles to be applied to the generated iFrame. Defines a set of properties\n   * that hide the element by positioning it outside of the visible area, and\n   * by modifying its display.\n   *\n   * @member {Object}\n   */\n  CrossStorageClient.frameStyle = {\n    display:  'none',\n    position: 'absolute',\n    top:      '-999px',\n    left:     '-999px'\n  };\n\n  /**\n   * Returns the origin of an url, with cross browser support. Accommodates\n   * the lack of location.origin in IE, as well as the discrepancies in the\n   * inclusion of the port when using the default port for a protocol, e.g.\n   * 443 over https. Defaults to the origin of window.location if passed a\n   * relative path.\n   *\n   * @param   {string} url The url to a cross storage hub\n   * @returns {string} The origin of the url\n   */\n  CrossStorageClient._getOrigin = function(url) {\n    var uri, protocol, origin;\n\n    uri = document.createElement('a');\n    uri.href = url;\n\n    if (!uri.host) {\n      uri = window.location;\n    }\n\n    if (!uri.protocol || uri.protocol === ':') {\n      protocol = window.location.protocol;\n    } else {\n      protocol = uri.protocol;\n    }\n\n    origin = protocol + '//' + uri.host;\n    origin = origin.replace(/:80$|:443$/, '');\n\n    return origin;\n  };\n\n  /**\n   * UUID v4 generation, taken from: http://stackoverflow.com/questions/\n   * 105034/how-to-create-a-guid-uuid-in-javascript/2117523#2117523\n   *\n   * @returns {string} A UUID v4 string\n   */\n  CrossStorageClient._generateUUID = function() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n      var r = Math.random() * 16|0, v = c == 'x' ? r : (r&0x3|0x8);\n\n      return v.toString(16);\n    });\n  };\n\n  /**\n   * Returns a promise that is fulfilled when a connection has been established\n   * with the cross storage hub. Its use is required to avoid sending any\n   * requests prior to initialization being complete.\n   *\n   * @returns {Promise} A promise that is resolved on connect\n   */\n  CrossStorageClient.prototype.onConnect = function() {\n    var client = this;\n\n    if (this._connected) {\n      return this._promise.resolve();\n    } else if (this._closed) {\n      return this._promise.reject(new Error('CrossStorageClient has closed'));\n    }\n\n    // Queue connect requests for client re-use\n    if (!this._requests.connect) {\n      this._requests.connect = [];\n    }\n\n    return new this._promise(function(resolve, reject) {\n      var timeout = setTimeout(function() {\n        reject(new Error('CrossStorageClient could not connect'));\n      }, client._timeout);\n\n      client._requests.connect.push(function(err) {\n        clearTimeout(timeout);\n        if (err) return reject(err);\n\n        resolve();\n      });\n    });\n  };\n\n  /**\n   * Sets a key to the specified value. Returns a promise that is fulfilled on\n   * success, or rejected if any errors setting the key occurred, or the request\n   * timed out.\n   *\n   * @param   {string}  key   The key to set\n   * @param   {*}       value The value to assign\n   * @returns {Promise} A promise that is settled on hub response or timeout\n   */\n  CrossStorageClient.prototype.set = function(key, value) {\n    return this._request('set', {\n      key:   key,\n      value: value\n    });\n  };\n\n  /**\n   * Accepts one or more keys for which to retrieve their values. Returns a\n   * promise that is settled on hub response or timeout. On success, it is\n   * fulfilled with the value of the key if only passed a single argument.\n   * Otherwise it's resolved with an array of values. On failure, it is rejected\n   * with the corresponding error message.\n   *\n   * @param   {...string} key The key to retrieve\n   * @returns {Promise}   A promise that is settled on hub response or timeout\n   */\n  CrossStorageClient.prototype.get = function(key) {\n    var args = Array.prototype.slice.call(arguments);\n\n    return this._request('get', {keys: args});\n  };\n\n  /**\n   * Accepts one or more keys for deletion. Returns a promise that is settled on\n   * hub response or timeout.\n   *\n   * @param   {...string} key The key to delete\n   * @returns {Promise}   A promise that is settled on hub response or timeout\n   */\n  CrossStorageClient.prototype.del = function() {\n    var args = Array.prototype.slice.call(arguments);\n\n    return this._request('del', {keys: args});\n  };\n\n  /**\n   * Returns a promise that, when resolved, indicates that all localStorage\n   * data has been cleared.\n   *\n   * @returns {Promise} A promise that is settled on hub response or timeout\n   */\n  CrossStorageClient.prototype.clear = function() {\n    return this._request('clear');\n  };\n\n  /**\n   * Returns a promise that, when resolved, passes an array of all keys\n   * currently in storage.\n   *\n   * @returns {Promise} A promise that is settled on hub response or timeout\n   */\n  CrossStorageClient.prototype.getKeys = function() {\n    return this._request('getKeys');\n  };\n\n  /**\n   * Deletes the iframe and sets the connected state to false. The client can\n   * no longer be used after being invoked.\n   */\n  CrossStorageClient.prototype.close = function() {\n    var frame = document.getElementById(this._frameId);\n    if (frame) {\n      frame.parentNode.removeChild(frame);\n    }\n\n    // Support IE8 with detachEvent\n    if (window.removeEventListener) {\n      window.removeEventListener('message', this._listener, false);\n    } else {\n      window.detachEvent('onmessage', this._listener);\n    }\n\n    this._connected = false;\n    this._closed = true;\n  };\n\n  /**\n   * Installs the necessary listener for the window message event. When a message\n   * is received, the client's _connected status is changed to true, and the\n   * onConnect promise is fulfilled. Given a response message, the callback\n   * corresponding to its request is invoked. If response.error holds a truthy\n   * value, the promise associated with the original request is rejected with\n   * the error. Otherwise the promise is fulfilled and passed response.result.\n   *\n   * @private\n   */\n  CrossStorageClient.prototype._installListener = function() {\n    var client = this;\n\n    this._listener = function(message) {\n      var i, origin, error, response;\n\n      // Ignore invalid messages or those after the client has closed\n      if (client._closed || !message.data || typeof message.data !== 'string') {\n        return;\n      }\n\n      // postMessage returns the string \"null\" as the origin for \"file://\"\n      origin = (message.origin === 'null') ? 'file://' : message.origin;\n\n      // Ignore messages not from the correct origin\n      if (origin !== client._origin) return;\n\n      // LocalStorage isn't available in the hub\n      if (message.data === 'cross-storage:unavailable') {\n        if (!client._closed) client.close();\n        if (!client._requests.connect) return;\n\n        error = new Error('Closing client. Could not access localStorage in hub.');\n        for (i = 0; i < client._requests.connect.length; i++) {\n          client._requests.connect[i](error);\n        }\n\n        return;\n      }\n\n      // Handle initial connection\n      if (message.data.indexOf('cross-storage:') !== -1 && !client._connected) {\n        client._connected = true;\n        if (!client._requests.connect) return;\n\n        for (i = 0; i < client._requests.connect.length; i++) {\n          client._requests.connect[i](error);\n        }\n        delete client._requests.connect;\n      }\n\n      if (message.data === 'cross-storage:ready') return;\n\n      // All other messages\n      try {\n        response = JSON.parse(message.data);\n      } catch(e) {\n        return;\n      }\n\n      if (!response.id) return;\n\n      if (client._requests[response.id]) {\n        client._requests[response.id](response.error, response.result);\n      }\n    };\n\n    // Support IE8 with attachEvent\n    if (window.addEventListener) {\n      window.addEventListener('message', this._listener, false);\n    } else {\n      window.attachEvent('onmessage', this._listener);\n    }\n  };\n\n  /**\n   * Invoked when a frame id was passed to the client, rather than allowing\n   * the client to create its own iframe. Polls the hub for a ready event to\n   * establish a connected state.\n   */\n  CrossStorageClient.prototype._poll = function() {\n    var client, interval, targetOrigin;\n\n    client = this;\n\n    // postMessage requires that the target origin be set to \"*\" for \"file://\"\n    targetOrigin = (client._origin === 'file://') ? '*' : client._origin;\n\n    interval = setInterval(function() {\n      if (client._connected) return clearInterval(interval);\n      if (!client._hub) return;\n\n      client._hub.postMessage('cross-storage:poll', targetOrigin);\n    }, 1000);\n  };\n\n  /**\n   * Creates a new iFrame containing the hub. Applies the necessary styles to\n   * hide the element from view, prior to adding it to the document body.\n   * Returns the created element.\n   *\n   * @private\n   *\n   * @param  {string}            url The url to the hub\n   * returns {HTMLIFrameElement} The iFrame element itself\n   */\n  CrossStorageClient.prototype._createFrame = function(url) {\n    var frame, key;\n\n    frame = window.document.createElement('iframe');\n    frame.id = this._frameId;\n\n    // Style the iframe\n    for (key in CrossStorageClient.frameStyle) {\n      if (CrossStorageClient.frameStyle.hasOwnProperty(key)) {\n        frame.style[key] = CrossStorageClient.frameStyle[key];\n      }\n    }\n\n    window.document.body.appendChild(frame);\n    frame.src = url;\n\n    return frame;\n  };\n\n  /**\n   * Sends a message containing the given method and params to the hub. Stores\n   * a callback in the _requests object for later invocation on message, or\n   * deletion on timeout. Returns a promise that is settled in either instance.\n   *\n   * @private\n   *\n   * @param   {string}  method The method to invoke\n   * @param   {*}       params The arguments to pass\n   * @returns {Promise} A promise that is settled on hub response or timeout\n   */\n  CrossStorageClient.prototype._request = function(method, params) {\n    var req, client;\n\n    if (this._closed) {\n      return this._promise.reject(new Error('CrossStorageClient has closed'));\n    }\n\n    client = this;\n    client._count++;\n\n    req = {\n      id:     this._id + ':' + client._count,\n      method: 'cross-storage:' + method,\n      params: params\n    };\n\n    return new this._promise(function(resolve, reject) {\n      var timeout, originalToJSON, targetOrigin;\n\n      // Timeout if a response isn't received after 4s\n      timeout = setTimeout(function() {\n        if (!client._requests[req.id]) return;\n\n        delete client._requests[req.id];\n        reject(new Error('Timeout: could not perform ' + req.method));\n      }, client._timeout);\n\n      // Add request callback\n      client._requests[req.id] = function(err, result) {\n        clearTimeout(timeout);\n        delete client._requests[req.id];\n        if (err) return reject(new Error(err));\n        resolve(result);\n      };\n\n      // In case we have a broken Array.prototype.toJSON, e.g. because of\n      // old versions of prototype\n      if (Array.prototype.toJSON) {\n        originalToJSON = Array.prototype.toJSON;\n        Array.prototype.toJSON = null;\n      }\n\n      // postMessage requires that the target origin be set to \"*\" for \"file://\"\n      targetOrigin = (client._origin === 'file://') ? '*' : client._origin;\n\n      // Send serialized message\n      client._hub.postMessage(JSON.stringify(req), targetOrigin);\n\n      // Restore original toJSON\n      if (originalToJSON) {\n        Array.prototype.toJSON = originalToJSON;\n      }\n    });\n  };\n\n  /**\n   * Export for various environments.\n   */\n  if (typeof module !== 'undefined' && module.exports) {\n    module.exports = CrossStorageClient;\n  } else if (typeof exports !== 'undefined') {\n    exports.CrossStorageClient = CrossStorageClient;\n  } else if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return CrossStorageClient;\n    });\n  } else {\n    root.CrossStorageClient = CrossStorageClient;\n  }\n}(this));\n\n},{}],108:[function(_dereq_,module,exports){\n;(function(root) {\n  var CrossStorageHub = {};\n\n  /**\n   * Accepts an array of objects with two keys: origin and allow. The value\n   * of origin is expected to be a RegExp, and allow, an array of strings.\n   * The cross storage hub is then initialized to accept requests from any of\n   * the matching origins, allowing access to the associated lists of methods.\n   * Methods may include any of: get, set, del, getKeys and clear. A 'ready'\n   * message is sent to the parent window once complete.\n   *\n   * @example\n   * // Subdomain can get, but only root domain can set and del\n   * CrossStorageHub.init([\n   *   {origin: /\\.example.com$/,        allow: ['get']},\n   *   {origin: /:(www\\.)?example.com$/, allow: ['get', 'set', 'del']}\n   * ]);\n   *\n   * @param {array} permissions An array of objects with origin and allow\n   */\n  CrossStorageHub.init = function(permissions) {\n    var available = true;\n\n    // Return if localStorage is unavailable, or third party\n    // access is disabled\n    try {\n      if (!window.localStorage) available = false;\n    } catch (e) {\n      available = false;\n    }\n\n    if (!available) {\n      try {\n        return window.parent.postMessage('cross-storage:unavailable', '*');\n      } catch (e) {\n        return;\n      }\n    }\n\n    CrossStorageHub._permissions = permissions || [];\n    CrossStorageHub._installListener();\n    window.parent.postMessage('cross-storage:ready', '*');\n  };\n\n  /**\n   * Installs the necessary listener for the window message event. Accommodates\n   * IE8 and up.\n   *\n   * @private\n   */\n  CrossStorageHub._installListener = function() {\n    var listener = CrossStorageHub._listener;\n    if (window.addEventListener) {\n      window.addEventListener('message', listener, false);\n    } else {\n      window.attachEvent('onmessage', listener);\n    }\n  };\n\n  /**\n   * The message handler for all requests posted to the window. It ignores any\n   * messages having an origin that does not match the originally supplied\n   * pattern. Given a JSON object with one of get, set, del or getKeys as the\n   * method, the function performs the requested action and returns its result.\n   *\n   * @param {MessageEvent} message A message to be processed\n   */\n  CrossStorageHub._listener = function(message) {\n    var origin, targetOrigin, request, method, error, result, response;\n\n    // postMessage returns the string \"null\" as the origin for \"file://\"\n    origin = (message.origin === 'null') ? 'file://' : message.origin;\n\n    // Handle polling for a ready message\n    if (message.data === 'cross-storage:poll') {\n      return window.parent.postMessage('cross-storage:ready', message.origin);\n    }\n\n    // Ignore the ready message when viewing the hub directly\n    if (message.data === 'cross-storage:ready') return;\n\n    // Check whether message.data is a valid json\n    try {\n      request = JSON.parse(message.data);\n    } catch (err) {\n      return;\n    }\n\n    // Check whether request.method is a string\n    if (!request || typeof request.method !== 'string') {\n      return;\n    }\n\n    method = request.method.split('cross-storage:')[1];\n\n    if (!method) {\n      return;\n    } else if (!CrossStorageHub._permitted(origin, method)) {\n      error = 'Invalid permissions for ' + method;\n    } else {\n      try {\n        result = CrossStorageHub['_' + method](request.params);\n      } catch (err) {\n        error = err.message;\n      }\n    }\n\n    response = JSON.stringify({\n      id: request.id,\n      error: error,\n      result: result\n    });\n\n    // postMessage requires that the target origin be set to \"*\" for \"file://\"\n    targetOrigin = (origin === 'file://') ? '*' : origin;\n\n    window.parent.postMessage(response, targetOrigin);\n  };\n\n  /**\n   * Returns a boolean indicating whether or not the requested method is\n   * permitted for the given origin. The argument passed to method is expected\n   * to be one of 'get', 'set', 'del' or 'getKeys'.\n   *\n   * @param   {string} origin The origin for which to determine permissions\n   * @param   {string} method Requested action\n   * @returns {bool}   Whether or not the request is permitted\n   */\n  CrossStorageHub._permitted = function(origin, method) {\n    var available, i, entry, match;\n\n    available = ['get', 'set', 'del', 'clear', 'getKeys'];\n    if (!CrossStorageHub._inArray(method, available)) {\n      return false;\n    }\n\n    for (i = 0; i < CrossStorageHub._permissions.length; i++) {\n      entry = CrossStorageHub._permissions[i];\n      if (!(entry.origin instanceof RegExp) || !(entry.allow instanceof Array)) {\n        continue;\n      }\n\n      match = entry.origin.test(origin);\n      if (match && CrossStorageHub._inArray(method, entry.allow)) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  /**\n   * Sets a key to the specified value.\n   *\n   * @param {object} params An object with key and value\n   */\n  CrossStorageHub._set = function(params) {\n    window.localStorage.setItem(params.key, params.value);\n  };\n\n  /**\n   * Accepts an object with an array of keys for which to retrieve their values.\n   * Returns a single value if only one key was supplied, otherwise it returns\n   * an array. Any keys not set result in a null element in the resulting array.\n   *\n   * @param   {object} params An object with an array of keys\n   * @returns {*|*[]}  Either a single value, or an array\n   */\n  CrossStorageHub._get = function(params) {\n    var storage, result, i, value;\n\n    storage = window.localStorage;\n    result = [];\n\n    for (i = 0; i < params.keys.length; i++) {\n      try {\n        value = storage.getItem(params.keys[i]);\n      } catch (e) {\n        value = null;\n      }\n\n      result.push(value);\n    }\n\n    return (result.length > 1) ? result : result[0];\n  };\n\n  /**\n   * Deletes all keys specified in the array found at params.keys.\n   *\n   * @param {object} params An object with an array of keys\n   */\n  CrossStorageHub._del = function(params) {\n    for (var i = 0; i < params.keys.length; i++) {\n      window.localStorage.removeItem(params.keys[i]);\n    }\n  };\n\n  /**\n   * Clears localStorage.\n   */\n  CrossStorageHub._clear = function() {\n    window.localStorage.clear();\n  };\n\n  /**\n   * Returns an array of all keys stored in localStorage.\n   *\n   * @returns {string[]} The array of keys\n   */\n  CrossStorageHub._getKeys = function(params) {\n    var i, length, keys;\n\n    keys = [];\n    length = window.localStorage.length;\n\n    for (i = 0; i < length; i++) {\n      keys.push(window.localStorage.key(i));\n    }\n\n    return keys;\n  };\n\n  /**\n   * Returns whether or not a value is present in the array. Consists of an\n   * alternative to extending the array prototype for indexOf, since it's\n   * unavailable for IE8.\n   *\n   * @param   {*}    value The value to find\n   * @parma   {[]*}  array The array in which to search\n   * @returns {bool} Whether or not the value was found\n   */\n  CrossStorageHub._inArray = function(value, array) {\n    for (var i = 0; i < array.length; i++) {\n      if (value === array[i]) return true;\n    }\n\n    return false;\n  };\n\n  /**\n   * A cross-browser version of Date.now compatible with IE8 that avoids\n   * modifying the Date object.\n   *\n   * @return {int} The current timestamp in milliseconds\n   */\n  CrossStorageHub._now = function() {\n    if (typeof Date.now === 'function') {\n      return Date.now();\n    }\n\n    return new Date().getTime();\n  };\n\n  /**\n   * Export for various environments.\n   */\n  if (typeof module !== 'undefined' && module.exports) {\n    module.exports = CrossStorageHub;\n  } else if (typeof exports !== 'undefined') {\n    exports.CrossStorageHub = CrossStorageHub;\n  } else if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return CrossStorageHub;\n    });\n  } else {\n    root.CrossStorageHub = CrossStorageHub;\n  }\n}(this));\n\n},{}],109:[function(_dereq_,module,exports){\nmodule.exports = {\n  CrossStorageClient: _dereq_('./client.js'),\n  CrossStorageHub:    _dereq_('./hub.js')\n};\n\n},{\"./client.js\":107,\"./hub.js\":108}],110:[function(_dereq_,module,exports){\n(function (global){\n/*!\n\nCopyright (C) 2014-2016 by Andrea Giammarchi - @WebReflection\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n*/\n// global window Object\n// optional polyfill info\n//    'auto' used by default, everything is feature detected\n//    'force' use the polyfill even if not fully needed\nfunction installCustomElements(window, polyfill) {'use strict';\n\n  // DO NOT USE THIS FILE DIRECTLY, IT WON'T WORK\n  // THIS IS A PROJECT BASED ON A BUILD SYSTEM\n  // THIS FILE IS JUST WRAPPED UP RESULTING IN\n  // build/document-register-element.node.js\n\n  var\n    document = window.document,\n    Object = window.Object\n  ;\n\n  var htmlClass = (function (info) {\n    // (C) Andrea Giammarchi - @WebReflection - MIT Style\n    var\n      catchClass = /^[A-Z]+[a-z]/,\n      filterBy = function (re) {\n        var arr = [], tag;\n        for (tag in register) {\n          if (re.test(tag)) arr.push(tag);\n        }\n        return arr;\n      },\n      add = function (Class, tag) {\n        tag = tag.toLowerCase();\n        if (!(tag in register)) {\n          register[Class] = (register[Class] || []).concat(tag);\n          register[tag] = (register[tag.toUpperCase()] = Class);\n        }\n      },\n      register = (Object.create || Object)(null),\n      htmlClass = {},\n      i, section, tags, Class\n    ;\n    for (section in info) {\n      for (Class in info[section]) {\n        tags = info[section][Class];\n        register[Class] = tags;\n        for (i = 0; i < tags.length; i++) {\n          register[tags[i].toLowerCase()] =\n          register[tags[i].toUpperCase()] = Class;\n        }\n      }\n    }\n    htmlClass.get = function get(tagOrClass) {\n      return typeof tagOrClass === 'string' ?\n        (register[tagOrClass] || (catchClass.test(tagOrClass) ? [] : '')) :\n        filterBy(tagOrClass);\n    };\n    htmlClass.set = function set(tag, Class) {\n      return (catchClass.test(tag) ?\n        add(tag, Class) :\n        add(Class, tag)\n      ), htmlClass;\n    };\n    return htmlClass;\n  }({\n    \"collections\": {\n      \"HTMLAllCollection\": [\n        \"all\"\n      ],\n      \"HTMLCollection\": [\n        \"forms\"\n      ],\n      \"HTMLFormControlsCollection\": [\n        \"elements\"\n      ],\n      \"HTMLOptionsCollection\": [\n        \"options\"\n      ]\n    },\n    \"elements\": {\n      \"Element\": [\n        \"element\"\n      ],\n      \"HTMLAnchorElement\": [\n        \"a\"\n      ],\n      \"HTMLAppletElement\": [\n        \"applet\"\n      ],\n      \"HTMLAreaElement\": [\n        \"area\"\n      ],\n      \"HTMLAttachmentElement\": [\n        \"attachment\"\n      ],\n      \"HTMLAudioElement\": [\n        \"audio\"\n      ],\n      \"HTMLBRElement\": [\n        \"br\"\n      ],\n      \"HTMLBaseElement\": [\n        \"base\"\n      ],\n      \"HTMLBodyElement\": [\n        \"body\"\n      ],\n      \"HTMLButtonElement\": [\n        \"button\"\n      ],\n      \"HTMLCanvasElement\": [\n        \"canvas\"\n      ],\n      \"HTMLContentElement\": [\n        \"content\"\n      ],\n      \"HTMLDListElement\": [\n        \"dl\"\n      ],\n      \"HTMLDataElement\": [\n        \"data\"\n      ],\n      \"HTMLDataListElement\": [\n        \"datalist\"\n      ],\n      \"HTMLDetailsElement\": [\n        \"details\"\n      ],\n      \"HTMLDialogElement\": [\n        \"dialog\"\n      ],\n      \"HTMLDirectoryElement\": [\n        \"dir\"\n      ],\n      \"HTMLDivElement\": [\n        \"div\"\n      ],\n      \"HTMLDocument\": [\n        \"document\"\n      ],\n      \"HTMLElement\": [\n        \"element\",\n        \"abbr\",\n        \"address\",\n        \"article\",\n        \"aside\",\n        \"b\",\n        \"bdi\",\n        \"bdo\",\n        \"cite\",\n        \"code\",\n        \"command\",\n        \"dd\",\n        \"dfn\",\n        \"dt\",\n        \"em\",\n        \"figcaption\",\n        \"figure\",\n        \"footer\",\n        \"header\",\n        \"i\",\n        \"kbd\",\n        \"mark\",\n        \"nav\",\n        \"noscript\",\n        \"rp\",\n        \"rt\",\n        \"ruby\",\n        \"s\",\n        \"samp\",\n        \"section\",\n        \"small\",\n        \"strong\",\n        \"sub\",\n        \"summary\",\n        \"sup\",\n        \"u\",\n        \"var\",\n        \"wbr\"\n      ],\n      \"HTMLEmbedElement\": [\n        \"embed\"\n      ],\n      \"HTMLFieldSetElement\": [\n        \"fieldset\"\n      ],\n      \"HTMLFontElement\": [\n        \"font\"\n      ],\n      \"HTMLFormElement\": [\n        \"form\"\n      ],\n      \"HTMLFrameElement\": [\n        \"frame\"\n      ],\n      \"HTMLFrameSetElement\": [\n        \"frameset\"\n      ],\n      \"HTMLHRElement\": [\n        \"hr\"\n      ],\n      \"HTMLHeadElement\": [\n        \"head\"\n      ],\n      \"HTMLHeadingElement\": [\n        \"h1\",\n        \"h2\",\n        \"h3\",\n        \"h4\",\n        \"h5\",\n        \"h6\"\n      ],\n      \"HTMLHtmlElement\": [\n        \"html\"\n      ],\n      \"HTMLIFrameElement\": [\n        \"iframe\"\n      ],\n      \"HTMLImageElement\": [\n        \"img\"\n      ],\n      \"HTMLInputElement\": [\n        \"input\"\n      ],\n      \"HTMLKeygenElement\": [\n        \"keygen\"\n      ],\n      \"HTMLLIElement\": [\n        \"li\"\n      ],\n      \"HTMLLabelElement\": [\n        \"label\"\n      ],\n      \"HTMLLegendElement\": [\n        \"legend\"\n      ],\n      \"HTMLLinkElement\": [\n        \"link\"\n      ],\n      \"HTMLMapElement\": [\n        \"map\"\n      ],\n      \"HTMLMarqueeElement\": [\n        \"marquee\"\n      ],\n      \"HTMLMediaElement\": [\n        \"media\"\n      ],\n      \"HTMLMenuElement\": [\n        \"menu\"\n      ],\n      \"HTMLMenuItemElement\": [\n        \"menuitem\"\n      ],\n      \"HTMLMetaElement\": [\n        \"meta\"\n      ],\n      \"HTMLMeterElement\": [\n        \"meter\"\n      ],\n      \"HTMLModElement\": [\n        \"del\",\n        \"ins\"\n      ],\n      \"HTMLOListElement\": [\n        \"ol\"\n      ],\n      \"HTMLObjectElement\": [\n        \"object\"\n      ],\n      \"HTMLOptGroupElement\": [\n        \"optgroup\"\n      ],\n      \"HTMLOptionElement\": [\n        \"option\"\n      ],\n      \"HTMLOutputElement\": [\n        \"output\"\n      ],\n      \"HTMLParagraphElement\": [\n        \"p\"\n      ],\n      \"HTMLParamElement\": [\n        \"param\"\n      ],\n      \"HTMLPictureElement\": [\n        \"picture\"\n      ],\n      \"HTMLPreElement\": [\n        \"pre\"\n      ],\n      \"HTMLProgressElement\": [\n        \"progress\"\n      ],\n      \"HTMLQuoteElement\": [\n        \"blockquote\",\n        \"q\",\n        \"quote\"\n      ],\n      \"HTMLScriptElement\": [\n        \"script\"\n      ],\n      \"HTMLSelectElement\": [\n        \"select\"\n      ],\n      \"HTMLShadowElement\": [\n        \"shadow\"\n      ],\n      \"HTMLSlotElement\": [\n        \"slot\"\n      ],\n      \"HTMLSourceElement\": [\n        \"source\"\n      ],\n      \"HTMLSpanElement\": [\n        \"span\"\n      ],\n      \"HTMLStyleElement\": [\n        \"style\"\n      ],\n      \"HTMLTableCaptionElement\": [\n        \"caption\"\n      ],\n      \"HTMLTableCellElement\": [\n        \"td\",\n        \"th\"\n      ],\n      \"HTMLTableColElement\": [\n        \"col\",\n        \"colgroup\"\n      ],\n      \"HTMLTableElement\": [\n        \"table\"\n      ],\n      \"HTMLTableRowElement\": [\n        \"tr\"\n      ],\n      \"HTMLTableSectionElement\": [\n        \"thead\",\n        \"tbody\",\n        \"tfoot\"\n      ],\n      \"HTMLTemplateElement\": [\n        \"template\"\n      ],\n      \"HTMLTextAreaElement\": [\n        \"textarea\"\n      ],\n      \"HTMLTimeElement\": [\n        \"time\"\n      ],\n      \"HTMLTitleElement\": [\n        \"title\"\n      ],\n      \"HTMLTrackElement\": [\n        \"track\"\n      ],\n      \"HTMLUListElement\": [\n        \"ul\"\n      ],\n      \"HTMLUnknownElement\": [\n        \"unknown\",\n        \"vhgroupv\",\n        \"vkeygen\"\n      ],\n      \"HTMLVideoElement\": [\n        \"video\"\n      ]\n    },\n    \"nodes\": {\n      \"Attr\": [\n        \"node\"\n      ],\n      \"Audio\": [\n        \"audio\"\n      ],\n      \"CDATASection\": [\n        \"node\"\n      ],\n      \"CharacterData\": [\n        \"node\"\n      ],\n      \"Comment\": [\n        \"#comment\"\n      ],\n      \"Document\": [\n        \"#document\"\n      ],\n      \"DocumentFragment\": [\n        \"#document-fragment\"\n      ],\n      \"DocumentType\": [\n        \"node\"\n      ],\n      \"HTMLDocument\": [\n        \"#document\"\n      ],\n      \"Image\": [\n        \"img\"\n      ],\n      \"Option\": [\n        \"option\"\n      ],\n      \"ProcessingInstruction\": [\n        \"node\"\n      ],\n      \"ShadowRoot\": [\n        \"#shadow-root\"\n      ],\n      \"Text\": [\n        \"#text\"\n      ],\n      \"XMLDocument\": [\n        \"xml\"\n      ]\n    }\n  }));\n  \n  \n    \n  // passed at runtime, configurable\n  // via nodejs module\n  if (!polyfill) polyfill = 'auto';\n  \n  var\n    // V0 polyfill entry\n    REGISTER_ELEMENT = 'registerElement',\n  \n    // IE < 11 only + old WebKit for attributes + feature detection\n    EXPANDO_UID = '__' + REGISTER_ELEMENT + (window.Math.random() * 10e4 >> 0),\n  \n    // shortcuts and costants\n    ADD_EVENT_LISTENER = 'addEventListener',\n    ATTACHED = 'attached',\n    CALLBACK = 'Callback',\n    DETACHED = 'detached',\n    EXTENDS = 'extends',\n  \n    ATTRIBUTE_CHANGED_CALLBACK = 'attributeChanged' + CALLBACK,\n    ATTACHED_CALLBACK = ATTACHED + CALLBACK,\n    CONNECTED_CALLBACK = 'connected' + CALLBACK,\n    DISCONNECTED_CALLBACK = 'disconnected' + CALLBACK,\n    CREATED_CALLBACK = 'created' + CALLBACK,\n    DETACHED_CALLBACK = DETACHED + CALLBACK,\n  \n    ADDITION = 'ADDITION',\n    MODIFICATION = 'MODIFICATION',\n    REMOVAL = 'REMOVAL',\n  \n    DOM_ATTR_MODIFIED = 'DOMAttrModified',\n    DOM_CONTENT_LOADED = 'DOMContentLoaded',\n    DOM_SUBTREE_MODIFIED = 'DOMSubtreeModified',\n  \n    PREFIX_TAG = '<',\n    PREFIX_IS = '=',\n  \n    // valid and invalid node names\n    validName = /^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,\n    invalidNames = [\n      'ANNOTATION-XML',\n      'COLOR-PROFILE',\n      'FONT-FACE',\n      'FONT-FACE-SRC',\n      'FONT-FACE-URI',\n      'FONT-FACE-FORMAT',\n      'FONT-FACE-NAME',\n      'MISSING-GLYPH'\n    ],\n  \n    // registered types and their prototypes\n    types = [],\n    protos = [],\n  \n    // to query subnodes\n    query = '',\n  \n    // html shortcut used to feature detect\n    documentElement = document.documentElement,\n  \n    // ES5 inline helpers || basic patches\n    indexOf = types.indexOf || function (v) {\n      for(var i = this.length; i-- && this[i] !== v;){}\n      return i;\n    },\n  \n    // other helpers / shortcuts\n    OP = Object.prototype,\n    hOP = OP.hasOwnProperty,\n    iPO = OP.isPrototypeOf,\n  \n    defineProperty = Object.defineProperty,\n    empty = [],\n    gOPD = Object.getOwnPropertyDescriptor,\n    gOPN = Object.getOwnPropertyNames,\n    gPO = Object.getPrototypeOf,\n    sPO = Object.setPrototypeOf,\n  \n    // jshint proto: true\n    hasProto = !!Object.__proto__,\n  \n    // V1 helpers\n    fixGetClass = false,\n    DRECEV1 = '__dreCEv1',\n    customElements = window.customElements,\n    usableCustomElements = polyfill !== 'force' && !!(\n      customElements &&\n      customElements.define &&\n      customElements.get &&\n      customElements.whenDefined\n    ),\n    Dict = Object.create || Object,\n    Map = window.Map || function Map() {\n      var K = [], V = [], i;\n      return {\n        get: function (k) {\n          return V[indexOf.call(K, k)];\n        },\n        set: function (k, v) {\n          i = indexOf.call(K, k);\n          if (i < 0) V[K.push(k) - 1] = v;\n          else V[i] = v;\n        }\n      };\n    },\n    Promise = window.Promise || function (fn) {\n      var\n        notify = [],\n        done = false,\n        p = {\n          'catch': function () {\n            return p;\n          },\n          'then': function (cb) {\n            notify.push(cb);\n            if (done) setTimeout(resolve, 1);\n            return p;\n          }\n        }\n      ;\n      function resolve(value) {\n        done = true;\n        while (notify.length) notify.shift()(value);\n      }\n      fn(resolve);\n      return p;\n    },\n    justCreated = false,\n    constructors = Dict(null),\n    waitingList = Dict(null),\n    nodeNames = new Map(),\n    secondArgument = String,\n  \n    // used to create unique instances\n    create = Object.create || function Bridge(proto) {\n      // silly broken polyfill probably ever used but short enough to work\n      return proto ? ((Bridge.prototype = proto), new Bridge()) : this;\n    },\n  \n    // will set the prototype if possible\n    // or copy over all properties\n    setPrototype = sPO || (\n      hasProto ?\n        function (o, p) {\n          o.__proto__ = p;\n          return o;\n        } : (\n      (gOPN && gOPD) ?\n        (function(){\n          function setProperties(o, p) {\n            for (var\n              key,\n              names = gOPN(p),\n              i = 0, length = names.length;\n              i < length; i++\n            ) {\n              key = names[i];\n              if (!hOP.call(o, key)) {\n                defineProperty(o, key, gOPD(p, key));\n              }\n            }\n          }\n          return function (o, p) {\n            do {\n              setProperties(o, p);\n            } while ((p = gPO(p)) && !iPO.call(p, o));\n            return o;\n          };\n        }()) :\n        function (o, p) {\n          for (var key in p) {\n            o[key] = p[key];\n          }\n          return o;\n        }\n    )),\n  \n    // DOM shortcuts and helpers, if any\n  \n    MutationObserver = window.MutationObserver ||\n                       window.WebKitMutationObserver,\n  \n    HTMLElementPrototype = (\n      window.HTMLElement ||\n      window.Element ||\n      window.Node\n    ).prototype,\n  \n    IE8 = !iPO.call(HTMLElementPrototype, documentElement),\n  \n    safeProperty = IE8 ? function (o, k, d) {\n      o[k] = d.value;\n      return o;\n    } : defineProperty,\n  \n    isValidNode = IE8 ?\n      function (node) {\n        return node.nodeType === 1;\n      } :\n      function (node) {\n        return iPO.call(HTMLElementPrototype, node);\n      },\n  \n    targets = IE8 && [],\n  \n    attachShadow = HTMLElementPrototype.attachShadow,\n    cloneNode = HTMLElementPrototype.cloneNode,\n    dispatchEvent = HTMLElementPrototype.dispatchEvent,\n    getAttribute = HTMLElementPrototype.getAttribute,\n    hasAttribute = HTMLElementPrototype.hasAttribute,\n    removeAttribute = HTMLElementPrototype.removeAttribute,\n    setAttribute = HTMLElementPrototype.setAttribute,\n  \n    // replaced later on\n    createElement = document.createElement,\n    patchedCreateElement = createElement,\n  \n    // shared observer for all attributes\n    attributesObserver = MutationObserver && {\n      attributes: true,\n      characterData: true,\n      attributeOldValue: true\n    },\n  \n    // useful to detect only if there's no MutationObserver\n    DOMAttrModified = MutationObserver || function(e) {\n      doesNotSupportDOMAttrModified = false;\n      documentElement.removeEventListener(\n        DOM_ATTR_MODIFIED,\n        DOMAttrModified\n      );\n    },\n  \n    // will both be used to make DOMNodeInserted asynchronous\n    asapQueue,\n    asapTimer = 0,\n  \n    // internal flags\n    V0 = REGISTER_ELEMENT in document,\n    setListener = true,\n    justSetup = false,\n    doesNotSupportDOMAttrModified = true,\n    dropDomContentLoaded = true,\n  \n    // needed for the innerHTML helper\n    notFromInnerHTMLHelper = true,\n  \n    // optionally defined later on\n    onSubtreeModified,\n    callDOMAttrModified,\n    getAttributesMirror,\n    observer,\n    observe,\n  \n    // based on setting prototype capability\n    // will check proto or the expando attribute\n    // in order to setup the node once\n    patchIfNotAlready,\n    patch\n  ;\n  \n  // only if needed\n  if (!V0) {\n  \n    if (sPO || hasProto) {\n        patchIfNotAlready = function (node, proto) {\n          if (!iPO.call(proto, node)) {\n            setupNode(node, proto);\n          }\n        };\n        patch = setupNode;\n    } else {\n        patchIfNotAlready = function (node, proto) {\n          if (!node[EXPANDO_UID]) {\n            node[EXPANDO_UID] = Object(true);\n            setupNode(node, proto);\n          }\n        };\n        patch = patchIfNotAlready;\n    }\n  \n    if (IE8) {\n      doesNotSupportDOMAttrModified = false;\n      (function (){\n        var\n          descriptor = gOPD(HTMLElementPrototype, ADD_EVENT_LISTENER),\n          addEventListener = descriptor.value,\n          patchedRemoveAttribute = function (name) {\n            var e = new CustomEvent(DOM_ATTR_MODIFIED, {bubbles: true});\n            e.attrName = name;\n            e.prevValue = getAttribute.call(this, name);\n            e.newValue = null;\n            e[REMOVAL] = e.attrChange = 2;\n            removeAttribute.call(this, name);\n            dispatchEvent.call(this, e);\n          },\n          patchedSetAttribute = function (name, value) {\n            var\n              had = hasAttribute.call(this, name),\n              old = had && getAttribute.call(this, name),\n              e = new CustomEvent(DOM_ATTR_MODIFIED, {bubbles: true})\n            ;\n            setAttribute.call(this, name, value);\n            e.attrName = name;\n            e.prevValue = had ? old : null;\n            e.newValue = value;\n            if (had) {\n              e[MODIFICATION] = e.attrChange = 1;\n            } else {\n              e[ADDITION] = e.attrChange = 0;\n            }\n            dispatchEvent.call(this, e);\n          },\n          onPropertyChange = function (e) {\n            // jshint eqnull:true\n            var\n              node = e.currentTarget,\n              superSecret = node[EXPANDO_UID],\n              propertyName = e.propertyName,\n              event\n            ;\n            if (superSecret.hasOwnProperty(propertyName)) {\n              superSecret = superSecret[propertyName];\n              event = new CustomEvent(DOM_ATTR_MODIFIED, {bubbles: true});\n              event.attrName = superSecret.name;\n              event.prevValue = superSecret.value || null;\n              event.newValue = (superSecret.value = node[propertyName] || null);\n              if (event.prevValue == null) {\n                event[ADDITION] = event.attrChange = 0;\n              } else {\n                event[MODIFICATION] = event.attrChange = 1;\n              }\n              dispatchEvent.call(node, event);\n            }\n          }\n        ;\n        descriptor.value = function (type, handler, capture) {\n          if (\n            type === DOM_ATTR_MODIFIED &&\n            this[ATTRIBUTE_CHANGED_CALLBACK] &&\n            this.setAttribute !== patchedSetAttribute\n          ) {\n            this[EXPANDO_UID] = {\n              className: {\n                name: 'class',\n                value: this.className\n              }\n            };\n            this.setAttribute = patchedSetAttribute;\n            this.removeAttribute = patchedRemoveAttribute;\n            addEventListener.call(this, 'propertychange', onPropertyChange);\n          }\n          addEventListener.call(this, type, handler, capture);\n        };\n        defineProperty(HTMLElementPrototype, ADD_EVENT_LISTENER, descriptor);\n      }());\n    } else if (!MutationObserver) {\n      documentElement[ADD_EVENT_LISTENER](DOM_ATTR_MODIFIED, DOMAttrModified);\n      documentElement.setAttribute(EXPANDO_UID, 1);\n      documentElement.removeAttribute(EXPANDO_UID);\n      if (doesNotSupportDOMAttrModified) {\n        onSubtreeModified = function (e) {\n          var\n            node = this,\n            oldAttributes,\n            newAttributes,\n            key\n          ;\n          if (node === e.target) {\n            oldAttributes = node[EXPANDO_UID];\n            node[EXPANDO_UID] = (newAttributes = getAttributesMirror(node));\n            for (key in newAttributes) {\n              if (!(key in oldAttributes)) {\n                // attribute was added\n                return callDOMAttrModified(\n                  0,\n                  node,\n                  key,\n                  oldAttributes[key],\n                  newAttributes[key],\n                  ADDITION\n                );\n              } else if (newAttributes[key] !== oldAttributes[key]) {\n                // attribute was changed\n                return callDOMAttrModified(\n                  1,\n                  node,\n                  key,\n                  oldAttributes[key],\n                  newAttributes[key],\n                  MODIFICATION\n                );\n              }\n            }\n            // checking if it has been removed\n            for (key in oldAttributes) {\n              if (!(key in newAttributes)) {\n                // attribute removed\n                return callDOMAttrModified(\n                  2,\n                  node,\n                  key,\n                  oldAttributes[key],\n                  newAttributes[key],\n                  REMOVAL\n                );\n              }\n            }\n          }\n        };\n        callDOMAttrModified = function (\n          attrChange,\n          currentTarget,\n          attrName,\n          prevValue,\n          newValue,\n          action\n        ) {\n          var e = {\n            attrChange: attrChange,\n            currentTarget: currentTarget,\n            attrName: attrName,\n            prevValue: prevValue,\n            newValue: newValue\n          };\n          e[action] = attrChange;\n          onDOMAttrModified(e);\n        };\n        getAttributesMirror = function (node) {\n          for (var\n            attr, name,\n            result = {},\n            attributes = node.attributes,\n            i = 0, length = attributes.length;\n            i < length; i++\n          ) {\n            attr = attributes[i];\n            name = attr.name;\n            if (name !== 'setAttribute') {\n              result[name] = attr.value;\n            }\n          }\n          return result;\n        };\n      }\n    }\n  \n    // set as enumerable, writable and configurable\n    document[REGISTER_ELEMENT] = function registerElement(type, options) {\n      upperType = type.toUpperCase();\n      if (setListener) {\n        // only first time document.registerElement is used\n        // we need to set this listener\n        // setting it by default might slow down for no reason\n        setListener = false;\n        if (MutationObserver) {\n          observer = (function(attached, detached){\n            function checkEmAll(list, callback) {\n              for (var i = 0, length = list.length; i < length; callback(list[i++])){}\n            }\n            return new MutationObserver(function (records) {\n              for (var\n                current, node, newValue,\n                i = 0, length = records.length; i < length; i++\n              ) {\n                current = records[i];\n                if (current.type === 'childList') {\n                  checkEmAll(current.addedNodes, attached);\n                  checkEmAll(current.removedNodes, detached);\n                } else {\n                  node = current.target;\n                  if (notFromInnerHTMLHelper &&\n                      node[ATTRIBUTE_CHANGED_CALLBACK] &&\n                      current.attributeName !== 'style') {\n                    newValue = getAttribute.call(node, current.attributeName);\n                    if (newValue !== current.oldValue) {\n                      node[ATTRIBUTE_CHANGED_CALLBACK](\n                        current.attributeName,\n                        current.oldValue,\n                        newValue\n                      );\n                    }\n                  }\n                }\n              }\n            });\n          }(executeAction(ATTACHED), executeAction(DETACHED)));\n          observe = function (node) {\n            observer.observe(\n              node,\n              {\n                childList: true,\n                subtree: true\n              }\n            );\n            return node;\n          };\n          observe(document);\n          if (attachShadow) {\n            HTMLElementPrototype.attachShadow = function () {\n              return observe(attachShadow.apply(this, arguments));\n            };\n          }\n        } else {\n          asapQueue = [];\n          document[ADD_EVENT_LISTENER]('DOMNodeInserted', onDOMNode(ATTACHED));\n          document[ADD_EVENT_LISTENER]('DOMNodeRemoved', onDOMNode(DETACHED));\n        }\n  \n        document[ADD_EVENT_LISTENER](DOM_CONTENT_LOADED, onReadyStateChange);\n        document[ADD_EVENT_LISTENER]('readystatechange', onReadyStateChange);\n  \n        HTMLElementPrototype.cloneNode = function (deep) {\n          var\n            node = cloneNode.call(this, !!deep),\n            i = getTypeIndex(node)\n          ;\n          if (-1 < i) patch(node, protos[i]);\n          if (deep && query.length) loopAndSetup(node.querySelectorAll(query));\n          return node;\n        };\n      }\n  \n      if (justSetup) return (justSetup = false);\n  \n      if (-2 < (\n        indexOf.call(types, PREFIX_IS + upperType) +\n        indexOf.call(types, PREFIX_TAG + upperType)\n      )) {\n        throwTypeError(type);\n      }\n  \n      if (!validName.test(upperType) || -1 < indexOf.call(invalidNames, upperType)) {\n        throw new Error('The type ' + type + ' is invalid');\n      }\n  \n      var\n        constructor = function () {\n          return extending ?\n            document.createElement(nodeName, upperType) :\n            document.createElement(nodeName);\n        },\n        opt = options || OP,\n        extending = hOP.call(opt, EXTENDS),\n        nodeName = extending ? options[EXTENDS].toUpperCase() : upperType,\n        upperType,\n        i\n      ;\n  \n      if (extending && -1 < (\n        indexOf.call(types, PREFIX_TAG + nodeName)\n      )) {\n        throwTypeError(nodeName);\n      }\n  \n      i = types.push((extending ? PREFIX_IS : PREFIX_TAG) + upperType) - 1;\n  \n      query = query.concat(\n        query.length ? ',' : '',\n        extending ? nodeName + '[is=\"' + type.toLowerCase() + '\"]' : nodeName\n      );\n  \n      constructor.prototype = (\n        protos[i] = hOP.call(opt, 'prototype') ?\n          opt.prototype :\n          create(HTMLElementPrototype)\n      );\n  \n      if (query.length) loopAndVerify(\n        document.querySelectorAll(query),\n        ATTACHED\n      );\n  \n      return constructor;\n    };\n  \n    document.createElement = (patchedCreateElement = function (localName, typeExtension) {\n      var\n        is = getIs(typeExtension),\n        node = is ?\n          createElement.call(document, localName, secondArgument(is)) :\n          createElement.call(document, localName),\n        name = '' + localName,\n        i = indexOf.call(\n          types,\n          (is ? PREFIX_IS : PREFIX_TAG) +\n          (is || name).toUpperCase()\n        ),\n        setup = -1 < i\n      ;\n      if (is) {\n        node.setAttribute('is', is = is.toLowerCase());\n        if (setup) {\n          setup = isInQSA(name.toUpperCase(), is);\n        }\n      }\n      notFromInnerHTMLHelper = !document.createElement.innerHTMLHelper;\n      if (setup) patch(node, protos[i]);\n      return node;\n    });\n  \n  }\n  \n  function ASAP() {\n    var queue = asapQueue.splice(0, asapQueue.length);\n    asapTimer = 0;\n    while (queue.length) {\n      queue.shift().call(\n        null, queue.shift()\n      );\n    }\n  }\n  \n  function loopAndVerify(list, action) {\n    for (var i = 0, length = list.length; i < length; i++) {\n      verifyAndSetupAndAction(list[i], action);\n    }\n  }\n  \n  function loopAndSetup(list) {\n    for (var i = 0, length = list.length, node; i < length; i++) {\n      node = list[i];\n      patch(node, protos[getTypeIndex(node)]);\n    }\n  }\n  \n  function executeAction(action) {\n    return function (node) {\n      if (isValidNode(node)) {\n        verifyAndSetupAndAction(node, action);\n        if (query.length) loopAndVerify(\n          node.querySelectorAll(query),\n          action\n        );\n      }\n    };\n  }\n  \n  function getTypeIndex(target) {\n    var\n      is = getAttribute.call(target, 'is'),\n      nodeName = target.nodeName.toUpperCase(),\n      i = indexOf.call(\n        types,\n        is ?\n            PREFIX_IS + is.toUpperCase() :\n            PREFIX_TAG + nodeName\n      )\n    ;\n    return is && -1 < i && !isInQSA(nodeName, is) ? -1 : i;\n  }\n  \n  function isInQSA(name, type) {\n    return -1 < query.indexOf(name + '[is=\"' + type + '\"]');\n  }\n  \n  function onDOMAttrModified(e) {\n    var\n      node = e.currentTarget,\n      attrChange = e.attrChange,\n      attrName = e.attrName,\n      target = e.target,\n      addition = e[ADDITION] || 2,\n      removal = e[REMOVAL] || 3\n    ;\n    if (notFromInnerHTMLHelper &&\n        (!target || target === node) &&\n        node[ATTRIBUTE_CHANGED_CALLBACK] &&\n        attrName !== 'style' && (\n          e.prevValue !== e.newValue ||\n          // IE9, IE10, and Opera 12 gotcha\n          e.newValue === '' && (\n            attrChange === addition ||\n            attrChange === removal\n          )\n    )) {\n      node[ATTRIBUTE_CHANGED_CALLBACK](\n        attrName,\n        attrChange === addition ? null : e.prevValue,\n        attrChange === removal ? null : e.newValue\n      );\n    }\n  }\n  \n  function onDOMNode(action) {\n    var executor = executeAction(action);\n    return function (e) {\n      asapQueue.push(executor, e.target);\n      if (asapTimer) clearTimeout(asapTimer);\n      asapTimer = setTimeout(ASAP, 1);\n    };\n  }\n  \n  function onReadyStateChange(e) {\n    if (dropDomContentLoaded) {\n      dropDomContentLoaded = false;\n      e.currentTarget.removeEventListener(DOM_CONTENT_LOADED, onReadyStateChange);\n    }\n    if (query.length) loopAndVerify(\n      (e.target || document).querySelectorAll(query),\n      e.detail === DETACHED ? DETACHED : ATTACHED\n    );\n    if (IE8) purge();\n  }\n  \n  function patchedSetAttribute(name, value) {\n    // jshint validthis:true\n    var self = this;\n    setAttribute.call(self, name, value);\n    onSubtreeModified.call(self, {target: self});\n  }\n  \n  function setupNode(node, proto) {\n    setPrototype(node, proto);\n    if (observer) {\n      observer.observe(node, attributesObserver);\n    } else {\n      if (doesNotSupportDOMAttrModified) {\n        node.setAttribute = patchedSetAttribute;\n        node[EXPANDO_UID] = getAttributesMirror(node);\n        node[ADD_EVENT_LISTENER](DOM_SUBTREE_MODIFIED, onSubtreeModified);\n      }\n      node[ADD_EVENT_LISTENER](DOM_ATTR_MODIFIED, onDOMAttrModified);\n    }\n    if (node[CREATED_CALLBACK] && notFromInnerHTMLHelper) {\n      node.created = true;\n      node[CREATED_CALLBACK]();\n      node.created = false;\n    }\n  }\n  \n  function purge() {\n    for (var\n      node,\n      i = 0,\n      length = targets.length;\n      i < length; i++\n    ) {\n      node = targets[i];\n      if (!documentElement.contains(node)) {\n        length--;\n        targets.splice(i--, 1);\n        verifyAndSetupAndAction(node, DETACHED);\n      }\n    }\n  }\n  \n  function throwTypeError(type) {\n    throw new Error('A ' + type + ' type is already registered');\n  }\n  \n  function verifyAndSetupAndAction(node, action) {\n    var\n      fn,\n      i = getTypeIndex(node)\n    ;\n    if (-1 < i) {\n      patchIfNotAlready(node, protos[i]);\n      i = 0;\n      if (action === ATTACHED && !node[ATTACHED]) {\n        node[DETACHED] = false;\n        node[ATTACHED] = true;\n        i = 1;\n        if (IE8 && indexOf.call(targets, node) < 0) {\n          targets.push(node);\n        }\n      } else if (action === DETACHED && !node[DETACHED]) {\n        node[ATTACHED] = false;\n        node[DETACHED] = true;\n        i = 1;\n      }\n      if (i && (fn = node[action + CALLBACK])) fn.call(node);\n    }\n  }\n  \n  \n  \n  // V1 in da House!\n  function CustomElementRegistry() {}\n  \n  CustomElementRegistry.prototype = {\n    constructor: CustomElementRegistry,\n    // a workaround for the stubborn WebKit\n    define: usableCustomElements ?\n      function (name, Class, options) {\n        if (options) {\n          CERDefine(name, Class, options);\n        } else {\n          var NAME = name.toUpperCase();\n          constructors[NAME] = {\n            constructor: Class,\n            create: [NAME]\n          };\n          nodeNames.set(Class, NAME);\n          customElements.define(name, Class);\n        }\n      } :\n      CERDefine,\n    get: usableCustomElements ?\n      function (name) {\n        return customElements.get(name) || get(name);\n      } :\n      get,\n    whenDefined: usableCustomElements ?\n      function (name) {\n        return Promise.race([\n          customElements.whenDefined(name),\n          whenDefined(name)\n        ]);\n      } :\n      whenDefined\n  };\n  \n  function CERDefine(name, Class, options) {\n    var\n      is = options && options[EXTENDS] || '',\n      CProto = Class.prototype,\n      proto = create(CProto),\n      attributes = Class.observedAttributes || empty,\n      definition = {prototype: proto}\n    ;\n    // TODO: is this needed at all since it's inherited?\n    // defineProperty(proto, 'constructor', {value: Class});\n    safeProperty(proto, CREATED_CALLBACK, {\n        value: function () {\n          if (justCreated) justCreated = false;\n          else if (!this[DRECEV1]) {\n            this[DRECEV1] = true;\n            new Class(this);\n            if (CProto[CREATED_CALLBACK])\n              CProto[CREATED_CALLBACK].call(this);\n            var info = constructors[nodeNames.get(Class)];\n            if (!usableCustomElements || info.create.length > 1) {\n              notifyAttributes(this);\n            }\n          }\n      }\n    });\n    safeProperty(proto, ATTRIBUTE_CHANGED_CALLBACK, {\n      value: function (name) {\n        if (-1 < indexOf.call(attributes, name))\n          CProto[ATTRIBUTE_CHANGED_CALLBACK].apply(this, arguments);\n      }\n    });\n    if (CProto[CONNECTED_CALLBACK]) {\n      safeProperty(proto, ATTACHED_CALLBACK, {\n        value: CProto[CONNECTED_CALLBACK]\n      });\n    }\n    if (CProto[DISCONNECTED_CALLBACK]) {\n      safeProperty(proto, DETACHED_CALLBACK, {\n        value: CProto[DISCONNECTED_CALLBACK]\n      });\n    }\n    if (is) definition[EXTENDS] = is;\n    name = name.toUpperCase();\n    constructors[name] = {\n      constructor: Class,\n      create: is ? [is, secondArgument(name)] : [name]\n    };\n    nodeNames.set(Class, name);\n    document[REGISTER_ELEMENT](name.toLowerCase(), definition);\n    whenDefined(name);\n    waitingList[name].r();\n  }\n  \n  function get(name) {\n    var info = constructors[name.toUpperCase()];\n    return info && info.constructor;\n  }\n  \n  function getIs(options) {\n    return typeof options === 'string' ?\n        options : (options && options.is || '');\n  }\n  \n  function notifyAttributes(self) {\n    var\n      callback = self[ATTRIBUTE_CHANGED_CALLBACK],\n      attributes = callback ? self.attributes : empty,\n      i = attributes.length,\n      attribute\n    ;\n    while (i--) {\n      attribute =  attributes[i]; // || attributes.item(i);\n      callback.call(\n        self,\n        attribute.name || attribute.nodeName,\n        null,\n        attribute.value || attribute.nodeValue\n      );\n    }\n  }\n  \n  function whenDefined(name) {\n    name = name.toUpperCase();\n    if (!(name in waitingList)) {\n      waitingList[name] = {};\n      waitingList[name].p = new Promise(function (resolve) {\n        waitingList[name].r = resolve;\n      });\n    }\n    return waitingList[name].p;\n  }\n  \n  function polyfillV1() {\n    if (customElements) delete window.customElements;\n    defineProperty(window, 'customElements', {\n      configurable: true,\n      value: new CustomElementRegistry()\n    });\n    defineProperty(window, 'CustomElementRegistry', {\n      configurable: true,\n      value: CustomElementRegistry\n    });\n    for (var\n      patchClass = function (name) {\n        var Class = window[name];\n        if (Class) {\n          window[name] = function CustomElementsV1(self) {\n            var info, isNative;\n            if (!self) self = this;\n            if (!self[DRECEV1]) {\n              justCreated = true;\n              info = constructors[nodeNames.get(self.constructor)];\n              isNative = usableCustomElements && info.create.length === 1;\n              self = isNative ?\n                Reflect.construct(Class, empty, info.constructor) :\n                document.createElement.apply(document, info.create);\n              self[DRECEV1] = true;\n              justCreated = false;\n              if (!isNative) notifyAttributes(self);\n            }\n            return self;\n          };\n          window[name].prototype = Class.prototype;\n          try {\n            Class.prototype.constructor = window[name];\n          } catch(WebKit) {\n            fixGetClass = true;\n            defineProperty(Class, DRECEV1, {value: window[name]});\n          }\n        }\n      },\n      Classes = htmlClass.get(/^HTML[A-Z]*[a-z]/),\n      i = Classes.length;\n      i--;\n      patchClass(Classes[i])\n    ) {}\n    (document.createElement = function (name, options) {\n      var is = getIs(options);\n      return is ?\n        patchedCreateElement.call(this, name, secondArgument(is)) :\n        patchedCreateElement.call(this, name);\n    });\n    if (!V0) {\n      justSetup = true;\n      document[REGISTER_ELEMENT]('');\n    }\n  }\n  \n  // if customElements is not there at all\n  if (!customElements || polyfill === 'force') polyfillV1();\n  else {\n    // if available test extends work as expected\n    try {\n      (function (DRE, options, name) {\n        options[EXTENDS] = 'a';\n        DRE.prototype = create(HTMLAnchorElement.prototype);\n        DRE.prototype.constructor = DRE;\n        window.customElements.define(name, DRE, options);\n        if (\n          getAttribute.call(document.createElement('a', {is: name}), 'is') !== name ||\n          (usableCustomElements && getAttribute.call(new DRE(), 'is') !== name)\n        ) {\n          throw options;\n        }\n      }(\n        function DRE() {\n          return Reflect.construct(HTMLAnchorElement, [], DRE);\n        },\n        {},\n        'document-register-element-a'\n      ));\n    } catch(o_O) {\n      // or force the polyfill if not\n      // and keep internal original reference\n      polyfillV1();\n    }\n  }\n  \n  try {\n    createElement.call(document, 'a', 'a');\n  } catch(FireFox) {\n    secondArgument = function (is) {\n      return {is: is};\n    };\n  }\n  \n}\n\nmodule.exports = installCustomElements;\ninstallCustomElements(global);\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],111:[function(_dereq_,module,exports){\nvar isFunction = _dereq_('is-function')\n\nmodule.exports = forEach\n\nvar toString = Object.prototype.toString\nvar hasOwnProperty = Object.prototype.hasOwnProperty\n\nfunction forEach(list, iterator, context) {\n    if (!isFunction(iterator)) {\n        throw new TypeError('iterator must be a function')\n    }\n\n    if (arguments.length < 3) {\n        context = this\n    }\n    \n    if (toString.call(list) === '[object Array]')\n        forEachArray(list, iterator, context)\n    else if (typeof list === 'string')\n        forEachString(list, iterator, context)\n    else\n        forEachObject(list, iterator, context)\n}\n\nfunction forEachArray(array, iterator, context) {\n    for (var i = 0, len = array.length; i < len; i++) {\n        if (hasOwnProperty.call(array, i)) {\n            iterator.call(context, array[i], i, array)\n        }\n    }\n}\n\nfunction forEachString(string, iterator, context) {\n    for (var i = 0, len = string.length; i < len; i++) {\n        // no such thing as a sparse string.\n        iterator.call(context, string.charAt(i), i, string)\n    }\n}\n\nfunction forEachObject(object, iterator, context) {\n    for (var k in object) {\n        if (hasOwnProperty.call(object, k)) {\n            iterator.call(context, object[k], k, object)\n        }\n    }\n}\n\n},{\"is-function\":114}],112:[function(_dereq_,module,exports){\n(function (global){\nif (typeof window !== \"undefined\") {\n    module.exports = window;\n} else if (typeof global !== \"undefined\") {\n    module.exports = global;\n} else if (typeof self !== \"undefined\"){\n    module.exports = self;\n} else {\n    module.exports = {};\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],113:[function(_dereq_,module,exports){\n(function (global){\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.GlslCanvas = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof _dereq_==\"function\"&&_dereq_;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof _dereq_==\"function\"&&_dereq_;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\nmodule.exports = { \"default\": _dereq_(\"core-js/library/fn/array/from\"), __esModule: true };\n},{\"core-js/library/fn/array/from\":12}],2:[function(_dereq_,module,exports){\nmodule.exports = { \"default\": _dereq_(\"core-js/library/fn/get-iterator\"), __esModule: true };\n},{\"core-js/library/fn/get-iterator\":13}],3:[function(_dereq_,module,exports){\nmodule.exports = { \"default\": _dereq_(\"core-js/library/fn/object/assign\"), __esModule: true };\n},{\"core-js/library/fn/object/assign\":14}],4:[function(_dereq_,module,exports){\nmodule.exports = { \"default\": _dereq_(\"core-js/library/fn/object/define-property\"), __esModule: true };\n},{\"core-js/library/fn/object/define-property\":15}],5:[function(_dereq_,module,exports){\nmodule.exports = { \"default\": _dereq_(\"core-js/library/fn/object/keys\"), __esModule: true };\n},{\"core-js/library/fn/object/keys\":16}],6:[function(_dereq_,module,exports){\nmodule.exports = { \"default\": _dereq_(\"core-js/library/fn/promise\"), __esModule: true };\n},{\"core-js/library/fn/promise\":17}],7:[function(_dereq_,module,exports){\nmodule.exports = { \"default\": _dereq_(\"core-js/library/fn/set\"), __esModule: true };\n},{\"core-js/library/fn/set\":18}],8:[function(_dereq_,module,exports){\n\"use strict\";\n\nexports[\"default\"] = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nexports.__esModule = true;\n},{}],9:[function(_dereq_,module,exports){\n\"use strict\";\n\nvar _Object$defineProperty = _dereq_(\"babel-runtime/core-js/object/define-property\")[\"default\"];\n\nexports[\"default\"] = (function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n\n      _Object$defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n})();\n\nexports.__esModule = true;\n},{\"babel-runtime/core-js/object/define-property\":4}],10:[function(_dereq_,module,exports){\n\"use strict\";\n\nexports[\"default\"] = function (obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n};\n\nexports.__esModule = true;\n},{}],11:[function(_dereq_,module,exports){\n\"use strict\";\n\nvar _Array$from = _dereq_(\"babel-runtime/core-js/array/from\")[\"default\"];\n\nexports[\"default\"] = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return _Array$from(arr);\n  }\n};\n\nexports.__esModule = true;\n},{\"babel-runtime/core-js/array/from\":1}],12:[function(_dereq_,module,exports){\n_dereq_('../../modules/es6.string.iterator');\n_dereq_('../../modules/es6.array.from');\nmodule.exports = _dereq_('../../modules/$.core').Array.from;\n},{\"../../modules/$.core\":27,\"../../modules/es6.array.from\":74,\"../../modules/es6.string.iterator\":81}],13:[function(_dereq_,module,exports){\n_dereq_('../modules/web.dom.iterable');\n_dereq_('../modules/es6.string.iterator');\nmodule.exports = _dereq_('../modules/core.get-iterator');\n},{\"../modules/core.get-iterator\":73,\"../modules/es6.string.iterator\":81,\"../modules/web.dom.iterable\":83}],14:[function(_dereq_,module,exports){\n_dereq_('../../modules/es6.object.assign');\nmodule.exports = _dereq_('../../modules/$.core').Object.assign;\n},{\"../../modules/$.core\":27,\"../../modules/es6.object.assign\":76}],15:[function(_dereq_,module,exports){\nvar $ = _dereq_('../../modules/$');\nmodule.exports = function defineProperty(it, key, desc){\n  return $.setDesc(it, key, desc);\n};\n},{\"../../modules/$\":49}],16:[function(_dereq_,module,exports){\n_dereq_('../../modules/es6.object.keys');\nmodule.exports = _dereq_('../../modules/$.core').Object.keys;\n},{\"../../modules/$.core\":27,\"../../modules/es6.object.keys\":77}],17:[function(_dereq_,module,exports){\n_dereq_('../modules/es6.object.to-string');\n_dereq_('../modules/es6.string.iterator');\n_dereq_('../modules/web.dom.iterable');\n_dereq_('../modules/es6.promise');\nmodule.exports = _dereq_('../modules/$.core').Promise;\n},{\"../modules/$.core\":27,\"../modules/es6.object.to-string\":78,\"../modules/es6.promise\":79,\"../modules/es6.string.iterator\":81,\"../modules/web.dom.iterable\":83}],18:[function(_dereq_,module,exports){\n_dereq_('../modules/es6.object.to-string');\n_dereq_('../modules/es6.string.iterator');\n_dereq_('../modules/web.dom.iterable');\n_dereq_('../modules/es6.set');\n_dereq_('../modules/es7.set.to-json');\nmodule.exports = _dereq_('../modules/$.core').Set;\n},{\"../modules/$.core\":27,\"../modules/es6.object.to-string\":78,\"../modules/es6.set\":80,\"../modules/es6.string.iterator\":81,\"../modules/es7.set.to-json\":82,\"../modules/web.dom.iterable\":83}],19:[function(_dereq_,module,exports){\nmodule.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n},{}],20:[function(_dereq_,module,exports){\nmodule.exports = function(){ /* empty */ };\n},{}],21:[function(_dereq_,module,exports){\nvar isObject = _dereq_('./$.is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n},{\"./$.is-object\":42}],22:[function(_dereq_,module,exports){\n// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = _dereq_('./$.cof')\n  , TAG = _dereq_('./$.wks')('toStringTag')\n  // ES3 wrong here\n  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\nmodule.exports = function(it){\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = (O = Object(it))[TAG]) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n},{\"./$.cof\":23,\"./$.wks\":71}],23:[function(_dereq_,module,exports){\nvar toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n},{}],24:[function(_dereq_,module,exports){\n'use strict';\nvar $            = _dereq_('./$')\n  , hide         = _dereq_('./$.hide')\n  , redefineAll  = _dereq_('./$.redefine-all')\n  , ctx          = _dereq_('./$.ctx')\n  , strictNew    = _dereq_('./$.strict-new')\n  , defined      = _dereq_('./$.defined')\n  , forOf        = _dereq_('./$.for-of')\n  , $iterDefine  = _dereq_('./$.iter-define')\n  , step         = _dereq_('./$.iter-step')\n  , ID           = _dereq_('./$.uid')('id')\n  , $has         = _dereq_('./$.has')\n  , isObject     = _dereq_('./$.is-object')\n  , setSpecies   = _dereq_('./$.set-species')\n  , DESCRIPTORS  = _dereq_('./$.descriptors')\n  , isExtensible = Object.isExtensible || isObject\n  , SIZE         = DESCRIPTORS ? '_s' : 'size'\n  , id           = 0;\n\nvar fastKey = function(it, create){\n  // return primitive with prefix\n  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if(!$has(it, ID)){\n    // can't set id to frozen object\n    if(!isExtensible(it))return 'F';\n    // not necessary to add id\n    if(!create)return 'E';\n    // add missing object id\n    hide(it, ID, ++id);\n  // return object id with prefix\n  } return 'O' + it[ID];\n};\n\nvar getEntry = function(that, key){\n  // fast case\n  var index = fastKey(key), entry;\n  if(index !== 'F')return that._i[index];\n  // frozen object case\n  for(entry = that._f; entry; entry = entry.n){\n    if(entry.k == key)return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function(wrapper, NAME, IS_MAP, ADDER){\n    var C = wrapper(function(that, iterable){\n      strictNew(that, C, NAME);\n      that._i = $.create(null); // index\n      that._f = undefined;      // first entry\n      that._l = undefined;      // last entry\n      that[SIZE] = 0;           // size\n      if(iterable != undefined)forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear(){\n        for(var that = this, data = that._i, entry = that._f; entry; entry = entry.n){\n          entry.r = true;\n          if(entry.p)entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function(key){\n        var that  = this\n          , entry = getEntry(that, key);\n        if(entry){\n          var next = entry.n\n            , prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if(prev)prev.n = next;\n          if(next)next.p = prev;\n          if(that._f == entry)that._f = next;\n          if(that._l == entry)that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /*, that = undefined */){\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3)\n          , entry;\n        while(entry = entry ? entry.n : this._f){\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while(entry && entry.r)entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key){\n        return !!getEntry(this, key);\n      }\n    });\n    if(DESCRIPTORS)$.setDesc(C.prototype, 'size', {\n      get: function(){\n        return defined(this[SIZE]);\n      }\n    });\n    return C;\n  },\n  def: function(that, key, value){\n    var entry = getEntry(that, key)\n      , prev, index;\n    // change existing entry\n    if(entry){\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if(!that._f)that._f = entry;\n      if(prev)prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if(index !== 'F')that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function(C, NAME, IS_MAP){\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function(iterated, kind){\n      this._t = iterated;  // target\n      this._k = kind;      // kind\n      this._l = undefined; // previous\n    }, function(){\n      var that  = this\n        , kind  = that._k\n        , entry = that._l;\n      // revert to the last existing entry\n      while(entry && entry.r)entry = entry.p;\n      // get next entry\n      if(!that._t || !(that._l = entry = entry ? entry.n : that._t._f)){\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if(kind == 'keys'  )return step(0, entry.k);\n      if(kind == 'values')return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values' , !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};\n},{\"./$\":49,\"./$.ctx\":28,\"./$.defined\":29,\"./$.descriptors\":30,\"./$.for-of\":34,\"./$.has\":36,\"./$.hide\":37,\"./$.is-object\":42,\"./$.iter-define\":45,\"./$.iter-step\":47,\"./$.redefine-all\":55,\"./$.set-species\":59,\"./$.strict-new\":63,\"./$.uid\":70}],25:[function(_dereq_,module,exports){\n// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar forOf   = _dereq_('./$.for-of')\n  , classof = _dereq_('./$.classof');\nmodule.exports = function(NAME){\n  return function toJSON(){\n    if(classof(this) != NAME)throw TypeError(NAME + \"#toJSON isn't generic\");\n    var arr = [];\n    forOf(this, false, arr.push, arr);\n    return arr;\n  };\n};\n},{\"./$.classof\":22,\"./$.for-of\":34}],26:[function(_dereq_,module,exports){\n'use strict';\nvar $              = _dereq_('./$')\n  , global         = _dereq_('./$.global')\n  , $export        = _dereq_('./$.export')\n  , fails          = _dereq_('./$.fails')\n  , hide           = _dereq_('./$.hide')\n  , redefineAll    = _dereq_('./$.redefine-all')\n  , forOf          = _dereq_('./$.for-of')\n  , strictNew      = _dereq_('./$.strict-new')\n  , isObject       = _dereq_('./$.is-object')\n  , setToStringTag = _dereq_('./$.set-to-string-tag')\n  , DESCRIPTORS    = _dereq_('./$.descriptors');\n\nmodule.exports = function(NAME, wrapper, methods, common, IS_MAP, IS_WEAK){\n  var Base  = global[NAME]\n    , C     = Base\n    , ADDER = IS_MAP ? 'set' : 'add'\n    , proto = C && C.prototype\n    , O     = {};\n  if(!DESCRIPTORS || typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function(){\n    new C().entries().next();\n  }))){\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n  } else {\n    C = wrapper(function(target, iterable){\n      strictNew(target, C, NAME);\n      target._c = new Base;\n      if(iterable != undefined)forOf(iterable, IS_MAP, target[ADDER], target);\n    });\n    $.each.call('add,clear,delete,forEach,get,has,set,keys,values,entries'.split(','),function(KEY){\n      var IS_ADDER = KEY == 'add' || KEY == 'set';\n      if(KEY in proto && !(IS_WEAK && KEY == 'clear'))hide(C.prototype, KEY, function(a, b){\n        if(!IS_ADDER && IS_WEAK && !isObject(a))return KEY == 'get' ? undefined : false;\n        var result = this._c[KEY](a === 0 ? 0 : a, b);\n        return IS_ADDER ? this : result;\n      });\n    });\n    if('size' in proto)$.setDesc(C.prototype, 'size', {\n      get: function(){\n        return this._c.size;\n      }\n    });\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F, O);\n\n  if(!IS_WEAK)common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n},{\"./$\":49,\"./$.descriptors\":30,\"./$.export\":32,\"./$.fails\":33,\"./$.for-of\":34,\"./$.global\":35,\"./$.hide\":37,\"./$.is-object\":42,\"./$.redefine-all\":55,\"./$.set-to-string-tag\":60,\"./$.strict-new\":63}],27:[function(_dereq_,module,exports){\nvar core = module.exports = {version: '1.2.6'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n},{}],28:[function(_dereq_,module,exports){\n// optional / simple context binding\nvar aFunction = _dereq_('./$.a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n},{\"./$.a-function\":19}],29:[function(_dereq_,module,exports){\n// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n},{}],30:[function(_dereq_,module,exports){\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !_dereq_('./$.fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n},{\"./$.fails\":33}],31:[function(_dereq_,module,exports){\nvar isObject = _dereq_('./$.is-object')\n  , document = _dereq_('./$.global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n},{\"./$.global\":35,\"./$.is-object\":42}],32:[function(_dereq_,module,exports){\nvar global    = _dereq_('./$.global')\n  , core      = _dereq_('./$.core')\n  , ctx       = _dereq_('./$.ctx')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && key in target;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(param){\n        return this instanceof C ? new C(param) : C(param);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    if(IS_PROTO)(exports[PROTOTYPE] || (exports[PROTOTYPE] = {}))[key] = out;\n  }\n};\n// type bitmap\n$export.F = 1;  // forced\n$export.G = 2;  // global\n$export.S = 4;  // static\n$export.P = 8;  // proto\n$export.B = 16; // bind\n$export.W = 32; // wrap\nmodule.exports = $export;\n},{\"./$.core\":27,\"./$.ctx\":28,\"./$.global\":35}],33:[function(_dereq_,module,exports){\nmodule.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n},{}],34:[function(_dereq_,module,exports){\nvar ctx         = _dereq_('./$.ctx')\n  , call        = _dereq_('./$.iter-call')\n  , isArrayIter = _dereq_('./$.is-array-iter')\n  , anObject    = _dereq_('./$.an-object')\n  , toLength    = _dereq_('./$.to-length')\n  , getIterFn   = _dereq_('./core.get-iterator-method');\nmodule.exports = function(iterable, entries, fn, that){\n  var iterFn = getIterFn(iterable)\n    , f      = ctx(fn, that, entries ? 2 : 1)\n    , index  = 0\n    , length, step, iterator;\n  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){\n    entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){\n    call(iterator, f, step.value, entries);\n  }\n};\n},{\"./$.an-object\":21,\"./$.ctx\":28,\"./$.is-array-iter\":41,\"./$.iter-call\":43,\"./$.to-length\":68,\"./core.get-iterator-method\":72}],35:[function(_dereq_,module,exports){\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n},{}],36:[function(_dereq_,module,exports){\nvar hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n},{}],37:[function(_dereq_,module,exports){\nvar $          = _dereq_('./$')\n  , createDesc = _dereq_('./$.property-desc');\nmodule.exports = _dereq_('./$.descriptors') ? function(object, key, value){\n  return $.setDesc(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n},{\"./$\":49,\"./$.descriptors\":30,\"./$.property-desc\":54}],38:[function(_dereq_,module,exports){\nmodule.exports = _dereq_('./$.global').document && document.documentElement;\n},{\"./$.global\":35}],39:[function(_dereq_,module,exports){\n// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function(fn, args, that){\n  var un = that === undefined;\n  switch(args.length){\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return              fn.apply(that, args);\n};\n},{}],40:[function(_dereq_,module,exports){\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = _dereq_('./$.cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n},{\"./$.cof\":23}],41:[function(_dereq_,module,exports){\n// check on default Array iterator\nvar Iterators  = _dereq_('./$.iterators')\n  , ITERATOR   = _dereq_('./$.wks')('iterator')\n  , ArrayProto = Array.prototype;\n\nmodule.exports = function(it){\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n},{\"./$.iterators\":48,\"./$.wks\":71}],42:[function(_dereq_,module,exports){\nmodule.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n},{}],43:[function(_dereq_,module,exports){\n// call something on iterator step with safe closing on error\nvar anObject = _dereq_('./$.an-object');\nmodule.exports = function(iterator, fn, value, entries){\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch(e){\n    var ret = iterator['return'];\n    if(ret !== undefined)anObject(ret.call(iterator));\n    throw e;\n  }\n};\n},{\"./$.an-object\":21}],44:[function(_dereq_,module,exports){\n'use strict';\nvar $              = _dereq_('./$')\n  , descriptor     = _dereq_('./$.property-desc')\n  , setToStringTag = _dereq_('./$.set-to-string-tag')\n  , IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\n_dereq_('./$.hide')(IteratorPrototype, _dereq_('./$.wks')('iterator'), function(){ return this; });\n\nmodule.exports = function(Constructor, NAME, next){\n  Constructor.prototype = $.create(IteratorPrototype, {next: descriptor(1, next)});\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n},{\"./$\":49,\"./$.hide\":37,\"./$.property-desc\":54,\"./$.set-to-string-tag\":60,\"./$.wks\":71}],45:[function(_dereq_,module,exports){\n'use strict';\nvar LIBRARY        = _dereq_('./$.library')\n  , $export        = _dereq_('./$.export')\n  , redefine       = _dereq_('./$.redefine')\n  , hide           = _dereq_('./$.hide')\n  , has            = _dereq_('./$.has')\n  , Iterators      = _dereq_('./$.iterators')\n  , $iterCreate    = _dereq_('./$.iter-create')\n  , setToStringTag = _dereq_('./$.set-to-string-tag')\n  , getProto       = _dereq_('./$').getProto\n  , ITERATOR       = _dereq_('./$.wks')('iterator')\n  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n  , FF_ITERATOR    = '@@iterator'\n  , KEYS           = 'keys'\n  , VALUES         = 'values';\n\nvar returnThis = function(){ return this; };\n\nmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function(kind){\n    if(!BUGGY && kind in proto)return proto[kind];\n    switch(kind){\n      case KEYS: return function keys(){ return new Constructor(this, kind); };\n      case VALUES: return function values(){ return new Constructor(this, kind); };\n    } return function entries(){ return new Constructor(this, kind); };\n  };\n  var TAG        = NAME + ' Iterator'\n    , DEF_VALUES = DEFAULT == VALUES\n    , VALUES_BUG = false\n    , proto      = Base.prototype\n    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n    , $default   = $native || getMethod(DEFAULT)\n    , methods, key;\n  // Fix native\n  if($native){\n    var IteratorPrototype = getProto($default.call(new Base));\n    // Set @@toStringTag to native iterators\n    setToStringTag(IteratorPrototype, TAG, true);\n    // FF fix\n    if(!LIBRARY && has(proto, FF_ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n    // fix Array#{values, @@iterator}.name in V8 / FF\n    if(DEF_VALUES && $native.name !== VALUES){\n      VALUES_BUG = true;\n      $default = function values(){ return $native.call(this); };\n    }\n  }\n  // Define iterator\n  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG]  = returnThis;\n  if(DEFAULT){\n    methods = {\n      values:  DEF_VALUES  ? $default : getMethod(VALUES),\n      keys:    IS_SET      ? $default : getMethod(KEYS),\n      entries: !DEF_VALUES ? $default : getMethod('entries')\n    };\n    if(FORCED)for(key in methods){\n      if(!(key in proto))redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n},{\"./$\":49,\"./$.export\":32,\"./$.has\":36,\"./$.hide\":37,\"./$.iter-create\":44,\"./$.iterators\":48,\"./$.library\":50,\"./$.redefine\":56,\"./$.set-to-string-tag\":60,\"./$.wks\":71}],46:[function(_dereq_,module,exports){\nvar ITERATOR     = _dereq_('./$.wks')('iterator')\n  , SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function(){ SAFE_CLOSING = true; };\n  Array.from(riter, function(){ throw 2; });\n} catch(e){ /* empty */ }\n\nmodule.exports = function(exec, skipClosing){\n  if(!skipClosing && !SAFE_CLOSING)return false;\n  var safe = false;\n  try {\n    var arr  = [7]\n      , iter = arr[ITERATOR]();\n    iter.next = function(){ return {done: safe = true}; };\n    arr[ITERATOR] = function(){ return iter; };\n    exec(arr);\n  } catch(e){ /* empty */ }\n  return safe;\n};\n},{\"./$.wks\":71}],47:[function(_dereq_,module,exports){\nmodule.exports = function(done, value){\n  return {value: value, done: !!done};\n};\n},{}],48:[function(_dereq_,module,exports){\nmodule.exports = {};\n},{}],49:[function(_dereq_,module,exports){\nvar $Object = Object;\nmodule.exports = {\n  create:     $Object.create,\n  getProto:   $Object.getPrototypeOf,\n  isEnum:     {}.propertyIsEnumerable,\n  getDesc:    $Object.getOwnPropertyDescriptor,\n  setDesc:    $Object.defineProperty,\n  setDescs:   $Object.defineProperties,\n  getKeys:    $Object.keys,\n  getNames:   $Object.getOwnPropertyNames,\n  getSymbols: $Object.getOwnPropertySymbols,\n  each:       [].forEach\n};\n},{}],50:[function(_dereq_,module,exports){\nmodule.exports = true;\n},{}],51:[function(_dereq_,module,exports){\nvar global    = _dereq_('./$.global')\n  , macrotask = _dereq_('./$.task').set\n  , Observer  = global.MutationObserver || global.WebKitMutationObserver\n  , process   = global.process\n  , Promise   = global.Promise\n  , isNode    = _dereq_('./$.cof')(process) == 'process'\n  , head, last, notify;\n\nvar flush = function(){\n  var parent, domain, fn;\n  if(isNode && (parent = process.domain)){\n    process.domain = null;\n    parent.exit();\n  }\n  while(head){\n    domain = head.domain;\n    fn     = head.fn;\n    if(domain)domain.enter();\n    fn(); // <- currently we use it only for Promise - try / catch not required\n    if(domain)domain.exit();\n    head = head.next;\n  } last = undefined;\n  if(parent)parent.enter();\n};\n\n// Node.js\nif(isNode){\n  notify = function(){\n    process.nextTick(flush);\n  };\n// browsers with MutationObserver\n} else if(Observer){\n  var toggle = 1\n    , node   = document.createTextNode('');\n  new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\n  notify = function(){\n    node.data = toggle = -toggle;\n  };\n// environments with maybe non-completely correct, but existent Promise\n} else if(Promise && Promise.resolve){\n  notify = function(){\n    Promise.resolve().then(flush);\n  };\n// for other environments - macrotask based on:\n// - setImmediate\n// - MessageChannel\n// - window.postMessag\n// - onreadystatechange\n// - setTimeout\n} else {\n  notify = function(){\n    // strange IE + webpack dev server bug - use .call(global)\n    macrotask.call(global, flush);\n  };\n}\n\nmodule.exports = function asap(fn){\n  var task = {fn: fn, next: undefined, domain: isNode && process.domain};\n  if(last)last.next = task;\n  if(!head){\n    head = task;\n    notify();\n  } last = task;\n};\n},{\"./$.cof\":23,\"./$.global\":35,\"./$.task\":65}],52:[function(_dereq_,module,exports){\n// 19.1.2.1 Object.assign(target, source, ...)\nvar $        = _dereq_('./$')\n  , toObject = _dereq_('./$.to-object')\n  , IObject  = _dereq_('./$.iobject');\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = _dereq_('./$.fails')(function(){\n  var a = Object.assign\n    , A = {}\n    , B = {}\n    , S = Symbol()\n    , K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function(k){ B[k] = k; });\n  return a({}, A)[S] != 7 || Object.keys(a({}, B)).join('') != K;\n}) ? function assign(target, source){ // eslint-disable-line no-unused-vars\n  var T     = toObject(target)\n    , $$    = arguments\n    , $$len = $$.length\n    , index = 1\n    , getKeys    = $.getKeys\n    , getSymbols = $.getSymbols\n    , isEnum     = $.isEnum;\n  while($$len > index){\n    var S      = IObject($$[index++])\n      , keys   = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S)\n      , length = keys.length\n      , j      = 0\n      , key;\n    while(length > j)if(isEnum.call(S, key = keys[j++]))T[key] = S[key];\n  }\n  return T;\n} : Object.assign;\n},{\"./$\":49,\"./$.fails\":33,\"./$.iobject\":40,\"./$.to-object\":69}],53:[function(_dereq_,module,exports){\n// most Object methods by ES6 should accept primitives\nvar $export = _dereq_('./$.export')\n  , core    = _dereq_('./$.core')\n  , fails   = _dereq_('./$.fails');\nmodule.exports = function(KEY, exec){\n  var fn  = (core.Object || {})[KEY] || Object[KEY]\n    , exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);\n};\n},{\"./$.core\":27,\"./$.export\":32,\"./$.fails\":33}],54:[function(_dereq_,module,exports){\nmodule.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n},{}],55:[function(_dereq_,module,exports){\nvar redefine = _dereq_('./$.redefine');\nmodule.exports = function(target, src){\n  for(var key in src)redefine(target, key, src[key]);\n  return target;\n};\n},{\"./$.redefine\":56}],56:[function(_dereq_,module,exports){\nmodule.exports = _dereq_('./$.hide');\n},{\"./$.hide\":37}],57:[function(_dereq_,module,exports){\n// 7.2.9 SameValue(x, y)\nmodule.exports = Object.is || function is(x, y){\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n},{}],58:[function(_dereq_,module,exports){\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar getDesc  = _dereq_('./$').getDesc\n  , isObject = _dereq_('./$.is-object')\n  , anObject = _dereq_('./$.an-object');\nvar check = function(O, proto){\n  anObject(O);\n  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function(test, buggy, set){\n      try {\n        set = _dereq_('./$.ctx')(Function.call, getDesc(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch(e){ buggy = true; }\n      return function setPrototypeOf(O, proto){\n        check(O, proto);\n        if(buggy)O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n},{\"./$\":49,\"./$.an-object\":21,\"./$.ctx\":28,\"./$.is-object\":42}],59:[function(_dereq_,module,exports){\n'use strict';\nvar core        = _dereq_('./$.core')\n  , $           = _dereq_('./$')\n  , DESCRIPTORS = _dereq_('./$.descriptors')\n  , SPECIES     = _dereq_('./$.wks')('species');\n\nmodule.exports = function(KEY){\n  var C = core[KEY];\n  if(DESCRIPTORS && C && !C[SPECIES])$.setDesc(C, SPECIES, {\n    configurable: true,\n    get: function(){ return this; }\n  });\n};\n},{\"./$\":49,\"./$.core\":27,\"./$.descriptors\":30,\"./$.wks\":71}],60:[function(_dereq_,module,exports){\nvar def = _dereq_('./$').setDesc\n  , has = _dereq_('./$.has')\n  , TAG = _dereq_('./$.wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};\n},{\"./$\":49,\"./$.has\":36,\"./$.wks\":71}],61:[function(_dereq_,module,exports){\nvar global = _dereq_('./$.global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n},{\"./$.global\":35}],62:[function(_dereq_,module,exports){\n// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject  = _dereq_('./$.an-object')\n  , aFunction = _dereq_('./$.a-function')\n  , SPECIES   = _dereq_('./$.wks')('species');\nmodule.exports = function(O, D){\n  var C = anObject(O).constructor, S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n},{\"./$.a-function\":19,\"./$.an-object\":21,\"./$.wks\":71}],63:[function(_dereq_,module,exports){\nmodule.exports = function(it, Constructor, name){\n  if(!(it instanceof Constructor))throw TypeError(name + \": use the 'new' operator!\");\n  return it;\n};\n},{}],64:[function(_dereq_,module,exports){\nvar toInteger = _dereq_('./$.to-integer')\n  , defined   = _dereq_('./$.defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function(TO_STRING){\n  return function(that, pos){\n    var s = String(defined(that))\n      , i = toInteger(pos)\n      , l = s.length\n      , a, b;\n    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n},{\"./$.defined\":29,\"./$.to-integer\":66}],65:[function(_dereq_,module,exports){\nvar ctx                = _dereq_('./$.ctx')\n  , invoke             = _dereq_('./$.invoke')\n  , html               = _dereq_('./$.html')\n  , cel                = _dereq_('./$.dom-create')\n  , global             = _dereq_('./$.global')\n  , process            = global.process\n  , setTask            = global.setImmediate\n  , clearTask          = global.clearImmediate\n  , MessageChannel     = global.MessageChannel\n  , counter            = 0\n  , queue              = {}\n  , ONREADYSTATECHANGE = 'onreadystatechange'\n  , defer, channel, port;\nvar run = function(){\n  var id = +this;\n  if(queue.hasOwnProperty(id)){\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listner = function(event){\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif(!setTask || !clearTask){\n  setTask = function setImmediate(fn){\n    var args = [], i = 1;\n    while(arguments.length > i)args.push(arguments[i++]);\n    queue[++counter] = function(){\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id){\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if(_dereq_('./$.cof')(process) == 'process'){\n    defer = function(id){\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if(MessageChannel){\n    channel = new MessageChannel;\n    port    = channel.port2;\n    channel.port1.onmessage = listner;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n    defer = function(id){\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listner, false);\n  // IE8-\n  } else if(ONREADYSTATECHANGE in cel('script')){\n    defer = function(id){\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function(id){\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set:   setTask,\n  clear: clearTask\n};\n},{\"./$.cof\":23,\"./$.ctx\":28,\"./$.dom-create\":31,\"./$.global\":35,\"./$.html\":38,\"./$.invoke\":39}],66:[function(_dereq_,module,exports){\n// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n},{}],67:[function(_dereq_,module,exports){\n// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = _dereq_('./$.iobject')\n  , defined = _dereq_('./$.defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n},{\"./$.defined\":29,\"./$.iobject\":40}],68:[function(_dereq_,module,exports){\n// 7.1.15 ToLength\nvar toInteger = _dereq_('./$.to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n},{\"./$.to-integer\":66}],69:[function(_dereq_,module,exports){\n// 7.1.13 ToObject(argument)\nvar defined = _dereq_('./$.defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};\n},{\"./$.defined\":29}],70:[function(_dereq_,module,exports){\nvar id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n},{}],71:[function(_dereq_,module,exports){\nvar store  = _dereq_('./$.shared')('wks')\n  , uid    = _dereq_('./$.uid')\n  , Symbol = _dereq_('./$.global').Symbol;\nmodule.exports = function(name){\n  return store[name] || (store[name] =\n    Symbol && Symbol[name] || (Symbol || uid)('Symbol.' + name));\n};\n},{\"./$.global\":35,\"./$.shared\":61,\"./$.uid\":70}],72:[function(_dereq_,module,exports){\nvar classof   = _dereq_('./$.classof')\n  , ITERATOR  = _dereq_('./$.wks')('iterator')\n  , Iterators = _dereq_('./$.iterators');\nmodule.exports = _dereq_('./$.core').getIteratorMethod = function(it){\n  if(it != undefined)return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n},{\"./$.classof\":22,\"./$.core\":27,\"./$.iterators\":48,\"./$.wks\":71}],73:[function(_dereq_,module,exports){\nvar anObject = _dereq_('./$.an-object')\n  , get      = _dereq_('./core.get-iterator-method');\nmodule.exports = _dereq_('./$.core').getIterator = function(it){\n  var iterFn = get(it);\n  if(typeof iterFn != 'function')throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n},{\"./$.an-object\":21,\"./$.core\":27,\"./core.get-iterator-method\":72}],74:[function(_dereq_,module,exports){\n'use strict';\nvar ctx         = _dereq_('./$.ctx')\n  , $export     = _dereq_('./$.export')\n  , toObject    = _dereq_('./$.to-object')\n  , call        = _dereq_('./$.iter-call')\n  , isArrayIter = _dereq_('./$.is-array-iter')\n  , toLength    = _dereq_('./$.to-length')\n  , getIterFn   = _dereq_('./core.get-iterator-method');\n$export($export.S + $export.F * !_dereq_('./$.iter-detect')(function(iter){ Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike/*, mapfn = undefined, thisArg = undefined*/){\n    var O       = toObject(arrayLike)\n      , C       = typeof this == 'function' ? this : Array\n      , $$      = arguments\n      , $$len   = $$.length\n      , mapfn   = $$len > 1 ? $$[1] : undefined\n      , mapping = mapfn !== undefined\n      , index   = 0\n      , iterFn  = getIterFn(O)\n      , length, result, step, iterator;\n    if(mapping)mapfn = ctx(mapfn, $$len > 2 ? $$[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if(iterFn != undefined && !(C == Array && isArrayIter(iterFn))){\n      for(iterator = iterFn.call(O), result = new C; !(step = iterator.next()).done; index++){\n        result[index] = mapping ? call(iterator, mapfn, [step.value, index], true) : step.value;\n      }\n    } else {\n      length = toLength(O.length);\n      for(result = new C(length); length > index; index++){\n        result[index] = mapping ? mapfn(O[index], index) : O[index];\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n},{\"./$.ctx\":28,\"./$.export\":32,\"./$.is-array-iter\":41,\"./$.iter-call\":43,\"./$.iter-detect\":46,\"./$.to-length\":68,\"./$.to-object\":69,\"./core.get-iterator-method\":72}],75:[function(_dereq_,module,exports){\n'use strict';\nvar addToUnscopables = _dereq_('./$.add-to-unscopables')\n  , step             = _dereq_('./$.iter-step')\n  , Iterators        = _dereq_('./$.iterators')\n  , toIObject        = _dereq_('./$.to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = _dereq_('./$.iter-define')(Array, 'Array', function(iterated, kind){\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , kind  = this._k\n    , index = this._i++;\n  if(!O || index >= O.length){\n    this._t = undefined;\n    return step(1);\n  }\n  if(kind == 'keys'  )return step(0, index);\n  if(kind == 'values')return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n},{\"./$.add-to-unscopables\":20,\"./$.iter-define\":45,\"./$.iter-step\":47,\"./$.iterators\":48,\"./$.to-iobject\":67}],76:[function(_dereq_,module,exports){\n// 19.1.3.1 Object.assign(target, source)\nvar $export = _dereq_('./$.export');\n\n$export($export.S + $export.F, 'Object', {assign: _dereq_('./$.object-assign')});\n},{\"./$.export\":32,\"./$.object-assign\":52}],77:[function(_dereq_,module,exports){\n// 19.1.2.14 Object.keys(O)\nvar toObject = _dereq_('./$.to-object');\n\n_dereq_('./$.object-sap')('keys', function($keys){\n  return function keys(it){\n    return $keys(toObject(it));\n  };\n});\n},{\"./$.object-sap\":53,\"./$.to-object\":69}],78:[function(_dereq_,module,exports){\n\n},{}],79:[function(_dereq_,module,exports){\n'use strict';\nvar $          = _dereq_('./$')\n  , LIBRARY    = _dereq_('./$.library')\n  , global     = _dereq_('./$.global')\n  , ctx        = _dereq_('./$.ctx')\n  , classof    = _dereq_('./$.classof')\n  , $export    = _dereq_('./$.export')\n  , isObject   = _dereq_('./$.is-object')\n  , anObject   = _dereq_('./$.an-object')\n  , aFunction  = _dereq_('./$.a-function')\n  , strictNew  = _dereq_('./$.strict-new')\n  , forOf      = _dereq_('./$.for-of')\n  , setProto   = _dereq_('./$.set-proto').set\n  , same       = _dereq_('./$.same-value')\n  , SPECIES    = _dereq_('./$.wks')('species')\n  , speciesConstructor = _dereq_('./$.species-constructor')\n  , asap       = _dereq_('./$.microtask')\n  , PROMISE    = 'Promise'\n  , process    = global.process\n  , isNode     = classof(process) == 'process'\n  , P          = global[PROMISE]\n  , empty      = function(){ /* empty */ }\n  , Wrapper;\n\nvar testResolve = function(sub){\n  var test = new P(empty), promise;\n  if(sub)test.constructor = function(exec){\n    exec(empty, empty);\n  };\n  (promise = P.resolve(test))['catch'](empty);\n  return promise === test;\n};\n\nvar USE_NATIVE = function(){\n  var works = false;\n  function P2(x){\n    var self = new P(x);\n    setProto(self, P2.prototype);\n    return self;\n  }\n  try {\n    works = P && P.resolve && testResolve();\n    setProto(P2, P);\n    P2.prototype = $.create(P.prototype, {constructor: {value: P2}});\n    // actual Firefox has broken subclass support, test that\n    if(!(P2.resolve(5).then(function(){}) instanceof P2)){\n      works = false;\n    }\n    // actual V8 bug, https://code.google.com/p/v8/issues/detail?id=4162\n    if(works && _dereq_('./$.descriptors')){\n      var thenableThenGotten = false;\n      P.resolve($.setDesc({}, 'then', {\n        get: function(){ thenableThenGotten = true; }\n      }));\n      works = thenableThenGotten;\n    }\n  } catch(e){ works = false; }\n  return works;\n}();\n\n// helpers\nvar sameConstructor = function(a, b){\n  // library wrapper special case\n  if(LIBRARY && a === P && b === Wrapper)return true;\n  return same(a, b);\n};\nvar getConstructor = function(C){\n  var S = anObject(C)[SPECIES];\n  return S != undefined ? S : C;\n};\nvar isThenable = function(it){\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar PromiseCapability = function(C){\n  var resolve, reject;\n  this.promise = new C(function($$resolve, $$reject){\n    if(resolve !== undefined || reject !== undefined)throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject  = $$reject;\n  });\n  this.resolve = aFunction(resolve),\n  this.reject  = aFunction(reject)\n};\nvar perform = function(exec){\n  try {\n    exec();\n  } catch(e){\n    return {error: e};\n  }\n};\nvar notify = function(record, isReject){\n  if(record.n)return;\n  record.n = true;\n  var chain = record.c;\n  asap(function(){\n    var value = record.v\n      , ok    = record.s == 1\n      , i     = 0;\n    var run = function(reaction){\n      var handler = ok ? reaction.ok : reaction.fail\n        , resolve = reaction.resolve\n        , reject  = reaction.reject\n        , result, then;\n      try {\n        if(handler){\n          if(!ok)record.h = true;\n          result = handler === true ? value : handler(value);\n          if(result === reaction.promise){\n            reject(TypeError('Promise-chain cycle'));\n          } else if(then = isThenable(result)){\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch(e){\n        reject(e);\n      }\n    };\n    while(chain.length > i)run(chain[i++]); // variable length - can't use forEach\n    chain.length = 0;\n    record.n = false;\n    if(isReject)setTimeout(function(){\n      var promise = record.p\n        , handler, console;\n      if(isUnhandled(promise)){\n        if(isNode){\n          process.emit('unhandledRejection', value, promise);\n        } else if(handler = global.onunhandledrejection){\n          handler({promise: promise, reason: value});\n        } else if((console = global.console) && console.error){\n          console.error('Unhandled promise rejection', value);\n        }\n      } record.a = undefined;\n    }, 1);\n  });\n};\nvar isUnhandled = function(promise){\n  var record = promise._d\n    , chain  = record.a || record.c\n    , i      = 0\n    , reaction;\n  if(record.h)return false;\n  while(chain.length > i){\n    reaction = chain[i++];\n    if(reaction.fail || !isUnhandled(reaction.promise))return false;\n  } return true;\n};\nvar $reject = function(value){\n  var record = this;\n  if(record.d)return;\n  record.d = true;\n  record = record.r || record; // unwrap\n  record.v = value;\n  record.s = 2;\n  record.a = record.c.slice();\n  notify(record, true);\n};\nvar $resolve = function(value){\n  var record = this\n    , then;\n  if(record.d)return;\n  record.d = true;\n  record = record.r || record; // unwrap\n  try {\n    if(record.p === value)throw TypeError(\"Promise can't be resolved itself\");\n    if(then = isThenable(value)){\n      asap(function(){\n        var wrapper = {r: record, d: false}; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch(e){\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      record.v = value;\n      record.s = 1;\n      notify(record, false);\n    }\n  } catch(e){\n    $reject.call({r: record, d: false}, e); // wrap\n  }\n};\n\n// constructor polyfill\nif(!USE_NATIVE){\n  // 25.4.3.1 Promise(executor)\n  P = function Promise(executor){\n    aFunction(executor);\n    var record = this._d = {\n      p: strictNew(this, P, PROMISE),         // <- promise\n      c: [],                                  // <- awaiting reactions\n      a: undefined,                           // <- checked in isUnhandled reactions\n      s: 0,                                   // <- state\n      d: false,                               // <- done\n      v: undefined,                           // <- value\n      h: false,                               // <- handled rejection\n      n: false                                // <- notify\n    };\n    try {\n      executor(ctx($resolve, record, 1), ctx($reject, record, 1));\n    } catch(err){\n      $reject.call(record, err);\n    }\n  };\n  _dereq_('./$.redefine-all')(P.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected){\n      var reaction = new PromiseCapability(speciesConstructor(this, P))\n        , promise  = reaction.promise\n        , record   = this._d;\n      reaction.ok   = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      record.c.push(reaction);\n      if(record.a)record.a.push(reaction);\n      if(record.s)notify(record, false);\n      return promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function(onRejected){\n      return this.then(undefined, onRejected);\n    }\n  });\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Promise: P});\n_dereq_('./$.set-to-string-tag')(P, PROMISE);\n_dereq_('./$.set-species')(PROMISE);\nWrapper = _dereq_('./$.core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r){\n    var capability = new PromiseCapability(this)\n      , $$reject   = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (!USE_NATIVE || testResolve(true)), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x){\n    // instanceof instead of internal slot check because we should fix it without replacement native Promise core\n    if(x instanceof P && sameConstructor(x.constructor, this))return x;\n    var capability = new PromiseCapability(this)\n      , $$resolve  = capability.resolve;\n    $$resolve(x);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && _dereq_('./$.iter-detect')(function(iter){\n  P.all(iter)['catch'](function(){});\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable){\n    var C          = getConstructor(this)\n      , capability = new PromiseCapability(C)\n      , resolve    = capability.resolve\n      , reject     = capability.reject\n      , values     = [];\n    var abrupt = perform(function(){\n      forOf(iterable, false, values.push, values);\n      var remaining = values.length\n        , results   = Array(remaining);\n      if(remaining)$.each.call(values, function(promise, index){\n        var alreadyCalled = false;\n        C.resolve(promise).then(function(value){\n          if(alreadyCalled)return;\n          alreadyCalled = true;\n          results[index] = value;\n          --remaining || resolve(results);\n        }, reject);\n      });\n      else resolve(results);\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable){\n    var C          = getConstructor(this)\n      , capability = new PromiseCapability(C)\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      forOf(iterable, false, function(promise){\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  }\n});\n},{\"./$\":49,\"./$.a-function\":19,\"./$.an-object\":21,\"./$.classof\":22,\"./$.core\":27,\"./$.ctx\":28,\"./$.descriptors\":30,\"./$.export\":32,\"./$.for-of\":34,\"./$.global\":35,\"./$.is-object\":42,\"./$.iter-detect\":46,\"./$.library\":50,\"./$.microtask\":51,\"./$.redefine-all\":55,\"./$.same-value\":57,\"./$.set-proto\":58,\"./$.set-species\":59,\"./$.set-to-string-tag\":60,\"./$.species-constructor\":62,\"./$.strict-new\":63,\"./$.wks\":71}],80:[function(_dereq_,module,exports){\n'use strict';\nvar strong = _dereq_('./$.collection-strong');\n\n// 23.2 Set Objects\n_dereq_('./$.collection')('Set', function(get){\n  return function Set(){ return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.2.3.1 Set.prototype.add(value)\n  add: function add(value){\n    return strong.def(this, value = value === 0 ? 0 : value, value);\n  }\n}, strong);\n},{\"./$.collection\":26,\"./$.collection-strong\":24}],81:[function(_dereq_,module,exports){\n'use strict';\nvar $at  = _dereq_('./$.string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\n_dereq_('./$.iter-define')(String, 'String', function(iterated){\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , index = this._i\n    , point;\n  if(index >= O.length)return {value: undefined, done: true};\n  point = $at(O, index);\n  this._i += point.length;\n  return {value: point, done: false};\n});\n},{\"./$.iter-define\":45,\"./$.string-at\":64}],82:[function(_dereq_,module,exports){\n// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export  = _dereq_('./$.export');\n\n$export($export.P, 'Set', {toJSON: _dereq_('./$.collection-to-json')('Set')});\n},{\"./$.collection-to-json\":25,\"./$.export\":32}],83:[function(_dereq_,module,exports){\n_dereq_('./es6.array.iterator');\nvar Iterators = _dereq_('./$.iterators');\nIterators.NodeList = Iterators.HTMLCollection = Iterators.Array;\n},{\"./$.iterators\":48,\"./es6.array.iterator\":75}],84:[function(_dereq_,module,exports){\nvar isFunction = _dereq_('is-function')\n\nmodule.exports = forEach\n\nvar toString = Object.prototype.toString\nvar hasOwnProperty = Object.prototype.hasOwnProperty\n\nfunction forEach(list, iterator, context) {\n    if (!isFunction(iterator)) {\n        throw new TypeError('iterator must be a function')\n    }\n\n    if (arguments.length < 3) {\n        context = this\n    }\n    \n    if (toString.call(list) === '[object Array]')\n        forEachArray(list, iterator, context)\n    else if (typeof list === 'string')\n        forEachString(list, iterator, context)\n    else\n        forEachObject(list, iterator, context)\n}\n\nfunction forEachArray(array, iterator, context) {\n    for (var i = 0, len = array.length; i < len; i++) {\n        if (hasOwnProperty.call(array, i)) {\n            iterator.call(context, array[i], i, array)\n        }\n    }\n}\n\nfunction forEachString(string, iterator, context) {\n    for (var i = 0, len = string.length; i < len; i++) {\n        // no such thing as a sparse string.\n        iterator.call(context, string.charAt(i), i, string)\n    }\n}\n\nfunction forEachObject(object, iterator, context) {\n    for (var k in object) {\n        if (hasOwnProperty.call(object, k)) {\n            iterator.call(context, object[k], k, object)\n        }\n    }\n}\n\n},{\"is-function\":86}],85:[function(_dereq_,module,exports){\n(function (global){\nif (typeof window !== \"undefined\") {\n    module.exports = window;\n} else if (typeof global !== \"undefined\") {\n    module.exports = global;\n} else if (typeof self !== \"undefined\"){\n    module.exports = self;\n} else {\n    module.exports = {};\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],86:[function(_dereq_,module,exports){\nmodule.exports = isFunction\n\nvar toString = Object.prototype.toString\n\nfunction isFunction (fn) {\n  var string = toString.call(fn)\n  return string === '[object Function]' ||\n    (typeof fn === 'function' && string !== '[object RegExp]') ||\n    (typeof window !== 'undefined' &&\n     // IE8 and below\n     (fn === window.setTimeout ||\n      fn === window.alert ||\n      fn === window.confirm ||\n      fn === window.prompt))\n};\n\n},{}],87:[function(_dereq_,module,exports){\nvar trim = _dereq_('trim')\n  , forEach = _dereq_('for-each')\n  , isArray = function(arg) {\n      return Object.prototype.toString.call(arg) === '[object Array]';\n    }\n\nmodule.exports = function (headers) {\n  if (!headers)\n    return {}\n\n  var result = {}\n\n  forEach(\n      trim(headers).split('\\n')\n    , function (row) {\n        var index = row.indexOf(':')\n          , key = trim(row.slice(0, index)).toLowerCase()\n          , value = trim(row.slice(index + 1))\n\n        if (typeof(result[key]) === 'undefined') {\n          result[key] = value\n        } else if (isArray(result[key])) {\n          result[key].push(value)\n        } else {\n          result[key] = [ result[key], value ]\n        }\n      }\n  )\n\n  return result\n}\n},{\"for-each\":84,\"trim\":88}],88:[function(_dereq_,module,exports){\n\nexports = module.exports = trim;\n\nfunction trim(str){\n  return str.replace(/^\\s*|\\s*$/g, '');\n}\n\nexports.left = function(str){\n  return str.replace(/^\\s*/, '');\n};\n\nexports.right = function(str){\n  return str.replace(/\\s*$/, '');\n};\n\n},{}],89:[function(_dereq_,module,exports){\n\"use strict\";\nvar window = _dereq_(\"global/window\")\nvar isFunction = _dereq_(\"is-function\")\nvar parseHeaders = _dereq_(\"parse-headers\")\nvar xtend = _dereq_(\"xtend\")\n\nmodule.exports = createXHR\ncreateXHR.XMLHttpRequest = window.XMLHttpRequest || noop\ncreateXHR.XDomainRequest = \"withCredentials\" in (new createXHR.XMLHttpRequest()) ? createXHR.XMLHttpRequest : window.XDomainRequest\n\nforEachArray([\"get\", \"put\", \"post\", \"patch\", \"head\", \"delete\"], function(method) {\n    createXHR[method === \"delete\" ? \"del\" : method] = function(uri, options, callback) {\n        options = initParams(uri, options, callback)\n        options.method = method.toUpperCase()\n        return _createXHR(options)\n    }\n})\n\nfunction forEachArray(array, iterator) {\n    for (var i = 0; i < array.length; i++) {\n        iterator(array[i])\n    }\n}\n\nfunction isEmpty(obj){\n    for(var i in obj){\n        if(obj.hasOwnProperty(i)) return false\n    }\n    return true\n}\n\nfunction initParams(uri, options, callback) {\n    var params = uri\n\n    if (isFunction(options)) {\n        callback = options\n        if (typeof uri === \"string\") {\n            params = {uri:uri}\n        }\n    } else {\n        params = xtend(options, {uri: uri})\n    }\n\n    params.callback = callback\n    return params\n}\n\nfunction createXHR(uri, options, callback) {\n    options = initParams(uri, options, callback)\n    return _createXHR(options)\n}\n\nfunction _createXHR(options) {\n    if(typeof options.callback === \"undefined\"){\n        throw new Error(\"callback argument missing\")\n    }\n\n    var called = false\n    var callback = function cbOnce(err, response, body){\n        if(!called){\n            called = true\n            options.callback(err, response, body)\n        }\n    }\n\n    function readystatechange() {\n        if (xhr.readyState === 4) {\n            setTimeout(loadFunc, 0)\n        }\n    }\n\n    function getBody() {\n        // Chrome with requestType=blob throws errors arround when even testing access to responseText\n        var body = undefined\n\n        if (xhr.response) {\n            body = xhr.response\n        } else {\n            body = xhr.responseText || getXml(xhr)\n        }\n\n        if (isJson) {\n            try {\n                body = JSON.parse(body)\n            } catch (e) {}\n        }\n\n        return body\n    }\n\n    function errorFunc(evt) {\n        clearTimeout(timeoutTimer)\n        if(!(evt instanceof Error)){\n            evt = new Error(\"\" + (evt || \"Unknown XMLHttpRequest Error\") )\n        }\n        evt.statusCode = 0\n        return callback(evt, failureResponse)\n    }\n\n    // will load the data & process the response in a special response object\n    function loadFunc() {\n        if (aborted) return\n        var status\n        clearTimeout(timeoutTimer)\n        if(options.useXDR && xhr.status===undefined) {\n            //IE8 CORS GET successful response doesn't have a status field, but body is fine\n            status = 200\n        } else {\n            status = (xhr.status === 1223 ? 204 : xhr.status)\n        }\n        var response = failureResponse\n        var err = null\n\n        if (status !== 0){\n            response = {\n                body: getBody(),\n                statusCode: status,\n                method: method,\n                headers: {},\n                url: uri,\n                rawRequest: xhr\n            }\n            if(xhr.getAllResponseHeaders){ //remember xhr can in fact be XDR for CORS in IE\n                response.headers = parseHeaders(xhr.getAllResponseHeaders())\n            }\n        } else {\n            err = new Error(\"Internal XMLHttpRequest Error\")\n        }\n        return callback(err, response, response.body)\n    }\n\n    var xhr = options.xhr || null\n\n    if (!xhr) {\n        if (options.cors || options.useXDR) {\n            xhr = new createXHR.XDomainRequest()\n        }else{\n            xhr = new createXHR.XMLHttpRequest()\n        }\n    }\n\n    var key\n    var aborted\n    var uri = xhr.url = options.uri || options.url\n    var method = xhr.method = options.method || \"GET\"\n    var body = options.body || options.data\n    var headers = xhr.headers = options.headers || {}\n    var sync = !!options.sync\n    var isJson = false\n    var timeoutTimer\n    var failureResponse = {\n        body: undefined,\n        headers: {},\n        statusCode: 0,\n        method: method,\n        url: uri,\n        rawRequest: xhr\n    }\n\n    if (\"json\" in options && options.json !== false) {\n        isJson = true\n        headers[\"accept\"] || headers[\"Accept\"] || (headers[\"Accept\"] = \"application/json\") //Don't override existing accept header declared by user\n        if (method !== \"GET\" && method !== \"HEAD\") {\n            headers[\"content-type\"] || headers[\"Content-Type\"] || (headers[\"Content-Type\"] = \"application/json\") //Don't override existing accept header declared by user\n            body = JSON.stringify(options.json === true ? body : options.json)\n        }\n    }\n\n    xhr.onreadystatechange = readystatechange\n    xhr.onload = loadFunc\n    xhr.onerror = errorFunc\n    // IE9 must have onprogress be set to a unique function.\n    xhr.onprogress = function () {\n        // IE must die\n    }\n    xhr.onabort = function(){\n        aborted = true;\n    }\n    xhr.ontimeout = errorFunc\n    xhr.open(method, uri, !sync, options.username, options.password)\n    //has to be after open\n    if(!sync) {\n        xhr.withCredentials = !!options.withCredentials\n    }\n    // Cannot set timeout with sync request\n    // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly\n    // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent\n    if (!sync && options.timeout > 0 ) {\n        timeoutTimer = setTimeout(function(){\n            if (aborted) return\n            aborted = true//IE9 may still call readystatechange\n            xhr.abort(\"timeout\")\n            var e = new Error(\"XMLHttpRequest timeout\")\n            e.code = \"ETIMEDOUT\"\n            errorFunc(e)\n        }, options.timeout )\n    }\n\n    if (xhr.setRequestHeader) {\n        for(key in headers){\n            if(headers.hasOwnProperty(key)){\n                xhr.setRequestHeader(key, headers[key])\n            }\n        }\n    } else if (options.headers && !isEmpty(options.headers)) {\n        throw new Error(\"Headers cannot be set on an XDomainRequest object\")\n    }\n\n    if (\"responseType\" in options) {\n        xhr.responseType = options.responseType\n    }\n\n    if (\"beforeSend\" in options &&\n        typeof options.beforeSend === \"function\"\n    ) {\n        options.beforeSend(xhr)\n    }\n\n    // Microsoft Edge browser sends \"undefined\" when send is called with undefined value.\n    // XMLHttpRequest spec says to pass null as body to indicate no body\n    // See https://github.com/naugtur/xhr/issues/100.\n    xhr.send(body || null)\n\n    return xhr\n\n\n}\n\nfunction getXml(xhr) {\n    if (xhr.responseType === \"document\") {\n        return xhr.responseXML\n    }\n    var firefoxBugTakenEffect = xhr.responseXML && xhr.responseXML.documentElement.nodeName === \"parsererror\"\n    if (xhr.responseType === \"\" && !firefoxBugTakenEffect) {\n        return xhr.responseXML\n    }\n\n    return null\n}\n\nfunction noop() {}\n\n},{\"global/window\":85,\"is-function\":86,\"parse-headers\":87,\"xtend\":90}],90:[function(_dereq_,module,exports){\nmodule.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n\n},{}],91:[function(_dereq_,module,exports){\n/*\nThe MIT License (MIT)\n\nCopyright (c) 2015 Patricio Gonzalez Vivo ( http://www.patriciogonzalezvivo.com )\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the 'Software'), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\nthe Software, and to permit persons to whom the Software is furnished to do so,\nsubject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\nFOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\nCOPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\nIN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n'use strict';\n\nvar _createClass = _dereq_('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nvar _interopRequireDefault = _dereq_('babel-runtime/helpers/interop-require-default')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar _xhr = _dereq_('xhr');\n\nvar _xhr2 = _interopRequireDefault(_xhr);\n\nvar _glGl = _dereq_('./gl/gl');\n\nvar _glTexture = _dereq_('./gl/Texture');\n\nvar _glTexture2 = _interopRequireDefault(_glTexture);\n\nvar _toolsCommon = _dereq_('./tools/common');\n\nvar _toolsMixin = _dereq_('./tools/mixin');\n\nvar GlslCanvas = (function () {\n    function GlslCanvas(canvas, options) {\n        var _this = this;\n\n        _classCallCheck(this, GlslCanvas);\n\n        (0, _toolsMixin.subscribeMixin)(this);\n\n        options = options || {};\n\n        this.width = canvas.clientWidth;\n        this.height = canvas.clientHeight;\n\n        this.canvas = canvas;\n        this.gl = undefined;\n        this.program = undefined;\n        this.textures = {};\n        this.uniforms = {};\n        this.vbo = {};\n        this.isValid = false;\n\n        this.vertexString = options.vertexString || '\\n#ifdef GL_ES\\nprecision mediump float;\\n#endif\\n\\nattribute vec2 a_position;\\nattribute vec2 a_texcoord;\\n\\nvarying vec2 v_texcoord;\\n\\nvoid main() {\\n    gl_Position = vec4(a_position, 0.0, 1.0);\\n    v_texcoord = a_texcoord;\\n}\\n';\n        this.fragmentString = options.fragmentString || '\\n#ifdef GL_ES\\nprecision mediump float;\\n#endif\\n\\nvarying vec2 v_texcoord;\\n\\nvoid main(){\\n    gl_FragColor = vec4(0.0);\\n}\\n';\n\n        // GL Context\n        var gl = (0, _glGl.setupWebGL)(canvas, options);\n        if (!gl) {\n            return;\n        }\n        this.gl = gl;\n        this.timeLoad = this.timePrev = performance.now();\n        this.timeDelta = 0.;\n        this.forceRender = true;\n        this.paused = false;\n\n        // Allow alpha\n        canvas.style.backgroundColor = options.backgroundColor || 'rgba(1,1,1,0)';\n\n        // Load shader\n        if (canvas.hasAttribute('data-fragment')) {\n            this.fragmentString = canvas.getAttribute('data-fragment');\n        } else if (canvas.hasAttribute('data-fragment-url')) {\n            var source = canvas.getAttribute('data-fragment-url');\n            _xhr2['default'].get(source, function (error, response, body) {\n                _this.load(body, _this.vertexString);\n            });\n        }\n\n        // Load shader\n        if (canvas.hasAttribute('data-vertex')) {\n            this.vertexString = canvas.getAttribute('data-vertex');\n        } else if (canvas.hasAttribute('data-vertex-url')) {\n            var source = canvas.getAttribute('data-vertex-url');\n            _xhr2['default'].get(source, function (error, response, body) {\n                _this.load(_this.fragmentString, body);\n            });\n        }\n\n        this.load();\n\n        if (!this.program) {\n            return;\n        }\n\n        // Define Vertex buffer\n        var texCoordsLoc = gl.getAttribLocation(this.program, 'a_texcoord');\n        this.vbo.texCoords = gl.createBuffer();\n        this.gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo.texCoords);\n        this.gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 1.0]), gl.STATIC_DRAW);\n        this.gl.enableVertexAttribArray(texCoordsLoc);\n        this.gl.vertexAttribPointer(texCoordsLoc, 2, gl.FLOAT, false, 0, 0);\n\n        var verticesLoc = gl.getAttribLocation(this.program, 'a_position');\n        this.vbo.vertices = gl.createBuffer();\n        this.gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo.vertices);\n        this.gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1.0, -1.0, 1.0, -1.0, -1.0, 1.0, -1.0, 1.0, 1.0, -1.0, 1.0, 1.0]), gl.STATIC_DRAW);\n        this.gl.enableVertexAttribArray(verticesLoc);\n        this.gl.vertexAttribPointer(verticesLoc, 2, gl.FLOAT, false, 0, 0);\n\n        // load TEXTURES\n        if (canvas.hasAttribute('data-textures')) {\n            var imgList = canvas.getAttribute('data-textures').split(',');\n            for (var nImg in imgList) {\n                this.setUniform('u_tex' + nImg, imgList[nImg]);\n            }\n        }\n\n        // ========================== EVENTS\n        var mouse = {\n            x: 0,\n            y: 0\n        };\n        document.addEventListener('mousemove', function (e) {\n            mouse.x = e.clientX || e.pageX;\n            mouse.y = e.clientY || e.pageY;\n        }, false);\n\n        var sandbox = this;\n        function RenderLoop() {\n            if (sandbox.nMouse > 1) {\n                sandbox.setMouse(mouse);\n            }\n            sandbox.render();\n            sandbox.forceRender = sandbox.resize();\n            window.requestAnimationFrame(RenderLoop);\n        }\n\n        // Start\n        this.setMouse({ x: 0, y: 0 });\n        RenderLoop();\n        return this;\n    }\n\n    _createClass(GlslCanvas, [{\n        key: 'destroy',\n        value: function destroy() {\n            this.animated = false;\n            this.isValid = false;\n            for (var tex in this.textures) {\n                this.gl.deleteTexture(tex);\n            }\n            this.textures = {};\n            for (var att in this.attribs) {\n                this.gl.deleteBuffer(this.attribs[att]);\n            }\n            this.gl.useProgram(null);\n            this.gl.deleteProgram(this.program);\n            this.program = null;\n            this.gl = null;\n        }\n    }, {\n        key: 'load',\n        value: function load(fragString, vertString) {\n            // Load vertex shader if there is one\n            if (vertString) {\n                this.vertexString = vertString;\n            }\n\n            // Load fragment shader if there is one\n            if (fragString) {\n                this.fragmentString = fragString;\n            }\n\n            this.animated = false;\n            this.nDelta = (this.fragmentString.match(/u_delta/g) || []).length;\n            this.nTime = (this.fragmentString.match(/u_time/g) || []).length;\n            this.nDate = (this.fragmentString.match(/u_date/g) || []).length;\n            this.nMouse = (this.fragmentString.match(/u_mouse/g) || []).length;\n            this.animated = this.nDate > 1 || this.nTime > 1 || this.nMouse > 1;\n\n            var nTextures = this.fragmentString.search(/sampler2D/g);\n            if (nTextures) {\n                var lines = this.fragmentString.split('\\n');\n                for (var i = 0; i < lines.length; i++) {\n                    var match = lines[i].match(/uniform\\s*sampler2D\\s*([\\w]*);\\s*\\/\\/\\s*([\\w|\\:\\/\\/|\\.|\\-|\\_]*)/i);\n                    if (match) {\n                        var ext = match[2].split('.').pop().toLowerCase();\n                        if (match[1] && match[2] && (ext === 'jpg' || ext === 'jpeg' || ext === 'png' || ext === 'ogv' || ext === 'webm' || ext === 'mp4')) {\n                            this.setUniform(match[1], match[2]);\n                        }\n                    }\n                    var main = lines[i].match(/\\s*void\\s*main\\s*/g);\n                    if (main) {\n                        break;\n                    }\n                }\n            }\n\n            var vertexShader = (0, _glGl.createShader)(this, this.vertexString, this.gl.VERTEX_SHADER);\n            var fragmentShader = (0, _glGl.createShader)(this, this.fragmentString, this.gl.FRAGMENT_SHADER);\n\n            // If Fragment shader fails load a empty one to sign the error\n            if (!fragmentShader) {\n                fragmentShader = (0, _glGl.createShader)(this, 'void main(){\\n\\tgl_FragColor = vec4(1.0);\\n}', this.gl.FRAGMENT_SHADER);\n                this.isValid = false;\n            } else {\n                this.isValid = true;\n            }\n\n            // Create and use program\n            var program = (0, _glGl.createProgram)(this, [vertexShader, fragmentShader]); //, [0,1],['a_texcoord','a_position']);\n            this.gl.useProgram(program);\n\n            // Delete shaders\n            // this.gl.detachShader(program, vertexShader);\n            // this.gl.detachShader(program, fragmentShader);\n            this.gl.deleteShader(vertexShader);\n            this.gl.deleteShader(fragmentShader);\n\n            this.program = program;\n            this.change = true;\n\n            // Trigger event\n            this.trigger('load', {});\n\n            this.forceRender = true;\n        }\n    }, {\n        key: 'test',\n        value: function test(callback, fragString, vertString) {\n            // Thanks to @thespite for the help here\n            // https://www.khronos.org/registry/webgl/extensions/EXT_disjoint_timer_query/\n            var pre_test_vert = this.vertexString;\n            var pre_test_frag = this.fragmentString;\n            var pre_test_paused = this.paused;\n\n            var ext = this.gl.getExtension('EXT_disjoint_timer_query');\n            var query = ext.createQueryEXT();\n            var wasValid = this.isValid;\n\n            if (fragString || vertString) {\n                this.load(fragString, vertString);\n                wasValid = this.isValid;\n                this.forceRender = true;\n                this.render();\n            }\n\n            this.paused = true;\n            ext.beginQueryEXT(ext.TIME_ELAPSED_EXT, query);\n            this.forceRender = true;\n            this.render();\n            ext.endQueryEXT(ext.TIME_ELAPSED_EXT);\n\n            var sandbox = this;\n            function finishTest() {\n                // Revert changes... go back to normal\n                sandbox.paused = pre_test_paused;\n                if (fragString || vertString) {\n                    sandbox.load(pre_test_frag, pre_test_vert);\n                }\n            }\n            function waitForTest() {\n                sandbox.forceRender = true;\n                sandbox.render();\n                var available = ext.getQueryObjectEXT(query, ext.QUERY_RESULT_AVAILABLE_EXT);\n                var disjoint = sandbox.gl.getParameter(ext.GPU_DISJOINT_EXT);\n                if (available && !disjoint) {\n                    var ret = {\n                        wasValid: wasValid,\n                        frag: fragString || sandbox.fragmentString,\n                        vert: vertString || sandbox.vertexString,\n                        timeElapsedMs: ext.getQueryObjectEXT(query, ext.QUERY_RESULT_EXT) / 1000000.0\n                    };\n                    finishTest();\n                    callback(ret);\n                } else {\n                    window.requestAnimationFrame(waitForTest);\n                }\n            }\n            waitForTest();\n        }\n    }, {\n        key: 'loadTexture',\n        value: function loadTexture(name, urlElementOrData, options) {\n            var _this2 = this;\n\n            if (!options) {\n                options = {};\n            }\n\n            if (typeof urlElementOrData === 'string') {\n                options.url = urlElementOrData;\n            } else if (typeof urlElementOrData === 'object' && urlElementOrData.data && urlElementOrData.width && urlElementOrData.height) {\n                options.data = urlElementOrData.data;\n                options.width = urlElementOrData.width;\n                options.height = urlElementOrData.height;\n            } else if (typeof urlElementOrData === 'object') {\n                options.element = urlElementOrData;\n            }\n\n            if (this.textures[name]) {\n                if (this.textures[name]) {\n                    this.textures[name].load(options);\n                    this.textures[name].on('loaded', function (args) {\n                        _this2.forceRender = true;\n                    });\n                }\n            } else {\n                this.textures[name] = new _glTexture2['default'](this.gl, name, options);\n                this.textures[name].on('loaded', function (args) {\n                    _this2.forceRender = true;\n                });\n            }\n        }\n    }, {\n        key: 'refreshUniforms',\n        value: function refreshUniforms() {\n            this.uniforms = {};\n        }\n    }, {\n        key: 'setUniform',\n        value: function setUniform(name) {\n            var u = {};\n\n            for (var _len = arguments.length, value = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n                value[_key - 1] = arguments[_key];\n            }\n\n            u[name] = value;\n            this.setUniforms(u);\n        }\n    }, {\n        key: 'setUniforms',\n        value: function setUniforms(uniforms) {\n            var parsed = (0, _glGl.parseUniforms)(uniforms);\n            // Set each uniform\n            for (var u in parsed) {\n                if (parsed[u].type === 'sampler2D') {\n                    // For textures, we need to track texture units, so we have a special setter\n                    // this.uniformTexture(parsed[u].name, parsed[u].value[0]);\n                    this.loadTexture(parsed[u].name, parsed[u].value[0]);\n                } else {\n                    this.uniform(parsed[u].method, parsed[u].type, parsed[u].name, parsed[u].value);\n                    this.forceRender = true;\n                }\n            }\n        }\n    }, {\n        key: 'setMouse',\n        value: function setMouse(mouse) {\n            // set the mouse uniform\n            var rect = this.canvas.getBoundingClientRect();\n            if (mouse && mouse.x && mouse.x >= rect.left && mouse.x <= rect.right && mouse.y && mouse.y >= rect.top && mouse.y <= rect.bottom) {\n                this.uniform('2f', 'vec2', 'u_mouse', mouse.x - rect.left, this.canvas.height - (mouse.y - rect.top));\n            }\n        }\n\n        // ex: program.uniform('3f', 'position', x, y, z);\n    }, {\n        key: 'uniform',\n        value: function uniform(method, type, name) {\n            // 'value' is a method-appropriate arguments list\n            this.uniforms[name] = this.uniforms[name] || {};\n            var uniform = this.uniforms[name];\n\n            for (var _len2 = arguments.length, value = Array(_len2 > 3 ? _len2 - 3 : 0), _key2 = 3; _key2 < _len2; _key2++) {\n                value[_key2 - 3] = arguments[_key2];\n            }\n\n            var change = (0, _toolsCommon.isDiff)(uniform.value, value);\n            if (change || this.change || uniform.location === undefined || uniform.value === undefined) {\n                uniform.name = name;\n                uniform.value = value;\n                uniform.type = type;\n                uniform.method = 'uniform' + method;\n                uniform.location = this.gl.getUniformLocation(this.program, name);\n\n                this.gl[uniform.method].apply(this.gl, [uniform.location].concat(uniform.value));\n            }\n        }\n    }, {\n        key: 'uniformTexture',\n        value: function uniformTexture(name, texture, options) {\n            if (this.textures[name] === undefined) {\n                this.loadTexture(name, texture, options);\n            } else {\n                this.uniform('1i', 'sampler2D', name, this.texureIndex);\n                this.textures[name].bind(this.texureIndex);\n                this.uniform('2f', 'vec2', name + 'Resolution', this.textures[name].width, this.textures[name].height);\n                this.texureIndex++;\n            }\n        }\n    }, {\n        key: 'resize',\n        value: function resize() {\n            if (this.width !== this.canvas.clientWidth || this.height !== this.canvas.clientHeight) {\n                var realToCSSPixels = window.devicePixelRatio || 1;\n\n                // Lookup the size the browser is displaying the canvas in CSS pixels\n                // and compute a size needed to make our drawingbuffer match it in\n                // device pixels.\n                var displayWidth = Math.floor(this.gl.canvas.clientWidth * realToCSSPixels);\n                var displayHeight = Math.floor(this.gl.canvas.clientHeight * realToCSSPixels);\n\n                // Check if the canvas is not the same size.\n                if (this.gl.canvas.width !== displayWidth || this.gl.canvas.height !== displayHeight) {\n                    // Make the canvas the same size\n                    this.gl.canvas.width = displayWidth;\n                    this.gl.canvas.height = displayHeight;\n                    // Set the viewport to match\n                    this.gl.viewport(0, 0, this.gl.canvas.width, this.gl.canvas.height);\n                    // this.gl.viewport(0, 0, this.gl.drawingBufferWidth, this.gl.drawingBufferHeight);\n                }\n                this.width = this.canvas.clientWidth;\n                this.height = this.canvas.clientHeight;\n                return true;\n            } else {\n                return false;\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            this.visible = (0, _toolsCommon.isCanvasVisible)(this.canvas);\n            if (this.forceRender || this.animated && this.visible && !this.paused) {\n\n                var date = new Date();\n                var now = performance.now();\n                this.timeDelta = (now - this.timePrev) / 1000.0;\n                this.timePrev = now;\n                if (this.nDelta > 1) {\n                    // set the delta time uniform\n                    this.uniform('1f', 'float', 'u_delta', this.timeDelta);\n                }\n\n                if (this.nTime > 1) {\n                    // set the elapsed time uniform\n                    this.uniform('1f', 'float', 'u_time', (now - this.timeLoad) / 1000.0);\n                }\n\n                if (this.nDate) {\n                    // Set date uniform: year/month/day/time_in_sec\n                    this.uniform('4f', 'float', 'u_date', date.getFullYear(), date.getMonth(), date.getDate(), date.getHours() * 3600 + date.getMinutes() * 60 + date.getSeconds() + date.getMilliseconds() * 0.001);\n                }\n\n                // set the resolution uniform\n                this.uniform('2f', 'vec2', 'u_resolution', this.canvas.width, this.canvas.height);\n\n                this.texureIndex = 0;\n                for (var tex in this.textures) {\n                    this.uniformTexture(tex);\n                }\n\n                // Draw the rectangle.\n                this.gl.drawArrays(this.gl.TRIANGLES, 0, 6);\n\n                // Trigger event\n                this.trigger('render', {});\n\n                this.change = false;\n                this.forceRender = false;\n            }\n        }\n    }, {\n        key: 'pause',\n        value: function pause() {\n            this.paused = true;\n        }\n    }, {\n        key: 'play',\n        value: function play() {\n            this.paused = false;\n        }\n    }, {\n        key: 'version',\n        value: function version() {\n            return '0.0.25';\n        }\n    }]);\n\n    return GlslCanvas;\n})();\n\nexports['default'] = GlslCanvas;\n\nwindow.GlslCanvas = GlslCanvas;\n\nfunction loadAllGlslCanvas() {\n    var list = document.getElementsByClassName('glslCanvas');\n    if (list.length > 0) {\n        window.glslCanvases = [];\n        for (var i = 0; i < list.length; i++) {\n            var sandbox = new GlslCanvas(list[i]);\n            if (sandbox.isValid) {\n                window.glslCanvases.push(sandbox);\n            }\n        }\n    }\n}\n\nwindow.addEventListener('load', function () {\n    loadAllGlslCanvas();\n});\nmodule.exports = exports['default'];\n\n},{\"./gl/Texture\":92,\"./gl/gl\":93,\"./tools/common\":94,\"./tools/mixin\":95,\"babel-runtime/helpers/class-call-check\":8,\"babel-runtime/helpers/create-class\":9,\"babel-runtime/helpers/interop-require-default\":10,\"xhr\":89}],92:[function(_dereq_,module,exports){\n// Texture management\n'use strict';\n\nvar _createClass = _dereq_('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nvar _Promise = _dereq_('babel-runtime/core-js/promise')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar _toolsCommon = _dereq_('../tools/common');\n\nvar _toolsMixin = _dereq_('../tools/mixin');\n\n// GL texture wrapper object for keeping track of a global set of textures, keyed by a unique user-defined name\n\nvar Texture = (function () {\n    function Texture(gl, name) {\n        var options = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n        _classCallCheck(this, Texture);\n\n        (0, _toolsMixin.subscribeMixin)(this);\n\n        this.gl = gl;\n        this.texture = gl.createTexture();\n        if (this.texture) {\n            this.valid = true;\n        }\n        this.bind();\n\n        this.name = name;\n        this.source = null;\n        this.sourceType = null;\n        this.loading = null; // a Promise object to track the loading state of this texture\n\n        // Default to a 1-pixel black texture so we can safely render while we wait for an image to load\n        // See: http://stackoverflow.com/questions/19722247/webgl-wait-for-texture-to-load\n        this.setData(1, 1, new Uint8Array([0, 0, 0, 255]), { filtering: 'linear' });\n        this.setFiltering(options.filtering);\n\n        this.load(options);\n    }\n\n    // Report max texture size for a GL context\n\n    // Destroy a single texture instance\n\n    _createClass(Texture, [{\n        key: 'destroy',\n        value: function destroy() {\n            if (!this.valid) {\n                return;\n            }\n            this.gl.deleteTexture(this.texture);\n            this.texture = null;\n            delete this.data;\n            this.data = null;\n            this.valid = false;\n        }\n    }, {\n        key: 'bind',\n        value: function bind(unit) {\n            if (!this.valid) {\n                return;\n            }\n            if (typeof unit === 'number') {\n                if (Texture.activeUnit !== unit) {\n                    this.gl.activeTexture(this.gl.TEXTURE0 + unit);\n                    Texture.activeUnit = unit;\n                }\n            }\n            if (Texture.activeTexture !== this.texture) {\n                this.gl.bindTexture(this.gl.TEXTURE_2D, this.texture);\n                Texture.activeTexture = this.texture;\n            }\n        }\n    }, {\n        key: 'load',\n        value: function load() {\n            var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n            this.loading = null;\n\n            if (typeof options.url === 'string') {\n                if (this.url === undefined || options.url !== this.url) {\n                    this.setUrl(options.url, options);\n                }\n            } else if (options.element) {\n                this.setElement(options.element, options);\n            } else if (options.data && options.width && options.height) {\n                this.setData(options.width, options.height, options.data, options);\n            }\n        }\n\n        // Sets texture from an url\n    }, {\n        key: 'setUrl',\n        value: function setUrl(url) {\n            var _this = this;\n\n            var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n            if (!this.valid) {\n                return;\n            }\n\n            this.url = url; // save URL reference (will be overwritten when element is loaded below)\n            this.source = this.url;\n            this.sourceType = 'url';\n\n            this.loading = new _Promise(function (resolve, reject) {\n                var ext = url.split('.').pop().toLowerCase();\n                var isVideo = ext === 'ogv' || ext === 'webm' || ext === 'mp4';\n\n                var element = undefined;\n                if (isVideo) {\n                    element = document.createElement('video');\n                    element.autoplay = true;\n                    options.filtering = 'nearest';\n                    // element.preload = 'auto';\n                    // element.style.display = 'none';\n                    // document.body.appendChild(element);\n                } else {\n                        element = new Image();\n                    }\n\n                element.onload = function () {\n                    try {\n                        _this.setElement(element, options);\n                    } catch (e) {\n                        console.log('Texture \\'' + _this.name + '\\': failed to load url: \\'' + _this.source + '\\'', e, options);\n                    }\n                    resolve(_this);\n                };\n                element.onerror = function (e) {\n                    // Warn and resolve on error\n                    console.log('Texture \\'' + _this.name + '\\': failed to load url: \\'' + _this.source + '\\'', e, options);\n                    resolve(_this);\n                };\n\n                // Safari has a bug loading data-URL elements with CORS enabled, so it must be disabled in that case\n                // https://bugs.webkit.org/show_bug.cgi?id=123978\n                if (!((0, _toolsCommon.isSafari)() && _this.source.slice(0, 5) === 'data:')) {\n                    element.crossOrigin = 'anonymous';\n                }\n\n                element.src = _this.source;\n                if (isVideo) {\n                    _this.setElement(element, options);\n                }\n            });\n            return this.loading;\n        }\n\n        // Sets texture to a raw image buffer\n    }, {\n        key: 'setData',\n        value: function setData(width, height, data) {\n            var options = arguments.length <= 3 || arguments[3] === undefined ? {} : arguments[3];\n\n            this.width = width;\n            this.height = height;\n\n            this.source = data;\n            this.sourceType = 'data';\n\n            this.update(options);\n            this.setFiltering(options);\n\n            this.loading = _Promise.resolve(this);\n            return this.loading;\n        }\n\n        // Sets the texture to track a element (canvas/image)\n    }, {\n        key: 'setElement',\n        value: function setElement(element, options) {\n            var _this2 = this;\n\n            var el = element;\n\n            // a string element is interpeted as a CSS selector\n            if (typeof element === 'string') {\n                element = document.querySelector(element);\n            }\n\n            if (element instanceof HTMLCanvasElement || element instanceof HTMLImageElement || element instanceof HTMLVideoElement) {\n                this.source = element;\n                this.sourceType = 'element';\n\n                if (element instanceof HTMLVideoElement) {\n                    element.addEventListener('canplaythrough', function () {\n                        _this2.intervalID = setInterval(function () {\n                            _this2.update(options);\n                        }, 15);\n                    }, true);\n                    element.addEventListener('ended', function () {\n                        element.currentTime = 0;\n                        element.play();\n                    }, true);\n                } else {\n                    this.update(options);\n                }\n                this.setFiltering(options);\n            } else {\n                var msg = 'the \\'element\\' parameter (`element: ' + JSON.stringify(el) + '`) must be a CSS ';\n                msg += 'selector string, or a <canvas>, <image> or <video> object';\n                console.log('Texture \\'' + this.name + '\\': ' + msg, options);\n            }\n\n            this.loading = _Promise.resolve(this);\n            return this.loading;\n        }\n\n        // Uploads current image or buffer to the GPU (can be used to update animated textures on the fly)\n    }, {\n        key: 'update',\n        value: function update() {\n            var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n            if (!this.valid) {\n                return;\n            }\n\n            this.bind();\n            this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, options.UNPACK_FLIP_Y_WEBGL === false ? false : true);\n            this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, options.UNPACK_PREMULTIPLY_ALPHA_WEBGL || false);\n\n            // Image or Canvas element\n            if (this.sourceType === 'element' && (this.source instanceof HTMLCanvasElement || this.source instanceof HTMLVideoElement || this.source instanceof HTMLImageElement && this.source.complete)) {\n                if (this.source instanceof HTMLVideoElement) {\n                    this.width = this.source.videoWidth;\n                    this.height = this.source.videoHeight;\n                } else {\n                    this.width = this.source.width;\n                    this.height = this.source.height;\n                }\n                this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.gl.RGBA, this.gl.UNSIGNED_BYTE, this.source);\n            }\n            // Raw image buffer\n            else if (this.sourceType === 'data') {\n                    this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.width, this.height, 0, this.gl.RGBA, this.gl.UNSIGNED_BYTE, this.source);\n                }\n            this.trigger('loaded', this);\n        }\n\n        // Determines appropriate filtering mode\n    }, {\n        key: 'setFiltering',\n        value: function setFiltering() {\n            var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n            if (!this.valid) {\n                return;\n            }\n\n            this.powerOf2 = (0, _toolsCommon.isPowerOf2)(this.width) && (0, _toolsCommon.isPowerOf2)(this.height);\n            var defualtFilter = this.powerOf2 ? 'mipmap' : 'linear';\n            this.filtering = options.filtering || defualtFilter;\n\n            var gl = this.gl;\n            this.bind();\n\n            // For power-of-2 textures, the following presets are available:\n            // mipmap: linear blend from nearest mip\n            // linear: linear blend from original image (no mips)\n            // nearest: nearest pixel from original image (no mips, 'blocky' look)\n            if (this.powerOf2) {\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, options.TEXTURE_WRAP_S || options.repeat && gl.REPEAT || gl.CLAMP_TO_EDGE);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, options.TEXTURE_WRAP_T || options.repeat && gl.REPEAT || gl.CLAMP_TO_EDGE);\n\n                if (this.filtering === 'mipmap') {\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR); // TODO: use trilinear filtering by defualt instead?\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n                    gl.generateMipmap(gl.TEXTURE_2D);\n                } else if (this.filtering === 'linear') {\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n                } else if (this.filtering === 'nearest') {\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n                }\n            } else {\n                // WebGL has strict requirements on non-power-of-2 textures:\n                // No mipmaps and must clamp to edge\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n                if (this.filtering === 'mipmap') {\n                    this.filtering = 'linear';\n                }\n\n                if (this.filtering === 'nearest') {\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n                } else {\n                    // default to linear for non-power-of-2 textures\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n                }\n            }\n        }\n    }]);\n\n    return Texture;\n})();\n\nexports['default'] = Texture;\nTexture.getMaxTextureSize = function (gl) {\n    return gl.getParameter(gl.MAX_TEXTURE_SIZE);\n};\n\n// Global set of textures, by name\nTexture.activeUnit = -1;\nmodule.exports = exports['default'];\n\n},{\"../tools/common\":94,\"../tools/mixin\":95,\"babel-runtime/core-js/promise\":6,\"babel-runtime/helpers/class-call-check\":8,\"babel-runtime/helpers/create-class\":9}],93:[function(_dereq_,module,exports){\n'use strict';\n\nvar _toConsumableArray = _dereq_('babel-runtime/helpers/to-consumable-array')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\nexports.setupWebGL = setupWebGL;\nexports.create3DContext = create3DContext;\nexports.createShader = createShader;\nexports.createProgram = createProgram;\nexports.parseUniforms = parseUniforms;\nvar lastError = '';\n\n/**\n * Creates the HTLM for a failure message\n * @param {string} canvasContainerId id of container of th\n *        canvas.\n * @return {string} The html.\n */\nfunction makeFailHTML(msg) {\n    return '\\n<table style=\"background-color: #8CE; width: 100%; height: 100%;\"><tr>\\n<td align=\"center\">\\n<div style=\"display: table-cell; vertical-align: middle;\">\\n<div style=\"\">' + msg + '</div>\\n</div>\\n</td></tr></table>\\n';\n}\n\n/**\n * Mesasge for getting a webgl browser\n * @type {string}\n */\nvar GET_A_WEBGL_BROWSER = '\\n\\tThis page requires a browser that supports WebGL.<br/>\\n\\t<a href=\"http://get.webgl.org\">Click here to upgrade your browser.</a>\\n';\n\n/**\n * Mesasge for need better hardware\n * @type {string}\n */\nvar OTHER_PROBLEM = '\\n\\tIt does not appear your computer can support WebGL.<br/>\\n\\t<a href=\"http://get.webgl.org/troubleshooting/\">Click here for more information.</a>\\n';\n\n/**\n * Creates a webgl context. If creation fails it will\n * change the contents of the container of the <canvas>\n * tag to an error message with the correct links for WebGL.\n * @param {Element} canvas. The canvas element to create a\n *     context from.\n * @param {WebGLContextCreationAttirbutes} optAttribs Any\n *     creation attributes you want to pass in.\n * @return {WebGLRenderingContext} The created context.\n */\n\nfunction setupWebGL(canvas, optAttribs) {\n    function showLink(str) {\n        var container = canvas.parentNode;\n        if (container) {\n            container.innerHTML = makeFailHTML(str);\n        }\n    }\n\n    if (!window.WebGLRenderingContext) {\n        showLink(GET_A_WEBGL_BROWSER);\n        return null;\n    }\n\n    var context = create3DContext(canvas, optAttribs);\n    if (!context) {\n        showLink(OTHER_PROBLEM);\n    }\n    context.getExtension('OES_standard_derivatives');\n    return context;\n}\n\n/**\n * Creates a webgl context.\n * @param {!Canvas} canvas The canvas tag to get context\n *     from. If one is not passed in one will be created.\n * @return {!WebGLContext} The created context.\n */\n\nfunction create3DContext(canvas, optAttribs) {\n    var names = ['webgl', 'experimental-webgl'];\n    var context = null;\n    for (var ii = 0; ii < names.length; ++ii) {\n        try {\n            context = canvas.getContext(names[ii], optAttribs);\n        } catch (e) {\n            if (context) {\n                break;\n            }\n        }\n    }\n    return context;\n}\n\n/*\n *\tCreate a Vertex of a specific type (gl.VERTEX_SHADER/)\n */\n\nfunction createShader(main, source, type) {\n    var gl = main.gl;\n\n    var shader = gl.createShader(type);\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n\n    var compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n\n    if (!compiled) {\n        // Something went wrong during compilation; get the error\n        lastError = gl.getShaderInfoLog(shader);\n        console.error('*** Error compiling shader ' + shader + ':' + lastError);\n        main.trigger('error', { shader: shader, source: source, type: type, error: lastError });\n        gl.deleteShader(shader);\n        return null;\n    }\n\n    return shader;\n}\n\n/**\n * Loads a shader.\n * @param {!WebGLContext} gl The WebGLContext to use.\n * @param {string} shaderSource The shader source.\n * @param {number} shaderType The type of shader.\n * @param {function(string): void) opt_errorCallback callback for errors.\n * @return {!WebGLShader} The created shader.\n */\n\nfunction createProgram(main, shaders, optAttribs, optLocations) {\n    var gl = main.gl;\n\n    var program = gl.createProgram();\n    for (var ii = 0; ii < shaders.length; ++ii) {\n        gl.attachShader(program, shaders[ii]);\n    }\n    if (optAttribs) {\n        for (var ii = 0; ii < optAttribs.length; ++ii) {\n            gl.bindAttribLocation(program, optLocations ? optLocations[ii] : ii, optAttribs[ii]);\n        }\n    }\n    gl.linkProgram(program);\n\n    // Check the link status\n    var linked = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (!linked) {\n        // something went wrong with the link\n        lastError = gl.getProgramInfoLog(program);\n        console.log('Error in program linking:' + lastError);\n        gl.deleteProgram(program);\n        return null;\n    }\n    return program;\n}\n\n// By Brett Camber on\n// https://github.com/tangrams/tangram/blob/master/src/gl/glsl.js\n\nfunction parseUniforms(uniforms) {\n    var prefix = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\n    var parsed = [];\n\n    for (var _name in uniforms) {\n        var uniform = uniforms[_name];\n        var u = undefined;\n\n        if (prefix) {\n            _name = prefix + '.' + _name;\n        }\n\n        // Single float\n        if (typeof uniform === 'number') {\n            parsed.push({\n                type: 'float',\n                method: '1f',\n                name: _name,\n                value: uniform\n            });\n        }\n        // Array: vector, array of floats, array of textures, or array of structs\n        else if (Array.isArray(uniform)) {\n                // Numeric values\n                if (typeof uniform[0] === 'number') {\n                    // float vectors (vec2, vec3, vec4)\n                    if (uniform.length === 1) {\n                        parsed.push({\n                            type: 'float',\n                            method: '1f',\n                            name: _name,\n                            value: uniform\n                        });\n                    }\n                    // float vectors (vec2, vec3, vec4)\n                    else if (uniform.length >= 2 && uniform.length <= 4) {\n                            parsed.push({\n                                type: 'vec' + uniform.length,\n                                method: uniform.length + 'fv',\n                                name: _name,\n                                value: uniform\n                            });\n                        }\n                        // float array\n                        else if (uniform.length > 4) {\n                                parsed.push({\n                                    type: 'float[]',\n                                    method: '1fv',\n                                    name: _name + '[0]',\n                                    value: uniform\n                                });\n                            }\n                    // TODO: assume matrix for (typeof == Float32Array && length == 16)?\n                }\n                // Array of textures\n                else if (typeof uniform[0] === 'string') {\n                        parsed.push({\n                            type: 'sampler2D',\n                            method: '1i',\n                            name: _name,\n                            value: uniform\n                        });\n                    }\n                    // Array of arrays - but only arrays of vectors are allowed in this case\n                    else if (Array.isArray(uniform[0]) && typeof uniform[0][0] === 'number') {\n                            // float vectors (vec2, vec3, vec4)\n                            if (uniform[0].length >= 2 && uniform[0].length <= 4) {\n                                // Set each vector in the array\n                                for (u = 0; u < uniform.length; u++) {\n                                    parsed.push({\n                                        type: 'vec' + uniform[0].length,\n                                        method: uniform[u].length + 'fv',\n                                        name: _name + '[' + u + ']',\n                                        value: uniform[u]\n                                    });\n                                }\n                            }\n                            // else error?\n                        }\n                        // Array of structures\n                        else if (typeof uniform[0] === 'object') {\n                                for (u = 0; u < uniform.length; u++) {\n                                    // Set each struct in the array\n                                    parsed.push.apply(parsed, _toConsumableArray(parseUniforms(uniform[u], _name + '[' + u + ']')));\n                                }\n                            }\n            }\n            // Boolean\n            else if (typeof uniform === 'boolean') {\n                    parsed.push({\n                        type: 'bool',\n                        method: '1i',\n                        name: _name,\n                        value: uniform\n                    });\n                }\n                // Texture\n                else if (typeof uniform === 'string') {\n                        parsed.push({\n                            type: 'sampler2D',\n                            method: '1i',\n                            name: _name,\n                            value: uniform\n                        });\n                    }\n                    // Structure\n                    else if (typeof uniform === 'object') {\n                            // Set each field in the struct\n                            parsed.push.apply(parsed, _toConsumableArray(parseUniforms(uniform, _name)));\n                        }\n        // TODO: support other non-float types? (int, etc.)\n    }\n    return parsed;\n}\n\n},{\"babel-runtime/helpers/to-consumable-array\":11}],94:[function(_dereq_,module,exports){\n'use strict';\n\nvar _Set = _dereq_('babel-runtime/core-js/set')['default'];\n\nvar _Object$assign = _dereq_('babel-runtime/core-js/object/assign')['default'];\n\nvar _getIterator = _dereq_('babel-runtime/core-js/get-iterator')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\nexports.isCanvasVisible = isCanvasVisible;\nexports.isPowerOf2 = isPowerOf2;\nexports.isSafari = isSafari;\nexports.nextHighestPowerOfTwo = nextHighestPowerOfTwo;\nexports.FormatNumberLength = FormatNumberLength;\nexports.getMousePos = getMousePos;\nexports.isDiff = isDiff;\nexports.subscribeMixin = subscribeMixin;\n\nfunction isCanvasVisible(canvas) {\n    return canvas.getBoundingClientRect().top + canvas.height > 0 && canvas.getBoundingClientRect().top < (window.innerHeight || document.documentElement.clientHeight);\n}\n\nfunction isPowerOf2(value) {\n    return (value & value - 1) === 0;\n}\n\nfunction isSafari() {\n    return (/^((?!chrome|android).)*safari/i.test(navigator.userAgent)\n    );\n}\n\n;\n\nfunction nextHighestPowerOfTwo(x) {\n    --x;\n    for (var i = 1; i < 32; i <<= 1) {\n        x = x | x >> i;\n    }\n    return x + 1;\n}\n\nfunction FormatNumberLength(num, length) {\n    var r = num.toString();\n    while (r.length < length) {\n        r = '0' + r;\n    }\n    return r;\n}\n\nfunction getMousePos(canvas, evt) {\n    var rect = canvas.getBoundingClientRect();\n    return {\n        x: evt.clientX - rect.left,\n        y: evt.clientY - rect.top\n    };\n}\n\nfunction isDiff(a, b) {\n    if (a && b) {\n        return a.toString() !== b.toString();\n    }\n    return false;\n}\n\nfunction subscribeMixin(target) {\n    var listeners = new _Set();\n\n    return _Object$assign(target, {\n\n        subscribe: function subscribe(listener) {\n            listeners.add(listener);\n        },\n\n        on: function on(type, f) {\n            var listener = {};\n            listener[type] = f;\n            listeners.add(listener);\n        },\n\n        unsubscribe: function unsubscribe(listener) {\n            listeners['delete'](listener);\n        },\n\n        unsubscribeAll: function unsubscribeAll() {\n            listeners.clear();\n        },\n\n        trigger: function trigger(event) {\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n                for (var _len = arguments.length, data = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n                    data[_key - 1] = arguments[_key];\n                }\n\n                for (var _iterator = _getIterator(listeners), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                    var listener = _step.value;\n\n                    if (typeof listener[event] === 'function') {\n                        listener[event].apply(listener, data);\n                    }\n                }\n            } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion && _iterator['return']) {\n                        _iterator['return']();\n                    }\n                } finally {\n                    if (_didIteratorError) {\n                        throw _iteratorError;\n                    }\n                }\n            }\n        }\n    });\n}\n\n},{\"babel-runtime/core-js/get-iterator\":2,\"babel-runtime/core-js/object/assign\":3,\"babel-runtime/core-js/set\":7}],95:[function(_dereq_,module,exports){\n'use strict';\n\nvar _Set = _dereq_('babel-runtime/core-js/set')['default'];\n\nvar _Object$assign = _dereq_('babel-runtime/core-js/object/assign')['default'];\n\nvar _getIterator = _dereq_('babel-runtime/core-js/get-iterator')['default'];\n\nvar _Object$keys = _dereq_('babel-runtime/core-js/object/keys')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\nexports.subscribeMixin = subscribeMixin;\n\nfunction subscribeMixin(target) {\n    var listeners = new _Set();\n\n    return _Object$assign(target, {\n\n        on: function on(type, f) {\n            var listener = {};\n            listener[type] = f;\n            listeners.add(listener);\n        },\n\n        off: function off(type, f) {\n            if (f) {\n                var listener = {};\n                listener[type] = f;\n                listeners['delete'](listener);\n            } else {\n                var _iteratorNormalCompletion = true;\n                var _didIteratorError = false;\n                var _iteratorError = undefined;\n\n                try {\n                    for (var _iterator = _getIterator(listeners), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                        var item = _step.value;\n                        var _iteratorNormalCompletion2 = true;\n                        var _didIteratorError2 = false;\n                        var _iteratorError2 = undefined;\n\n                        try {\n                            for (var _iterator2 = _getIterator(_Object$keys(item)), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                                var key = _step2.value;\n\n                                if (key === type) {\n                                    listeners['delete'](item);\n                                    return;\n                                }\n                            }\n                        } catch (err) {\n                            _didIteratorError2 = true;\n                            _iteratorError2 = err;\n                        } finally {\n                            try {\n                                if (!_iteratorNormalCompletion2 && _iterator2['return']) {\n                                    _iterator2['return']();\n                                }\n                            } finally {\n                                if (_didIteratorError2) {\n                                    throw _iteratorError2;\n                                }\n                            }\n                        }\n                    }\n                } catch (err) {\n                    _didIteratorError = true;\n                    _iteratorError = err;\n                } finally {\n                    try {\n                        if (!_iteratorNormalCompletion && _iterator['return']) {\n                            _iterator['return']();\n                        }\n                    } finally {\n                        if (_didIteratorError) {\n                            throw _iteratorError;\n                        }\n                    }\n                }\n            }\n        },\n\n        listSubscriptions: function listSubscriptions() {\n            var _iteratorNormalCompletion3 = true;\n            var _didIteratorError3 = false;\n            var _iteratorError3 = undefined;\n\n            try {\n                for (var _iterator3 = _getIterator(listeners), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                    var item = _step3.value;\n\n                    console.log(item);\n                }\n            } catch (err) {\n                _didIteratorError3 = true;\n                _iteratorError3 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion3 && _iterator3['return']) {\n                        _iterator3['return']();\n                    }\n                } finally {\n                    if (_didIteratorError3) {\n                        throw _iteratorError3;\n                    }\n                }\n            }\n        },\n\n        subscribe: function subscribe(listener) {\n            listeners.add(listener);\n        },\n\n        unsubscribe: function unsubscribe(listener) {\n            listeners['delete'](listener);\n        },\n\n        unsubscribeAll: function unsubscribeAll() {\n            listeners.clear();\n        },\n\n        trigger: function trigger(event) {\n            var _iteratorNormalCompletion4 = true;\n            var _didIteratorError4 = false;\n            var _iteratorError4 = undefined;\n\n            try {\n                for (var _len = arguments.length, data = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n                    data[_key - 1] = arguments[_key];\n                }\n\n                for (var _iterator4 = _getIterator(listeners), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                    var listener = _step4.value;\n\n                    if (typeof listener[event] === 'function') {\n                        listener[event].apply(listener, data);\n                    }\n                }\n            } catch (err) {\n                _didIteratorError4 = true;\n                _iteratorError4 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion4 && _iterator4['return']) {\n                        _iterator4['return']();\n                    }\n                } finally {\n                    if (_didIteratorError4) {\n                        throw _iteratorError4;\n                    }\n                }\n            }\n        }\n    });\n}\n\n},{\"babel-runtime/core-js/get-iterator\":2,\"babel-runtime/core-js/object/assign\":3,\"babel-runtime/core-js/object/keys\":5,\"babel-runtime/core-js/set\":7}]},{},[91])(91)\n});\n\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],114:[function(_dereq_,module,exports){\nmodule.exports = isFunction\n\nvar toString = Object.prototype.toString\n\nfunction isFunction (fn) {\n  var string = toString.call(fn)\n  return string === '[object Function]' ||\n    (typeof fn === 'function' && string !== '[object RegExp]') ||\n    (typeof window !== 'undefined' &&\n     // IE8 and below\n     (fn === window.setTimeout ||\n      fn === window.alert ||\n      fn === window.confirm ||\n      fn === window.prompt))\n};\n\n},{}],115:[function(_dereq_,module,exports){\nvar trim = _dereq_('trim')\n  , forEach = _dereq_('for-each')\n  , isArray = function(arg) {\n      return Object.prototype.toString.call(arg) === '[object Array]';\n    }\n\nmodule.exports = function (headers) {\n  if (!headers)\n    return {}\n\n  var result = {}\n\n  forEach(\n      trim(headers).split('\\n')\n    , function (row) {\n        var index = row.indexOf(':')\n          , key = trim(row.slice(0, index)).toLowerCase()\n          , value = trim(row.slice(index + 1))\n\n        if (typeof(result[key]) === 'undefined') {\n          result[key] = value\n        } else if (isArray(result[key])) {\n          result[key].push(value)\n        } else {\n          result[key] = [ result[key], value ]\n        }\n      }\n  )\n\n  return result\n}\n},{\"for-each\":111,\"trim\":116}],116:[function(_dereq_,module,exports){\n\nexports = module.exports = trim;\n\nfunction trim(str){\n  return str.replace(/^\\s*|\\s*$/g, '');\n}\n\nexports.left = function(str){\n  return str.replace(/^\\s*/, '');\n};\n\nexports.right = function(str){\n  return str.replace(/\\s*$/, '');\n};\n\n},{}],117:[function(_dereq_,module,exports){\n\"use strict\";\nvar window = _dereq_(\"global/window\")\nvar isFunction = _dereq_(\"is-function\")\nvar parseHeaders = _dereq_(\"parse-headers\")\nvar xtend = _dereq_(\"xtend\")\n\nmodule.exports = createXHR\ncreateXHR.XMLHttpRequest = window.XMLHttpRequest || noop\ncreateXHR.XDomainRequest = \"withCredentials\" in (new createXHR.XMLHttpRequest()) ? createXHR.XMLHttpRequest : window.XDomainRequest\n\nforEachArray([\"get\", \"put\", \"post\", \"patch\", \"head\", \"delete\"], function(method) {\n    createXHR[method === \"delete\" ? \"del\" : method] = function(uri, options, callback) {\n        options = initParams(uri, options, callback)\n        options.method = method.toUpperCase()\n        return _createXHR(options)\n    }\n})\n\nfunction forEachArray(array, iterator) {\n    for (var i = 0; i < array.length; i++) {\n        iterator(array[i])\n    }\n}\n\nfunction isEmpty(obj){\n    for(var i in obj){\n        if(obj.hasOwnProperty(i)) return false\n    }\n    return true\n}\n\nfunction initParams(uri, options, callback) {\n    var params = uri\n\n    if (isFunction(options)) {\n        callback = options\n        if (typeof uri === \"string\") {\n            params = {uri:uri}\n        }\n    } else {\n        params = xtend(options, {uri: uri})\n    }\n\n    params.callback = callback\n    return params\n}\n\nfunction createXHR(uri, options, callback) {\n    options = initParams(uri, options, callback)\n    return _createXHR(options)\n}\n\nfunction _createXHR(options) {\n    if(typeof options.callback === \"undefined\"){\n        throw new Error(\"callback argument missing\")\n    }\n\n    var called = false\n    var callback = function cbOnce(err, response, body){\n        if(!called){\n            called = true\n            options.callback(err, response, body)\n        }\n    }\n\n    function readystatechange() {\n        if (xhr.readyState === 4) {\n            setTimeout(loadFunc, 0)\n        }\n    }\n\n    function getBody() {\n        // Chrome with requestType=blob throws errors arround when even testing access to responseText\n        var body = undefined\n\n        if (xhr.response) {\n            body = xhr.response\n        } else {\n            body = xhr.responseText || getXml(xhr)\n        }\n\n        if (isJson) {\n            try {\n                body = JSON.parse(body)\n            } catch (e) {}\n        }\n\n        return body\n    }\n\n    function errorFunc(evt) {\n        clearTimeout(timeoutTimer)\n        if(!(evt instanceof Error)){\n            evt = new Error(\"\" + (evt || \"Unknown XMLHttpRequest Error\") )\n        }\n        evt.statusCode = 0\n        return callback(evt, failureResponse)\n    }\n\n    // will load the data & process the response in a special response object\n    function loadFunc() {\n        if (aborted) return\n        var status\n        clearTimeout(timeoutTimer)\n        if(options.useXDR && xhr.status===undefined) {\n            //IE8 CORS GET successful response doesn't have a status field, but body is fine\n            status = 200\n        } else {\n            status = (xhr.status === 1223 ? 204 : xhr.status)\n        }\n        var response = failureResponse\n        var err = null\n\n        if (status !== 0){\n            response = {\n                body: getBody(),\n                statusCode: status,\n                method: method,\n                headers: {},\n                url: uri,\n                rawRequest: xhr\n            }\n            if(xhr.getAllResponseHeaders){ //remember xhr can in fact be XDR for CORS in IE\n                response.headers = parseHeaders(xhr.getAllResponseHeaders())\n            }\n        } else {\n            err = new Error(\"Internal XMLHttpRequest Error\")\n        }\n        return callback(err, response, response.body)\n    }\n\n    var xhr = options.xhr || null\n\n    if (!xhr) {\n        if (options.cors || options.useXDR) {\n            xhr = new createXHR.XDomainRequest()\n        }else{\n            xhr = new createXHR.XMLHttpRequest()\n        }\n    }\n\n    var key\n    var aborted\n    var uri = xhr.url = options.uri || options.url\n    var method = xhr.method = options.method || \"GET\"\n    var body = options.body || options.data\n    var headers = xhr.headers = options.headers || {}\n    var sync = !!options.sync\n    var isJson = false\n    var timeoutTimer\n    var failureResponse = {\n        body: undefined,\n        headers: {},\n        statusCode: 0,\n        method: method,\n        url: uri,\n        rawRequest: xhr\n    }\n\n    if (\"json\" in options && options.json !== false) {\n        isJson = true\n        headers[\"accept\"] || headers[\"Accept\"] || (headers[\"Accept\"] = \"application/json\") //Don't override existing accept header declared by user\n        if (method !== \"GET\" && method !== \"HEAD\") {\n            headers[\"content-type\"] || headers[\"Content-Type\"] || (headers[\"Content-Type\"] = \"application/json\") //Don't override existing accept header declared by user\n            body = JSON.stringify(options.json === true ? body : options.json)\n        }\n    }\n\n    xhr.onreadystatechange = readystatechange\n    xhr.onload = loadFunc\n    xhr.onerror = errorFunc\n    // IE9 must have onprogress be set to a unique function.\n    xhr.onprogress = function () {\n        // IE must die\n    }\n    xhr.onabort = function(){\n        aborted = true;\n    }\n    xhr.ontimeout = errorFunc\n    xhr.open(method, uri, !sync, options.username, options.password)\n    //has to be after open\n    if(!sync) {\n        xhr.withCredentials = !!options.withCredentials\n    }\n    // Cannot set timeout with sync request\n    // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly\n    // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent\n    if (!sync && options.timeout > 0 ) {\n        timeoutTimer = setTimeout(function(){\n            if (aborted) return\n            aborted = true//IE9 may still call readystatechange\n            xhr.abort(\"timeout\")\n            var e = new Error(\"XMLHttpRequest timeout\")\n            e.code = \"ETIMEDOUT\"\n            errorFunc(e)\n        }, options.timeout )\n    }\n\n    if (xhr.setRequestHeader) {\n        for(key in headers){\n            if(headers.hasOwnProperty(key)){\n                xhr.setRequestHeader(key, headers[key])\n            }\n        }\n    } else if (options.headers && !isEmpty(options.headers)) {\n        throw new Error(\"Headers cannot be set on an XDomainRequest object\")\n    }\n\n    if (\"responseType\" in options) {\n        xhr.responseType = options.responseType\n    }\n\n    if (\"beforeSend\" in options &&\n        typeof options.beforeSend === \"function\"\n    ) {\n        options.beforeSend(xhr)\n    }\n\n    // Microsoft Edge browser sends \"undefined\" when send is called with undefined value.\n    // XMLHttpRequest spec says to pass null as body to indicate no body\n    // See https://github.com/naugtur/xhr/issues/100.\n    xhr.send(body || null)\n\n    return xhr\n\n\n}\n\nfunction getXml(xhr) {\n    if (xhr.responseType === \"document\") {\n        return xhr.responseXML\n    }\n    var firefoxBugTakenEffect = xhr.responseXML && xhr.responseXML.documentElement.nodeName === \"parsererror\"\n    if (xhr.responseType === \"\" && !firefoxBugTakenEffect) {\n        return xhr.responseXML\n    }\n\n    return null\n}\n\nfunction noop() {}\n\n},{\"global/window\":112,\"is-function\":114,\"parse-headers\":115,\"xtend\":118}],118:[function(_dereq_,module,exports){\nmodule.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n\n},{}],119:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = _dereq_('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nvar _Object$keys = _dereq_('babel-runtime/core-js/object/keys')['default'];\n\nvar _Object$create = _dereq_('babel-runtime/core-js/object/create')['default'];\n\nvar _interopRequireDefault = _dereq_('babel-runtime/helpers/interop-require-default')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\n_dereq_('document-register-element');\n\nvar _coreShader = _dereq_('./core/Shader');\n\nvar _coreShader2 = _interopRequireDefault(_coreShader);\n\nvar _coreEditor = _dereq_('./core/Editor');\n\nvar _uiMenu = _dereq_('./ui/Menu');\n\nvar _uiMenu2 = _interopRequireDefault(_uiMenu);\n\nvar _uiHelpers = _dereq_('./ui/Helpers');\n\nvar _uiHelpers2 = _interopRequireDefault(_uiHelpers);\n\nvar _uiErrorsDisplay = _dereq_('./ui/ErrorsDisplay');\n\nvar _uiErrorsDisplay2 = _interopRequireDefault(_uiErrorsDisplay);\n\nvar _uiVisualDebugger = _dereq_('./ui/VisualDebugger');\n\nvar _uiVisualDebugger2 = _interopRequireDefault(_uiVisualDebugger);\n\nvar _uiExportIcon = _dereq_('./ui/ExportIcon');\n\nvar _uiExportIcon2 = _interopRequireDefault(_uiExportIcon);\n\nvar _ioFileDrop = _dereq_('./io/FileDrop');\n\nvar _ioFileDrop2 = _interopRequireDefault(_ioFileDrop);\n\nvar _ioHashWatch = _dereq_('./io/HashWatch');\n\nvar _ioHashWatch2 = _interopRequireDefault(_ioHashWatch);\n\nvar _ioBufferManager = _dereq_('./io/BufferManager');\n\nvar _ioBufferManager2 = _interopRequireDefault(_ioBufferManager);\n\nvar _ioLocalStorage = _dereq_('./io/LocalStorage');\n\nvar _ioLocalStorage2 = _interopRequireDefault(_ioLocalStorage);\n\n// Import Utils\n\nvar _xhr = _dereq_('xhr');\n\nvar _xhr2 = _interopRequireDefault(_xhr);\n\nvar _toolsMixin = _dereq_('./tools/mixin');\n\n// 3er Parties\n\nvar _vendorFileSaverMinJs = _dereq_('./vendor/FileSaver.min.js');\n\n// Cross storage for Openframe -- allows restricted access to certain localStorage operations\n// on the openframe domain\n\nvar _crossStorage = _dereq_('cross-storage');\n\nvar STORAGE_LAST_EDITOR_CONTENT = 'last-content';\n\nvar EMPTY_FRAG_SHADER = '// Author:\\n// Title:\\n\\n#ifdef GL_ES\\nprecision mediump float;\\n#endif\\n\\nuniform vec2 u_resolution;\\nuniform vec2 u_mouse;\\nuniform float u_time;\\n\\nvoid main() {\\n    vec2 st = gl_FragCoord.xy/u_resolution.xy;\\n    st.x *= u_resolution.x/u_resolution.y;\\n\\n    vec3 color = vec3(0.);\\n    color = vec3(st.x,st.y,abs(sin(u_time)));\\n\\n    gl_FragColor = vec4(color,1.0);\\n}';\n\nvar GlslEditor = (function () {\n    function GlslEditor(selector, options) {\n        var _this = this;\n\n        _classCallCheck(this, GlslEditor);\n\n        this.createFontLink();\n        (0, _toolsMixin.subscribeMixin)(this);\n\n        if (typeof selector === 'object' && selector.nodeType && selector.nodeType === 1) {\n            this.container = selector;\n        } else if (typeof selector === 'string') {\n            this.container = document.querySelector(selector);\n        } else {\n            console.log('Error, type ' + typeof selector + ' of ' + selector + ' is unknown');\n            return;\n        }\n\n        this.options = {};\n        this.change = false;\n        this.autoupdate = true;\n\n        if (options) {\n            this.options = options;\n        }\n\n        if (this.options.imgs) {\n            this.options.imgs = [];\n        }\n\n        if (this.options.displayMenu === undefined) {\n            this.options.displayMenu = true;\n        }\n\n        if (this.container.hasAttribute('data-textures')) {\n            var imgList = this.container.getAttribute('data-textures').split(',');\n            for (var i in imgList) {\n                this.options.imgs.push(imgList[i]);\n            }\n        }\n\n        // Default Theme\n        if (!this.options.theme) {\n            this.options.theme = 'default';\n        }\n\n        // Default Context\n        if (!this.options.frag) {\n            var innerHTML = this.container.innerHTML.replace(/&lt;br&gt;/g, \"\");\n            innerHTML = innerHTML.replace(/<br>/g, \"\");\n            innerHTML = innerHTML.replace(/&nbsp;/g, \"\");\n            innerHTML = innerHTML.replace(/&lt;/g, \"<\");\n            innerHTML = innerHTML.replace(/&gt;/g, \">\");\n            innerHTML = innerHTML.replace(/&amp;/g, \"&\");\n            this.options.frag = innerHTML || EMPTY_FRAG_SHADER;\n\n            if (innerHTML) {\n                this.container.innerHTML = '';\n            }\n        }\n\n        // Default invisible Fragment header\n        if (!this.options.frag_header) {\n            this.options.frag_header = '';\n        }\n\n        // Default invisible Fragment footer\n        if (!this.options.frag_footer) {\n            this.options.frag_footer = '';\n        }\n\n        // Listen to hash changes\n        if (this.options.watchHash) {\n            new _ioHashWatch2['default'](this);\n        }\n\n        // Load UI\n        if (this.options.menu) {\n            this.menu = new _uiMenu2['default'](this);\n        }\n\n        // Support for multiple buffers\n        if (this.options.multipleBuffers) {\n            this.bufferManager = new _ioBufferManager2['default'](this);\n        }\n\n        // Listen to file drops\n        if (this.options.fileDrops) {\n            new _ioFileDrop2['default'](this);\n        }\n\n        // CORE elements\n        this.shader = new _coreShader2['default'](this);\n        this.editor = (0, _coreEditor.initEditor)(this);\n\n        this.helpers = new _uiHelpers2['default'](this);\n        this.errorsDisplay = new _uiErrorsDisplay2['default'](this);\n        this.visualDebugger = new _uiVisualDebugger2['default'](this);\n\n        if (this.options.exportIcon) {\n            this['export'] = new _uiExportIcon2['default'](this);\n        }\n\n        // EVENTS\n        this.editor.on('change', function () {\n            if (_this.autoupdate) {\n                _this.update();\n            }\n        });\n\n        if (this.options.canvas_follow) {\n            this.shader.el.style.position = 'relative';\n            if (this.options.canvas_float) {\n                this.shader.el.style.float = this.options.canvas_float;\n            }\n            this.editor.on('cursorActivity', function (cm) {\n                var height = cm.heightAtLine(cm.getCursor().line + 1, 'local') - _this.shader.el.clientHeight;\n                if (height < 0) {\n                    height = 0.0;\n                }\n                _this.shader.el.style.top = height.toString() + 'px';\n            });\n        }\n\n        // If the user bails for whatever reason, hastily shove the contents of\n        // the editor into some kind of storage. This overwrites whatever was\n        // there before. Note that there is not really a way of handling unload\n        // with our own UI and logic, since this allows for widespread abuse\n        // of normal browser functionality.\n        window.addEventListener('beforeunload', function (event) {\n            var content = {};\n            if (_this.bufferManager && _Object$keys(_this.bufferManager.buffers).length !== 0) {\n                for (var key in _this.bufferManager.buffers) {\n                    content[key] = _this.bufferManager.buffers[key].getValue();\n                }\n            } else {\n                content[new Date().getTime().toString()] = _this.editor.getValue();\n            }\n\n            if (_this.options.menu) {\n                _ioLocalStorage2['default'].setItem(STORAGE_LAST_EDITOR_CONTENT, JSON.stringify(content));\n            }\n        });\n\n        if (this.options.menu) {\n            // If there is previus content load it.\n            var oldContent = JSON.parse(_ioLocalStorage2['default'].getItem(STORAGE_LAST_EDITOR_CONTENT));\n            if (oldContent) {\n                for (var key in oldContent) {\n                    this.open(oldContent[key], key);\n                }\n            } else {\n                this['new']();\n            }\n        } else {\n            this['new']();\n        }\n\n        if (this.options.menu || this.options.exportIcon) {\n            // setup CrossStorage client\n            this.storage = new _crossStorage.CrossStorageClient('https://openframe.io/hub.html');\n            this.storage.onConnect().then((function () {\n                console.log(\"Connected to OpenFrame [o]\");\n            }).bind(this));\n        }\n\n        return this;\n    }\n\n    _createClass(GlslEditor, [{\n        key: 'new',\n        value: function _new() {\n            this.setContent(this.options.frag || EMPTY_FRAG_SHADER, new Date().getTime().toString());\n            this.trigger('new_content', {});\n            this.options.frag = null;\n        }\n    }, {\n        key: 'setContent',\n        value: function setContent(shader, tabName) {\n            // If the string is CODE\n            if (this.shader && this.shader.canvas) {\n                if (this.debugging) {\n                    this.debugging = false;\n                    (0, _coreEditor.focusAll)(this.editor);\n                }\n                this.shader.canvas.load(this.options.frag_header + shader + this.options.frag_footer);\n            }\n\n            if (this.editor) {\n                if (tabName !== undefined && this.bufferManager !== undefined) {\n                    this.bufferManager.open(tabName, shader);\n                    this.bufferManager.select(tabName);\n                } else {\n                    this.editor.setValue(shader);\n                    this.editor.setSize(null, this.editor.getDoc().height + 'px');\n                    this.editor.setSize(null, 'auto');\n                    this.filename = tabName;\n                }\n            }\n            this.change = true;\n        }\n    }, {\n        key: 'open',\n        value: function open(shader, tabName) {\n            var _this2 = this;\n\n            if (typeof shader === 'object') {\n                (function () {\n                    var reader = new FileReader();\n                    var ge = _this2;\n                    reader.onload = function (e) {\n                        ge.setContent(e.target.result, shader.name);\n                    };\n                    reader.readAsText(shader);\n                })();\n            } else if (typeof shader === 'string') {\n                if (/\\.frag$/.test(shader) || /\\.fs$/.test(shader)) {\n                    // If the string is an URL\n                    _xhr2['default'].get(shader, function (error, response, body) {\n                        if (error) {\n                            console.log('Error downloading ', shader, error);\n                            return;\n                        }\n                        _this2.setContent(body, tabName);\n                    });\n                } else {\n                    this.setContent(shader, tabName);\n                }\n            }\n        }\n    }, {\n        key: 'getContent',\n        value: function getContent() {\n            return this.editor.getValue();\n        }\n    }, {\n        key: 'getAuthor',\n        value: function getAuthor() {\n            var content = this.getContent();\n            var result = content.match(/\\/\\/\\s*[A|a]uthor\\s*[\\:]?\\s*([\\w|\\s|\\@|\\(|\\)|\\-|\\_]*)/i);\n            if (result && !(result[1] === ' ' || result[1] === '')) {\n                var author = result[1].replace(/(\\r\\n|\\n|\\r)/gm, '');\n                return author;\n            } else {\n                return 'unknown';\n            }\n        }\n    }, {\n        key: 'getTitle',\n        value: function getTitle() {\n            var content = this.getContent();\n            var result = content.match(/\\/\\/\\s*[T|t]itle\\s*:\\s*([\\w|\\s|\\@|\\(|\\)|\\-|\\_]*)/i);\n            if (result && !(result[1] === ' ' || result[1] === '')) {\n                var title = result[1].replace(/(\\r\\n|\\n|\\r)/gm, '');\n                return title;\n            } else if (this.bufferManager !== undefined) {\n                return this.bufferManager.current;\n            } else {\n                return 'unknown';\n            }\n        }\n\n        // Returns Promise\n    }, {\n        key: 'getOfToken',\n        value: function getOfToken() {\n            return this.storage.get('accessToken');\n        }\n    }, {\n        key: 'download',\n        value: function download() {\n            var content = this.getContent();\n            var name = this.getTitle();\n            if (name !== '') {\n                name += '-';\n            }\n            name += new Date().getTime();\n\n            // Download code\n            var blob = new Blob([content], { type: 'text/plain' });\n            (0, _vendorFileSaverMinJs.saveAs)(blob, name + '.frag');\n            this.editor.doc.markClean();\n            this.change = false;\n        }\n    }, {\n        key: 'update',\n        value: function update() {\n            if (this.debugging) {\n                this.debugging = false;\n                (0, _coreEditor.focusAll)(this.editor);\n            }\n\n            if (this.visualDebugger.testingResults.length) {\n                this.visualDebugger.clean();\n            }\n            this.shader.canvas.load(this.options.frag_header + this.editor.getValue() + this.options.frag_footer);\n        }\n    }, {\n        key: 'createFontLink',\n        value: function createFontLink() {\n            var head = document.getElementsByTagName('head')[0];\n            var link = document.createElement(\"link\");\n            link.href = \"https://fonts.googleapis.com/icon?family=Material+Icons\";\n            link.type = \"text/css\";\n            link.rel = \"stylesheet\";\n            link.media = \"screen,print\";\n            head.appendChild(link);\n            document.getElementsByTagName(\"head\")[0].appendChild(link);\n        }\n    }, {\n        key: 'togglePresentationWindow',\n        value: function togglePresentationWindow(flag) {\n            this.pWindowOpen = flag;\n            if (flag) {\n                this.shader.openWindow();\n            } else {\n                this.shader.closeWindow();\n            }\n        }\n    }, {\n        key: 'onClosePresentationWindow',\n        value: function onClosePresentationWindow() {\n            this.pWindowOpen = false;\n        }\n    }]);\n\n    return GlslEditor;\n})();\n\nexports['default'] = GlslEditor;\n\nwindow.GlslEditor = GlslEditor;\n\nvar GlslWebComponent = function GlslWebComponent() {};\nGlslWebComponent.prototype = _Object$create(HTMLElement.prototype);\nGlslWebComponent.prototype.createdCallback = function createdCallback() {\n\n    var options = {\n        canvas_size: 150,\n        canvas_follow: true,\n        tooltips: true\n    };\n\n    for (var i = 0; i < this.attributes.length; i++) {\n        var attribute = this.attributes[i];\n        if (attribute.specified) {\n            var value = attribute.value;\n\n            if (value === 'true') {\n                value = true;\n            } else if (value === 'false') {\n                value = false;\n            } else if (parseInt(value)) {\n                value = parseInt(value);\n            }\n\n            options[attribute.name] = value;\n        }\n    }\n\n    this.glslEditor = new GlslEditor(this, options);\n};\n\ndocument.registerElement('glsl-editor', GlslWebComponent);\nmodule.exports = exports['default'];\n\n},{\"./core/Editor\":120,\"./core/Shader\":121,\"./io/BufferManager\":122,\"./io/FileDrop\":123,\"./io/HashWatch\":124,\"./io/LocalStorage\":125,\"./tools/mixin\":131,\"./ui/ErrorsDisplay\":133,\"./ui/ExportIcon\":134,\"./ui/Helpers\":135,\"./ui/Menu\":136,\"./ui/VisualDebugger\":138,\"./vendor/FileSaver.min.js\":151,\"babel-runtime/core-js/object/create\":3,\"babel-runtime/core-js/object/keys\":6,\"babel-runtime/helpers/class-call-check\":10,\"babel-runtime/helpers/create-class\":11,\"babel-runtime/helpers/interop-require-default\":14,\"cross-storage\":109,\"document-register-element\":110,\"xhr\":117}],120:[function(_dereq_,module,exports){\n// Import CodeMirror\n'use strict';\n\nvar _interopRequireDefault = _dereq_('babel-runtime/helpers/interop-require-default')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\nexports.initEditor = initEditor;\nexports.unfocusLine = unfocusLine;\nexports.unfocusAll = unfocusAll;\nexports.focusLine = focusLine;\nexports.focusAll = focusAll;\n\nvar _codemirror = _dereq_('codemirror');\n\nvar _codemirror2 = _interopRequireDefault(_codemirror);\n\n// Import CodeMirror addons and modules\n\n_dereq_('codemirror/addon/search/search');\n\n_dereq_('codemirror/addon/search/searchcursor');\n\n_dereq_('codemirror/addon/comment/comment');\n\n_dereq_('codemirror/addon/dialog/dialog');\n\n_dereq_('codemirror/addon/edit/matchbrackets');\n\n_dereq_('codemirror/addon/edit/closebrackets');\n\n_dereq_('codemirror/addon/wrap/hardwrap');\n\n_dereq_('codemirror/addon/fold/foldcode');\n\n_dereq_('codemirror/addon/fold/foldgutter');\n\n_dereq_('codemirror/addon/fold/indent-fold');\n\n_dereq_('codemirror/addon/hint/show-hint');\n\n_dereq_('codemirror/addon/hint/javascript-hint');\n\n_dereq_('codemirror/addon/display/rulers');\n\n_dereq_('codemirror/addon/display/panel');\n\n_dereq_('codemirror/mode/clike/clike.js');\n\n// Keymap\n\n_dereq_('codemirror/keymap/sublime');\n\nvar UNFOCUS_CLASS = 'ge_editor-unfocus';\n\nfunction initEditor(main) {\n    if (main.options.lineNumbers === undefined) {\n        main.options.lineNumbers = true;\n    }\n\n    // CREATE AND START CODEMIRROR\n    var el = document.createElement('div');\n    el.setAttribute('class', 'ge_editor');\n\n    // If there is a menu offset the editor to come after it\n    if (main.menu) {\n        el.style.paddingTop = (main.menu.el.clientHeight || main.menu.el.offsetHeight || main.menu.el.scrollHeight) + \"px\";\n    }\n\n    main.container.appendChild(el);\n\n    var cm = (0, _codemirror2['default'])(el, {\n        value: main.options.frag,\n        viewportMargin: Infinity,\n        lineNumbers: main.options.lineNumbers,\n        matchBrackets: true,\n        mode: 'x-shader/x-fragment',\n        keyMap: 'sublime',\n        autoCloseBrackets: true,\n        extraKeys: { 'Ctrl-Space': 'autocomplete' },\n        showCursorWhenSelecting: true,\n        theme: main.options.theme,\n        dragDrop: false,\n        indentUnit: 4,\n        gutters: main.options.lineNumbers ? ['CodeMirror-linenumbers', 'breakpoints'] : false,\n        lineWrapping: true,\n        autofocus: true\n    });\n    return cm;\n}\n\nfunction unfocusLine(cm, line) {\n    if (line === null) return;\n    cm.getDoc().addLineClass(line, 'gutter', UNFOCUS_CLASS);\n    cm.getDoc().addLineClass(line, 'text', UNFOCUS_CLASS);\n}\n\nfunction unfocusAll(cm) {\n    for (var i = 0, j = cm.getDoc().lineCount(); i <= j; i++) {\n        unfocusLine(cm, i);\n    }\n}\n\nfunction focusLine(cm, line) {\n    if (line === null) return;\n    cm.getDoc().removeLineClass(line, 'gutter', UNFOCUS_CLASS);\n    cm.getDoc().removeLineClass(line, 'text', UNFOCUS_CLASS);\n}\n\nfunction focusAll(cm) {\n    for (var i = 0, j = cm.getDoc().lineCount(); i <= j; i++) {\n        focusLine(cm, i);\n    }\n}\n\n},{\"babel-runtime/helpers/interop-require-default\":14,\"codemirror\":30,\"codemirror/addon/comment/comment\":15,\"codemirror/addon/dialog/dialog\":16,\"codemirror/addon/display/panel\":17,\"codemirror/addon/display/rulers\":18,\"codemirror/addon/edit/closebrackets\":19,\"codemirror/addon/edit/matchbrackets\":20,\"codemirror/addon/fold/foldcode\":21,\"codemirror/addon/fold/foldgutter\":22,\"codemirror/addon/fold/indent-fold\":23,\"codemirror/addon/hint/javascript-hint\":24,\"codemirror/addon/hint/show-hint\":25,\"codemirror/addon/search/search\":26,\"codemirror/addon/search/searchcursor\":27,\"codemirror/addon/wrap/hardwrap\":28,\"codemirror/keymap/sublime\":29,\"codemirror/mode/clike/clike.js\":31}],121:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = _dereq_('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nvar _interopRequireDefault = _dereq_('babel-runtime/helpers/interop-require-default')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar _glslCanvas = _dereq_('glslCanvas');\n\nvar _glslCanvas2 = _interopRequireDefault(_glslCanvas);\n\nvar _toolsInteractiveDom = _dereq_('../tools/interactiveDom');\n\nvar _toolsMediaCapture = _dereq_('../tools/mediaCapture');\n\nvar _toolsMediaCapture2 = _interopRequireDefault(_toolsMediaCapture);\n\nvar _uiMenuItem = _dereq_('../ui/MenuItem');\n\nvar _uiMenuItem2 = _interopRequireDefault(_uiMenuItem);\n\n// 3er Parties\n\nvar _vendorFileSaverMinJs = _dereq_('../vendor/FileSaver.min.js');\n\nvar CONTROLS_CLASSNAME = 'ge_control';\nvar CONTROLS_PANEL_CLASSNAME = 'ge_control_panel';\n\nvar Shader = (function () {\n    function Shader(main) {\n        var _this = this;\n\n        _classCallCheck(this, Shader);\n\n        this.main = main;\n        this.options = main.options;\n        this.frag = \"\";\n\n        // DOM CONTAINER\n        this.el = document.createElement('div');\n        this.el.setAttribute('class', 'ge_canvas_container');\n        // CREATE AND START GLSLCANVAS\n        this.el_canvas = document.createElement('canvas');\n        this.el_canvas.setAttribute('class', 'ge_canvas');\n        this.el_canvas.setAttribute('width', (this.options.canvas_width || this.options.canvas_size || '250') / window.devicePixelRatio);\n        this.el_canvas.setAttribute('height', (this.options.canvas_height || this.options.canvas_size || '250') / window.devicePixelRatio);\n        this.el_canvas.setAttribute('data-fragment', this.options.frag);\n        this.el.appendChild(this.el_canvas);\n        var glslcanvas = new _glslCanvas2['default'](this.el_canvas, { premultipliedAlpha: false, preserveDrawingBuffer: true, backgroundColor: 'rgba(1,1,1,1)' });\n\n        this.canvas = glslcanvas;\n\n        if (this.options.imgs && this.options.imgs.length > 0) {\n            for (var i in this.options.imgs) {\n                this.canvas.setUniform('u_tex' + i, this.options.imgs[i]);\n            }\n        }\n\n        // Media Capture\n        this.media_capture = new _toolsMediaCapture2['default']();\n        this.media_capture.setCanvas(this.el_canvas);\n        this.canvas.on('render', function () {\n            _this.media_capture.completeScreenshot();\n        });\n\n        if (main.options.displayMenu) {\n            // CONTROLS\n            this.controls_container = document.createElement('ul');\n            this.controls_container.className = CONTROLS_CLASSNAME;\n            this.control_pannel = document.createElement('ul');\n            this.control_pannel.className = CONTROLS_PANEL_CLASSNAME;\n            this.controls_container.appendChild(this.control_pannel);\n            this.el.appendChild(this.controls_container);\n            this.controls = {};\n            // play/stop\n            // this.controls.playPause = new MenuItem(this.control_pannel, 'ge_control_element', '<i class=\"material-icons\">pause</i>', (event) => {\n            this.controls.playPause = new _uiMenuItem2['default'](this.control_pannel, 'ge_control_element', '<i class=\"material-icons\">pause</i>', function (event) {\n                event.stopPropagation();\n                event.preventDefault();\n                if (glslcanvas.paused) {\n                    glslcanvas.play();\n                    // this.controls.playPause.name = '<i class=\"material-icons\">pause</i>';//'Pause';\n                    _this.controls.playPause.name = '<i class=\"material-icons\">pause</i>'; //'Pause';\n                } else {\n                        glslcanvas.pause();\n                        _this.controls.playPause.name = '<i class=\"material-icons\">play_arrow</i>'; //'Play';\n                    }\n            });\n            // rec\n            this.isCapturing = false;\n            // let rec = new MenuItem(this.control_pannel, 'ge_control_element', '<i class=\"material-icons\">fiber_manual_record</i>', (event) => {\n            var rec = new _uiMenuItem2['default'](this.control_pannel, 'ge_control_element', '<i class=\"material-icons\">&#xE061;</i>', function (event) {\n                event.stopPropagation();\n                event.preventDefault();\n                if (_this.isCapturing) {\n                    _this.stopVideoCapture();\n                } else {\n                    _this.startVideoCapture();\n                }\n            });\n            this.controls.rec = rec;\n            this.controls.rec.button.style.color = 'red';\n\n            // present mode (only if there is a presentation.html file to point to)\n            // this.controls.presentationMode = new MenuItem(this.control_pannel, 'ge_control_element', '<i class=\"material-icons\">open_in_new</i>', (event) => {\n            this.controls.presentationMode = new _uiMenuItem2['default'](this.control_pannel, 'ge_control_element', '<i class=\"material-icons\">open_in_new</i>', function (event) {\n                event.stopPropagation();\n                event.preventDefault();\n                if (main.pWindowOpen) {\n                    main.togglePresentationWindow(false);\n                } else {\n                    main.togglePresentationWindow(true);\n                }\n            });\n\n            this.el_control = this.el.getElementsByClassName(CONTROLS_CLASSNAME)[0];\n            this.el_control.addEventListener('mouseenter', function (event) {\n                _this.showControls();\n            });\n            this.el_control.addEventListener('mouseleave', function (event) {\n                _this.hideControls();\n            });\n            this.el_canvas.addEventListener('mousemove', function (event) {\n                if (event.offsetY > _this.el_canvas.clientHeight * .66) {\n                    _this.showControls();\n                } else {\n                    _this.hideControls();\n                }\n            });\n            this.hideControls();\n        }\n\n        // ========== EVENTS\n        // Draggable/resizable/snappable\n        if (main.options.canvas_draggable || main.options.canvas_resizable || main.options.canvas_snapable) {\n            (0, _toolsInteractiveDom.subscribeInteractiveDom)(this.el, {\n                move: main.options.canvas_draggable,\n                resize: main.options.canvas_resizable,\n                snap: main.options.canvas_snapable\n            });\n\n            if (main.options.canvas_size === 'halfscreen') {\n                this.el.snapRight();\n            }\n\n            this.el.on('move', function (event) {\n                event.el.style.width = event.el.clientWidth + 'px';\n                event.el.style.height = event.el.clientHeight + 'px';\n            });\n            this.el.on('resize', function (event) {\n                glslcanvas.canvas.style.width = event.el.clientWidth + 'px';\n                glslcanvas.canvas.style.height = event.el.clientHeight + 'px';\n                glslcanvas.resize();\n            });\n        }\n\n        // If there is a menu offset the editor to come after it\n        if (main.menu) {\n            this.el.style.top = (main.menu.el.clientHeight || main.menu.el.offsetHeight || main.menu.el.scrollHeight) + \"px\";\n        }\n\n        // Add all this to the main container\n        main.container.appendChild(this.el);\n        glslcanvas.resize();\n    }\n\n    _createClass(Shader, [{\n        key: 'hideControls',\n        value: function hideControls() {\n            if (this.el_control && this.el_control.className === CONTROLS_CLASSNAME) {\n                this.el_control.className = CONTROLS_CLASSNAME + ' ' + CONTROLS_CLASSNAME + '_hidden';\n            }\n        }\n    }, {\n        key: 'showControls',\n        value: function showControls() {\n            if (this.el_control && this.el_control.className === CONTROLS_CLASSNAME + ' ' + CONTROLS_CLASSNAME + '_hidden') {\n                this.el_control.className = CONTROLS_CLASSNAME;\n            }\n        }\n    }, {\n        key: 'requestRedraw',\n        value: function requestRedraw() {\n            this.canvas.forceRender = true;\n            this.canvas.render();\n        }\n    }, {\n        key: 'screenshot',\n        value: function screenshot() {\n            this.requestRedraw();\n            return this.media_capture.screenshot();\n        }\n    }, {\n        key: 'startVideoCapture',\n        value: function startVideoCapture() {\n            this.requestRedraw();\n            if (this.media_capture.startVideoCapture()) {\n                this.isCapturing = true;\n                this.controls.rec.button.style.color = 'white';\n                // this.controls.rec.name = '<i class=\"material-icons\">stop</i>';\n                this.controls.rec.name = '<i class=\"material-icons\">&#xE061;</i>';\n            }\n        }\n    }, {\n        key: 'stopVideoCapture',\n        value: function stopVideoCapture() {\n            if (this.isCapturing) {\n                this.isCapturing = false;\n                this.controls.rec.button.style.color = 'red';\n                // this.controls.rec.name = '<i class=\"material-icons\">fiber_manual_record</i>';\n                this.controls.rec.name = '<i class=\"material-icons\">stop</i>';\n                this.media_capture.stopVideoCapture().then(function (video) {\n                    (0, _vendorFileSaverMinJs.saveAs)(video.blob, +new Date() + '.webm');\n                });\n            }\n        }\n    }, {\n        key: 'openWindow',\n        value: function openWindow() {\n            this.originalSize = { width: this.canvas.canvas.clientWidth, height: this.canvas.canvas.clientHeight };\n            this.presentationWindow = window.open(\"\", \"_blank\", \"presentationWindow\");\n            this.setUpPresentationWindow();\n        }\n    }, {\n        key: 'closeWindow',\n        value: function closeWindow() {\n            if (this.presentationWindow) {\n                this.presentationWindow.close();\n            }\n        }\n    }, {\n        key: 'setCanvasSize',\n        value: function setCanvasSize(w, h) {\n            this.canvas.canvas.style.width = w + 'px';\n            this.canvas.canvas.style.height = h + 'px';\n        }\n    }, {\n        key: 'setUpPresentationWindow',\n        value: function setUpPresentationWindow() {\n            this.presentationWindow.document.body.appendChild(this.canvas.canvas);\n            var d = this.presentationWindow.document;\n            var div = d.createElement(\"div\");\n            div.appendChild(d.createTextNode(\"Projector mode\"));\n            var span = this.presentationWindow.document.createElement(\"span\");\n            div.appendChild(span);\n            span.appendChild(d.createTextNode(\" - If the canvas doesn't update, drag this window and reveal the editor\"));\n            d.body.appendChild(div);\n\n            d.title = \"GLSL Editor\";\n            d.body.style.padding = \"0\";\n            d.body.style.margin = \"0\";\n            d.body.style.background = \"#171e22\";\n            d.body.style.overflow = \"hidden\";\n\n            div.style.position = \"absolute\";\n            div.style.width = \"100%\";\n            div.style.background = \"rgba(0, 0, 0, 0.5)\";\n            div.style.position = \"absolute\";\n            div.style.top = \"0\";\n            div.style.left = \"0\";\n            div.style.right = \"0\";\n            div.style.padding = \"16px\";\n            div.style.color = \"#ffffff\";\n            div.style.fontSize = \"14px\";\n            div.style.fontFamily = \"Helvetica, Geneva, sans-serif\";\n            div.style.fontWeight = \"400\";\n            div.style.letterSpacing = \"0.1em\";\n            div.style.textAlign = \"center\";\n            div.style.opacity = \"1\";\n            div.style.zIndex = \"9999\";\n            div.style.setProperty(\"-webkit-transition\", \"opacity 1.5s\");\n            div.style.setProperty(\"-moz-transition\", \"opacity 1.5s\");\n            div.style.setProperty(\"transition\", \"opacity 1.5s\");\n\n            span.style.color = \"rgba(255, 255, 255, 0.5)\";\n\n            setTimeout(function () {\n                div.style.opacity = 0;\n            }, 4000);\n\n            this.setCanvasSize(this.presentationWindow.innerWidth, this.presentationWindow.innerHeight);\n            this.presentationWindow.addEventListener('resize', this.onPresentationWindowResize.bind(this));\n            this.presentationWindow.addEventListener(\"unload\", this.onPresentationWindowClose.bind(this));\n        }\n    }, {\n        key: 'onPresentationWindowClose',\n        value: function onPresentationWindowClose() {\n            this.el.appendChild(this.canvas.canvas);\n            this.setCanvasSize(this.originalSize.width, this.originalSize.height);\n            this.canvas.resize();\n\n            this.main.onClosePresentationWindow();\n            this.main.menu.onClosePresentationWindow();\n            this.presentationWindow = null;\n        }\n    }, {\n        key: 'onPresentationWindowResize',\n        value: function onPresentationWindowResize() {\n            if (this.presentationWindow) {\n                this.setCanvasSize(this.presentationWindow.innerWidth, this.presentationWindow.innerHeight);\n                this.canvas.resize();\n            }\n        }\n    }]);\n\n    return Shader;\n})();\n\nexports['default'] = Shader;\nmodule.exports = exports['default'];\n\n},{\"../tools/interactiveDom\":129,\"../tools/mediaCapture\":130,\"../ui/MenuItem\":137,\"../vendor/FileSaver.min.js\":151,\"babel-runtime/helpers/class-call-check\":10,\"babel-runtime/helpers/create-class\":11,\"babel-runtime/helpers/interop-require-default\":14,\"glslCanvas\":113}],122:[function(_dereq_,module,exports){\n// Import CodeMirror\n'use strict';\n\nvar _createClass = _dereq_('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nvar _Object$keys = _dereq_('babel-runtime/core-js/object/keys')['default'];\n\nvar _interopRequireDefault = _dereq_('babel-runtime/helpers/interop-require-default')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar _codemirror = _dereq_('codemirror');\n\nvar _codemirror2 = _interopRequireDefault(_codemirror);\n\n_dereq_('codemirror/mode/clike/clike.js');\n\nvar BufferManager = (function () {\n    function BufferManager(main) {\n        _classCallCheck(this, BufferManager);\n\n        this.main = main;\n        this.buffers = {};\n        this.tabs = {};\n        this.current = 'untitled';\n    }\n\n    _createClass(BufferManager, [{\n        key: 'open',\n        value: function open(name, content) {\n            var _this = this;\n\n            if (!this.el) {\n                // Create DOM element\n                this.el = document.createElement('ul');\n                this.el.className = 'ge_panel';\n            }\n\n            if (this.main.change && this.current === 'untitled') {\n                console.log('Open Current in a different tab');\n                this.open(this.current, this.main.getContent());\n            }\n\n            this.buffers[name] = _codemirror2['default'].Doc(content, 'x-shader/x-fragment');\n\n            // Create a new tab\n            var tab = document.createElement('li');\n            tab.setAttribute('class', 'ge_panel_tab');\n            tab.textContent = name;\n            _codemirror2['default'].on(tab, 'click', function () {\n                _this.select(name);\n            });\n\n            var close = tab.appendChild(document.createElement('a'));\n            close.textContent = 'x';\n            close.setAttribute('class', 'ge_panel_tab_close');\n            _codemirror2['default'].on(close, 'click', function () {\n                _this.close(name);\n            });\n\n            this.el.appendChild(tab);\n            this.tabs[name] = tab;\n\n            if (this.el && !this.panel && this.getLength() > 1) {\n                // Create Panel CM element\n                this.panel = this.main.editor.addPanel(this.el, { position: 'top' });\n            }\n        }\n    }, {\n        key: 'select',\n        value: function select(name) {\n            var buf = this.buffers[name];\n\n            if (buf === undefined) {\n                return;\n            }\n\n            if (buf.getEditor()) {\n                buf = buf.linkedDoc({ sharedHist: true });\n            }\n            var old = this.main.editor.swapDoc(buf);\n            var linked = old.iterLinkedDocs(function (doc) {\n                linked = doc;\n            });\n            if (linked) {\n                // Make sure the document in buffers is the one the other view is looking at\n                for (var bufferName in this.buffers) {\n                    if (this.buffers[bufferName] === old) {\n                        this.buffers[bufferName] = linked;\n                    }\n                }\n                old.unlinkDoc(linked);\n            }\n            this.main.editor.focus();\n            this.main.setContent(this.main.getContent());\n\n            if (this.tabs[this.current]) {\n                this.tabs[this.current].setAttribute('class', 'ge_panel_tab');\n            }\n            this.tabs[name].setAttribute('class', 'ge_panel_tab_active');\n            this.current = name;\n\n            this.main.editor.setSize(null, 'auto');\n            this.main.editor.getWrapperElement().style.height = 'auto';\n\n            this.main.trigger('new_content', {});\n        }\n    }, {\n        key: 'close',\n        value: function close(name) {\n            var needChange = name === this.getCurrent();\n\n            this.el.removeChild(this.tabs[name]);\n            delete this.tabs[name];\n            delete this.buffers[name];\n\n            if (this.getLength() === 1) {\n                this.panel.clear();\n                this.panel = undefined;\n                this.el = undefined;\n            }\n\n            if (needChange) {\n                for (var prop in this.tabs) {\n                    this.select(prop);\n                    break;\n                }\n            }\n        }\n    }, {\n        key: 'getCurrent',\n        value: function getCurrent() {\n            return this.current;\n        }\n    }, {\n        key: 'getLength',\n        value: function getLength() {\n            return _Object$keys(this.buffers).length;\n        }\n    }]);\n\n    return BufferManager;\n})();\n\nexports['default'] = BufferManager;\nmodule.exports = exports['default'];\n\n},{\"babel-runtime/core-js/object/keys\":6,\"babel-runtime/helpers/class-call-check\":10,\"babel-runtime/helpers/create-class\":11,\"babel-runtime/helpers/interop-require-default\":14,\"codemirror\":30,\"codemirror/mode/clike/clike.js\":31}],123:[function(_dereq_,module,exports){\n/*\nOriginal: https://github.com/tangrams/tangram-play/blob/gh-pages/src/js/addons/ui/FileDrop.js\nAuthor: Lou Huang (@saikofish)\n*/\n\n'use strict';\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar FileDrop = function FileDrop(main) {\n    _classCallCheck(this, FileDrop);\n\n    // Set up drag/drop file listeners\n    main.container.addEventListener('dragenter', function (event) {\n        // Check to make sure that dropped items are files.\n        // This prevents other drags (e.g. text in editor)\n        // from turning on the file drop area.\n        // See here: http://stackoverflow.com/questions/6848043/how-do-i-detect-a-file-is-being-dragged-rather-than-a-draggable-element-on-my-pa\n        // Tested in Chrome, Firefox, Safari 8\n        var types = event.dataTransfer.types;\n        if (types !== null && (types.indexOf ? types.indexOf('Files') !== -1 : types.contains('application/x-moz-file'))) {\n            event.preventDefault();\n            event.dataTransfer.dropEffect = 'copy';\n        }\n    }, true);\n\n    main.container.addEventListener('dragover', function (event) {\n        // Required to prevent browser from navigating to a file\n        // instead of receiving a data transfer\n        event.preventDefault();\n    }, false);\n\n    main.container.addEventListener('dragleave', function (event) {\n        event.preventDefault();\n    }, true);\n\n    main.container.addEventListener('drop', function (event) {\n        event.preventDefault();\n        if (event.dataTransfer.files.length > 0) {\n            var file = event.dataTransfer.files[0];\n            main.open(file);\n        }\n    }, false);\n};\n\nexports['default'] = FileDrop;\nmodule.exports = exports['default'];\n\n},{\"babel-runtime/helpers/class-call-check\":10}],124:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = _dereq_('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar HashWatch = (function () {\n    function HashWatch(main) {\n        var _this = this;\n\n        _classCallCheck(this, HashWatch);\n\n        this.main = main;\n        this.check();\n\n        window.addEventListener('hashchange', function () {\n            _this.check();\n        }, false);\n    }\n\n    _createClass(HashWatch, [{\n        key: 'check',\n        value: function check() {\n            if (window.location.hash !== '') {\n                this.main.options.imgs = [];\n\n                var hashes = location.hash.split('&');\n                for (var i in hashes) {\n                    var ext = hashes[i].substr(hashes[i].lastIndexOf('.') + 1);\n                    var path = hashes[i];\n\n                    // Extract hash if is present\n                    if (path.search('#') === 0) {\n                        path = path.substr(1);\n                    }\n\n                    var filename = path.split('/').pop();\n\n                    if (ext === 'frag') {\n                        this.main.open(path, filename.replace(/\\.[^/.]+$/, ''));\n                    } else if (ext === 'png' || ext === 'jpg' || ext === 'PNG' || ext === 'JPG') {\n                        this.main.options.imgs.push(path);\n                    }\n                }\n            }\n\n            var query = parseQuery(window.location.search.slice(1));\n            if (query) {\n                for (var key in query) {\n                    if (key === 'log') {\n                        if (this.main.bufferManager) {\n                            var logs = query.log.split(',');\n                            for (var i in logs) {\n                                this.main.open('https://thebookofshaders.com/log/' + logs[i] + '.frag', logs[i]);\n                            }\n                        } else {\n                            this.main.open('https://thebookofshaders.com/log/' + query.log + '.frag', query.log);\n                        }\n                    } else {\n                        var value = query[key];\n                        if (value === 'true' || value === 'false') {\n                            value = value == 'true';\n                        } else if (parseFloat(value)) {\n                            value = parseFloat(value);\n                        }\n                        this.main.options[key] = value;\n                    }\n                }\n            }\n        }\n    }]);\n\n    return HashWatch;\n})();\n\nexports['default'] = HashWatch;\n\nfunction parseQuery(qstr) {\n    var query = {};\n    var a = qstr.split('&');\n    for (var i in a) {\n        var b = a[i].split('=');\n        query[decodeURIComponent(b[0])] = decodeURIComponent(b[1]);\n    }\n    return query;\n}\nmodule.exports = exports['default'];\n\n},{\"babel-runtime/helpers/class-call-check\":10,\"babel-runtime/helpers/create-class\":11}],125:[function(_dereq_,module,exports){\n/*\nOriginal: https://github.com/tangrams/tangram-play/blob/gh-pages/src/js/addons/LocalStorage.js\nAuthor: Lou Huang (@saikofish)\n*/\n\n/**\n *  Local storage\n *\n *  Provides a common interface for the application where modules can\n *  request storage of values across multiple user sessions via the\n *  browser's LocalStorage API.\n *\n *  Browser support is good, so no fallbacks are implemented.\n *  This module manages namespacing for Tangram Play to prevent name\n *  collisions with other libraries, browser extensions, etc.\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\nvar LOCAL_STORAGE_PREFIX = 'glslEditor-';\n\nvar LocalStorage = {\n    /**\n     *  setItem()\n     *  Namespaces key name to Tangram Play application and adds\n     *  the value to LocalStorage.\n     */\n    setItem: function setItem(key, value) {\n        if (window.localStorage) {\n            window.localStorage.setItem(LOCAL_STORAGE_PREFIX + key, value);\n        }\n    },\n\n    /**\n     *  pushItem()\n     *  Store values as an array. If the key doesn't exist as an object, create it.\n     *  Note that this overwrites an old value if it is present and not a JSON object!\n     *  If it exists, retreive it, serialize it into JSON, push the new value,\n     *  re-encode to a string and then set it back in localStorage.\n     *  No other array methods are implemented. If you need to delete items, etc\n     *  then retrieve the string as normal, do the work in your script, and then\n     *  set it to the new stringified array instead of pushing it.\n     */\n    pushItem: function pushItem(key, value) {\n        var stored = undefined;\n        stored = this.getItem(key);\n        // In case there is a previously stored item here that is not\n        // parseable JSON, don't fail\n        try {\n            stored = JSON.parse(stored);\n            stored.arr = stored.arr || [];\n        } catch (e) {\n            stored = { arr: [] };\n        }\n        stored.arr.push(value);\n        this.setItem(key, JSON.stringify(stored));\n    },\n\n    /**\n     *  getItem()\n     *  Retrieves value for the given key name and application namespace.\n     */\n    getItem: function getItem(key) {\n        if (window.localStorage) {\n            return window.localStorage.getItem(LOCAL_STORAGE_PREFIX + key);\n        }\n    },\n\n    /**\n     *  removeItem()\n     *  Removes key-value pair under the application namespace.\n     */\n    removeItem: function removeItem(key) {\n        if (window.localStorage) {\n            window.localStorage.removeItem(LOCAL_STORAGE_PREFIX + key);\n        }\n    },\n\n    /**\n     *  clear()\n     *  Loops through all values in localStorage under the application\n     *  namespace and removes them, preserving other key-value pairs in\n     *  localStorage.\n     */\n    clear: function clear() {\n        if (window.localStorage) {\n            for (var key in window.localStorage) {\n                if (key.indexOf(LOCAL_STORAGE_PREFIX) === 0) {\n                    window.localStorage.removeItem(LOCAL_STORAGE_PREFIX + key);\n                }\n            }\n        }\n    }\n};\n\nexports['default'] = LocalStorage;\nmodule.exports = exports['default'];\n\n},{}],126:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\nexports.saveOnServer = saveOnServer;\nexports.createOpenFrameArtwork = createOpenFrameArtwork;\nvar lastReplay;\n\nfunction saveOnServer(ge, callback) {\n    if (!ge.change && lastReplay) {\n        callback(lastReplay);\n        return;\n    }\n\n    var content = ge.getContent();\n    var name = ge.getAuthor();\n    var title = ge.getTitle();\n\n    if (name !== '' && title !== '') {\n        name += '-' + title;\n    }\n\n    // STORE A COPY on SERVER\n    var url = 'https://thebookofshaders.com:8080/';\n    // let url = 'http://localhost:8080/';\n    var data = new FormData();\n    data.append('code', content);\n\n    var dataURL = ge.shader.el_canvas.toDataURL('image/png');\n    var blobBin = atob(dataURL.split(',')[1]);\n    var array = [];\n    for (var i = 0; i < blobBin.length; i++) {\n        array.push(blobBin.charCodeAt(i));\n    }\n    var file = new Blob([new Uint8Array(array)], { type: 'image/png' });\n    data.append('image', file);\n\n    var xhr = new XMLHttpRequest();\n    xhr.open('POST', url + 'save', true);\n    xhr.onload = function (event) {\n        if (typeof callback === 'function') {\n            var _name = xhr.responseText;\n            var replay = {\n                content: content,\n                name: _name,\n                url: url\n            };\n            callback(replay);\n            lastReplay = replay;\n        }\n    };\n    xhr.send(data);\n}\n\nfunction createOpenFrameArtwork(glslEditor, name, url, callback) {\n    var OF_BASE_API_URL = 'https://api.openframe.io/v0';\n    var OF_BASE_APP_URL = 'https://openframe.io';\n    // const OF_BASE_API_URL = 'http://localhost:8888/api'; // for local testing\n    // const OF_BASE_APP_URL = 'http://localhost:8000'; // for local testing\n    var title = glslEditor.getTitle();\n    var author = glslEditor.getAuthor();\n    glslEditor.getOfToken().then(initiateOfRequest);\n\n    function initiateOfRequest(ofToken) {\n        var xhr = new XMLHttpRequest();\n        callback = callback || function () {};\n        // anywhere in the API that user {id} is needed, the alias 'current' can be used for the logged-in user\n        xhr.open('POST', OF_BASE_API_URL + '/users/current/created_artwork');\n        // set content type to JSON...\n        xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n        xhr.setRequestHeader('Authorization', ofToken);\n        xhr.setRequestHeader('access_token', ofToken);\n\n        // This is essential in order to include auth cookies:\n        xhr.onload = function (event) {\n            console.log('onload', event);\n            if (event.currentTarget.status >= 400) {\n                (function () {\n                    window.open(OF_BASE_APP_URL + '/login', 'login', 'width=500,height=600');\n                    var successListener = function successListener(e) {\n                        if (e.data === 'success') {\n                            createOpenFrameArtwork(glslEditor, name, url, callback);\n                        }\n                        window.removeEventListener('message', successListener);\n                    };\n                    window.addEventListener('message', successListener, false);\n                })();\n            } else if (event.currentTarget.status === 200) {\n                callback(true);\n            } else {\n                callback(false);\n            }\n        };\n        xhr.onerror = function (event) {\n            console.log('Status:', event.currentTarget.status);\n        };\n        xhr.send(JSON.stringify({\n            title: title,\n            author_name: author,\n            is_public: false,\n            format: 'openframe-glslviewer',\n            url: 'https://thebookofshaders.com/log/' + name + '.frag',\n            thumb_url: 'https://thebookofshaders.com/log/' + name + '.png'\n        }));\n    }\n}\n\n},{}],127:[function(_dereq_,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.getDomOrigin = getDomOrigin;\nexports.getDevicePixelRatio = getDevicePixelRatio;\n\nfunction getDomOrigin(el) {\n    var box = el.getBoundingClientRect ? el.getBoundingClientRect() : { top: 0, left: 0 };\n    var doc = el && el.ownerDocument;\n    var body = doc.body;\n    var win = doc.defaultView || doc.parentWindow || window;\n    var docElem = doc.documentElement || body.parentNode;\n    var clientTop = docElem.clientTop || body.clientTop || 0; // border on html or body or both\n    var clientLeft = docElem.clientLeft || body.clientLeft || 0;\n\n    return {\n        left: box.left + (win.pageXOffset || docElem.scrollLeft) - clientLeft,\n        top: box.top + (win.pageYOffset || docElem.scrollTop) - clientTop\n    };\n}\n\nfunction getDevicePixelRatio(ctx) {\n    var devicePixelRatio = window.devicePixelRatio || 1;\n    var backingStoreRatio = ctx.webkitBackingStorePixelRatio || ctx.mozBackingStorePixelRatio || ctx.msBackingStorePixelRatio || ctx.oBackingStorePixelRatio || ctx.backingStorePixelRatio || 1;\n    return devicePixelRatio / backingStoreRatio;\n}\n\n},{}],128:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\nexports.isCommented = isCommented;\nexports.isLineAfterMain = isLineAfterMain;\nexports.getVariableType = getVariableType;\nexports.getShaderForTypeVarInLine = getShaderForTypeVarInLine;\nexports.getResultRange = getResultRange;\nexports.getMedian = getMedian;\nexports.getDeltaSum = getDeltaSum;\nexports.getHits = getHits;\n\nfunction isCommented(cm, nLine, match) {\n    var token = cm.getTokenAt({ line: nLine, ch: match.index });\n    if (token && token.type) {\n        return token.type === 'comment';\n    }\n    return false;\n}\n\nfunction isLineAfterMain(cm, nLine) {\n    var totalLines = cm.getDoc().size;\n    var voidRE = new RegExp('void main\\\\s*\\\\(\\\\s*[void]*\\\\)', 'i');\n    for (var i = 0; i < nLine && i < totalLines; i++) {\n        // Do not start until being inside the main function\n        var voidMatch = voidRE.exec(cm.getLine(i));\n        if (voidMatch) {\n            return true;\n        }\n    }\n    return false;\n}\n\nfunction getVariableType(cm, sVariable) {\n    var nLines = cm.getDoc().size;\n\n    // Show line where the value of the variable is been asigned\n    var uniformRE = new RegExp('\\\\s*uniform\\\\s+(float|vec2|vec3|vec4)\\\\s+' + sVariable + '\\\\s*;');\n    var voidRE = new RegExp('void main\\\\s*\\\\(\\\\s*[void]*\\\\)', 'i');\n    var voidIN = false;\n    var constructRE = new RegExp('(float|vec\\\\d)\\\\s+(' + sVariable + ')\\\\s*[;]?', 'i');\n    for (var i = 0; i < nLines; i++) {\n        if (!voidIN) {\n            // Do not start until being inside the main function\n            var voidMatch = voidRE.exec(cm.getLine(i));\n            if (voidMatch) {\n                voidIN = true;\n            } else {\n                var uniformMatch = uniformRE.exec(cm.getLine(i));\n                if (uniformMatch && !isCommented(cm, i, uniformMatch)) {\n                    return uniformMatch[1];\n                }\n            }\n        } else {\n            var constructMatch = constructRE.exec(cm.getLine(i));\n            if (constructMatch && constructMatch[1] && !isCommented(cm, i, constructMatch)) {\n                return constructMatch[1];\n            }\n        }\n    }\n    return 'none';\n}\n\nfunction getShaderForTypeVarInLine(cm, sType, sVariable, nLine) {\n    var frag = '';\n    var offset = 1;\n    for (var i = 0; i < nLine + 1 && i < cm.getDoc().size; i++) {\n        if (cm.getLine(i)) {\n            frag += cm.getLine(i) + '\\n';\n        }\n    }\n\n    frag += '\\tgl_FragColor = ';\n    if (sType === 'float') {\n        frag += 'vec4(vec3(' + sVariable + '),1.)';\n    } else if (sType === 'vec2') {\n        frag += 'vec4(vec3(' + sVariable + ',0.),1.)';\n    } else if (sType === 'vec3') {\n        frag += 'vec4(' + sVariable + ',1.)';\n    } else if (sType === 'vec4') {\n        frag += sVariable;\n    }\n    frag += ';\\n}\\n';\n\n    return frag;\n}\n\nfunction getResultRange(test_results) {\n    var min_ms = '10000000.0';\n    var min_line = 0;\n    var max_ms = '0.0';\n    var max_line = 0;\n    for (var i in test_results) {\n        if (test_results[i].ms < min_ms) {\n            min_ms = test_results[i].ms;\n            min_line = test_results[i].line;\n        }\n        if (test_results[i].ms > max_ms) {\n            max_ms = test_results[i].ms;\n            max_line = test_results[i].line;\n        }\n    }\n    return { min: { line: min_line, ms: min_ms }, max: { line: max_line, ms: max_ms } };\n}\n\nfunction getMedian(values) {\n    values.sort(function (a, b) {\n        return a - b;\n    });\n\n    var half = Math.floor(values.length / 2);\n\n    if (values.length % 2) return values[half];else return (values[half - 1] + values[half]) / 2.0;\n}\n\nfunction getDeltaSum(test_results) {\n    var total = 0.0;\n    for (var i in test_results) {\n        if (test_results[i].delta > 0) {\n            total += test_results[i].delta;\n        }\n    }\n    return total;\n}\n\nfunction getHits(test_results) {\n    var total = 0;\n    for (var i in test_results) {\n        if (test_results[i].delta > 0) {\n            total++;\n        }\n    }\n    return total;\n}\n\n},{}],129:[function(_dereq_,module,exports){\n/*\n * Original code from: https://twitter.com/blurspline / https://github.com/zz85\n * See post @ http://www.lab4games.net/zz85/blog/2014/11/15/resizing-moving-snapping-windows-with-js-css/\n */\n\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\nexports.subscribeInteractiveDom = subscribeInteractiveDom;\n\nvar _mixin = _dereq_('./mixin');\n\n// Thresholds\nvar FULLSCREEN_MARGINS = -30;\nvar MARGINS = 10;\n\nfunction setBounds(element, x, y, w, h) {\n    element.style.left = x + 'px';\n    element.style.top = y + 'px';\n    element.style.width = w + 'px';\n    element.style.height = h + 'px';\n}\n\nfunction subscribeInteractiveDom(dom, options) {\n    (0, _mixin.subscribeMixin)(dom);\n\n    options = options || {};\n    options.resize = options.resize !== undefined ? options.resize : false;\n    options.move = options.move !== undefined ? options.move : false;\n    options.snap = options.snap !== undefined ? options.snap : false;\n\n    // Minimum resizable area\n    var minWidth = 100;\n    var minHeight = 100;\n\n    // End of what's configurable.\n    var clicked = null;\n    var onRightEdge, onBottomEdge, onLeftEdge, onTopEdge;\n\n    var rightScreenEdge, bottomScreenEdge;\n\n    var preSnapped;\n\n    var b, x, y;\n\n    var redraw = false;\n\n    var ghostdom = document.createElement('div');\n    ghostdom.className = 'ghostdom';\n\n    if (options.snap) {\n        dom.parentElement.appendChild(ghostdom);\n    }\n\n    // Mouse events\n    dom.addEventListener('mousedown', onMouseDown);\n    document.addEventListener('mousemove', onMove);\n    document.addEventListener('mouseup', onUp);\n\n    // Touch events\n    dom.addEventListener('touchstart', onTouchDown);\n    document.addEventListener('touchmove', onTouchMove);\n    document.addEventListener('touchend', onTouchEnd);\n\n    function hintHide() {\n        setBounds(ghostdom, b.left, b.top, b.width, b.height);\n        ghostdom.style.opacity = 0;\n    }\n\n    function onTouchDown(event) {\n        onDown(event.touches[0]);\n        e.preventDefault();\n    }\n\n    function onTouchMove(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        onMove(event.touches[0]);\n    }\n\n    function onTouchEnd(event) {\n        if (event.touches.length === 0) {\n            onUp(e.changedTouches[0]);\n        }\n    }\n\n    function onMouseDown(event) {\n        onDown(event);\n        e.preventDefault();\n    }\n\n    function onDown(event) {\n        calc(event);\n        var isResizing = options.resize && (onRightEdge || onBottomEdge || onTopEdge || onLeftEdge);\n        clicked = {\n            x: x,\n            y: y,\n            cx: event.clientX,\n            cy: event.clientY,\n            w: b.width,\n            h: b.height,\n            isResizing: isResizing,\n            isMoving: !isResizing && canMove(),\n            onTopEdge: onTopEdge,\n            onLeftEdge: onLeftEdge,\n            onRightEdge: onRightEdge,\n            onBottomEdge: onBottomEdge\n        };\n    }\n\n    function canMove() {\n        return options.move && x > 0 && x < b.width && y > 0 && y < b.height; // && y < 30;\n    }\n\n    function calc(event) {\n        b = dom.getBoundingClientRect();\n        x = event.clientX - b.left;\n        y = event.clientY - b.top;\n\n        onTopEdge = y < MARGINS;\n        onLeftEdge = x < MARGINS;\n        onRightEdge = x >= b.width - MARGINS;\n        onBottomEdge = y >= b.height - MARGINS;\n\n        rightScreenEdge = window.innerWidth - MARGINS;\n        bottomScreenEdge = window.innerHeight - MARGINS;\n    }\n\n    var e;\n\n    function onMove(event) {\n        calc(event);\n        e = event;\n        redraw = true;\n    }\n\n    function animate() {\n        requestAnimationFrame(animate);\n\n        if (!redraw) {\n            return;\n        }\n        redraw = false;\n\n        if (clicked && clicked.isResizing) {\n            if (clicked.onRightEdge) {\n                dom.style.width = Math.max(x, minWidth) + 'px';\n            }\n            if (clicked.onBottomEdge) {\n                dom.style.height = Math.max(y, minHeight) + 'px';\n            }\n\n            if (clicked.onLeftEdge) {\n                var currentWidth = Math.max(clicked.cx - e.clientX + clicked.w, minWidth);\n                if (currentWidth > minWidth) {\n                    dom.style.width = currentWidth + 'px';\n                    dom.style.removeProperty('right');\n                    dom.style.left = e.clientX + 'px';\n                }\n            }\n\n            if (clicked.onTopEdge) {\n                var currentHeight = Math.max(clicked.cy - e.clientY + clicked.h, minHeight);\n                if (currentHeight > minHeight) {\n                    dom.style.height = currentHeight + 'px';\n                    dom.style.removeProperty('bottom');\n                    dom.style.top = e.clientY + 'px';\n                }\n            }\n\n            hintHide();\n            dom.trigger('resize', { finish: false, el: dom });\n            return;\n        }\n\n        if (clicked && clicked.isMoving) {\n            if (options.snap) {\n                if (b.top < FULLSCREEN_MARGINS || b.left < FULLSCREEN_MARGINS || b.right > window.innerWidth - FULLSCREEN_MARGINS || b.bottom > window.innerHeight - FULLSCREEN_MARGINS) {\n                    setBounds(ghostdom, 0, 0, window.innerWidth, window.innerHeight);\n                    ghostdom.style.opacity = 0.2;\n                } else if (b.top < MARGINS) {\n                    setBounds(ghostdom, 0, 0, window.innerWidth, window.innerHeight / 2);\n                    ghostdom.style.opacity = 0.2;\n                } else if (b.left < MARGINS) {\n                    setBounds(ghostdom, 0, 0, window.innerWidth / 2, window.innerHeight);\n                    ghostdom.style.opacity = 0.2;\n                } else if (b.right > rightScreenEdge) {\n                    setBounds(ghostdom, window.innerWidth / 2, 0, window.innerWidth / 2, window.innerHeight);\n                    ghostdom.style.opacity = 0.2;\n                } else if (b.bottom > bottomScreenEdge) {\n                    setBounds(ghostdom, 0, window.innerHeight / 2, window.innerWidth, window.innerWidth / 2);\n                    ghostdom.style.opacity = 0.2;\n                } else {\n                    hintHide();\n                }\n\n                if (preSnapped) {\n                    setBounds(dom, e.clientX - preSnapped.width / 2, e.clientY - Math.min(clicked.y, preSnapped.height), preSnapped.width, preSnapped.height);\n                    return;\n                }\n\n                // moving\n                dom.style.removeProperty('right');\n                dom.style.removeProperty('bottom');\n                dom.style.top = e.clientY - clicked.y + 'px';\n                dom.style.left = e.clientX - clicked.x + 'px';\n            } else {\n                var _x = e.clientX - clicked.x;\n                var _y = e.clientY - clicked.y;\n\n                if (_x < 0) {\n                    _x = 0;\n                } else if (_y < 0) {\n                    _y = 0;\n                } else if (_x + dom.offsetWidth > window.innerWidth) {\n                    _x = window.innerWidth - dom.offsetWidth;\n                } else if (_y + dom.offsetHeight > window.innerHeight) {\n                    _y = window.innerHeight - dom.offsetHeight;\n                }\n\n                dom.style.removeProperty('right');\n                dom.style.removeProperty('bottom');\n                dom.style.left = _x + 'px';\n                dom.style.top = _y + 'px';\n            }\n\n            dom.trigger('move', { finish: false, el: dom });\n            return;\n        }\n        // This code executes when mouse moves without clicking\n\n        // style cursor\n        if (options.resize && (onRightEdge && onBottomEdge || onLeftEdge && onTopEdge)) {\n            dom.style.cursor = 'nwse-resize';\n        } else if (options.resize && (onRightEdge && onTopEdge || onBottomEdge && onLeftEdge)) {\n            dom.style.cursor = 'nesw-resize';\n        } else if (options.resize && (onRightEdge || onLeftEdge)) {\n            dom.style.cursor = 'ew-resize';\n        } else if (options.resize && (onBottomEdge || onTopEdge)) {\n            dom.style.cursor = 'ns-resize';\n        } else if (canMove()) {\n            dom.style.cursor = 'move';\n        } else {\n            dom.style.cursor = 'default';\n        }\n    }\n    animate();\n\n    function onUp(e) {\n        calc(e);\n\n        if (clicked && clicked.isResizing) {\n            dom.trigger('resize', { finish: true, el: dom });\n        }\n\n        if (options.snap && clicked && clicked.isMoving) {\n            // Snap\n            var snapped = {\n                width: b.width,\n                height: b.height\n            };\n\n            if (b.top < FULLSCREEN_MARGINS || b.left < FULLSCREEN_MARGINS || b.right > window.innerWidth - FULLSCREEN_MARGINS || b.bottom > window.innerHeight - FULLSCREEN_MARGINS) {\n                setBounds(dom, 0, 0, window.innerWidth, window.innerHeight);\n                preSnapped = snapped;\n            } else if (b.top < MARGINS) {\n                setBounds(dom, 0, 0, window.innerWidth, window.innerHeight / 2);\n                preSnapped = snapped;\n            } else if (b.left < MARGINS) {\n                setBounds(dom, 0, 0, window.innerWidth / 2, window.innerHeight);\n                preSnapped = snapped;\n            } else if (b.right > rightScreenEdge) {\n                setBounds(dom, window.innerWidth / 2, 0, window.innerWidth / 2, window.innerHeight);\n                preSnapped = snapped;\n            } else if (b.bottom > bottomScreenEdge) {\n                setBounds(dom, 0, window.innerHeight / 2, window.innerWidth, window.innerWidth / 2);\n                preSnapped = snapped;\n            } else {\n                preSnapped = null;\n            }\n            hintHide();\n            dom.trigger('move', { finish: true, el: dom });\n            dom.trigger('resize', { finish: true, el: dom });\n        }\n        clicked = null;\n    }\n\n    dom.snapRight = function () {\n        var snapped = {\n            width: dom.width,\n            height: dom.height\n        };\n\n        setBounds(dom, window.innerWidth / 2, 0, window.innerWidth / 2, window.innerHeight);\n        preSnapped = snapped;\n        // hintHide();\n        dom.trigger('move', { finish: true, el: dom });\n        dom.trigger('resize', { finish: true, el: dom });\n    };\n\n    return dom;\n}\n\n},{\"./mixin\":131}],130:[function(_dereq_,module,exports){\n/* global MediaRecorder \nAuthor: Brett Camper (@professorlemeza)\nURL: https://github.com/tangrams/tangram/blob/master/src/utils/media_capture.js\n*/\n'use strict';\n\nvar _createClass = _dereq_('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nvar _Promise = _dereq_('babel-runtime/core-js/promise')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar _urls = _dereq_('./urls');\n\nvar MediaCapture = (function () {\n    function MediaCapture() {\n        _classCallCheck(this, MediaCapture);\n\n        this.queue_screenshot = null;\n        this.video_capture = null;\n    }\n\n    _createClass(MediaCapture, [{\n        key: 'setCanvas',\n        value: function setCanvas(canvas) {\n            this.canvas = canvas;\n        }\n\n        // Take a screenshot, returns a promise that resolves with the screenshot data when available\n    }, {\n        key: 'screenshot',\n        value: function screenshot() {\n            var _this = this;\n\n            if (this.queue_screenshot != null) {\n                return this.queue_screenshot.promise; // only capture one screenshot at a time\n            }\n\n            // Will resolve once rendering is complete and render buffer is captured\n            this.queue_screenshot = {};\n            this.queue_screenshot.promise = new _Promise(function (resolve, reject) {\n                _this.queue_screenshot.resolve = resolve;\n                _this.queue_screenshot.reject = reject;\n            });\n            return this.queue_screenshot.promise;\n        }\n\n        // Called after rendering, captures render buffer and resolves promise with the image data\n    }, {\n        key: 'completeScreenshot',\n        value: function completeScreenshot() {\n            if (this.queue_screenshot != null) {\n                // Get data URL, convert to blob\n                // Strip host/mimetype/etc., convert base64 to binary without UTF-8 mangling\n                // Adapted from: https://gist.github.com/unconed/4370822\n                var url = this.canvas.toDataURL('image/png');\n                var data = atob(url.slice(22));\n                var buffer = new Uint8Array(data.length);\n                for (var i = 0; i < data.length; ++i) {\n                    buffer[i] = data.charCodeAt(i);\n                }\n                var blob = new Blob([buffer], { type: 'image/png' });\n\n                // Resolve with screenshot data\n                this.queue_screenshot.resolve({ url: url, blob: blob, type: 'png' });\n                this.queue_screenshot = null;\n            }\n        }\n\n        // Starts capturing a video stream from the canvas\n    }, {\n        key: 'startVideoCapture',\n        value: function startVideoCapture() {\n            var _this2 = this;\n\n            if (typeof window.MediaRecorder !== 'function' || !this.canvas || typeof this.canvas.captureStream !== 'function') {\n                console.log('warn: Video capture (Canvas.captureStream and/or MediaRecorder APIs) not supported by browser');\n                return false;\n            } else if (this.video_capture) {\n                console.log('warn: Video capture already in progress, call Scene.stopVideoCapture() first');\n                return false;\n            }\n\n            // Start a new capture\n            try {\n                (function () {\n                    var cap = _this2.video_capture = {};\n                    cap.chunks = [];\n                    cap.stream = _this2.canvas.captureStream();\n                    cap.options = { mimeType: 'video/webm' }; // TODO: support other format options\n                    cap.media_recorder = new MediaRecorder(cap.stream, cap.options);\n                    cap.media_recorder.ondataavailable = function (event) {\n                        if (event.data.size > 0) {\n                            cap.chunks.push(event.data);\n                        }\n\n                        // Stopped recording? Create the final capture file blob\n                        if (cap.resolve) {\n                            var blob = new Blob(cap.chunks, { type: cap.options.mimeType });\n                            var url = (0, _urls.createObjectURL)(blob);\n\n                            // Explicitly remove all stream tracks, and set objects to null\n                            if (cap.stream) {\n                                var tracks = cap.stream.getTracks() || [];\n                                tracks.forEach(function (track) {\n                                    track.stop();\n                                    cap.stream.removeTrack(track);\n                                });\n                            }\n                            cap.stream = null;\n                            cap.media_recorder = null;\n                            _this2.video_capture = null;\n\n                            cap.resolve({ url: url, blob: blob, type: 'webm' });\n                        }\n                    };\n                    cap.media_recorder.start();\n                })();\n            } catch (e) {\n                this.video_capture = null;\n                console.log('error: Scene video capture failed', e);\n                return false;\n            }\n            return true;\n        }\n\n        // Stops capturing a video stream from the canvas, returns a promise that resolves with the video when available\n    }, {\n        key: 'stopVideoCapture',\n        value: function stopVideoCapture() {\n            var _this3 = this;\n\n            if (!this.video_capture) {\n                console.log('warn: No scene video capture in progress, call Scene.startVideoCapture() first');\n                return _Promise.resolve({});\n            }\n\n            // Promise that will resolve when final stream is available\n            this.video_capture.promise = new _Promise(function (resolve, reject) {\n                _this3.video_capture.resolve = resolve;\n                _this3.video_capture.reject = reject;\n            });\n\n            // Stop recording\n            this.video_capture.media_recorder.stop();\n\n            return this.video_capture.promise;\n        }\n    }]);\n\n    return MediaCapture;\n})();\n\nexports['default'] = MediaCapture;\nmodule.exports = exports['default'];\n\n},{\"./urls\":132,\"babel-runtime/core-js/promise\":8,\"babel-runtime/helpers/class-call-check\":10,\"babel-runtime/helpers/create-class\":11}],131:[function(_dereq_,module,exports){\n/*\nAdd events to a class or object:\n    class MyClass {\n        constructor() {\n            subscribeMixin(this); // Add the mixing functions to the class\n            ...\n            this.trigger('something', { owner: this, content: 'that'}); // trigger an event passing some arguments\n\nSubscribe to events by doing:\n    myClass.on('something', (args) => {\n        console.log(args);\n    });\n\nUnsubscribe to events by doing:\n    myClass.off('something');\n\nor more presicelly:\n    myClass.off('something', (args) => {\n        console.log(args);\n    });\n\nUnsubscribe to all events by:\n    myClass.offAll();\n*/\n\n'use strict';\n\nvar _Set = _dereq_('babel-runtime/core-js/set')['default'];\n\nvar _Object$assign = _dereq_('babel-runtime/core-js/object/assign')['default'];\n\nvar _getIterator = _dereq_('babel-runtime/core-js/get-iterator')['default'];\n\nvar _Object$keys = _dereq_('babel-runtime/core-js/object/keys')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\nexports.subscribeMixin = subscribeMixin;\n\nfunction subscribeMixin(target) {\n    var listeners = new _Set();\n\n    return _Object$assign(target, {\n\n        on: function on(type, f) {\n            var listener = {};\n            listener[type] = f;\n            listeners.add(listener);\n        },\n\n        off: function off(type, f) {\n            if (f) {\n                var listener = {};\n                listener[type] = f;\n                listeners['delete'](listener);\n            } else {\n                var _iteratorNormalCompletion = true;\n                var _didIteratorError = false;\n                var _iteratorError = undefined;\n\n                try {\n                    for (var _iterator = _getIterator(listeners), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                        var item = _step.value;\n                        var _iteratorNormalCompletion2 = true;\n                        var _didIteratorError2 = false;\n                        var _iteratorError2 = undefined;\n\n                        try {\n                            for (var _iterator2 = _getIterator(_Object$keys(item)), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                                var key = _step2.value;\n\n                                if (key === type) {\n                                    listeners['delete'](item);\n                                    return;\n                                }\n                            }\n                        } catch (err) {\n                            _didIteratorError2 = true;\n                            _iteratorError2 = err;\n                        } finally {\n                            try {\n                                if (!_iteratorNormalCompletion2 && _iterator2['return']) {\n                                    _iterator2['return']();\n                                }\n                            } finally {\n                                if (_didIteratorError2) {\n                                    throw _iteratorError2;\n                                }\n                            }\n                        }\n                    }\n                } catch (err) {\n                    _didIteratorError = true;\n                    _iteratorError = err;\n                } finally {\n                    try {\n                        if (!_iteratorNormalCompletion && _iterator['return']) {\n                            _iterator['return']();\n                        }\n                    } finally {\n                        if (_didIteratorError) {\n                            throw _iteratorError;\n                        }\n                    }\n                }\n            }\n        },\n\n        offAll: function offAll() {\n            listeners.clear();\n        },\n\n        trigger: function trigger(event) {\n            var _iteratorNormalCompletion3 = true;\n            var _didIteratorError3 = false;\n            var _iteratorError3 = undefined;\n\n            try {\n                for (var _len = arguments.length, data = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n                    data[_key - 1] = arguments[_key];\n                }\n\n                for (var _iterator3 = _getIterator(listeners), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                    var listener = _step3.value;\n\n                    if (typeof listener[event] === 'function') {\n                        listener[event].apply(listener, data);\n                    }\n                }\n            } catch (err) {\n                _didIteratorError3 = true;\n                _iteratorError3 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion3 && _iterator3['return']) {\n                        _iterator3['return']();\n                    }\n                } finally {\n                    if (_didIteratorError3) {\n                        throw _iteratorError3;\n                    }\n                }\n            }\n        },\n\n        listSubscriptions: function listSubscriptions() {\n            var _iteratorNormalCompletion4 = true;\n            var _didIteratorError4 = false;\n            var _iteratorError4 = undefined;\n\n            try {\n                for (var _iterator4 = _getIterator(listeners), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                    var item = _step4.value;\n\n                    console.log(item);\n                }\n            } catch (err) {\n                _didIteratorError4 = true;\n                _iteratorError4 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion4 && _iterator4['return']) {\n                        _iterator4['return']();\n                    }\n                } finally {\n                    if (_didIteratorError4) {\n                        throw _iteratorError4;\n                    }\n                }\n            }\n        }\n    });\n}\n\n},{\"babel-runtime/core-js/get-iterator\":1,\"babel-runtime/core-js/object/assign\":2,\"babel-runtime/core-js/object/keys\":6,\"babel-runtime/core-js/set\":9}],132:[function(_dereq_,module,exports){\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\nexports.createObjectURL = createObjectURL;\nvar _createObjectURL = undefined;\n\nfunction createObjectURL(url) {\n    if (_createObjectURL === undefined) {\n        _createObjectURL = window.URL && window.URL.createObjectURL || window.webkitURL && window.webkitURL.createObjectURL;\n        if (typeof _createObjectURL !== 'function') {\n            _createObjectURL = null;\n            console.log('window.URL.createObjectURL (or vendor prefix) not found, unable to create local blob URLs');\n        }\n    }\n\n    if (_createObjectURL) {\n        return _createObjectURL(url);\n    } else {\n        return url;\n    }\n}\n\n},{}],133:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = _dereq_('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar ErrorsDisplay = (function () {\n    function ErrorsDisplay(main) {\n        var _this = this;\n\n        _classCallCheck(this, ErrorsDisplay);\n\n        this.main = main;\n\n        //  private variables\n        this.widgets = [];\n\n        // EVENTS\n        this.main.shader.canvas.on('error', function (arg) {\n            if (_this.main.visualDebugger && _this.main.visualDebugger.testing) {\n                _this.clean();\n            } else {\n                _this.clean();\n                _this.addError(arg);\n            }\n        });\n\n        this.main.editor.on('changes', function (cm, changesObjs) {\n            if (_this.main.shader.canvas.isValid) {\n                _this.clean();\n            }\n        });\n    }\n\n    _createClass(ErrorsDisplay, [{\n        key: 'clean',\n        value: function clean() {\n            for (var i = 0; i < this.widgets.length; i++) {\n                this.main.editor.removeLineWidget(this.widgets[i]);\n            }\n            this.widgets.length = 0;\n        }\n    }, {\n        key: 'addError',\n        value: function addError(args) {\n            var re = /ERROR:\\s+\\d+:(\\d+):\\s+('.*)/g;\n            var matches = re.exec(args.error);\n            if (matches) {\n                var line = parseInt(matches[1]) - 1;\n                var er = matches[2];\n                var msg = document.createElement('div');\n\n                var icon = msg.appendChild(document.createElement('span'));\n                icon.className = 'ge-error-icon';\n                icon.innerHTML = 'x';\n                msg.appendChild(document.createTextNode(er));\n                msg.className = 'ge-error';\n                this.widgets.push(this.main.editor.addLineWidget(line, msg)); //, { coverGutter: false, noHScroll: true }));\n            }\n        }\n    }]);\n\n    return ErrorsDisplay;\n})();\n\nexports['default'] = ErrorsDisplay;\nmodule.exports = exports['default'];\n\n},{\"babel-runtime/helpers/class-call-check\":10,\"babel-runtime/helpers/create-class\":11}],134:[function(_dereq_,module,exports){\n'use strict';\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nvar _interopRequireDefault = _dereq_('babel-runtime/helpers/interop-require-default')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar _modalsExportModal = _dereq_('./modals/ExportModal');\n\nvar _modalsExportModal2 = _interopRequireDefault(_modalsExportModal);\n\nvar ExportIcon = function ExportIcon(main) {\n    var _this = this;\n\n    _classCallCheck(this, ExportIcon);\n\n    this.main = main;\n\n    this.el = document.createElement('div');\n    this.el.setAttribute('class', 'ge_export_icon');\n    this.el.innerHTML = '';\n    // this.el.innerHTML = '<i class=\"material-icons\">more_vert</i>';\n    this.el.addEventListener('click', function (event) {\n        if (main.change || !_this.modal) {\n            _this.modal = new _modalsExportModal2['default']('ge_export', { main: main });\n        }\n        _this.modal.presentModal(event.target.offsetLeft, event.target.offsetTop);\n    }, true);\n\n    this.main.container.appendChild(this.el);\n};\n\nexports['default'] = ExportIcon;\nmodule.exports = exports['default'];\n\n},{\"./modals/ExportModal\":139,\"babel-runtime/helpers/class-call-check\":10,\"babel-runtime/helpers/interop-require-default\":14}],135:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = _dereq_('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nvar _interopRequireDefault = _dereq_('babel-runtime/helpers/interop-require-default')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar _pickersColorPicker = _dereq_('./pickers/ColorPicker');\n\nvar _pickersColorPicker2 = _interopRequireDefault(_pickersColorPicker);\n\nvar _pickersVec3Picker = _dereq_('./pickers/Vec3Picker');\n\nvar _pickersVec3Picker2 = _interopRequireDefault(_pickersVec3Picker);\n\nvar _pickersVec2Picker = _dereq_('./pickers/Vec2Picker');\n\nvar _pickersVec2Picker2 = _interopRequireDefault(_pickersVec2Picker);\n\nvar _pickersFloatPicker = _dereq_('./pickers/FloatPicker');\n\nvar _pickersFloatPicker2 = _interopRequireDefault(_pickersFloatPicker);\n\nvar _pickersTypesColor = _dereq_('./pickers/types/Color');\n\nvar _pickersTypesColor2 = _interopRequireDefault(_pickersTypesColor);\n\nvar _modalsModal = _dereq_('./modals/Modal');\n\nvar _modalsModal2 = _interopRequireDefault(_modalsModal);\n\n// Return all pattern matches with captured groups\nRegExp.prototype.execAll = function (string) {\n    var match = null;\n    var matches = [];\n    while (match = this.exec(string)) {\n        var matchArray = [];\n        for (var i in match) {\n            if (parseInt(i) == i) {\n                matchArray.push(match[i]);\n            }\n        }\n        matchArray.index = match.index;\n        matches.push(matchArray);\n    }\n    return matches;\n};\n\nvar Helpers = (function () {\n    function Helpers(main) {\n        var _this = this;\n\n        _classCallCheck(this, Helpers);\n\n        this.main = main;\n        this.main.debugging = false;\n\n        var style = window.getComputedStyle(main.editor.getWrapperElement(), null);\n        var bgColor = new _pickersTypesColor2['default'](style.background !== '' ? style.background : style.backgroundColor);\n        var fgColor = new _pickersTypesColor2['default'](style.color);\n\n        this.properties = {\n            bgColor: bgColor.getString('rgb'),\n            fnColor: fgColor.getString('rgb'),\n            dimColor: 'rgb(127, 127, 127)',\n            selColor: 'rgb(40, 168, 107)',\n            link_button: true\n        };\n\n        // EVENTS\n        var wrapper = this.main.editor.getWrapperElement();\n        wrapper.addEventListener('contextmenu', function (event) {\n            var cursor = _this.main.editor.getCursor(true);\n            var token = _this.main.editor.getTokenAt(cursor);\n            if (token.type === 'variable') {\n                _this.main.visualDebugger.debug(token.string, cursor.line);\n            } else {\n                _this.main.update();\n            }\n        });\n\n        wrapper.addEventListener('mouseup', function (event) {\n            // bail out if we were doing a selection and not a click\n            if (_this.main.editor.somethingSelected()) {\n                return;\n            }\n\n            var cursor = _this.main.editor.getCursor(true);\n\n            // see if there is a match on the cursor click\n            var match = _this.getMatch(cursor);\n            var token = _this.main.editor.getTokenAt(cursor);\n            if (match) {\n                _this.main.visualDebugger.clean(event);\n                _this.main.update();\n\n                // Toggles the trackpad to be off if it's already present.\n                if (_this.activeModal && _this.activeModal.isVisible) {\n                    _this.activeModal.removeModal();\n                    return;\n                }\n\n                if (match.type === 'color') {\n                    _this.activeModal = new _pickersColorPicker2['default'](match.string, _this.properties);\n                    _this.activeModal.showAt(_this.main.editor);\n                    _this.activeModal.on('changed', function (color) {\n                        var newColor = color.getString('vec');\n                        var start = { line: cursor.line, ch: match.start };\n                        var end = { line: cursor.line, ch: match.end };\n                        match.end = match.start + newColor.length;\n                        _this.main.editor.replaceRange(newColor, start, end);\n                    });\n\n                    _this.activeModal.on('link_button', function (color) {\n                        _this.activeModal = new _pickersVec3Picker2['default'](color.getString('vec'), _this.properties);\n                        _this.activeModal.showAt(_this.main.editor);\n                        _this.activeModal.on('changed', function (dir) {\n                            var newDir = dir.getString('vec3');\n                            var start = { line: cursor.line, ch: match.start };\n                            var end = { line: cursor.line, ch: match.end };\n                            match.end = match.start + newDir.length;\n                            _this.main.editor.replaceRange(newDir, start, end);\n                        });\n                    });\n                }\n                if (match.type === 'vec3') {\n                    _this.activeModal = new _pickersVec3Picker2['default'](match.string, _this.properties);\n                    _this.activeModal.showAt(_this.main.editor);\n                    _this.activeModal.on('changed', function (dir) {\n                        var newDir = dir.getString('vec3');\n                        var start = { line: cursor.line, ch: match.start };\n                        var end = { line: cursor.line, ch: match.end };\n                        match.end = match.start + newDir.length;\n                        _this.main.editor.replaceRange(newDir, start, end);\n                    });\n                } else if (match.type === 'vec2') {\n                    _this.activeModal = new _pickersVec2Picker2['default'](match.string, _this.properties);\n                    _this.activeModal.showAt(_this.main.editor);\n                    _this.activeModal.on('changed', function (pos) {\n                        var newpos = pos.getString();\n                        var start = { line: cursor.line, ch: match.start };\n                        var end = { line: cursor.line, ch: match.end };\n                        match.end = match.start + newpos.length;\n                        _this.main.editor.replaceRange(newpos, start, end);\n                    });\n                } else if (match.type === 'number') {\n                    _this.activeModal = new _pickersFloatPicker2['default'](match.string, _this.properties);\n                    _this.activeModal.showAt(_this.main.editor);\n                    _this.activeModal.on('changed', function (number) {\n                        var newNumber = number.getString();\n                        var start = { line: cursor.line, ch: match.start };\n                        var end = { line: cursor.line, ch: match.end };\n                        match.end = match.start + newNumber.length;\n                        _this.main.editor.replaceRange(newNumber, start, end);\n                    });\n                }\n            } else if (_this.main.options.tooltips && (token.type === 'builtin' || token.type === 'variable-3')) {\n                _this.main.visualDebugger.clean(event);\n                var html = '<p>Learn more about: <a href=\"https://thebookofshaders.com/glossary/?search=' + token.string + '\" target=\"_blank\">' + token.string + '</a></p>';\n                _this.activeModal = new _modalsModal2['default']('ge_tooltip', { innerHTML: html });\n                _this.activeModal.showAt(_this.main.editor);\n            } else if (token.type === 'variable') {\n                if (_this.main.visualDebugger) {\n                    _this.main.visualDebugger.clean(event);\n                    _this.main.visualDebugger.iluminate(token.string);\n                }\n            }\n        });\n    }\n\n    _createClass(Helpers, [{\n        key: 'getMatch',\n        value: function getMatch(cursor) {\n            var types = ['color', 'vec3', 'vec2', 'number'];\n            var rta = undefined;\n            for (var i in types) {\n                rta = this.getTypeMatch(cursor, types[i]);\n                if (rta) {\n                    return rta;\n                }\n            }\n            return;\n        }\n    }, {\n        key: 'getTypeMatch',\n        value: function getTypeMatch(cursor, type) {\n            if (!type) {\n                return;\n            }\n            var re = undefined;\n            switch (type.toLowerCase()) {\n                case 'color':\n                    re = /vec[3|4]\\([\\d|.|,\\s]*\\)/g;\n                    break;\n                case 'vec3':\n                    re = /vec3\\([-|\\d|.|,\\s]*\\)/g;\n                    break;\n                case 'vec2':\n                    re = /vec2\\([-|\\d|.|,\\s]*\\)/g;\n                    break;\n                case 'number':\n                    re = /[-]?\\d+\\.\\d+|\\d+\\.|\\.\\d+/g;\n                    break;\n                default:\n                    console.error('invalid match selection');\n                    return;\n            }\n            var line = this.main.editor.getLine(cursor.line);\n            var matches = re.execAll(line);\n\n            if (matches) {\n                for (var i = 0; i < matches.length; i++) {\n                    var val = matches[i][0];\n                    var len = val.length;\n                    var start = matches[i].index;\n                    var end = matches[i].index + len;\n                    if (cursor.ch >= start && cursor.ch <= end) {\n                        return {\n                            type: type,\n                            start: start,\n                            end: end,\n                            string: val\n                        };\n                    }\n                }\n            }\n            return;\n        }\n    }]);\n\n    return Helpers;\n})();\n\nexports['default'] = Helpers;\nmodule.exports = exports['default'];\n\n},{\"./modals/Modal\":140,\"./pickers/ColorPicker\":141,\"./pickers/FloatPicker\":142,\"./pickers/Vec2Picker\":144,\"./pickers/Vec3Picker\":145,\"./pickers/types/Color\":146,\"babel-runtime/helpers/class-call-check\":10,\"babel-runtime/helpers/create-class\":11,\"babel-runtime/helpers/interop-require-default\":14}],136:[function(_dereq_,module,exports){\n'use strict';\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nvar _interopRequireDefault = _dereq_('babel-runtime/helpers/interop-require-default')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar _MenuItem = _dereq_('./MenuItem');\n\nvar _MenuItem2 = _interopRequireDefault(_MenuItem);\n\nvar _modalsExportModal = _dereq_('./modals/ExportModal');\n\nvar _modalsExportModal2 = _interopRequireDefault(_modalsExportModal);\n\nvar Menu = function Menu(main) {\n    var _this = this;\n\n    _classCallCheck(this, Menu);\n\n    this.main = main;\n    this.menus = {};\n\n    // CREATE MENU Container\n    this.el = document.createElement('ul');\n    this.el.setAttribute('class', 'ge_menu_bar');\n\n    // NEW\n    this.menus['new'] = new _MenuItem2['default'](this.el, 'ge_menu', '<i class=\"material-icons\">add</i> New', function (event) {\n        main['new']();\n    });\n\n    // OPEN\n    this.fileInput = document.createElement('input');\n    this.fileInput.setAttribute('type', 'file');\n    this.fileInput.setAttribute('accept', 'text/x-yaml');\n    this.fileInput.style.display = 'none';\n    this.fileInput.addEventListener('change', function (event) {\n        main.open(event.target.files[0]);\n    });\n    this.menus.open = new _MenuItem2['default'](this.el, 'ge_menu', '<i class=\"material-icons\">folder_open</i>  Open', function (event) {\n        _this.fileInput.click();\n    });\n\n    // this.menus.autoupdate.button.style.color = main.autoupdate ? 'white' : 'gray';\n\n    // TEST\n    this.menus.test = new _MenuItem2['default'](this.el, 'ge_menu', '<i class=\"material-icons\">timeline</i> Test', function (event) {\n        main.visualDebugger.check();\n    });\n\n    // SHARE\n    this.menus.share = new _MenuItem2['default'](this.el, 'ge_menu', '<i class=\"material-icons\">arrow_upward</i> Export', function (event) {\n        if (main.change || !_this.exportModal) {\n            _this.exportModal = new _modalsExportModal2['default']('ge_export', { main: main, position: 'fixed' });\n        }\n\n        var bbox = _this.menus.share.el.getBoundingClientRect();\n        _this.exportModal.presentModal(bbox.left - 5, bbox.top + bbox.height + 5);\n    });\n\n    // AUTOUPDATE\n    this.menus.autoupdate = new _MenuItem2['default'](this.el, 'ge_menu', ' <i class=\"material-icons\">autorenew</i> Update: ON', function (event) {\n        if (main.autoupdate) {\n            main.autoupdate = false;\n            _this.menus.autoupdate.name = '<i class=\"material-icons\">autorenew</i> Update: OFF';\n            // this.menus.autoupdate.button.style.color = 'gray';\n        } else {\n                main.autoupdate = true;\n                main.update();\n                _this.menus.autoupdate.name = '<i class=\"material-icons\">autorenew</i> Update: ON';\n                // this.menus.autoupdate.button.style.color = 'white';\n            }\n    });\n\n    main.container.appendChild(this.el);\n};\n\nexports['default'] = Menu;\nmodule.exports = exports['default'];\n\n},{\"./MenuItem\":137,\"./modals/ExportModal\":139,\"babel-runtime/helpers/class-call-check\":10,\"babel-runtime/helpers/interop-require-default\":14}],137:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = _dereq_('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar MenuItem = (function () {\n    function MenuItem(container, className, name, onClick) {\n        _classCallCheck(this, MenuItem);\n\n        this.el = document.createElement('li');\n        this.button = document.createElement('button');\n        this.button.className = className + '_button';\n        this.el.appendChild(this.button);\n        this.el.setAttribute('class', className);\n        this.button.innerHTML = name;\n        this.className = className;\n        this.hiddenClass = className + '--hidden';\n\n        // Attach listeners, including those for tooltip behavior\n        this.button.addEventListener('click', onClick, true);\n\n        if (container) {\n            container.appendChild(this.el);\n        }\n    }\n\n    _createClass(MenuItem, [{\n        key: 'hide',\n        value: function hide() {\n            this.el.setAttribute('class', this.className + ' ' + this.hiddenClass);\n        }\n    }, {\n        key: 'show',\n        value: function show() {\n            this.el.setAttribute('class', this.className);\n        }\n    }, {\n        key: 'name',\n        set: function set(name) {\n            this.button.innerHTML = name;\n        }\n    }]);\n\n    return MenuItem;\n})();\n\nexports['default'] = MenuItem;\nmodule.exports = exports['default'];\n\n},{\"babel-runtime/helpers/class-call-check\":10,\"babel-runtime/helpers/create-class\":11}],138:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = _dereq_('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar _toolsDebugging = _dereq_('../tools/debugging');\n\nvar _coreEditorJs = _dereq_('../core/Editor.js');\n\nvar main_ge = {};\nvar N_SAMPLES = 30;\n\nvar VisualDebugger = (function () {\n    function VisualDebugger(main) {\n        var _this = this;\n\n        _classCallCheck(this, VisualDebugger);\n\n        this.main = main;\n        this.breakpoint = null;\n        main_ge = main;\n\n        this.testing = false;\n        this.testingFrag = \"\";\n        this.testingLine = 0;\n        this.testingResults = [];\n        this.testingSamples = [];\n\n        this.main.editor.on('gutterClick', function (cm, n) {\n            var info = cm.lineInfo(n);\n            if (info && info.gutterMarkers && info.gutterMarkers.breakpoints) {\n                // Check for an active variable (a variable that have been declare or modify in this line)\n                var variableRE = new RegExp('\\\\s*[float|vec2|vec3|vec4]?\\\\s+([\\\\w|\\\\_]*)[\\\\.\\\\w]*?\\\\s+[\\\\+|\\\\-|\\\\\\\\|\\\\*]?\\\\=', 'i');\n                var match = variableRE.exec(info.text);\n                if (match) {\n                    _this.debug(match[1], info.line);\n                    _this.breakpoint = info.line;\n                }\n            }\n        });\n    }\n\n    _createClass(VisualDebugger, [{\n        key: 'check',\n        value: function check() {\n            // Clean previus records\n            this.testingResults = [];\n\n            var cm = this.main.editor;\n            var nLines = cm.getDoc().size;\n\n            var mainStartsAt = 0;\n            for (var i = 0; i < nLines; i++) {\n                if ((0, _toolsDebugging.isLineAfterMain)(cm, i)) {\n                    mainStartsAt = i;\n                    break;\n                }\n            }\n            this.testLine(mainStartsAt);\n        }\n    }, {\n        key: 'testLine',\n        value: function testLine(nLine) {\n            var cm = main_ge.editor;\n            var visualDebugger = main_ge.visualDebugger;\n\n            // If is done testing...\n            if (nLine >= cm.getDoc().size) {\n                visualDebugger.testingLine = 0;\n                visualDebugger.testing = false;\n\n                var results = visualDebugger.testingResults;\n                var range = (0, _toolsDebugging.getResultRange)(results);\n                var sum = (0, _toolsDebugging.getDeltaSum)(results);\n                var hits = (0, _toolsDebugging.getHits)(results);\n\n                console.log('Test: ', range.max.ms + 'ms', results);\n                cm.clearGutter('breakpoints');\n                for (var i in results) {\n                    var pct = results[i].delta / sum * 100;\n                    var size = results[i].delta / sum * 30;\n                    var marker_html = '<div>' + results[i].ms.toFixed(2);\n                    if (results[i].delta > 0.) {\n                        marker_html += '<span class=\"ge_assing_marker_pct ';\n                        if (pct > 100.0 / hits) {\n                            marker_html += 'ge_assing_marker_slower';\n                        }\n                        marker_html += '\" style=\"width: ' + size.toFixed(0) + 'px;\" data=\"' + pct.toFixed(0) + '%\"></span>';\n                    }\n\n                    cm.setGutterMarker(results[i].line, 'breakpoints', makeMarker(marker_html + '</div>'));\n                }\n                return;\n            }\n\n            if ((0, _toolsDebugging.isLineAfterMain)(cm, nLine)) {\n                // If the line is inside the main function\n                var shader = main_ge.shader.canvas;\n\n                // Check for an active variable (a variable that have been declare or modify in this line)\n                var variableRE = new RegExp('\\\\s*[float|vec2|vec3|vec4]?\\\\s+([\\\\w|\\\\_]*)[\\\\.\\\\w]*?\\\\s+[\\\\+|\\\\-|\\\\\\\\|\\\\*]?\\\\=', 'i');\n                var match = variableRE.exec(cm.getLine(nLine));\n                if (match) {\n                    // if there is an active variable, get what type is\n                    var variable = match[1];\n                    var type = (0, _toolsDebugging.getVariableType)(cm, variable);\n                    if (type === 'none') {\n                        // If it fails on finding the type keep going with the test on another line\n                        visualDebugger.testLine(nLine + 1);\n                        return;\n                    }\n\n                    // Prepare\n                    visualDebugger.testing = true;\n                    visualDebugger.testingLine = nLine;\n                    visualDebugger.testingFrag = (0, _toolsDebugging.getShaderForTypeVarInLine)(cm, type, variable, nLine);\n                    visualDebugger.testingSamples = [];\n\n                    (0, _coreEditorJs.unfocusAll)(cm);\n                    (0, _coreEditorJs.focusLine)(cm, nLine);\n                    main_ge.debugging = true;\n\n                    shader.test(this.onTest, visualDebugger.testingFrag);\n                } else {\n                    visualDebugger.testLine(nLine + 1);\n                }\n            } else {\n                // If the line is not inside main function, test the next one...\n                visualDebugger.testLine(nLine + 1);\n            }\n        }\n    }, {\n        key: 'onTest',\n        value: function onTest(target) {\n            var cm = main_ge.editor;\n            var shader = main_ge.shader.canvas;\n            var visualDebugger = main_ge.visualDebugger;\n\n            // If the test shader compiled...\n            if (target.wasValid) {\n                // get data, process and store.\n                var elapsedMs = target.timeElapsedMs;\n\n                if (visualDebugger.testingSamples.length < N_SAMPLES - 1) {\n                    visualDebugger.testingSamples.push(elapsedMs);\n                    shader.test(visualDebugger.onTest, visualDebugger.testingFrag);\n                } else {\n                    (0, _coreEditorJs.focusAll)(cm);\n                    main_ge.debugging = false;\n                    visualDebugger.testingSamples.push(elapsedMs);\n                    elapsedMs = (0, _toolsDebugging.getMedian)(visualDebugger.testingSamples);\n\n                    var range = (0, _toolsDebugging.getResultRange)(visualDebugger.testingResults);\n                    var delta = elapsedMs - range.max.ms;\n                    if (visualDebugger.testingResults.length === 0) {\n                        delta = 0.0;\n                    }\n                    visualDebugger.testingResults.push({ line: visualDebugger.testingLine, ms: target.timeElapsedMs, delta: delta });\n                    // console.log('Testing line:', visualDebugger.testingLine, elapsedMs, delta, range);\n\n                    // Create gutter marker\n                    cm.setGutterMarker(visualDebugger.testingLine, 'breakpoints', makeMarker(elapsedMs.toFixed(2)));\n\n                    // Test next line\n                    visualDebugger.testLine(visualDebugger.testingLine + 1);\n                };\n            } else {\n                console.log(target);\n                // Test next line\n                visualDebugger.testLine(visualDebugger.testingLine + 1);\n            }\n        }\n    }, {\n        key: 'debug',\n        value: function debug(variable, nLine) {\n            (0, _coreEditorJs.focusAll)(this.main.editor);\n            this.main.debugging = false;\n\n            if ((0, _toolsDebugging.isLineAfterMain)(this.main.editor, nLine)) {\n                var type = (0, _toolsDebugging.getVariableType)(this.main.editor, variable);\n                if (type !== 'none') {\n                    event.preventDefault();\n                    this.main.shader.canvas.load((0, _toolsDebugging.getShaderForTypeVarInLine)(this.main.editor, type, variable, nLine));\n                    (0, _coreEditorJs.unfocusAll)(this.main.editor);\n                    (0, _coreEditorJs.focusLine)(this.main.editor, nLine);\n                    this.main.debugging = true;\n                }\n            } else {\n                this.main.update();\n            }\n        }\n    }, {\n        key: 'iluminate',\n        value: function iluminate(variable) {\n            if (this.main.debbuging && this.variable === this.variable) {\n                return;\n            }\n            // this.clean();\n\n            var cm = this.main.editor;\n\n            // Highlight all calls to a variable\n            this.overlay = searchOverlay(variable, true);\n            cm.addOverlay(this.overlay);\n            if (cm.showMatchesOnScrollbar) {\n                if (this.annotate) {\n                    this.annotate.clear();this.annotate = null;\n                }\n                this.annotate = cm.showMatchesOnScrollbar(variable, true);\n            }\n        }\n    }, {\n        key: 'clean',\n        value: function clean(event) {\n            if (event && event.target && event.target.className === 'ge_assing_marker') {\n                return;\n            }\n\n            var cm = this.main.editor;\n            cm.clearGutter('breakpoints');\n            if (this.overlay) {\n                cm.removeOverlay(this.overlay, true);\n            }\n            this.type = null;\n            if (this.main.debbuging) {\n                this.main.shader.canvas.load(this.main.options.frag_header + this.main.editor.getValue() + this.main.options.frag_footer);\n            }\n            this.main.debbuging = false;\n        }\n    }]);\n\n    return VisualDebugger;\n})();\n\nexports['default'] = VisualDebugger;\n\nfunction makeMarker(html, extra_class) {\n    var marker = document.createElement('div');\n    marker.setAttribute('class', 'ge_assing_marker');\n    marker.innerHTML = html;\n    return marker;\n}\n\nfunction searchOverlay(query, caseInsensitive) {\n    if (typeof query === 'string') {\n        query = new RegExp(query.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&'), caseInsensitive ? 'gi' : 'g');\n    } else if (!query.global) {\n        query = new RegExp(query.source, query.ignoreCase ? 'gi' : 'g');\n    }\n\n    return {\n        token: function token(stream) {\n            query.lastIndex = stream.pos;\n            var match = query.exec(stream.string);\n            if (match && match.index === stream.pos) {\n                stream.pos += match[0].length || 1;\n                return 'searching';\n            } else if (match) {\n                stream.pos = match.index;\n            } else {\n                stream.skipToEnd();\n            }\n        }\n    };\n}\nmodule.exports = exports['default'];\n\n},{\"../core/Editor.js\":120,\"../tools/debugging\":128,\"babel-runtime/helpers/class-call-check\":10,\"babel-runtime/helpers/create-class\":11}],139:[function(_dereq_,module,exports){\n'use strict';\n\nvar _get = _dereq_('babel-runtime/helpers/get')['default'];\n\nvar _inherits = _dereq_('babel-runtime/helpers/inherits')['default'];\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nvar _interopRequireDefault = _dereq_('babel-runtime/helpers/interop-require-default')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar _MenuItem = _dereq_('../MenuItem');\n\nvar _MenuItem2 = _interopRequireDefault(_MenuItem);\n\nvar _Modal2 = _dereq_('./Modal');\n\nvar _Modal3 = _interopRequireDefault(_Modal2);\n\nvar _ioShare = _dereq_('../../io/share');\n\nvar ExportModal = (function (_Modal) {\n    _inherits(ExportModal, _Modal);\n\n    function ExportModal(CSS_PREFIX, properties) {\n        var _this = this;\n\n        _classCallCheck(this, ExportModal);\n\n        _get(Object.getPrototypeOf(ExportModal.prototype), 'constructor', this).call(this, CSS_PREFIX, properties);\n        this.main = properties.main;\n\n        this.save = new _MenuItem2['default'](this.el, 'ge_sub_menu', 'Download file', function (event) {\n            properties.main.download();\n        });\n\n        this.codeURL = new _MenuItem2['default'](this.el, 'ge_sub_menu', 'Code URL...', function (event) {\n            (0, _ioShare.saveOnServer)(_this.main, function (event) {\n                prompt('Use this url to share your code', 'http://thebookofshaders.com/edit.php?log=' + event.name);\n                _this.removeModal();\n            });\n        });\n\n        this.shaderURL = new _MenuItem2['default'](this.el, 'ge_sub_menu', 'Artwork URL...', function (event) {\n            (0, _ioShare.saveOnServer)(_this.main, function (event) {\n                prompt('Use this url to share your artwork', 'http://player.thebookofshaders.com/?log=' + event.name);\n                _this.removeModal();\n            });\n        });\n\n        var shareOF = new _MenuItem2['default'](this.el, 'ge_sub_menu', 'Artwork to [o]', function (event) {\n            shareOF.el.innerHTML = 'Artwork to [o]: adding to collection';\n            (0, _ioShare.saveOnServer)(_this.main, function (event) {\n                (0, _ioShare.createOpenFrameArtwork)(_this.main, event.name, event.url, function (success) {\n                    if (success) {\n                        shareOF.el.innerHTML = 'Artwork to [o]: added!';\n                    } else {\n                        shareOF.el.innerHTML = 'Artwork to [o]: failed :(';\n                    }\n                    setTimeout(function () {\n                        shareOF.el.innerHTML = '[o]';\n                        _this.removeModal();\n                    }, 4000);\n                });\n            });\n        });\n    }\n\n    return ExportModal;\n})(_Modal3['default']);\n\nexports['default'] = ExportModal;\nmodule.exports = exports['default'];\n\n},{\"../../io/share\":126,\"../MenuItem\":137,\"./Modal\":140,\"babel-runtime/helpers/class-call-check\":10,\"babel-runtime/helpers/get\":12,\"babel-runtime/helpers/inherits\":13,\"babel-runtime/helpers/interop-require-default\":14}],140:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = _dereq_('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\nexports.addEvent = addEvent;\nexports.removeEvent = removeEvent;\n\nvar _toolsMixin = _dereq_('../../tools/mixin');\n\nvar Modal = (function () {\n    function Modal(CSS_PREFIX, properties) {\n        _classCallCheck(this, Modal);\n\n        (0, _toolsMixin.subscribeMixin)(this);\n        this.CSS_PREFIX = CSS_PREFIX;\n\n        properties = properties || {};\n        for (var prop in properties) {\n            this[prop] = properties[prop];\n        }\n\n        this.el = document.createElement('div');\n        this.el.className = this.CSS_PREFIX + '_modal ge_modal';\n        this.el.style.backgroundColor = this.bgColor;\n        this.el.innerHTML = this.innerHTML || '';\n\n        if (this.elements) {\n            for (var i = 0; i < this.elements.length; i++) {\n                this.el.appendChild(this.elements[i]);\n            }\n        }\n\n        this.isVisible = false;\n    }\n\n    /* Event handling */\n\n    _createClass(Modal, [{\n        key: 'close',\n        value: function close() {\n            this.trigger('close');\n        }\n    }, {\n        key: 'showAt',\n        value: function showAt(cm) {\n            var cursor = cm.cursorCoords(true, 'page');\n            var x = cursor.left;\n            var y = cursor.top;\n\n            y += 30;\n\n            this.presentModal(x, y);\n        }\n    }, {\n        key: 'presentModal',\n        value: function presentModal(x, y) {\n            var _this = this;\n\n            // Listen for interaction outside of the modal\n            window.setTimeout(function () {\n                _this.onClickOutsideHandler = addEvent(document.body, 'click', _this.onClickOutside, _this);\n                _this.onKeyPressHandler = addEvent(window, 'keydown', _this.onKeyPress, _this);\n            }, 0);\n            this.isVisible = true;\n\n            this.el.style.left = x + 'px';\n            this.el.style.top = y + 'px';\n            this.el.style.width = this.width + 'px';\n            this.el.style.height = this.height + 'px';\n\n            if (this.position) {\n                this.el.style.position = this.position;\n            }\n\n            document.body.appendChild(this.el);\n\n            this.trigger('show');\n        }\n    }, {\n        key: 'getModalClass',\n        value: function getModalClass() {\n            return this.CSS_PREFIX + 'modal';\n        }\n    }, {\n        key: 'onKeyPress',\n        value: function onKeyPress(event) {\n            this.removeModal();\n        }\n    }, {\n        key: 'onClickOutside',\n        value: function onClickOutside(event) {\n            // HACKY!!\n            // A click event fires on the body after mousedown - mousemove, simultaneously with\n            // mouseup. So if someone started a mouse action inside the modal and then\n            // mouseup'd outside of it, it fires a click event on the body, thus, causing the\n            // modal to disappear when the user does not expect it to, since the mouse down event\n            // did not start outside the modal.\n            // There might be (or should be) a better way to track this, but right now, just cancel\n            // the event if the target ends up being on the body directly rather than on one of the\n            // other child elements.\n            if (event.target === document.body) {\n                return;\n            }\n            // end this specific hacky part\n            var target = event.target;\n            if (target) {\n                while (target !== document.documentElement && !target.classList.contains(this.getModalClass())) {\n                    target = target.parentNode;\n                }\n\n                if (!target.classList.contains(this.getModalClass())) {\n                    this.removeModal();\n                }\n            }\n        }\n\n        /**\n         *  Removes modal from DOM and destroys related event listeners\n         */\n    }, {\n        key: 'removeModal',\n        value: function removeModal() {\n            if (this.el && this.el.parentNode) {\n                this.el.parentNode.removeChild(this.el);\n            }\n            removeEvent(document.body, 'click', this.onClickOutsideHandler);\n            this.onClickOutsideHandler = null;\n            removeEvent(window, 'keydown', this.onKeyPressHandler);\n            this.onKeyPressHandler = null;\n\n            this.close();\n            this.isVisible = false;\n        }\n    }]);\n\n    return Modal;\n})();\n\nexports['default'] = Modal;\n\nfunction addEvent(element, event, callback, caller) {\n    var handler = undefined;\n    element.addEventListener(event, handler = function (e) {\n        callback.call(caller, e);\n    }, false);\n    return handler;\n}\n\nfunction removeEvent(element, event, callback) {\n    element.removeEventListener(event, callback, false);\n}\n\n},{\"../../tools/mixin\":131,\"babel-runtime/helpers/class-call-check\":10,\"babel-runtime/helpers/create-class\":11}],141:[function(_dereq_,module,exports){\n/*\nOriginal: https://github.com/tangrams/tangram-play/blob/gh-pages/src/js/addons/ui/widgets/ColorPickerModal.js\nAuthor: Lou Huang (@saikofish)\n*/\n\n'use strict';\n\nvar _get = _dereq_('babel-runtime/helpers/get')['default'];\n\nvar _inherits = _dereq_('babel-runtime/helpers/inherits')['default'];\n\nvar _createClass = _dereq_('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nvar _interopRequireDefault = _dereq_('babel-runtime/helpers/interop-require-default')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar _Picker2 = _dereq_('./Picker');\n\nvar _Picker3 = _interopRequireDefault(_Picker2);\n\nvar _typesColor = _dereq_('./types/Color');\n\nvar _typesColor2 = _interopRequireDefault(_typesColor);\n\nvar _toolsCommon = _dereq_('../../tools/common');\n\nvar _toolsInteractiveDom = _dereq_('../../tools/interactiveDom');\n\n// Some common use variables\nvar currentTarget = undefined;\nvar currentTargetHeight = 0;\nvar domCache = undefined;\n\nvar ColorPicker = (function (_Picker) {\n    _inherits(ColorPicker, _Picker);\n\n    function ColorPicker() {\n        var color = arguments.length <= 0 || arguments[0] === undefined ? 'vec3(1.0,0.0,0.0)' : arguments[0];\n        var properties = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n        _classCallCheck(this, ColorPicker);\n\n        _get(Object.getPrototypeOf(ColorPicker.prototype), 'constructor', this).call(this, 'ge_colorpicker_', properties);\n\n        this.width = 250; // in pixels\n        this.height = 250; // in pixels\n\n        this.disc = { width: 200, height: 200 };\n        this.barlum = { width: 25, height: 200 };\n\n        this.setValue(color);\n        this.init();\n    }\n\n    // generic function for drawing a canvas disc\n\n    _createClass(ColorPicker, [{\n        key: 'init',\n        value: function init() {\n            var _this = this;\n\n            if (!domCache) {\n                var modal = document.createElement('div');\n                var patch = document.createElement('div');\n                var map = document.createElement('div');\n                var disc = document.createElement('canvas');\n                var cover = document.createElement('div');\n                var cursor = document.createElement('div');\n                var barbg = document.createElement('div');\n                var barwhite = document.createElement('div');\n                var barlum = document.createElement('canvas');\n                var barcursors = document.createElement('div');\n                var leftcursor = document.createElement('div');\n                var rightcursor = document.createElement('div');\n\n                modal.className = this.CSS_PREFIX + 'modal ge_picker_modal';\n                modal.style.backgroundColor = this.bgColor;\n                patch.className = this.CSS_PREFIX + 'patch';\n                patch.style.backgroundColor = this.bgColor;\n                map.className = this.CSS_PREFIX + 'hsv-map';\n                disc.className = this.CSS_PREFIX + 'disc';\n                disc.style.backgroundColor = this.bgColor;\n                cover.className = this.CSS_PREFIX + 'disc-cover';\n                cursor.className = this.CSS_PREFIX + 'disc-cursor';\n                barbg.className = this.CSS_PREFIX + 'bar-bg';\n                barwhite.className = this.CSS_PREFIX + 'bar-white';\n                barlum.className = this.CSS_PREFIX + 'bar-luminance';\n                barcursors.className = this.CSS_PREFIX + 'bar-cursors';\n                leftcursor.className = this.CSS_PREFIX + 'bar-cursor-left';\n                rightcursor.className = this.CSS_PREFIX + 'bar-cursor-right';\n\n                map.id = 'cp-map';\n                barcursors.id = 'cp-bar';\n\n                modal.appendChild(patch);\n                modal.appendChild(map);\n\n                map.appendChild(disc);\n                map.appendChild(cover);\n                map.appendChild(cursor);\n                map.appendChild(barbg);\n                map.appendChild(barwhite);\n                map.appendChild(barlum);\n                map.appendChild(barcursors);\n                barcursors.appendChild(leftcursor);\n                barcursors.appendChild(rightcursor);\n\n                domCache = modal;\n            }\n\n            // Returns a clone of the cached document fragment\n            this.el = domCache.cloneNode(true);\n            (0, _toolsInteractiveDom.subscribeInteractiveDom)(this.el, { move: true, resize: false, snap: false });\n\n            // TODO: Improve these references\n            // The caching of references is likely to be important for speed\n            this.dom = {};\n            this.dom.hsvMap = this.el.querySelector('.ge_colorpicker_hsv-map');\n            this.dom.hsvMapCover = this.dom.hsvMap.children[1]; // well...\n            this.dom.hsvMapCursor = this.dom.hsvMap.children[2];\n            this.dom.hsvBarBGLayer = this.dom.hsvMap.children[3];\n            this.dom.hsvBarWhiteLayer = this.dom.hsvMap.children[4];\n            this.dom.hsvBarCursors = this.dom.hsvMap.children[6];\n            this.dom.hsvLeftCursor = this.dom.hsvBarCursors.children[0];\n            this.dom.hsvRightCursor = this.dom.hsvBarCursors.children[1];\n\n            this.dom.colorDisc = this.el.querySelector('.ge_colorpicker_disc');\n            this.dom.luminanceBar = this.el.querySelector('.ge_colorpicker_bar-luminance');\n\n            if (this.link_button) {\n                var lbutton = document.createElement('div');\n                lbutton.innerHTML = '+';\n                lbutton.className = this.CSS_PREFIX + 'link-button';\n                lbutton.style.color = this.fgColor;\n                this.el.appendChild(lbutton);\n\n                lbutton.addEventListener('click', function () {\n                    _this.trigger('link_button', _this.value);\n                    if (typeof _this.link_button === 'function') {\n                        _this.link_button(_this.value);\n                    }\n                    _this.removeModal();\n                });\n            }\n        }\n    }, {\n        key: 'draw',\n        value: function draw() {\n            //  Render color patch\n            var patch = this.el.querySelector('.ge_colorpicker_patch');\n            patch.style.backgroundColor = this.value.getString('rgb');\n\n            //  Render HSV picker\n            var color = this.value.colors;\n            var colorDiscRadius = this.dom.colorDisc.offsetHeight / 2;\n            var pi2 = Math.PI * 2;\n            var x = Math.cos(pi2 - color.hsv.h * pi2);\n            var y = Math.sin(pi2 - color.hsv.h * pi2);\n            var r = color.hsv.s * (colorDiscRadius - 5);\n\n            this.dom.hsvMapCover.style.opacity = 1 - color.hsv.v / 255;\n            // this is the faster version...\n            this.dom.hsvBarWhiteLayer.style.opacity = 1 - color.hsv.s;\n            this.dom.hsvBarBGLayer.style.backgroundColor = 'rgb(' + color.hueRGB.r + ',' + color.hueRGB.g + ',' + color.hueRGB.b + ')';\n\n            this.dom.hsvMapCursor.style.cssText = 'left: ' + (x * r + colorDiscRadius) + 'px;' + 'top: ' + (y * r + colorDiscRadius) + 'px;' + 'border-color: ' + (color.luminance > 0.22 ? '#333;' : '#ddd');\n\n            if (color.luminance > 0.22) {\n                this.dom.hsvBarCursors.classList.add('ge_colorpicker_dark');\n            } else {\n                this.dom.hsvBarCursors.classList.remove('ge_colorpicker_dark');\n            }\n\n            if (this.dom.hsvLeftCursor) {\n                this.dom.hsvLeftCursor.style.top = this.dom.hsvRightCursor.style.top = (1 - color.hsv.v / 255) * colorDiscRadius * 2 + 'px';\n            }\n        }\n    }, {\n        key: 'presentModal',\n        value: function presentModal(x, y) {\n            _get(Object.getPrototypeOf(ColorPicker.prototype), 'presentModal', this).call(this, x, y);\n\n            // // Listen for interaction on the HSV map\n            this.onHsvDownHandler = (0, _Picker2.addEvent)(this.dom.hsvMap, 'mousedown', this.onHsvDown, this);\n\n            var colorDisc = this.dom.colorDisc;\n\n            if (colorDisc.getContext) {\n                // HSV color wheel with white center\n                var diskContext = colorDisc.getContext('2d');\n                var ratio = (0, _toolsCommon.getDevicePixelRatio)(diskContext);\n                var width = this.disc.width / ratio;\n                var height = this.disc.height / ratio;\n                this.dom.colorDisc.width = width * ratio;\n                this.dom.colorDisc.height = height * ratio;\n                diskContext.scale(ratio, ratio);\n\n                drawDisk(diskContext, [width / 2, height / 2], [width / 2 - 1, height / 2 - 1], 360, function (ctx, angle) {\n                    var gradient = ctx.createRadialGradient(1, 1, 1, 1, 1, 0);\n                    gradient.addColorStop(0, 'hsl(' + (360 - angle + 0) + ', 100%, 50%)');\n                    gradient.addColorStop(1, '#fff');\n\n                    ctx.fillStyle = gradient;\n                    ctx.fill();\n                });\n\n                // gray border\n                drawCircle(diskContext, [width / 2, height / 2], [width / 2, height / 2], this.bgColor, // '#303030',\n                2 / ratio);\n\n                // draw the luminanceBar bar\n                var ctx = this.dom.luminanceBar.getContext('2d');\n                this.dom.luminanceBar.width = this.barlum.width;\n                this.dom.luminanceBar.height = this.barlum.height * ratio;\n                ctx.scale(ratio, ratio);\n                var gradient = ctx.createLinearGradient(0, 0, 0, this.barlum.height / ratio);\n\n                gradient.addColorStop(0, 'transparent');\n                gradient.addColorStop(1, 'black');\n\n                ctx.fillStyle = gradient;\n                ctx.fillRect(0, 0, 30, 200);\n            }\n            this.draw();\n        }\n\n        /**\n         *  Updates only the color value of the color picker\n         *  and the view. Designed to be called by external modules\n         *  so that it can update its internal value from an outside source.\n         *  Does no DOM creation & other initialization work.\n         */\n    }, {\n        key: 'setValue',\n        value: function setValue(color) {\n            this.value = new _typesColor2['default'](color);\n        }\n\n        /* ---------------------------------- */\n        /* ---- HSV-circle color picker ----- */\n        /* ---------------------------------- */\n\n        // Actions when user mouses down on HSV color map\n    }, {\n        key: 'onHsvDown',\n        value: function onHsvDown(event) {\n            var target = event.target || event.srcElement;\n            event.preventDefault();\n\n            currentTarget = target.id ? target : target.parentNode;\n            currentTargetHeight = currentTarget.offsetHeight; // as diameter of circle\n\n            // Starts listening for mousemove and mouseup events\n            this.onHsvMoveHandler = (0, _Picker2.addEvent)(this.el, 'mousemove', this.onHsvMove, this);\n            this.onHsvUpHandler = (0, _Picker2.addEvent)(window, 'mouseup', this.onHsvUp, this);\n\n            this.onHsvMove(event);\n\n            // Hides mouse cursor and begins rendering loop\n            this.dom.hsvMap.classList.add('ge_colorpicker_no-cursor');\n            this.renderer.start();\n        }\n\n        // Actions when user moves around on HSV color map\n    }, {\n        key: 'onHsvMove',\n        value: function onHsvMove(event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var r = undefined,\n                x = undefined,\n                y = undefined,\n                h = undefined,\n                s = undefined;\n            if (event.target === this.dom.hsvMapCover && currentTarget === this.dom.hsvMap) {\n                // the circle\n                r = currentTargetHeight / 2, x = event.offsetX - r, y = event.offsetY - r, h = (360 - (Math.atan2(y, x) * 180 / Math.PI + (y < 0 ? 360 : 0))) / 360, s = Math.sqrt(x * x + y * y) / r;\n                this.value.set({ h: h, s: s }, 'hsv');\n            } else if (event.target === this.dom.hsvBarCursors && currentTarget === this.dom.hsvBarCursors) {\n                // the luminanceBar\n                var v = (currentTargetHeight - event.offsetY) / currentTargetHeight;\n                v = Math.max(0, Math.min(1, v)) * 255;\n                this.value.set({ v: v }, 'hsv');\n            }\n\n            this.trigger('changed', this.value);\n        }\n\n        // Actions when user mouses up on HSV color map\n    }, {\n        key: 'onHsvUp',\n        value: function onHsvUp(event) {\n            // Stops rendering and returns mouse cursor\n            this.renderer.stop();\n            this.dom.hsvMap.classList.remove('ge_colorpicker_no-cursor');\n            this.destroyEvents();\n        }\n\n        // Destroy event listeners that exist during mousedown colorpicker interaction\n    }, {\n        key: 'destroyEvents',\n        value: function destroyEvents() {\n            (0, _Picker2.removeEvent)(this.el, 'mousemove', this.onHsvMoveHandler);\n            this.onHsvMoveHandler = null;\n            (0, _Picker2.removeEvent)(window, 'mouseup', this.onHsvUpHandler);\n            this.onHsvUpHandler = null;\n        }\n    }, {\n        key: 'close',\n        value: function close() {\n            this.destroyEvents();\n            (0, _Picker2.removeEvent)(this.dom.hsvMap, 'mousedown', this.onHsvDownHandler);\n            this.onHsvDownHandler = null;\n        }\n    }]);\n\n    return ColorPicker;\n})(_Picker3['default']);\n\nexports['default'] = ColorPicker;\nfunction drawDisk(ctx, coords, radius, steps, colorCallback) {\n    var x = coords[0] || coords; // coordinate on x-axis\n    var y = coords[1] || coords; // coordinate on y-axis\n    var a = radius[0] || radius; // radius on x-axis\n    var b = radius[1] || radius; // radius on y-axis\n    var angle = 360;\n    var coef = Math.PI / 180;\n\n    ctx.save();\n    ctx.translate(x - a, y - b);\n    ctx.scale(a, b);\n\n    steps = angle / steps || 360;\n\n    for (; angle > 0; angle -= steps) {\n        ctx.beginPath();\n        if (steps !== 360) {\n            ctx.moveTo(1, 1); // stroke\n        }\n        ctx.arc(1, 1, 1, (angle - steps / 2 - 1) * coef, (angle + steps / 2 + 1) * coef);\n\n        if (colorCallback) {\n            colorCallback(ctx, angle);\n        } else {\n            ctx.fillStyle = 'black';\n            ctx.fill();\n        }\n    }\n    ctx.restore();\n}\n\nfunction drawCircle(ctx, coords, radius, color, width) {\n    // uses drawDisk\n    width = width || 1;\n    radius = [(radius[0] || radius) - width / 2, (radius[1] || radius) - width / 2];\n    drawDisk(ctx, coords, radius, 1, function (ctx, angle) {\n        ctx.restore();\n        ctx.lineWidth = width;\n        ctx.strokeStyle = color || '#000';\n        ctx.stroke();\n    });\n}\nmodule.exports = exports['default'];\n\n},{\"../../tools/common\":127,\"../../tools/interactiveDom\":129,\"./Picker\":143,\"./types/Color\":146,\"babel-runtime/helpers/class-call-check\":10,\"babel-runtime/helpers/create-class\":11,\"babel-runtime/helpers/get\":12,\"babel-runtime/helpers/inherits\":13,\"babel-runtime/helpers/interop-require-default\":14}],142:[function(_dereq_,module,exports){\n'use strict';\n\nvar _get = _dereq_('babel-runtime/helpers/get')['default'];\n\nvar _inherits = _dereq_('babel-runtime/helpers/inherits')['default'];\n\nvar _createClass = _dereq_('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nvar _interopRequireDefault = _dereq_('babel-runtime/helpers/interop-require-default')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar _Picker2 = _dereq_('./Picker');\n\nvar _Picker3 = _interopRequireDefault(_Picker2);\n\nvar _typesFloat = _dereq_('./types/Float');\n\nvar _typesFloat2 = _interopRequireDefault(_typesFloat);\n\nvar FloatPicker = (function (_Picker) {\n    _inherits(FloatPicker, _Picker);\n\n    function FloatPicker(number, properties) {\n        _classCallCheck(this, FloatPicker);\n\n        _get(Object.getPrototypeOf(FloatPicker.prototype), 'constructor', this).call(this, 'ge_floatpicker_', properties);\n\n        this.width = this.width || 250;\n        this.height = this.height || 40;\n\n        this.prevOffset = 0;\n        this.scale = 2;\n\n        this.setValue(number || 1);\n        this.create();\n    }\n\n    _createClass(FloatPicker, [{\n        key: 'draw',\n        value: function draw() {\n            this.ctx.clearRect(0, 0, this.width, this.height);\n\n            // horizontal line\n            this.ctx.strokeStyle = this.dimColor;\n            this.ctx.lineWidth = 1;\n            this.ctx.beginPath();\n            this.ctx.moveTo(0, 0.5 + this.height * 0.5);\n            this.ctx.lineTo(0 + this.width, 0.5 + this.height * 0.5);\n            this.ctx.closePath();\n            this.ctx.stroke();\n\n            // vertical line\n            this.ctx.strokeStyle = this.fnColor;\n            this.ctx.lineWidth = 1;\n            this.ctx.beginPath();\n            this.ctx.moveTo(this.width * 0.5, 0);\n            this.ctx.lineTo(this.width * 0.5, this.height);\n            this.ctx.closePath();\n            this.ctx.stroke();\n\n            // Triangle line\n            this.ctx.fillStyle = this.overPoint ? this.selColor : this.fnColor;\n            this.ctx.beginPath();\n            this.ctx.moveTo(this.width * 0.5, 5);\n            this.ctx.lineTo(this.width * 0.48, 0);\n            this.ctx.lineTo(this.width * 0.52, 0);\n            this.ctx.closePath();\n            this.ctx.fill();\n\n            var times = 3;\n            var unit = 40;\n            var step = this.width / unit;\n            var sections = unit * times;\n\n            var offsetX = this.offsetX;\n\n            if (Math.abs(this.offsetX - this.width * 0.5) > this.width * 0.5) {\n                offsetX = (this.offsetX - this.width * 0.5) % (this.width * 0.5) + this.width;\n            }\n\n            this.ctx.strokeStyle = this.dimColor;\n            this.ctx.beginPath();\n            for (var i = 0; i < sections; i++) {\n                var l = i % (unit / 2) === 0 ? this.height * 0.35 : i % (unit / 4) === 0 ? this.height * 0.2 : this.height * 0.1;\n                this.ctx.moveTo(i * step - offsetX, this.height * 0.5 - l);\n                this.ctx.lineTo(i * step - offsetX, this.height * 0.5 + l);\n            }\n            this.ctx.stroke();\n\n            var val = Math.round((this.value - this.min) / this.range * this.width);\n\n            // point\n            this.ctx.strokeStyle = this.overPoint ? this.selColor : this.fnColor;\n            this.ctx.lineWidth = 1;\n            this.ctx.beginPath();\n            this.ctx.moveTo(this.offsetX + val, this.height * 0.5);\n            this.ctx.lineTo(this.offsetX + val, this.height);\n            this.ctx.closePath();\n            this.ctx.stroke();\n\n            this.overPoint = false;\n        }\n    }, {\n        key: 'onMouseDown',\n        value: function onMouseDown(event) {\n            this.prevOffset = event.offsetX;\n            _get(Object.getPrototypeOf(FloatPicker.prototype), 'onMouseDown', this).call(this, event);\n        }\n\n        // Actions when user moves around on HSV color map\n    }, {\n        key: 'onMouseMove',\n        value: function onMouseMove(event) {\n            var x = event.offsetX;\n\n            var vel = x - this.prevOffset;\n            var offset = this.offsetX - vel;\n\n            var center = this.width / this.scale;\n            this.setValue(offset / center);\n            this.prevOffset = x;\n\n            // fire 'changed'\n            var number = new _typesFloat2['default'](this.getValue());\n            this.trigger('changed', number);\n            this.overPoint = true;\n        }\n    }, {\n        key: 'setValue',\n        value: function setValue(value) {\n            if (typeof value === 'string') {\n                this.value = parseFloat(value);\n            } else if (typeof value === 'number') {\n                this.value = value;\n            }\n            var center = this.width / this.scale;\n            this.offsetX = this.value * center;\n        }\n    }]);\n\n    return FloatPicker;\n})(_Picker3['default']);\n\nexports['default'] = FloatPicker;\nmodule.exports = exports['default'];\n\n},{\"./Picker\":143,\"./types/Float\":148,\"babel-runtime/helpers/class-call-check\":10,\"babel-runtime/helpers/create-class\":11,\"babel-runtime/helpers/get\":12,\"babel-runtime/helpers/inherits\":13,\"babel-runtime/helpers/interop-require-default\":14}],143:[function(_dereq_,module,exports){\n/*\nOriginal: https://github.com/tangrams/tangram-play/blob/gh-pages/src/js/addons/ui/widgets/ColorPickerModal.js\nAuthor: Lou Huang (@saikofish)\n*/\n\n'use strict';\n\nvar _createClass = _dereq_('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\nexports.addEvent = addEvent;\nexports.removeEvent = removeEvent;\n\nvar _toolsCommon = _dereq_('../../tools/common');\n\nvar _toolsMixin = _dereq_('../../tools/mixin');\n\nvar Picker = (function () {\n    function Picker(CSS_PREFIX, properties) {\n        var _this = this;\n\n        _classCallCheck(this, Picker);\n\n        (0, _toolsMixin.subscribeMixin)(this);\n        this.CSS_PREFIX = CSS_PREFIX;\n\n        this.bgColor = 'rgb(46, 48, 51)';\n        this.dimColor = 'rgb(100, 100, 100)';\n        this.fnColor = 'rgb(230, 230, 230)';\n        this.selColor = 'rgb(133, 204, 196)';\n\n        properties = properties || {};\n        for (var prop in properties) {\n            this[prop] = properties[prop];\n        }\n\n        /**\n         *  This initializes the renderer. It uses requestAnimationFrame() to\n         *  smoothly render changes in the color picker as user interacts with it.\n         */\n        this.renderer = {\n            // Stores a reference to the animation rendering loop.\n            frame: null,\n\n            drawFrame: function drawFrame() {\n                if (!_this.el) {\n                    return;\n                }\n                _this.draw();\n            },\n\n            // Starts animation rendering loop\n            start: function start() {\n                _this.renderer.drawFrame();\n                _this.renderer.frame = window.requestAnimationFrame(_this.renderer.start);\n            },\n\n            // Stops animation rendering loop\n            stop: function stop() {\n                window.cancelAnimationFrame(_this.renderer.frame);\n            }\n        };\n        this.isVisible = false;\n    }\n\n    /* Event handling */\n\n    _createClass(Picker, [{\n        key: 'create',\n        value: function create() {\n            this.el = document.createElement('div');\n            this.el.className = this.CSS_PREFIX + 'modal ge_picker_modal';\n            this.el.style.backgroundColor = this.bgColor;\n\n            this.canvas = document.createElement('canvas');\n            this.canvas.className = this.CSS_PREFIX + 'canvas ge_picker_canvas';\n            this.canvas.style.backgroundColor = this.bgColor;\n\n            this.el.appendChild(this.canvas);\n            this.ctx = this.canvas.getContext('2d');\n\n            var ratio = (0, _toolsCommon.getDevicePixelRatio)(this.ctx);\n            this.canvas.width = this.width * ratio;\n            this.canvas.height = this.height * ratio;\n            this.ctx.scale(ratio, ratio);\n        }\n    }, {\n        key: 'draw',\n        value: function draw() {\n            // render rutine\n        }\n    }, {\n        key: 'close',\n        value: function close() {\n            // Close rutine\n            this.destroyEvents();\n            removeEvent(this.el, 'mousedown', this.onMouseDownHandler);\n            this.onMouseDownHandler = null;\n        }\n    }, {\n        key: 'destroyEvents',\n        value: function destroyEvents() {\n            removeEvent(this.el, 'mousemove', this.onMouseMoveHandler);\n            this.onMouseMoveHandler = null;\n            removeEvent(window, 'mouseup', this.onMouseUpHandler);\n            this.onMouseUpHandler = null;\n        }\n    }, {\n        key: 'setValue',\n        value: function setValue(value) {\n            this.value = value;\n        }\n    }, {\n        key: 'getValue',\n        value: function getValue() {\n            return this.value;\n        }\n    }, {\n        key: 'showAt',\n        value: function showAt(cm) {\n            var cursor = cm.cursorCoords(true, 'page');\n            var x = cursor.left;\n            var y = cursor.top;\n\n            x -= this.width * 0.5;\n            y += 30;\n\n            // // Check if desired x, y will be outside the viewport.\n            // // Do not allow the modal to disappear off the edge of the window.\n            // x = (x + this.width < window.innerWidth) ? x : (window.innerWidth - 20 - this.width);\n            // y = (y + this.height < window.innerHeight) ? y : (window.innerHeight - 20 - this.height);\n\n            this.presentModal(x, y);\n        }\n    }, {\n        key: 'presentModal',\n        value: function presentModal(x, y) {\n            var _this2 = this;\n\n            // Listen for interaction outside of the modal\n            window.setTimeout(function () {\n                _this2.onClickOutsideHandler = addEvent(document.body, 'click', _this2.onClickOutside, _this2);\n                _this2.onKeyPressHandler = addEvent(window, 'keydown', _this2.onKeyPress, _this2);\n            }, 0);\n            this.isVisible = true;\n\n            this.el.style.left = x + 'px';\n            this.el.style.top = y + 'px';\n            this.el.style.width = this.width + 'px';\n            this.el.style.height = this.height + 'px';\n            document.body.appendChild(this.el);\n\n            this.onMouseDownHandler = addEvent(this.el, 'mousedown', this.onMouseDown, this);\n\n            this.renderer.drawFrame();\n        }\n\n        /**\n        *  Removes modal from DOM and destroys related event listeners\n        */\n    }, {\n        key: 'removeModal',\n        value: function removeModal() {\n            if (this.el && this.el.parentNode) {\n                this.el.parentNode.removeChild(this.el);\n            }\n            removeEvent(document.body, 'click', this.onClickOutsideHandler);\n            this.onClickOutsideHandler = null;\n            removeEvent(window, 'keydown', this.onKeyPressHandler);\n            this.onKeyPressHandler = null;\n\n            this.close();\n            this.isVisible = false;\n        }\n    }, {\n        key: 'onKeyPress',\n        value: function onKeyPress(event) {\n            this.removeModal();\n        }\n    }, {\n        key: 'onClickOutside',\n        value: function onClickOutside(event) {\n            // HACKY!!\n            // A click event fires on the body after mousedown - mousemove, simultaneously with\n            // mouseup. So if someone started a mouse action inside the modal and then\n            // mouseup'd outside of it, it fires a click event on the body, thus, causing the\n            // modal to disappear when the user does not expect it to, since the mouse down event\n            // did not start outside the modal.\n            // There might be (or should be) a better way to track this, but right now, just cancel\n            // the event if the target ends up being on the body directly rather than on one of the\n            // other child elements.\n            if (event.target === document.body) {\n                return;\n            }\n            // end this specific hacky part\n\n            var target = event.target;\n\n            while (target !== document.documentElement && !target.classList.contains(this.CSS_PREFIX + 'modal')) {\n                target = target.parentNode;\n            }\n\n            if (!target.classList.contains(this.CSS_PREFIX + 'modal')) {\n                this.removeModal();\n            }\n        }\n    }, {\n        key: 'onMouseDown',\n        value: function onMouseDown(event) {\n            event.preventDefault();\n\n            // Starts listening for mousemove and mouseup events\n            this.onMouseMoveHandler = addEvent(this.el, 'mousemove', this.onMouseMove, this);\n            this.onMouseUpHandler = addEvent(window, 'mouseup', this.onMouseUp, this);\n\n            this.onMouseMove(event);\n\n            this.renderer.start();\n        }\n    }, {\n        key: 'onMouseMove',\n        value: function onMouseMove(event) {}\n    }, {\n        key: 'onMouseUp',\n        value: function onMouseUp(event) {\n            this.renderer.stop();\n            this.destroyEvents();\n        }\n    }]);\n\n    return Picker;\n})();\n\nexports['default'] = Picker;\n\nfunction addEvent(element, event, callback, caller) {\n    var handler = undefined;\n    element.addEventListener(event, handler = function (e) {\n        callback.call(caller, e);\n    }, false);\n    return handler;\n}\n\nfunction removeEvent(element, event, callback) {\n    element.removeEventListener(event, callback, false);\n}\n\n},{\"../../tools/common\":127,\"../../tools/mixin\":131,\"babel-runtime/helpers/class-call-check\":10,\"babel-runtime/helpers/create-class\":11}],144:[function(_dereq_,module,exports){\n'use strict';\n\nvar _get = _dereq_('babel-runtime/helpers/get')['default'];\n\nvar _inherits = _dereq_('babel-runtime/helpers/inherits')['default'];\n\nvar _createClass = _dereq_('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nvar _interopRequireDefault = _dereq_('babel-runtime/helpers/interop-require-default')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar _Picker2 = _dereq_('./Picker');\n\nvar _Picker3 = _interopRequireDefault(_Picker2);\n\nvar _typesVector = _dereq_('./types/Vector');\n\nvar _typesVector2 = _interopRequireDefault(_typesVector);\n\nvar Vec2Picker = (function (_Picker) {\n    _inherits(Vec2Picker, _Picker);\n\n    function Vec2Picker(pos, properties) {\n        _classCallCheck(this, Vec2Picker);\n\n        _get(Object.getPrototypeOf(Vec2Picker.prototype), 'constructor', this).call(this, 'ge_vec2picker_', properties);\n\n        this.width = this.width || 200;\n        this.height = this.height || 200;\n\n        this.min = this.min || -1;\n        this.max = this.max || 1;\n        this.size = this.size || 6;\n        this.range = this.max - this.min;\n        this.overPoint = false;\n\n        var center = (this.range / 2 - this.max) * -1;\n        this.setValue(pos || [center, center]);\n        this.create();\n    }\n\n    _createClass(Vec2Picker, [{\n        key: 'draw',\n        value: function draw() {\n            this.ctx.clearRect(0, 0, this.width, this.height);\n\n            // frame\n            this.ctx.strokeStyle = this.dimColor;\n            this.ctx.lineWidth = 2;\n            this.ctx.strokeRect(0, 0, this.width, this.height);\n\n            this.ctx.beginPath();\n            this.ctx.lineWidth = 0.25;\n            var sections = 20;\n            var step = this.width / sections;\n            for (var i = 0; i < sections; i++) {\n                this.ctx.moveTo(i * step, 0);\n                this.ctx.lineTo(i * step, this.height);\n                this.ctx.moveTo(0, i * step);\n                this.ctx.lineTo(this.width, i * step);\n            }\n            this.ctx.stroke();\n\n            // horizontal line\n            this.ctx.strokeStyle = this.dimColor;\n            this.ctx.lineWidth = 1.0;\n            this.ctx.beginPath();\n            this.ctx.moveTo(0, 0.5 + this.height * 0.5);\n            this.ctx.lineTo(this.width, 0.5 + this.height * 0.5);\n            this.ctx.closePath();\n            this.ctx.stroke();\n\n            // vertical line\n            this.ctx.beginPath();\n            this.ctx.moveTo(0.5 + this.width * 0.5, 0);\n            this.ctx.lineTo(0.5 + this.width * 0.5, this.height);\n            this.ctx.closePath();\n            this.ctx.stroke();\n\n            // // Triangle line\n            // this.ctx.fillStyle = this.dimColor;\n            // this.ctx.beginPath();\n            // this.ctx.moveTo(this.width * 0.5, 5);\n            // this.ctx.lineTo(this.width * 0.48, 0);\n            // this.ctx.lineTo(this.width * 0.52, 0);\n            // this.ctx.closePath();\n            // this.ctx.fill();\n\n            var x = Math.round((this.value.x - this.min) / this.range * this.width);\n            var y = Math.round((1 - (this.value.y - this.min) / this.range) * this.height);\n\n            var half = this.size / 2;\n\n            if (x < half) {\n                x = half;\n            }\n            if (x > this.width - half) {\n                x = this.width - half;\n            }\n            if (y < half) {\n                y = half;\n            }\n            if (y > this.height - half) {\n                y = this.height - half;\n            }\n\n            // point\n            this.ctx.fillStyle = this.overPoint ? this.selColor : this.fnColor;\n            this.ctx.beginPath();\n            var radius = this.overPoint ? 4 : 2;\n            this.ctx.arc(x, y, radius, 0, 2 * Math.PI, false);\n            this.ctx.fill();\n\n            this.ctx.restore();\n            this.overPoint = false;\n        }\n\n        // Actions when user moves around on HSV color map\n    }, {\n        key: 'onMouseMove',\n        value: function onMouseMove(event) {\n            var x = event.offsetX;\n            var y = event.offsetY;\n\n            this.value.x = this.range / this.width * x - (this.range - this.max);\n            this.value.y = (this.range / this.height * y - (this.range - this.max)) * -1;\n\n            // fire 'changed'\n            this.trigger('changed', this.value);\n            this.overPoint = true;\n        }\n    }, {\n        key: 'setValue',\n        value: function setValue(pos) {\n            this.value = new _typesVector2['default'](pos);\n        }\n    }]);\n\n    return Vec2Picker;\n})(_Picker3['default']);\n\nexports['default'] = Vec2Picker;\nmodule.exports = exports['default'];\n\n},{\"./Picker\":143,\"./types/Vector\":150,\"babel-runtime/helpers/class-call-check\":10,\"babel-runtime/helpers/create-class\":11,\"babel-runtime/helpers/get\":12,\"babel-runtime/helpers/inherits\":13,\"babel-runtime/helpers/interop-require-default\":14}],145:[function(_dereq_,module,exports){\n'use strict';\n\nvar _get = _dereq_('babel-runtime/helpers/get')['default'];\n\nvar _inherits = _dereq_('babel-runtime/helpers/inherits')['default'];\n\nvar _createClass = _dereq_('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nvar _interopRequireDefault = _dereq_('babel-runtime/helpers/interop-require-default')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar _Picker2 = _dereq_('./Picker');\n\nvar _Picker3 = _interopRequireDefault(_Picker2);\n\nvar _typesVector = _dereq_('./types/Vector');\n\nvar _typesVector2 = _interopRequireDefault(_typesVector);\n\nvar _typesMatrix = _dereq_('./types/Matrix');\n\nvar _typesMatrix2 = _interopRequireDefault(_typesMatrix);\n\nvar Vec3Picker = (function (_Picker) {\n    _inherits(Vec3Picker, _Picker);\n\n    function Vec3Picker(dir, properties) {\n        _classCallCheck(this, Vec3Picker);\n\n        _get(Object.getPrototypeOf(Vec3Picker.prototype), 'constructor', this).call(this, 'ge_vec3picker_', properties);\n\n        this.width = this.width || 200;\n        this.height = this.width || 200;\n        this.scale = 50;\n\n        this.setValue(dir || [0, 0, 1]);\n        this.create();\n\n        this.camera = new _typesMatrix2['default']();\n        this.shapes = [];\n        this.center = [0, 0, 0];\n\n        this.shapes.push({\n            edgeColour: this.dimColor,\n            nodes: [[this.width / 2 - 50, this.height / 2, 100], [this.width / 2 + 50, this.height / 2, 100], [this.width / 2, this.height / 2 - 50, 100], [this.width / 2, this.height / 2 + 50, 100], [this.width / 2, this.height / 2, 50], [this.width / 2, this.height / 2, 150]],\n            edges: [[0, 1], [2, 3], [4, 5]]\n        });\n\n        this.shapes.push({\n            textColour: this.fnColor,\n            nodes: [[this.width / 2 + 68, this.height / 2, 100], [this.width / 2 - 68, this.height / 2, 100], [this.width / 2, this.height / 2 + 68, 100], [this.width / 2, this.height / 2 - 68, 100], [this.width / 2, this.height / 2, 168], [this.width / 2, this.height / 2, 32]],\n            text: ['x', '-x', 'y', '-y', 'z', '-z']\n        });\n\n        this.setCenter(this.width / 2, this.height / 2, 100);\n\n        // Mouse events\n        this.dragOffset = [0, 0];\n        this.overPoint = false;\n    }\n\n    _createClass(Vec3Picker, [{\n        key: 'setCenter',\n        value: function setCenter(x, y, z) {\n            for (var s in this.shapes) {\n                var shape = this.shapes[s];\n\n                for (var n in shape.nodes) {\n                    shape.nodes[n][0] -= x;\n                    shape.nodes[n][1] -= y;\n                    shape.nodes[n][2] -= z;\n                }\n            }\n            this.center = [x, y, z];\n        }\n    }, {\n        key: 'viewFromCamera',\n        value: function viewFromCamera(node) {\n            var A = this.camera.getMult(node);\n            A.add(this.center);\n            return [A.x, this.height - A.y];\n        }\n    }, {\n        key: 'draw',\n        value: function draw() {\n            this.ctx.clearRect(0, 0, this.width, this.height);\n\n            for (var s in this.shapes) {\n                var shape = this.shapes[s];\n                if (shape.edgeColour) {\n                    this.drawShapeEdges(shape);\n                }\n                if (shape.nodeColour) {\n                    this.drawShapeNodes(shape);\n                }\n                if (shape.text) {\n                    this.drawShapeText(shape);\n                }\n            }\n\n            this.drawShapeEdges({\n                edgeColour: this.fnColor,\n                nodes: [[0, 0, 0], this.point],\n                edges: [[0, 1]]\n            });\n\n            this.drawShapeNodes({\n                nodeColour: this.overPoint ? this.selColor : this.fnColor,\n                nodeRadius: this.overPoint ? 4 : 2,\n                nodes: [this.point]\n            });\n        }\n    }, {\n        key: 'drawShapeEdges',\n        value: function drawShapeEdges(shape) {\n            var nodes = shape.nodes;\n\n            this.ctx.strokeStyle = shape.edgeColour;\n            for (var e in shape.edges) {\n                var coord = this.viewFromCamera(nodes[shape.edges[e][0]]);\n                this.ctx.lineWidth = 1;\n                this.ctx.beginPath();\n                this.ctx.moveTo(coord[0], coord[1]);\n                coord = this.viewFromCamera(nodes[shape.edges[e][1]]);\n                this.ctx.lineTo(coord[0], coord[1]);\n                this.ctx.stroke();\n            }\n        }\n    }, {\n        key: 'drawShapeNodes',\n        value: function drawShapeNodes(shape) {\n            var radius = shape.nodeRadius || 4;\n            this.ctx.fillStyle = shape.nodeColour;\n            for (var n in shape.nodes) {\n                var coord = this.viewFromCamera(shape.nodes[n]);\n                this.ctx.beginPath();\n                this.ctx.arc(coord[0], coord[1], radius, 0, 2 * Math.PI, false);\n                this.ctx.fill();\n            }\n        }\n    }, {\n        key: 'drawShapeText',\n        value: function drawShapeText(shape) {\n            this.ctx.fillStyle = shape.textColour;\n            for (var n in shape.nodes) {\n                var coord = this.viewFromCamera(shape.nodes[n]);\n                this.ctx.textBaseline = 'middle';\n                this.ctx.fillText(shape.text[n], coord[0], coord[1]);\n            }\n        }\n    }, {\n        key: 'onMouseDown',\n        value: function onMouseDown(event) {\n            var mouse = [event.offsetX, event.offsetY];\n            this.dragOffset = mouse;\n\n            var pos = new _typesVector2['default'](this.viewFromCamera(this.point));\n            var diff = pos.getSub(mouse);\n            this.overPoint = diff.getLength() < 10;\n\n            _get(Object.getPrototypeOf(Vec3Picker.prototype), 'onMouseDown', this).call(this, event);\n            this.onMouseUpHandler = (0, _Picker2.addEvent)(this.el, 'dblclick', this.onDbClick, this);\n        }\n\n        // Actions when user moves around on HSV color map\n    }, {\n        key: 'onMouseMove',\n        value: function onMouseMove(event) {\n            var x = event.offsetX;\n            var y = event.offsetY;\n\n            var dx = 0.01 * (x - this.dragOffset[0]);\n            var dy = 0.01 * (y - this.dragOffset[1]);\n\n            if (this.overPoint) {\n                var invM = this.camera.getInv();\n                var vel = invM.getMult([dx, -dy, 0.0]);\n                vel.mult(2);\n                this.value.add(vel);\n                this.point = [this.value.x * this.scale, this.value.y * this.scale, this.value.z * this.scale];\n                // fire 'changed'\n                this.trigger('changed', this.value);\n            } else {\n                this.camera.rotateX(dy);\n                this.camera.rotateY(dx);\n            }\n\n            this.dragOffset = [x, y];\n        }\n    }, {\n        key: 'onDbClick',\n        value: function onDbClick(event) {\n            var mouse = new _typesVector2['default']([event.offsetX, event.offsetY]);\n            var axis = {\n                x: [68, 0, 0],\n                neg_x: [-68, 0, 0],\n                y: [0, 68, 100],\n                neg_y: [0, -68, 0]\n            };\n            var selected = '';\n            for (var i in axis) {\n                var pos = new _typesVector2['default'](this.viewFromCamera(axis[i]));\n                var diff = pos.getSub(mouse);\n                if (diff.getLength() < 10) {\n                    selected = i;\n                    break;\n                }\n            }\n            this.camera = new _typesMatrix2['default']();\n\n            if (selected === 'x') {\n                this.camera.rotateY(-1.57079632679);\n            } else if (selected === 'neg_x') {\n                this.camera.rotateY(1.57079632679);\n            } else if (selected === 'y') {\n                this.camera.rotateX(-1.57079632679);\n            } else if (selected === 'neg_y') {\n                this.camera.rotateX(1.57079632679);\n            }\n\n            this.draw();\n        }\n    }, {\n        key: 'destroyEvents',\n        value: function destroyEvents() {\n            _get(Object.getPrototypeOf(Vec3Picker.prototype), 'destroyEvents', this).call(this);\n            (0, _Picker2.removeEvent)(this.el, 'dblclick', this.onDbClick);\n            this.onMouseMoveHandler = null;\n        }\n    }, {\n        key: 'setValue',\n        value: function setValue(dir) {\n            this.value = new _typesVector2['default'](dir);\n            this.point = [this.value.x * this.scale, this.value.y * this.scale, this.value.z * this.scale];\n        }\n    }]);\n\n    return Vec3Picker;\n})(_Picker3['default']);\n\nexports['default'] = Vec3Picker;\nmodule.exports = exports['default'];\n\n},{\"./Picker\":143,\"./types/Matrix\":149,\"./types/Vector\":150,\"babel-runtime/helpers/class-call-check\":10,\"babel-runtime/helpers/create-class\":11,\"babel-runtime/helpers/get\":12,\"babel-runtime/helpers/inherits\":13,\"babel-runtime/helpers/interop-require-default\":14}],146:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = _dereq_('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nvar _interopRequireDefault = _dereq_('babel-runtime/helpers/interop-require-default')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar _ColorConverter = _dereq_('./ColorConverter');\n\nvar _ColorConverter2 = _interopRequireDefault(_ColorConverter);\n\nvar Color = (function () {\n    function Color(color) {\n        _classCallCheck(this, Color);\n\n        this.colors = {};\n        this.set(color);\n    }\n\n    _createClass(Color, [{\n        key: 'set',\n        value: function set(color, type) {\n            // color only full range\n            if (typeof color === 'number') {\n                type = type ? type : 'rgb';\n                this.colors[type] = {};\n                for (var n = 3; n--;) {\n                    var m = type[n] || type.charAt(n); // IE7\n                    this.colors[type][m] = color;\n                }\n            } else if (typeof color === 'string') {\n                var parts = color.replace(/(?:#|\\)|%)/g, '').split('(');\n                if (parts[1]) {\n                    var values = (parts[1] || '').split(/,\\s*/);\n                    type = type ? type : parts[1] ? parts[0].substr(0, 3) : 'rgb';\n                    this.set(values, type);\n                } else {\n                    this.set((0, _ColorConverter.getColorAsRGB)(color), 'rgb');\n                }\n            } else if (color) {\n                if (Array.isArray(color)) {\n                    var m = '';\n                    type = type || 'rgb';\n\n                    this.colors[type] = this.colors[type] || {};\n                    for (var _n = 3; _n--;) {\n                        m = type[_n] || type.charAt(_n); // IE7\n                        var i = color.length >= 3 ? _n : 0;\n                        this.colors[type][m] = parseFloat(color[i]);\n                    }\n\n                    if (color.length === 4) {\n                        this.colors.alpha = parseFloat(color[3]);\n                    }\n                } else if (type) {\n                    for (var _n2 in color) {\n                        this.colors[type][_n2] = (0, _ColorConverter.limitValue)(color[_n2] / (0, _ColorConverter.getValueRanges)(type)[_n2][1], 0, 1) * (0, _ColorConverter.getValueRanges)(type)[_n2][1];\n                    }\n                }\n            }\n\n            if (!type) {\n                return;\n            }\n\n            if (type !== 'rgb') {\n                var convert = _ColorConverter2['default'];\n                this.colors.rgb = convert[type + '2rgb'](this.colors[type]);\n            }\n            this.convert(type);\n            this.colors.hueRGB = _ColorConverter2['default'].hue2RGB(this.colors.hsv.h);\n            this.colors.luminance = (0, _ColorConverter.getLuminance)(this.colors.rgb);\n        }\n    }, {\n        key: 'convert',\n        value: function convert(type) {\n            var convert = _ColorConverter2['default'],\n                ranges = (0, _ColorConverter.getValueRanges)(),\n                exceptions = { hsl: 'hsv', cmyk: 'cmy', rgb: type };\n\n            if (type !== 'alpha') {\n                for (var typ in ranges) {\n                    if (!ranges[typ][typ]) {\n                        // no alpha|HEX\n                        if (type !== typ && typ !== 'XYZ') {\n                            var from = exceptions[typ] || 'rgb';\n                            this.colors[typ] = convert[from + '2' + typ](this.colors[from]);\n                        }\n                    }\n                }\n            }\n        }\n    }, {\n        key: 'get',\n        value: function get(type) {\n            if (type !== 'rgb') {\n                var convert = _ColorConverter2['default'];\n                this.colors[type] = convert['rgb2' + type](this.colors['rgb']);\n                return this.colors[type];\n            } else {\n                return this.colors['rgb'];\n            }\n        }\n    }, {\n        key: 'getString',\n        value: function getString(type) {\n            if (type === 'HEX') {\n                var convert = _ColorConverter2['default'];\n                return convert['rgb2' + type](this.colors['rgb']);\n            } else {\n                var color = this.get(type);\n                var str = type,\n                    m = '';\n                if (type === 'vec') {\n                    str += this.colors.alpha ? 4 : 3;\n                }\n                str += '(';\n                for (var n = 0; n < 3; n++) {\n                    m = type[n] || type.charAt(n); // IE7\n                    if (type === 'vec') {\n                        str += color[m].toFixed(3);\n                    } else {\n                        str += Math.floor(color[m]);\n                    }\n                    if (n !== 2) {\n                        str += ',';\n                    }\n                }\n\n                if (this.colors.alpha) {\n                    str += ',' + this.colors.alpha.toFixed(3);\n                }\n                return str += ')';\n            }\n        }\n    }, {\n        key: 'uniformType',\n        value: function uniformType() {\n            if (this.colors.alpha) {\n                return 'vec4';\n            }\n            return 'vec3';\n        }\n    }, {\n        key: 'uniformValue',\n        value: function uniformValue() {\n            var vec = this.get('vec');\n            var arr = [vec.v, vec.e, vec.c];\n            if (this.colors.alpha) {\n                arr.push(this.colors.alpha);\n            }\n            return arr;\n        }\n    }, {\n        key: 'uniformMethod',\n        value: function uniformMethod(type) {\n            if (this.colors.alpha) {\n                return '4f';\n            }\n            return '3f';\n        }\n    }]);\n\n    return Color;\n})();\n\nexports['default'] = Color;\nmodule.exports = exports['default'];\n\n},{\"./ColorConverter\":147,\"babel-runtime/helpers/class-call-check\":10,\"babel-runtime/helpers/create-class\":11,\"babel-runtime/helpers/interop-require-default\":14}],147:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = _dereq_('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\nexports.limitValue = limitValue;\nexports.getLuminance = getLuminance;\nexports.getColorAsRGB = getColorAsRGB;\nexports.getValueRanges = getValueRanges;\nvar valueRanges = {\n    rgb: { r: [0, 255], g: [0, 255], b: [0, 255] },\n    hsv: { h: [0, 1], s: [0, 1], v: [0, 255] },\n    hsl: { h: [0, 360], s: [0, 100], l: [0, 100] },\n    cmy: { c: [0, 100], m: [0, 100], y: [0, 100] },\n    cmyk: { c: [0, 100], m: [0, 100], y: [0, 100], k: [0, 100] },\n    Lab: { L: [0, 100], a: [-128, 127], b: [-128, 127] },\n    XYZ: { X: [0, 100], Y: [0, 100], Z: [0, 100] },\n    vec: { v: [0, 1], e: [0, 1], c: [0, 1] },\n    alpha: { alpha: [0, 1] },\n    HEX: { HEX: [0, 16777215] } // maybe we don't need this\n};\n\n// http://www.brucelindbloom.com/index.html?Eqn_RGB_XYZ_Matrix.html for more\nvar XYZMatrix = { // Observer = 2 (CIE 1931), Illuminant = D65\n    X: [0.4124564, 0.3575761, 0.1804375],\n    Y: [0.2126729, 0.7151522, 0.0721750],\n    Z: [0.0193339, 0.1191920, 0.9503041],\n    R: [3.2404542, -1.5371385, -0.4985314],\n    G: [-0.9692660, 1.8760108, 0.0415560],\n    B: [0.0556434, -0.2040259, 1.0572252]\n};\n\nvar XYZReference = {\n    X: XYZMatrix.X[0] + XYZMatrix.X[1] + XYZMatrix.X[2],\n    Y: XYZMatrix.Y[0] + XYZMatrix.Y[1] + XYZMatrix.Y[2],\n    Z: XYZMatrix.Z[0] + XYZMatrix.Z[1] + XYZMatrix.Z[2]\n};\n\nvar luminance = { r: 0.2126, g: 0.7152, b: 0.0722 }; // W3C 2.0\n\nvar _colors;\n\nvar ColorConverter = (function () {\n    function ColorConverter() {\n        _classCallCheck(this, ColorConverter);\n    }\n\n    _createClass(ColorConverter, null, [{\n        key: 'vec2rgb',\n\n        // ------------------------ VEC ------------------------ //\n        value: function vec2rgb(vec) {\n            return {\n                r: vec.v * valueRanges['rgb']['r'][1],\n                g: vec.e * valueRanges['rgb']['g'][1],\n                b: vec.c * valueRanges['rgb']['b'][1]\n            };\n        }\n    }, {\n        key: 'rgb2vec',\n        value: function rgb2vec(rgb) {\n            return {\n                v: rgb.r / valueRanges['rgb']['r'][1],\n                e: rgb.g / valueRanges['rgb']['g'][1],\n                c: rgb.b / valueRanges['rgb']['b'][1]\n            };\n        }\n\n        // ------------------------ HEX ------------------------ //\n\n    }, {\n        key: 'RGB2HEX',\n        value: function RGB2HEX(rgb) {\n            return ((rgb.r < 16 ? '0' : '') + rgb.r.toString(16) + (rgb.g < 16 ? '0' : '') + rgb.g.toString(16) + (rgb.b < 16 ? '0' : '') + rgb.b.toString(16)).toUpperCase();\n        }\n    }, {\n        key: 'HEX2rgb',\n        value: function HEX2rgb(HEX) {\n            HEX = HEX.split(''); // IE7\n            return {\n                r: parseInt(HEX[0] + HEX[HEX[3] ? 1 : 0], 16) / 255,\n                g: parseInt(HEX[HEX[3] ? 2 : 1] + (HEX[3] || HEX[1]), 16) / 255,\n                b: parseInt((HEX[4] || HEX[2]) + (HEX[5] || HEX[2]), 16) / 255\n            };\n        }\n\n        // ------------------------ HUE ------------------------ //\n\n    }, {\n        key: 'hue2RGB',\n        value: function hue2RGB(hue) {\n            var h = hue * 6,\n\n            // mod = ~~h % 6, // Math.floor(h) -> faster in most browsers\n            mod = Math.floor(h),\n                i = h === 6 ? 0 : h - mod;\n            return {\n                r: Math.round([1, 1 - i, 0, 0, i, 1][mod] * 255),\n                g: Math.round([i, 1, 1, 1 - i, 0, 0][mod] * 255),\n                b: Math.round([0, 0, i, 1, 1, 1 - i][mod] * 255)\n            };\n        }\n\n        // ------------------------ HSV ------------------------ //\n\n    }, {\n        key: 'rgb2hsv',\n        value: function rgb2hsv(rgb) {\n            // faster\n            var r = rgb.r,\n                g = rgb.g,\n                b = rgb.b,\n                k = 0,\n                chroma,\n                min,\n                s;\n\n            if (g < b) {\n                g = b + (b = g, 0);\n                k = -1;\n            }\n            min = b;\n            if (r < g) {\n                r = g + (g = r, 0);\n                k = -2 / 6 - k;\n                min = Math.min(g, b); // g < b ? g : b; ???\n            }\n            chroma = r - min;\n            s = r ? chroma / r : 0;\n            return {\n                h: s < 1e-15 ? _colors && _colors.hsl && _colors.hsl.h || 0 : chroma ? Math.abs(k + (g - b) / (6 * chroma)) : 0,\n                s: r ? chroma / r : _colors && _colors.hsv && _colors.hsv.s || 0, // ??_colors.hsv.s || 0\n                v: r\n            };\n        }\n    }, {\n        key: 'hsv2rgb',\n        value: function hsv2rgb(hsv) {\n            var h = hsv.h * 6,\n                s = hsv.s,\n                v = hsv.v,\n\n            // i = ~~h, // Math.floor(h) -> faster in most browsers\n            i = Math.floor(h),\n                f = h - i,\n                p = v * (1 - s),\n                q = v * (1 - f * s),\n                t = v * (1 - (1 - f) * s),\n                mod = i % 6;\n\n            return {\n                r: [v, q, p, p, t, v][mod],\n                g: [t, v, v, q, p, p][mod],\n                b: [p, p, t, v, v, q][mod]\n            };\n        }\n\n        // ------------------------ HSL ------------------------ //\n\n    }, {\n        key: 'hsv2hsl',\n        value: function hsv2hsl(hsv) {\n            var l = (2 - hsv.s) * hsv.v,\n                s = hsv.s * hsv.v;\n\n            s = !hsv.s ? 0 : l < 1 ? l ? s / l : 0 : s / (2 - l);\n\n            return {\n                h: hsv.h,\n                s: !hsv.v && !s ? _colors && _colors.hsl && _colors.hsl.s || 0 : s, // ???\n                l: l / 2\n            };\n        }\n    }, {\n        key: 'rgb2hsl',\n        value: function rgb2hsl(rgb, dependent) {\n            // not used in Color\n            var hsv = ColorConverter.rgb2hsv(rgb);\n\n            return ColorConverter.hsv2hsl(dependent ? hsv : _colors.hsv = hsv);\n        }\n    }, {\n        key: 'hsl2rgb',\n        value: function hsl2rgb(hsl) {\n            var h = hsl.h * 6,\n                s = hsl.s,\n                l = hsl.l,\n                v = l < 0.5 ? l * (1 + s) : l + s - s * l,\n                m = l + l - v,\n                sv = v ? (v - m) / v : 0,\n\n            // sextant = ~~h, // Math.floor(h) -> faster in most browsers\n            sextant = Math.floor(h),\n                fract = h - sextant,\n                vsf = v * sv * fract,\n                t = m + vsf,\n                q = v - vsf,\n                mod = sextant % 6;\n\n            return {\n                r: [v, q, m, m, t, v][mod],\n                g: [t, v, v, q, m, m][mod],\n                b: [m, m, t, v, v, q][mod]\n            };\n        }\n\n        // ------------------------ CMYK ------------------------ //\n        // Quote from Wikipedia:\n        // 'Since RGB and CMYK spaces are both device-dependent spaces, there is no\n        // simple or general conversion formula that converts between them.\n        // Conversions are generally done through color management systems, using\n        // color profiles that describe the spaces being converted. Nevertheless, the\n        // conversions cannot be exact, since these spaces have very different gamuts.'\n        // Translation: the following are just simple RGB to CMY(K) and visa versa conversion functions.\n\n    }, {\n        key: 'rgb2cmy',\n        value: function rgb2cmy(rgb) {\n            return {\n                c: 1 - rgb.r,\n                m: 1 - rgb.g,\n                y: 1 - rgb.b\n            };\n        }\n    }, {\n        key: 'cmy2cmyk',\n        value: function cmy2cmyk(cmy) {\n            var k = Math.min(Math.min(cmy.c, cmy.m), cmy.y),\n                t = 1 - k || 1e-20;\n\n            return { // regular\n                c: (cmy.c - k) / t,\n                m: (cmy.m - k) / t,\n                y: (cmy.y - k) / t,\n                k: k\n            };\n        }\n    }, {\n        key: 'cmyk2cmy',\n        value: function cmyk2cmy(cmyk) {\n            var k = cmyk.k;\n\n            return { // regular\n                c: cmyk.c * (1 - k) + k,\n                m: cmyk.m * (1 - k) + k,\n                y: cmyk.y * (1 - k) + k\n            };\n        }\n    }, {\n        key: 'cmy2rgb',\n        value: function cmy2rgb(cmy) {\n            return {\n                r: 1 - cmy.c,\n                g: 1 - cmy.m,\n                b: 1 - cmy.y\n            };\n        }\n    }, {\n        key: 'rgb2cmyk',\n        value: function rgb2cmyk(rgb) {\n            var cmy = ColorConverter.rgb2cmy(rgb); // doppelt??\n            return ColorConverter.cmy2cmyk(cmy);\n        }\n    }, {\n        key: 'cmyk2rgb',\n        value: function cmyk2rgb(cmyk) {\n            var cmy = ColorConverter.cmyk2cmy(cmyk); // doppelt??\n            return ColorConverter.cmy2rgb(cmy);\n        }\n\n        // ------------------------ LAB ------------------------ //\n\n    }, {\n        key: 'XYZ2rgb',\n        value: function XYZ2rgb(XYZ) {\n            var M = XYZMatrix,\n                X = XYZ.X,\n                Y = XYZ.Y,\n                Z = XYZ.Z,\n                r = X * M.R[0] + Y * M.R[1] + Z * M.R[2],\n                g = X * M.G[0] + Y * M.G[1] + Z * M.G[2],\n                b = X * M.B[0] + Y * M.B[1] + Z * M.B[2],\n                N = 1 / 2.4;\n\n            M = 0.0031308;\n\n            r = r > M ? 1.055 * Math.pow(r, N) - 0.055 : 12.92 * r;\n            g = g > M ? 1.055 * Math.pow(g, N) - 0.055 : 12.92 * g;\n            b = b > M ? 1.055 * Math.pow(b, N) - 0.055 : 12.92 * b;\n\n            return {\n                r: limitValue(r, 0, 1),\n                g: limitValue(g, 0, 1),\n                b: limitValue(b, 0, 1)\n            };\n        }\n    }, {\n        key: 'rgb2XYZ',\n        value: function rgb2XYZ(rgb) {\n            var M = XYZMatrix,\n                r = rgb.r,\n                g = rgb.g,\n                b = rgb.b,\n                N = 0.04045;\n\n            r = r > N ? Math.pow((r + 0.055) / 1.055, 2.4) : r / 12.92;\n            g = g > N ? Math.pow((g + 0.055) / 1.055, 2.4) : g / 12.92;\n            b = b > N ? Math.pow((b + 0.055) / 1.055, 2.4) : b / 12.92;\n\n            return {\n                X: r * M.X[0] + g * M.X[1] + b * M.X[2],\n                Y: r * M.Y[0] + g * M.Y[1] + b * M.Y[2],\n                Z: r * M.Z[0] + g * M.Z[1] + b * M.Z[2]\n            };\n        }\n    }, {\n        key: 'XYZ2Lab',\n        value: function XYZ2Lab(XYZ) {\n            var R = XYZReference,\n                X = XYZ.X / R.X,\n                Y = XYZ.Y / R.Y,\n                Z = XYZ.Z / R.Z,\n                N = 16 / 116,\n                M = 1 / 3,\n                K = 0.008856,\n                L = 7.787037;\n\n            X = X > K ? Math.pow(X, M) : L * X + N;\n            Y = Y > K ? Math.pow(Y, M) : L * Y + N;\n            Z = Z > K ? Math.pow(Z, M) : L * Z + N;\n\n            return {\n                L: 116 * Y - 16,\n                a: 500 * (X - Y),\n                b: 200 * (Y - Z)\n            };\n        }\n    }, {\n        key: 'Lab2XYZ',\n        value: function Lab2XYZ(Lab) {\n            var R = XYZReference,\n                Y = (Lab.L + 16) / 116,\n                X = Lab.a / 500 + Y,\n                Z = Y - Lab.b / 200,\n                X3 = Math.pow(X, 3),\n                Y3 = Math.pow(Y, 3),\n                Z3 = Math.pow(Z, 3),\n                N = 16 / 116,\n                K = 0.008856,\n                L = 7.787037;\n\n            return {\n                X: (X3 > K ? X3 : (X - N) / L) * R.X,\n                Y: (Y3 > K ? Y3 : (Y - N) / L) * R.Y,\n                Z: (Z3 > K ? Z3 : (Z - N) / L) * R.Z\n            };\n        }\n    }, {\n        key: 'rgb2Lab',\n        value: function rgb2Lab(rgb) {\n            var XYZ = ColorConverter.rgb2XYZ(rgb);\n\n            return ColorConverter.XYZ2Lab(XYZ);\n        }\n    }, {\n        key: 'Lab2rgb',\n        value: function Lab2rgb(Lab) {\n            var XYZ = ColorConverter.Lab2XYZ(Lab);\n\n            return ColorConverter.XYZ2rgb(XYZ);\n        }\n    }]);\n\n    return ColorConverter;\n})();\n\nexports['default'] = ColorConverter;\n\nfunction limitValue(value, min, max) {\n    // return Math.max(min, Math.min(max, value)); // faster??\n    return value > max ? max : value < min ? min : value;\n}\n\nfunction getLuminance(rgb, normalized) {\n    var div = normalized ? 1 : 255,\n        RGB = [rgb.r / div, rgb.g / div, rgb.b / div];\n\n    for (var i = RGB.length; i--;) {\n        RGB[i] = RGB[i] <= 0.03928 ? RGB[i] / 12.92 : Math.pow((RGB[i] + 0.055) / 1.055, 2.4);\n    }\n    return luminance.r * RGB[0] + luminance.g * RGB[1] + luminance.b * RGB[2];\n}\n\nfunction getColorAsRGB(color) {\n    // Create a test element to apply a CSS color and retrieve\n    // a normalized value from.\n    var test = document.createElement('div');\n    test.style.backgroundColor = color;\n\n    // Chrome requires the element to be in DOM for styles to be computed.\n    document.body.appendChild(test);\n\n    // Get the computed style from the browser, in the format of\n    // rgb(x, x, x)\n    var normalized = window.getComputedStyle(test).backgroundColor;\n\n    // In certain cases getComputedStyle() may return\n    // 'transparent' as a value, which is useless(?) for the current\n    // color picker. According to specifications, transparent\n    // is a black with 0 alpha - rgba(0, 0, 0, 0) - but because\n    // the picker does not currently handle alpha, we return the\n    // black value.\n    if (normalized === 'transparent') {\n        normalized = 'rgb(0, 0, 0)';\n    }\n\n    // Garbage collection\n    test.parentNode.removeChild(test);\n\n    return normalized;\n}\n\nfunction getValueRanges(type) {\n    if (!type) {\n        return valueRanges;\n    } else {\n        return valueRanges[type];\n    }\n}\n\n},{\"babel-runtime/helpers/class-call-check\":10,\"babel-runtime/helpers/create-class\":11}],148:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = _dereq_('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar Float = (function () {\n    function Float(value) {\n        _classCallCheck(this, Float);\n\n        this.value = value;\n    }\n\n    _createClass(Float, [{\n        key: 'getString',\n        value: function getString() {\n            return this.value.toFixed(3);\n        }\n    }, {\n        key: 'uniformType',\n        value: function uniformType() {\n            return 'float';\n        }\n    }, {\n        key: 'uniformValue',\n        value: function uniformValue() {\n            return [this.value];\n        }\n    }, {\n        key: 'uniformMethod',\n        value: function uniformMethod() {\n            return '1f';\n        }\n    }]);\n\n    return Float;\n})();\n\nexports['default'] = Float;\nmodule.exports = exports['default'];\n\n},{\"babel-runtime/helpers/class-call-check\":10,\"babel-runtime/helpers/create-class\":11}],149:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = _dereq_('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nvar _interopRequireDefault = _dereq_('babel-runtime/helpers/interop-require-default')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar _Vector = _dereq_('./Vector');\n\nvar _Vector2 = _interopRequireDefault(_Vector);\n\n// TODO:\n//      - generalize this for mat2, mat3 and mat4\n\nvar Matrix = (function () {\n    function Matrix(m, type) {\n        _classCallCheck(this, Matrix);\n\n        this.dim = 3;\n        this.value = [[1, 0, 0], [0, 1, 0], [0, 0, 1]];\n        if (m) {\n            this.set(m, type);\n        }\n    }\n\n    _createClass(Matrix, [{\n        key: 'set',\n        value: function set(m, type) {\n            if (m.value[0][0]) {\n                this.value = m.value;\n                this.dim = m.dim;\n            } else if (m[0][0]) {\n                this.value = m;\n            }\n        }\n    }, {\n        key: 'rotateX',\n        value: function rotateX(theta) {\n            var c = Math.cos(theta);\n            var s = Math.sin(theta);\n            var T = [[1, 0, 0], [0, c, -s], [0, s, c]];\n\n            this.value = this.getTransform(T);\n        }\n    }, {\n        key: 'rotateY',\n        value: function rotateY(theta) {\n            var c = Math.cos(theta);\n            var s = Math.sin(theta);\n            var T = [[c, 0, s], [0, 1, 0], [-s, 0, c]];\n\n            this.value = this.getTransform(T);\n        }\n    }, {\n        key: 'getMult',\n        value: function getMult(v) {\n            if (v[0][0] || v.value && v.value[0][0]) {\n                // TODO: what If v is a matrix\n                console.log('TODO: what If v is a matrix');\n            } else {\n                // If v is a vector\n                var A = new _Vector2['default'](v);\n                var B = [];\n                for (var i = 0; i < A.dim; i++) {\n                    B.push(A.value[0] * this.value[i][0] + A.value[1] * this.value[i][1] + A.value[2] * this.value[i][2]);\n                }\n                return new _Vector2['default'](B);\n            }\n        }\n    }, {\n        key: 'getTransform',\n        value: function getTransform(m) {\n            var newMatrix = [];\n            for (var row in m) {\n                var t = m[row];\n                var newRow = [];\n                newRow.push(t[0] * this.value[0][0] + t[1] * this.value[1][0] + t[2] * this.value[2][0]);\n                newRow.push(t[0] * this.value[0][1] + t[1] * this.value[1][1] + t[2] * this.value[2][1]);\n                newRow.push(t[0] * this.value[0][2] + t[1] * this.value[1][2] + t[2] * this.value[2][2]);\n                newMatrix.push(newRow);\n            }\n            return newMatrix;\n        }\n    }, {\n        key: 'getInv',\n        value: function getInv() {\n            var M = new Matrix();\n            var determinant = this.value[0][0] * (this.value[1][1] * this.value[2][2] - this.value[2][1] * this.value[1][2]) - this.value[0][1] * (this.value[1][0] * this.value[2][2] - this.value[1][2] * this.value[2][0]) + this.value[0][2] * (this.value[1][0] * this.value[2][1] - this.value[1][1] * this.value[2][0]);\n            var invdet = 1 / determinant;\n            M.value[0][0] = (this.value[1][1] * this.value[2][2] - this.value[2][1] * this.value[1][2]) * invdet;\n            M.value[0][1] = -(this.value[0][1] * this.value[2][2] - this.value[0][2] * this.value[2][1]) * invdet;\n            M.value[0][2] = (this.value[0][1] * this.value[1][2] - this.value[0][2] * this.value[1][1]) * invdet;\n            M.value[1][0] = -(this.value[1][0] * this.value[2][2] - this.value[1][2] * this.value[2][0]) * invdet;\n            M.value[1][1] = (this.value[0][0] * this.value[2][2] - this.value[0][2] * this.value[2][0]) * invdet;\n            M.value[1][2] = -(this.value[0][0] * this.value[1][2] - this.value[1][0] * this.value[0][2]) * invdet;\n            M.value[2][0] = (this.value[1][0] * this.value[2][1] - this.value[2][0] * this.value[1][1]) * invdet;\n            M.value[2][1] = -(this.value[0][0] * this.value[2][1] - this.value[2][0] * this.value[0][1]) * invdet;\n            M.value[2][2] = (this.value[0][0] * this.value[1][1] - this.value[1][0] * this.value[0][1]) * invdet;\n            return M;\n        }\n    }]);\n\n    return Matrix;\n})();\n\nexports['default'] = Matrix;\nmodule.exports = exports['default'];\n\n},{\"./Vector\":150,\"babel-runtime/helpers/class-call-check\":10,\"babel-runtime/helpers/create-class\":11,\"babel-runtime/helpers/interop-require-default\":14}],150:[function(_dereq_,module,exports){\n'use strict';\n\nvar _createClass = _dereq_('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = _dereq_('babel-runtime/helpers/class-call-check')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar Vector = (function () {\n    function Vector(vec, type) {\n        _classCallCheck(this, Vector);\n\n        this.value = [0, 0];\n        this.dim = 2;\n        this.set(vec, type);\n    }\n\n    _createClass(Vector, [{\n        key: 'set',\n        value: function set(vec, type) {\n            if (typeof vec === 'number') {\n                type = type || 'vec2';\n                this.set([vec], type);\n            } else if (typeof vec === 'string') {\n                var parts = vec.replace(/(?:#|\\)|\\]|%)/g, '').split('(');\n                var strValues = (parts[1] || parts[0].replace(/(\\[)/g, '')).split(/,\\s*/);\n                type = type || (parts[1] ? parts[0].substr(0, 4) : 'vec' + strValues.length);\n                var values = [];\n                for (var i in strValues) {\n                    values.push(parseFloat(strValues[i]));\n                }\n                this.set(values, type);\n            } else if (vec) {\n                if (Array.isArray(vec)) {\n                    this.value = [];\n                    this.value.length = 0;\n                    this.dim = type ? Number(type.substr(3, 4)) : vec.length;\n                    var filler = vec.length === 1 ? vec[0] : 0;\n                    for (var i = 0; i < this.dim; i++) {\n                        this.value.push(vec[i] || filler);\n                    }\n                } else if (vec.dim) {\n                    this.value = vec.value;\n                    this.dim = vec.dim;\n                }\n            }\n        }\n    }, {\n        key: 'getString',\n        value: function getString(type) {\n            type = type || 'vec' + this.dim;\n\n            var len = this.dim;\n            var str = '';\n            var head = type + '(';\n            var end = ')';\n\n            if (type === 'array') {\n                head = '[';\n                end = ']';\n                len = this.dim;\n            } else {\n                len = Number(type.substr(3, 4));\n            }\n\n            str = head;\n            for (var i = 0; i < len; i++) {\n                str += this.value[i].toFixed(3);\n                if (i !== len - 1) {\n                    str += ',';\n                }\n            }\n            return str += end;\n        }\n    }, {\n        key: 'uniformType',\n        value: function uniformType() {\n            return 'vec' + this.dim;\n        }\n    }, {\n        key: 'uniformValue',\n        value: function uniformValue() {\n            var arr = [];\n            for (var i = 0; i < this.dim; i++) {\n                arr.push(this.value[i]);\n            }\n            return arr;\n        }\n    }, {\n        key: 'uniformMethod',\n        value: function uniformMethod() {\n            return this.dim + 'f';\n        }\n\n        // VECTOR OPERATIONS\n\n    }, {\n        key: 'add',\n        value: function add(v) {\n            if (typeof v === 'number') {\n                for (var i = 0; i < this.dim; i++) {\n                    this.value[i] = this.value[i] + v;\n                }\n            } else {\n                var A = new Vector(v);\n                var lim = Math.min(this.dim, A.dim);\n                for (var i = 0; i < lim; i++) {\n                    this.value[i] = this.value[i] + A.value[i];\n                }\n            }\n        }\n    }, {\n        key: 'sub',\n        value: function sub(v) {\n            if (typeof v === 'number') {\n                for (var i = 0; i < this.dim; i++) {\n                    this.value[i] = this.value[i] - v;\n                }\n            } else {\n                var A = new Vector(v);\n                var lim = Math.min(this.dim, A.dim);\n                for (var i = 0; i < lim; i++) {\n                    this.value[i] = this.value[i] - A.value[i];\n                }\n            }\n        }\n    }, {\n        key: 'mult',\n        value: function mult(v) {\n            if (typeof v === 'number') {\n                // Mulitply by scalar\n                for (var i = 0; i < this.dim; i++) {\n                    this.value[i] = this.value[i] * v;\n                }\n            } else {\n                // Multiply two vectors\n                var A = new Vector(v);\n                var lim = Math.min(this.dim, A.dim);\n                for (var i = 0; i < lim; i++) {\n                    this.value[i] = this.value[i] * A.value[i];\n                }\n            }\n        }\n    }, {\n        key: 'div',\n        value: function div(v) {\n            if (typeof v === 'number') {\n                // Mulitply by scalar\n                for (var i = 0; i < this.dim; i++) {\n                    this.value[i] = this.value[i] / v;\n                }\n            } else {\n                // Multiply two vectors\n                var A = new Vector(v);\n                var lim = Math.min(this.dim, A.dim);\n                for (var i = 0; i < lim; i++) {\n                    this.value[i] = this.value[i] / A.value[i];\n                }\n            }\n        }\n    }, {\n        key: 'normalize',\n        value: function normalize() {\n            var l = this.getLength();\n            this.div(l);\n        }\n    }, {\n        key: 'getAdd',\n        value: function getAdd(v) {\n            var A = new Vector(this);\n            A.add(v);\n            return A;\n        }\n    }, {\n        key: 'getSub',\n        value: function getSub(v) {\n            var A = new Vector(this);\n            A.sub(v);\n            return A;\n        }\n    }, {\n        key: 'getMult',\n        value: function getMult(v) {\n            var A = new Vector(this);\n            A.mult(v);\n            return A;\n        }\n    }, {\n        key: 'getDiv',\n        value: function getDiv(v) {\n            var A = new Vector(this);\n            A.div(v);\n            return A;\n        }\n    }, {\n        key: 'getLengthSq',\n        value: function getLengthSq() {\n            if (this.dim === 2) {\n                return this.value[0] * this.value[0] + this.value[1] * this.value[1];\n            } else {\n                return this.value[0] * this.value[0] + this.value[1] * this.value[1] + this.value[2] * this.value[2];\n            }\n        }\n    }, {\n        key: 'getLength',\n        value: function getLength() {\n            return Math.sqrt(this.getLengthSq());\n        }\n    }, {\n        key: 'x',\n        set: function set(v) {\n            this.value[0] = v;\n        },\n        get: function get() {\n            return this.value[0] || 0.0;\n        }\n    }, {\n        key: 'y',\n        set: function set(v) {\n            this.value[1] = v;\n        },\n        get: function get() {\n            return this.value[1] || 0.0;\n        }\n    }, {\n        key: 'z',\n        set: function set(v) {\n            if (this.dim < 3) {\n                while (this.dim < 3) {\n                    this.value.push(0);\n                }\n                this.dim = 3;\n            }\n            this.value[2] = v;\n        },\n        get: function get() {\n            return this.value[2] || 0.0;\n        }\n    }, {\n        key: 'w',\n        set: function set(v) {\n            if (this.dim < 4) {\n                while (this.dim < 4) {\n                    this.value.push(0);\n                }\n                this.dim = 4;\n            }\n            this.value[3] = v;\n        },\n        get: function get() {\n            return this.value[3] || 0.0;\n        }\n    }]);\n\n    return Vector;\n})();\n\nexports['default'] = Vector;\nmodule.exports = exports['default'];\n\n},{\"babel-runtime/helpers/class-call-check\":10,\"babel-runtime/helpers/create-class\":11}],151:[function(_dereq_,module,exports){\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\n\"use strict\";\n\nvar saveAs = saveAs || (function (view) {\n  \"use strict\";if (typeof navigator !== \"undefined\" && /MSIE [1-9]\\./.test(navigator.userAgent)) {\n    return;\n  }var doc = view.document,\n      get_URL = function get_URL() {\n    return view.URL || view.webkitURL || view;\n  },\n      save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\"),\n      can_use_save_link = (\"download\" in save_link),\n      click = function click(node) {\n    var event = new MouseEvent(\"click\");node.dispatchEvent(event);\n  },\n      is_safari = /Version\\/[\\d\\.]+.*Safari/.test(navigator.userAgent),\n      webkit_req_fs = view.webkitRequestFileSystem,\n      req_fs = view.requestFileSystem || webkit_req_fs || view.mozRequestFileSystem,\n      throw_outside = function throw_outside(ex) {\n    (view.setImmediate || view.setTimeout)(function () {\n      throw ex;\n    }, 0);\n  },\n      force_saveable_type = \"application/octet-stream\",\n      fs_min_size = 0,\n      arbitrary_revoke_timeout = 500,\n      revoke = function revoke(file) {\n    var revoker = function revoker() {\n      if (typeof file === \"string\") {\n        get_URL().revokeObjectURL(file);\n      } else {\n        file.remove();\n      }\n    };if (view.chrome) {\n      revoker();\n    } else {\n      setTimeout(revoker, arbitrary_revoke_timeout);\n    }\n  },\n      dispatch = function dispatch(filesaver, event_types, event) {\n    event_types = [].concat(event_types);var i = event_types.length;while (i--) {\n      var listener = filesaver[\"on\" + event_types[i]];if (typeof listener === \"function\") {\n        try {\n          listener.call(filesaver, event || filesaver);\n        } catch (ex) {\n          throw_outside(ex);\n        }\n      }\n    }\n  },\n      auto_bom = function auto_bom(blob) {\n    if (/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n      return new Blob([\"\", blob], { type: blob.type });\n    }return blob;\n  },\n      FileSaver = function FileSaver(blob, name, no_auto_bom) {\n    if (!no_auto_bom) {\n      blob = auto_bom(blob);\n    }var filesaver = this,\n        type = blob.type,\n        blob_changed = false,\n        object_url,\n        target_view,\n        dispatch_all = function dispatch_all() {\n      dispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\n    },\n        fs_error = function fs_error() {\n      if (target_view && is_safari && typeof FileReader !== \"undefined\") {\n        var reader = new FileReader();reader.onloadend = function () {\n          var base64Data = reader.result;target_view.location.href = \"data:attachment/file\" + base64Data.slice(base64Data.search(/[,;]/));filesaver.readyState = filesaver.DONE;dispatch_all();\n        };reader.readAsDataURL(blob);filesaver.readyState = filesaver.INIT;return;\n      }if (blob_changed || !object_url) {\n        object_url = get_URL().createObjectURL(blob);\n      }if (target_view) {\n        target_view.location.href = object_url;\n      } else {\n        var new_tab = view.open(object_url, \"_blank\");if (new_tab == undefined && is_safari) {\n          view.location.href = object_url;\n        }\n      }filesaver.readyState = filesaver.DONE;dispatch_all();revoke(object_url);\n    },\n        abortable = function abortable(func) {\n      return function () {\n        if (filesaver.readyState !== filesaver.DONE) {\n          return func.apply(this, arguments);\n        }\n      };\n    },\n        create_if_not_found = { create: true, exclusive: false },\n        slice;filesaver.readyState = filesaver.INIT;if (!name) {\n      name = \"download\";\n    }if (can_use_save_link) {\n      object_url = get_URL().createObjectURL(blob);setTimeout(function () {\n        save_link.href = object_url;save_link.download = name;click(save_link);dispatch_all();revoke(object_url);filesaver.readyState = filesaver.DONE;\n      });return;\n    }if (view.chrome && type && type !== force_saveable_type) {\n      slice = blob.slice || blob.webkitSlice;blob = slice.call(blob, 0, blob.size, force_saveable_type);blob_changed = true;\n    }if (webkit_req_fs && name !== \"download\") {\n      name += \".download\";\n    }if (type === force_saveable_type || webkit_req_fs) {\n      target_view = view;\n    }if (!req_fs) {\n      fs_error();return;\n    }fs_min_size += blob.size;req_fs(view.TEMPORARY, fs_min_size, abortable(function (fs) {\n      fs.root.getDirectory(\"saved\", create_if_not_found, abortable(function (dir) {\n        var save = function save() {\n          dir.getFile(name, create_if_not_found, abortable(function (file) {\n            file.createWriter(abortable(function (writer) {\n              writer.onwriteend = function (event) {\n                target_view.location.href = file.toURL();filesaver.readyState = filesaver.DONE;dispatch(filesaver, \"writeend\", event);revoke(file);\n              };writer.onerror = function () {\n                var error = writer.error;if (error.code !== error.ABORT_ERR) {\n                  fs_error();\n                }\n              };\"writestart progress write abort\".split(\" \").forEach(function (event) {\n                writer[\"on\" + event] = filesaver[\"on\" + event];\n              });writer.write(blob);filesaver.abort = function () {\n                writer.abort();filesaver.readyState = filesaver.DONE;\n              };filesaver.readyState = filesaver.WRITING;\n            }), fs_error);\n          }), fs_error);\n        };dir.getFile(name, { create: false }, abortable(function (file) {\n          file.remove();save();\n        }), abortable(function (ex) {\n          if (ex.code === ex.NOT_FOUND_ERR) {\n            save();\n          } else {\n            fs_error();\n          }\n        }));\n      }), fs_error);\n    }), fs_error);\n  },\n      FS_proto = FileSaver.prototype,\n      saveAs = function saveAs(blob, name, no_auto_bom) {\n    return new FileSaver(blob, name, no_auto_bom);\n  };if (typeof navigator !== \"undefined\" && navigator.msSaveOrOpenBlob) {\n    return function (blob, name, no_auto_bom) {\n      if (!no_auto_bom) {\n        blob = auto_bom(blob);\n      }return navigator.msSaveOrOpenBlob(blob, name || \"download\");\n    };\n  }FS_proto.abort = function () {\n    var filesaver = this;filesaver.readyState = filesaver.DONE;dispatch(filesaver, \"abort\");\n  };FS_proto.readyState = FS_proto.INIT = 0;FS_proto.WRITING = 1;FS_proto.DONE = 2;FS_proto.error = FS_proto.onwritestart = FS_proto.onprogress = FS_proto.onwrite = FS_proto.onabort = FS_proto.onerror = FS_proto.onwriteend = null;return saveAs;\n})(typeof self !== \"undefined\" && self || typeof window !== \"undefined\" && window || undefined.content);if (typeof module !== \"undefined\" && module.exports) {\n  module.exports.saveAs = saveAs;\n} else if (typeof define !== \"undefined\" && define !== null && define.amd != null) {\n  define([], function () {\n    return saveAs;\n  });\n}\n\n},{}]},{},[119])(119)\n});\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYmFiZWwtcnVudGltZS9jb3JlLWpzL2dldC1pdGVyYXRvci5qcyIsIm5vZGVfbW9kdWxlcy9iYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2Fzc2lnbi5qcyIsIm5vZGVfbW9kdWxlcy9iYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2NyZWF0ZS5qcyIsIm5vZGVfbW9kdWxlcy9iYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2RlZmluZS1wcm9wZXJ0eS5qcyIsIm5vZGVfbW9kdWxlcy9iYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyIsIm5vZGVfbW9kdWxlcy9iYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMuanMiLCJub2RlX21vZHVsZXMvYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9zZXQtcHJvdG90eXBlLW9mLmpzIiwibm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlLmpzIiwibm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9zZXQuanMiLCJub2RlX21vZHVsZXMvYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2suanMiLCJub2RlX21vZHVsZXMvYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcy5qcyIsIm5vZGVfbW9kdWxlcy9iYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0LmpzIiwibm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cy5qcyIsIm5vZGVfbW9kdWxlcy9iYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQuanMiLCJub2RlX21vZHVsZXMvY29kZW1pcnJvci9hZGRvbi9jb21tZW50L2NvbW1lbnQuanMiLCJub2RlX21vZHVsZXMvY29kZW1pcnJvci9hZGRvbi9kaWFsb2cvZGlhbG9nLmpzIiwibm9kZV9tb2R1bGVzL2NvZGVtaXJyb3IvYWRkb24vZGlzcGxheS9wYW5lbC5qcyIsIm5vZGVfbW9kdWxlcy9jb2RlbWlycm9yL2FkZG9uL2Rpc3BsYXkvcnVsZXJzLmpzIiwibm9kZV9tb2R1bGVzL2NvZGVtaXJyb3IvYWRkb24vZWRpdC9jbG9zZWJyYWNrZXRzLmpzIiwibm9kZV9tb2R1bGVzL2NvZGVtaXJyb3IvYWRkb24vZWRpdC9tYXRjaGJyYWNrZXRzLmpzIiwibm9kZV9tb2R1bGVzL2NvZGVtaXJyb3IvYWRkb24vZm9sZC9mb2xkY29kZS5qcyIsIm5vZGVfbW9kdWxlcy9jb2RlbWlycm9yL2FkZG9uL2ZvbGQvZm9sZGd1dHRlci5qcyIsIm5vZGVfbW9kdWxlcy9jb2RlbWlycm9yL2FkZG9uL2ZvbGQvaW5kZW50LWZvbGQuanMiLCJub2RlX21vZHVsZXMvY29kZW1pcnJvci9hZGRvbi9oaW50L2phdmFzY3JpcHQtaGludC5qcyIsIm5vZGVfbW9kdWxlcy9jb2RlbWlycm9yL2FkZG9uL2hpbnQvc2hvdy1oaW50LmpzIiwibm9kZV9tb2R1bGVzL2NvZGVtaXJyb3IvYWRkb24vc2VhcmNoL3NlYXJjaC5qcyIsIm5vZGVfbW9kdWxlcy9jb2RlbWlycm9yL2FkZG9uL3NlYXJjaC9zZWFyY2hjdXJzb3IuanMiLCJub2RlX21vZHVsZXMvY29kZW1pcnJvci9hZGRvbi93cmFwL2hhcmR3cmFwLmpzIiwibm9kZV9tb2R1bGVzL2NvZGVtaXJyb3Iva2V5bWFwL3N1YmxpbWUuanMiLCJub2RlX21vZHVsZXMvY29kZW1pcnJvci9saWIvY29kZW1pcnJvci5qcyIsIm5vZGVfbW9kdWxlcy9jb2RlbWlycm9yL21vZGUvY2xpa2UvY2xpa2UuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L2ZuL2dldC1pdGVyYXRvci5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2Fzc2lnbi5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2NyZWF0ZS5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eS5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2tleXMuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9zZXQtcHJvdG90eXBlLW9mLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9mbi9zZXQuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5hLWZ1bmN0aW9uLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuYWRkLXRvLXVuc2NvcGFibGVzLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuYW4tb2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuY2xhc3NvZi5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmNvZi5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmNvbGxlY3Rpb24tc3Ryb25nLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuY29sbGVjdGlvbi10by1qc29uLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuY29sbGVjdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmNvcmUuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5jdHguanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5kZWZpbmVkLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuZGVzY3JpcHRvcnMuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5kb20tY3JlYXRlLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuZXhwb3J0LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuZmFpbHMuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5mb3Itb2YuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5nbG9iYWwuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5oYXMuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5oaWRlLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuaHRtbC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmludm9rZS5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmlvYmplY3QuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5pcy1hcnJheS1pdGVyLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuaXMtb2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuaXRlci1jYWxsLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuaXRlci1jcmVhdGUuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5pdGVyLWRlZmluZS5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLml0ZXItZGV0ZWN0LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuaXRlci1zdGVwLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuaXRlcmF0b3JzLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5saWJyYXJ5LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQubWljcm90YXNrLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQub2JqZWN0LWFzc2lnbi5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLm9iamVjdC1zYXAuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5wcm9wZXJ0eS1kZXNjLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQucmVkZWZpbmUtYWxsLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQucmVkZWZpbmUuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5zYW1lLXZhbHVlLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuc2V0LXByb3RvLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuc2V0LXNwZWNpZXMuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5zZXQtdG8tc3RyaW5nLXRhZy5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLnNoYXJlZC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLnNwZWNpZXMtY29uc3RydWN0b3IuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5zdHJpY3QtbmV3LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuc3RyaW5nLWF0LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQudGFzay5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLnRvLWludGVnZXIuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC50by1pb2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQudG8tbGVuZ3RoLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQudG8tb2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQudWlkLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQud2tzLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9jb3JlLmdldC1pdGVyYXRvci5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9lczYuYXJyYXkuaXRlcmF0b3IuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2Lm9iamVjdC5hc3NpZ24uanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5vYmplY3Quc2V0LXByb3RvdHlwZS1vZi5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZy5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9lczYucHJvbWlzZS5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9lczYuc2V0LmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IuanMiLCJub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM3LnNldC50by1qc29uLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUuanMiLCJub2RlX21vZHVsZXMvY3Jvc3Mtc3RvcmFnZS9saWIvY2xpZW50LmpzIiwibm9kZV9tb2R1bGVzL2Nyb3NzLXN0b3JhZ2UvbGliL2h1Yi5qcyIsIm5vZGVfbW9kdWxlcy9jcm9zcy1zdG9yYWdlL2xpYi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9kb2N1bWVudC1yZWdpc3Rlci1lbGVtZW50L2J1aWxkL2RvY3VtZW50LXJlZ2lzdGVyLWVsZW1lbnQubm9kZS5qcyIsIm5vZGVfbW9kdWxlcy9mb3ItZWFjaC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9nbG9iYWwvd2luZG93LmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIm5vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9iYWJlbC1ydW50aW1lL2NvcmUtanMvYXJyYXkvZnJvbS5qcyIsIm5vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9iYWJlbC1ydW50aW1lL2NvcmUtanMvZ2V0LWl0ZXJhdG9yLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvYXNzaWduLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5LmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cy5qcyIsIm5vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9iYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZS5qcyIsIm5vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9iYWJlbC1ydW50aW1lL2NvcmUtanMvc2V0LmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MuanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0LmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2JhYmVsLXJ1bnRpbWUvaGVscGVycy90by1jb25zdW1hYmxlLWFycmF5LmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9mbi9hcnJheS9mcm9tLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9mbi9nZXQtaXRlcmF0b3IuanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9hc3NpZ24uanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9kZWZpbmUtcHJvcGVydHkuanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9mbi9zZXQuanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5hLWZ1bmN0aW9uLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuYWRkLXRvLXVuc2NvcGFibGVzLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuYW4tb2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuY2xhc3NvZi5qcyIsIm5vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmNvZi5qcyIsIm5vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmNvbGxlY3Rpb24tc3Ryb25nLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuY29sbGVjdGlvbi10by1qc29uLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuY29sbGVjdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmNvcmUuanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5jdHguanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5kZWZpbmVkLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuZGVzY3JpcHRvcnMuanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5kb20tY3JlYXRlLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuZXhwb3J0LmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuZmFpbHMuanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5mb3Itb2YuanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5nbG9iYWwuanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5oYXMuanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5oaWRlLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuaHRtbC5qcyIsIm5vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmludm9rZS5qcyIsIm5vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmlvYmplY3QuanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5pcy1hcnJheS1pdGVyLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuaXMtb2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuaXRlci1jYWxsLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuaXRlci1jcmVhdGUuanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5pdGVyLWRlZmluZS5qcyIsIm5vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLml0ZXItZGV0ZWN0LmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuaXRlci1zdGVwLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuaXRlcmF0b3JzLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5saWJyYXJ5LmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQubWljcm90YXNrLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQub2JqZWN0LWFzc2lnbi5qcyIsIm5vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLm9iamVjdC1zYXAuanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5wcm9wZXJ0eS1kZXNjLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQucmVkZWZpbmUtYWxsLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQucmVkZWZpbmUuanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5zYW1lLXZhbHVlLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuc2V0LXByb3RvLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuc2V0LXNwZWNpZXMuanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5zZXQtdG8tc3RyaW5nLXRhZy5qcyIsIm5vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLnNoYXJlZC5qcyIsIm5vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLnNwZWNpZXMtY29uc3RydWN0b3IuanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5zdHJpY3QtbmV3LmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuc3RyaW5nLWF0LmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQudGFzay5qcyIsIm5vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLnRvLWludGVnZXIuanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC50by1pb2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQudG8tbGVuZ3RoLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQudG8tb2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQudWlkLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQud2tzLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZC5qcyIsIm5vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9jb3JlLmdldC1pdGVyYXRvci5qcyIsIm5vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9lczYuYXJyYXkuZnJvbS5qcyIsIm5vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9lczYuYXJyYXkuaXRlcmF0b3IuanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2Lm9iamVjdC5hc3NpZ24uanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5wcm9taXNlLmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5zZXQuanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvci5qcyIsIm5vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9lczcuc2V0LnRvLWpzb24uanMiLCJub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvZ2xzbENhbnZhcy9idWlsZC9ub2RlX21vZHVsZXMvY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZS5qcyIsIm5vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9mb3ItZWFjaC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9nbG9iYWwvd2luZG93LmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2lzLWZ1bmN0aW9uL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL3BhcnNlLWhlYWRlcnMvcGFyc2UtaGVhZGVycy5qcyIsIm5vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy90cmltL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL2dsc2xDYW52YXMvYnVpbGQvbm9kZV9tb2R1bGVzL3hoci9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy9nbHNsQ2FudmFzL2J1aWxkL25vZGVfbW9kdWxlcy94dGVuZC9pbW11dGFibGUuanMiLCIvVXNlcnMvcGF0cmljaW8vRGVza3RvcC9nbHNsQ2FudmFzL3NyYy9HbHNsQ2FudmFzLmpzIiwiL1VzZXJzL3BhdHJpY2lvL0Rlc2t0b3AvZ2xzbENhbnZhcy9zcmMvZ2wvVGV4dHVyZS5qcyIsIi9Vc2Vycy9wYXRyaWNpby9EZXNrdG9wL2dsc2xDYW52YXMvc3JjL2dsL2dsLmpzIiwiL1VzZXJzL3BhdHJpY2lvL0Rlc2t0b3AvZ2xzbENhbnZhcy9zcmMvdG9vbHMvY29tbW9uLmpzIiwiL1VzZXJzL3BhdHJpY2lvL0Rlc2t0b3AvZ2xzbENhbnZhcy9zcmMvdG9vbHMvbWl4aW4uanMiLCJub2RlX21vZHVsZXMvaXMtZnVuY3Rpb24vaW5kZXguanMiLCJub2RlX21vZHVsZXMvcGFyc2UtaGVhZGVycy9wYXJzZS1oZWFkZXJzLmpzIiwibm9kZV9tb2R1bGVzL3RyaW0vaW5kZXguanMiLCJub2RlX21vZHVsZXMveGhyL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3h0ZW5kL2ltbXV0YWJsZS5qcyIsIi9Vc2Vycy9wYXRyaWNpby9EZXNrdG9wL2dsc2xFZGl0b3Ivc3JjL2pzL0dsc2xFZGl0b3IuanMiLCIvVXNlcnMvcGF0cmljaW8vRGVza3RvcC9nbHNsRWRpdG9yL3NyYy9qcy9jb3JlL0VkaXRvci5qcyIsIi9Vc2Vycy9wYXRyaWNpby9EZXNrdG9wL2dsc2xFZGl0b3Ivc3JjL2pzL2NvcmUvU2hhZGVyLmpzIiwiL1VzZXJzL3BhdHJpY2lvL0Rlc2t0b3AvZ2xzbEVkaXRvci9zcmMvanMvaW8vQnVmZmVyTWFuYWdlci5qcyIsIi9Vc2Vycy9wYXRyaWNpby9EZXNrdG9wL2dsc2xFZGl0b3Ivc3JjL2pzL2lvL0ZpbGVEcm9wLmpzIiwiL1VzZXJzL3BhdHJpY2lvL0Rlc2t0b3AvZ2xzbEVkaXRvci9zcmMvanMvaW8vSGFzaFdhdGNoLmpzIiwiL1VzZXJzL3BhdHJpY2lvL0Rlc2t0b3AvZ2xzbEVkaXRvci9zcmMvanMvaW8vTG9jYWxTdG9yYWdlLmpzIiwiL1VzZXJzL3BhdHJpY2lvL0Rlc2t0b3AvZ2xzbEVkaXRvci9zcmMvanMvaW8vc2hhcmUuanMiLCIvVXNlcnMvcGF0cmljaW8vRGVza3RvcC9nbHNsRWRpdG9yL3NyYy9qcy90b29scy9jb21tb24uanMiLCIvVXNlcnMvcGF0cmljaW8vRGVza3RvcC9nbHNsRWRpdG9yL3NyYy9qcy90b29scy9kZWJ1Z2dpbmcuanMiLCIvVXNlcnMvcGF0cmljaW8vRGVza3RvcC9nbHNsRWRpdG9yL3NyYy9qcy90b29scy9pbnRlcmFjdGl2ZURvbS5qcyIsIi9Vc2Vycy9wYXRyaWNpby9EZXNrdG9wL2dsc2xFZGl0b3Ivc3JjL2pzL3Rvb2xzL21lZGlhQ2FwdHVyZS5qcyIsIi9Vc2Vycy9wYXRyaWNpby9EZXNrdG9wL2dsc2xFZGl0b3Ivc3JjL2pzL3Rvb2xzL21peGluLmpzIiwiL1VzZXJzL3BhdHJpY2lvL0Rlc2t0b3AvZ2xzbEVkaXRvci9zcmMvanMvdG9vbHMvdXJscy5qcyIsIi9Vc2Vycy9wYXRyaWNpby9EZXNrdG9wL2dsc2xFZGl0b3Ivc3JjL2pzL3VpL0Vycm9yc0Rpc3BsYXkuanMiLCIvVXNlcnMvcGF0cmljaW8vRGVza3RvcC9nbHNsRWRpdG9yL3NyYy9qcy91aS9FeHBvcnRJY29uLmpzIiwiL1VzZXJzL3BhdHJpY2lvL0Rlc2t0b3AvZ2xzbEVkaXRvci9zcmMvanMvdWkvSGVscGVycy5qcyIsIi9Vc2Vycy9wYXRyaWNpby9EZXNrdG9wL2dsc2xFZGl0b3Ivc3JjL2pzL3VpL01lbnUuanMiLCIvVXNlcnMvcGF0cmljaW8vRGVza3RvcC9nbHNsRWRpdG9yL3NyYy9qcy91aS9NZW51SXRlbS5qcyIsIi9Vc2Vycy9wYXRyaWNpby9EZXNrdG9wL2dsc2xFZGl0b3Ivc3JjL2pzL3VpL1Zpc3VhbERlYnVnZ2VyLmpzIiwiL1VzZXJzL3BhdHJpY2lvL0Rlc2t0b3AvZ2xzbEVkaXRvci9zcmMvanMvdWkvbW9kYWxzL0V4cG9ydE1vZGFsLmpzIiwiL1VzZXJzL3BhdHJpY2lvL0Rlc2t0b3AvZ2xzbEVkaXRvci9zcmMvanMvdWkvbW9kYWxzL01vZGFsLmpzIiwiL1VzZXJzL3BhdHJpY2lvL0Rlc2t0b3AvZ2xzbEVkaXRvci9zcmMvanMvdWkvcGlja2Vycy9Db2xvclBpY2tlci5qcyIsIi9Vc2Vycy9wYXRyaWNpby9EZXNrdG9wL2dsc2xFZGl0b3Ivc3JjL2pzL3VpL3BpY2tlcnMvRmxvYXRQaWNrZXIuanMiLCIvVXNlcnMvcGF0cmljaW8vRGVza3RvcC9nbHNsRWRpdG9yL3NyYy9qcy91aS9waWNrZXJzL1BpY2tlci5qcyIsIi9Vc2Vycy9wYXRyaWNpby9EZXNrdG9wL2dsc2xFZGl0b3Ivc3JjL2pzL3VpL3BpY2tlcnMvVmVjMlBpY2tlci5qcyIsIi9Vc2Vycy9wYXRyaWNpby9EZXNrdG9wL2dsc2xFZGl0b3Ivc3JjL2pzL3VpL3BpY2tlcnMvVmVjM1BpY2tlci5qcyIsIi9Vc2Vycy9wYXRyaWNpby9EZXNrdG9wL2dsc2xFZGl0b3Ivc3JjL2pzL3VpL3BpY2tlcnMvdHlwZXMvQ29sb3IuanMiLCIvVXNlcnMvcGF0cmljaW8vRGVza3RvcC9nbHNsRWRpdG9yL3NyYy9qcy91aS9waWNrZXJzL3R5cGVzL0NvbG9yQ29udmVydGVyLmpzIiwiL1VzZXJzL3BhdHJpY2lvL0Rlc2t0b3AvZ2xzbEVkaXRvci9zcmMvanMvdWkvcGlja2Vycy90eXBlcy9GbG9hdC5qcyIsIi9Vc2Vycy9wYXRyaWNpby9EZXNrdG9wL2dsc2xFZGl0b3Ivc3JjL2pzL3VpL3BpY2tlcnMvdHlwZXMvTWF0cml4LmpzIiwiL1VzZXJzL3BhdHJpY2lvL0Rlc2t0b3AvZ2xzbEVkaXRvci9zcmMvanMvdWkvcGlja2Vycy90eXBlcy9WZWN0b3IuanMiLCIvVXNlcnMvcGF0cmljaW8vRGVza3RvcC9nbHNsRWRpdG9yL3NyYy9qcy92ZW5kb3IvRmlsZVNhdmVyLm1pbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbk1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4YkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcE9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeHBSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4dUJBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBOztBQ0RBO0FBQ0E7QUFDQTtBQUNBOztBQ0hBO0FBQ0E7QUFDQTtBQUNBOztBQ0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTs7QUNEQTtBQUNBOztBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBOztBQ0hBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdERBO0FBQ0E7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEJBO0FBQ0E7QUFDQTtBQUNBOztBQ0hBO0FBQ0E7QUFDQTtBQUNBOztBQ0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEJBO0FBQ0E7QUFDQTs7QUNGQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTs7QUNGQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBOztBQ0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2Y0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDajZDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDVEE7QUNBQTs7QUNBQTs7QUNBQTs7QUNBQTs7QUNBQTs7QUNBQTs7QUNBQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTs7QUNEQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBOztBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBOztBQ0hBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdERBO0FBQ0E7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEJBO0FBQ0E7QUFDQTtBQUNBOztBQ0hBO0FBQ0E7QUFDQTtBQUNBOztBQ0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEJBO0FBQ0E7QUFDQTs7QUNGQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakNBO0FBQ0E7QUFDQTtBQUNBOztBQ0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBOztBQ0hBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDalBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7bUJDSWdCLEtBQUs7Ozs7b0JBRStELFNBQVM7O3lCQUN6RSxjQUFjOzs7OzJCQUVNLGdCQUFnQjs7MEJBQ3pCLGVBQWU7O0lBRXpCLFVBQVU7QUFDaEIsYUFETSxVQUFVLENBQ2YsTUFBTSxFQUFFLE9BQU8sRUFBRTs7OzhCQURaLFVBQVU7O0FBRXZCLHdDQUFlLElBQUksQ0FBQyxDQUFDOztBQUVyQixlQUFPLEdBQUcsT0FBTyxJQUFJLEVBQUUsQ0FBQzs7QUFFeEIsWUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsV0FBVyxDQUFDO0FBQ2hDLFlBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQzs7QUFFbEMsWUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7QUFDckIsWUFBSSxDQUFDLEVBQUUsR0FBRyxTQUFTLENBQUM7QUFDcEIsWUFBSSxDQUFDLE9BQU8sR0FBRyxTQUFTLENBQUM7QUFDekIsWUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7QUFDbkIsWUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7QUFDbkIsWUFBSSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUM7QUFDZCxZQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQzs7QUFFckIsWUFBSSxDQUFDLFlBQVksR0FBRyxPQUFPLENBQUMsWUFBWSwrT0FjL0MsQ0FBQztBQUNNLFlBQUksQ0FBQyxjQUFjLEdBQUcsT0FBTyxDQUFDLGNBQWMsc0lBVW5ELENBQUM7OztBQUdNLFlBQUksRUFBRSxHQUFHLHNCQUFXLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUNyQyxZQUFJLENBQUMsRUFBRSxFQUFFO0FBQ0wsbUJBQU87U0FDVjtBQUNELFlBQUksQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDO0FBQ2IsWUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUNsRCxZQUFJLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztBQUNwQixZQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztBQUN4QixZQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQzs7O0FBR3BCLGNBQU0sQ0FBQyxLQUFLLENBQUMsZUFBZSxHQUFHLE9BQU8sQ0FBQyxlQUFlLElBQUksZUFBZSxDQUFDOzs7QUFHMUUsWUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLGVBQWUsQ0FBQyxFQUFFO0FBQ3RDLGdCQUFJLENBQUMsY0FBYyxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUMsZUFBZSxDQUFDLENBQUM7U0FDOUQsTUFDSSxJQUFJLE1BQU0sQ0FBQyxZQUFZLENBQUMsbUJBQW1CLENBQUMsRUFBRTtBQUMvQyxnQkFBSSxNQUFNLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0FBQ3RELDZCQUFJLEdBQUcsQ0FBQyxNQUFNLEVBQUUsVUFBQyxLQUFLLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBSztBQUN2QyxzQkFBSyxJQUFJLENBQUMsSUFBSSxFQUFFLE1BQUssWUFBWSxDQUFDLENBQUM7YUFDdEMsQ0FBQyxDQUFDO1NBQ047OztBQUdELFlBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxhQUFhLENBQUMsRUFBRTtBQUNwQyxnQkFBSSxDQUFDLFlBQVksR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1NBQzFELE1BQ0ksSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLGlCQUFpQixDQUFDLEVBQUU7QUFDN0MsZ0JBQUksTUFBTSxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUNwRCw2QkFBSSxHQUFHLENBQUMsTUFBTSxFQUFFLFVBQUMsS0FBSyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUs7QUFDdkMsc0JBQUssSUFBSSxDQUFDLE1BQUssY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDO2FBQ3hDLENBQUMsQ0FBQztTQUNOOztBQUVELFlBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQzs7QUFFWixZQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRTtBQUNmLG1CQUFPO1NBQ1Y7OztBQUdELFlBQUksWUFBWSxHQUFHLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLFlBQVksQ0FBQyxDQUFDO0FBQ3BFLFlBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQztBQUN2QyxZQUFJLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDeEQsWUFBSSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLFlBQVksRUFBRSxJQUFJLFlBQVksQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDcEksWUFBSSxDQUFDLEVBQUUsQ0FBQyx1QkFBdUIsQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUM5QyxZQUFJLENBQUMsRUFBRSxDQUFDLG1CQUFtQixDQUFDLFlBQVksRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDOztBQUVwRSxZQUFJLFdBQVcsR0FBRyxFQUFFLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxZQUFZLENBQUMsQ0FBQztBQUNuRSxZQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUMsWUFBWSxFQUFFLENBQUM7QUFDdEMsWUFBSSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ3ZELFlBQUksQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsSUFBSSxZQUFZLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQzFJLFlBQUksQ0FBQyxFQUFFLENBQUMsdUJBQXVCLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDN0MsWUFBSSxDQUFDLEVBQUUsQ0FBQyxtQkFBbUIsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQzs7O0FBR25FLFlBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxlQUFlLENBQUMsRUFBRTtBQUN0QyxnQkFBSSxPQUFPLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxlQUFlLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDOUQsaUJBQUssSUFBSSxJQUFJLElBQUksT0FBTyxFQUFFO0FBQ3RCLG9CQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sR0FBRyxJQUFJLEVBQUUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7YUFDbEQ7U0FDSjs7O0FBR0QsWUFBSSxLQUFLLEdBQUc7QUFDUixhQUFDLEVBQUUsQ0FBQztBQUNKLGFBQUMsRUFBRSxDQUFDO1NBQ1AsQ0FBQztBQUNGLGdCQUFRLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxFQUFFLFVBQUMsQ0FBQyxFQUFLO0FBQzFDLGlCQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQztBQUMvQixpQkFBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUM7U0FDbEMsRUFBRSxLQUFLLENBQUMsQ0FBQzs7QUFFVixZQUFJLE9BQU8sR0FBRyxJQUFJLENBQUM7QUFDbkIsaUJBQVMsVUFBVSxHQUFHO0FBQ2xCLGdCQUFJLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO0FBQ3BCLHVCQUFPLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQzNCO0FBQ0QsbUJBQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUNqQixtQkFBTyxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDdkMsa0JBQU0sQ0FBQyxxQkFBcUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztTQUM1Qzs7O0FBR0QsWUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDOUIsa0JBQVUsRUFBRSxDQUFDO0FBQ2IsZUFBTyxJQUFJLENBQUM7S0FDZjs7aUJBcklnQixVQUFVOztlQXVJcEIsbUJBQUc7QUFDTixnQkFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7QUFDdEIsZ0JBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO0FBQ3JCLGlCQUFLLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7QUFDM0Isb0JBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQzlCO0FBQ0QsZ0JBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO0FBQ25CLGlCQUFLLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7QUFDMUIsb0JBQUksQ0FBQyxFQUFFLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQzthQUMzQztBQUNELGdCQUFJLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN6QixnQkFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3BDLGdCQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztBQUNwQixnQkFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUM7U0FDbEI7OztlQUVJLGNBQUMsVUFBVSxFQUFFLFVBQVUsRUFBRTs7QUFFMUIsZ0JBQUksVUFBVSxFQUFFO0FBQ1osb0JBQUksQ0FBQyxZQUFZLEdBQUcsVUFBVSxDQUFDO2FBQ2xDOzs7QUFHRCxnQkFBSSxVQUFVLEVBQUU7QUFDWixvQkFBSSxDQUFDLGNBQWMsR0FBRyxVQUFVLENBQUM7YUFDcEM7O0FBRUQsZ0JBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO0FBQ3RCLGdCQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFBLENBQUUsTUFBTSxDQUFDO0FBQ25FLGdCQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFBLENBQUUsTUFBTSxDQUFDO0FBQ2pFLGdCQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFBLENBQUUsTUFBTSxDQUFDO0FBQ2pFLGdCQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFBLENBQUUsTUFBTSxDQUFDO0FBQ25FLGdCQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDOztBQUVwRSxnQkFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDekQsZ0JBQUksU0FBUyxFQUFFO0FBQ1gsb0JBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzVDLHFCQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUNuQyx3QkFBSSxLQUFLLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxrRUFBa0UsQ0FBQyxDQUFDO0FBQy9GLHdCQUFJLEtBQUssRUFBRTtBQUNQLDRCQUFJLEdBQUcsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBQ2xELDRCQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQ3BCLEdBQUcsS0FBSyxLQUFLLElBQUksR0FBRyxLQUFLLE1BQU0sSUFBSSxHQUFHLEtBQUssS0FBSyxJQUNoRCxHQUFHLEtBQUssS0FBSyxJQUFJLEdBQUcsS0FBSyxNQUFNLElBQUksR0FBRyxLQUFLLEtBQUssQ0FBQSxBQUFDLEVBQUU7QUFDcEQsZ0NBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO3lCQUN2QztxQkFDSjtBQUNELHdCQUFJLElBQUksR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLG9CQUFvQixDQUFDLENBQUM7QUFDaEQsd0JBQUksSUFBSSxFQUFFO0FBQ04sOEJBQU07cUJBQ1Q7aUJBQ0o7YUFDSjs7QUFFRCxnQkFBSSxZQUFZLEdBQUcsd0JBQWEsSUFBSSxFQUFFLElBQUksQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUNoRixnQkFBSSxjQUFjLEdBQUcsd0JBQWEsSUFBSSxFQUFFLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxlQUFlLENBQUMsQ0FBQzs7O0FBR3RGLGdCQUFJLENBQUMsY0FBYyxFQUFFO0FBQ2pCLDhCQUFjLEdBQUcsd0JBQWEsSUFBSSxFQUFFLDhDQUE4QyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDN0csb0JBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO2FBQ3hCLE1BQ0k7QUFDRCxvQkFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7YUFDdkI7OztBQUdELGdCQUFJLE9BQU8sR0FBRyx5QkFBYyxJQUFJLEVBQUUsQ0FBQyxZQUFZLEVBQUUsY0FBYyxDQUFDLENBQUMsQ0FBQztBQUNsRSxnQkFBSSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7Ozs7O0FBSzVCLGdCQUFJLENBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUNuQyxnQkFBSSxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsY0FBYyxDQUFDLENBQUM7O0FBRXJDLGdCQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztBQUN2QixnQkFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7OztBQUduQixnQkFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUM7O0FBRXpCLGdCQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztTQUMzQjs7O2VBRUksY0FBQyxRQUFRLEVBQUUsVUFBVSxFQUFFLFVBQVUsRUFBRTs7O0FBR3BDLGdCQUFJLGFBQWEsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO0FBQ3RDLGdCQUFJLGFBQWEsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDO0FBQ3hDLGdCQUFJLGVBQWUsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDOztBQUVsQyxnQkFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsMEJBQTBCLENBQUMsQ0FBQztBQUMzRCxnQkFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQ2pDLGdCQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDOztBQUU1QixnQkFBSSxVQUFVLElBQUksVUFBVSxFQUFFO0FBQzFCLG9CQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUMsQ0FBQztBQUNsQyx3QkFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7QUFDeEIsb0JBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO0FBQ3hCLG9CQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7YUFDakI7O0FBRUQsZ0JBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO0FBQ25CLGVBQUcsQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQy9DLGdCQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztBQUN4QixnQkFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQ2QsZUFBRyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FBQzs7QUFFdEMsZ0JBQUksT0FBTyxHQUFHLElBQUksQ0FBQztBQUNuQixxQkFBUyxVQUFVLEdBQUc7O0FBRWxCLHVCQUFPLENBQUMsTUFBTSxHQUFHLGVBQWUsQ0FBQztBQUNqQyxvQkFBSSxVQUFVLElBQUksVUFBVSxFQUFFO0FBQzFCLDJCQUFPLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxhQUFhLENBQUMsQ0FBQztpQkFDOUM7YUFDSjtBQUNELHFCQUFTLFdBQVcsR0FBRztBQUNuQix1QkFBTyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7QUFDM0IsdUJBQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUNqQixvQkFBSSxTQUFTLEdBQUcsR0FBRyxDQUFDLGlCQUFpQixDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsMEJBQTBCLENBQUMsQ0FBQztBQUM3RSxvQkFBSSxRQUFRLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFDN0Qsb0JBQUksU0FBUyxJQUFJLENBQUMsUUFBUSxFQUFFO0FBQ3hCLHdCQUFJLEdBQUcsR0FBRztBQUNOLGdDQUFRLEVBQUUsUUFBUTtBQUNsQiw0QkFBSSxFQUFFLFVBQVUsSUFBSSxPQUFPLENBQUMsY0FBYztBQUMxQyw0QkFBSSxFQUFFLFVBQVUsSUFBSSxPQUFPLENBQUMsWUFBWTtBQUN4QyxxQ0FBYSxFQUFFLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLGdCQUFnQixDQUFDLEdBQUMsU0FBUztxQkFDOUUsQ0FBQztBQUNGLDhCQUFVLEVBQUUsQ0FBQztBQUNiLDRCQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7aUJBQ2pCLE1BQU07QUFDSCwwQkFBTSxDQUFDLHFCQUFxQixDQUFDLFdBQVcsQ0FBQyxDQUFDO2lCQUM3QzthQUNKO0FBQ0QsdUJBQVcsRUFBRSxDQUFDO1NBQ2pCOzs7ZUFFVyxxQkFBQyxJQUFJLEVBQUUsZ0JBQWdCLEVBQUUsT0FBTyxFQUFFOzs7QUFDMUMsZ0JBQUksQ0FBQyxPQUFPLEVBQUU7QUFDVix1QkFBTyxHQUFHLEVBQUUsQ0FBQzthQUNoQjs7QUFFRCxnQkFBSSxPQUFPLGdCQUFnQixLQUFLLFFBQVEsRUFBRTtBQUN0Qyx1QkFBTyxDQUFDLEdBQUcsR0FBRyxnQkFBZ0IsQ0FBQzthQUNsQyxNQUNJLElBQUksT0FBTyxnQkFBZ0IsS0FBSyxRQUFRLElBQUksZ0JBQWdCLENBQUMsSUFBSSxJQUFJLGdCQUFnQixDQUFDLEtBQUssSUFBSSxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUU7QUFDekgsdUJBQU8sQ0FBQyxJQUFJLEdBQUcsZ0JBQWdCLENBQUMsSUFBSSxDQUFDO0FBQ3JDLHVCQUFPLENBQUMsS0FBSyxHQUFHLGdCQUFnQixDQUFDLEtBQUssQ0FBQztBQUN2Qyx1QkFBTyxDQUFDLE1BQU0sR0FBRyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUM7YUFDNUMsTUFDSSxJQUFJLE9BQU8sZ0JBQWdCLEtBQUssUUFBUSxFQUFFO0FBQzNDLHVCQUFPLENBQUMsT0FBTyxHQUFHLGdCQUFnQixDQUFDO2FBQ3RDOztBQUVELGdCQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUU7QUFDckIsb0JBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRTtBQUNyQix3QkFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDbEMsd0JBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxVQUFDLElBQUksRUFBSztBQUN2QywrQkFBSyxXQUFXLEdBQUcsSUFBSSxDQUFDO3FCQUMzQixDQUFDLENBQUM7aUJBQ047YUFDSixNQUNJO0FBQ0Qsb0JBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsMkJBQVksSUFBSSxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDMUQsb0JBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxVQUFDLElBQUksRUFBSztBQUN2QywyQkFBSyxXQUFXLEdBQUcsSUFBSSxDQUFDO2lCQUMzQixDQUFDLENBQUM7YUFDTjtTQUVKOzs7ZUFFYywyQkFBRztBQUNkLGdCQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztTQUN0Qjs7O2VBRVMsb0JBQUMsSUFBSSxFQUFZO0FBQ3ZCLGdCQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7OzhDQURLLEtBQUs7QUFBTCxxQkFBSzs7O0FBRXJCLGFBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUM7QUFDaEIsZ0JBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDdkI7OztlQUVVLHFCQUFDLFFBQVEsRUFBRTtBQUNsQixnQkFBSSxNQUFNLEdBQUcseUJBQWMsUUFBUSxDQUFDLENBQUM7O0FBRXJDLGlCQUFLLElBQUksQ0FBQyxJQUFJLE1BQU0sRUFBRTtBQUNsQixvQkFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLFdBQVcsRUFBRTs7O0FBR2hDLHdCQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2lCQUN4RCxNQUNJO0FBQ0Qsd0JBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ2hGLHdCQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztpQkFDM0I7YUFDSjtTQUNKOzs7ZUFFTyxrQkFBQyxLQUFLLEVBQUU7O0FBRVosZ0JBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMscUJBQXFCLEVBQUUsQ0FBQztBQUMvQyxnQkFBSSxLQUFLLElBQ0wsS0FBSyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLElBQUksS0FBSyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUN4RCxLQUFLLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLEdBQUcsSUFBSSxLQUFLLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7QUFDMUQsb0JBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsS0FBSyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxJQUFJLEtBQUssQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQSxBQUFDLENBQUMsQ0FBQzthQUN6RztTQUNKOzs7OztlQUdPLGlCQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFZOztBQUNuQyxnQkFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNoRCxnQkFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQzs7K0NBRk4sS0FBSztBQUFMLHFCQUFLOzs7QUFHakMsZ0JBQUksTUFBTSxHQUFHLHlCQUFPLE9BQU8sQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDMUMsZ0JBQUksTUFBTSxJQUFJLElBQUksQ0FBQyxNQUFNLElBQUksT0FBTyxDQUFDLFFBQVEsS0FBSyxTQUFTLElBQUksT0FBTyxDQUFDLEtBQUssS0FBSyxTQUFTLEVBQUU7QUFDeEYsdUJBQU8sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0FBQ3BCLHVCQUFPLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztBQUN0Qix1QkFBTyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7QUFDcEIsdUJBQU8sQ0FBQyxNQUFNLEdBQUcsU0FBUyxHQUFHLE1BQU0sQ0FBQztBQUNwQyx1QkFBTyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUM7O0FBRWxFLG9CQUFJLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7YUFDcEY7U0FDSjs7O2VBRWEsd0JBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUU7QUFDbkMsZ0JBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxTQUFTLEVBQUU7QUFDbkMsb0JBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQzthQUM1QyxNQUNJO0FBQ0Qsb0JBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ3hELG9CQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDM0Msb0JBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxJQUFJLEdBQUcsWUFBWSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDdkcsb0JBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQzthQUN0QjtTQUNKOzs7ZUFFSyxrQkFBRztBQUNMLGdCQUFJLElBQUksQ0FBQyxLQUFLLEtBQUssSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLElBQ3RDLElBQUksQ0FBQyxNQUFNLEtBQUssSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUU7QUFDMUMsb0JBQUksZUFBZSxHQUFHLE1BQU0sQ0FBQyxnQkFBZ0IsSUFBSSxDQUFDLENBQUM7Ozs7O0FBS25ELG9CQUFJLFlBQVksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLFdBQVcsR0FBRyxlQUFlLENBQUMsQ0FBQztBQUM1RSxvQkFBSSxhQUFhLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxZQUFZLEdBQUcsZUFBZSxDQUFDLENBQUM7OztBQUc5RSxvQkFBSSxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEtBQUssWUFBWSxJQUNyQyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEtBQUssYUFBYSxFQUFFOztBQUV6Qyx3QkFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLFlBQVksQ0FBQztBQUNwQyx3QkFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLGFBQWEsQ0FBQzs7QUFFdEMsd0JBQUksQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDOztpQkFFdkU7QUFDRCxvQkFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQztBQUNyQyxvQkFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQztBQUN2Qyx1QkFBTyxJQUFJLENBQUM7YUFDZixNQUNJO0FBQ0QsdUJBQU8sS0FBSyxDQUFDO2FBQ2hCO1NBQ0o7OztlQUVNLGtCQUFHO0FBQ04sZ0JBQUksQ0FBQyxPQUFPLEdBQUcsa0NBQWdCLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUM1QyxnQkFBSSxJQUFJLENBQUMsV0FBVyxJQUNmLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLE9BQU8sSUFBSSxDQUFFLElBQUksQ0FBQyxNQUFNLEFBQUMsRUFBRTs7QUFFbEQsb0JBQUksSUFBSSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7QUFDdEIsb0JBQUksR0FBRyxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUM1QixvQkFBSSxDQUFDLFNBQVMsR0FBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFBLEdBQUksTUFBTSxDQUFDO0FBQ2pELG9CQUFJLENBQUMsUUFBUSxHQUFHLEdBQUcsQ0FBQztBQUNwQixvQkFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTs7QUFFakIsd0JBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO2lCQUMxRDs7QUFFRCxvQkFBSSxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsRUFBRzs7QUFFakIsd0JBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQSxHQUFJLE1BQU0sQ0FBQyxDQUFDO2lCQUN6RTs7QUFFRCxvQkFBSSxJQUFJLENBQUMsS0FBSyxFQUFFOztBQUVaLHdCQUFJLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLFVBQVUsRUFBRSxHQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsVUFBVSxFQUFFLEdBQUcsSUFBSSxDQUFDLGVBQWUsRUFBRSxHQUFHLEtBQUssQ0FBRSxDQUFDO2lCQUNqTTs7O0FBR0Qsb0JBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxjQUFjLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFbEYsb0JBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDO0FBQ3JCLHFCQUFLLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7QUFDM0Isd0JBQUksQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLENBQUM7aUJBQzVCOzs7QUFHRCxvQkFBSSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDOzs7QUFHNUMsb0JBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxDQUFDOztBQUUzQixvQkFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7QUFDcEIsb0JBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO2FBQzVCO1NBQ0o7OztlQUVLLGlCQUFHO0FBQ0wsZ0JBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO1NBQ3RCOzs7ZUFFSSxnQkFBRztBQUNKLGdCQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztTQUN2Qjs7O2VBRU0sbUJBQUc7QUFDTixtQkFBTyxRQUFRLENBQUM7U0FDbkI7OztXQXRjZ0IsVUFBVTs7O3FCQUFWLFVBQVU7O0FBeWMvQixNQUFNLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQzs7QUFFL0IsU0FBUyxpQkFBaUIsR0FBRztBQUN6QixRQUFJLElBQUksR0FBRyxRQUFRLENBQUMsc0JBQXNCLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDekQsUUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtBQUNqQixjQUFNLENBQUMsWUFBWSxHQUFHLEVBQUUsQ0FBQztBQUN6QixhQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUNsQyxnQkFBSSxPQUFPLEdBQUcsSUFBSSxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEMsZ0JBQUksT0FBTyxDQUFDLE9BQU8sRUFBRTtBQUNqQixzQkFBTSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7YUFDckM7U0FDSjtLQUNKO0NBQ0o7O0FBRUQsTUFBTSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sRUFBRSxZQUFZO0FBQ3hDLHFCQUFpQixFQUFFLENBQUM7Q0FDdkIsQ0FBQyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7OzsyQkN4ZmtDLGlCQUFpQjs7MEJBQ3ZCLGdCQUFnQjs7OztJQUcxQixPQUFPO0FBQ2IsYUFETSxPQUFPLENBQ1osRUFBRSxFQUFFLElBQUksRUFBZ0I7WUFBZCxPQUFPLHlEQUFHLEVBQUU7OzhCQURqQixPQUFPOztBQUVwQix3Q0FBZSxJQUFJLENBQUMsQ0FBQzs7QUFFckIsWUFBSSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUM7QUFDYixZQUFJLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQyxhQUFhLEVBQUUsQ0FBQztBQUNsQyxZQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7QUFDZCxnQkFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7U0FDckI7QUFDRCxZQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7O0FBRVosWUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7QUFDakIsWUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7QUFDbkIsWUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7QUFDdkIsWUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7Ozs7QUFJcEIsWUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDO0FBQzVFLFlBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDOztBQUVyQyxZQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0tBQ3RCOzs7Ozs7aUJBdEJnQixPQUFPOztlQXlCakIsbUJBQUc7QUFDTixnQkFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUU7QUFDYix1QkFBTzthQUNWO0FBQ0QsZ0JBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNwQyxnQkFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7QUFDcEIsbUJBQU8sSUFBSSxDQUFDLElBQUksQ0FBQztBQUNqQixnQkFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7QUFDakIsZ0JBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1NBQ3RCOzs7ZUFFRyxjQUFDLElBQUksRUFBRTtBQUNQLGdCQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRTtBQUNiLHVCQUFPO2FBQ1Y7QUFDRCxnQkFBSSxPQUFPLElBQUksS0FBSyxRQUFRLEVBQUU7QUFDMUIsb0JBQUksT0FBTyxDQUFDLFVBQVUsS0FBSyxJQUFJLEVBQUU7QUFDN0Isd0JBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxDQUFDO0FBQy9DLDJCQUFPLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztpQkFDN0I7YUFDSjtBQUNELGdCQUFJLE9BQU8sQ0FBQyxhQUFhLEtBQUssSUFBSSxDQUFDLE9BQU8sRUFBRTtBQUN4QyxvQkFBSSxDQUFDLEVBQUUsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3RELHVCQUFPLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7YUFDeEM7U0FDSjs7O2VBRUcsZ0JBQWU7Z0JBQWQsT0FBTyx5REFBRyxFQUFFOztBQUNiLGdCQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQzs7QUFFcEIsZ0JBQUksT0FBTyxPQUFPLENBQUMsR0FBRyxLQUFLLFFBQVEsRUFBRTtBQUNqQyxvQkFBSSxJQUFJLENBQUMsR0FBRyxLQUFLLFNBQVMsSUFBSSxPQUFPLENBQUMsR0FBRyxLQUFLLElBQUksQ0FBQyxHQUFHLEVBQUU7QUFDcEQsd0JBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztpQkFDckM7YUFDSixNQUNJLElBQUksT0FBTyxDQUFDLE9BQU8sRUFBRTtBQUN0QixvQkFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO2FBQzdDLE1BQ0ksSUFBSSxPQUFPLENBQUMsSUFBSSxJQUFJLE9BQU8sQ0FBQyxLQUFLLElBQUksT0FBTyxDQUFDLE1BQU0sRUFBRTtBQUN0RCxvQkFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQzthQUN0RTtTQUNKOzs7OztlQUdLLGdCQUFDLEdBQUcsRUFBZ0I7OztnQkFBZCxPQUFPLHlEQUFHLEVBQUU7O0FBQ3BCLGdCQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRTtBQUNiLHVCQUFPO2FBQ1Y7O0FBRUQsZ0JBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO0FBQ2YsZ0JBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQztBQUN2QixnQkFBSSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7O0FBRXhCLGdCQUFJLENBQUMsT0FBTyxHQUFHLGFBQVksVUFBQyxPQUFPLEVBQUUsTUFBTSxFQUFLO0FBQzVDLG9CQUFJLEdBQUcsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBQzdDLG9CQUFJLE9BQU8sR0FBSSxHQUFHLEtBQUssS0FBSyxJQUFJLEdBQUcsS0FBSyxNQUFNLElBQUksR0FBRyxLQUFLLEtBQUssQUFBQyxDQUFDOztBQUVqRSxvQkFBSSxPQUFPLEdBQUcsU0FBUyxDQUFBO0FBQ3ZCLG9CQUFJLE9BQU8sRUFBRTtBQUNULDJCQUFPLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUMxQywyQkFBTyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7QUFDeEIsMkJBQU8sQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDOzs7O2lCQUlqQyxNQUFNO0FBQ0gsK0JBQU8sR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFDO3FCQUN6Qjs7QUFFRCx1QkFBTyxDQUFDLE1BQU0sR0FBRyxZQUFNO0FBQ25CLHdCQUFJO0FBQ0EsOEJBQUssVUFBVSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztxQkFDckMsQ0FDRCxPQUFPLENBQUMsRUFBRTtBQUNOLCtCQUFPLENBQUMsR0FBRyxnQkFBYSxNQUFLLElBQUksa0NBQTJCLE1BQUssTUFBTSxTQUFLLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztxQkFDM0Y7QUFDRCwyQkFBTyxPQUFNLENBQUM7aUJBQ2pCLENBQUM7QUFDRix1QkFBTyxDQUFDLE9BQU8sR0FBRyxVQUFBLENBQUMsRUFBSTs7QUFFbkIsMkJBQU8sQ0FBQyxHQUFHLGdCQUFhLE1BQUssSUFBSSxrQ0FBMkIsTUFBSyxNQUFNLFNBQUssQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ3hGLDJCQUFPLE9BQU0sQ0FBQztpQkFDakIsQ0FBQzs7OztBQUlGLG9CQUFJLEVBQUUsNEJBQVUsSUFBSSxNQUFLLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLE9BQU8sQ0FBQSxBQUFDLEVBQUU7QUFDdEQsMkJBQU8sQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO2lCQUNyQzs7QUFFRCx1QkFBTyxDQUFDLEdBQUcsR0FBRyxNQUFLLE1BQU0sQ0FBQztBQUMxQixvQkFBSSxPQUFPLEVBQUU7QUFDVCwwQkFBSyxVQUFVLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO2lCQUNyQzthQUNKLENBQUMsQ0FBQztBQUNILG1CQUFPLElBQUksQ0FBQyxPQUFPLENBQUM7U0FDdkI7Ozs7O2VBR00saUJBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQWdCO2dCQUFkLE9BQU8seURBQUcsRUFBRTs7QUFDckMsZ0JBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO0FBQ25CLGdCQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQzs7QUFFckIsZ0JBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO0FBQ25CLGdCQUFJLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQzs7QUFFekIsZ0JBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDckIsZ0JBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUM7O0FBRTNCLGdCQUFJLENBQUMsT0FBTyxHQUFHLFNBQVEsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3JDLG1CQUFPLElBQUksQ0FBQyxPQUFPLENBQUM7U0FDdkI7Ozs7O2VBR1Msb0JBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRTs7O0FBQ3pCLGdCQUFJLEVBQUUsR0FBRyxPQUFPLENBQUM7OztBQUdqQixnQkFBSSxPQUFPLE9BQU8sS0FBSyxRQUFRLEVBQUU7QUFDN0IsdUJBQU8sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2FBQzdDOztBQUVELGdCQUFJLE9BQU8sWUFBWSxpQkFBaUIsSUFDcEMsT0FBTyxZQUFZLGdCQUFnQixJQUNuQyxPQUFPLFlBQVksZ0JBQWdCLEVBQUU7QUFDckMsb0JBQUksQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFDO0FBQ3RCLG9CQUFJLENBQUMsVUFBVSxHQUFHLFNBQVMsQ0FBQzs7QUFFNUIsb0JBQUksT0FBTyxZQUFZLGdCQUFnQixFQUFFO0FBQ3JDLDJCQUFPLENBQUMsZ0JBQWdCLENBQUMsZ0JBQWdCLEVBQUUsWUFBTTtBQUM3QywrQkFBSyxVQUFVLEdBQUcsV0FBVyxDQUFDLFlBQUk7QUFDOUIsbUNBQUssTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO3lCQUN4QixFQUFFLEVBQUUsQ0FBQyxDQUFDO3FCQUNWLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDVCwyQkFBTyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxZQUFNO0FBQ3BDLCtCQUFPLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztBQUN4QiwrQkFBTyxDQUFDLElBQUksRUFBRSxDQUFDO3FCQUNsQixFQUFFLElBQUksQ0FBQyxDQUFDO2lCQUNaLE1BQU07QUFDSCx3QkFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztpQkFDeEI7QUFDRCxvQkFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQzthQUM5QixNQUNJO0FBQ0Qsb0JBQUksR0FBRyw2Q0FBMEMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsc0JBQW9CLENBQUM7QUFDeEYsbUJBQUcsK0RBQStELENBQUM7QUFDbkUsdUJBQU8sQ0FBQyxHQUFHLGdCQUFhLElBQUksQ0FBQyxJQUFJLFlBQU0sR0FBRyxFQUFJLE9BQU8sQ0FBQyxDQUFDO2FBQzFEOztBQUVELGdCQUFJLENBQUMsT0FBTyxHQUFHLFNBQVEsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3JDLG1CQUFPLElBQUksQ0FBQyxPQUFPLENBQUM7U0FDdkI7Ozs7O2VBR0ssa0JBQWU7Z0JBQWQsT0FBTyx5REFBRyxFQUFFOztBQUNmLGdCQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRTtBQUNiLHVCQUFPO2FBQ1Y7O0FBRUQsZ0JBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNaLGdCQUFJLENBQUMsRUFBRSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLG1CQUFtQixFQUFHLE9BQU8sQ0FBQyxtQkFBbUIsS0FBSyxLQUFLLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBRSxDQUFDO0FBQ3pHLGdCQUFJLENBQUMsRUFBRSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLDhCQUE4QixFQUFFLE9BQU8sQ0FBQyw4QkFBOEIsSUFBSSxLQUFLLENBQUMsQ0FBQzs7O0FBRzdHLGdCQUFJLElBQUksQ0FBQyxVQUFVLEtBQUssU0FBUyxLQUM1QixBQUFDLElBQUksQ0FBQyxNQUFNLFlBQVksaUJBQWlCLElBQ3hDLElBQUksQ0FBQyxNQUFNLFlBQVksZ0JBQWdCLEFBQUMsSUFDeEMsSUFBSSxDQUFDLE1BQU0sWUFBWSxnQkFBZ0IsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxBQUFDLEVBQUU7QUFDckUsb0JBQUksSUFBSSxDQUFDLE1BQU0sWUFBWSxnQkFBZ0IsRUFBRTtBQUN6Qyx3QkFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQztBQUNwQyx3QkFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQztpQkFDekMsTUFBTTtBQUNILHdCQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO0FBQy9CLHdCQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO2lCQUNwQztBQUNELG9CQUFJLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2FBQzdHOztpQkFFSSxJQUFJLElBQUksQ0FBQyxVQUFVLEtBQUssTUFBTSxFQUFFO0FBQ2pDLHdCQUFJLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7aUJBQ3pJO0FBQ0QsZ0JBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQ2hDOzs7OztlQUdZLHdCQUFlO2dCQUFkLE9BQU8seURBQUcsRUFBRTs7QUFDdEIsZ0JBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFO0FBQ2IsdUJBQU87YUFDVjs7QUFFRCxnQkFBSSxDQUFDLFFBQVEsR0FBRyw2QkFBVyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksNkJBQVcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ2xFLGdCQUFJLGFBQWEsR0FBSSxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsR0FBRyxRQUFRLEFBQUMsQ0FBQztBQUMxRCxnQkFBSSxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUMsU0FBUyxJQUFJLGFBQWEsQ0FBQzs7QUFFcEQsZ0JBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUM7QUFDakIsZ0JBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQzs7Ozs7O0FBTVosZ0JBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtBQUNmLGtCQUFFLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsRUFBRSxDQUFDLGNBQWMsRUFBRSxPQUFPLENBQUMsY0FBYyxJQUFLLE9BQU8sQ0FBQyxNQUFNLElBQUksRUFBRSxDQUFDLE1BQU0sQUFBQyxJQUFJLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUNoSSxrQkFBRSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLEVBQUUsQ0FBQyxjQUFjLEVBQUUsT0FBTyxDQUFDLGNBQWMsSUFBSyxPQUFPLENBQUMsTUFBTSxJQUFJLEVBQUUsQ0FBQyxNQUFNLEFBQUMsSUFBSSxFQUFFLENBQUMsYUFBYSxDQUFDLENBQUM7O0FBRWhJLG9CQUFJLElBQUksQ0FBQyxTQUFTLEtBQUssUUFBUSxFQUFFO0FBQzdCLHNCQUFFLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsRUFBRSxDQUFDLGtCQUFrQixFQUFFLEVBQUUsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0FBQ2hGLHNCQUFFLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsRUFBRSxDQUFDLGtCQUFrQixFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNsRSxzQkFBRSxDQUFDLGNBQWMsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUM7aUJBQ3BDLE1BQ0ksSUFBSSxJQUFJLENBQUMsU0FBUyxLQUFLLFFBQVEsRUFBRTtBQUNsQyxzQkFBRSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLEVBQUUsQ0FBQyxrQkFBa0IsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDbEUsc0JBQUUsQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxFQUFFLENBQUMsa0JBQWtCLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2lCQUNyRSxNQUNJLElBQUksSUFBSSxDQUFDLFNBQVMsS0FBSyxTQUFTLEVBQUU7QUFDbkMsc0JBQUUsQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxFQUFFLENBQUMsa0JBQWtCLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ25FLHNCQUFFLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsRUFBRSxDQUFDLGtCQUFrQixFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQztpQkFDdEU7YUFDSixNQUNJOzs7QUFHRCxrQkFBRSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLEVBQUUsQ0FBQyxjQUFjLEVBQUUsRUFBRSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQ3JFLGtCQUFFLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsRUFBRSxDQUFDLGNBQWMsRUFBRSxFQUFFLENBQUMsYUFBYSxDQUFDLENBQUM7O0FBRXJFLG9CQUFJLElBQUksQ0FBQyxTQUFTLEtBQUssUUFBUSxFQUFFO0FBQzdCLHdCQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQztpQkFDN0I7O0FBRUQsb0JBQUksSUFBSSxDQUFDLFNBQVMsS0FBSyxTQUFTLEVBQUU7QUFDOUIsc0JBQUUsQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxFQUFFLENBQUMsa0JBQWtCLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ25FLHNCQUFFLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsRUFBRSxDQUFDLGtCQUFrQixFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQztpQkFDdEUsTUFDSTs7QUFDRCxzQkFBRSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLEVBQUUsQ0FBQyxrQkFBa0IsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDbEUsc0JBQUUsQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxFQUFFLENBQUMsa0JBQWtCLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2lCQUNyRTthQUNKO1NBQ0o7OztXQXZRZ0IsT0FBTzs7O3FCQUFQLE9BQU87QUEyUTVCLE9BQU8sQ0FBQyxpQkFBaUIsR0FBRyxVQUFVLEVBQUUsRUFBRTtBQUN0QyxXQUFPLEVBQUUsQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLGdCQUFnQixDQUFDLENBQUM7Q0FDL0MsQ0FBQzs7O0FBR0YsT0FBTyxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7OztBQ3JSeEIsSUFBSSxTQUFTLEdBQUcsRUFBRSxDQUFDOzs7Ozs7OztBQVFuQixTQUFTLFlBQVksQ0FBQyxHQUFHLEVBQUU7QUFDdkIsV0FBTyw4S0FJTyxHQUFHLHlDQUdwQixDQUFDO0NBQ0Q7Ozs7OztBQU1ELElBQUksbUJBQW1CLDJJQUd0QixDQUFDOzs7Ozs7QUFNRixJQUFJLGFBQWEsMkpBR2hCLENBQUM7Ozs7Ozs7Ozs7Ozs7QUFZSyxTQUFTLFVBQVUsQ0FBRSxNQUFNLEVBQUUsVUFBVSxFQUFFO0FBQzVDLGFBQVMsUUFBUSxDQUFDLEdBQUcsRUFBRTtBQUNuQixZQUFJLFNBQVMsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDO0FBQ2xDLFlBQUksU0FBUyxFQUFFO0FBQ1gscUJBQVMsQ0FBQyxTQUFTLEdBQUcsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQzNDO0tBQ0o7O0FBRUQsUUFBSSxDQUFDLE1BQU0sQ0FBQyxxQkFBcUIsRUFBRTtBQUMvQixnQkFBUSxDQUFDLG1CQUFtQixDQUFDLENBQUM7QUFDOUIsZUFBTyxJQUFJLENBQUM7S0FDZjs7QUFFRCxRQUFJLE9BQU8sR0FBRyxlQUFlLENBQUMsTUFBTSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQ2xELFFBQUksQ0FBQyxPQUFPLEVBQUU7QUFDVixnQkFBUSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0tBQzNCO0FBQ0QsV0FBTyxDQUFDLFlBQVksQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0FBQ2pELFdBQU8sT0FBTyxDQUFDO0NBQ2xCOzs7Ozs7Ozs7QUFRTSxTQUFTLGVBQWUsQ0FBQyxNQUFNLEVBQUUsVUFBVSxFQUFFO0FBQ2hELFFBQUksS0FBSyxHQUFHLENBQUMsT0FBTyxFQUFFLG9CQUFvQixDQUFDLENBQUM7QUFDNUMsUUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDO0FBQ25CLFNBQUssSUFBSSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsR0FBRyxLQUFLLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFO0FBQ3RDLFlBQUk7QUFDQSxtQkFBTyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1NBQ3RELENBQUMsT0FBTSxDQUFDLEVBQUU7QUFDUCxnQkFBSSxPQUFPLEVBQUU7QUFDVCxzQkFBTTthQUNUO1NBQ0o7S0FDSjtBQUNELFdBQU8sT0FBTyxDQUFDO0NBQ2xCOzs7Ozs7QUFLTSxTQUFTLFlBQVksQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTtBQUM3QyxRQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDOztBQUVqQixRQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ25DLE1BQUUsQ0FBQyxZQUFZLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ2hDLE1BQUUsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRXpCLFFBQUksUUFBUSxHQUFHLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLGNBQWMsQ0FBQyxDQUFDOztBQUVoRSxRQUFJLENBQUMsUUFBUSxFQUFFOztBQUVYLGlCQUFTLEdBQUcsRUFBRSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3hDLGVBQU8sQ0FBQyxLQUFLLENBQUMsNkJBQTZCLEdBQUcsTUFBTSxHQUFHLEdBQUcsR0FBRyxTQUFTLENBQUMsQ0FBQztBQUN4RSxZQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsQ0FBQyxDQUFDO0FBQ3hGLFVBQUUsQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDeEIsZUFBTyxJQUFJLENBQUM7S0FDZjs7QUFFRCxXQUFPLE1BQU0sQ0FBQztDQUNqQjs7Ozs7Ozs7Ozs7QUFVTSxTQUFTLGFBQWEsQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQUU7QUFDbkUsUUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQzs7QUFFakIsUUFBSSxPQUFPLEdBQUcsRUFBRSxDQUFDLGFBQWEsRUFBRSxDQUFDO0FBQ2pDLFNBQUssSUFBSSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFO0FBQ3hDLFVBQUUsQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0tBQ3pDO0FBQ0QsUUFBSSxVQUFVLEVBQUU7QUFDWixhQUFLLElBQUksRUFBRSxHQUFHLENBQUMsRUFBRSxFQUFFLEdBQUcsVUFBVSxDQUFDLE1BQU0sRUFBRSxFQUFFLEVBQUUsRUFBRTtBQUMzQyxjQUFFLENBQUMsa0JBQWtCLENBQ3JCLE9BQU8sRUFDUCxZQUFZLEdBQUcsWUFBWSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFDcEMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDbkI7S0FDSjtBQUNELE1BQUUsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUM7OztBQUd4QixRQUFJLE1BQU0sR0FBRyxFQUFFLENBQUMsbUJBQW1CLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUM3RCxRQUFJLENBQUMsTUFBTSxFQUFFOztBQUVULGlCQUFTLEdBQUcsRUFBRSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQzFDLGVBQU8sQ0FBQyxHQUFHLENBQUMsMkJBQTJCLEdBQUcsU0FBUyxDQUFDLENBQUM7QUFDckQsVUFBRSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUMxQixlQUFPLElBQUksQ0FBQztLQUNmO0FBQ0QsV0FBTyxPQUFPLENBQUM7Q0FDbEI7Ozs7O0FBSU0sU0FBUyxhQUFhLENBQUMsUUFBUSxFQUFpQjtRQUFmLE1BQU0seURBQUcsSUFBSTs7QUFDakQsUUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDOztBQUVoQixTQUFLLElBQUksS0FBSSxJQUFJLFFBQVEsRUFBRTtBQUN2QixZQUFJLE9BQU8sR0FBRyxRQUFRLENBQUMsS0FBSSxDQUFDLENBQUM7QUFDN0IsWUFBSSxDQUFDLFlBQUEsQ0FBQzs7QUFFTixZQUFJLE1BQU0sRUFBRTtBQUNSLGlCQUFJLEdBQUcsTUFBTSxHQUFHLEdBQUcsR0FBRyxLQUFJLENBQUM7U0FDOUI7OztBQUdELFlBQUksT0FBTyxPQUFPLEtBQUssUUFBUSxFQUFFO0FBQzdCLGtCQUFNLENBQUMsSUFBSSxDQUFDO0FBQ1Isb0JBQUksRUFBRSxPQUFPO0FBQ2Isc0JBQU0sRUFBRSxJQUFJO0FBQ1osb0JBQUksRUFBSixLQUFJO0FBQ0oscUJBQUssRUFBRSxPQUFPO2FBQ2pCLENBQUMsQ0FBQztTQUNOOzthQUVJLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRTs7QUFFN0Isb0JBQUksT0FBTyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssUUFBUSxFQUFFOztBQUVoQyx3QkFBSSxPQUFPLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtBQUN0Qiw4QkFBTSxDQUFDLElBQUksQ0FBQztBQUNSLGdDQUFJLEVBQUUsT0FBTztBQUNiLGtDQUFNLEVBQUUsSUFBSTtBQUNaLGdDQUFJLEVBQUosS0FBSTtBQUNKLGlDQUFLLEVBQUUsT0FBTzt5QkFDakIsQ0FBQyxDQUFDO3FCQUNOOzt5QkFFSSxJQUFJLE9BQU8sQ0FBQyxNQUFNLElBQUksQ0FBQyxJQUFJLE9BQU8sQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFO0FBQ2pELGtDQUFNLENBQUMsSUFBSSxDQUFDO0FBQ1Isb0NBQUksRUFBRSxLQUFLLEdBQUcsT0FBTyxDQUFDLE1BQU07QUFDNUIsc0NBQU0sRUFBRSxPQUFPLENBQUMsTUFBTSxHQUFHLElBQUk7QUFDN0Isb0NBQUksRUFBSixLQUFJO0FBQ0oscUNBQUssRUFBRSxPQUFPOzZCQUNqQixDQUFDLENBQUM7eUJBQ047OzZCQUVJLElBQUksT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7QUFDekIsc0NBQU0sQ0FBQyxJQUFJLENBQUM7QUFDUix3Q0FBSSxFQUFFLFNBQVM7QUFDZiwwQ0FBTSxFQUFFLEtBQUs7QUFDYix3Q0FBSSxFQUFFLEtBQUksR0FBRyxLQUFLO0FBQ2xCLHlDQUFLLEVBQUUsT0FBTztpQ0FDakIsQ0FBQyxDQUFDOzZCQUNOOztpQkFFSjs7cUJBRUksSUFBSSxPQUFPLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxRQUFRLEVBQUU7QUFDckMsOEJBQU0sQ0FBQyxJQUFJLENBQUM7QUFDUixnQ0FBSSxFQUFFLFdBQVc7QUFDakIsa0NBQU0sRUFBRSxJQUFJO0FBQ1osZ0NBQUksRUFBRSxLQUFJO0FBQ1YsaUNBQUssRUFBRSxPQUFPO3lCQUNqQixDQUFDLENBQUM7cUJBQ047O3lCQUVJLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxPQUFPLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxRQUFRLEVBQUU7O0FBRXJFLGdDQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFOztBQUVsRCxxQ0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ2pDLDBDQUFNLENBQUMsSUFBSSxDQUFDO0FBQ1IsNENBQUksRUFBRSxLQUFLLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU07QUFDL0IsOENBQU0sRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLElBQUk7QUFDaEMsNENBQUksRUFBRSxLQUFJLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHO0FBQzFCLDZDQUFLLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztxQ0FDcEIsQ0FBQyxDQUFDO2lDQUNOOzZCQUNKOzt5QkFFSjs7NkJBRUksSUFBSSxPQUFPLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxRQUFRLEVBQUU7QUFDckMscUNBQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTs7QUFFakMsMENBQU0sQ0FBQyxJQUFJLE1BQUEsQ0FBWCxNQUFNLHFCQUFTLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLEVBQUMsQ0FBQztpQ0FDbkU7NkJBQ0o7YUFDSjs7aUJBRUksSUFBSSxPQUFPLE9BQU8sS0FBSyxTQUFTLEVBQUU7QUFDbkMsMEJBQU0sQ0FBQyxJQUFJLENBQUM7QUFDUiw0QkFBSSxFQUFFLE1BQU07QUFDWiw4QkFBTSxFQUFFLElBQUk7QUFDWiw0QkFBSSxFQUFKLEtBQUk7QUFDSiw2QkFBSyxFQUFFLE9BQU87cUJBQ2pCLENBQUMsQ0FBQztpQkFDTjs7cUJBRUksSUFBSSxPQUFPLE9BQU8sS0FBSyxRQUFRLEVBQUU7QUFDbEMsOEJBQU0sQ0FBQyxJQUFJLENBQUM7QUFDUixnQ0FBSSxFQUFFLFdBQVc7QUFDakIsa0NBQU0sRUFBRSxJQUFJO0FBQ1osZ0NBQUksRUFBSixLQUFJO0FBQ0osaUNBQUssRUFBRSxPQUFPO3lCQUNqQixDQUFDLENBQUM7cUJBQ047O3lCQUVJLElBQUksT0FBTyxPQUFPLEtBQUssUUFBUSxFQUFFOztBQUVsQyxrQ0FBTSxDQUFDLElBQUksTUFBQSxDQUFYLE1BQU0scUJBQVMsYUFBYSxDQUFDLE9BQU8sRUFBRSxLQUFJLENBQUMsRUFBQyxDQUFDO3lCQUNoRDs7S0FFSjtBQUNELFdBQU8sTUFBTSxDQUFDO0NBQ2pCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3hRTSxTQUFTLGVBQWUsQ0FBQyxNQUFNLEVBQUU7QUFDcEMsV0FBTyxBQUFDLEFBQUMsTUFBTSxDQUFDLHFCQUFxQixFQUFFLENBQUMsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEdBQUksQ0FBQyxJQUMzRCxNQUFNLENBQUMscUJBQXFCLEVBQUUsQ0FBQyxHQUFHLElBQUksTUFBTSxDQUFDLFdBQVcsSUFBSSxRQUFRLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQSxBQUFDLEFBQUMsQ0FBQztDQUM1Rzs7QUFFTSxTQUFTLFVBQVUsQ0FBQyxLQUFLLEVBQUU7QUFDOUIsV0FBTyxDQUFDLEtBQUssR0FBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQU0sQ0FBQyxDQUFDO0NBQ3RDOztBQUVNLFNBQVMsUUFBUSxHQUFJO0FBQ3hCLFdBQU8saUNBQWdDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUM7TUFBQztDQUNyRTs7QUFBQSxDQUFDOztBQUVLLFNBQVMscUJBQXFCLENBQUMsQ0FBQyxFQUFFO0FBQ3JDLE1BQUUsQ0FBQyxDQUFDO0FBQ0osU0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFFO0FBQzdCLFNBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUNsQjtBQUNELFdBQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztDQUNoQjs7QUFFTSxTQUFTLGtCQUFrQixDQUFDLEdBQUcsRUFBRSxNQUFNLEVBQUU7QUFDNUMsUUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLFFBQVEsRUFBRSxDQUFDO0FBQ3ZCLFdBQU8sQ0FBQyxDQUFDLE1BQU0sR0FBRyxNQUFNLEVBQUU7QUFDdEIsU0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7S0FDZjtBQUNELFdBQU8sQ0FBQyxDQUFDO0NBQ1o7O0FBRU0sU0FBUyxXQUFXLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRTtBQUNyQyxRQUFJLElBQUksR0FBRyxNQUFNLENBQUMscUJBQXFCLEVBQUUsQ0FBQztBQUMxQyxXQUFPO0FBQ0gsU0FBQyxFQUFFLEdBQUcsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLElBQUk7QUFDMUIsU0FBQyxFQUFFLEdBQUcsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUc7S0FDNUIsQ0FBQztDQUNMOztBQUVNLFNBQVMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDekIsUUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFO0FBQ1IsZUFBTyxDQUFDLENBQUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDO0tBQ3hDO0FBQ0QsV0FBTyxLQUFLLENBQUM7Q0FDaEI7O0FBRU0sU0FBUyxjQUFjLENBQUUsTUFBTSxFQUFFO0FBQ3BDLFFBQUksU0FBUyxHQUFHLFVBQVMsQ0FBQzs7QUFFMUIsV0FBTyxlQUFjLE1BQU0sRUFBRTs7QUFFekIsaUJBQVMsRUFBQSxtQkFBQyxRQUFRLEVBQUU7QUFDaEIscUJBQVMsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7U0FDM0I7O0FBRUQsVUFBRSxFQUFBLFlBQUMsSUFBSSxFQUFFLENBQUMsRUFBRTtBQUNSLGdCQUFJLFFBQVEsR0FBRyxFQUFFLENBQUM7QUFDbEIsb0JBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDbkIscUJBQVMsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7U0FDM0I7O0FBRUQsbUJBQVcsRUFBQSxxQkFBQyxRQUFRLEVBQUU7QUFDbEIscUJBQVMsVUFBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQzlCOztBQUVELHNCQUFjLEVBQUEsMEJBQUc7QUFDYixxQkFBUyxDQUFDLEtBQUssRUFBRSxDQUFDO1NBQ3JCOztBQUVELGVBQU8sRUFBQSxpQkFBQyxLQUFLLEVBQVc7Ozs7OztrREFBTixJQUFJO0FBQUosd0JBQUk7OztBQUNsQixrREFBcUIsU0FBUyw0R0FBRTt3QkFBdkIsUUFBUTs7QUFDYix3QkFBSSxPQUFPLFFBQVEsQ0FBQyxLQUFLLENBQUMsS0FBSyxVQUFVLEVBQUU7QUFDdkMsZ0NBQVEsQ0FBQyxLQUFLLE9BQUMsQ0FBZixRQUFRLEVBQVcsSUFBSSxDQUFDLENBQUM7cUJBQzVCO2lCQUNKOzs7Ozs7Ozs7Ozs7Ozs7U0FDSjtLQUNKLENBQUMsQ0FBQztDQUNOOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMzRU0sU0FBUyxjQUFjLENBQUUsTUFBTSxFQUFFO0FBQ3BDLFFBQUksU0FBUyxHQUFHLFVBQVMsQ0FBQzs7QUFFMUIsV0FBTyxlQUFjLE1BQU0sRUFBRTs7QUFFekIsVUFBRSxFQUFBLFlBQUMsSUFBSSxFQUFFLENBQUMsRUFBRTtBQUNSLGdCQUFJLFFBQVEsR0FBRyxFQUFFLENBQUM7QUFDbEIsb0JBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDbkIscUJBQVMsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7U0FDM0I7O0FBRUQsV0FBRyxFQUFBLGFBQUMsSUFBSSxFQUFFLENBQUMsRUFBRTtBQUNULGdCQUFJLENBQUMsRUFBRTtBQUNILG9CQUFJLFFBQVEsR0FBRyxFQUFFLENBQUM7QUFDbEIsd0JBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDbkIseUJBQVMsVUFBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO2FBQzlCLE1BQ0k7Ozs7OztBQUNELHNEQUFpQixTQUFTLDRHQUFFOzRCQUFuQixJQUFJOzs7Ozs7QUFDVCwrREFBZ0IsYUFBWSxJQUFJLENBQUMsaUhBQUU7b0NBQTFCLEdBQUc7O0FBQ1Isb0NBQUksR0FBRyxLQUFLLElBQUksRUFBRTtBQUNkLDZDQUFTLFVBQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN2QiwyQ0FBTztpQ0FDVjs2QkFDSjs7Ozs7Ozs7Ozs7Ozs7O3FCQUNKOzs7Ozs7Ozs7Ozs7Ozs7YUFDSjtTQUNKOztBQUVELHlCQUFpQixFQUFBLDZCQUFHOzs7Ozs7QUFDaEIsbURBQWlCLFNBQVMsaUhBQUU7d0JBQW5CLElBQUk7O0FBQ1QsMkJBQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7aUJBQ3JCOzs7Ozs7Ozs7Ozs7Ozs7U0FDSjs7QUFFRCxpQkFBUyxFQUFBLG1CQUFDLFFBQVEsRUFBRTtBQUNoQixxQkFBUyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUMzQjs7QUFFRCxtQkFBVyxFQUFBLHFCQUFDLFFBQVEsRUFBRTtBQUNsQixxQkFBUyxVQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7U0FDOUI7O0FBRUQsc0JBQWMsRUFBQSwwQkFBRztBQUNiLHFCQUFTLENBQUMsS0FBSyxFQUFFLENBQUM7U0FDckI7O0FBRUQsZUFBTyxFQUFBLGlCQUFDLEtBQUssRUFBVzs7Ozs7O2tEQUFOLElBQUk7QUFBSix3QkFBSTs7O0FBQ2xCLG1EQUFxQixTQUFTLGlIQUFFO3dCQUF2QixRQUFROztBQUNiLHdCQUFJLE9BQU8sUUFBUSxDQUFDLEtBQUssQ0FBQyxLQUFLLFVBQVUsRUFBRTtBQUN2QyxnQ0FBUSxDQUFDLEtBQUssT0FBQyxDQUFmLFFBQVEsRUFBVyxJQUFJLENBQUMsQ0FBQztxQkFDNUI7aUJBQ0o7Ozs7Ozs7Ozs7Ozs7OztTQUNKO0tBQ0osQ0FBQyxDQUFDO0NBQ047Ozs7Ozs7OztBQ3ZERDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDalBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7OztR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Q0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDNUMsb0JBQUksS0FBSyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDMUMsb0JBQUksTUFBTSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDM0Msb0JBQUksS0FBSyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDMUMsb0JBQUksUUFBUSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDN0Msb0JBQUksTUFBTSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDOUMsb0JBQUksVUFBVSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDL0Msb0JBQUksVUFBVSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDL0Msb0JBQUksV0FBVyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7O0FBRWhELHFCQUFLLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxVQUFVLEdBQUcsdUJBQXVCLENBQUM7QUFDNUQscUJBQUssQ0FBQyxLQUFLLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7QUFDM0MscUJBQUssQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUM7QUFDNUMscUJBQUssQ0FBQyxLQUFLLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7QUFDM0MsbUJBQUcsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUM7QUFDNUMsb0JBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUM7QUFDMUMsb0JBQUksQ0FBQyxLQUFLLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7QUFDMUMscUJBQUss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QUFJLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO0FBQzNELGlCQUFLLENBQUMsS0FBSyxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQzs7O0FBRzFELGdCQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztBQUM5QixnQkFBSSxlQUFlLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQztBQUMxRCxnQkFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDdEIsZ0JBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQzFDLGdCQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUMxQyxnQkFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksZUFBZSxHQUFHLENBQUMsQ0FBQSxBQUFDLENBQUM7O0FBRTVDLGdCQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7O0FBRTNELGdCQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQzFELGdCQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsZUFBZSxHQUFHLE1BQU0sR0FDakQsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUNwQixL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SSxRQUFRLEdBQUcsSUFBSSxHQUFHLEtBQUssQ0FBQzs7QUFFNUIsZ0JBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7O0FBRTNCLGdCQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsR0FBRyxFQUFFO0FBQzlELHVCQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFBLElBQUssSUFBSSxDQUFDLEtBQUssR0FBRyxHQUFHLENBQUEsQUFBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7YUFDakY7O0FBRUQsZ0JBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7QUFDckMsZ0JBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDckIsaUJBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxRQUFRLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDL0Isb0JBQUksQ0FBQyxHQUFHLEFBQUMsQ0FBQyxJQUFJLElBQUksR0FBRyxDQUFDLENBQUEsQUFBQyxLQUFLLENBQUMsR0FBSSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksR0FBRyxBQUFDLENBQUMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFBLEFBQUMsS0FBSyxDQUFDLEdBQUksSUFBSSxDQUFDLE1BQU0sR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUM7QUFDckgsb0JBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsT0FBTyxFQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQzNELG9CQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLE9B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RSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUU7QUFDNUQsT0FBRyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxFQUFFO0FBQ3BELE9BQUcsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxFQUFFO0FBQzlDLE9BQUcsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO0FBQ3hDLFNBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRTtBQUN4QixPQUFHLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDLEVBQUU7Q0FDOUIsQ0FBQzs7O0FBR04sSUFBSSxTQUFTLEdBQUc7QUFDUixLQUFDLEVBQUUsQ0FBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsQ0FBQztBQUNyQyxLQUFDLEVBQUUsQ0FBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsQ0FBQztBQUNyQyxLQUFDLEVBQUUsQ0FBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsQ0FBQztBQUNyQyxLQUFDLEVBQUUsQ0FBRSxTQUFTLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxTQUFTLENBQUM7QUFDdkMsS0FBQyxFQUFFLENBQUMsQ0FBQyxT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QUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3pGLHNCQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDekYseUJBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7YUFDMUI7QUFDRCxtQkFBTyxTQUFTLENBQUM7U0FDcEI7OztlQUVLLGtCQUFHO0FBQ0wsZ0JBQUksQ0FBQyxHQUFHLElBQUksTUFBTSxFQUFFLENBQUM7QUFDckIsZ0JBQUksV0FBVyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQSxBQUFDLEdBQzVGLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQSxBQUFDLEdBQzlGLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQSxBQUFDLENBQUM7QUFDbkgsZ0JBQUksTUFBTSxHQUFHLENBQUMsR0FBRyxXQUFXLENBQUM7QUFDN0IsYUFBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUEsR0FBSSxNQUFNLENBQUM7QUFDckcsYUFBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUEsQUFBQyxHQUFHLE1BQU0sQ0FBQztBQUN0RyxhQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQSxHQUFJLE1BQU0sQ0FBQztBQUNyRyxhQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQSxBQUFDLEdBQUcsTUFBTSxDQUFDO0FBQ3RHLGFBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLEdBQUksTUFBTSxDQUFDO0FBQ3JHLGFBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLEFBQUMsR0FBRyxNQUFNLENBQUM7QUFDdEcsYUFBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUEsR0FBSSxNQUFNLENBQUM7QUFDckcsYUFBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUEsQUFBQyxHQUFHLE1BQU0sQ0FBQztB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dGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL2dldC1pdGVyYXRvclwiKSwgX19lc01vZHVsZTogdHJ1ZSB9OyIsIm1vZHVsZS5leHBvcnRzID0geyBcImRlZmF1bHRcIjogcmVxdWlyZShcImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvYXNzaWduXCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07IiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9jcmVhdGVcIiksIF9fZXNNb2R1bGU6IHRydWUgfTsiLCJtb2R1bGUuZXhwb3J0cyA9IHsgXCJkZWZhdWx0XCI6IHJlcXVpcmUoXCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eVwiKSwgX19lc01vZHVsZTogdHJ1ZSB9OyIsIm1vZHVsZS5leHBvcnRzID0geyBcImRlZmF1bHRcIjogcmVxdWlyZShcImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yXCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07IiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzXCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07IiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9zZXQtcHJvdG90eXBlLW9mXCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07IiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL3Byb21pc2VcIiksIF9fZXNNb2R1bGU6IHRydWUgfTsiLCJtb2R1bGUuZXhwb3J0cyA9IHsgXCJkZWZhdWx0XCI6IHJlcXVpcmUoXCJjb3JlLWpzL2xpYnJhcnkvZm4vc2V0XCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn07XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfT2JqZWN0JGRlZmluZVByb3BlcnR5ID0gcmVxdWlyZShcImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5XCIpW1wiZGVmYXVsdFwiXTtcblxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSAoZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcblxuICAgICAgX09iamVjdCRkZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gICAgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gICAgcmV0dXJuIENvbnN0cnVjdG9yO1xuICB9O1xufSkoKTtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIF9PYmplY3QkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gcmVxdWlyZShcImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yXCIpW1wiZGVmYXVsdFwiXTtcblxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBmdW5jdGlvbiBnZXQoX3gsIF94MiwgX3gzKSB7XG4gIHZhciBfYWdhaW4gPSB0cnVlO1xuXG4gIF9mdW5jdGlvbjogd2hpbGUgKF9hZ2Fpbikge1xuICAgIHZhciBvYmplY3QgPSBfeCxcbiAgICAgICAgcHJvcGVydHkgPSBfeDIsXG4gICAgICAgIHJlY2VpdmVyID0gX3gzO1xuICAgIF9hZ2FpbiA9IGZhbHNlO1xuICAgIGlmIChvYmplY3QgPT09IG51bGwpIG9iamVjdCA9IEZ1bmN0aW9uLnByb3RvdHlwZTtcblxuICAgIHZhciBkZXNjID0gX09iamVjdCRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7XG5cbiAgICBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7XG5cbiAgICAgIGlmIChwYXJlbnQgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF94ID0gcGFyZW50O1xuICAgICAgICBfeDIgPSBwcm9wZXJ0eTtcbiAgICAgICAgX3gzID0gcmVjZWl2ZXI7XG4gICAgICAgIF9hZ2FpbiA9IHRydWU7XG4gICAgICAgIGRlc2MgPSBwYXJlbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnRpbnVlIF9mdW5jdGlvbjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKFwidmFsdWVcIiBpbiBkZXNjKSB7XG4gICAgICByZXR1cm4gZGVzYy52YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGdldHRlciA9IGRlc2MuZ2V0O1xuXG4gICAgICBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTtcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfT2JqZWN0JGNyZWF0ZSA9IHJlcXVpcmUoXCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2NyZWF0ZVwiKVtcImRlZmF1bHRcIl07XG5cbnZhciBfT2JqZWN0JHNldFByb3RvdHlwZU9mID0gcmVxdWlyZShcImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZlwiKVtcImRlZmF1bHRcIl07XG5cbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gZnVuY3Rpb24gKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTtcbiAgfVxuXG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IF9PYmplY3QkY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgdmFsdWU6IHN1YkNsYXNzLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH1cbiAgfSk7XG4gIGlmIChzdXBlckNsYXNzKSBfT2JqZWN0JHNldFByb3RvdHlwZU9mID8gX09iamVjdCRzZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xufTtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7XG4gICAgXCJkZWZhdWx0XCI6IG9ialxuICB9O1xufTtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCIvLyBDb2RlTWlycm9yLCBjb3B5cmlnaHQgKGMpIGJ5IE1hcmlqbiBIYXZlcmJla2UgYW5kIG90aGVyc1xuLy8gRGlzdHJpYnV0ZWQgdW5kZXIgYW4gTUlUIGxpY2Vuc2U6IGh0dHA6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbihmdW5jdGlvbihtb2QpIHtcbiAgaWYgKHR5cGVvZiBleHBvcnRzID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSA9PSBcIm9iamVjdFwiKSAvLyBDb21tb25KU1xuICAgIG1vZChyZXF1aXJlKFwiLi4vLi4vbGliL2NvZGVtaXJyb3JcIikpO1xuICBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSAvLyBBTURcbiAgICBkZWZpbmUoW1wiLi4vLi4vbGliL2NvZGVtaXJyb3JcIl0sIG1vZCk7XG4gIGVsc2UgLy8gUGxhaW4gYnJvd3NlciBlbnZcbiAgICBtb2QoQ29kZU1pcnJvcik7XG59KShmdW5jdGlvbihDb2RlTWlycm9yKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBub09wdGlvbnMgPSB7fTtcbiAgdmFyIG5vbldTID0gL1teXFxzXFx1MDBhMF0vO1xuICB2YXIgUG9zID0gQ29kZU1pcnJvci5Qb3M7XG5cbiAgZnVuY3Rpb24gZmlyc3ROb25XUyhzdHIpIHtcbiAgICB2YXIgZm91bmQgPSBzdHIuc2VhcmNoKG5vbldTKTtcbiAgICByZXR1cm4gZm91bmQgPT0gLTEgPyAwIDogZm91bmQ7XG4gIH1cblxuICBDb2RlTWlycm9yLmNvbW1hbmRzLnRvZ2dsZUNvbW1lbnQgPSBmdW5jdGlvbihjbSkge1xuICAgIGNtLnRvZ2dsZUNvbW1lbnQoKTtcbiAgfTtcblxuICBDb2RlTWlycm9yLmRlZmluZUV4dGVuc2lvbihcInRvZ2dsZUNvbW1lbnRcIiwgZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IG5vT3B0aW9ucztcbiAgICB2YXIgY20gPSB0aGlzO1xuICAgIHZhciBtaW5MaW5lID0gSW5maW5pdHksIHJhbmdlcyA9IHRoaXMubGlzdFNlbGVjdGlvbnMoKSwgbW9kZSA9IG51bGw7XG4gICAgZm9yICh2YXIgaSA9IHJhbmdlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgdmFyIGZyb20gPSByYW5nZXNbaV0uZnJvbSgpLCB0byA9IHJhbmdlc1tpXS50bygpO1xuICAgICAgaWYgKGZyb20ubGluZSA+PSBtaW5MaW5lKSBjb250aW51ZTtcbiAgICAgIGlmICh0by5saW5lID49IG1pbkxpbmUpIHRvID0gUG9zKG1pbkxpbmUsIDApO1xuICAgICAgbWluTGluZSA9IGZyb20ubGluZTtcbiAgICAgIGlmIChtb2RlID09IG51bGwpIHtcbiAgICAgICAgaWYgKGNtLnVuY29tbWVudChmcm9tLCB0bywgb3B0aW9ucykpIG1vZGUgPSBcInVuXCI7XG4gICAgICAgIGVsc2UgeyBjbS5saW5lQ29tbWVudChmcm9tLCB0bywgb3B0aW9ucyk7IG1vZGUgPSBcImxpbmVcIjsgfVxuICAgICAgfSBlbHNlIGlmIChtb2RlID09IFwidW5cIikge1xuICAgICAgICBjbS51bmNvbW1lbnQoZnJvbSwgdG8sIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY20ubGluZUNvbW1lbnQoZnJvbSwgdG8sIG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVFeHRlbnNpb24oXCJsaW5lQ29tbWVudFwiLCBmdW5jdGlvbihmcm9tLCB0bywgb3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IG5vT3B0aW9ucztcbiAgICB2YXIgc2VsZiA9IHRoaXMsIG1vZGUgPSBzZWxmLmdldE1vZGVBdChmcm9tKTtcbiAgICB2YXIgY29tbWVudFN0cmluZyA9IG9wdGlvbnMubGluZUNvbW1lbnQgfHwgbW9kZS5saW5lQ29tbWVudDtcbiAgICBpZiAoIWNvbW1lbnRTdHJpbmcpIHtcbiAgICAgIGlmIChvcHRpb25zLmJsb2NrQ29tbWVudFN0YXJ0IHx8IG1vZGUuYmxvY2tDb21tZW50U3RhcnQpIHtcbiAgICAgICAgb3B0aW9ucy5mdWxsTGluZXMgPSB0cnVlO1xuICAgICAgICBzZWxmLmJsb2NrQ29tbWVudChmcm9tLCB0bywgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBmaXJzdExpbmUgPSBzZWxmLmdldExpbmUoZnJvbS5saW5lKTtcbiAgICBpZiAoZmlyc3RMaW5lID09IG51bGwpIHJldHVybjtcbiAgICB2YXIgZW5kID0gTWF0aC5taW4odG8uY2ggIT0gMCB8fCB0by5saW5lID09IGZyb20ubGluZSA/IHRvLmxpbmUgKyAxIDogdG8ubGluZSwgc2VsZi5sYXN0TGluZSgpICsgMSk7XG4gICAgdmFyIHBhZCA9IG9wdGlvbnMucGFkZGluZyA9PSBudWxsID8gXCIgXCIgOiBvcHRpb25zLnBhZGRpbmc7XG4gICAgdmFyIGJsYW5rTGluZXMgPSBvcHRpb25zLmNvbW1lbnRCbGFua0xpbmVzIHx8IGZyb20ubGluZSA9PSB0by5saW5lO1xuXG4gICAgc2VsZi5vcGVyYXRpb24oZnVuY3Rpb24oKSB7XG4gICAgICBpZiAob3B0aW9ucy5pbmRlbnQpIHtcbiAgICAgICAgdmFyIGJhc2VTdHJpbmcgPSBudWxsO1xuICAgICAgICBmb3IgKHZhciBpID0gZnJvbS5saW5lOyBpIDwgZW5kOyArK2kpIHtcbiAgICAgICAgICB2YXIgbGluZSA9IHNlbGYuZ2V0TGluZShpKTtcbiAgICAgICAgICB2YXIgd2hpdGVzcGFjZSA9IGxpbmUuc2xpY2UoMCwgZmlyc3ROb25XUyhsaW5lKSk7XG4gICAgICAgICAgaWYgKGJhc2VTdHJpbmcgPT0gbnVsbCB8fCBiYXNlU3RyaW5nLmxlbmd0aCA+IHdoaXRlc3BhY2UubGVuZ3RoKSB7XG4gICAgICAgICAgICBiYXNlU3RyaW5nID0gd2hpdGVzcGFjZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IGZyb20ubGluZTsgaSA8IGVuZDsgKytpKSB7XG4gICAgICAgICAgdmFyIGxpbmUgPSBzZWxmLmdldExpbmUoaSksIGN1dCA9IGJhc2VTdHJpbmcubGVuZ3RoO1xuICAgICAgICAgIGlmICghYmxhbmtMaW5lcyAmJiAhbm9uV1MudGVzdChsaW5lKSkgY29udGludWU7XG4gICAgICAgICAgaWYgKGxpbmUuc2xpY2UoMCwgY3V0KSAhPSBiYXNlU3RyaW5nKSBjdXQgPSBmaXJzdE5vbldTKGxpbmUpO1xuICAgICAgICAgIHNlbGYucmVwbGFjZVJhbmdlKGJhc2VTdHJpbmcgKyBjb21tZW50U3RyaW5nICsgcGFkLCBQb3MoaSwgMCksIFBvcyhpLCBjdXQpKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IGZyb20ubGluZTsgaSA8IGVuZDsgKytpKSB7XG4gICAgICAgICAgaWYgKGJsYW5rTGluZXMgfHwgbm9uV1MudGVzdChzZWxmLmdldExpbmUoaSkpKVxuICAgICAgICAgICAgc2VsZi5yZXBsYWNlUmFuZ2UoY29tbWVudFN0cmluZyArIHBhZCwgUG9zKGksIDApKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBDb2RlTWlycm9yLmRlZmluZUV4dGVuc2lvbihcImJsb2NrQ29tbWVudFwiLCBmdW5jdGlvbihmcm9tLCB0bywgb3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IG5vT3B0aW9ucztcbiAgICB2YXIgc2VsZiA9IHRoaXMsIG1vZGUgPSBzZWxmLmdldE1vZGVBdChmcm9tKTtcbiAgICB2YXIgc3RhcnRTdHJpbmcgPSBvcHRpb25zLmJsb2NrQ29tbWVudFN0YXJ0IHx8IG1vZGUuYmxvY2tDb21tZW50U3RhcnQ7XG4gICAgdmFyIGVuZFN0cmluZyA9IG9wdGlvbnMuYmxvY2tDb21tZW50RW5kIHx8IG1vZGUuYmxvY2tDb21tZW50RW5kO1xuICAgIGlmICghc3RhcnRTdHJpbmcgfHwgIWVuZFN0cmluZykge1xuICAgICAgaWYgKChvcHRpb25zLmxpbmVDb21tZW50IHx8IG1vZGUubGluZUNvbW1lbnQpICYmIG9wdGlvbnMuZnVsbExpbmVzICE9IGZhbHNlKVxuICAgICAgICBzZWxmLmxpbmVDb21tZW50KGZyb20sIHRvLCBvcHRpb25zKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZW5kID0gTWF0aC5taW4odG8ubGluZSwgc2VsZi5sYXN0TGluZSgpKTtcbiAgICBpZiAoZW5kICE9IGZyb20ubGluZSAmJiB0by5jaCA9PSAwICYmIG5vbldTLnRlc3Qoc2VsZi5nZXRMaW5lKGVuZCkpKSAtLWVuZDtcblxuICAgIHZhciBwYWQgPSBvcHRpb25zLnBhZGRpbmcgPT0gbnVsbCA/IFwiIFwiIDogb3B0aW9ucy5wYWRkaW5nO1xuICAgIGlmIChmcm9tLmxpbmUgPiBlbmQpIHJldHVybjtcblxuICAgIHNlbGYub3BlcmF0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKG9wdGlvbnMuZnVsbExpbmVzICE9IGZhbHNlKSB7XG4gICAgICAgIHZhciBsYXN0TGluZUhhc1RleHQgPSBub25XUy50ZXN0KHNlbGYuZ2V0TGluZShlbmQpKTtcbiAgICAgICAgc2VsZi5yZXBsYWNlUmFuZ2UocGFkICsgZW5kU3RyaW5nLCBQb3MoZW5kKSk7XG4gICAgICAgIHNlbGYucmVwbGFjZVJhbmdlKHN0YXJ0U3RyaW5nICsgcGFkLCBQb3MoZnJvbS5saW5lLCAwKSk7XG4gICAgICAgIHZhciBsZWFkID0gb3B0aW9ucy5ibG9ja0NvbW1lbnRMZWFkIHx8IG1vZGUuYmxvY2tDb21tZW50TGVhZDtcbiAgICAgICAgaWYgKGxlYWQgIT0gbnVsbCkgZm9yICh2YXIgaSA9IGZyb20ubGluZSArIDE7IGkgPD0gZW5kOyArK2kpXG4gICAgICAgICAgaWYgKGkgIT0gZW5kIHx8IGxhc3RMaW5lSGFzVGV4dClcbiAgICAgICAgICAgIHNlbGYucmVwbGFjZVJhbmdlKGxlYWQgKyBwYWQsIFBvcyhpLCAwKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLnJlcGxhY2VSYW5nZShlbmRTdHJpbmcsIHRvKTtcbiAgICAgICAgc2VsZi5yZXBsYWNlUmFuZ2Uoc3RhcnRTdHJpbmcsIGZyb20pO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBDb2RlTWlycm9yLmRlZmluZUV4dGVuc2lvbihcInVuY29tbWVudFwiLCBmdW5jdGlvbihmcm9tLCB0bywgb3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IG5vT3B0aW9ucztcbiAgICB2YXIgc2VsZiA9IHRoaXMsIG1vZGUgPSBzZWxmLmdldE1vZGVBdChmcm9tKTtcbiAgICB2YXIgZW5kID0gTWF0aC5taW4odG8uY2ggIT0gMCB8fCB0by5saW5lID09IGZyb20ubGluZSA/IHRvLmxpbmUgOiB0by5saW5lIC0gMSwgc2VsZi5sYXN0TGluZSgpKSwgc3RhcnQgPSBNYXRoLm1pbihmcm9tLmxpbmUsIGVuZCk7XG5cbiAgICAvLyBUcnkgZmluZGluZyBsaW5lIGNvbW1lbnRzXG4gICAgdmFyIGxpbmVTdHJpbmcgPSBvcHRpb25zLmxpbmVDb21tZW50IHx8IG1vZGUubGluZUNvbW1lbnQsIGxpbmVzID0gW107XG4gICAgdmFyIHBhZCA9IG9wdGlvbnMucGFkZGluZyA9PSBudWxsID8gXCIgXCIgOiBvcHRpb25zLnBhZGRpbmcsIGRpZFNvbWV0aGluZztcbiAgICBsaW5lQ29tbWVudDoge1xuICAgICAgaWYgKCFsaW5lU3RyaW5nKSBicmVhayBsaW5lQ29tbWVudDtcbiAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8PSBlbmQ7ICsraSkge1xuICAgICAgICB2YXIgbGluZSA9IHNlbGYuZ2V0TGluZShpKTtcbiAgICAgICAgdmFyIGZvdW5kID0gbGluZS5pbmRleE9mKGxpbmVTdHJpbmcpO1xuICAgICAgICBpZiAoZm91bmQgPiAtMSAmJiAhL2NvbW1lbnQvLnRlc3Qoc2VsZi5nZXRUb2tlblR5cGVBdChQb3MoaSwgZm91bmQgKyAxKSkpKSBmb3VuZCA9IC0xO1xuICAgICAgICBpZiAoZm91bmQgPT0gLTEgJiYgKGkgIT0gZW5kIHx8IGkgPT0gc3RhcnQpICYmIG5vbldTLnRlc3QobGluZSkpIGJyZWFrIGxpbmVDb21tZW50O1xuICAgICAgICBpZiAoZm91bmQgPiAtMSAmJiBub25XUy50ZXN0KGxpbmUuc2xpY2UoMCwgZm91bmQpKSkgYnJlYWsgbGluZUNvbW1lbnQ7XG4gICAgICAgIGxpbmVzLnB1c2gobGluZSk7XG4gICAgICB9XG4gICAgICBzZWxmLm9wZXJhdGlvbihmdW5jdGlvbigpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDw9IGVuZDsgKytpKSB7XG4gICAgICAgICAgdmFyIGxpbmUgPSBsaW5lc1tpIC0gc3RhcnRdO1xuICAgICAgICAgIHZhciBwb3MgPSBsaW5lLmluZGV4T2YobGluZVN0cmluZyksIGVuZFBvcyA9IHBvcyArIGxpbmVTdHJpbmcubGVuZ3RoO1xuICAgICAgICAgIGlmIChwb3MgPCAwKSBjb250aW51ZTtcbiAgICAgICAgICBpZiAobGluZS5zbGljZShlbmRQb3MsIGVuZFBvcyArIHBhZC5sZW5ndGgpID09IHBhZCkgZW5kUG9zICs9IHBhZC5sZW5ndGg7XG4gICAgICAgICAgZGlkU29tZXRoaW5nID0gdHJ1ZTtcbiAgICAgICAgICBzZWxmLnJlcGxhY2VSYW5nZShcIlwiLCBQb3MoaSwgcG9zKSwgUG9zKGksIGVuZFBvcykpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChkaWRTb21ldGhpbmcpIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFRyeSBibG9jayBjb21tZW50c1xuICAgIHZhciBzdGFydFN0cmluZyA9IG9wdGlvbnMuYmxvY2tDb21tZW50U3RhcnQgfHwgbW9kZS5ibG9ja0NvbW1lbnRTdGFydDtcbiAgICB2YXIgZW5kU3RyaW5nID0gb3B0aW9ucy5ibG9ja0NvbW1lbnRFbmQgfHwgbW9kZS5ibG9ja0NvbW1lbnRFbmQ7XG4gICAgaWYgKCFzdGFydFN0cmluZyB8fCAhZW5kU3RyaW5nKSByZXR1cm4gZmFsc2U7XG4gICAgdmFyIGxlYWQgPSBvcHRpb25zLmJsb2NrQ29tbWVudExlYWQgfHwgbW9kZS5ibG9ja0NvbW1lbnRMZWFkO1xuICAgIHZhciBzdGFydExpbmUgPSBzZWxmLmdldExpbmUoc3RhcnQpLCBlbmRMaW5lID0gZW5kID09IHN0YXJ0ID8gc3RhcnRMaW5lIDogc2VsZi5nZXRMaW5lKGVuZCk7XG4gICAgdmFyIG9wZW4gPSBzdGFydExpbmUuaW5kZXhPZihzdGFydFN0cmluZyksIGNsb3NlID0gZW5kTGluZS5sYXN0SW5kZXhPZihlbmRTdHJpbmcpO1xuICAgIGlmIChjbG9zZSA9PSAtMSAmJiBzdGFydCAhPSBlbmQpIHtcbiAgICAgIGVuZExpbmUgPSBzZWxmLmdldExpbmUoLS1lbmQpO1xuICAgICAgY2xvc2UgPSBlbmRMaW5lLmxhc3RJbmRleE9mKGVuZFN0cmluZyk7XG4gICAgfVxuICAgIGlmIChvcGVuID09IC0xIHx8IGNsb3NlID09IC0xIHx8XG4gICAgICAgICEvY29tbWVudC8udGVzdChzZWxmLmdldFRva2VuVHlwZUF0KFBvcyhzdGFydCwgb3BlbiArIDEpKSkgfHxcbiAgICAgICAgIS9jb21tZW50Ly50ZXN0KHNlbGYuZ2V0VG9rZW5UeXBlQXQoUG9zKGVuZCwgY2xvc2UgKyAxKSkpKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gQXZvaWQga2lsbGluZyBibG9jayBjb21tZW50cyBjb21wbGV0ZWx5IG91dHNpZGUgdGhlIHNlbGVjdGlvbi5cbiAgICAvLyBQb3NpdGlvbnMgb2YgdGhlIGxhc3Qgc3RhcnRTdHJpbmcgYmVmb3JlIHRoZSBzdGFydCBvZiB0aGUgc2VsZWN0aW9uLCBhbmQgdGhlIGZpcnN0IGVuZFN0cmluZyBhZnRlciBpdC5cbiAgICB2YXIgbGFzdFN0YXJ0ID0gc3RhcnRMaW5lLmxhc3RJbmRleE9mKHN0YXJ0U3RyaW5nLCBmcm9tLmNoKTtcbiAgICB2YXIgZmlyc3RFbmQgPSBsYXN0U3RhcnQgPT0gLTEgPyAtMSA6IHN0YXJ0TGluZS5zbGljZSgwLCBmcm9tLmNoKS5pbmRleE9mKGVuZFN0cmluZywgbGFzdFN0YXJ0ICsgc3RhcnRTdHJpbmcubGVuZ3RoKTtcbiAgICBpZiAobGFzdFN0YXJ0ICE9IC0xICYmIGZpcnN0RW5kICE9IC0xICYmIGZpcnN0RW5kICsgZW5kU3RyaW5nLmxlbmd0aCAhPSBmcm9tLmNoKSByZXR1cm4gZmFsc2U7XG4gICAgLy8gUG9zaXRpb25zIG9mIHRoZSBmaXJzdCBlbmRTdHJpbmcgYWZ0ZXIgdGhlIGVuZCBvZiB0aGUgc2VsZWN0aW9uLCBhbmQgdGhlIGxhc3Qgc3RhcnRTdHJpbmcgYmVmb3JlIGl0LlxuICAgIGZpcnN0RW5kID0gZW5kTGluZS5pbmRleE9mKGVuZFN0cmluZywgdG8uY2gpO1xuICAgIHZhciBhbG1vc3RMYXN0U3RhcnQgPSBlbmRMaW5lLnNsaWNlKHRvLmNoKS5sYXN0SW5kZXhPZihzdGFydFN0cmluZywgZmlyc3RFbmQgLSB0by5jaCk7XG4gICAgbGFzdFN0YXJ0ID0gKGZpcnN0RW5kID09IC0xIHx8IGFsbW9zdExhc3RTdGFydCA9PSAtMSkgPyAtMSA6IHRvLmNoICsgYWxtb3N0TGFzdFN0YXJ0O1xuICAgIGlmIChmaXJzdEVuZCAhPSAtMSAmJiBsYXN0U3RhcnQgIT0gLTEgJiYgbGFzdFN0YXJ0ICE9IHRvLmNoKSByZXR1cm4gZmFsc2U7XG5cbiAgICBzZWxmLm9wZXJhdGlvbihmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYucmVwbGFjZVJhbmdlKFwiXCIsIFBvcyhlbmQsIGNsb3NlIC0gKHBhZCAmJiBlbmRMaW5lLnNsaWNlKGNsb3NlIC0gcGFkLmxlbmd0aCwgY2xvc2UpID09IHBhZCA/IHBhZC5sZW5ndGggOiAwKSksXG4gICAgICAgICAgICAgICAgICAgICAgICBQb3MoZW5kLCBjbG9zZSArIGVuZFN0cmluZy5sZW5ndGgpKTtcbiAgICAgIHZhciBvcGVuRW5kID0gb3BlbiArIHN0YXJ0U3RyaW5nLmxlbmd0aDtcbiAgICAgIGlmIChwYWQgJiYgc3RhcnRMaW5lLnNsaWNlKG9wZW5FbmQsIG9wZW5FbmQgKyBwYWQubGVuZ3RoKSA9PSBwYWQpIG9wZW5FbmQgKz0gcGFkLmxlbmd0aDtcbiAgICAgIHNlbGYucmVwbGFjZVJhbmdlKFwiXCIsIFBvcyhzdGFydCwgb3BlbiksIFBvcyhzdGFydCwgb3BlbkVuZCkpO1xuICAgICAgaWYgKGxlYWQpIGZvciAodmFyIGkgPSBzdGFydCArIDE7IGkgPD0gZW5kOyArK2kpIHtcbiAgICAgICAgdmFyIGxpbmUgPSBzZWxmLmdldExpbmUoaSksIGZvdW5kID0gbGluZS5pbmRleE9mKGxlYWQpO1xuICAgICAgICBpZiAoZm91bmQgPT0gLTEgfHwgbm9uV1MudGVzdChsaW5lLnNsaWNlKDAsIGZvdW5kKSkpIGNvbnRpbnVlO1xuICAgICAgICB2YXIgZm91bmRFbmQgPSBmb3VuZCArIGxlYWQubGVuZ3RoO1xuICAgICAgICBpZiAocGFkICYmIGxpbmUuc2xpY2UoZm91bmRFbmQsIGZvdW5kRW5kICsgcGFkLmxlbmd0aCkgPT0gcGFkKSBmb3VuZEVuZCArPSBwYWQubGVuZ3RoO1xuICAgICAgICBzZWxmLnJlcGxhY2VSYW5nZShcIlwiLCBQb3MoaSwgZm91bmQpLCBQb3MoaSwgZm91bmRFbmQpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSk7XG59KTtcbiIsIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cDovL2NvZGVtaXJyb3IubmV0L0xJQ0VOU0VcblxuLy8gT3BlbiBzaW1wbGUgZGlhbG9ncyBvbiB0b3Agb2YgYW4gZWRpdG9yLiBSZWxpZXMgb24gZGlhbG9nLmNzcy5cblxuKGZ1bmN0aW9uKG1vZCkge1xuICBpZiAodHlwZW9mIGV4cG9ydHMgPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlID09IFwib2JqZWN0XCIpIC8vIENvbW1vbkpTXG4gICAgbW9kKHJlcXVpcmUoXCIuLi8uLi9saWIvY29kZW1pcnJvclwiKSk7XG4gIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIC8vIEFNRFxuICAgIGRlZmluZShbXCIuLi8uLi9saWIvY29kZW1pcnJvclwiXSwgbW9kKTtcbiAgZWxzZSAvLyBQbGFpbiBicm93c2VyIGVudlxuICAgIG1vZChDb2RlTWlycm9yKTtcbn0pKGZ1bmN0aW9uKENvZGVNaXJyb3IpIHtcbiAgZnVuY3Rpb24gZGlhbG9nRGl2KGNtLCB0ZW1wbGF0ZSwgYm90dG9tKSB7XG4gICAgdmFyIHdyYXAgPSBjbS5nZXRXcmFwcGVyRWxlbWVudCgpO1xuICAgIHZhciBkaWFsb2c7XG4gICAgZGlhbG9nID0gd3JhcC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtcbiAgICBpZiAoYm90dG9tKVxuICAgICAgZGlhbG9nLmNsYXNzTmFtZSA9IFwiQ29kZU1pcnJvci1kaWFsb2cgQ29kZU1pcnJvci1kaWFsb2ctYm90dG9tXCI7XG4gICAgZWxzZVxuICAgICAgZGlhbG9nLmNsYXNzTmFtZSA9IFwiQ29kZU1pcnJvci1kaWFsb2cgQ29kZU1pcnJvci1kaWFsb2ctdG9wXCI7XG5cbiAgICBpZiAodHlwZW9mIHRlbXBsYXRlID09IFwic3RyaW5nXCIpIHtcbiAgICAgIGRpYWxvZy5pbm5lckhUTUwgPSB0ZW1wbGF0ZTtcbiAgICB9IGVsc2UgeyAvLyBBc3N1bWluZyBpdCdzIGEgZGV0YWNoZWQgRE9NIGVsZW1lbnQuXG4gICAgICBkaWFsb2cuYXBwZW5kQ2hpbGQodGVtcGxhdGUpO1xuICAgIH1cbiAgICByZXR1cm4gZGlhbG9nO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xvc2VOb3RpZmljYXRpb24oY20sIG5ld1ZhbCkge1xuICAgIGlmIChjbS5zdGF0ZS5jdXJyZW50Tm90aWZpY2F0aW9uQ2xvc2UpXG4gICAgICBjbS5zdGF0ZS5jdXJyZW50Tm90aWZpY2F0aW9uQ2xvc2UoKTtcbiAgICBjbS5zdGF0ZS5jdXJyZW50Tm90aWZpY2F0aW9uQ2xvc2UgPSBuZXdWYWw7XG4gIH1cblxuICBDb2RlTWlycm9yLmRlZmluZUV4dGVuc2lvbihcIm9wZW5EaWFsb2dcIiwgZnVuY3Rpb24odGVtcGxhdGUsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0ge307XG5cbiAgICBjbG9zZU5vdGlmaWNhdGlvbih0aGlzLCBudWxsKTtcblxuICAgIHZhciBkaWFsb2cgPSBkaWFsb2dEaXYodGhpcywgdGVtcGxhdGUsIG9wdGlvbnMuYm90dG9tKTtcbiAgICB2YXIgY2xvc2VkID0gZmFsc2UsIG1lID0gdGhpcztcbiAgICBmdW5jdGlvbiBjbG9zZShuZXdWYWwpIHtcbiAgICAgIGlmICh0eXBlb2YgbmV3VmFsID09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlucC52YWx1ZSA9IG5ld1ZhbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChjbG9zZWQpIHJldHVybjtcbiAgICAgICAgY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgZGlhbG9nLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZGlhbG9nKTtcbiAgICAgICAgbWUuZm9jdXMoKTtcblxuICAgICAgICBpZiAob3B0aW9ucy5vbkNsb3NlKSBvcHRpb25zLm9uQ2xvc2UoZGlhbG9nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgaW5wID0gZGlhbG9nLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIilbMF0sIGJ1dHRvbjtcbiAgICBpZiAoaW5wKSB7XG4gICAgICBpZiAob3B0aW9ucy52YWx1ZSkge1xuICAgICAgICBpbnAudmFsdWUgPSBvcHRpb25zLnZhbHVlO1xuICAgICAgICBpZiAob3B0aW9ucy5zZWxlY3RWYWx1ZU9uT3BlbiAhPT0gZmFsc2UpIHtcbiAgICAgICAgICBpbnAuc2VsZWN0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMub25JbnB1dClcbiAgICAgICAgQ29kZU1pcnJvci5vbihpbnAsIFwiaW5wdXRcIiwgZnVuY3Rpb24oZSkgeyBvcHRpb25zLm9uSW5wdXQoZSwgaW5wLnZhbHVlLCBjbG9zZSk7fSk7XG4gICAgICBpZiAob3B0aW9ucy5vbktleVVwKVxuICAgICAgICBDb2RlTWlycm9yLm9uKGlucCwgXCJrZXl1cFwiLCBmdW5jdGlvbihlKSB7b3B0aW9ucy5vbktleVVwKGUsIGlucC52YWx1ZSwgY2xvc2UpO30pO1xuXG4gICAgICBDb2RlTWlycm9yLm9uKGlucCwgXCJrZXlkb3duXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5vbktleURvd24gJiYgb3B0aW9ucy5vbktleURvd24oZSwgaW5wLnZhbHVlLCBjbG9zZSkpIHsgcmV0dXJuOyB9XG4gICAgICAgIGlmIChlLmtleUNvZGUgPT0gMjcgfHwgKG9wdGlvbnMuY2xvc2VPbkVudGVyICE9PSBmYWxzZSAmJiBlLmtleUNvZGUgPT0gMTMpKSB7XG4gICAgICAgICAgaW5wLmJsdXIoKTtcbiAgICAgICAgICBDb2RlTWlycm9yLmVfc3RvcChlKTtcbiAgICAgICAgICBjbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlLmtleUNvZGUgPT0gMTMpIGNhbGxiYWNrKGlucC52YWx1ZSwgZSk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKG9wdGlvbnMuY2xvc2VPbkJsdXIgIT09IGZhbHNlKSBDb2RlTWlycm9yLm9uKGlucCwgXCJibHVyXCIsIGNsb3NlKTtcblxuICAgICAgaW5wLmZvY3VzKCk7XG4gICAgfSBlbHNlIGlmIChidXR0b24gPSBkaWFsb2cuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJidXR0b25cIilbMF0pIHtcbiAgICAgIENvZGVNaXJyb3Iub24oYnV0dG9uLCBcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICBjbG9zZSgpO1xuICAgICAgICBtZS5mb2N1cygpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChvcHRpb25zLmNsb3NlT25CbHVyICE9PSBmYWxzZSkgQ29kZU1pcnJvci5vbihidXR0b24sIFwiYmx1clwiLCBjbG9zZSk7XG5cbiAgICAgIGJ1dHRvbi5mb2N1cygpO1xuICAgIH1cbiAgICByZXR1cm4gY2xvc2U7XG4gIH0pO1xuXG4gIENvZGVNaXJyb3IuZGVmaW5lRXh0ZW5zaW9uKFwib3BlbkNvbmZpcm1cIiwgZnVuY3Rpb24odGVtcGxhdGUsIGNhbGxiYWNrcywgb3B0aW9ucykge1xuICAgIGNsb3NlTm90aWZpY2F0aW9uKHRoaXMsIG51bGwpO1xuICAgIHZhciBkaWFsb2cgPSBkaWFsb2dEaXYodGhpcywgdGVtcGxhdGUsIG9wdGlvbnMgJiYgb3B0aW9ucy5ib3R0b20pO1xuICAgIHZhciBidXR0b25zID0gZGlhbG9nLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYnV0dG9uXCIpO1xuICAgIHZhciBjbG9zZWQgPSBmYWxzZSwgbWUgPSB0aGlzLCBibHVycmluZyA9IDE7XG4gICAgZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICBpZiAoY2xvc2VkKSByZXR1cm47XG4gICAgICBjbG9zZWQgPSB0cnVlO1xuICAgICAgZGlhbG9nLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZGlhbG9nKTtcbiAgICAgIG1lLmZvY3VzKCk7XG4gICAgfVxuICAgIGJ1dHRvbnNbMF0uZm9jdXMoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ1dHRvbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBiID0gYnV0dG9uc1tpXTtcbiAgICAgIChmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICBDb2RlTWlycm9yLm9uKGIsIFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgIENvZGVNaXJyb3IuZV9wcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgICAgICBjbG9zZSgpO1xuICAgICAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2sobWUpO1xuICAgICAgICB9KTtcbiAgICAgIH0pKGNhbGxiYWNrc1tpXSk7XG4gICAgICBDb2RlTWlycm9yLm9uKGIsIFwiYmx1clwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgLS1ibHVycmluZztcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgaWYgKGJsdXJyaW5nIDw9IDApIGNsb3NlKCk7IH0sIDIwMCk7XG4gICAgICB9KTtcbiAgICAgIENvZGVNaXJyb3Iub24oYiwgXCJmb2N1c1wiLCBmdW5jdGlvbigpIHsgKytibHVycmluZzsgfSk7XG4gICAgfVxuICB9KTtcblxuICAvKlxuICAgKiBvcGVuTm90aWZpY2F0aW9uXG4gICAqIE9wZW5zIGEgbm90aWZpY2F0aW9uLCB0aGF0IGNhbiBiZSBjbG9zZWQgd2l0aCBhbiBvcHRpb25hbCB0aW1lclxuICAgKiAoZGVmYXVsdCA1MDAwbXMgdGltZXIpIGFuZCBhbHdheXMgY2xvc2VzIG9uIGNsaWNrLlxuICAgKlxuICAgKiBJZiBhIG5vdGlmaWNhdGlvbiBpcyBvcGVuZWQgd2hpbGUgYW5vdGhlciBpcyBvcGVuZWQsIGl0IHdpbGwgY2xvc2UgdGhlXG4gICAqIGN1cnJlbnRseSBvcGVuZWQgb25lIGFuZCBvcGVuIHRoZSBuZXcgb25lIGltbWVkaWF0ZWx5LlxuICAgKi9cbiAgQ29kZU1pcnJvci5kZWZpbmVFeHRlbnNpb24oXCJvcGVuTm90aWZpY2F0aW9uXCIsIGZ1bmN0aW9uKHRlbXBsYXRlLCBvcHRpb25zKSB7XG4gICAgY2xvc2VOb3RpZmljYXRpb24odGhpcywgY2xvc2UpO1xuICAgIHZhciBkaWFsb2cgPSBkaWFsb2dEaXYodGhpcywgdGVtcGxhdGUsIG9wdGlvbnMgJiYgb3B0aW9ucy5ib3R0b20pO1xuICAgIHZhciBjbG9zZWQgPSBmYWxzZSwgZG9uZVRpbWVyO1xuICAgIHZhciBkdXJhdGlvbiA9IG9wdGlvbnMgJiYgdHlwZW9mIG9wdGlvbnMuZHVyYXRpb24gIT09IFwidW5kZWZpbmVkXCIgPyBvcHRpb25zLmR1cmF0aW9uIDogNTAwMDtcblxuICAgIGZ1bmN0aW9uIGNsb3NlKCkge1xuICAgICAgaWYgKGNsb3NlZCkgcmV0dXJuO1xuICAgICAgY2xvc2VkID0gdHJ1ZTtcbiAgICAgIGNsZWFyVGltZW91dChkb25lVGltZXIpO1xuICAgICAgZGlhbG9nLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZGlhbG9nKTtcbiAgICB9XG5cbiAgICBDb2RlTWlycm9yLm9uKGRpYWxvZywgJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgQ29kZU1pcnJvci5lX3ByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIGlmIChkdXJhdGlvbilcbiAgICAgIGRvbmVUaW1lciA9IHNldFRpbWVvdXQoY2xvc2UsIGR1cmF0aW9uKTtcblxuICAgIHJldHVybiBjbG9zZTtcbiAgfSk7XG59KTtcbiIsIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cDovL2NvZGVtaXJyb3IubmV0L0xJQ0VOU0VcblxuKGZ1bmN0aW9uKG1vZCkge1xuICBpZiAodHlwZW9mIGV4cG9ydHMgPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlID09IFwib2JqZWN0XCIpIC8vIENvbW1vbkpTXG4gICAgbW9kKHJlcXVpcmUoXCIuLi8uLi9saWIvY29kZW1pcnJvclwiKSk7XG4gIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIC8vIEFNRFxuICAgIGRlZmluZShbXCIuLi8uLi9saWIvY29kZW1pcnJvclwiXSwgbW9kKTtcbiAgZWxzZSAvLyBQbGFpbiBicm93c2VyIGVudlxuICAgIG1vZChDb2RlTWlycm9yKTtcbn0pKGZ1bmN0aW9uKENvZGVNaXJyb3IpIHtcbiAgQ29kZU1pcnJvci5kZWZpbmVFeHRlbnNpb24oXCJhZGRQYW5lbFwiLCBmdW5jdGlvbihub2RlLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICBpZiAoIXRoaXMuc3RhdGUucGFuZWxzKSBpbml0UGFuZWxzKHRoaXMpO1xuXG4gICAgdmFyIGluZm8gPSB0aGlzLnN0YXRlLnBhbmVscztcbiAgICB2YXIgd3JhcHBlciA9IGluZm8ud3JhcHBlcjtcbiAgICB2YXIgY21XcmFwcGVyID0gdGhpcy5nZXRXcmFwcGVyRWxlbWVudCgpO1xuXG4gICAgaWYgKG9wdGlvbnMuYWZ0ZXIgaW5zdGFuY2VvZiBQYW5lbCAmJiAhb3B0aW9ucy5hZnRlci5jbGVhcmVkKSB7XG4gICAgICB3cmFwcGVyLmluc2VydEJlZm9yZShub2RlLCBvcHRpb25zLmJlZm9yZS5ub2RlLm5leHRTaWJsaW5nKTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuYmVmb3JlIGluc3RhbmNlb2YgUGFuZWwgJiYgIW9wdGlvbnMuYmVmb3JlLmNsZWFyZWQpIHtcbiAgICAgIHdyYXBwZXIuaW5zZXJ0QmVmb3JlKG5vZGUsIG9wdGlvbnMuYmVmb3JlLm5vZGUpO1xuICAgIH0gZWxzZSBpZiAob3B0aW9ucy5yZXBsYWNlIGluc3RhbmNlb2YgUGFuZWwgJiYgIW9wdGlvbnMucmVwbGFjZS5jbGVhcmVkKSB7XG4gICAgICB3cmFwcGVyLmluc2VydEJlZm9yZShub2RlLCBvcHRpb25zLnJlcGxhY2Uubm9kZSk7XG4gICAgICBvcHRpb25zLnJlcGxhY2UuY2xlYXIoKTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMucG9zaXRpb24gPT0gXCJib3R0b21cIikge1xuICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChub2RlKTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMucG9zaXRpb24gPT0gXCJiZWZvcmUtYm90dG9tXCIpIHtcbiAgICAgIHdyYXBwZXIuaW5zZXJ0QmVmb3JlKG5vZGUsIGNtV3JhcHBlci5uZXh0U2libGluZyk7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLnBvc2l0aW9uID09IFwiYWZ0ZXItdG9wXCIpIHtcbiAgICAgIHdyYXBwZXIuaW5zZXJ0QmVmb3JlKG5vZGUsIGNtV3JhcHBlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdyYXBwZXIuaW5zZXJ0QmVmb3JlKG5vZGUsIHdyYXBwZXIuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgdmFyIGhlaWdodCA9IChvcHRpb25zICYmIG9wdGlvbnMuaGVpZ2h0KSB8fCBub2RlLm9mZnNldEhlaWdodDtcbiAgICB0aGlzLl9zZXRTaXplKG51bGwsIGluZm8uaGVpZ2h0TGVmdCAtPSBoZWlnaHQpO1xuICAgIGluZm8ucGFuZWxzKys7XG4gICAgcmV0dXJuIG5ldyBQYW5lbCh0aGlzLCBub2RlLCBvcHRpb25zLCBoZWlnaHQpO1xuICB9KTtcblxuICBmdW5jdGlvbiBQYW5lbChjbSwgbm9kZSwgb3B0aW9ucywgaGVpZ2h0KSB7XG4gICAgdGhpcy5jbSA9IGNtO1xuICAgIHRoaXMubm9kZSA9IG5vZGU7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLmNsZWFyZWQgPSBmYWxzZTtcbiAgfVxuXG4gIFBhbmVsLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLmNsZWFyZWQpIHJldHVybjtcbiAgICB0aGlzLmNsZWFyZWQgPSB0cnVlO1xuICAgIHZhciBpbmZvID0gdGhpcy5jbS5zdGF0ZS5wYW5lbHM7XG4gICAgdGhpcy5jbS5fc2V0U2l6ZShudWxsLCBpbmZvLmhlaWdodExlZnQgKz0gdGhpcy5oZWlnaHQpO1xuICAgIGluZm8ud3JhcHBlci5yZW1vdmVDaGlsZCh0aGlzLm5vZGUpO1xuICAgIGlmICgtLWluZm8ucGFuZWxzID09IDApIHJlbW92ZVBhbmVscyh0aGlzLmNtKTtcbiAgfTtcblxuICBQYW5lbC5wcm90b3R5cGUuY2hhbmdlZCA9IGZ1bmN0aW9uKGhlaWdodCkge1xuICAgIHZhciBuZXdIZWlnaHQgPSBoZWlnaHQgPT0gbnVsbCA/IHRoaXMubm9kZS5vZmZzZXRIZWlnaHQgOiBoZWlnaHQ7XG4gICAgdmFyIGluZm8gPSB0aGlzLmNtLnN0YXRlLnBhbmVscztcbiAgICB0aGlzLmNtLl9zZXRTaXplKG51bGwsIGluZm8uaGVpZ2h0ICs9IChuZXdIZWlnaHQgLSB0aGlzLmhlaWdodCkpO1xuICAgIHRoaXMuaGVpZ2h0ID0gbmV3SGVpZ2h0O1xuICB9O1xuXG4gIGZ1bmN0aW9uIGluaXRQYW5lbHMoY20pIHtcbiAgICB2YXIgd3JhcCA9IGNtLmdldFdyYXBwZXJFbGVtZW50KCk7XG4gICAgdmFyIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUgPyB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh3cmFwKSA6IHdyYXAuY3VycmVudFN0eWxlO1xuICAgIHZhciBoZWlnaHQgPSBwYXJzZUludChzdHlsZS5oZWlnaHQpO1xuICAgIHZhciBpbmZvID0gY20uc3RhdGUucGFuZWxzID0ge1xuICAgICAgc2V0SGVpZ2h0OiB3cmFwLnN0eWxlLmhlaWdodCxcbiAgICAgIGhlaWdodExlZnQ6IGhlaWdodCxcbiAgICAgIHBhbmVsczogMCxcbiAgICAgIHdyYXBwZXI6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcbiAgICB9O1xuICAgIHdyYXAucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaW5mby53cmFwcGVyLCB3cmFwKTtcbiAgICB2YXIgaGFzRm9jdXMgPSBjbS5oYXNGb2N1cygpO1xuICAgIGluZm8ud3JhcHBlci5hcHBlbmRDaGlsZCh3cmFwKTtcbiAgICBpZiAoaGFzRm9jdXMpIGNtLmZvY3VzKCk7XG5cbiAgICBjbS5fc2V0U2l6ZSA9IGNtLnNldFNpemU7XG4gICAgaWYgKGhlaWdodCAhPSBudWxsKSBjbS5zZXRTaXplID0gZnVuY3Rpb24od2lkdGgsIG5ld0hlaWdodCkge1xuICAgICAgaWYgKG5ld0hlaWdodCA9PSBudWxsKSByZXR1cm4gdGhpcy5fc2V0U2l6ZSh3aWR0aCwgbmV3SGVpZ2h0KTtcbiAgICAgIGluZm8uc2V0SGVpZ2h0ID0gbmV3SGVpZ2h0O1xuICAgICAgaWYgKHR5cGVvZiBuZXdIZWlnaHQgIT0gXCJudW1iZXJcIikge1xuICAgICAgICB2YXIgcHggPSAvXihcXGQrXFwuP1xcZCopcHgkLy5leGVjKG5ld0hlaWdodCk7XG4gICAgICAgIGlmIChweCkge1xuICAgICAgICAgIG5ld0hlaWdodCA9IE51bWJlcihweFsxXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW5mby53cmFwcGVyLnN0eWxlLmhlaWdodCA9IG5ld0hlaWdodDtcbiAgICAgICAgICBuZXdIZWlnaHQgPSBpbmZvLndyYXBwZXIub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgIGluZm8ud3JhcHBlci5zdHlsZS5oZWlnaHQgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjbS5fc2V0U2l6ZSh3aWR0aCwgaW5mby5oZWlnaHRMZWZ0ICs9IChuZXdIZWlnaHQgLSBoZWlnaHQpKTtcbiAgICAgIGhlaWdodCA9IG5ld0hlaWdodDtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlUGFuZWxzKGNtKSB7XG4gICAgdmFyIGluZm8gPSBjbS5zdGF0ZS5wYW5lbHM7XG4gICAgY20uc3RhdGUucGFuZWxzID0gbnVsbDtcblxuICAgIHZhciB3cmFwID0gY20uZ2V0V3JhcHBlckVsZW1lbnQoKTtcbiAgICBpbmZvLndyYXBwZXIucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQod3JhcCwgaW5mby53cmFwcGVyKTtcbiAgICB3cmFwLnN0eWxlLmhlaWdodCA9IGluZm8uc2V0SGVpZ2h0O1xuICAgIGNtLnNldFNpemUgPSBjbS5fc2V0U2l6ZTtcbiAgICBjbS5zZXRTaXplKCk7XG4gIH1cbn0pO1xuIiwiLy8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhlcnNcbi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwOi8vY29kZW1pcnJvci5uZXQvTElDRU5TRVxuXG4oZnVuY3Rpb24obW9kKSB7XG4gIGlmICh0eXBlb2YgZXhwb3J0cyA9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUgPT0gXCJvYmplY3RcIikgLy8gQ29tbW9uSlNcbiAgICBtb2QocmVxdWlyZShcIi4uLy4uL2xpYi9jb2RlbWlycm9yXCIpKTtcbiAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkgLy8gQU1EXG4gICAgZGVmaW5lKFtcIi4uLy4uL2xpYi9jb2RlbWlycm9yXCJdLCBtb2QpO1xuICBlbHNlIC8vIFBsYWluIGJyb3dzZXIgZW52XG4gICAgbW9kKENvZGVNaXJyb3IpO1xufSkoZnVuY3Rpb24oQ29kZU1pcnJvcikge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICBDb2RlTWlycm9yLmRlZmluZU9wdGlvbihcInJ1bGVyc1wiLCBmYWxzZSwgZnVuY3Rpb24oY20sIHZhbCwgb2xkKSB7XG4gICAgaWYgKG9sZCAmJiBvbGQgIT0gQ29kZU1pcnJvci5Jbml0KSB7XG4gICAgICBjbGVhclJ1bGVycyhjbSk7XG4gICAgICBjbS5vZmYoXCJyZWZyZXNoXCIsIHJlZnJlc2hSdWxlcnMpO1xuICAgIH1cbiAgICBpZiAodmFsICYmIHZhbC5sZW5ndGgpIHtcbiAgICAgIHNldFJ1bGVycyhjbSk7XG4gICAgICBjbS5vbihcInJlZnJlc2hcIiwgcmVmcmVzaFJ1bGVycyk7XG4gICAgfVxuICB9KTtcblxuICBmdW5jdGlvbiBjbGVhclJ1bGVycyhjbSkge1xuICAgIGZvciAodmFyIGkgPSBjbS5kaXNwbGF5LmxpbmVTcGFjZS5jaGlsZE5vZGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB2YXIgbm9kZSA9IGNtLmRpc3BsYXkubGluZVNwYWNlLmNoaWxkTm9kZXNbaV07XG4gICAgICBpZiAoLyhefFxccylDb2RlTWlycm9yLXJ1bGVyKCR8XFxzKS8udGVzdChub2RlLmNsYXNzTmFtZSkpXG4gICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzZXRSdWxlcnMoY20pIHtcbiAgICB2YXIgdmFsID0gY20uZ2V0T3B0aW9uKFwicnVsZXJzXCIpO1xuICAgIHZhciBjdyA9IGNtLmRlZmF1bHRDaGFyV2lkdGgoKTtcbiAgICB2YXIgbGVmdCA9IGNtLmNoYXJDb29yZHMoQ29kZU1pcnJvci5Qb3MoY20uZmlyc3RMaW5lKCksIDApLCBcImRpdlwiKS5sZWZ0O1xuICAgIHZhciBtaW5IID0gY20uZGlzcGxheS5zY3JvbGxlci5vZmZzZXRIZWlnaHQgKyAzMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbC5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGVsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBlbHQuY2xhc3NOYW1lID0gXCJDb2RlTWlycm9yLXJ1bGVyXCI7XG4gICAgICB2YXIgY29sLCBjb25mID0gdmFsW2ldO1xuICAgICAgaWYgKHR5cGVvZiBjb25mID09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgY29sID0gY29uZjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbCA9IGNvbmYuY29sdW1uO1xuICAgICAgICBpZiAoY29uZi5jbGFzc05hbWUpIGVsdC5jbGFzc05hbWUgKz0gXCIgXCIgKyBjb25mLmNsYXNzTmFtZTtcbiAgICAgICAgaWYgKGNvbmYuY29sb3IpIGVsdC5zdHlsZS5ib3JkZXJDb2xvciA9IGNvbmYuY29sb3I7XG4gICAgICAgIGlmIChjb25mLmxpbmVTdHlsZSkgZWx0LnN0eWxlLmJvcmRlckxlZnRTdHlsZSA9IGNvbmYubGluZVN0eWxlO1xuICAgICAgICBpZiAoY29uZi53aWR0aCkgZWx0LnN0eWxlLmJvcmRlckxlZnRXaWR0aCA9IGNvbmYud2lkdGg7XG4gICAgICB9XG4gICAgICBlbHQuc3R5bGUubGVmdCA9IChsZWZ0ICsgY29sICogY3cpICsgXCJweFwiO1xuICAgICAgZWx0LnN0eWxlLnRvcCA9IFwiLTUwcHhcIjtcbiAgICAgIGVsdC5zdHlsZS5ib3R0b20gPSBcIi0yMHB4XCI7XG4gICAgICBlbHQuc3R5bGUubWluSGVpZ2h0ID0gbWluSCArIFwicHhcIjtcbiAgICAgIGNtLmRpc3BsYXkubGluZVNwYWNlLmluc2VydEJlZm9yZShlbHQsIGNtLmRpc3BsYXkuY3Vyc29yRGl2KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWZyZXNoUnVsZXJzKGNtKSB7XG4gICAgY2xlYXJSdWxlcnMoY20pO1xuICAgIHNldFJ1bGVycyhjbSk7XG4gIH1cbn0pO1xuIiwiLy8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhlcnNcbi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwOi8vY29kZW1pcnJvci5uZXQvTElDRU5TRVxuXG4oZnVuY3Rpb24obW9kKSB7XG4gIGlmICh0eXBlb2YgZXhwb3J0cyA9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUgPT0gXCJvYmplY3RcIikgLy8gQ29tbW9uSlNcbiAgICBtb2QocmVxdWlyZShcIi4uLy4uL2xpYi9jb2RlbWlycm9yXCIpKTtcbiAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkgLy8gQU1EXG4gICAgZGVmaW5lKFtcIi4uLy4uL2xpYi9jb2RlbWlycm9yXCJdLCBtb2QpO1xuICBlbHNlIC8vIFBsYWluIGJyb3dzZXIgZW52XG4gICAgbW9kKENvZGVNaXJyb3IpO1xufSkoZnVuY3Rpb24oQ29kZU1pcnJvcikge1xuICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgcGFpcnM6IFwiKClbXXt9JydcXFwiXFxcIlwiLFxuICAgIHRyaXBsZXM6IFwiXCIsXG4gICAgZXhwbG9kZTogXCJbXXt9XCJcbiAgfTtcblxuICB2YXIgUG9zID0gQ29kZU1pcnJvci5Qb3M7XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVPcHRpb24oXCJhdXRvQ2xvc2VCcmFja2V0c1wiLCBmYWxzZSwgZnVuY3Rpb24oY20sIHZhbCwgb2xkKSB7XG4gICAgaWYgKG9sZCAmJiBvbGQgIT0gQ29kZU1pcnJvci5Jbml0KSB7XG4gICAgICBjbS5yZW1vdmVLZXlNYXAoa2V5TWFwKTtcbiAgICAgIGNtLnN0YXRlLmNsb3NlQnJhY2tldHMgPSBudWxsO1xuICAgIH1cbiAgICBpZiAodmFsKSB7XG4gICAgICBjbS5zdGF0ZS5jbG9zZUJyYWNrZXRzID0gdmFsO1xuICAgICAgY20uYWRkS2V5TWFwKGtleU1hcCk7XG4gICAgfVxuICB9KTtcblxuICBmdW5jdGlvbiBnZXRPcHRpb24oY29uZiwgbmFtZSkge1xuICAgIGlmIChuYW1lID09IFwicGFpcnNcIiAmJiB0eXBlb2YgY29uZiA9PSBcInN0cmluZ1wiKSByZXR1cm4gY29uZjtcbiAgICBpZiAodHlwZW9mIGNvbmYgPT0gXCJvYmplY3RcIiAmJiBjb25mW25hbWVdICE9IG51bGwpIHJldHVybiBjb25mW25hbWVdO1xuICAgIHJldHVybiBkZWZhdWx0c1tuYW1lXTtcbiAgfVxuXG4gIHZhciBiaW5kID0gZGVmYXVsdHMucGFpcnMgKyBcImBcIjtcbiAgdmFyIGtleU1hcCA9IHtCYWNrc3BhY2U6IGhhbmRsZUJhY2tzcGFjZSwgRW50ZXI6IGhhbmRsZUVudGVyfTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaW5kLmxlbmd0aDsgaSsrKVxuICAgIGtleU1hcFtcIidcIiArIGJpbmQuY2hhckF0KGkpICsgXCInXCJdID0gaGFuZGxlcihiaW5kLmNoYXJBdChpKSk7XG5cbiAgZnVuY3Rpb24gaGFuZGxlcihjaCkge1xuICAgIHJldHVybiBmdW5jdGlvbihjbSkgeyByZXR1cm4gaGFuZGxlQ2hhcihjbSwgY2gpOyB9O1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q29uZmlnKGNtKSB7XG4gICAgdmFyIGRlZmx0ID0gY20uc3RhdGUuY2xvc2VCcmFja2V0cztcbiAgICBpZiAoIWRlZmx0KSByZXR1cm4gbnVsbDtcbiAgICB2YXIgbW9kZSA9IGNtLmdldE1vZGVBdChjbS5nZXRDdXJzb3IoKSk7XG4gICAgcmV0dXJuIG1vZGUuY2xvc2VCcmFja2V0cyB8fCBkZWZsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUJhY2tzcGFjZShjbSkge1xuICAgIHZhciBjb25mID0gZ2V0Q29uZmlnKGNtKTtcbiAgICBpZiAoIWNvbmYgfHwgY20uZ2V0T3B0aW9uKFwiZGlzYWJsZUlucHV0XCIpKSByZXR1cm4gQ29kZU1pcnJvci5QYXNzO1xuXG4gICAgdmFyIHBhaXJzID0gZ2V0T3B0aW9uKGNvbmYsIFwicGFpcnNcIik7XG4gICAgdmFyIHJhbmdlcyA9IGNtLmxpc3RTZWxlY3Rpb25zKCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghcmFuZ2VzW2ldLmVtcHR5KCkpIHJldHVybiBDb2RlTWlycm9yLlBhc3M7XG4gICAgICB2YXIgYXJvdW5kID0gY2hhcnNBcm91bmQoY20sIHJhbmdlc1tpXS5oZWFkKTtcbiAgICAgIGlmICghYXJvdW5kIHx8IHBhaXJzLmluZGV4T2YoYXJvdW5kKSAlIDIgIT0gMCkgcmV0dXJuIENvZGVNaXJyb3IuUGFzcztcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IHJhbmdlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgdmFyIGN1ciA9IHJhbmdlc1tpXS5oZWFkO1xuICAgICAgY20ucmVwbGFjZVJhbmdlKFwiXCIsIFBvcyhjdXIubGluZSwgY3VyLmNoIC0gMSksIFBvcyhjdXIubGluZSwgY3VyLmNoICsgMSkpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUVudGVyKGNtKSB7XG4gICAgdmFyIGNvbmYgPSBnZXRDb25maWcoY20pO1xuICAgIHZhciBleHBsb2RlID0gY29uZiAmJiBnZXRPcHRpb24oY29uZiwgXCJleHBsb2RlXCIpO1xuICAgIGlmICghZXhwbG9kZSB8fCBjbS5nZXRPcHRpb24oXCJkaXNhYmxlSW5wdXRcIikpIHJldHVybiBDb2RlTWlycm9yLlBhc3M7XG5cbiAgICB2YXIgcmFuZ2VzID0gY20ubGlzdFNlbGVjdGlvbnMoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCFyYW5nZXNbaV0uZW1wdHkoKSkgcmV0dXJuIENvZGVNaXJyb3IuUGFzcztcbiAgICAgIHZhciBhcm91bmQgPSBjaGFyc0Fyb3VuZChjbSwgcmFuZ2VzW2ldLmhlYWQpO1xuICAgICAgaWYgKCFhcm91bmQgfHwgZXhwbG9kZS5pbmRleE9mKGFyb3VuZCkgJSAyICE9IDApIHJldHVybiBDb2RlTWlycm9yLlBhc3M7XG4gICAgfVxuICAgIGNtLm9wZXJhdGlvbihmdW5jdGlvbigpIHtcbiAgICAgIGNtLnJlcGxhY2VTZWxlY3Rpb24oXCJcXG5cXG5cIiwgbnVsbCk7XG4gICAgICBjbS5leGVjQ29tbWFuZChcImdvQ2hhckxlZnRcIik7XG4gICAgICByYW5nZXMgPSBjbS5saXN0U2VsZWN0aW9ucygpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGxpbmUgPSByYW5nZXNbaV0uaGVhZC5saW5lO1xuICAgICAgICBjbS5pbmRlbnRMaW5lKGxpbmUsIG51bGwsIHRydWUpO1xuICAgICAgICBjbS5pbmRlbnRMaW5lKGxpbmUgKyAxLCBudWxsLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbnRyYWN0U2VsZWN0aW9uKHNlbCkge1xuICAgIHZhciBpbnZlcnRlZCA9IENvZGVNaXJyb3IuY21wUG9zKHNlbC5hbmNob3IsIHNlbC5oZWFkKSA+IDA7XG4gICAgcmV0dXJuIHthbmNob3I6IG5ldyBQb3Moc2VsLmFuY2hvci5saW5lLCBzZWwuYW5jaG9yLmNoICsgKGludmVydGVkID8gLTEgOiAxKSksXG4gICAgICAgICAgICBoZWFkOiBuZXcgUG9zKHNlbC5oZWFkLmxpbmUsIHNlbC5oZWFkLmNoICsgKGludmVydGVkID8gMSA6IC0xKSl9O1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlQ2hhcihjbSwgY2gpIHtcbiAgICB2YXIgY29uZiA9IGdldENvbmZpZyhjbSk7XG4gICAgaWYgKCFjb25mIHx8IGNtLmdldE9wdGlvbihcImRpc2FibGVJbnB1dFwiKSkgcmV0dXJuIENvZGVNaXJyb3IuUGFzcztcblxuICAgIHZhciBwYWlycyA9IGdldE9wdGlvbihjb25mLCBcInBhaXJzXCIpO1xuICAgIHZhciBwb3MgPSBwYWlycy5pbmRleE9mKGNoKTtcbiAgICBpZiAocG9zID09IC0xKSByZXR1cm4gQ29kZU1pcnJvci5QYXNzO1xuICAgIHZhciB0cmlwbGVzID0gZ2V0T3B0aW9uKGNvbmYsIFwidHJpcGxlc1wiKTtcblxuICAgIHZhciBpZGVudGljYWwgPSBwYWlycy5jaGFyQXQocG9zICsgMSkgPT0gY2g7XG4gICAgdmFyIHJhbmdlcyA9IGNtLmxpc3RTZWxlY3Rpb25zKCk7XG4gICAgdmFyIG9wZW5pbmcgPSBwb3MgJSAyID09IDA7XG5cbiAgICB2YXIgdHlwZSwgbmV4dDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHJhbmdlID0gcmFuZ2VzW2ldLCBjdXIgPSByYW5nZS5oZWFkLCBjdXJUeXBlO1xuICAgICAgdmFyIG5leHQgPSBjbS5nZXRSYW5nZShjdXIsIFBvcyhjdXIubGluZSwgY3VyLmNoICsgMSkpO1xuICAgICAgaWYgKG9wZW5pbmcgJiYgIXJhbmdlLmVtcHR5KCkpIHtcbiAgICAgICAgY3VyVHlwZSA9IFwic3Vycm91bmRcIjtcbiAgICAgIH0gZWxzZSBpZiAoKGlkZW50aWNhbCB8fCAhb3BlbmluZykgJiYgbmV4dCA9PSBjaCkge1xuICAgICAgICBpZiAodHJpcGxlcy5pbmRleE9mKGNoKSA+PSAwICYmIGNtLmdldFJhbmdlKGN1ciwgUG9zKGN1ci5saW5lLCBjdXIuY2ggKyAzKSkgPT0gY2ggKyBjaCArIGNoKVxuICAgICAgICAgIGN1clR5cGUgPSBcInNraXBUaHJlZVwiO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgY3VyVHlwZSA9IFwic2tpcFwiO1xuICAgICAgfSBlbHNlIGlmIChpZGVudGljYWwgJiYgY3VyLmNoID4gMSAmJiB0cmlwbGVzLmluZGV4T2YoY2gpID49IDAgJiZcbiAgICAgICAgICAgICAgICAgY20uZ2V0UmFuZ2UoUG9zKGN1ci5saW5lLCBjdXIuY2ggLSAyKSwgY3VyKSA9PSBjaCArIGNoICYmXG4gICAgICAgICAgICAgICAgIChjdXIuY2ggPD0gMiB8fCBjbS5nZXRSYW5nZShQb3MoY3VyLmxpbmUsIGN1ci5jaCAtIDMpLCBQb3MoY3VyLmxpbmUsIGN1ci5jaCAtIDIpKSAhPSBjaCkpIHtcbiAgICAgICAgY3VyVHlwZSA9IFwiYWRkRm91clwiO1xuICAgICAgfSBlbHNlIGlmIChpZGVudGljYWwpIHtcbiAgICAgICAgaWYgKCFDb2RlTWlycm9yLmlzV29yZENoYXIobmV4dCkgJiYgZW50ZXJpbmdTdHJpbmcoY20sIGN1ciwgY2gpKSBjdXJUeXBlID0gXCJib3RoXCI7XG4gICAgICAgIGVsc2UgcmV0dXJuIENvZGVNaXJyb3IuUGFzcztcbiAgICAgIH0gZWxzZSBpZiAob3BlbmluZyAmJiAoY20uZ2V0TGluZShjdXIubGluZSkubGVuZ3RoID09IGN1ci5jaCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0Nsb3NpbmdCcmFja2V0KG5leHQsIHBhaXJzKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvXFxzLy50ZXN0KG5leHQpKSkge1xuICAgICAgICBjdXJUeXBlID0gXCJib3RoXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gQ29kZU1pcnJvci5QYXNzO1xuICAgICAgfVxuICAgICAgaWYgKCF0eXBlKSB0eXBlID0gY3VyVHlwZTtcbiAgICAgIGVsc2UgaWYgKHR5cGUgIT0gY3VyVHlwZSkgcmV0dXJuIENvZGVNaXJyb3IuUGFzcztcbiAgICB9XG5cbiAgICB2YXIgbGVmdCA9IHBvcyAlIDIgPyBwYWlycy5jaGFyQXQocG9zIC0gMSkgOiBjaDtcbiAgICB2YXIgcmlnaHQgPSBwb3MgJSAyID8gY2ggOiBwYWlycy5jaGFyQXQocG9zICsgMSk7XG4gICAgY20ub3BlcmF0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHR5cGUgPT0gXCJza2lwXCIpIHtcbiAgICAgICAgY20uZXhlY0NvbW1hbmQoXCJnb0NoYXJSaWdodFwiKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSBcInNraXBUaHJlZVwiKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrKVxuICAgICAgICAgIGNtLmV4ZWNDb21tYW5kKFwiZ29DaGFyUmlnaHRcIik7XG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gXCJzdXJyb3VuZFwiKSB7XG4gICAgICAgIHZhciBzZWxzID0gY20uZ2V0U2VsZWN0aW9ucygpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbHMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgc2Vsc1tpXSA9IGxlZnQgKyBzZWxzW2ldICsgcmlnaHQ7XG4gICAgICAgIGNtLnJlcGxhY2VTZWxlY3Rpb25zKHNlbHMsIFwiYXJvdW5kXCIpO1xuICAgICAgICBzZWxzID0gY20ubGlzdFNlbGVjdGlvbnMoKS5zbGljZSgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbHMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgc2Vsc1tpXSA9IGNvbnRyYWN0U2VsZWN0aW9uKHNlbHNbaV0pO1xuICAgICAgICBjbS5zZXRTZWxlY3Rpb25zKHNlbHMpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlID09IFwiYm90aFwiKSB7XG4gICAgICAgIGNtLnJlcGxhY2VTZWxlY3Rpb24obGVmdCArIHJpZ2h0LCBudWxsKTtcbiAgICAgICAgY20udHJpZ2dlckVsZWN0cmljKGxlZnQgKyByaWdodCk7XG4gICAgICAgIGNtLmV4ZWNDb21tYW5kKFwiZ29DaGFyTGVmdFwiKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSBcImFkZEZvdXJcIikge1xuICAgICAgICBjbS5yZXBsYWNlU2VsZWN0aW9uKGxlZnQgKyBsZWZ0ICsgbGVmdCArIGxlZnQsIFwiYmVmb3JlXCIpO1xuICAgICAgICBjbS5leGVjQ29tbWFuZChcImdvQ2hhclJpZ2h0XCIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNDbG9zaW5nQnJhY2tldChjaCwgcGFpcnMpIHtcbiAgICB2YXIgcG9zID0gcGFpcnMubGFzdEluZGV4T2YoY2gpO1xuICAgIHJldHVybiBwb3MgPiAtMSAmJiBwb3MgJSAyID09IDE7XG4gIH1cblxuICBmdW5jdGlvbiBjaGFyc0Fyb3VuZChjbSwgcG9zKSB7XG4gICAgdmFyIHN0ciA9IGNtLmdldFJhbmdlKFBvcyhwb3MubGluZSwgcG9zLmNoIC0gMSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFBvcyhwb3MubGluZSwgcG9zLmNoICsgMSkpO1xuICAgIHJldHVybiBzdHIubGVuZ3RoID09IDIgPyBzdHIgOiBudWxsO1xuICB9XG5cbiAgLy8gUHJvamVjdCB0aGUgdG9rZW4gdHlwZSB0aGF0IHdpbGwgZXhpc3RzIGFmdGVyIHRoZSBnaXZlbiBjaGFyIGlzXG4gIC8vIHR5cGVkLCBhbmQgdXNlIGl0IHRvIGRldGVybWluZSB3aGV0aGVyIGl0IHdvdWxkIGNhdXNlIHRoZSBzdGFydFxuICAvLyBvZiBhIHN0cmluZyB0b2tlbi5cbiAgZnVuY3Rpb24gZW50ZXJpbmdTdHJpbmcoY20sIHBvcywgY2gpIHtcbiAgICB2YXIgbGluZSA9IGNtLmdldExpbmUocG9zLmxpbmUpO1xuICAgIHZhciB0b2tlbiA9IGNtLmdldFRva2VuQXQocG9zKTtcbiAgICBpZiAoL1xcYnN0cmluZzI/XFxiLy50ZXN0KHRva2VuLnR5cGUpKSByZXR1cm4gZmFsc2U7XG4gICAgdmFyIHN0cmVhbSA9IG5ldyBDb2RlTWlycm9yLlN0cmluZ1N0cmVhbShsaW5lLnNsaWNlKDAsIHBvcy5jaCkgKyBjaCArIGxpbmUuc2xpY2UocG9zLmNoKSwgNCk7XG4gICAgc3RyZWFtLnBvcyA9IHN0cmVhbS5zdGFydCA9IHRva2VuLnN0YXJ0O1xuICAgIGZvciAoOzspIHtcbiAgICAgIHZhciB0eXBlMSA9IGNtLmdldE1vZGUoKS50b2tlbihzdHJlYW0sIHRva2VuLnN0YXRlKTtcbiAgICAgIGlmIChzdHJlYW0ucG9zID49IHBvcy5jaCArIDEpIHJldHVybiAvXFxic3RyaW5nMj9cXGIvLnRlc3QodHlwZTEpO1xuICAgICAgc3RyZWFtLnN0YXJ0ID0gc3RyZWFtLnBvcztcbiAgICB9XG4gIH1cbn0pO1xuIiwiLy8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhlcnNcbi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwOi8vY29kZW1pcnJvci5uZXQvTElDRU5TRVxuXG4oZnVuY3Rpb24obW9kKSB7XG4gIGlmICh0eXBlb2YgZXhwb3J0cyA9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUgPT0gXCJvYmplY3RcIikgLy8gQ29tbW9uSlNcbiAgICBtb2QocmVxdWlyZShcIi4uLy4uL2xpYi9jb2RlbWlycm9yXCIpKTtcbiAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkgLy8gQU1EXG4gICAgZGVmaW5lKFtcIi4uLy4uL2xpYi9jb2RlbWlycm9yXCJdLCBtb2QpO1xuICBlbHNlIC8vIFBsYWluIGJyb3dzZXIgZW52XG4gICAgbW9kKENvZGVNaXJyb3IpO1xufSkoZnVuY3Rpb24oQ29kZU1pcnJvcikge1xuICB2YXIgaWVfbHQ4ID0gL01TSUUgXFxkLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmXG4gICAgKGRvY3VtZW50LmRvY3VtZW50TW9kZSA9PSBudWxsIHx8IGRvY3VtZW50LmRvY3VtZW50TW9kZSA8IDgpO1xuXG4gIHZhciBQb3MgPSBDb2RlTWlycm9yLlBvcztcblxuICB2YXIgbWF0Y2hpbmcgPSB7XCIoXCI6IFwiKT5cIiwgXCIpXCI6IFwiKDxcIiwgXCJbXCI6IFwiXT5cIiwgXCJdXCI6IFwiWzxcIiwgXCJ7XCI6IFwifT5cIiwgXCJ9XCI6IFwiezxcIn07XG5cbiAgZnVuY3Rpb24gZmluZE1hdGNoaW5nQnJhY2tldChjbSwgd2hlcmUsIHN0cmljdCwgY29uZmlnKSB7XG4gICAgdmFyIGxpbmUgPSBjbS5nZXRMaW5lSGFuZGxlKHdoZXJlLmxpbmUpLCBwb3MgPSB3aGVyZS5jaCAtIDE7XG4gICAgdmFyIG1hdGNoID0gKHBvcyA+PSAwICYmIG1hdGNoaW5nW2xpbmUudGV4dC5jaGFyQXQocG9zKV0pIHx8IG1hdGNoaW5nW2xpbmUudGV4dC5jaGFyQXQoKytwb3MpXTtcbiAgICBpZiAoIW1hdGNoKSByZXR1cm4gbnVsbDtcbiAgICB2YXIgZGlyID0gbWF0Y2guY2hhckF0KDEpID09IFwiPlwiID8gMSA6IC0xO1xuICAgIGlmIChzdHJpY3QgJiYgKGRpciA+IDApICE9IChwb3MgPT0gd2hlcmUuY2gpKSByZXR1cm4gbnVsbDtcbiAgICB2YXIgc3R5bGUgPSBjbS5nZXRUb2tlblR5cGVBdChQb3Mod2hlcmUubGluZSwgcG9zICsgMSkpO1xuXG4gICAgdmFyIGZvdW5kID0gc2NhbkZvckJyYWNrZXQoY20sIFBvcyh3aGVyZS5saW5lLCBwb3MgKyAoZGlyID4gMCA/IDEgOiAwKSksIGRpciwgc3R5bGUgfHwgbnVsbCwgY29uZmlnKTtcbiAgICBpZiAoZm91bmQgPT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHtmcm9tOiBQb3Mod2hlcmUubGluZSwgcG9zKSwgdG86IGZvdW5kICYmIGZvdW5kLnBvcyxcbiAgICAgICAgICAgIG1hdGNoOiBmb3VuZCAmJiBmb3VuZC5jaCA9PSBtYXRjaC5jaGFyQXQoMCksIGZvcndhcmQ6IGRpciA+IDB9O1xuICB9XG5cbiAgLy8gYnJhY2tldFJlZ2V4IGlzIHVzZWQgdG8gc3BlY2lmeSB3aGljaCB0eXBlIG9mIGJyYWNrZXQgdG8gc2NhblxuICAvLyBzaG91bGQgYmUgYSByZWdleHAsIGUuZy4gL1tbXFxdXS9cbiAgLy9cbiAgLy8gTm90ZTogSWYgXCJ3aGVyZVwiIGlzIG9uIGFuIG9wZW4gYnJhY2tldCwgdGhlbiB0aGlzIGJyYWNrZXQgaXMgaWdub3JlZC5cbiAgLy9cbiAgLy8gUmV0dXJucyBmYWxzZSB3aGVuIG5vIGJyYWNrZXQgd2FzIGZvdW5kLCBudWxsIHdoZW4gaXQgcmVhY2hlZFxuICAvLyBtYXhTY2FuTGluZXMgYW5kIGdhdmUgdXBcbiAgZnVuY3Rpb24gc2NhbkZvckJyYWNrZXQoY20sIHdoZXJlLCBkaXIsIHN0eWxlLCBjb25maWcpIHtcbiAgICB2YXIgbWF4U2NhbkxlbiA9IChjb25maWcgJiYgY29uZmlnLm1heFNjYW5MaW5lTGVuZ3RoKSB8fCAxMDAwMDtcbiAgICB2YXIgbWF4U2NhbkxpbmVzID0gKGNvbmZpZyAmJiBjb25maWcubWF4U2NhbkxpbmVzKSB8fCAxMDAwO1xuXG4gICAgdmFyIHN0YWNrID0gW107XG4gICAgdmFyIHJlID0gY29uZmlnICYmIGNvbmZpZy5icmFja2V0UmVnZXggPyBjb25maWcuYnJhY2tldFJlZ2V4IDogL1soKXt9W1xcXV0vO1xuICAgIHZhciBsaW5lRW5kID0gZGlyID4gMCA/IE1hdGgubWluKHdoZXJlLmxpbmUgKyBtYXhTY2FuTGluZXMsIGNtLmxhc3RMaW5lKCkgKyAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IE1hdGgubWF4KGNtLmZpcnN0TGluZSgpIC0gMSwgd2hlcmUubGluZSAtIG1heFNjYW5MaW5lcyk7XG4gICAgZm9yICh2YXIgbGluZU5vID0gd2hlcmUubGluZTsgbGluZU5vICE9IGxpbmVFbmQ7IGxpbmVObyArPSBkaXIpIHtcbiAgICAgIHZhciBsaW5lID0gY20uZ2V0TGluZShsaW5lTm8pO1xuICAgICAgaWYgKCFsaW5lKSBjb250aW51ZTtcbiAgICAgIHZhciBwb3MgPSBkaXIgPiAwID8gMCA6IGxpbmUubGVuZ3RoIC0gMSwgZW5kID0gZGlyID4gMCA/IGxpbmUubGVuZ3RoIDogLTE7XG4gICAgICBpZiAobGluZS5sZW5ndGggPiBtYXhTY2FuTGVuKSBjb250aW51ZTtcbiAgICAgIGlmIChsaW5lTm8gPT0gd2hlcmUubGluZSkgcG9zID0gd2hlcmUuY2ggLSAoZGlyIDwgMCA/IDEgOiAwKTtcbiAgICAgIGZvciAoOyBwb3MgIT0gZW5kOyBwb3MgKz0gZGlyKSB7XG4gICAgICAgIHZhciBjaCA9IGxpbmUuY2hhckF0KHBvcyk7XG4gICAgICAgIGlmIChyZS50ZXN0KGNoKSAmJiAoc3R5bGUgPT09IHVuZGVmaW5lZCB8fCBjbS5nZXRUb2tlblR5cGVBdChQb3MobGluZU5vLCBwb3MgKyAxKSkgPT0gc3R5bGUpKSB7XG4gICAgICAgICAgdmFyIG1hdGNoID0gbWF0Y2hpbmdbY2hdO1xuICAgICAgICAgIGlmICgobWF0Y2guY2hhckF0KDEpID09IFwiPlwiKSA9PSAoZGlyID4gMCkpIHN0YWNrLnB1c2goY2gpO1xuICAgICAgICAgIGVsc2UgaWYgKCFzdGFjay5sZW5ndGgpIHJldHVybiB7cG9zOiBQb3MobGluZU5vLCBwb3MpLCBjaDogY2h9O1xuICAgICAgICAgIGVsc2Ugc3RhY2sucG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxpbmVObyAtIGRpciA9PSAoZGlyID4gMCA/IGNtLmxhc3RMaW5lKCkgOiBjbS5maXJzdExpbmUoKSkgPyBmYWxzZSA6IG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiBtYXRjaEJyYWNrZXRzKGNtLCBhdXRvY2xlYXIsIGNvbmZpZykge1xuICAgIC8vIERpc2FibGUgYnJhY2UgbWF0Y2hpbmcgaW4gbG9uZyBsaW5lcywgc2luY2UgaXQnbGwgY2F1c2UgaHVnZWx5IHNsb3cgdXBkYXRlc1xuICAgIHZhciBtYXhIaWdobGlnaHRMZW4gPSBjbS5zdGF0ZS5tYXRjaEJyYWNrZXRzLm1heEhpZ2hsaWdodExpbmVMZW5ndGggfHwgMTAwMDtcbiAgICB2YXIgbWFya3MgPSBbXSwgcmFuZ2VzID0gY20ubGlzdFNlbGVjdGlvbnMoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIG1hdGNoID0gcmFuZ2VzW2ldLmVtcHR5KCkgJiYgZmluZE1hdGNoaW5nQnJhY2tldChjbSwgcmFuZ2VzW2ldLmhlYWQsIGZhbHNlLCBjb25maWcpO1xuICAgICAgaWYgKG1hdGNoICYmIGNtLmdldExpbmUobWF0Y2guZnJvbS5saW5lKS5sZW5ndGggPD0gbWF4SGlnaGxpZ2h0TGVuKSB7XG4gICAgICAgIHZhciBzdHlsZSA9IG1hdGNoLm1hdGNoID8gXCJDb2RlTWlycm9yLW1hdGNoaW5nYnJhY2tldFwiIDogXCJDb2RlTWlycm9yLW5vbm1hdGNoaW5nYnJhY2tldFwiO1xuICAgICAgICBtYXJrcy5wdXNoKGNtLm1hcmtUZXh0KG1hdGNoLmZyb20sIFBvcyhtYXRjaC5mcm9tLmxpbmUsIG1hdGNoLmZyb20uY2ggKyAxKSwge2NsYXNzTmFtZTogc3R5bGV9KSk7XG4gICAgICAgIGlmIChtYXRjaC50byAmJiBjbS5nZXRMaW5lKG1hdGNoLnRvLmxpbmUpLmxlbmd0aCA8PSBtYXhIaWdobGlnaHRMZW4pXG4gICAgICAgICAgbWFya3MucHVzaChjbS5tYXJrVGV4dChtYXRjaC50bywgUG9zKG1hdGNoLnRvLmxpbmUsIG1hdGNoLnRvLmNoICsgMSksIHtjbGFzc05hbWU6IHN0eWxlfSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtYXJrcy5sZW5ndGgpIHtcbiAgICAgIC8vIEtsdWRnZSB0byB3b3JrIGFyb3VuZCB0aGUgSUUgYnVnIGZyb20gaXNzdWUgIzExOTMsIHdoZXJlIHRleHRcbiAgICAgIC8vIGlucHV0IHN0b3BzIGdvaW5nIHRvIHRoZSB0ZXh0YXJlIHdoZXZlciB0aGlzIGZpcmVzLlxuICAgICAgaWYgKGllX2x0OCAmJiBjbS5zdGF0ZS5mb2N1c2VkKSBjbS5mb2N1cygpO1xuXG4gICAgICB2YXIgY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgY20ub3BlcmF0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFya3MubGVuZ3RoOyBpKyspIG1hcmtzW2ldLmNsZWFyKCk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICAgIGlmIChhdXRvY2xlYXIpIHNldFRpbWVvdXQoY2xlYXIsIDgwMCk7XG4gICAgICBlbHNlIHJldHVybiBjbGVhcjtcbiAgICB9XG4gIH1cblxuICB2YXIgY3VycmVudGx5SGlnaGxpZ2h0ZWQgPSBudWxsO1xuICBmdW5jdGlvbiBkb01hdGNoQnJhY2tldHMoY20pIHtcbiAgICBjbS5vcGVyYXRpb24oZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoY3VycmVudGx5SGlnaGxpZ2h0ZWQpIHtjdXJyZW50bHlIaWdobGlnaHRlZCgpOyBjdXJyZW50bHlIaWdobGlnaHRlZCA9IG51bGw7fVxuICAgICAgY3VycmVudGx5SGlnaGxpZ2h0ZWQgPSBtYXRjaEJyYWNrZXRzKGNtLCBmYWxzZSwgY20uc3RhdGUubWF0Y2hCcmFja2V0cyk7XG4gICAgfSk7XG4gIH1cblxuICBDb2RlTWlycm9yLmRlZmluZU9wdGlvbihcIm1hdGNoQnJhY2tldHNcIiwgZmFsc2UsIGZ1bmN0aW9uKGNtLCB2YWwsIG9sZCkge1xuICAgIGlmIChvbGQgJiYgb2xkICE9IENvZGVNaXJyb3IuSW5pdClcbiAgICAgIGNtLm9mZihcImN1cnNvckFjdGl2aXR5XCIsIGRvTWF0Y2hCcmFja2V0cyk7XG4gICAgaWYgKHZhbCkge1xuICAgICAgY20uc3RhdGUubWF0Y2hCcmFja2V0cyA9IHR5cGVvZiB2YWwgPT0gXCJvYmplY3RcIiA/IHZhbCA6IHt9O1xuICAgICAgY20ub24oXCJjdXJzb3JBY3Rpdml0eVwiLCBkb01hdGNoQnJhY2tldHMpO1xuICAgIH1cbiAgfSk7XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVFeHRlbnNpb24oXCJtYXRjaEJyYWNrZXRzXCIsIGZ1bmN0aW9uKCkge21hdGNoQnJhY2tldHModGhpcywgdHJ1ZSk7fSk7XG4gIENvZGVNaXJyb3IuZGVmaW5lRXh0ZW5zaW9uKFwiZmluZE1hdGNoaW5nQnJhY2tldFwiLCBmdW5jdGlvbihwb3MsIHN0cmljdCwgY29uZmlnKXtcbiAgICByZXR1cm4gZmluZE1hdGNoaW5nQnJhY2tldCh0aGlzLCBwb3MsIHN0cmljdCwgY29uZmlnKTtcbiAgfSk7XG4gIENvZGVNaXJyb3IuZGVmaW5lRXh0ZW5zaW9uKFwic2NhbkZvckJyYWNrZXRcIiwgZnVuY3Rpb24ocG9zLCBkaXIsIHN0eWxlLCBjb25maWcpe1xuICAgIHJldHVybiBzY2FuRm9yQnJhY2tldCh0aGlzLCBwb3MsIGRpciwgc3R5bGUsIGNvbmZpZyk7XG4gIH0pO1xufSk7XG4iLCIvLyBDb2RlTWlycm9yLCBjb3B5cmlnaHQgKGMpIGJ5IE1hcmlqbiBIYXZlcmJla2UgYW5kIG90aGVyc1xuLy8gRGlzdHJpYnV0ZWQgdW5kZXIgYW4gTUlUIGxpY2Vuc2U6IGh0dHA6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbihmdW5jdGlvbihtb2QpIHtcbiAgaWYgKHR5cGVvZiBleHBvcnRzID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSA9PSBcIm9iamVjdFwiKSAvLyBDb21tb25KU1xuICAgIG1vZChyZXF1aXJlKFwiLi4vLi4vbGliL2NvZGVtaXJyb3JcIikpO1xuICBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSAvLyBBTURcbiAgICBkZWZpbmUoW1wiLi4vLi4vbGliL2NvZGVtaXJyb3JcIl0sIG1vZCk7XG4gIGVsc2UgLy8gUGxhaW4gYnJvd3NlciBlbnZcbiAgICBtb2QoQ29kZU1pcnJvcik7XG59KShmdW5jdGlvbihDb2RlTWlycm9yKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIGZ1bmN0aW9uIGRvRm9sZChjbSwgcG9zLCBvcHRpb25zLCBmb3JjZSkge1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuY2FsbCkge1xuICAgICAgdmFyIGZpbmRlciA9IG9wdGlvbnM7XG4gICAgICBvcHRpb25zID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGZpbmRlciA9IGdldE9wdGlvbihjbSwgb3B0aW9ucywgXCJyYW5nZUZpbmRlclwiKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwb3MgPT0gXCJudW1iZXJcIikgcG9zID0gQ29kZU1pcnJvci5Qb3MocG9zLCAwKTtcbiAgICB2YXIgbWluU2l6ZSA9IGdldE9wdGlvbihjbSwgb3B0aW9ucywgXCJtaW5Gb2xkU2l6ZVwiKTtcblxuICAgIGZ1bmN0aW9uIGdldFJhbmdlKGFsbG93Rm9sZGVkKSB7XG4gICAgICB2YXIgcmFuZ2UgPSBmaW5kZXIoY20sIHBvcyk7XG4gICAgICBpZiAoIXJhbmdlIHx8IHJhbmdlLnRvLmxpbmUgLSByYW5nZS5mcm9tLmxpbmUgPCBtaW5TaXplKSByZXR1cm4gbnVsbDtcbiAgICAgIHZhciBtYXJrcyA9IGNtLmZpbmRNYXJrc0F0KHJhbmdlLmZyb20pO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrcy5sZW5ndGg7ICsraSkge1xuICAgICAgICBpZiAobWFya3NbaV0uX19pc0ZvbGQgJiYgZm9yY2UgIT09IFwiZm9sZFwiKSB7XG4gICAgICAgICAgaWYgKCFhbGxvd0ZvbGRlZCkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgcmFuZ2UuY2xlYXJlZCA9IHRydWU7XG4gICAgICAgICAgbWFya3NbaV0uY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJhbmdlO1xuICAgIH1cblxuICAgIHZhciByYW5nZSA9IGdldFJhbmdlKHRydWUpO1xuICAgIGlmIChnZXRPcHRpb24oY20sIG9wdGlvbnMsIFwic2NhblVwXCIpKSB3aGlsZSAoIXJhbmdlICYmIHBvcy5saW5lID4gY20uZmlyc3RMaW5lKCkpIHtcbiAgICAgIHBvcyA9IENvZGVNaXJyb3IuUG9zKHBvcy5saW5lIC0gMSwgMCk7XG4gICAgICByYW5nZSA9IGdldFJhbmdlKGZhbHNlKTtcbiAgICB9XG4gICAgaWYgKCFyYW5nZSB8fCByYW5nZS5jbGVhcmVkIHx8IGZvcmNlID09PSBcInVuZm9sZFwiKSByZXR1cm47XG5cbiAgICB2YXIgbXlXaWRnZXQgPSBtYWtlV2lkZ2V0KGNtLCBvcHRpb25zKTtcbiAgICBDb2RlTWlycm9yLm9uKG15V2lkZ2V0LCBcIm1vdXNlZG93blwiLCBmdW5jdGlvbihlKSB7XG4gICAgICBteVJhbmdlLmNsZWFyKCk7XG4gICAgICBDb2RlTWlycm9yLmVfcHJldmVudERlZmF1bHQoZSk7XG4gICAgfSk7XG4gICAgdmFyIG15UmFuZ2UgPSBjbS5tYXJrVGV4dChyYW5nZS5mcm9tLCByYW5nZS50bywge1xuICAgICAgcmVwbGFjZWRXaXRoOiBteVdpZGdldCxcbiAgICAgIGNsZWFyT25FbnRlcjogdHJ1ZSxcbiAgICAgIF9faXNGb2xkOiB0cnVlXG4gICAgfSk7XG4gICAgbXlSYW5nZS5vbihcImNsZWFyXCIsIGZ1bmN0aW9uKGZyb20sIHRvKSB7XG4gICAgICBDb2RlTWlycm9yLnNpZ25hbChjbSwgXCJ1bmZvbGRcIiwgY20sIGZyb20sIHRvKTtcbiAgICB9KTtcbiAgICBDb2RlTWlycm9yLnNpZ25hbChjbSwgXCJmb2xkXCIsIGNtLCByYW5nZS5mcm9tLCByYW5nZS50byk7XG4gIH1cblxuICBmdW5jdGlvbiBtYWtlV2lkZ2V0KGNtLCBvcHRpb25zKSB7XG4gICAgdmFyIHdpZGdldCA9IGdldE9wdGlvbihjbSwgb3B0aW9ucywgXCJ3aWRnZXRcIik7XG4gICAgaWYgKHR5cGVvZiB3aWRnZXQgPT0gXCJzdHJpbmdcIikge1xuICAgICAgdmFyIHRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh3aWRnZXQpO1xuICAgICAgd2lkZ2V0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICB3aWRnZXQuYXBwZW5kQ2hpbGQodGV4dCk7XG4gICAgICB3aWRnZXQuY2xhc3NOYW1lID0gXCJDb2RlTWlycm9yLWZvbGRtYXJrZXJcIjtcbiAgICB9XG4gICAgcmV0dXJuIHdpZGdldDtcbiAgfVxuXG4gIC8vIENsdW1zeSBiYWNrd2FyZHMtY29tcGF0aWJsZSBpbnRlcmZhY2VcbiAgQ29kZU1pcnJvci5uZXdGb2xkRnVuY3Rpb24gPSBmdW5jdGlvbihyYW5nZUZpbmRlciwgd2lkZ2V0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGNtLCBwb3MpIHsgZG9Gb2xkKGNtLCBwb3MsIHtyYW5nZUZpbmRlcjogcmFuZ2VGaW5kZXIsIHdpZGdldDogd2lkZ2V0fSk7IH07XG4gIH07XG5cbiAgLy8gTmV3LXN0eWxlIGludGVyZmFjZVxuICBDb2RlTWlycm9yLmRlZmluZUV4dGVuc2lvbihcImZvbGRDb2RlXCIsIGZ1bmN0aW9uKHBvcywgb3B0aW9ucywgZm9yY2UpIHtcbiAgICBkb0ZvbGQodGhpcywgcG9zLCBvcHRpb25zLCBmb3JjZSk7XG4gIH0pO1xuXG4gIENvZGVNaXJyb3IuZGVmaW5lRXh0ZW5zaW9uKFwiaXNGb2xkZWRcIiwgZnVuY3Rpb24ocG9zKSB7XG4gICAgdmFyIG1hcmtzID0gdGhpcy5maW5kTWFya3NBdChwb3MpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFya3MubGVuZ3RoOyArK2kpXG4gICAgICBpZiAobWFya3NbaV0uX19pc0ZvbGQpIHJldHVybiB0cnVlO1xuICB9KTtcblxuICBDb2RlTWlycm9yLmNvbW1hbmRzLnRvZ2dsZUZvbGQgPSBmdW5jdGlvbihjbSkge1xuICAgIGNtLmZvbGRDb2RlKGNtLmdldEN1cnNvcigpKTtcbiAgfTtcbiAgQ29kZU1pcnJvci5jb21tYW5kcy5mb2xkID0gZnVuY3Rpb24oY20pIHtcbiAgICBjbS5mb2xkQ29kZShjbS5nZXRDdXJzb3IoKSwgbnVsbCwgXCJmb2xkXCIpO1xuICB9O1xuICBDb2RlTWlycm9yLmNvbW1hbmRzLnVuZm9sZCA9IGZ1bmN0aW9uKGNtKSB7XG4gICAgY20uZm9sZENvZGUoY20uZ2V0Q3Vyc29yKCksIG51bGwsIFwidW5mb2xkXCIpO1xuICB9O1xuICBDb2RlTWlycm9yLmNvbW1hbmRzLmZvbGRBbGwgPSBmdW5jdGlvbihjbSkge1xuICAgIGNtLm9wZXJhdGlvbihmdW5jdGlvbigpIHtcbiAgICAgIGZvciAodmFyIGkgPSBjbS5maXJzdExpbmUoKSwgZSA9IGNtLmxhc3RMaW5lKCk7IGkgPD0gZTsgaSsrKVxuICAgICAgICBjbS5mb2xkQ29kZShDb2RlTWlycm9yLlBvcyhpLCAwKSwgbnVsbCwgXCJmb2xkXCIpO1xuICAgIH0pO1xuICB9O1xuICBDb2RlTWlycm9yLmNvbW1hbmRzLnVuZm9sZEFsbCA9IGZ1bmN0aW9uKGNtKSB7XG4gICAgY20ub3BlcmF0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgZm9yICh2YXIgaSA9IGNtLmZpcnN0TGluZSgpLCBlID0gY20ubGFzdExpbmUoKTsgaSA8PSBlOyBpKyspXG4gICAgICAgIGNtLmZvbGRDb2RlKENvZGVNaXJyb3IuUG9zKGksIDApLCBudWxsLCBcInVuZm9sZFwiKTtcbiAgICB9KTtcbiAgfTtcblxuICBDb2RlTWlycm9yLnJlZ2lzdGVySGVscGVyKFwiZm9sZFwiLCBcImNvbWJpbmVcIiwgZnVuY3Rpb24oKSB7XG4gICAgdmFyIGZ1bmNzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcbiAgICByZXR1cm4gZnVuY3Rpb24oY20sIHN0YXJ0KSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZ1bmNzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBmb3VuZCA9IGZ1bmNzW2ldKGNtLCBzdGFydCk7XG4gICAgICAgIGlmIChmb3VuZCkgcmV0dXJuIGZvdW5kO1xuICAgICAgfVxuICAgIH07XG4gIH0pO1xuXG4gIENvZGVNaXJyb3IucmVnaXN0ZXJIZWxwZXIoXCJmb2xkXCIsIFwiYXV0b1wiLCBmdW5jdGlvbihjbSwgc3RhcnQpIHtcbiAgICB2YXIgaGVscGVycyA9IGNtLmdldEhlbHBlcnMoc3RhcnQsIFwiZm9sZFwiKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhlbHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjdXIgPSBoZWxwZXJzW2ldKGNtLCBzdGFydCk7XG4gICAgICBpZiAoY3VyKSByZXR1cm4gY3VyO1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICAgIHJhbmdlRmluZGVyOiBDb2RlTWlycm9yLmZvbGQuYXV0byxcbiAgICB3aWRnZXQ6IFwiXFx1MjE5NFwiLFxuICAgIG1pbkZvbGRTaXplOiAwLFxuICAgIHNjYW5VcDogZmFsc2VcbiAgfTtcblxuICBDb2RlTWlycm9yLmRlZmluZU9wdGlvbihcImZvbGRPcHRpb25zXCIsIG51bGwpO1xuXG4gIGZ1bmN0aW9uIGdldE9wdGlvbihjbSwgb3B0aW9ucywgbmFtZSkge1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnNbbmFtZV0gIT09IHVuZGVmaW5lZClcbiAgICAgIHJldHVybiBvcHRpb25zW25hbWVdO1xuICAgIHZhciBlZGl0b3JPcHRpb25zID0gY20ub3B0aW9ucy5mb2xkT3B0aW9ucztcbiAgICBpZiAoZWRpdG9yT3B0aW9ucyAmJiBlZGl0b3JPcHRpb25zW25hbWVdICE9PSB1bmRlZmluZWQpXG4gICAgICByZXR1cm4gZWRpdG9yT3B0aW9uc1tuYW1lXTtcbiAgICByZXR1cm4gZGVmYXVsdE9wdGlvbnNbbmFtZV07XG4gIH1cblxuICBDb2RlTWlycm9yLmRlZmluZUV4dGVuc2lvbihcImZvbGRPcHRpb25cIiwgZnVuY3Rpb24ob3B0aW9ucywgbmFtZSkge1xuICAgIHJldHVybiBnZXRPcHRpb24odGhpcywgb3B0aW9ucywgbmFtZSk7XG4gIH0pO1xufSk7XG4iLCIvLyBDb2RlTWlycm9yLCBjb3B5cmlnaHQgKGMpIGJ5IE1hcmlqbiBIYXZlcmJla2UgYW5kIG90aGVyc1xuLy8gRGlzdHJpYnV0ZWQgdW5kZXIgYW4gTUlUIGxpY2Vuc2U6IGh0dHA6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbihmdW5jdGlvbihtb2QpIHtcbiAgaWYgKHR5cGVvZiBleHBvcnRzID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSA9PSBcIm9iamVjdFwiKSAvLyBDb21tb25KU1xuICAgIG1vZChyZXF1aXJlKFwiLi4vLi4vbGliL2NvZGVtaXJyb3JcIiksIHJlcXVpcmUoXCIuL2ZvbGRjb2RlXCIpKTtcbiAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkgLy8gQU1EXG4gICAgZGVmaW5lKFtcIi4uLy4uL2xpYi9jb2RlbWlycm9yXCIsIFwiLi9mb2xkY29kZVwiXSwgbW9kKTtcbiAgZWxzZSAvLyBQbGFpbiBicm93c2VyIGVudlxuICAgIG1vZChDb2RlTWlycm9yKTtcbn0pKGZ1bmN0aW9uKENvZGVNaXJyb3IpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVPcHRpb24oXCJmb2xkR3V0dGVyXCIsIGZhbHNlLCBmdW5jdGlvbihjbSwgdmFsLCBvbGQpIHtcbiAgICBpZiAob2xkICYmIG9sZCAhPSBDb2RlTWlycm9yLkluaXQpIHtcbiAgICAgIGNtLmNsZWFyR3V0dGVyKGNtLnN0YXRlLmZvbGRHdXR0ZXIub3B0aW9ucy5ndXR0ZXIpO1xuICAgICAgY20uc3RhdGUuZm9sZEd1dHRlciA9IG51bGw7XG4gICAgICBjbS5vZmYoXCJndXR0ZXJDbGlja1wiLCBvbkd1dHRlckNsaWNrKTtcbiAgICAgIGNtLm9mZihcImNoYW5nZVwiLCBvbkNoYW5nZSk7XG4gICAgICBjbS5vZmYoXCJ2aWV3cG9ydENoYW5nZVwiLCBvblZpZXdwb3J0Q2hhbmdlKTtcbiAgICAgIGNtLm9mZihcImZvbGRcIiwgb25Gb2xkKTtcbiAgICAgIGNtLm9mZihcInVuZm9sZFwiLCBvbkZvbGQpO1xuICAgICAgY20ub2ZmKFwic3dhcERvY1wiLCB1cGRhdGVJblZpZXdwb3J0KTtcbiAgICB9XG4gICAgaWYgKHZhbCkge1xuICAgICAgY20uc3RhdGUuZm9sZEd1dHRlciA9IG5ldyBTdGF0ZShwYXJzZU9wdGlvbnModmFsKSk7XG4gICAgICB1cGRhdGVJblZpZXdwb3J0KGNtKTtcbiAgICAgIGNtLm9uKFwiZ3V0dGVyQ2xpY2tcIiwgb25HdXR0ZXJDbGljayk7XG4gICAgICBjbS5vbihcImNoYW5nZVwiLCBvbkNoYW5nZSk7XG4gICAgICBjbS5vbihcInZpZXdwb3J0Q2hhbmdlXCIsIG9uVmlld3BvcnRDaGFuZ2UpO1xuICAgICAgY20ub24oXCJmb2xkXCIsIG9uRm9sZCk7XG4gICAgICBjbS5vbihcInVuZm9sZFwiLCBvbkZvbGQpO1xuICAgICAgY20ub24oXCJzd2FwRG9jXCIsIHVwZGF0ZUluVmlld3BvcnQpO1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIFBvcyA9IENvZGVNaXJyb3IuUG9zO1xuXG4gIGZ1bmN0aW9uIFN0YXRlKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMuZnJvbSA9IHRoaXMudG8gPSAwO1xuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2VPcHRpb25zKG9wdHMpIHtcbiAgICBpZiAob3B0cyA9PT0gdHJ1ZSkgb3B0cyA9IHt9O1xuICAgIGlmIChvcHRzLmd1dHRlciA9PSBudWxsKSBvcHRzLmd1dHRlciA9IFwiQ29kZU1pcnJvci1mb2xkZ3V0dGVyXCI7XG4gICAgaWYgKG9wdHMuaW5kaWNhdG9yT3BlbiA9PSBudWxsKSBvcHRzLmluZGljYXRvck9wZW4gPSBcIkNvZGVNaXJyb3ItZm9sZGd1dHRlci1vcGVuXCI7XG4gICAgaWYgKG9wdHMuaW5kaWNhdG9yRm9sZGVkID09IG51bGwpIG9wdHMuaW5kaWNhdG9yRm9sZGVkID0gXCJDb2RlTWlycm9yLWZvbGRndXR0ZXItZm9sZGVkXCI7XG4gICAgcmV0dXJuIG9wdHM7XG4gIH1cblxuICBmdW5jdGlvbiBpc0ZvbGRlZChjbSwgbGluZSkge1xuICAgIHZhciBtYXJrcyA9IGNtLmZpbmRNYXJrc0F0KFBvcyhsaW5lKSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrcy5sZW5ndGg7ICsraSlcbiAgICAgIGlmIChtYXJrc1tpXS5fX2lzRm9sZCAmJiBtYXJrc1tpXS5maW5kKCkuZnJvbS5saW5lID09IGxpbmUpIHJldHVybiBtYXJrc1tpXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1hcmtlcihzcGVjKSB7XG4gICAgaWYgKHR5cGVvZiBzcGVjID09IFwic3RyaW5nXCIpIHtcbiAgICAgIHZhciBlbHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgZWx0LmNsYXNzTmFtZSA9IHNwZWMgKyBcIiBDb2RlTWlycm9yLWd1dHRlcm1hcmtlci1zdWJ0bGVcIjtcbiAgICAgIHJldHVybiBlbHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBzcGVjLmNsb25lTm9kZSh0cnVlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVGb2xkSW5mbyhjbSwgZnJvbSwgdG8pIHtcbiAgICB2YXIgb3B0cyA9IGNtLnN0YXRlLmZvbGRHdXR0ZXIub3B0aW9ucywgY3VyID0gZnJvbTtcbiAgICB2YXIgbWluU2l6ZSA9IGNtLmZvbGRPcHRpb24ob3B0cywgXCJtaW5Gb2xkU2l6ZVwiKTtcbiAgICB2YXIgZnVuYyA9IGNtLmZvbGRPcHRpb24ob3B0cywgXCJyYW5nZUZpbmRlclwiKTtcbiAgICBjbS5lYWNoTGluZShmcm9tLCB0bywgZnVuY3Rpb24obGluZSkge1xuICAgICAgdmFyIG1hcmsgPSBudWxsO1xuICAgICAgaWYgKGlzRm9sZGVkKGNtLCBjdXIpKSB7XG4gICAgICAgIG1hcmsgPSBtYXJrZXIob3B0cy5pbmRpY2F0b3JGb2xkZWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHBvcyA9IFBvcyhjdXIsIDApO1xuICAgICAgICB2YXIgcmFuZ2UgPSBmdW5jICYmIGZ1bmMoY20sIHBvcyk7XG4gICAgICAgIGlmIChyYW5nZSAmJiByYW5nZS50by5saW5lIC0gcmFuZ2UuZnJvbS5saW5lID49IG1pblNpemUpXG4gICAgICAgICAgbWFyayA9IG1hcmtlcihvcHRzLmluZGljYXRvck9wZW4pO1xuICAgICAgfVxuICAgICAgY20uc2V0R3V0dGVyTWFya2VyKGxpbmUsIG9wdHMuZ3V0dGVyLCBtYXJrKTtcbiAgICAgICsrY3VyO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlSW5WaWV3cG9ydChjbSkge1xuICAgIHZhciB2cCA9IGNtLmdldFZpZXdwb3J0KCksIHN0YXRlID0gY20uc3RhdGUuZm9sZEd1dHRlcjtcbiAgICBpZiAoIXN0YXRlKSByZXR1cm47XG4gICAgY20ub3BlcmF0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgdXBkYXRlRm9sZEluZm8oY20sIHZwLmZyb20sIHZwLnRvKTtcbiAgICB9KTtcbiAgICBzdGF0ZS5mcm9tID0gdnAuZnJvbTsgc3RhdGUudG8gPSB2cC50bztcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uR3V0dGVyQ2xpY2soY20sIGxpbmUsIGd1dHRlcikge1xuICAgIHZhciBzdGF0ZSA9IGNtLnN0YXRlLmZvbGRHdXR0ZXI7XG4gICAgaWYgKCFzdGF0ZSkgcmV0dXJuO1xuICAgIHZhciBvcHRzID0gc3RhdGUub3B0aW9ucztcbiAgICBpZiAoZ3V0dGVyICE9IG9wdHMuZ3V0dGVyKSByZXR1cm47XG4gICAgdmFyIGZvbGRlZCA9IGlzRm9sZGVkKGNtLCBsaW5lKTtcbiAgICBpZiAoZm9sZGVkKSBmb2xkZWQuY2xlYXIoKTtcbiAgICBlbHNlIGNtLmZvbGRDb2RlKFBvcyhsaW5lLCAwKSwgb3B0cy5yYW5nZUZpbmRlcik7XG4gIH1cblxuICBmdW5jdGlvbiBvbkNoYW5nZShjbSkge1xuICAgIHZhciBzdGF0ZSA9IGNtLnN0YXRlLmZvbGRHdXR0ZXI7XG4gICAgaWYgKCFzdGF0ZSkgcmV0dXJuO1xuICAgIHZhciBvcHRzID0gc3RhdGUub3B0aW9ucztcbiAgICBzdGF0ZS5mcm9tID0gc3RhdGUudG8gPSAwO1xuICAgIGNsZWFyVGltZW91dChzdGF0ZS5jaGFuZ2VVcGRhdGUpO1xuICAgIHN0YXRlLmNoYW5nZVVwZGF0ZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IHVwZGF0ZUluVmlld3BvcnQoY20pOyB9LCBvcHRzLmZvbGRPbkNoYW5nZVRpbWVTcGFuIHx8IDYwMCk7XG4gIH1cblxuICBmdW5jdGlvbiBvblZpZXdwb3J0Q2hhbmdlKGNtKSB7XG4gICAgdmFyIHN0YXRlID0gY20uc3RhdGUuZm9sZEd1dHRlcjtcbiAgICBpZiAoIXN0YXRlKSByZXR1cm47XG4gICAgdmFyIG9wdHMgPSBzdGF0ZS5vcHRpb25zO1xuICAgIGNsZWFyVGltZW91dChzdGF0ZS5jaGFuZ2VVcGRhdGUpO1xuICAgIHN0YXRlLmNoYW5nZVVwZGF0ZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdnAgPSBjbS5nZXRWaWV3cG9ydCgpO1xuICAgICAgaWYgKHN0YXRlLmZyb20gPT0gc3RhdGUudG8gfHwgdnAuZnJvbSAtIHN0YXRlLnRvID4gMjAgfHwgc3RhdGUuZnJvbSAtIHZwLnRvID4gMjApIHtcbiAgICAgICAgdXBkYXRlSW5WaWV3cG9ydChjbSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbS5vcGVyYXRpb24oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKHZwLmZyb20gPCBzdGF0ZS5mcm9tKSB7XG4gICAgICAgICAgICB1cGRhdGVGb2xkSW5mbyhjbSwgdnAuZnJvbSwgc3RhdGUuZnJvbSk7XG4gICAgICAgICAgICBzdGF0ZS5mcm9tID0gdnAuZnJvbTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHZwLnRvID4gc3RhdGUudG8pIHtcbiAgICAgICAgICAgIHVwZGF0ZUZvbGRJbmZvKGNtLCBzdGF0ZS50bywgdnAudG8pO1xuICAgICAgICAgICAgc3RhdGUudG8gPSB2cC50bztcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sIG9wdHMudXBkYXRlVmlld3BvcnRUaW1lU3BhbiB8fCA0MDApO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Gb2xkKGNtLCBmcm9tKSB7XG4gICAgdmFyIHN0YXRlID0gY20uc3RhdGUuZm9sZEd1dHRlcjtcbiAgICBpZiAoIXN0YXRlKSByZXR1cm47XG4gICAgdmFyIGxpbmUgPSBmcm9tLmxpbmU7XG4gICAgaWYgKGxpbmUgPj0gc3RhdGUuZnJvbSAmJiBsaW5lIDwgc3RhdGUudG8pXG4gICAgICB1cGRhdGVGb2xkSW5mbyhjbSwgbGluZSwgbGluZSArIDEpO1xuICB9XG59KTtcbiIsIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cDovL2NvZGVtaXJyb3IubmV0L0xJQ0VOU0VcblxuKGZ1bmN0aW9uKG1vZCkge1xuICBpZiAodHlwZW9mIGV4cG9ydHMgPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlID09IFwib2JqZWN0XCIpIC8vIENvbW1vbkpTXG4gICAgbW9kKHJlcXVpcmUoXCIuLi8uLi9saWIvY29kZW1pcnJvclwiKSk7XG4gIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIC8vIEFNRFxuICAgIGRlZmluZShbXCIuLi8uLi9saWIvY29kZW1pcnJvclwiXSwgbW9kKTtcbiAgZWxzZSAvLyBQbGFpbiBicm93c2VyIGVudlxuICAgIG1vZChDb2RlTWlycm9yKTtcbn0pKGZ1bmN0aW9uKENvZGVNaXJyb3IpIHtcblwidXNlIHN0cmljdFwiO1xuXG5Db2RlTWlycm9yLnJlZ2lzdGVySGVscGVyKFwiZm9sZFwiLCBcImluZGVudFwiLCBmdW5jdGlvbihjbSwgc3RhcnQpIHtcbiAgdmFyIHRhYlNpemUgPSBjbS5nZXRPcHRpb24oXCJ0YWJTaXplXCIpLCBmaXJzdExpbmUgPSBjbS5nZXRMaW5lKHN0YXJ0LmxpbmUpO1xuICBpZiAoIS9cXFMvLnRlc3QoZmlyc3RMaW5lKSkgcmV0dXJuO1xuICB2YXIgZ2V0SW5kZW50ID0gZnVuY3Rpb24obGluZSkge1xuICAgIHJldHVybiBDb2RlTWlycm9yLmNvdW50Q29sdW1uKGxpbmUsIG51bGwsIHRhYlNpemUpO1xuICB9O1xuICB2YXIgbXlJbmRlbnQgPSBnZXRJbmRlbnQoZmlyc3RMaW5lKTtcbiAgdmFyIGxhc3RMaW5lSW5Gb2xkID0gbnVsbDtcbiAgLy8gR28gdGhyb3VnaCBsaW5lcyB1bnRpbCB3ZSBmaW5kIGEgbGluZSB0aGF0IGRlZmluaXRlbHkgZG9lc24ndCBiZWxvbmcgaW5cbiAgLy8gdGhlIGJsb2NrIHdlJ3JlIGZvbGRpbmcsIG9yIHRvIHRoZSBlbmQuXG4gIGZvciAodmFyIGkgPSBzdGFydC5saW5lICsgMSwgZW5kID0gY20ubGFzdExpbmUoKTsgaSA8PSBlbmQ7ICsraSkge1xuICAgIHZhciBjdXJMaW5lID0gY20uZ2V0TGluZShpKTtcbiAgICB2YXIgY3VySW5kZW50ID0gZ2V0SW5kZW50KGN1ckxpbmUpO1xuICAgIGlmIChjdXJJbmRlbnQgPiBteUluZGVudCkge1xuICAgICAgLy8gTGluZXMgd2l0aCBhIGdyZWF0ZXIgaW5kZW50IGFyZSBjb25zaWRlcmVkIHBhcnQgb2YgdGhlIGJsb2NrLlxuICAgICAgbGFzdExpbmVJbkZvbGQgPSBpO1xuICAgIH0gZWxzZSBpZiAoIS9cXFMvLnRlc3QoY3VyTGluZSkpIHtcbiAgICAgIC8vIEVtcHR5IGxpbmVzIG1pZ2h0IGJlIGJyZWFrcyB3aXRoaW4gdGhlIGJsb2NrIHdlJ3JlIHRyeWluZyB0byBmb2xkLlxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBBIG5vbi1lbXB0eSBsaW5lIGF0IGFuIGluZGVudCBlcXVhbCB0byBvciBsZXNzIHRoYW4gb3VycyBtYXJrcyB0aGVcbiAgICAgIC8vIHN0YXJ0IG9mIGFub3RoZXIgYmxvY2suXG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgaWYgKGxhc3RMaW5lSW5Gb2xkKSByZXR1cm4ge1xuICAgIGZyb206IENvZGVNaXJyb3IuUG9zKHN0YXJ0LmxpbmUsIGZpcnN0TGluZS5sZW5ndGgpLFxuICAgIHRvOiBDb2RlTWlycm9yLlBvcyhsYXN0TGluZUluRm9sZCwgY20uZ2V0TGluZShsYXN0TGluZUluRm9sZCkubGVuZ3RoKVxuICB9O1xufSk7XG5cbn0pO1xuIiwiLy8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhlcnNcbi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwOi8vY29kZW1pcnJvci5uZXQvTElDRU5TRVxuXG4oZnVuY3Rpb24obW9kKSB7XG4gIGlmICh0eXBlb2YgZXhwb3J0cyA9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUgPT0gXCJvYmplY3RcIikgLy8gQ29tbW9uSlNcbiAgICBtb2QocmVxdWlyZShcIi4uLy4uL2xpYi9jb2RlbWlycm9yXCIpKTtcbiAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkgLy8gQU1EXG4gICAgZGVmaW5lKFtcIi4uLy4uL2xpYi9jb2RlbWlycm9yXCJdLCBtb2QpO1xuICBlbHNlIC8vIFBsYWluIGJyb3dzZXIgZW52XG4gICAgbW9kKENvZGVNaXJyb3IpO1xufSkoZnVuY3Rpb24oQ29kZU1pcnJvcikge1xuICB2YXIgUG9zID0gQ29kZU1pcnJvci5Qb3M7XG5cbiAgZnVuY3Rpb24gZm9yRWFjaChhcnIsIGYpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgZSA9IGFyci5sZW5ndGg7IGkgPCBlOyArK2kpIGYoYXJyW2ldKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFycmF5Q29udGFpbnMoYXJyLCBpdGVtKSB7XG4gICAgaWYgKCFBcnJheS5wcm90b3R5cGUuaW5kZXhPZikge1xuICAgICAgdmFyIGkgPSBhcnIubGVuZ3RoO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBpZiAoYXJyW2ldID09PSBpdGVtKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIGFyci5pbmRleE9mKGl0ZW0pICE9IC0xO1xuICB9XG5cbiAgZnVuY3Rpb24gc2NyaXB0SGludChlZGl0b3IsIGtleXdvcmRzLCBnZXRUb2tlbiwgb3B0aW9ucykge1xuICAgIC8vIEZpbmQgdGhlIHRva2VuIGF0IHRoZSBjdXJzb3JcbiAgICB2YXIgY3VyID0gZWRpdG9yLmdldEN1cnNvcigpLCB0b2tlbiA9IGdldFRva2VuKGVkaXRvciwgY3VyKTtcbiAgICBpZiAoL1xcYig/OnN0cmluZ3xjb21tZW50KVxcYi8udGVzdCh0b2tlbi50eXBlKSkgcmV0dXJuO1xuICAgIHRva2VuLnN0YXRlID0gQ29kZU1pcnJvci5pbm5lck1vZGUoZWRpdG9yLmdldE1vZGUoKSwgdG9rZW4uc3RhdGUpLnN0YXRlO1xuXG4gICAgLy8gSWYgaXQncyBub3QgYSAnd29yZC1zdHlsZScgdG9rZW4sIGlnbm9yZSB0aGUgdG9rZW4uXG4gICAgaWYgKCEvXltcXHckX10qJC8udGVzdCh0b2tlbi5zdHJpbmcpKSB7XG4gICAgICB0b2tlbiA9IHtzdGFydDogY3VyLmNoLCBlbmQ6IGN1ci5jaCwgc3RyaW5nOiBcIlwiLCBzdGF0ZTogdG9rZW4uc3RhdGUsXG4gICAgICAgICAgICAgICB0eXBlOiB0b2tlbi5zdHJpbmcgPT0gXCIuXCIgPyBcInByb3BlcnR5XCIgOiBudWxsfTtcbiAgICB9IGVsc2UgaWYgKHRva2VuLmVuZCA+IGN1ci5jaCkge1xuICAgICAgdG9rZW4uZW5kID0gY3VyLmNoO1xuICAgICAgdG9rZW4uc3RyaW5nID0gdG9rZW4uc3RyaW5nLnNsaWNlKDAsIGN1ci5jaCAtIHRva2VuLnN0YXJ0KTtcbiAgICB9XG5cbiAgICB2YXIgdHByb3AgPSB0b2tlbjtcbiAgICAvLyBJZiBpdCBpcyBhIHByb3BlcnR5LCBmaW5kIG91dCB3aGF0IGl0IGlzIGEgcHJvcGVydHkgb2YuXG4gICAgd2hpbGUgKHRwcm9wLnR5cGUgPT0gXCJwcm9wZXJ0eVwiKSB7XG4gICAgICB0cHJvcCA9IGdldFRva2VuKGVkaXRvciwgUG9zKGN1ci5saW5lLCB0cHJvcC5zdGFydCkpO1xuICAgICAgaWYgKHRwcm9wLnN0cmluZyAhPSBcIi5cIikgcmV0dXJuO1xuICAgICAgdHByb3AgPSBnZXRUb2tlbihlZGl0b3IsIFBvcyhjdXIubGluZSwgdHByb3Auc3RhcnQpKTtcbiAgICAgIGlmICghY29udGV4dCkgdmFyIGNvbnRleHQgPSBbXTtcbiAgICAgIGNvbnRleHQucHVzaCh0cHJvcCk7XG4gICAgfVxuICAgIHJldHVybiB7bGlzdDogZ2V0Q29tcGxldGlvbnModG9rZW4sIGNvbnRleHQsIGtleXdvcmRzLCBvcHRpb25zKSxcbiAgICAgICAgICAgIGZyb206IFBvcyhjdXIubGluZSwgdG9rZW4uc3RhcnQpLFxuICAgICAgICAgICAgdG86IFBvcyhjdXIubGluZSwgdG9rZW4uZW5kKX07XG4gIH1cblxuICBmdW5jdGlvbiBqYXZhc2NyaXB0SGludChlZGl0b3IsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gc2NyaXB0SGludChlZGl0b3IsIGphdmFzY3JpcHRLZXl3b3JkcyxcbiAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZSwgY3VyKSB7cmV0dXJuIGUuZ2V0VG9rZW5BdChjdXIpO30sXG4gICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyk7XG4gIH07XG4gIENvZGVNaXJyb3IucmVnaXN0ZXJIZWxwZXIoXCJoaW50XCIsIFwiamF2YXNjcmlwdFwiLCBqYXZhc2NyaXB0SGludCk7XG5cbiAgZnVuY3Rpb24gZ2V0Q29mZmVlU2NyaXB0VG9rZW4oZWRpdG9yLCBjdXIpIHtcbiAgLy8gVGhpcyBnZXRUb2tlbiwgaXQgaXMgZm9yIGNvZmZlZXNjcmlwdCwgaW1pdGF0ZXMgdGhlIGJlaGF2aW9yIG9mXG4gIC8vIGdldFRva2VuQXQgbWV0aG9kIGluIGphdmFzY3JpcHQuanMsIHRoYXQgaXMsIHJldHVybmluZyBcInByb3BlcnR5XCJcbiAgLy8gdHlwZSBhbmQgdHJlYXQgXCIuXCIgYXMgaW5kZXBlbmVudCB0b2tlbi5cbiAgICB2YXIgdG9rZW4gPSBlZGl0b3IuZ2V0VG9rZW5BdChjdXIpO1xuICAgIGlmIChjdXIuY2ggPT0gdG9rZW4uc3RhcnQgKyAxICYmIHRva2VuLnN0cmluZy5jaGFyQXQoMCkgPT0gJy4nKSB7XG4gICAgICB0b2tlbi5lbmQgPSB0b2tlbi5zdGFydDtcbiAgICAgIHRva2VuLnN0cmluZyA9ICcuJztcbiAgICAgIHRva2VuLnR5cGUgPSBcInByb3BlcnR5XCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKC9eXFwuW1xcdyRfXSokLy50ZXN0KHRva2VuLnN0cmluZykpIHtcbiAgICAgIHRva2VuLnR5cGUgPSBcInByb3BlcnR5XCI7XG4gICAgICB0b2tlbi5zdGFydCsrO1xuICAgICAgdG9rZW4uc3RyaW5nID0gdG9rZW4uc3RyaW5nLnJlcGxhY2UoL1xcLi8sICcnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRva2VuO1xuICB9XG5cbiAgZnVuY3Rpb24gY29mZmVlc2NyaXB0SGludChlZGl0b3IsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gc2NyaXB0SGludChlZGl0b3IsIGNvZmZlZXNjcmlwdEtleXdvcmRzLCBnZXRDb2ZmZWVTY3JpcHRUb2tlbiwgb3B0aW9ucyk7XG4gIH1cbiAgQ29kZU1pcnJvci5yZWdpc3RlckhlbHBlcihcImhpbnRcIiwgXCJjb2ZmZWVzY3JpcHRcIiwgY29mZmVlc2NyaXB0SGludCk7XG5cbiAgdmFyIHN0cmluZ1Byb3BzID0gKFwiY2hhckF0IGNoYXJDb2RlQXQgaW5kZXhPZiBsYXN0SW5kZXhPZiBzdWJzdHJpbmcgc3Vic3RyIHNsaWNlIHRyaW0gdHJpbUxlZnQgdHJpbVJpZ2h0IFwiICtcbiAgICAgICAgICAgICAgICAgICAgIFwidG9VcHBlckNhc2UgdG9Mb3dlckNhc2Ugc3BsaXQgY29uY2F0IG1hdGNoIHJlcGxhY2Ugc2VhcmNoXCIpLnNwbGl0KFwiIFwiKTtcbiAgdmFyIGFycmF5UHJvcHMgPSAoXCJsZW5ndGggY29uY2F0IGpvaW4gc3BsaWNlIHB1c2ggcG9wIHNoaWZ0IHVuc2hpZnQgc2xpY2UgcmV2ZXJzZSBzb3J0IGluZGV4T2YgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcImxhc3RJbmRleE9mIGV2ZXJ5IHNvbWUgZmlsdGVyIGZvckVhY2ggbWFwIHJlZHVjZSByZWR1Y2VSaWdodCBcIikuc3BsaXQoXCIgXCIpO1xuICB2YXIgZnVuY1Byb3BzID0gXCJwcm90b3R5cGUgYXBwbHkgY2FsbCBiaW5kXCIuc3BsaXQoXCIgXCIpO1xuICB2YXIgamF2YXNjcmlwdEtleXdvcmRzID0gKFwiYnJlYWsgY2FzZSBjYXRjaCBjb250aW51ZSBkZWJ1Z2dlciBkZWZhdWx0IGRlbGV0ZSBkbyBlbHNlIGZhbHNlIGZpbmFsbHkgZm9yIGZ1bmN0aW9uIFwiICtcbiAgICAgICAgICAgICAgICAgIFwiaWYgaW4gaW5zdGFuY2VvZiBuZXcgbnVsbCByZXR1cm4gc3dpdGNoIHRocm93IHRydWUgdHJ5IHR5cGVvZiB2YXIgdm9pZCB3aGlsZSB3aXRoXCIpLnNwbGl0KFwiIFwiKTtcbiAgdmFyIGNvZmZlZXNjcmlwdEtleXdvcmRzID0gKFwiYW5kIGJyZWFrIGNhdGNoIGNsYXNzIGNvbnRpbnVlIGRlbGV0ZSBkbyBlbHNlIGV4dGVuZHMgZmFsc2UgZmluYWxseSBmb3IgXCIgK1xuICAgICAgICAgICAgICAgICAgXCJpZiBpbiBpbnN0YW5jZW9mIGlzbnQgbmV3IG5vIG5vdCBudWxsIG9mIG9mZiBvbiBvciByZXR1cm4gc3dpdGNoIHRoZW4gdGhyb3cgdHJ1ZSB0cnkgdHlwZW9mIHVudGlsIHZvaWQgd2hpbGUgd2l0aCB5ZXNcIikuc3BsaXQoXCIgXCIpO1xuXG4gIGZ1bmN0aW9uIGdldENvbXBsZXRpb25zKHRva2VuLCBjb250ZXh0LCBrZXl3b3Jkcywgb3B0aW9ucykge1xuICAgIHZhciBmb3VuZCA9IFtdLCBzdGFydCA9IHRva2VuLnN0cmluZywgZ2xvYmFsID0gb3B0aW9ucyAmJiBvcHRpb25zLmdsb2JhbFNjb3BlIHx8IHdpbmRvdztcbiAgICBmdW5jdGlvbiBtYXliZUFkZChzdHIpIHtcbiAgICAgIGlmIChzdHIubGFzdEluZGV4T2Yoc3RhcnQsIDApID09IDAgJiYgIWFycmF5Q29udGFpbnMoZm91bmQsIHN0cikpIGZvdW5kLnB1c2goc3RyKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2F0aGVyQ29tcGxldGlvbnMob2JqKSB7XG4gICAgICBpZiAodHlwZW9mIG9iaiA9PSBcInN0cmluZ1wiKSBmb3JFYWNoKHN0cmluZ1Byb3BzLCBtYXliZUFkZCk7XG4gICAgICBlbHNlIGlmIChvYmogaW5zdGFuY2VvZiBBcnJheSkgZm9yRWFjaChhcnJheVByb3BzLCBtYXliZUFkZCk7XG4gICAgICBlbHNlIGlmIChvYmogaW5zdGFuY2VvZiBGdW5jdGlvbikgZm9yRWFjaChmdW5jUHJvcHMsIG1heWJlQWRkKTtcbiAgICAgIGZvciAodmFyIG5hbWUgaW4gb2JqKSBtYXliZUFkZChuYW1lKTtcbiAgICB9XG5cbiAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0Lmxlbmd0aCkge1xuICAgICAgLy8gSWYgdGhpcyBpcyBhIHByb3BlcnR5LCBzZWUgaWYgaXQgYmVsb25ncyB0byBzb21lIG9iamVjdCB3ZSBjYW5cbiAgICAgIC8vIGZpbmQgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuXG4gICAgICB2YXIgb2JqID0gY29udGV4dC5wb3AoKSwgYmFzZTtcbiAgICAgIGlmIChvYmoudHlwZSAmJiBvYmoudHlwZS5pbmRleE9mKFwidmFyaWFibGVcIikgPT09IDApIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5hZGRpdGlvbmFsQ29udGV4dClcbiAgICAgICAgICBiYXNlID0gb3B0aW9ucy5hZGRpdGlvbmFsQ29udGV4dFtvYmouc3RyaW5nXTtcbiAgICAgICAgaWYgKCFvcHRpb25zIHx8IG9wdGlvbnMudXNlR2xvYmFsU2NvcGUgIT09IGZhbHNlKVxuICAgICAgICAgIGJhc2UgPSBiYXNlIHx8IGdsb2JhbFtvYmouc3RyaW5nXTtcbiAgICAgIH0gZWxzZSBpZiAob2JqLnR5cGUgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICBiYXNlID0gXCJcIjtcbiAgICAgIH0gZWxzZSBpZiAob2JqLnR5cGUgPT0gXCJhdG9tXCIpIHtcbiAgICAgICAgYmFzZSA9IDE7XG4gICAgICB9IGVsc2UgaWYgKG9iai50eXBlID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBpZiAoZ2xvYmFsLmpRdWVyeSAhPSBudWxsICYmIChvYmouc3RyaW5nID09ICckJyB8fCBvYmouc3RyaW5nID09ICdqUXVlcnknKSAmJlxuICAgICAgICAgICAgKHR5cGVvZiBnbG9iYWwualF1ZXJ5ID09ICdmdW5jdGlvbicpKVxuICAgICAgICAgIGJhc2UgPSBnbG9iYWwualF1ZXJ5KCk7XG4gICAgICAgIGVsc2UgaWYgKGdsb2JhbC5fICE9IG51bGwgJiYgKG9iai5zdHJpbmcgPT0gJ18nKSAmJiAodHlwZW9mIGdsb2JhbC5fID09ICdmdW5jdGlvbicpKVxuICAgICAgICAgIGJhc2UgPSBnbG9iYWwuXygpO1xuICAgICAgfVxuICAgICAgd2hpbGUgKGJhc2UgIT0gbnVsbCAmJiBjb250ZXh0Lmxlbmd0aClcbiAgICAgICAgYmFzZSA9IGJhc2VbY29udGV4dC5wb3AoKS5zdHJpbmddO1xuICAgICAgaWYgKGJhc2UgIT0gbnVsbCkgZ2F0aGVyQ29tcGxldGlvbnMoYmFzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElmIG5vdCwganVzdCBsb29rIGluIHRoZSBnbG9iYWwgb2JqZWN0IGFuZCBhbnkgbG9jYWwgc2NvcGVcbiAgICAgIC8vIChyZWFkaW5nIGludG8gSlMgbW9kZSBpbnRlcm5hbHMgdG8gZ2V0IGF0IHRoZSBsb2NhbCBhbmQgZ2xvYmFsIHZhcmlhYmxlcylcbiAgICAgIGZvciAodmFyIHYgPSB0b2tlbi5zdGF0ZS5sb2NhbFZhcnM7IHY7IHYgPSB2Lm5leHQpIG1heWJlQWRkKHYubmFtZSk7XG4gICAgICBmb3IgKHZhciB2ID0gdG9rZW4uc3RhdGUuZ2xvYmFsVmFyczsgdjsgdiA9IHYubmV4dCkgbWF5YmVBZGQodi5uYW1lKTtcbiAgICAgIGlmICghb3B0aW9ucyB8fCBvcHRpb25zLnVzZUdsb2JhbFNjb3BlICE9PSBmYWxzZSlcbiAgICAgICAgZ2F0aGVyQ29tcGxldGlvbnMoZ2xvYmFsKTtcbiAgICAgIGZvckVhY2goa2V5d29yZHMsIG1heWJlQWRkKTtcbiAgICB9XG4gICAgcmV0dXJuIGZvdW5kO1xuICB9XG59KTtcbiIsIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cDovL2NvZGVtaXJyb3IubmV0L0xJQ0VOU0VcblxuKGZ1bmN0aW9uKG1vZCkge1xuICBpZiAodHlwZW9mIGV4cG9ydHMgPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlID09IFwib2JqZWN0XCIpIC8vIENvbW1vbkpTXG4gICAgbW9kKHJlcXVpcmUoXCIuLi8uLi9saWIvY29kZW1pcnJvclwiKSk7XG4gIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIC8vIEFNRFxuICAgIGRlZmluZShbXCIuLi8uLi9saWIvY29kZW1pcnJvclwiXSwgbW9kKTtcbiAgZWxzZSAvLyBQbGFpbiBicm93c2VyIGVudlxuICAgIG1vZChDb2RlTWlycm9yKTtcbn0pKGZ1bmN0aW9uKENvZGVNaXJyb3IpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIEhJTlRfRUxFTUVOVF9DTEFTUyAgICAgICAgPSBcIkNvZGVNaXJyb3ItaGludFwiO1xuICB2YXIgQUNUSVZFX0hJTlRfRUxFTUVOVF9DTEFTUyA9IFwiQ29kZU1pcnJvci1oaW50LWFjdGl2ZVwiO1xuXG4gIC8vIFRoaXMgaXMgdGhlIG9sZCBpbnRlcmZhY2UsIGtlcHQgYXJvdW5kIGZvciBub3cgdG8gc3RheVxuICAvLyBiYWNrd2FyZHMtY29tcGF0aWJsZS5cbiAgQ29kZU1pcnJvci5zaG93SGludCA9IGZ1bmN0aW9uKGNtLCBnZXRIaW50cywgb3B0aW9ucykge1xuICAgIGlmICghZ2V0SGludHMpIHJldHVybiBjbS5zaG93SGludChvcHRpb25zKTtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmFzeW5jKSBnZXRIaW50cy5hc3luYyA9IHRydWU7XG4gICAgdmFyIG5ld09wdHMgPSB7aGludDogZ2V0SGludHN9O1xuICAgIGlmIChvcHRpb25zKSBmb3IgKHZhciBwcm9wIGluIG9wdGlvbnMpIG5ld09wdHNbcHJvcF0gPSBvcHRpb25zW3Byb3BdO1xuICAgIHJldHVybiBjbS5zaG93SGludChuZXdPcHRzKTtcbiAgfTtcblxuICBDb2RlTWlycm9yLmRlZmluZUV4dGVuc2lvbihcInNob3dIaW50XCIsIGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gcGFyc2VPcHRpb25zKHRoaXMsIHRoaXMuZ2V0Q3Vyc29yKFwic3RhcnRcIiksIG9wdGlvbnMpO1xuICAgIHZhciBzZWxlY3Rpb25zID0gdGhpcy5saXN0U2VsZWN0aW9ucygpXG4gICAgaWYgKHNlbGVjdGlvbnMubGVuZ3RoID4gMSkgcmV0dXJuO1xuICAgIC8vIEJ5IGRlZmF1bHQsIGRvbid0IGFsbG93IGNvbXBsZXRpb24gd2hlbiBzb21ldGhpbmcgaXMgc2VsZWN0ZWQuXG4gICAgLy8gQSBoaW50IGZ1bmN0aW9uIGNhbiBoYXZlIGEgYHN1cHBvcnRzU2VsZWN0aW9uYCBwcm9wZXJ0eSB0b1xuICAgIC8vIGluZGljYXRlIHRoYXQgaXQgY2FuIGhhbmRsZSBzZWxlY3Rpb25zLlxuICAgIGlmICh0aGlzLnNvbWV0aGluZ1NlbGVjdGVkKCkpIHtcbiAgICAgIGlmICghb3B0aW9ucy5oaW50LnN1cHBvcnRzU2VsZWN0aW9uKSByZXR1cm47XG4gICAgICAvLyBEb24ndCB0cnkgd2l0aCBjcm9zcy1saW5lIHNlbGVjdGlvbnNcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZWN0aW9ucy5sZW5ndGg7IGkrKylcbiAgICAgICAgaWYgKHNlbGVjdGlvbnNbaV0uaGVhZC5saW5lICE9IHNlbGVjdGlvbnNbaV0uYW5jaG9yLmxpbmUpIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0ZS5jb21wbGV0aW9uQWN0aXZlKSB0aGlzLnN0YXRlLmNvbXBsZXRpb25BY3RpdmUuY2xvc2UoKTtcbiAgICB2YXIgY29tcGxldGlvbiA9IHRoaXMuc3RhdGUuY29tcGxldGlvbkFjdGl2ZSA9IG5ldyBDb21wbGV0aW9uKHRoaXMsIG9wdGlvbnMpO1xuICAgIGlmICghY29tcGxldGlvbi5vcHRpb25zLmhpbnQpIHJldHVybjtcblxuICAgIENvZGVNaXJyb3Iuc2lnbmFsKHRoaXMsIFwic3RhcnRDb21wbGV0aW9uXCIsIHRoaXMpO1xuICAgIGNvbXBsZXRpb24udXBkYXRlKHRydWUpO1xuICB9KTtcblxuICBmdW5jdGlvbiBDb21wbGV0aW9uKGNtLCBvcHRpb25zKSB7XG4gICAgdGhpcy5jbSA9IGNtO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy53aWRnZXQgPSBudWxsO1xuICAgIHRoaXMuZGVib3VuY2UgPSAwO1xuICAgIHRoaXMudGljayA9IDA7XG4gICAgdGhpcy5zdGFydFBvcyA9IHRoaXMuY20uZ2V0Q3Vyc29yKFwic3RhcnRcIik7XG4gICAgdGhpcy5zdGFydExlbiA9IHRoaXMuY20uZ2V0TGluZSh0aGlzLnN0YXJ0UG9zLmxpbmUpLmxlbmd0aCAtIHRoaXMuY20uZ2V0U2VsZWN0aW9uKCkubGVuZ3RoO1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGNtLm9uKFwiY3Vyc29yQWN0aXZpdHlcIiwgdGhpcy5hY3Rpdml0eUZ1bmMgPSBmdW5jdGlvbigpIHsgc2VsZi5jdXJzb3JBY3Rpdml0eSgpOyB9KTtcbiAgfVxuXG4gIHZhciByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IGZ1bmN0aW9uKGZuKSB7XG4gICAgcmV0dXJuIHNldFRpbWVvdXQoZm4sIDEwMDAvNjApO1xuICB9O1xuICB2YXIgY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgfHwgY2xlYXJUaW1lb3V0O1xuXG4gIENvbXBsZXRpb24ucHJvdG90eXBlID0ge1xuICAgIGNsb3NlOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghdGhpcy5hY3RpdmUoKSkgcmV0dXJuO1xuICAgICAgdGhpcy5jbS5zdGF0ZS5jb21wbGV0aW9uQWN0aXZlID0gbnVsbDtcbiAgICAgIHRoaXMudGljayA9IG51bGw7XG4gICAgICB0aGlzLmNtLm9mZihcImN1cnNvckFjdGl2aXR5XCIsIHRoaXMuYWN0aXZpdHlGdW5jKTtcblxuICAgICAgaWYgKHRoaXMud2lkZ2V0ICYmIHRoaXMuZGF0YSkgQ29kZU1pcnJvci5zaWduYWwodGhpcy5kYXRhLCBcImNsb3NlXCIpO1xuICAgICAgaWYgKHRoaXMud2lkZ2V0KSB0aGlzLndpZGdldC5jbG9zZSgpO1xuICAgICAgQ29kZU1pcnJvci5zaWduYWwodGhpcy5jbSwgXCJlbmRDb21wbGV0aW9uXCIsIHRoaXMuY20pO1xuICAgIH0sXG5cbiAgICBhY3RpdmU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuY20uc3RhdGUuY29tcGxldGlvbkFjdGl2ZSA9PSB0aGlzO1xuICAgIH0sXG5cbiAgICBwaWNrOiBmdW5jdGlvbihkYXRhLCBpKSB7XG4gICAgICB2YXIgY29tcGxldGlvbiA9IGRhdGEubGlzdFtpXTtcbiAgICAgIGlmIChjb21wbGV0aW9uLmhpbnQpIGNvbXBsZXRpb24uaGludCh0aGlzLmNtLCBkYXRhLCBjb21wbGV0aW9uKTtcbiAgICAgIGVsc2UgdGhpcy5jbS5yZXBsYWNlUmFuZ2UoZ2V0VGV4dChjb21wbGV0aW9uKSwgY29tcGxldGlvbi5mcm9tIHx8IGRhdGEuZnJvbSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvbi50byB8fCBkYXRhLnRvLCBcImNvbXBsZXRlXCIpO1xuICAgICAgQ29kZU1pcnJvci5zaWduYWwoZGF0YSwgXCJwaWNrXCIsIGNvbXBsZXRpb24pO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0sXG5cbiAgICBjdXJzb3JBY3Rpdml0eTogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5kZWJvdW5jZSkge1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmRlYm91bmNlKTtcbiAgICAgICAgdGhpcy5kZWJvdW5jZSA9IDA7XG4gICAgICB9XG5cbiAgICAgIHZhciBwb3MgPSB0aGlzLmNtLmdldEN1cnNvcigpLCBsaW5lID0gdGhpcy5jbS5nZXRMaW5lKHBvcy5saW5lKTtcbiAgICAgIGlmIChwb3MubGluZSAhPSB0aGlzLnN0YXJ0UG9zLmxpbmUgfHwgbGluZS5sZW5ndGggLSBwb3MuY2ggIT0gdGhpcy5zdGFydExlbiAtIHRoaXMuc3RhcnRQb3MuY2ggfHxcbiAgICAgICAgICBwb3MuY2ggPCB0aGlzLnN0YXJ0UG9zLmNoIHx8IHRoaXMuY20uc29tZXRoaW5nU2VsZWN0ZWQoKSB8fFxuICAgICAgICAgIChwb3MuY2ggJiYgdGhpcy5vcHRpb25zLmNsb3NlQ2hhcmFjdGVycy50ZXN0KGxpbmUuY2hhckF0KHBvcy5jaCAtIDEpKSkpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLmRlYm91bmNlID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCkge3NlbGYudXBkYXRlKCk7fSk7XG4gICAgICAgIGlmICh0aGlzLndpZGdldCkgdGhpcy53aWRnZXQuZGlzYWJsZSgpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB1cGRhdGU6IGZ1bmN0aW9uKGZpcnN0KSB7XG4gICAgICBpZiAodGhpcy50aWNrID09IG51bGwpIHJldHVybjtcbiAgICAgIGlmICghdGhpcy5vcHRpb25zLmhpbnQuYXN5bmMpIHtcbiAgICAgICAgdGhpcy5maW5pc2hVcGRhdGUodGhpcy5vcHRpb25zLmhpbnQodGhpcy5jbSwgdGhpcy5vcHRpb25zKSwgZmlyc3QpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG15VGljayA9ICsrdGhpcy50aWNrLCBzZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy5vcHRpb25zLmhpbnQodGhpcy5jbSwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIGlmIChzZWxmLnRpY2sgPT0gbXlUaWNrKSBzZWxmLmZpbmlzaFVwZGF0ZShkYXRhLCBmaXJzdCk7XG4gICAgICAgIH0sIHRoaXMub3B0aW9ucyk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGZpbmlzaFVwZGF0ZTogZnVuY3Rpb24oZGF0YSwgZmlyc3QpIHtcbiAgICAgIGlmICh0aGlzLmRhdGEpIENvZGVNaXJyb3Iuc2lnbmFsKHRoaXMuZGF0YSwgXCJ1cGRhdGVcIik7XG4gICAgICBpZiAoZGF0YSAmJiB0aGlzLmRhdGEgJiYgQ29kZU1pcnJvci5jbXBQb3MoZGF0YS5mcm9tLCB0aGlzLmRhdGEuZnJvbSkpIGRhdGEgPSBudWxsO1xuICAgICAgdGhpcy5kYXRhID0gZGF0YTtcblxuICAgICAgdmFyIHBpY2tlZCA9ICh0aGlzLndpZGdldCAmJiB0aGlzLndpZGdldC5waWNrZWQpIHx8IChmaXJzdCAmJiB0aGlzLm9wdGlvbnMuY29tcGxldGVTaW5nbGUpO1xuICAgICAgaWYgKHRoaXMud2lkZ2V0KSB0aGlzLndpZGdldC5jbG9zZSgpO1xuICAgICAgaWYgKGRhdGEgJiYgZGF0YS5saXN0Lmxlbmd0aCkge1xuICAgICAgICBpZiAocGlja2VkICYmIGRhdGEubGlzdC5sZW5ndGggPT0gMSkge1xuICAgICAgICAgIHRoaXMucGljayhkYXRhLCAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLndpZGdldCA9IG5ldyBXaWRnZXQodGhpcywgZGF0YSk7XG4gICAgICAgICAgQ29kZU1pcnJvci5zaWduYWwoZGF0YSwgXCJzaG93blwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBwYXJzZU9wdGlvbnMoY20sIHBvcywgb3B0aW9ucykge1xuICAgIHZhciBlZGl0b3IgPSBjbS5vcHRpb25zLmhpbnRPcHRpb25zO1xuICAgIHZhciBvdXQgPSB7fTtcbiAgICBmb3IgKHZhciBwcm9wIGluIGRlZmF1bHRPcHRpb25zKSBvdXRbcHJvcF0gPSBkZWZhdWx0T3B0aW9uc1twcm9wXTtcbiAgICBpZiAoZWRpdG9yKSBmb3IgKHZhciBwcm9wIGluIGVkaXRvcilcbiAgICAgIGlmIChlZGl0b3JbcHJvcF0gIT09IHVuZGVmaW5lZCkgb3V0W3Byb3BdID0gZWRpdG9yW3Byb3BdO1xuICAgIGlmIChvcHRpb25zKSBmb3IgKHZhciBwcm9wIGluIG9wdGlvbnMpXG4gICAgICBpZiAob3B0aW9uc1twcm9wXSAhPT0gdW5kZWZpbmVkKSBvdXRbcHJvcF0gPSBvcHRpb25zW3Byb3BdO1xuICAgIGlmIChvdXQuaGludC5yZXNvbHZlKSBvdXQuaGludCA9IG91dC5oaW50LnJlc29sdmUoY20sIHBvcylcbiAgICByZXR1cm4gb3V0O1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VGV4dChjb21wbGV0aW9uKSB7XG4gICAgaWYgKHR5cGVvZiBjb21wbGV0aW9uID09IFwic3RyaW5nXCIpIHJldHVybiBjb21wbGV0aW9uO1xuICAgIGVsc2UgcmV0dXJuIGNvbXBsZXRpb24udGV4dDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGJ1aWxkS2V5TWFwKGNvbXBsZXRpb24sIGhhbmRsZSkge1xuICAgIHZhciBiYXNlTWFwID0ge1xuICAgICAgVXA6IGZ1bmN0aW9uKCkge2hhbmRsZS5tb3ZlRm9jdXMoLTEpO30sXG4gICAgICBEb3duOiBmdW5jdGlvbigpIHtoYW5kbGUubW92ZUZvY3VzKDEpO30sXG4gICAgICBQYWdlVXA6IGZ1bmN0aW9uKCkge2hhbmRsZS5tb3ZlRm9jdXMoLWhhbmRsZS5tZW51U2l6ZSgpICsgMSwgdHJ1ZSk7fSxcbiAgICAgIFBhZ2VEb3duOiBmdW5jdGlvbigpIHtoYW5kbGUubW92ZUZvY3VzKGhhbmRsZS5tZW51U2l6ZSgpIC0gMSwgdHJ1ZSk7fSxcbiAgICAgIEhvbWU6IGZ1bmN0aW9uKCkge2hhbmRsZS5zZXRGb2N1cygwKTt9LFxuICAgICAgRW5kOiBmdW5jdGlvbigpIHtoYW5kbGUuc2V0Rm9jdXMoaGFuZGxlLmxlbmd0aCAtIDEpO30sXG4gICAgICBFbnRlcjogaGFuZGxlLnBpY2ssXG4gICAgICBUYWI6IGhhbmRsZS5waWNrLFxuICAgICAgRXNjOiBoYW5kbGUuY2xvc2VcbiAgICB9O1xuICAgIHZhciBjdXN0b20gPSBjb21wbGV0aW9uLm9wdGlvbnMuY3VzdG9tS2V5cztcbiAgICB2YXIgb3VyTWFwID0gY3VzdG9tID8ge30gOiBiYXNlTWFwO1xuICAgIGZ1bmN0aW9uIGFkZEJpbmRpbmcoa2V5LCB2YWwpIHtcbiAgICAgIHZhciBib3VuZDtcbiAgICAgIGlmICh0eXBlb2YgdmFsICE9IFwic3RyaW5nXCIpXG4gICAgICAgIGJvdW5kID0gZnVuY3Rpb24oY20pIHsgcmV0dXJuIHZhbChjbSwgaGFuZGxlKTsgfTtcbiAgICAgIC8vIFRoaXMgbWVjaGFuaXNtIGlzIGRlcHJlY2F0ZWRcbiAgICAgIGVsc2UgaWYgKGJhc2VNYXAuaGFzT3duUHJvcGVydHkodmFsKSlcbiAgICAgICAgYm91bmQgPSBiYXNlTWFwW3ZhbF07XG4gICAgICBlbHNlXG4gICAgICAgIGJvdW5kID0gdmFsO1xuICAgICAgb3VyTWFwW2tleV0gPSBib3VuZDtcbiAgICB9XG4gICAgaWYgKGN1c3RvbSlcbiAgICAgIGZvciAodmFyIGtleSBpbiBjdXN0b20pIGlmIChjdXN0b20uaGFzT3duUHJvcGVydHkoa2V5KSlcbiAgICAgICAgYWRkQmluZGluZyhrZXksIGN1c3RvbVtrZXldKTtcbiAgICB2YXIgZXh0cmEgPSBjb21wbGV0aW9uLm9wdGlvbnMuZXh0cmFLZXlzO1xuICAgIGlmIChleHRyYSlcbiAgICAgIGZvciAodmFyIGtleSBpbiBleHRyYSkgaWYgKGV4dHJhLmhhc093blByb3BlcnR5KGtleSkpXG4gICAgICAgIGFkZEJpbmRpbmcoa2V5LCBleHRyYVtrZXldKTtcbiAgICByZXR1cm4gb3VyTWFwO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SGludEVsZW1lbnQoaGludHNFbGVtZW50LCBlbCkge1xuICAgIHdoaWxlIChlbCAmJiBlbCAhPSBoaW50c0VsZW1lbnQpIHtcbiAgICAgIGlmIChlbC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSBcIkxJXCIgJiYgZWwucGFyZW50Tm9kZSA9PSBoaW50c0VsZW1lbnQpIHJldHVybiBlbDtcbiAgICAgIGVsID0gZWwucGFyZW50Tm9kZTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBXaWRnZXQoY29tcGxldGlvbiwgZGF0YSkge1xuICAgIHRoaXMuY29tcGxldGlvbiA9IGNvbXBsZXRpb247XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB0aGlzLnBpY2tlZCA9IGZhbHNlO1xuICAgIHZhciB3aWRnZXQgPSB0aGlzLCBjbSA9IGNvbXBsZXRpb24uY207XG5cbiAgICB2YXIgaGludHMgPSB0aGlzLmhpbnRzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVsXCIpO1xuICAgIGhpbnRzLmNsYXNzTmFtZSA9IFwiQ29kZU1pcnJvci1oaW50c1wiO1xuICAgIHRoaXMuc2VsZWN0ZWRIaW50ID0gZGF0YS5zZWxlY3RlZEhpbnQgfHwgMDtcblxuICAgIHZhciBjb21wbGV0aW9ucyA9IGRhdGEubGlzdDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbXBsZXRpb25zLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgZWx0ID0gaGludHMuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpKSwgY3VyID0gY29tcGxldGlvbnNbaV07XG4gICAgICB2YXIgY2xhc3NOYW1lID0gSElOVF9FTEVNRU5UX0NMQVNTICsgKGkgIT0gdGhpcy5zZWxlY3RlZEhpbnQgPyBcIlwiIDogXCIgXCIgKyBBQ1RJVkVfSElOVF9FTEVNRU5UX0NMQVNTKTtcbiAgICAgIGlmIChjdXIuY2xhc3NOYW1lICE9IG51bGwpIGNsYXNzTmFtZSA9IGN1ci5jbGFzc05hbWUgKyBcIiBcIiArIGNsYXNzTmFtZTtcbiAgICAgIGVsdC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgICBpZiAoY3VyLnJlbmRlcikgY3VyLnJlbmRlcihlbHQsIGRhdGEsIGN1cik7XG4gICAgICBlbHNlIGVsdC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjdXIuZGlzcGxheVRleHQgfHwgZ2V0VGV4dChjdXIpKSk7XG4gICAgICBlbHQuaGludElkID0gaTtcbiAgICB9XG5cbiAgICB2YXIgcG9zID0gY20uY3Vyc29yQ29vcmRzKGNvbXBsZXRpb24ub3B0aW9ucy5hbGlnbldpdGhXb3JkID8gZGF0YS5mcm9tIDogbnVsbCk7XG4gICAgdmFyIGxlZnQgPSBwb3MubGVmdCwgdG9wID0gcG9zLmJvdHRvbSwgYmVsb3cgPSB0cnVlO1xuICAgIGhpbnRzLnN0eWxlLmxlZnQgPSBsZWZ0ICsgXCJweFwiO1xuICAgIGhpbnRzLnN0eWxlLnRvcCA9IHRvcCArIFwicHhcIjtcbiAgICAvLyBJZiB3ZSdyZSBhdCB0aGUgZWRnZSBvZiB0aGUgc2NyZWVuLCB0aGVuIHdlIHdhbnQgdGhlIG1lbnUgdG8gYXBwZWFyIG9uIHRoZSBsZWZ0IG9mIHRoZSBjdXJzb3IuXG4gICAgdmFyIHdpblcgPSB3aW5kb3cuaW5uZXJXaWR0aCB8fCBNYXRoLm1heChkb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoLCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0V2lkdGgpO1xuICAgIHZhciB3aW5IID0gd2luZG93LmlubmVySGVpZ2h0IHx8IE1hdGgubWF4KGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0KTtcbiAgICAoY29tcGxldGlvbi5vcHRpb25zLmNvbnRhaW5lciB8fCBkb2N1bWVudC5ib2R5KS5hcHBlbmRDaGlsZChoaW50cyk7XG4gICAgdmFyIGJveCA9IGhpbnRzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBvdmVybGFwWSA9IGJveC5ib3R0b20gLSB3aW5IO1xuICAgIGlmIChvdmVybGFwWSA+IDApIHtcbiAgICAgIHZhciBoZWlnaHQgPSBib3guYm90dG9tIC0gYm94LnRvcCwgY3VyVG9wID0gcG9zLnRvcCAtIChwb3MuYm90dG9tIC0gYm94LnRvcCk7XG4gICAgICBpZiAoY3VyVG9wIC0gaGVpZ2h0ID4gMCkgeyAvLyBGaXRzIGFib3ZlIGN1cnNvclxuICAgICAgICBoaW50cy5zdHlsZS50b3AgPSAodG9wID0gcG9zLnRvcCAtIGhlaWdodCkgKyBcInB4XCI7XG4gICAgICAgIGJlbG93ID0gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKGhlaWdodCA+IHdpbkgpIHtcbiAgICAgICAgaGludHMuc3R5bGUuaGVpZ2h0ID0gKHdpbkggLSA1KSArIFwicHhcIjtcbiAgICAgICAgaGludHMuc3R5bGUudG9wID0gKHRvcCA9IHBvcy5ib3R0b20gLSBib3gudG9wKSArIFwicHhcIjtcbiAgICAgICAgdmFyIGN1cnNvciA9IGNtLmdldEN1cnNvcigpO1xuICAgICAgICBpZiAoZGF0YS5mcm9tLmNoICE9IGN1cnNvci5jaCkge1xuICAgICAgICAgIHBvcyA9IGNtLmN1cnNvckNvb3JkcyhjdXJzb3IpO1xuICAgICAgICAgIGhpbnRzLnN0eWxlLmxlZnQgPSAobGVmdCA9IHBvcy5sZWZ0KSArIFwicHhcIjtcbiAgICAgICAgICBib3ggPSBoaW50cy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB2YXIgb3ZlcmxhcFggPSBib3gucmlnaHQgLSB3aW5XO1xuICAgIGlmIChvdmVybGFwWCA+IDApIHtcbiAgICAgIGlmIChib3gucmlnaHQgLSBib3gubGVmdCA+IHdpblcpIHtcbiAgICAgICAgaGludHMuc3R5bGUud2lkdGggPSAod2luVyAtIDUpICsgXCJweFwiO1xuICAgICAgICBvdmVybGFwWCAtPSAoYm94LnJpZ2h0IC0gYm94LmxlZnQpIC0gd2luVztcbiAgICAgIH1cbiAgICAgIGhpbnRzLnN0eWxlLmxlZnQgPSAobGVmdCA9IHBvcy5sZWZ0IC0gb3ZlcmxhcFgpICsgXCJweFwiO1xuICAgIH1cblxuICAgIGNtLmFkZEtleU1hcCh0aGlzLmtleU1hcCA9IGJ1aWxkS2V5TWFwKGNvbXBsZXRpb24sIHtcbiAgICAgIG1vdmVGb2N1czogZnVuY3Rpb24obiwgYXZvaWRXcmFwKSB7IHdpZGdldC5jaGFuZ2VBY3RpdmUod2lkZ2V0LnNlbGVjdGVkSGludCArIG4sIGF2b2lkV3JhcCk7IH0sXG4gICAgICBzZXRGb2N1czogZnVuY3Rpb24obikgeyB3aWRnZXQuY2hhbmdlQWN0aXZlKG4pOyB9LFxuICAgICAgbWVudVNpemU6IGZ1bmN0aW9uKCkgeyByZXR1cm4gd2lkZ2V0LnNjcmVlbkFtb3VudCgpOyB9LFxuICAgICAgbGVuZ3RoOiBjb21wbGV0aW9ucy5sZW5ndGgsXG4gICAgICBjbG9zZTogZnVuY3Rpb24oKSB7IGNvbXBsZXRpb24uY2xvc2UoKTsgfSxcbiAgICAgIHBpY2s6IGZ1bmN0aW9uKCkgeyB3aWRnZXQucGljaygpOyB9LFxuICAgICAgZGF0YTogZGF0YVxuICAgIH0pKTtcblxuICAgIGlmIChjb21wbGV0aW9uLm9wdGlvbnMuY2xvc2VPblVuZm9jdXMpIHtcbiAgICAgIHZhciBjbG9zaW5nT25CbHVyO1xuICAgICAgY20ub24oXCJibHVyXCIsIHRoaXMub25CbHVyID0gZnVuY3Rpb24oKSB7IGNsb3NpbmdPbkJsdXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBjb21wbGV0aW9uLmNsb3NlKCk7IH0sIDEwMCk7IH0pO1xuICAgICAgY20ub24oXCJmb2N1c1wiLCB0aGlzLm9uRm9jdXMgPSBmdW5jdGlvbigpIHsgY2xlYXJUaW1lb3V0KGNsb3NpbmdPbkJsdXIpOyB9KTtcbiAgICB9XG5cbiAgICB2YXIgc3RhcnRTY3JvbGwgPSBjbS5nZXRTY3JvbGxJbmZvKCk7XG4gICAgY20ub24oXCJzY3JvbGxcIiwgdGhpcy5vblNjcm9sbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGN1clNjcm9sbCA9IGNtLmdldFNjcm9sbEluZm8oKSwgZWRpdG9yID0gY20uZ2V0V3JhcHBlckVsZW1lbnQoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHZhciBuZXdUb3AgPSB0b3AgKyBzdGFydFNjcm9sbC50b3AgLSBjdXJTY3JvbGwudG9wO1xuICAgICAgdmFyIHBvaW50ID0gbmV3VG9wIC0gKHdpbmRvdy5wYWdlWU9mZnNldCB8fCAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IHx8IGRvY3VtZW50LmJvZHkpLnNjcm9sbFRvcCk7XG4gICAgICBpZiAoIWJlbG93KSBwb2ludCArPSBoaW50cy5vZmZzZXRIZWlnaHQ7XG4gICAgICBpZiAocG9pbnQgPD0gZWRpdG9yLnRvcCB8fCBwb2ludCA+PSBlZGl0b3IuYm90dG9tKSByZXR1cm4gY29tcGxldGlvbi5jbG9zZSgpO1xuICAgICAgaGludHMuc3R5bGUudG9wID0gbmV3VG9wICsgXCJweFwiO1xuICAgICAgaGludHMuc3R5bGUubGVmdCA9IChsZWZ0ICsgc3RhcnRTY3JvbGwubGVmdCAtIGN1clNjcm9sbC5sZWZ0KSArIFwicHhcIjtcbiAgICB9KTtcblxuICAgIENvZGVNaXJyb3Iub24oaGludHMsIFwiZGJsY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHQgPSBnZXRIaW50RWxlbWVudChoaW50cywgZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50KTtcbiAgICAgIGlmICh0ICYmIHQuaGludElkICE9IG51bGwpIHt3aWRnZXQuY2hhbmdlQWN0aXZlKHQuaGludElkKTsgd2lkZ2V0LnBpY2soKTt9XG4gICAgfSk7XG5cbiAgICBDb2RlTWlycm9yLm9uKGhpbnRzLCBcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciB0ID0gZ2V0SGludEVsZW1lbnQoaGludHMsIGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudCk7XG4gICAgICBpZiAodCAmJiB0LmhpbnRJZCAhPSBudWxsKSB7XG4gICAgICAgIHdpZGdldC5jaGFuZ2VBY3RpdmUodC5oaW50SWQpO1xuICAgICAgICBpZiAoY29tcGxldGlvbi5vcHRpb25zLmNvbXBsZXRlT25TaW5nbGVDbGljaykgd2lkZ2V0LnBpY2soKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIENvZGVNaXJyb3Iub24oaGludHMsIFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe2NtLmZvY3VzKCk7fSwgMjApO1xuICAgIH0pO1xuXG4gICAgQ29kZU1pcnJvci5zaWduYWwoZGF0YSwgXCJzZWxlY3RcIiwgY29tcGxldGlvbnNbMF0sIGhpbnRzLmZpcnN0Q2hpbGQpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgV2lkZ2V0LnByb3RvdHlwZSA9IHtcbiAgICBjbG9zZTogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5jb21wbGV0aW9uLndpZGdldCAhPSB0aGlzKSByZXR1cm47XG4gICAgICB0aGlzLmNvbXBsZXRpb24ud2lkZ2V0ID0gbnVsbDtcbiAgICAgIHRoaXMuaGludHMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmhpbnRzKTtcbiAgICAgIHRoaXMuY29tcGxldGlvbi5jbS5yZW1vdmVLZXlNYXAodGhpcy5rZXlNYXApO1xuXG4gICAgICB2YXIgY20gPSB0aGlzLmNvbXBsZXRpb24uY207XG4gICAgICBpZiAodGhpcy5jb21wbGV0aW9uLm9wdGlvbnMuY2xvc2VPblVuZm9jdXMpIHtcbiAgICAgICAgY20ub2ZmKFwiYmx1clwiLCB0aGlzLm9uQmx1cik7XG4gICAgICAgIGNtLm9mZihcImZvY3VzXCIsIHRoaXMub25Gb2N1cyk7XG4gICAgICB9XG4gICAgICBjbS5vZmYoXCJzY3JvbGxcIiwgdGhpcy5vblNjcm9sbCk7XG4gICAgfSxcblxuICAgIGRpc2FibGU6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5jb21wbGV0aW9uLmNtLnJlbW92ZUtleU1hcCh0aGlzLmtleU1hcCk7XG4gICAgICB2YXIgd2lkZ2V0ID0gdGhpcztcbiAgICAgIHRoaXMua2V5TWFwID0ge0VudGVyOiBmdW5jdGlvbigpIHsgd2lkZ2V0LnBpY2tlZCA9IHRydWU7IH19O1xuICAgICAgdGhpcy5jb21wbGV0aW9uLmNtLmFkZEtleU1hcCh0aGlzLmtleU1hcCk7XG4gICAgfSxcblxuICAgIHBpY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5jb21wbGV0aW9uLnBpY2sodGhpcy5kYXRhLCB0aGlzLnNlbGVjdGVkSGludCk7XG4gICAgfSxcblxuICAgIGNoYW5nZUFjdGl2ZTogZnVuY3Rpb24oaSwgYXZvaWRXcmFwKSB7XG4gICAgICBpZiAoaSA+PSB0aGlzLmRhdGEubGlzdC5sZW5ndGgpXG4gICAgICAgIGkgPSBhdm9pZFdyYXAgPyB0aGlzLmRhdGEubGlzdC5sZW5ndGggLSAxIDogMDtcbiAgICAgIGVsc2UgaWYgKGkgPCAwKVxuICAgICAgICBpID0gYXZvaWRXcmFwID8gMCAgOiB0aGlzLmRhdGEubGlzdC5sZW5ndGggLSAxO1xuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRIaW50ID09IGkpIHJldHVybjtcbiAgICAgIHZhciBub2RlID0gdGhpcy5oaW50cy5jaGlsZE5vZGVzW3RoaXMuc2VsZWN0ZWRIaW50XTtcbiAgICAgIG5vZGUuY2xhc3NOYW1lID0gbm9kZS5jbGFzc05hbWUucmVwbGFjZShcIiBcIiArIEFDVElWRV9ISU5UX0VMRU1FTlRfQ0xBU1MsIFwiXCIpO1xuICAgICAgbm9kZSA9IHRoaXMuaGludHMuY2hpbGROb2Rlc1t0aGlzLnNlbGVjdGVkSGludCA9IGldO1xuICAgICAgbm9kZS5jbGFzc05hbWUgKz0gXCIgXCIgKyBBQ1RJVkVfSElOVF9FTEVNRU5UX0NMQVNTO1xuICAgICAgaWYgKG5vZGUub2Zmc2V0VG9wIDwgdGhpcy5oaW50cy5zY3JvbGxUb3ApXG4gICAgICAgIHRoaXMuaGludHMuc2Nyb2xsVG9wID0gbm9kZS5vZmZzZXRUb3AgLSAzO1xuICAgICAgZWxzZSBpZiAobm9kZS5vZmZzZXRUb3AgKyBub2RlLm9mZnNldEhlaWdodCA+IHRoaXMuaGludHMuc2Nyb2xsVG9wICsgdGhpcy5oaW50cy5jbGllbnRIZWlnaHQpXG4gICAgICAgIHRoaXMuaGludHMuc2Nyb2xsVG9wID0gbm9kZS5vZmZzZXRUb3AgKyBub2RlLm9mZnNldEhlaWdodCAtIHRoaXMuaGludHMuY2xpZW50SGVpZ2h0ICsgMztcbiAgICAgIENvZGVNaXJyb3Iuc2lnbmFsKHRoaXMuZGF0YSwgXCJzZWxlY3RcIiwgdGhpcy5kYXRhLmxpc3RbdGhpcy5zZWxlY3RlZEhpbnRdLCBub2RlKTtcbiAgICB9LFxuXG4gICAgc2NyZWVuQW1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBNYXRoLmZsb29yKHRoaXMuaGludHMuY2xpZW50SGVpZ2h0IC8gdGhpcy5oaW50cy5maXJzdENoaWxkLm9mZnNldEhlaWdodCkgfHwgMTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gYXBwbGljYWJsZUhlbHBlcnMoY20sIGhlbHBlcnMpIHtcbiAgICBpZiAoIWNtLnNvbWV0aGluZ1NlbGVjdGVkKCkpIHJldHVybiBoZWxwZXJzXG4gICAgdmFyIHJlc3VsdCA9IFtdXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWxwZXJzLmxlbmd0aDsgaSsrKVxuICAgICAgaWYgKGhlbHBlcnNbaV0uc3VwcG9ydHNTZWxlY3Rpb24pIHJlc3VsdC5wdXNoKGhlbHBlcnNbaV0pXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgZnVuY3Rpb24gcmVzb2x2ZUF1dG9IaW50cyhjbSwgcG9zKSB7XG4gICAgdmFyIGhlbHBlcnMgPSBjbS5nZXRIZWxwZXJzKHBvcywgXCJoaW50XCIpLCB3b3Jkc1xuICAgIGlmIChoZWxwZXJzLmxlbmd0aCkge1xuICAgICAgdmFyIGFzeW5jID0gZmFsc2UsIHJlc29sdmVkXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhlbHBlcnMubGVuZ3RoOyBpKyspIGlmIChoZWxwZXJzW2ldLmFzeW5jKSBhc3luYyA9IHRydWVcbiAgICAgIGlmIChhc3luYykge1xuICAgICAgICByZXNvbHZlZCA9IGZ1bmN0aW9uKGNtLCBjYWxsYmFjaywgb3B0aW9ucykge1xuICAgICAgICAgIHZhciBhcHAgPSBhcHBsaWNhYmxlSGVscGVycyhjbSwgaGVscGVycylcbiAgICAgICAgICBmdW5jdGlvbiBydW4oaSwgcmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoaSA9PSBhcHAubGVuZ3RoKSByZXR1cm4gY2FsbGJhY2sobnVsbClcbiAgICAgICAgICAgIHZhciBoZWxwZXIgPSBhcHBbaV1cbiAgICAgICAgICAgIGlmIChoZWxwZXIuYXN5bmMpIHtcbiAgICAgICAgICAgICAgaGVscGVyKGNtLCBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSBjYWxsYmFjayhyZXN1bHQpXG4gICAgICAgICAgICAgICAgZWxzZSBydW4oaSArIDEpXG4gICAgICAgICAgICAgIH0sIG9wdGlvbnMpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gaGVscGVyKGNtLCBvcHRpb25zKVxuICAgICAgICAgICAgICBpZiAocmVzdWx0KSBjYWxsYmFjayhyZXN1bHQpXG4gICAgICAgICAgICAgIGVsc2UgcnVuKGkgKyAxKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBydW4oMClcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlZC5hc3luYyA9IHRydWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmVkID0gZnVuY3Rpb24oY20sIG9wdGlvbnMpIHtcbiAgICAgICAgICB2YXIgYXBwID0gYXBwbGljYWJsZUhlbHBlcnMoY20sIGhlbHBlcnMpXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcHAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjdXIgPSBhcHBbaV0oY20sIG9wdGlvbnMpXG4gICAgICAgICAgICBpZiAoY3VyICYmIGN1ci5saXN0Lmxlbmd0aCkgcmV0dXJuIGN1clxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmVzb2x2ZWQuc3VwcG9ydHNTZWxlY3Rpb24gPSB0cnVlXG4gICAgICByZXR1cm4gcmVzb2x2ZWRcbiAgICB9IGVsc2UgaWYgKHdvcmRzID0gY20uZ2V0SGVscGVyKGNtLmdldEN1cnNvcigpLCBcImhpbnRXb3Jkc1wiKSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNtKSB7IHJldHVybiBDb2RlTWlycm9yLmhpbnQuZnJvbUxpc3QoY20sIHt3b3Jkczogd29yZHN9KSB9XG4gICAgfSBlbHNlIGlmIChDb2RlTWlycm9yLmhpbnQuYW55d29yZCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNtLCBvcHRpb25zKSB7IHJldHVybiBDb2RlTWlycm9yLmhpbnQuYW55d29yZChjbSwgb3B0aW9ucykgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7fVxuICAgIH1cbiAgfVxuXG4gIENvZGVNaXJyb3IucmVnaXN0ZXJIZWxwZXIoXCJoaW50XCIsIFwiYXV0b1wiLCB7XG4gICAgcmVzb2x2ZTogcmVzb2x2ZUF1dG9IaW50c1xuICB9KTtcblxuICBDb2RlTWlycm9yLnJlZ2lzdGVySGVscGVyKFwiaGludFwiLCBcImZyb21MaXN0XCIsIGZ1bmN0aW9uKGNtLCBvcHRpb25zKSB7XG4gICAgdmFyIGN1ciA9IGNtLmdldEN1cnNvcigpLCB0b2tlbiA9IGNtLmdldFRva2VuQXQoY3VyKTtcbiAgICB2YXIgdG8gPSBDb2RlTWlycm9yLlBvcyhjdXIubGluZSwgdG9rZW4uZW5kKTtcbiAgICBpZiAodG9rZW4uc3RyaW5nICYmIC9cXHcvLnRlc3QodG9rZW4uc3RyaW5nW3Rva2VuLnN0cmluZy5sZW5ndGggLSAxXSkpIHtcbiAgICAgIHZhciB0ZXJtID0gdG9rZW4uc3RyaW5nLCBmcm9tID0gQ29kZU1pcnJvci5Qb3MoY3VyLmxpbmUsIHRva2VuLnN0YXJ0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHRlcm0gPSBcIlwiLCBmcm9tID0gdG87XG4gICAgfVxuICAgIHZhciBmb3VuZCA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3B0aW9ucy53b3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHdvcmQgPSBvcHRpb25zLndvcmRzW2ldO1xuICAgICAgaWYgKHdvcmQuc2xpY2UoMCwgdGVybS5sZW5ndGgpID09IHRlcm0pXG4gICAgICAgIGZvdW5kLnB1c2god29yZCk7XG4gICAgfVxuXG4gICAgaWYgKGZvdW5kLmxlbmd0aCkgcmV0dXJuIHtsaXN0OiBmb3VuZCwgZnJvbTogZnJvbSwgdG86IHRvfTtcbiAgfSk7XG5cbiAgQ29kZU1pcnJvci5jb21tYW5kcy5hdXRvY29tcGxldGUgPSBDb2RlTWlycm9yLnNob3dIaW50O1xuXG4gIHZhciBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICBoaW50OiBDb2RlTWlycm9yLmhpbnQuYXV0byxcbiAgICBjb21wbGV0ZVNpbmdsZTogdHJ1ZSxcbiAgICBhbGlnbldpdGhXb3JkOiB0cnVlLFxuICAgIGNsb3NlQ2hhcmFjdGVyczogL1tcXHMoKVxcW1xcXXt9Ozo+LF0vLFxuICAgIGNsb3NlT25VbmZvY3VzOiB0cnVlLFxuICAgIGNvbXBsZXRlT25TaW5nbGVDbGljazogZmFsc2UsXG4gICAgY29udGFpbmVyOiBudWxsLFxuICAgIGN1c3RvbUtleXM6IG51bGwsXG4gICAgZXh0cmFLZXlzOiBudWxsXG4gIH07XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVPcHRpb24oXCJoaW50T3B0aW9uc1wiLCBudWxsKTtcbn0pO1xuIiwiLy8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhlcnNcbi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwOi8vY29kZW1pcnJvci5uZXQvTElDRU5TRVxuXG4vLyBEZWZpbmUgc2VhcmNoIGNvbW1hbmRzLiBEZXBlbmRzIG9uIGRpYWxvZy5qcyBvciBhbm90aGVyXG4vLyBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgb3BlbkRpYWxvZyBtZXRob2QuXG5cbi8vIFJlcGxhY2Ugd29ya3MgYSBsaXR0bGUgb2RkbHkgLS0gaXQgd2lsbCBkbyB0aGUgcmVwbGFjZSBvbiB0aGUgbmV4dFxuLy8gQ3RybC1HIChvciB3aGF0ZXZlciBpcyBib3VuZCB0byBmaW5kTmV4dCkgcHJlc3MuIFlvdSBwcmV2ZW50IGFcbi8vIHJlcGxhY2UgYnkgbWFraW5nIHN1cmUgdGhlIG1hdGNoIGlzIG5vIGxvbmdlciBzZWxlY3RlZCB3aGVuIGhpdHRpbmdcbi8vIEN0cmwtRy5cblxuKGZ1bmN0aW9uKG1vZCkge1xuICBpZiAodHlwZW9mIGV4cG9ydHMgPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlID09IFwib2JqZWN0XCIpIC8vIENvbW1vbkpTXG4gICAgbW9kKHJlcXVpcmUoXCIuLi8uLi9saWIvY29kZW1pcnJvclwiKSwgcmVxdWlyZShcIi4vc2VhcmNoY3Vyc29yXCIpLCByZXF1aXJlKFwiLi4vZGlhbG9nL2RpYWxvZ1wiKSk7XG4gIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIC8vIEFNRFxuICAgIGRlZmluZShbXCIuLi8uLi9saWIvY29kZW1pcnJvclwiLCBcIi4vc2VhcmNoY3Vyc29yXCIsIFwiLi4vZGlhbG9nL2RpYWxvZ1wiXSwgbW9kKTtcbiAgZWxzZSAvLyBQbGFpbiBicm93c2VyIGVudlxuICAgIG1vZChDb2RlTWlycm9yKTtcbn0pKGZ1bmN0aW9uKENvZGVNaXJyb3IpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgZnVuY3Rpb24gc2VhcmNoT3ZlcmxheShxdWVyeSwgY2FzZUluc2Vuc2l0aXZlKSB7XG4gICAgaWYgKHR5cGVvZiBxdWVyeSA9PSBcInN0cmluZ1wiKVxuICAgICAgcXVlcnkgPSBuZXcgUmVnRXhwKHF1ZXJ5LnJlcGxhY2UoL1tcXC1cXFtcXF1cXC9cXHtcXH1cXChcXClcXCpcXCtcXD9cXC5cXFxcXFxeXFwkXFx8XS9nLCBcIlxcXFwkJlwiKSwgY2FzZUluc2Vuc2l0aXZlID8gXCJnaVwiIDogXCJnXCIpO1xuICAgIGVsc2UgaWYgKCFxdWVyeS5nbG9iYWwpXG4gICAgICBxdWVyeSA9IG5ldyBSZWdFeHAocXVlcnkuc291cmNlLCBxdWVyeS5pZ25vcmVDYXNlID8gXCJnaVwiIDogXCJnXCIpO1xuXG4gICAgcmV0dXJuIHt0b2tlbjogZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgICBxdWVyeS5sYXN0SW5kZXggPSBzdHJlYW0ucG9zO1xuICAgICAgdmFyIG1hdGNoID0gcXVlcnkuZXhlYyhzdHJlYW0uc3RyaW5nKTtcbiAgICAgIGlmIChtYXRjaCAmJiBtYXRjaC5pbmRleCA9PSBzdHJlYW0ucG9zKSB7XG4gICAgICAgIHN0cmVhbS5wb3MgKz0gbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICByZXR1cm4gXCJzZWFyY2hpbmdcIjtcbiAgICAgIH0gZWxzZSBpZiAobWF0Y2gpIHtcbiAgICAgICAgc3RyZWFtLnBvcyA9IG1hdGNoLmluZGV4O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RyZWFtLnNraXBUb0VuZCgpO1xuICAgICAgfVxuICAgIH19O1xuICB9XG5cbiAgZnVuY3Rpb24gU2VhcmNoU3RhdGUoKSB7XG4gICAgdGhpcy5wb3NGcm9tID0gdGhpcy5wb3NUbyA9IHRoaXMubGFzdFF1ZXJ5ID0gdGhpcy5xdWVyeSA9IG51bGw7XG4gICAgdGhpcy5vdmVybGF5ID0gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFNlYXJjaFN0YXRlKGNtKSB7XG4gICAgcmV0dXJuIGNtLnN0YXRlLnNlYXJjaCB8fCAoY20uc3RhdGUuc2VhcmNoID0gbmV3IFNlYXJjaFN0YXRlKCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gcXVlcnlDYXNlSW5zZW5zaXRpdmUocXVlcnkpIHtcbiAgICByZXR1cm4gdHlwZW9mIHF1ZXJ5ID09IFwic3RyaW5nXCIgJiYgcXVlcnkgPT0gcXVlcnkudG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFNlYXJjaEN1cnNvcihjbSwgcXVlcnksIHBvcykge1xuICAgIC8vIEhldXJpc3RpYzogaWYgdGhlIHF1ZXJ5IHN0cmluZyBpcyBhbGwgbG93ZXJjYXNlLCBkbyBhIGNhc2UgaW5zZW5zaXRpdmUgc2VhcmNoLlxuICAgIHJldHVybiBjbS5nZXRTZWFyY2hDdXJzb3IocXVlcnksIHBvcywgcXVlcnlDYXNlSW5zZW5zaXRpdmUocXVlcnkpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBlcnNpc3RlbnREaWFsb2coY20sIHRleHQsIGRlZmx0LCBmKSB7XG4gICAgY20ub3BlbkRpYWxvZyh0ZXh0LCBmLCB7XG4gICAgICB2YWx1ZTogZGVmbHQsXG4gICAgICBzZWxlY3RWYWx1ZU9uT3BlbjogdHJ1ZSxcbiAgICAgIGNsb3NlT25FbnRlcjogZmFsc2UsXG4gICAgICBvbkNsb3NlOiBmdW5jdGlvbigpIHsgY2xlYXJTZWFyY2goY20pOyB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBkaWFsb2coY20sIHRleHQsIHNob3J0VGV4dCwgZGVmbHQsIGYpIHtcbiAgICBpZiAoY20ub3BlbkRpYWxvZykgY20ub3BlbkRpYWxvZyh0ZXh0LCBmLCB7dmFsdWU6IGRlZmx0LCBzZWxlY3RWYWx1ZU9uT3BlbjogdHJ1ZX0pO1xuICAgIGVsc2UgZihwcm9tcHQoc2hvcnRUZXh0LCBkZWZsdCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gY29uZmlybURpYWxvZyhjbSwgdGV4dCwgc2hvcnRUZXh0LCBmcykge1xuICAgIGlmIChjbS5vcGVuQ29uZmlybSkgY20ub3BlbkNvbmZpcm0odGV4dCwgZnMpO1xuICAgIGVsc2UgaWYgKGNvbmZpcm0oc2hvcnRUZXh0KSkgZnNbMF0oKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhcnNlU3RyaW5nKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXFxcXCguKS9nLCBmdW5jdGlvbihfLCBjaCkge1xuICAgICAgaWYgKGNoID09IFwiblwiKSByZXR1cm4gXCJcXG5cIlxuICAgICAgaWYgKGNoID09IFwiclwiKSByZXR1cm4gXCJcXHJcIlxuICAgICAgcmV0dXJuIGNoXG4gICAgfSlcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhcnNlUXVlcnkocXVlcnkpIHtcbiAgICB2YXIgaXNSRSA9IHF1ZXJ5Lm1hdGNoKC9eXFwvKC4qKVxcLyhbYS16XSopJC8pO1xuICAgIGlmIChpc1JFKSB7XG4gICAgICB0cnkgeyBxdWVyeSA9IG5ldyBSZWdFeHAoaXNSRVsxXSwgaXNSRVsyXS5pbmRleE9mKFwiaVwiKSA9PSAtMSA/IFwiXCIgOiBcImlcIik7IH1cbiAgICAgIGNhdGNoKGUpIHt9IC8vIE5vdCBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBhZnRlciBhbGwsIGRvIGEgc3RyaW5nIHNlYXJjaFxuICAgIH0gZWxzZSB7XG4gICAgICBxdWVyeSA9IHBhcnNlU3RyaW5nKHF1ZXJ5KVxuICAgIH1cbiAgICBpZiAodHlwZW9mIHF1ZXJ5ID09IFwic3RyaW5nXCIgPyBxdWVyeSA9PSBcIlwiIDogcXVlcnkudGVzdChcIlwiKSlcbiAgICAgIHF1ZXJ5ID0gL3heLztcbiAgICByZXR1cm4gcXVlcnk7XG4gIH1cblxuICB2YXIgcXVlcnlEaWFsb2cgPVxuICAgICdTZWFyY2g6IDxpbnB1dCB0eXBlPVwidGV4dFwiIHN0eWxlPVwid2lkdGg6IDEwZW1cIiBjbGFzcz1cIkNvZGVNaXJyb3Itc2VhcmNoLWZpZWxkXCIvPiA8c3BhbiBzdHlsZT1cImNvbG9yOiAjODg4XCIgY2xhc3M9XCJDb2RlTWlycm9yLXNlYXJjaC1oaW50XCI+KFVzZSAvcmUvIHN5bnRheCBmb3IgcmVnZXhwIHNlYXJjaCk8L3NwYW4+JztcblxuICBmdW5jdGlvbiBzdGFydFNlYXJjaChjbSwgc3RhdGUsIHF1ZXJ5KSB7XG4gICAgc3RhdGUucXVlcnlUZXh0ID0gcXVlcnk7XG4gICAgc3RhdGUucXVlcnkgPSBwYXJzZVF1ZXJ5KHF1ZXJ5KTtcbiAgICBjbS5yZW1vdmVPdmVybGF5KHN0YXRlLm92ZXJsYXksIHF1ZXJ5Q2FzZUluc2Vuc2l0aXZlKHN0YXRlLnF1ZXJ5KSk7XG4gICAgc3RhdGUub3ZlcmxheSA9IHNlYXJjaE92ZXJsYXkoc3RhdGUucXVlcnksIHF1ZXJ5Q2FzZUluc2Vuc2l0aXZlKHN0YXRlLnF1ZXJ5KSk7XG4gICAgY20uYWRkT3ZlcmxheShzdGF0ZS5vdmVybGF5KTtcbiAgICBpZiAoY20uc2hvd01hdGNoZXNPblNjcm9sbGJhcikge1xuICAgICAgaWYgKHN0YXRlLmFubm90YXRlKSB7IHN0YXRlLmFubm90YXRlLmNsZWFyKCk7IHN0YXRlLmFubm90YXRlID0gbnVsbDsgfVxuICAgICAgc3RhdGUuYW5ub3RhdGUgPSBjbS5zaG93TWF0Y2hlc09uU2Nyb2xsYmFyKHN0YXRlLnF1ZXJ5LCBxdWVyeUNhc2VJbnNlbnNpdGl2ZShzdGF0ZS5xdWVyeSkpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRvU2VhcmNoKGNtLCByZXYsIHBlcnNpc3RlbnQpIHtcbiAgICB2YXIgc3RhdGUgPSBnZXRTZWFyY2hTdGF0ZShjbSk7XG4gICAgaWYgKHN0YXRlLnF1ZXJ5KSByZXR1cm4gZmluZE5leHQoY20sIHJldik7XG4gICAgdmFyIHEgPSBjbS5nZXRTZWxlY3Rpb24oKSB8fCBzdGF0ZS5sYXN0UXVlcnk7XG4gICAgaWYgKHBlcnNpc3RlbnQgJiYgY20ub3BlbkRpYWxvZykge1xuICAgICAgdmFyIGhpZGluZyA9IG51bGxcbiAgICAgIHBlcnNpc3RlbnREaWFsb2coY20sIHF1ZXJ5RGlhbG9nLCBxLCBmdW5jdGlvbihxdWVyeSwgZXZlbnQpIHtcbiAgICAgICAgQ29kZU1pcnJvci5lX3N0b3AoZXZlbnQpO1xuICAgICAgICBpZiAoIXF1ZXJ5KSByZXR1cm47XG4gICAgICAgIGlmIChxdWVyeSAhPSBzdGF0ZS5xdWVyeVRleHQpIHN0YXJ0U2VhcmNoKGNtLCBzdGF0ZSwgcXVlcnkpO1xuICAgICAgICBpZiAoaGlkaW5nKSBoaWRpbmcuc3R5bGUub3BhY2l0eSA9IDFcbiAgICAgICAgZmluZE5leHQoY20sIGV2ZW50LnNoaWZ0S2V5LCBmdW5jdGlvbihfLCB0bykge1xuICAgICAgICAgIHZhciBkaWFsb2dcbiAgICAgICAgICBpZiAodG8ubGluZSA8IDMgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvciAmJlxuICAgICAgICAgICAgICAoZGlhbG9nID0gY20uZGlzcGxheS53cmFwcGVyLnF1ZXJ5U2VsZWN0b3IoXCIuQ29kZU1pcnJvci1kaWFsb2dcIikpICYmXG4gICAgICAgICAgICAgIGRpYWxvZy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gLSA0ID4gY20uY3Vyc29yQ29vcmRzKHRvLCBcIndpbmRvd1wiKS50b3ApXG4gICAgICAgICAgICAoaGlkaW5nID0gZGlhbG9nKS5zdHlsZS5vcGFjaXR5ID0gLjRcbiAgICAgICAgfSlcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaWFsb2coY20sIHF1ZXJ5RGlhbG9nLCBcIlNlYXJjaCBmb3I6XCIsIHEsIGZ1bmN0aW9uKHF1ZXJ5KSB7XG4gICAgICAgIGlmIChxdWVyeSAmJiAhc3RhdGUucXVlcnkpIGNtLm9wZXJhdGlvbihmdW5jdGlvbigpIHtcbiAgICAgICAgICBzdGFydFNlYXJjaChjbSwgc3RhdGUsIHF1ZXJ5KTtcbiAgICAgICAgICBzdGF0ZS5wb3NGcm9tID0gc3RhdGUucG9zVG8gPSBjbS5nZXRDdXJzb3IoKTtcbiAgICAgICAgICBmaW5kTmV4dChjbSwgcmV2KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBmaW5kTmV4dChjbSwgcmV2LCBjYWxsYmFjaykge2NtLm9wZXJhdGlvbihmdW5jdGlvbigpIHtcbiAgICB2YXIgc3RhdGUgPSBnZXRTZWFyY2hTdGF0ZShjbSk7XG4gICAgdmFyIGN1cnNvciA9IGdldFNlYXJjaEN1cnNvcihjbSwgc3RhdGUucXVlcnksIHJldiA/IHN0YXRlLnBvc0Zyb20gOiBzdGF0ZS5wb3NUbyk7XG4gICAgaWYgKCFjdXJzb3IuZmluZChyZXYpKSB7XG4gICAgICBjdXJzb3IgPSBnZXRTZWFyY2hDdXJzb3IoY20sIHN0YXRlLnF1ZXJ5LCByZXYgPyBDb2RlTWlycm9yLlBvcyhjbS5sYXN0TGluZSgpKSA6IENvZGVNaXJyb3IuUG9zKGNtLmZpcnN0TGluZSgpLCAwKSk7XG4gICAgICBpZiAoIWN1cnNvci5maW5kKHJldikpIHJldHVybjtcbiAgICB9XG4gICAgY20uc2V0U2VsZWN0aW9uKGN1cnNvci5mcm9tKCksIGN1cnNvci50bygpKTtcbiAgICBjbS5zY3JvbGxJbnRvVmlldyh7ZnJvbTogY3Vyc29yLmZyb20oKSwgdG86IGN1cnNvci50bygpfSwgMjApO1xuICAgIHN0YXRlLnBvc0Zyb20gPSBjdXJzb3IuZnJvbSgpOyBzdGF0ZS5wb3NUbyA9IGN1cnNvci50bygpO1xuICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soY3Vyc29yLmZyb20oKSwgY3Vyc29yLnRvKCkpXG4gIH0pO31cblxuICBmdW5jdGlvbiBjbGVhclNlYXJjaChjbSkge2NtLm9wZXJhdGlvbihmdW5jdGlvbigpIHtcbiAgICB2YXIgc3RhdGUgPSBnZXRTZWFyY2hTdGF0ZShjbSk7XG4gICAgc3RhdGUubGFzdFF1ZXJ5ID0gc3RhdGUucXVlcnk7XG4gICAgaWYgKCFzdGF0ZS5xdWVyeSkgcmV0dXJuO1xuICAgIHN0YXRlLnF1ZXJ5ID0gc3RhdGUucXVlcnlUZXh0ID0gbnVsbDtcbiAgICBjbS5yZW1vdmVPdmVybGF5KHN0YXRlLm92ZXJsYXkpO1xuICAgIGlmIChzdGF0ZS5hbm5vdGF0ZSkgeyBzdGF0ZS5hbm5vdGF0ZS5jbGVhcigpOyBzdGF0ZS5hbm5vdGF0ZSA9IG51bGw7IH1cbiAgfSk7fVxuXG4gIHZhciByZXBsYWNlUXVlcnlEaWFsb2cgPVxuICAgICcgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgc3R5bGU9XCJ3aWR0aDogMTBlbVwiIGNsYXNzPVwiQ29kZU1pcnJvci1zZWFyY2gtZmllbGRcIi8+IDxzcGFuIHN0eWxlPVwiY29sb3I6ICM4ODhcIiBjbGFzcz1cIkNvZGVNaXJyb3Itc2VhcmNoLWhpbnRcIj4oVXNlIC9yZS8gc3ludGF4IGZvciByZWdleHAgc2VhcmNoKTwvc3Bhbj4nO1xuICB2YXIgcmVwbGFjZW1lbnRRdWVyeURpYWxvZyA9ICdXaXRoOiA8aW5wdXQgdHlwZT1cInRleHRcIiBzdHlsZT1cIndpZHRoOiAxMGVtXCIgY2xhc3M9XCJDb2RlTWlycm9yLXNlYXJjaC1maWVsZFwiLz4nO1xuICB2YXIgZG9SZXBsYWNlQ29uZmlybSA9IFwiUmVwbGFjZT8gPGJ1dHRvbj5ZZXM8L2J1dHRvbj4gPGJ1dHRvbj5ObzwvYnV0dG9uPiA8YnV0dG9uPkFsbDwvYnV0dG9uPiA8YnV0dG9uPlN0b3A8L2J1dHRvbj5cIjtcblxuICBmdW5jdGlvbiByZXBsYWNlQWxsKGNtLCBxdWVyeSwgdGV4dCkge1xuICAgIGNtLm9wZXJhdGlvbihmdW5jdGlvbigpIHtcbiAgICAgIGZvciAodmFyIGN1cnNvciA9IGdldFNlYXJjaEN1cnNvcihjbSwgcXVlcnkpOyBjdXJzb3IuZmluZE5leHQoKTspIHtcbiAgICAgICAgaWYgKHR5cGVvZiBxdWVyeSAhPSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgdmFyIG1hdGNoID0gY20uZ2V0UmFuZ2UoY3Vyc29yLmZyb20oKSwgY3Vyc29yLnRvKCkpLm1hdGNoKHF1ZXJ5KTtcbiAgICAgICAgICBjdXJzb3IucmVwbGFjZSh0ZXh0LnJlcGxhY2UoL1xcJChcXGQpL2csIGZ1bmN0aW9uKF8sIGkpIHtyZXR1cm4gbWF0Y2hbaV07fSkpO1xuICAgICAgICB9IGVsc2UgY3Vyc29yLnJlcGxhY2UodGV4dCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXBsYWNlKGNtLCBhbGwpIHtcbiAgICBpZiAoY20uZ2V0T3B0aW9uKFwicmVhZE9ubHlcIikpIHJldHVybjtcbiAgICB2YXIgcXVlcnkgPSBjbS5nZXRTZWxlY3Rpb24oKSB8fCBnZXRTZWFyY2hTdGF0ZShjbSkubGFzdFF1ZXJ5O1xuICAgIHZhciBkaWFsb2dUZXh0ID0gYWxsID8gXCJSZXBsYWNlIGFsbDpcIiA6IFwiUmVwbGFjZTpcIlxuICAgIGRpYWxvZyhjbSwgZGlhbG9nVGV4dCArIHJlcGxhY2VRdWVyeURpYWxvZywgZGlhbG9nVGV4dCwgcXVlcnksIGZ1bmN0aW9uKHF1ZXJ5KSB7XG4gICAgICBpZiAoIXF1ZXJ5KSByZXR1cm47XG4gICAgICBxdWVyeSA9IHBhcnNlUXVlcnkocXVlcnkpO1xuICAgICAgZGlhbG9nKGNtLCByZXBsYWNlbWVudFF1ZXJ5RGlhbG9nLCBcIlJlcGxhY2Ugd2l0aDpcIiwgXCJcIiwgZnVuY3Rpb24odGV4dCkge1xuICAgICAgICB0ZXh0ID0gcGFyc2VTdHJpbmcodGV4dClcbiAgICAgICAgaWYgKGFsbCkge1xuICAgICAgICAgIHJlcGxhY2VBbGwoY20sIHF1ZXJ5LCB0ZXh0KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNsZWFyU2VhcmNoKGNtKTtcbiAgICAgICAgICB2YXIgY3Vyc29yID0gZ2V0U2VhcmNoQ3Vyc29yKGNtLCBxdWVyeSwgY20uZ2V0Q3Vyc29yKCkpO1xuICAgICAgICAgIHZhciBhZHZhbmNlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSBjdXJzb3IuZnJvbSgpLCBtYXRjaDtcbiAgICAgICAgICAgIGlmICghKG1hdGNoID0gY3Vyc29yLmZpbmROZXh0KCkpKSB7XG4gICAgICAgICAgICAgIGN1cnNvciA9IGdldFNlYXJjaEN1cnNvcihjbSwgcXVlcnkpO1xuICAgICAgICAgICAgICBpZiAoIShtYXRjaCA9IGN1cnNvci5maW5kTmV4dCgpKSB8fFxuICAgICAgICAgICAgICAgICAgKHN0YXJ0ICYmIGN1cnNvci5mcm9tKCkubGluZSA9PSBzdGFydC5saW5lICYmIGN1cnNvci5mcm9tKCkuY2ggPT0gc3RhcnQuY2gpKSByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbS5zZXRTZWxlY3Rpb24oY3Vyc29yLmZyb20oKSwgY3Vyc29yLnRvKCkpO1xuICAgICAgICAgICAgY20uc2Nyb2xsSW50b1ZpZXcoe2Zyb206IGN1cnNvci5mcm9tKCksIHRvOiBjdXJzb3IudG8oKX0pO1xuICAgICAgICAgICAgY29uZmlybURpYWxvZyhjbSwgZG9SZXBsYWNlQ29uZmlybSwgXCJSZXBsYWNlP1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBbZnVuY3Rpb24oKSB7ZG9SZXBsYWNlKG1hdGNoKTt9LCBhZHZhbmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7cmVwbGFjZUFsbChjbSwgcXVlcnksIHRleHQpfV0pO1xuICAgICAgICAgIH07XG4gICAgICAgICAgdmFyIGRvUmVwbGFjZSA9IGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgICAgICAgICBjdXJzb3IucmVwbGFjZSh0eXBlb2YgcXVlcnkgPT0gXCJzdHJpbmdcIiA/IHRleHQgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC5yZXBsYWNlKC9cXCQoXFxkKS9nLCBmdW5jdGlvbihfLCBpKSB7cmV0dXJuIG1hdGNoW2ldO30pKTtcbiAgICAgICAgICAgIGFkdmFuY2UoKTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIGFkdmFuY2UoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBDb2RlTWlycm9yLmNvbW1hbmRzLmZpbmQgPSBmdW5jdGlvbihjbSkge2NsZWFyU2VhcmNoKGNtKTsgZG9TZWFyY2goY20pO307XG4gIENvZGVNaXJyb3IuY29tbWFuZHMuZmluZFBlcnNpc3RlbnQgPSBmdW5jdGlvbihjbSkge2NsZWFyU2VhcmNoKGNtKTsgZG9TZWFyY2goY20sIGZhbHNlLCB0cnVlKTt9O1xuICBDb2RlTWlycm9yLmNvbW1hbmRzLmZpbmROZXh0ID0gZG9TZWFyY2g7XG4gIENvZGVNaXJyb3IuY29tbWFuZHMuZmluZFByZXYgPSBmdW5jdGlvbihjbSkge2RvU2VhcmNoKGNtLCB0cnVlKTt9O1xuICBDb2RlTWlycm9yLmNvbW1hbmRzLmNsZWFyU2VhcmNoID0gY2xlYXJTZWFyY2g7XG4gIENvZGVNaXJyb3IuY29tbWFuZHMucmVwbGFjZSA9IHJlcGxhY2U7XG4gIENvZGVNaXJyb3IuY29tbWFuZHMucmVwbGFjZUFsbCA9IGZ1bmN0aW9uKGNtKSB7cmVwbGFjZShjbSwgdHJ1ZSk7fTtcbn0pO1xuIiwiLy8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhlcnNcbi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwOi8vY29kZW1pcnJvci5uZXQvTElDRU5TRVxuXG4oZnVuY3Rpb24obW9kKSB7XG4gIGlmICh0eXBlb2YgZXhwb3J0cyA9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUgPT0gXCJvYmplY3RcIikgLy8gQ29tbW9uSlNcbiAgICBtb2QocmVxdWlyZShcIi4uLy4uL2xpYi9jb2RlbWlycm9yXCIpKTtcbiAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkgLy8gQU1EXG4gICAgZGVmaW5lKFtcIi4uLy4uL2xpYi9jb2RlbWlycm9yXCJdLCBtb2QpO1xuICBlbHNlIC8vIFBsYWluIGJyb3dzZXIgZW52XG4gICAgbW9kKENvZGVNaXJyb3IpO1xufSkoZnVuY3Rpb24oQ29kZU1pcnJvcikge1xuICBcInVzZSBzdHJpY3RcIjtcbiAgdmFyIFBvcyA9IENvZGVNaXJyb3IuUG9zO1xuXG4gIGZ1bmN0aW9uIFNlYXJjaEN1cnNvcihkb2MsIHF1ZXJ5LCBwb3MsIGNhc2VGb2xkKSB7XG4gICAgdGhpcy5hdE9jY3VycmVuY2UgPSBmYWxzZTsgdGhpcy5kb2MgPSBkb2M7XG4gICAgaWYgKGNhc2VGb2xkID09IG51bGwgJiYgdHlwZW9mIHF1ZXJ5ID09IFwic3RyaW5nXCIpIGNhc2VGb2xkID0gZmFsc2U7XG5cbiAgICBwb3MgPSBwb3MgPyBkb2MuY2xpcFBvcyhwb3MpIDogUG9zKDAsIDApO1xuICAgIHRoaXMucG9zID0ge2Zyb206IHBvcywgdG86IHBvc307XG5cbiAgICAvLyBUaGUgbWF0Y2hlcyBtZXRob2QgaXMgZmlsbGVkIGluIGJhc2VkIG9uIHRoZSB0eXBlIG9mIHF1ZXJ5LlxuICAgIC8vIEl0IHRha2VzIGEgcG9zaXRpb24gYW5kIGEgZGlyZWN0aW9uLCBhbmQgcmV0dXJucyBhbiBvYmplY3RcbiAgICAvLyBkZXNjcmliaW5nIHRoZSBuZXh0IG9jY3VycmVuY2Ugb2YgdGhlIHF1ZXJ5LCBvciBudWxsIGlmIG5vXG4gICAgLy8gbW9yZSBtYXRjaGVzIHdlcmUgZm91bmQuXG4gICAgaWYgKHR5cGVvZiBxdWVyeSAhPSBcInN0cmluZ1wiKSB7IC8vIFJlZ2V4cCBtYXRjaFxuICAgICAgaWYgKCFxdWVyeS5nbG9iYWwpIHF1ZXJ5ID0gbmV3IFJlZ0V4cChxdWVyeS5zb3VyY2UsIHF1ZXJ5Lmlnbm9yZUNhc2UgPyBcImlnXCIgOiBcImdcIik7XG4gICAgICB0aGlzLm1hdGNoZXMgPSBmdW5jdGlvbihyZXZlcnNlLCBwb3MpIHtcbiAgICAgICAgaWYgKHJldmVyc2UpIHtcbiAgICAgICAgICBxdWVyeS5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgIHZhciBsaW5lID0gZG9jLmdldExpbmUocG9zLmxpbmUpLnNsaWNlKDAsIHBvcy5jaCksIGN1dE9mZiA9IDAsIG1hdGNoLCBzdGFydDtcbiAgICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBxdWVyeS5sYXN0SW5kZXggPSBjdXRPZmY7XG4gICAgICAgICAgICB2YXIgbmV3TWF0Y2ggPSBxdWVyeS5leGVjKGxpbmUpO1xuICAgICAgICAgICAgaWYgKCFuZXdNYXRjaCkgYnJlYWs7XG4gICAgICAgICAgICBtYXRjaCA9IG5ld01hdGNoO1xuICAgICAgICAgICAgc3RhcnQgPSBtYXRjaC5pbmRleDtcbiAgICAgICAgICAgIGN1dE9mZiA9IG1hdGNoLmluZGV4ICsgKG1hdGNoWzBdLmxlbmd0aCB8fCAxKTtcbiAgICAgICAgICAgIGlmIChjdXRPZmYgPT0gbGluZS5sZW5ndGgpIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgbWF0Y2hMZW4gPSAobWF0Y2ggJiYgbWF0Y2hbMF0ubGVuZ3RoKSB8fCAwO1xuICAgICAgICAgIGlmICghbWF0Y2hMZW4pIHtcbiAgICAgICAgICAgIGlmIChzdGFydCA9PSAwICYmIGxpbmUubGVuZ3RoID09IDApIHttYXRjaCA9IHVuZGVmaW5lZDt9XG4gICAgICAgICAgICBlbHNlIGlmIChzdGFydCAhPSBkb2MuZ2V0TGluZShwb3MubGluZSkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIG1hdGNoTGVuKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHF1ZXJ5Lmxhc3RJbmRleCA9IHBvcy5jaDtcbiAgICAgICAgICB2YXIgbGluZSA9IGRvYy5nZXRMaW5lKHBvcy5saW5lKSwgbWF0Y2ggPSBxdWVyeS5leGVjKGxpbmUpO1xuICAgICAgICAgIHZhciBtYXRjaExlbiA9IChtYXRjaCAmJiBtYXRjaFswXS5sZW5ndGgpIHx8IDA7XG4gICAgICAgICAgdmFyIHN0YXJ0ID0gbWF0Y2ggJiYgbWF0Y2guaW5kZXg7XG4gICAgICAgICAgaWYgKHN0YXJ0ICsgbWF0Y2hMZW4gIT0gbGluZS5sZW5ndGggJiYgIW1hdGNoTGVuKSBtYXRjaExlbiA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoTGVuKVxuICAgICAgICAgIHJldHVybiB7ZnJvbTogUG9zKHBvcy5saW5lLCBzdGFydCksXG4gICAgICAgICAgICAgICAgICB0bzogUG9zKHBvcy5saW5lLCBzdGFydCArIG1hdGNoTGVuKSxcbiAgICAgICAgICAgICAgICAgIG1hdGNoOiBtYXRjaH07XG4gICAgICB9O1xuICAgIH0gZWxzZSB7IC8vIFN0cmluZyBxdWVyeVxuICAgICAgdmFyIG9yaWdRdWVyeSA9IHF1ZXJ5O1xuICAgICAgaWYgKGNhc2VGb2xkKSBxdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgICB2YXIgZm9sZCA9IGNhc2VGb2xkID8gZnVuY3Rpb24oc3RyKXtyZXR1cm4gc3RyLnRvTG93ZXJDYXNlKCk7fSA6IGZ1bmN0aW9uKHN0cil7cmV0dXJuIHN0cjt9O1xuICAgICAgdmFyIHRhcmdldCA9IHF1ZXJ5LnNwbGl0KFwiXFxuXCIpO1xuICAgICAgLy8gRGlmZmVyZW50IG1ldGhvZHMgZm9yIHNpbmdsZS1saW5lIGFuZCBtdWx0aS1saW5lIHF1ZXJpZXNcbiAgICAgIGlmICh0YXJnZXQubGVuZ3RoID09IDEpIHtcbiAgICAgICAgaWYgKCFxdWVyeS5sZW5ndGgpIHtcbiAgICAgICAgICAvLyBFbXB0eSBzdHJpbmcgd291bGQgbWF0Y2ggYW55dGhpbmcgYW5kIG5ldmVyIHByb2dyZXNzLCBzb1xuICAgICAgICAgIC8vIHdlIGRlZmluZSBpdCB0byBtYXRjaCBub3RoaW5nIGluc3RlYWQuXG4gICAgICAgICAgdGhpcy5tYXRjaGVzID0gZnVuY3Rpb24oKSB7fTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm1hdGNoZXMgPSBmdW5jdGlvbihyZXZlcnNlLCBwb3MpIHtcbiAgICAgICAgICAgIGlmIChyZXZlcnNlKSB7XG4gICAgICAgICAgICAgIHZhciBvcmlnID0gZG9jLmdldExpbmUocG9zLmxpbmUpLnNsaWNlKDAsIHBvcy5jaCksIGxpbmUgPSBmb2xkKG9yaWcpO1xuICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSBsaW5lLmxhc3RJbmRleE9mKHF1ZXJ5KTtcbiAgICAgICAgICAgICAgaWYgKG1hdGNoID4gLTEpIHtcbiAgICAgICAgICAgICAgICBtYXRjaCA9IGFkanVzdFBvcyhvcmlnLCBsaW5lLCBtYXRjaCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtmcm9tOiBQb3MocG9zLmxpbmUsIG1hdGNoKSwgdG86IFBvcyhwb3MubGluZSwgbWF0Y2ggKyBvcmlnUXVlcnkubGVuZ3RoKX07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgdmFyIG9yaWcgPSBkb2MuZ2V0TGluZShwb3MubGluZSkuc2xpY2UocG9zLmNoKSwgbGluZSA9IGZvbGQob3JpZyk7XG4gICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSBsaW5lLmluZGV4T2YocXVlcnkpO1xuICAgICAgICAgICAgICAgaWYgKG1hdGNoID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgbWF0Y2ggPSBhZGp1c3RQb3Mob3JpZywgbGluZSwgbWF0Y2gpICsgcG9zLmNoO1xuICAgICAgICAgICAgICAgICByZXR1cm4ge2Zyb206IFBvcyhwb3MubGluZSwgbWF0Y2gpLCB0bzogUG9zKHBvcy5saW5lLCBtYXRjaCArIG9yaWdRdWVyeS5sZW5ndGgpfTtcbiAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgb3JpZ1RhcmdldCA9IG9yaWdRdWVyeS5zcGxpdChcIlxcblwiKTtcbiAgICAgICAgdGhpcy5tYXRjaGVzID0gZnVuY3Rpb24ocmV2ZXJzZSwgcG9zKSB7XG4gICAgICAgICAgdmFyIGxhc3QgPSB0YXJnZXQubGVuZ3RoIC0gMTtcbiAgICAgICAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgICAgICAgaWYgKHBvcy5saW5lIC0gKHRhcmdldC5sZW5ndGggLSAxKSA8IGRvYy5maXJzdExpbmUoKSkgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKGZvbGQoZG9jLmdldExpbmUocG9zLmxpbmUpLnNsaWNlKDAsIG9yaWdUYXJnZXRbbGFzdF0ubGVuZ3RoKSkgIT0gdGFyZ2V0W3RhcmdldC5sZW5ndGggLSAxXSkgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIHRvID0gUG9zKHBvcy5saW5lLCBvcmlnVGFyZ2V0W2xhc3RdLmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKHZhciBsbiA9IHBvcy5saW5lIC0gMSwgaSA9IGxhc3QgLSAxOyBpID49IDE7IC0taSwgLS1sbilcbiAgICAgICAgICAgICAgaWYgKHRhcmdldFtpXSAhPSBmb2xkKGRvYy5nZXRMaW5lKGxuKSkpIHJldHVybjtcbiAgICAgICAgICAgIHZhciBsaW5lID0gZG9jLmdldExpbmUobG4pLCBjdXQgPSBsaW5lLmxlbmd0aCAtIG9yaWdUYXJnZXRbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGZvbGQobGluZS5zbGljZShjdXQpKSAhPSB0YXJnZXRbMF0pIHJldHVybjtcbiAgICAgICAgICAgIHJldHVybiB7ZnJvbTogUG9zKGxuLCBjdXQpLCB0bzogdG99O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAocG9zLmxpbmUgKyAodGFyZ2V0Lmxlbmd0aCAtIDEpID4gZG9jLmxhc3RMaW5lKCkpIHJldHVybjtcbiAgICAgICAgICAgIHZhciBsaW5lID0gZG9jLmdldExpbmUocG9zLmxpbmUpLCBjdXQgPSBsaW5lLmxlbmd0aCAtIG9yaWdUYXJnZXRbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGZvbGQobGluZS5zbGljZShjdXQpKSAhPSB0YXJnZXRbMF0pIHJldHVybjtcbiAgICAgICAgICAgIHZhciBmcm9tID0gUG9zKHBvcy5saW5lLCBjdXQpO1xuICAgICAgICAgICAgZm9yICh2YXIgbG4gPSBwb3MubGluZSArIDEsIGkgPSAxOyBpIDwgbGFzdDsgKytpLCArK2xuKVxuICAgICAgICAgICAgICBpZiAodGFyZ2V0W2ldICE9IGZvbGQoZG9jLmdldExpbmUobG4pKSkgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKGZvbGQoZG9jLmdldExpbmUobG4pLnNsaWNlKDAsIG9yaWdUYXJnZXRbbGFzdF0ubGVuZ3RoKSkgIT0gdGFyZ2V0W2xhc3RdKSByZXR1cm47XG4gICAgICAgICAgICByZXR1cm4ge2Zyb206IGZyb20sIHRvOiBQb3MobG4sIG9yaWdUYXJnZXRbbGFzdF0ubGVuZ3RoKX07XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIFNlYXJjaEN1cnNvci5wcm90b3R5cGUgPSB7XG4gICAgZmluZE5leHQ6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLmZpbmQoZmFsc2UpO30sXG4gICAgZmluZFByZXZpb3VzOiBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5maW5kKHRydWUpO30sXG5cbiAgICBmaW5kOiBmdW5jdGlvbihyZXZlcnNlKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMsIHBvcyA9IHRoaXMuZG9jLmNsaXBQb3MocmV2ZXJzZSA/IHRoaXMucG9zLmZyb20gOiB0aGlzLnBvcy50byk7XG4gICAgICBmdW5jdGlvbiBzYXZlUG9zQW5kRmFpbChsaW5lKSB7XG4gICAgICAgIHZhciBwb3MgPSBQb3MobGluZSwgMCk7XG4gICAgICAgIHNlbGYucG9zID0ge2Zyb206IHBvcywgdG86IHBvc307XG4gICAgICAgIHNlbGYuYXRPY2N1cnJlbmNlID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgZm9yICg7Oykge1xuICAgICAgICBpZiAodGhpcy5wb3MgPSB0aGlzLm1hdGNoZXMocmV2ZXJzZSwgcG9zKSkge1xuICAgICAgICAgIHRoaXMuYXRPY2N1cnJlbmNlID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gdGhpcy5wb3MubWF0Y2ggfHwgdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgICAgIGlmICghcG9zLmxpbmUpIHJldHVybiBzYXZlUG9zQW5kRmFpbCgwKTtcbiAgICAgICAgICBwb3MgPSBQb3MocG9zLmxpbmUtMSwgdGhpcy5kb2MuZ2V0TGluZShwb3MubGluZS0xKS5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHZhciBtYXhMaW5lID0gdGhpcy5kb2MubGluZUNvdW50KCk7XG4gICAgICAgICAgaWYgKHBvcy5saW5lID09IG1heExpbmUgLSAxKSByZXR1cm4gc2F2ZVBvc0FuZEZhaWwobWF4TGluZSk7XG4gICAgICAgICAgcG9zID0gUG9zKHBvcy5saW5lICsgMSwgMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZnJvbTogZnVuY3Rpb24oKSB7aWYgKHRoaXMuYXRPY2N1cnJlbmNlKSByZXR1cm4gdGhpcy5wb3MuZnJvbTt9LFxuICAgIHRvOiBmdW5jdGlvbigpIHtpZiAodGhpcy5hdE9jY3VycmVuY2UpIHJldHVybiB0aGlzLnBvcy50bzt9LFxuXG4gICAgcmVwbGFjZTogZnVuY3Rpb24obmV3VGV4dCwgb3JpZ2luKSB7XG4gICAgICBpZiAoIXRoaXMuYXRPY2N1cnJlbmNlKSByZXR1cm47XG4gICAgICB2YXIgbGluZXMgPSBDb2RlTWlycm9yLnNwbGl0TGluZXMobmV3VGV4dCk7XG4gICAgICB0aGlzLmRvYy5yZXBsYWNlUmFuZ2UobGluZXMsIHRoaXMucG9zLmZyb20sIHRoaXMucG9zLnRvLCBvcmlnaW4pO1xuICAgICAgdGhpcy5wb3MudG8gPSBQb3ModGhpcy5wb3MuZnJvbS5saW5lICsgbGluZXMubGVuZ3RoIC0gMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdLmxlbmd0aCArIChsaW5lcy5sZW5ndGggPT0gMSA/IHRoaXMucG9zLmZyb20uY2ggOiAwKSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIE1hcHMgYSBwb3NpdGlvbiBpbiBhIGNhc2UtZm9sZGVkIGxpbmUgYmFjayB0byBhIHBvc2l0aW9uIGluIHRoZSBvcmlnaW5hbCBsaW5lXG4gIC8vIChjb21wZW5zYXRpbmcgZm9yIGNvZGVwb2ludHMgaW5jcmVhc2luZyBpbiBudW1iZXIgZHVyaW5nIGZvbGRpbmcpXG4gIGZ1bmN0aW9uIGFkanVzdFBvcyhvcmlnLCBmb2xkZWQsIHBvcykge1xuICAgIGlmIChvcmlnLmxlbmd0aCA9PSBmb2xkZWQubGVuZ3RoKSByZXR1cm4gcG9zO1xuICAgIGZvciAodmFyIHBvczEgPSBNYXRoLm1pbihwb3MsIG9yaWcubGVuZ3RoKTs7KSB7XG4gICAgICB2YXIgbGVuMSA9IG9yaWcuc2xpY2UoMCwgcG9zMSkudG9Mb3dlckNhc2UoKS5sZW5ndGg7XG4gICAgICBpZiAobGVuMSA8IHBvcykgKytwb3MxO1xuICAgICAgZWxzZSBpZiAobGVuMSA+IHBvcykgLS1wb3MxO1xuICAgICAgZWxzZSByZXR1cm4gcG9zMTtcbiAgICB9XG4gIH1cblxuICBDb2RlTWlycm9yLmRlZmluZUV4dGVuc2lvbihcImdldFNlYXJjaEN1cnNvclwiLCBmdW5jdGlvbihxdWVyeSwgcG9zLCBjYXNlRm9sZCkge1xuICAgIHJldHVybiBuZXcgU2VhcmNoQ3Vyc29yKHRoaXMuZG9jLCBxdWVyeSwgcG9zLCBjYXNlRm9sZCk7XG4gIH0pO1xuICBDb2RlTWlycm9yLmRlZmluZURvY0V4dGVuc2lvbihcImdldFNlYXJjaEN1cnNvclwiLCBmdW5jdGlvbihxdWVyeSwgcG9zLCBjYXNlRm9sZCkge1xuICAgIHJldHVybiBuZXcgU2VhcmNoQ3Vyc29yKHRoaXMsIHF1ZXJ5LCBwb3MsIGNhc2VGb2xkKTtcbiAgfSk7XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVFeHRlbnNpb24oXCJzZWxlY3RNYXRjaGVzXCIsIGZ1bmN0aW9uKHF1ZXJ5LCBjYXNlRm9sZCkge1xuICAgIHZhciByYW5nZXMgPSBbXTtcbiAgICB2YXIgY3VyID0gdGhpcy5nZXRTZWFyY2hDdXJzb3IocXVlcnksIHRoaXMuZ2V0Q3Vyc29yKFwiZnJvbVwiKSwgY2FzZUZvbGQpO1xuICAgIHdoaWxlIChjdXIuZmluZE5leHQoKSkge1xuICAgICAgaWYgKENvZGVNaXJyb3IuY21wUG9zKGN1ci50bygpLCB0aGlzLmdldEN1cnNvcihcInRvXCIpKSA+IDApIGJyZWFrO1xuICAgICAgcmFuZ2VzLnB1c2goe2FuY2hvcjogY3VyLmZyb20oKSwgaGVhZDogY3VyLnRvKCl9KTtcbiAgICB9XG4gICAgaWYgKHJhbmdlcy5sZW5ndGgpXG4gICAgICB0aGlzLnNldFNlbGVjdGlvbnMocmFuZ2VzLCAwKTtcbiAgfSk7XG59KTtcbiIsIi8vIENvZGVNaXJyb3IsIGNvcHlyaWdodCAoYykgYnkgTWFyaWpuIEhhdmVyYmVrZSBhbmQgb3RoZXJzXG4vLyBEaXN0cmlidXRlZCB1bmRlciBhbiBNSVQgbGljZW5zZTogaHR0cDovL2NvZGVtaXJyb3IubmV0L0xJQ0VOU0VcblxuKGZ1bmN0aW9uKG1vZCkge1xuICBpZiAodHlwZW9mIGV4cG9ydHMgPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlID09IFwib2JqZWN0XCIpIC8vIENvbW1vbkpTXG4gICAgbW9kKHJlcXVpcmUoXCIuLi8uLi9saWIvY29kZW1pcnJvclwiKSk7XG4gIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIC8vIEFNRFxuICAgIGRlZmluZShbXCIuLi8uLi9saWIvY29kZW1pcnJvclwiXSwgbW9kKTtcbiAgZWxzZSAvLyBQbGFpbiBicm93c2VyIGVudlxuICAgIG1vZChDb2RlTWlycm9yKTtcbn0pKGZ1bmN0aW9uKENvZGVNaXJyb3IpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIFBvcyA9IENvZGVNaXJyb3IuUG9zO1xuXG4gIGZ1bmN0aW9uIGZpbmRQYXJhZ3JhcGgoY20sIHBvcywgb3B0aW9ucykge1xuICAgIHZhciBzdGFydFJFID0gb3B0aW9ucy5wYXJhZ3JhcGhTdGFydCB8fCBjbS5nZXRIZWxwZXIocG9zLCBcInBhcmFncmFwaFN0YXJ0XCIpO1xuICAgIGZvciAodmFyIHN0YXJ0ID0gcG9zLmxpbmUsIGZpcnN0ID0gY20uZmlyc3RMaW5lKCk7IHN0YXJ0ID4gZmlyc3Q7IC0tc3RhcnQpIHtcbiAgICAgIHZhciBsaW5lID0gY20uZ2V0TGluZShzdGFydCk7XG4gICAgICBpZiAoc3RhcnRSRSAmJiBzdGFydFJFLnRlc3QobGluZSkpIGJyZWFrO1xuICAgICAgaWYgKCEvXFxTLy50ZXN0KGxpbmUpKSB7ICsrc3RhcnQ7IGJyZWFrOyB9XG4gICAgfVxuICAgIHZhciBlbmRSRSA9IG9wdGlvbnMucGFyYWdyYXBoRW5kIHx8IGNtLmdldEhlbHBlcihwb3MsIFwicGFyYWdyYXBoRW5kXCIpO1xuICAgIGZvciAodmFyIGVuZCA9IHBvcy5saW5lICsgMSwgbGFzdCA9IGNtLmxhc3RMaW5lKCk7IGVuZCA8PSBsYXN0OyArK2VuZCkge1xuICAgICAgdmFyIGxpbmUgPSBjbS5nZXRMaW5lKGVuZCk7XG4gICAgICBpZiAoZW5kUkUgJiYgZW5kUkUudGVzdChsaW5lKSkgeyArK2VuZDsgYnJlYWs7IH1cbiAgICAgIGlmICghL1xcUy8udGVzdChsaW5lKSkgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiB7ZnJvbTogc3RhcnQsIHRvOiBlbmR9O1xuICB9XG5cbiAgZnVuY3Rpb24gZmluZEJyZWFrUG9pbnQodGV4dCwgY29sdW1uLCB3cmFwT24sIGtpbGxUcmFpbGluZ1NwYWNlKSB7XG4gICAgZm9yICh2YXIgYXQgPSBjb2x1bW47IGF0ID4gMDsgLS1hdClcbiAgICAgIGlmICh3cmFwT24udGVzdCh0ZXh0LnNsaWNlKGF0IC0gMSwgYXQgKyAxKSkpIGJyZWFrO1xuICAgIGZvciAodmFyIGZpcnN0ID0gdHJ1ZTs7IGZpcnN0ID0gZmFsc2UpIHtcbiAgICAgIHZhciBlbmRPZlRleHQgPSBhdDtcbiAgICAgIGlmIChraWxsVHJhaWxpbmdTcGFjZSlcbiAgICAgICAgd2hpbGUgKHRleHQuY2hhckF0KGVuZE9mVGV4dCAtIDEpID09IFwiIFwiKSAtLWVuZE9mVGV4dDtcbiAgICAgIGlmIChlbmRPZlRleHQgPT0gMCAmJiBmaXJzdCkgYXQgPSBjb2x1bW47XG4gICAgICBlbHNlIHJldHVybiB7ZnJvbTogZW5kT2ZUZXh0LCB0bzogYXR9O1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHdyYXBSYW5nZShjbSwgZnJvbSwgdG8sIG9wdGlvbnMpIHtcbiAgICBmcm9tID0gY20uY2xpcFBvcyhmcm9tKTsgdG8gPSBjbS5jbGlwUG9zKHRvKTtcbiAgICB2YXIgY29sdW1uID0gb3B0aW9ucy5jb2x1bW4gfHwgODA7XG4gICAgdmFyIHdyYXBPbiA9IG9wdGlvbnMud3JhcE9uIHx8IC9cXHNcXFN8LVteXFwuXFxkXS87XG4gICAgdmFyIGtpbGxUcmFpbGluZyA9IG9wdGlvbnMua2lsbFRyYWlsaW5nU3BhY2UgIT09IGZhbHNlO1xuICAgIHZhciBjaGFuZ2VzID0gW10sIGN1ckxpbmUgPSBcIlwiLCBjdXJObyA9IGZyb20ubGluZTtcbiAgICB2YXIgbGluZXMgPSBjbS5nZXRSYW5nZShmcm9tLCB0bywgZmFsc2UpO1xuICAgIGlmICghbGluZXMubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICB2YXIgbGVhZGluZ1NwYWNlID0gbGluZXNbMF0ubWF0Y2goL15bIFxcdF0qLylbMF07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgdGV4dCA9IGxpbmVzW2ldLCBvbGRMZW4gPSBjdXJMaW5lLmxlbmd0aCwgc3BhY2VJbnNlcnRlZCA9IDA7XG4gICAgICBpZiAoY3VyTGluZSAmJiB0ZXh0ICYmICF3cmFwT24udGVzdChjdXJMaW5lLmNoYXJBdChjdXJMaW5lLmxlbmd0aCAtIDEpICsgdGV4dC5jaGFyQXQoMCkpKSB7XG4gICAgICAgIGN1ckxpbmUgKz0gXCIgXCI7XG4gICAgICAgIHNwYWNlSW5zZXJ0ZWQgPSAxO1xuICAgICAgfVxuICAgICAgdmFyIHNwYWNlVHJpbW1lZCA9IFwiXCI7XG4gICAgICBpZiAoaSkge1xuICAgICAgICBzcGFjZVRyaW1tZWQgPSB0ZXh0Lm1hdGNoKC9eXFxzKi8pWzBdO1xuICAgICAgICB0ZXh0ID0gdGV4dC5zbGljZShzcGFjZVRyaW1tZWQubGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIGN1ckxpbmUgKz0gdGV4dDtcbiAgICAgIGlmIChpKSB7XG4gICAgICAgIHZhciBmaXJzdEJyZWFrID0gY3VyTGluZS5sZW5ndGggPiBjb2x1bW4gJiYgbGVhZGluZ1NwYWNlID09IHNwYWNlVHJpbW1lZCAmJlxuICAgICAgICAgIGZpbmRCcmVha1BvaW50KGN1ckxpbmUsIGNvbHVtbiwgd3JhcE9uLCBraWxsVHJhaWxpbmcpO1xuICAgICAgICAvLyBJZiB0aGlzIGlzbid0IGJyb2tlbiwgb3IgaXMgYnJva2VuIGF0IGEgZGlmZmVyZW50IHBvaW50LCByZW1vdmUgb2xkIGJyZWFrXG4gICAgICAgIGlmICghZmlyc3RCcmVhayB8fCBmaXJzdEJyZWFrLmZyb20gIT0gb2xkTGVuIHx8IGZpcnN0QnJlYWsudG8gIT0gb2xkTGVuICsgc3BhY2VJbnNlcnRlZCkge1xuICAgICAgICAgIGNoYW5nZXMucHVzaCh7dGV4dDogW3NwYWNlSW5zZXJ0ZWQgPyBcIiBcIiA6IFwiXCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTogUG9zKGN1ck5vLCBvbGRMZW4pLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG86IFBvcyhjdXJObyArIDEsIHNwYWNlVHJpbW1lZC5sZW5ndGgpfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VyTGluZSA9IGxlYWRpbmdTcGFjZSArIHRleHQ7XG4gICAgICAgICAgKytjdXJObztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgd2hpbGUgKGN1ckxpbmUubGVuZ3RoID4gY29sdW1uKSB7XG4gICAgICAgIHZhciBicCA9IGZpbmRCcmVha1BvaW50KGN1ckxpbmUsIGNvbHVtbiwgd3JhcE9uLCBraWxsVHJhaWxpbmcpO1xuICAgICAgICBjaGFuZ2VzLnB1c2goe3RleHQ6IFtcIlwiLCBsZWFkaW5nU3BhY2VdLFxuICAgICAgICAgICAgICAgICAgICAgIGZyb206IFBvcyhjdXJObywgYnAuZnJvbSksXG4gICAgICAgICAgICAgICAgICAgICAgdG86IFBvcyhjdXJObywgYnAudG8pfSk7XG4gICAgICAgIGN1ckxpbmUgPSBsZWFkaW5nU3BhY2UgKyBjdXJMaW5lLnNsaWNlKGJwLnRvKTtcbiAgICAgICAgKytjdXJObztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNoYW5nZXMubGVuZ3RoKSBjbS5vcGVyYXRpb24oZnVuY3Rpb24oKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYW5nZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGNoYW5nZSA9IGNoYW5nZXNbaV07XG4gICAgICAgIGlmIChjaGFuZ2UudGV4dCB8fCBDb2RlTWlycm9yLmNtcFBvcyhjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKSlcbiAgICAgICAgICBjbS5yZXBsYWNlUmFuZ2UoY2hhbmdlLnRleHQsIGNoYW5nZS5mcm9tLCBjaGFuZ2UudG8pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjaGFuZ2VzLmxlbmd0aCA/IHtmcm9tOiBjaGFuZ2VzWzBdLmZyb20sIHRvOiBDb2RlTWlycm9yLmNoYW5nZUVuZChjaGFuZ2VzW2NoYW5nZXMubGVuZ3RoIC0gMV0pfSA6IG51bGw7XG4gIH1cblxuICBDb2RlTWlycm9yLmRlZmluZUV4dGVuc2lvbihcIndyYXBQYXJhZ3JhcGhcIiwgZnVuY3Rpb24ocG9zLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgaWYgKCFwb3MpIHBvcyA9IHRoaXMuZ2V0Q3Vyc29yKCk7XG4gICAgdmFyIHBhcmEgPSBmaW5kUGFyYWdyYXBoKHRoaXMsIHBvcywgb3B0aW9ucyk7XG4gICAgcmV0dXJuIHdyYXBSYW5nZSh0aGlzLCBQb3MocGFyYS5mcm9tLCAwKSwgUG9zKHBhcmEudG8gLSAxKSwgb3B0aW9ucyk7XG4gIH0pO1xuXG4gIENvZGVNaXJyb3IuY29tbWFuZHMud3JhcExpbmVzID0gZnVuY3Rpb24oY20pIHtcbiAgICBjbS5vcGVyYXRpb24oZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmFuZ2VzID0gY20ubGlzdFNlbGVjdGlvbnMoKSwgYXQgPSBjbS5sYXN0TGluZSgpICsgMTtcbiAgICAgIGZvciAodmFyIGkgPSByYW5nZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgdmFyIHJhbmdlID0gcmFuZ2VzW2ldLCBzcGFuO1xuICAgICAgICBpZiAocmFuZ2UuZW1wdHkoKSkge1xuICAgICAgICAgIHZhciBwYXJhID0gZmluZFBhcmFncmFwaChjbSwgcmFuZ2UuaGVhZCwge30pO1xuICAgICAgICAgIHNwYW4gPSB7ZnJvbTogUG9zKHBhcmEuZnJvbSwgMCksIHRvOiBQb3MocGFyYS50byAtIDEpfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzcGFuID0ge2Zyb206IHJhbmdlLmZyb20oKSwgdG86IHJhbmdlLnRvKCl9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChzcGFuLnRvLmxpbmUgPj0gYXQpIGNvbnRpbnVlO1xuICAgICAgICBhdCA9IHNwYW4uZnJvbS5saW5lO1xuICAgICAgICB3cmFwUmFuZ2UoY20sIHNwYW4uZnJvbSwgc3Bhbi50bywge30pO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIENvZGVNaXJyb3IuZGVmaW5lRXh0ZW5zaW9uKFwid3JhcFJhbmdlXCIsIGZ1bmN0aW9uKGZyb20sIHRvLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHdyYXBSYW5nZSh0aGlzLCBmcm9tLCB0bywgb3B0aW9ucyB8fCB7fSk7XG4gIH0pO1xuXG4gIENvZGVNaXJyb3IuZGVmaW5lRXh0ZW5zaW9uKFwid3JhcFBhcmFncmFwaHNJblJhbmdlXCIsIGZ1bmN0aW9uKGZyb20sIHRvLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgdmFyIGNtID0gdGhpcywgcGFyYXMgPSBbXTtcbiAgICBmb3IgKHZhciBsaW5lID0gZnJvbS5saW5lOyBsaW5lIDw9IHRvLmxpbmU7KSB7XG4gICAgICB2YXIgcGFyYSA9IGZpbmRQYXJhZ3JhcGgoY20sIFBvcyhsaW5lLCAwKSwgb3B0aW9ucyk7XG4gICAgICBwYXJhcy5wdXNoKHBhcmEpO1xuICAgICAgbGluZSA9IHBhcmEudG87XG4gICAgfVxuICAgIHZhciBtYWRlQ2hhbmdlID0gZmFsc2U7XG4gICAgaWYgKHBhcmFzLmxlbmd0aCkgY20ub3BlcmF0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgZm9yICh2YXIgaSA9IHBhcmFzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKVxuICAgICAgICBtYWRlQ2hhbmdlID0gbWFkZUNoYW5nZSB8fCB3cmFwUmFuZ2UoY20sIFBvcyhwYXJhc1tpXS5mcm9tLCAwKSwgUG9zKHBhcmFzW2ldLnRvIC0gMSksIG9wdGlvbnMpO1xuICAgIH0pO1xuICAgIHJldHVybiBtYWRlQ2hhbmdlO1xuICB9KTtcbn0pO1xuIiwiLy8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhlcnNcbi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwOi8vY29kZW1pcnJvci5uZXQvTElDRU5TRVxuXG4vLyBBIHJvdWdoIGFwcHJveGltYXRpb24gb2YgU3VibGltZSBUZXh0J3Mga2V5YmluZGluZ3Ncbi8vIERlcGVuZHMgb24gYWRkb24vc2VhcmNoL3NlYXJjaGN1cnNvci5qcyBhbmQgb3B0aW9uYWxseSBhZGRvbi9kaWFsb2cvZGlhbG9ncy5qc1xuXG4oZnVuY3Rpb24obW9kKSB7XG4gIGlmICh0eXBlb2YgZXhwb3J0cyA9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUgPT0gXCJvYmplY3RcIikgLy8gQ29tbW9uSlNcbiAgICBtb2QocmVxdWlyZShcIi4uL2xpYi9jb2RlbWlycm9yXCIpLCByZXF1aXJlKFwiLi4vYWRkb24vc2VhcmNoL3NlYXJjaGN1cnNvclwiKSwgcmVxdWlyZShcIi4uL2FkZG9uL2VkaXQvbWF0Y2hicmFja2V0c1wiKSk7XG4gIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIC8vIEFNRFxuICAgIGRlZmluZShbXCIuLi9saWIvY29kZW1pcnJvclwiLCBcIi4uL2FkZG9uL3NlYXJjaC9zZWFyY2hjdXJzb3JcIiwgXCIuLi9hZGRvbi9lZGl0L21hdGNoYnJhY2tldHNcIl0sIG1vZCk7XG4gIGVsc2UgLy8gUGxhaW4gYnJvd3NlciBlbnZcbiAgICBtb2QoQ29kZU1pcnJvcik7XG59KShmdW5jdGlvbihDb2RlTWlycm9yKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBtYXAgPSBDb2RlTWlycm9yLmtleU1hcC5zdWJsaW1lID0ge2ZhbGx0aHJvdWdoOiBcImRlZmF1bHRcIn07XG4gIHZhciBjbWRzID0gQ29kZU1pcnJvci5jb21tYW5kcztcbiAgdmFyIFBvcyA9IENvZGVNaXJyb3IuUG9zO1xuICB2YXIgbWFjID0gQ29kZU1pcnJvci5rZXlNYXBbXCJkZWZhdWx0XCJdID09IENvZGVNaXJyb3Iua2V5TWFwLm1hY0RlZmF1bHQ7XG4gIHZhciBjdHJsID0gbWFjID8gXCJDbWQtXCIgOiBcIkN0cmwtXCI7XG5cbiAgLy8gVGhpcyBpcyBub3QgZXhhY3RseSBTdWJsaW1lJ3MgYWxnb3JpdGhtLiBJIGNvdWxkbid0IG1ha2UgaGVhZHMgb3IgdGFpbHMgb2YgdGhhdC5cbiAgZnVuY3Rpb24gZmluZFBvc1N1YndvcmQoZG9jLCBzdGFydCwgZGlyKSB7XG4gICAgaWYgKGRpciA8IDAgJiYgc3RhcnQuY2ggPT0gMCkgcmV0dXJuIGRvYy5jbGlwUG9zKFBvcyhzdGFydC5saW5lIC0gMSkpO1xuICAgIHZhciBsaW5lID0gZG9jLmdldExpbmUoc3RhcnQubGluZSk7XG4gICAgaWYgKGRpciA+IDAgJiYgc3RhcnQuY2ggPj0gbGluZS5sZW5ndGgpIHJldHVybiBkb2MuY2xpcFBvcyhQb3Moc3RhcnQubGluZSArIDEsIDApKTtcbiAgICB2YXIgc3RhdGUgPSBcInN0YXJ0XCIsIHR5cGU7XG4gICAgZm9yICh2YXIgcG9zID0gc3RhcnQuY2gsIGUgPSBkaXIgPCAwID8gMCA6IGxpbmUubGVuZ3RoLCBpID0gMDsgcG9zICE9IGU7IHBvcyArPSBkaXIsIGkrKykge1xuICAgICAgdmFyIG5leHQgPSBsaW5lLmNoYXJBdChkaXIgPCAwID8gcG9zIC0gMSA6IHBvcyk7XG4gICAgICB2YXIgY2F0ID0gbmV4dCAhPSBcIl9cIiAmJiBDb2RlTWlycm9yLmlzV29yZENoYXIobmV4dCkgPyBcIndcIiA6IFwib1wiO1xuICAgICAgaWYgKGNhdCA9PSBcIndcIiAmJiBuZXh0LnRvVXBwZXJDYXNlKCkgPT0gbmV4dCkgY2F0ID0gXCJXXCI7XG4gICAgICBpZiAoc3RhdGUgPT0gXCJzdGFydFwiKSB7XG4gICAgICAgIGlmIChjYXQgIT0gXCJvXCIpIHsgc3RhdGUgPSBcImluXCI7IHR5cGUgPSBjYXQ7IH1cbiAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT0gXCJpblwiKSB7XG4gICAgICAgIGlmICh0eXBlICE9IGNhdCkge1xuICAgICAgICAgIGlmICh0eXBlID09IFwid1wiICYmIGNhdCA9PSBcIldcIiAmJiBkaXIgPCAwKSBwb3MtLTtcbiAgICAgICAgICBpZiAodHlwZSA9PSBcIldcIiAmJiBjYXQgPT0gXCJ3XCIgJiYgZGlyID4gMCkgeyB0eXBlID0gXCJ3XCI7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFBvcyhzdGFydC5saW5lLCBwb3MpO1xuICB9XG5cbiAgZnVuY3Rpb24gbW92ZVN1YndvcmQoY20sIGRpcikge1xuICAgIGNtLmV4dGVuZFNlbGVjdGlvbnNCeShmdW5jdGlvbihyYW5nZSkge1xuICAgICAgaWYgKGNtLmRpc3BsYXkuc2hpZnQgfHwgY20uZG9jLmV4dGVuZCB8fCByYW5nZS5lbXB0eSgpKVxuICAgICAgICByZXR1cm4gZmluZFBvc1N1YndvcmQoY20uZG9jLCByYW5nZS5oZWFkLCBkaXIpO1xuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gZGlyIDwgMCA/IHJhbmdlLmZyb20oKSA6IHJhbmdlLnRvKCk7XG4gICAgfSk7XG4gIH1cblxuICBjbWRzW21hcFtcIkFsdC1MZWZ0XCJdID0gXCJnb1N1YndvcmRMZWZ0XCJdID0gZnVuY3Rpb24oY20pIHsgbW92ZVN1YndvcmQoY20sIC0xKTsgfTtcbiAgY21kc1ttYXBbXCJBbHQtUmlnaHRcIl0gPSBcImdvU3Vid29yZFJpZ2h0XCJdID0gZnVuY3Rpb24oY20pIHsgbW92ZVN1YndvcmQoY20sIDEpOyB9O1xuXG4gIHZhciBzY3JvbGxMaW5lQ29tYm8gPSBtYWMgPyBcIkN0cmwtQWx0LVwiIDogXCJDdHJsLVwiO1xuXG4gIGNtZHNbbWFwW3Njcm9sbExpbmVDb21ibyArIFwiVXBcIl0gPSBcInNjcm9sbExpbmVVcFwiXSA9IGZ1bmN0aW9uKGNtKSB7XG4gICAgdmFyIGluZm8gPSBjbS5nZXRTY3JvbGxJbmZvKCk7XG4gICAgaWYgKCFjbS5zb21ldGhpbmdTZWxlY3RlZCgpKSB7XG4gICAgICB2YXIgdmlzaWJsZUJvdHRvbUxpbmUgPSBjbS5saW5lQXRIZWlnaHQoaW5mby50b3AgKyBpbmZvLmNsaWVudEhlaWdodCwgXCJsb2NhbFwiKTtcbiAgICAgIGlmIChjbS5nZXRDdXJzb3IoKS5saW5lID49IHZpc2libGVCb3R0b21MaW5lKVxuICAgICAgICBjbS5leGVjQ29tbWFuZChcImdvTGluZVVwXCIpO1xuICAgIH1cbiAgICBjbS5zY3JvbGxUbyhudWxsLCBpbmZvLnRvcCAtIGNtLmRlZmF1bHRUZXh0SGVpZ2h0KCkpO1xuICB9O1xuICBjbWRzW21hcFtzY3JvbGxMaW5lQ29tYm8gKyBcIkRvd25cIl0gPSBcInNjcm9sbExpbmVEb3duXCJdID0gZnVuY3Rpb24oY20pIHtcbiAgICB2YXIgaW5mbyA9IGNtLmdldFNjcm9sbEluZm8oKTtcbiAgICBpZiAoIWNtLnNvbWV0aGluZ1NlbGVjdGVkKCkpIHtcbiAgICAgIHZhciB2aXNpYmxlVG9wTGluZSA9IGNtLmxpbmVBdEhlaWdodChpbmZvLnRvcCwgXCJsb2NhbFwiKSsxO1xuICAgICAgaWYgKGNtLmdldEN1cnNvcigpLmxpbmUgPD0gdmlzaWJsZVRvcExpbmUpXG4gICAgICAgIGNtLmV4ZWNDb21tYW5kKFwiZ29MaW5lRG93blwiKTtcbiAgICB9XG4gICAgY20uc2Nyb2xsVG8obnVsbCwgaW5mby50b3AgKyBjbS5kZWZhdWx0VGV4dEhlaWdodCgpKTtcbiAgfTtcblxuICBjbWRzW21hcFtcIlNoaWZ0LVwiICsgY3RybCArIFwiTFwiXSA9IFwic3BsaXRTZWxlY3Rpb25CeUxpbmVcIl0gPSBmdW5jdGlvbihjbSkge1xuICAgIHZhciByYW5nZXMgPSBjbS5saXN0U2VsZWN0aW9ucygpLCBsaW5lUmFuZ2VzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBmcm9tID0gcmFuZ2VzW2ldLmZyb20oKSwgdG8gPSByYW5nZXNbaV0udG8oKTtcbiAgICAgIGZvciAodmFyIGxpbmUgPSBmcm9tLmxpbmU7IGxpbmUgPD0gdG8ubGluZTsgKytsaW5lKVxuICAgICAgICBpZiAoISh0by5saW5lID4gZnJvbS5saW5lICYmIGxpbmUgPT0gdG8ubGluZSAmJiB0by5jaCA9PSAwKSlcbiAgICAgICAgICBsaW5lUmFuZ2VzLnB1c2goe2FuY2hvcjogbGluZSA9PSBmcm9tLmxpbmUgPyBmcm9tIDogUG9zKGxpbmUsIDApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZDogbGluZSA9PSB0by5saW5lID8gdG8gOiBQb3MobGluZSl9KTtcbiAgICB9XG4gICAgY20uc2V0U2VsZWN0aW9ucyhsaW5lUmFuZ2VzLCAwKTtcbiAgfTtcblxuICBtYXBbXCJTaGlmdC1UYWJcIl0gPSBcImluZGVudExlc3NcIjtcblxuICBjbWRzW21hcFtcIkVzY1wiXSA9IFwic2luZ2xlU2VsZWN0aW9uVG9wXCJdID0gZnVuY3Rpb24oY20pIHtcbiAgICB2YXIgcmFuZ2UgPSBjbS5saXN0U2VsZWN0aW9ucygpWzBdO1xuICAgIGNtLnNldFNlbGVjdGlvbihyYW5nZS5hbmNob3IsIHJhbmdlLmhlYWQsIHtzY3JvbGw6IGZhbHNlfSk7XG4gIH07XG5cbiAgY21kc1ttYXBbY3RybCArIFwiTFwiXSA9IFwic2VsZWN0TGluZVwiXSA9IGZ1bmN0aW9uKGNtKSB7XG4gICAgdmFyIHJhbmdlcyA9IGNtLmxpc3RTZWxlY3Rpb25zKCksIGV4dGVuZGVkID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciByYW5nZSA9IHJhbmdlc1tpXTtcbiAgICAgIGV4dGVuZGVkLnB1c2goe2FuY2hvcjogUG9zKHJhbmdlLmZyb20oKS5saW5lLCAwKSxcbiAgICAgICAgICAgICAgICAgICAgIGhlYWQ6IFBvcyhyYW5nZS50bygpLmxpbmUgKyAxLCAwKX0pO1xuICAgIH1cbiAgICBjbS5zZXRTZWxlY3Rpb25zKGV4dGVuZGVkKTtcbiAgfTtcblxuICBtYXBbXCJTaGlmdC1cIiArIGN0cmwgKyBcIktcIl0gPSBcImRlbGV0ZUxpbmVcIjtcblxuICBmdW5jdGlvbiBpbnNlcnRMaW5lKGNtLCBhYm92ZSkge1xuICAgIGNtLm9wZXJhdGlvbihmdW5jdGlvbigpIHtcbiAgICAgIHZhciBsZW4gPSBjbS5saXN0U2VsZWN0aW9ucygpLmxlbmd0aCwgbmV3U2VsZWN0aW9uID0gW10sIGxhc3QgPSAtMTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIGhlYWQgPSBjbS5saXN0U2VsZWN0aW9ucygpW2ldLmhlYWQ7XG4gICAgICAgIGlmIChoZWFkLmxpbmUgPD0gbGFzdCkgY29udGludWU7XG4gICAgICAgIHZhciBhdCA9IFBvcyhoZWFkLmxpbmUgKyAoYWJvdmUgPyAwIDogMSksIDApO1xuICAgICAgICBjbS5yZXBsYWNlUmFuZ2UoXCJcXG5cIiwgYXQsIG51bGwsIFwiK2luc2VydExpbmVcIik7XG4gICAgICAgIGNtLmluZGVudExpbmUoYXQubGluZSwgbnVsbCwgdHJ1ZSk7XG4gICAgICAgIG5ld1NlbGVjdGlvbi5wdXNoKHtoZWFkOiBhdCwgYW5jaG9yOiBhdH0pO1xuICAgICAgICBsYXN0ID0gaGVhZC5saW5lICsgMTtcbiAgICAgIH1cbiAgICAgIGNtLnNldFNlbGVjdGlvbnMobmV3U2VsZWN0aW9uKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNtZHNbbWFwW2N0cmwgKyBcIkVudGVyXCJdID0gXCJpbnNlcnRMaW5lQWZ0ZXJcIl0gPSBmdW5jdGlvbihjbSkgeyBpbnNlcnRMaW5lKGNtLCBmYWxzZSk7IH07XG5cbiAgY21kc1ttYXBbXCJTaGlmdC1cIiArIGN0cmwgKyBcIkVudGVyXCJdID0gXCJpbnNlcnRMaW5lQmVmb3JlXCJdID0gZnVuY3Rpb24oY20pIHsgaW5zZXJ0TGluZShjbSwgdHJ1ZSk7IH07XG5cbiAgZnVuY3Rpb24gd29yZEF0KGNtLCBwb3MpIHtcbiAgICB2YXIgc3RhcnQgPSBwb3MuY2gsIGVuZCA9IHN0YXJ0LCBsaW5lID0gY20uZ2V0TGluZShwb3MubGluZSk7XG4gICAgd2hpbGUgKHN0YXJ0ICYmIENvZGVNaXJyb3IuaXNXb3JkQ2hhcihsaW5lLmNoYXJBdChzdGFydCAtIDEpKSkgLS1zdGFydDtcbiAgICB3aGlsZSAoZW5kIDwgbGluZS5sZW5ndGggJiYgQ29kZU1pcnJvci5pc1dvcmRDaGFyKGxpbmUuY2hhckF0KGVuZCkpKSArK2VuZDtcbiAgICByZXR1cm4ge2Zyb206IFBvcyhwb3MubGluZSwgc3RhcnQpLCB0bzogUG9zKHBvcy5saW5lLCBlbmQpLCB3b3JkOiBsaW5lLnNsaWNlKHN0YXJ0LCBlbmQpfTtcbiAgfVxuXG4gIGNtZHNbbWFwW2N0cmwgKyBcIkRcIl0gPSBcInNlbGVjdE5leHRPY2N1cnJlbmNlXCJdID0gZnVuY3Rpb24oY20pIHtcbiAgICB2YXIgZnJvbSA9IGNtLmdldEN1cnNvcihcImZyb21cIiksIHRvID0gY20uZ2V0Q3Vyc29yKFwidG9cIik7XG4gICAgdmFyIGZ1bGxXb3JkID0gY20uc3RhdGUuc3VibGltZUZpbmRGdWxsV29yZCA9PSBjbS5kb2Muc2VsO1xuICAgIGlmIChDb2RlTWlycm9yLmNtcFBvcyhmcm9tLCB0bykgPT0gMCkge1xuICAgICAgdmFyIHdvcmQgPSB3b3JkQXQoY20sIGZyb20pO1xuICAgICAgaWYgKCF3b3JkLndvcmQpIHJldHVybjtcbiAgICAgIGNtLnNldFNlbGVjdGlvbih3b3JkLmZyb20sIHdvcmQudG8pO1xuICAgICAgZnVsbFdvcmQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdGV4dCA9IGNtLmdldFJhbmdlKGZyb20sIHRvKTtcbiAgICAgIHZhciBxdWVyeSA9IGZ1bGxXb3JkID8gbmV3IFJlZ0V4cChcIlxcXFxiXCIgKyB0ZXh0ICsgXCJcXFxcYlwiKSA6IHRleHQ7XG4gICAgICB2YXIgY3VyID0gY20uZ2V0U2VhcmNoQ3Vyc29yKHF1ZXJ5LCB0byk7XG4gICAgICBpZiAoY3VyLmZpbmROZXh0KCkpIHtcbiAgICAgICAgY20uYWRkU2VsZWN0aW9uKGN1ci5mcm9tKCksIGN1ci50bygpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1ciA9IGNtLmdldFNlYXJjaEN1cnNvcihxdWVyeSwgUG9zKGNtLmZpcnN0TGluZSgpLCAwKSk7XG4gICAgICAgIGlmIChjdXIuZmluZE5leHQoKSlcbiAgICAgICAgICBjbS5hZGRTZWxlY3Rpb24oY3VyLmZyb20oKSwgY3VyLnRvKCkpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZnVsbFdvcmQpXG4gICAgICBjbS5zdGF0ZS5zdWJsaW1lRmluZEZ1bGxXb3JkID0gY20uZG9jLnNlbDtcbiAgfTtcblxuICB2YXIgbWlycm9yID0gXCIoKXt9W11cIjtcbiAgZnVuY3Rpb24gc2VsZWN0QmV0d2VlbkJyYWNrZXRzKGNtKSB7XG4gICAgdmFyIHBvcyA9IGNtLmdldEN1cnNvcigpLCBvcGVuaW5nID0gY20uc2NhbkZvckJyYWNrZXQocG9zLCAtMSk7XG4gICAgaWYgKCFvcGVuaW5nKSByZXR1cm47XG4gICAgZm9yICg7Oykge1xuICAgICAgdmFyIGNsb3NpbmcgPSBjbS5zY2FuRm9yQnJhY2tldChwb3MsIDEpO1xuICAgICAgaWYgKCFjbG9zaW5nKSByZXR1cm47XG4gICAgICBpZiAoY2xvc2luZy5jaCA9PSBtaXJyb3IuY2hhckF0KG1pcnJvci5pbmRleE9mKG9wZW5pbmcuY2gpICsgMSkpIHtcbiAgICAgICAgY20uc2V0U2VsZWN0aW9uKFBvcyhvcGVuaW5nLnBvcy5saW5lLCBvcGVuaW5nLnBvcy5jaCArIDEpLCBjbG9zaW5nLnBvcywgZmFsc2UpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHBvcyA9IFBvcyhjbG9zaW5nLnBvcy5saW5lLCBjbG9zaW5nLnBvcy5jaCArIDEpO1xuICAgIH1cbiAgfVxuXG4gIGNtZHNbbWFwW1wiU2hpZnQtXCIgKyBjdHJsICsgXCJTcGFjZVwiXSA9IFwic2VsZWN0U2NvcGVcIl0gPSBmdW5jdGlvbihjbSkge1xuICAgIHNlbGVjdEJldHdlZW5CcmFja2V0cyhjbSkgfHwgY20uZXhlY0NvbW1hbmQoXCJzZWxlY3RBbGxcIik7XG4gIH07XG4gIGNtZHNbbWFwW1wiU2hpZnQtXCIgKyBjdHJsICsgXCJNXCJdID0gXCJzZWxlY3RCZXR3ZWVuQnJhY2tldHNcIl0gPSBmdW5jdGlvbihjbSkge1xuICAgIGlmICghc2VsZWN0QmV0d2VlbkJyYWNrZXRzKGNtKSkgcmV0dXJuIENvZGVNaXJyb3IuUGFzcztcbiAgfTtcblxuICBjbWRzW21hcFtjdHJsICsgXCJNXCJdID0gXCJnb1RvQnJhY2tldFwiXSA9IGZ1bmN0aW9uKGNtKSB7XG4gICAgY20uZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICB2YXIgbmV4dCA9IGNtLnNjYW5Gb3JCcmFja2V0KHJhbmdlLmhlYWQsIDEpO1xuICAgICAgaWYgKG5leHQgJiYgQ29kZU1pcnJvci5jbXBQb3MobmV4dC5wb3MsIHJhbmdlLmhlYWQpICE9IDApIHJldHVybiBuZXh0LnBvcztcbiAgICAgIHZhciBwcmV2ID0gY20uc2NhbkZvckJyYWNrZXQocmFuZ2UuaGVhZCwgLTEpO1xuICAgICAgcmV0dXJuIHByZXYgJiYgUG9zKHByZXYucG9zLmxpbmUsIHByZXYucG9zLmNoICsgMSkgfHwgcmFuZ2UuaGVhZDtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgc3dhcExpbmVDb21ibyA9IG1hYyA/IFwiQ21kLUN0cmwtXCIgOiBcIlNoaWZ0LUN0cmwtXCI7XG5cbiAgY21kc1ttYXBbc3dhcExpbmVDb21ibyArIFwiVXBcIl0gPSBcInN3YXBMaW5lVXBcIl0gPSBmdW5jdGlvbihjbSkge1xuICAgIHZhciByYW5nZXMgPSBjbS5saXN0U2VsZWN0aW9ucygpLCBsaW5lc1RvTW92ZSA9IFtdLCBhdCA9IGNtLmZpcnN0TGluZSgpIC0gMSwgbmV3U2VscyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcmFuZ2UgPSByYW5nZXNbaV0sIGZyb20gPSByYW5nZS5mcm9tKCkubGluZSAtIDEsIHRvID0gcmFuZ2UudG8oKS5saW5lO1xuICAgICAgbmV3U2Vscy5wdXNoKHthbmNob3I6IFBvcyhyYW5nZS5hbmNob3IubGluZSAtIDEsIHJhbmdlLmFuY2hvci5jaCksXG4gICAgICAgICAgICAgICAgICAgIGhlYWQ6IFBvcyhyYW5nZS5oZWFkLmxpbmUgLSAxLCByYW5nZS5oZWFkLmNoKX0pO1xuICAgICAgaWYgKHJhbmdlLnRvKCkuY2ggPT0gMCAmJiAhcmFuZ2UuZW1wdHkoKSkgLS10bztcbiAgICAgIGlmIChmcm9tID4gYXQpIGxpbmVzVG9Nb3ZlLnB1c2goZnJvbSwgdG8pO1xuICAgICAgZWxzZSBpZiAobGluZXNUb01vdmUubGVuZ3RoKSBsaW5lc1RvTW92ZVtsaW5lc1RvTW92ZS5sZW5ndGggLSAxXSA9IHRvO1xuICAgICAgYXQgPSB0bztcbiAgICB9XG4gICAgY20ub3BlcmF0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lc1RvTW92ZS5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICB2YXIgZnJvbSA9IGxpbmVzVG9Nb3ZlW2ldLCB0byA9IGxpbmVzVG9Nb3ZlW2kgKyAxXTtcbiAgICAgICAgdmFyIGxpbmUgPSBjbS5nZXRMaW5lKGZyb20pO1xuICAgICAgICBjbS5yZXBsYWNlUmFuZ2UoXCJcIiwgUG9zKGZyb20sIDApLCBQb3MoZnJvbSArIDEsIDApLCBcIitzd2FwTGluZVwiKTtcbiAgICAgICAgaWYgKHRvID4gY20ubGFzdExpbmUoKSlcbiAgICAgICAgICBjbS5yZXBsYWNlUmFuZ2UoXCJcXG5cIiArIGxpbmUsIFBvcyhjbS5sYXN0TGluZSgpKSwgbnVsbCwgXCIrc3dhcExpbmVcIik7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICBjbS5yZXBsYWNlUmFuZ2UobGluZSArIFwiXFxuXCIsIFBvcyh0bywgMCksIG51bGwsIFwiK3N3YXBMaW5lXCIpO1xuICAgICAgfVxuICAgICAgY20uc2V0U2VsZWN0aW9ucyhuZXdTZWxzKTtcbiAgICAgIGNtLnNjcm9sbEludG9WaWV3KCk7XG4gICAgfSk7XG4gIH07XG5cbiAgY21kc1ttYXBbc3dhcExpbmVDb21ibyArIFwiRG93blwiXSA9IFwic3dhcExpbmVEb3duXCJdID0gZnVuY3Rpb24oY20pIHtcbiAgICB2YXIgcmFuZ2VzID0gY20ubGlzdFNlbGVjdGlvbnMoKSwgbGluZXNUb01vdmUgPSBbXSwgYXQgPSBjbS5sYXN0TGluZSgpICsgMTtcbiAgICBmb3IgKHZhciBpID0gcmFuZ2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB2YXIgcmFuZ2UgPSByYW5nZXNbaV0sIGZyb20gPSByYW5nZS50bygpLmxpbmUgKyAxLCB0byA9IHJhbmdlLmZyb20oKS5saW5lO1xuICAgICAgaWYgKHJhbmdlLnRvKCkuY2ggPT0gMCAmJiAhcmFuZ2UuZW1wdHkoKSkgZnJvbS0tO1xuICAgICAgaWYgKGZyb20gPCBhdCkgbGluZXNUb01vdmUucHVzaChmcm9tLCB0byk7XG4gICAgICBlbHNlIGlmIChsaW5lc1RvTW92ZS5sZW5ndGgpIGxpbmVzVG9Nb3ZlW2xpbmVzVG9Nb3ZlLmxlbmd0aCAtIDFdID0gdG87XG4gICAgICBhdCA9IHRvO1xuICAgIH1cbiAgICBjbS5vcGVyYXRpb24oZnVuY3Rpb24oKSB7XG4gICAgICBmb3IgKHZhciBpID0gbGluZXNUb01vdmUubGVuZ3RoIC0gMjsgaSA+PSAwOyBpIC09IDIpIHtcbiAgICAgICAgdmFyIGZyb20gPSBsaW5lc1RvTW92ZVtpXSwgdG8gPSBsaW5lc1RvTW92ZVtpICsgMV07XG4gICAgICAgIHZhciBsaW5lID0gY20uZ2V0TGluZShmcm9tKTtcbiAgICAgICAgaWYgKGZyb20gPT0gY20ubGFzdExpbmUoKSlcbiAgICAgICAgICBjbS5yZXBsYWNlUmFuZ2UoXCJcIiwgUG9zKGZyb20gLSAxKSwgUG9zKGZyb20pLCBcIitzd2FwTGluZVwiKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIGNtLnJlcGxhY2VSYW5nZShcIlwiLCBQb3MoZnJvbSwgMCksIFBvcyhmcm9tICsgMSwgMCksIFwiK3N3YXBMaW5lXCIpO1xuICAgICAgICBjbS5yZXBsYWNlUmFuZ2UobGluZSArIFwiXFxuXCIsIFBvcyh0bywgMCksIG51bGwsIFwiK3N3YXBMaW5lXCIpO1xuICAgICAgfVxuICAgICAgY20uc2Nyb2xsSW50b1ZpZXcoKTtcbiAgICB9KTtcbiAgfTtcblxuICBtYXBbY3RybCArIFwiL1wiXSA9IGZ1bmN0aW9uKGNtKSB7XG4gICAgY20udG9nZ2xlQ29tbWVudCh7IGluZGVudDogdHJ1ZSB9KTtcbiAgfVxuXG4gIGNtZHNbbWFwW2N0cmwgKyBcIkpcIl0gPSBcImpvaW5MaW5lc1wiXSA9IGZ1bmN0aW9uKGNtKSB7XG4gICAgdmFyIHJhbmdlcyA9IGNtLmxpc3RTZWxlY3Rpb25zKCksIGpvaW5lZCA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcmFuZ2UgPSByYW5nZXNbaV0sIGZyb20gPSByYW5nZS5mcm9tKCk7XG4gICAgICB2YXIgc3RhcnQgPSBmcm9tLmxpbmUsIGVuZCA9IHJhbmdlLnRvKCkubGluZTtcbiAgICAgIHdoaWxlIChpIDwgcmFuZ2VzLmxlbmd0aCAtIDEgJiYgcmFuZ2VzW2kgKyAxXS5mcm9tKCkubGluZSA9PSBlbmQpXG4gICAgICAgIGVuZCA9IHJhbmdlc1srK2ldLnRvKCkubGluZTtcbiAgICAgIGpvaW5lZC5wdXNoKHtzdGFydDogc3RhcnQsIGVuZDogZW5kLCBhbmNob3I6ICFyYW5nZS5lbXB0eSgpICYmIGZyb219KTtcbiAgICB9XG4gICAgY20ub3BlcmF0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG9mZnNldCA9IDAsIHJhbmdlcyA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBqb2luZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIG9iaiA9IGpvaW5lZFtpXTtcbiAgICAgICAgdmFyIGFuY2hvciA9IG9iai5hbmNob3IgJiYgUG9zKG9iai5hbmNob3IubGluZSAtIG9mZnNldCwgb2JqLmFuY2hvci5jaCksIGhlYWQ7XG4gICAgICAgIGZvciAodmFyIGxpbmUgPSBvYmouc3RhcnQ7IGxpbmUgPD0gb2JqLmVuZDsgbGluZSsrKSB7XG4gICAgICAgICAgdmFyIGFjdHVhbCA9IGxpbmUgLSBvZmZzZXQ7XG4gICAgICAgICAgaWYgKGxpbmUgPT0gb2JqLmVuZCkgaGVhZCA9IFBvcyhhY3R1YWwsIGNtLmdldExpbmUoYWN0dWFsKS5sZW5ndGggKyAxKTtcbiAgICAgICAgICBpZiAoYWN0dWFsIDwgY20ubGFzdExpbmUoKSkge1xuICAgICAgICAgICAgY20ucmVwbGFjZVJhbmdlKFwiIFwiLCBQb3MoYWN0dWFsKSwgUG9zKGFjdHVhbCArIDEsIC9eXFxzKi8uZXhlYyhjbS5nZXRMaW5lKGFjdHVhbCArIDEpKVswXS5sZW5ndGgpKTtcbiAgICAgICAgICAgICsrb2Zmc2V0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByYW5nZXMucHVzaCh7YW5jaG9yOiBhbmNob3IgfHwgaGVhZCwgaGVhZDogaGVhZH0pO1xuICAgICAgfVxuICAgICAgY20uc2V0U2VsZWN0aW9ucyhyYW5nZXMsIDApO1xuICAgIH0pO1xuICB9O1xuXG4gIGNtZHNbbWFwW1wiU2hpZnQtXCIgKyBjdHJsICsgXCJEXCJdID0gXCJkdXBsaWNhdGVMaW5lXCJdID0gZnVuY3Rpb24oY20pIHtcbiAgICBjbS5vcGVyYXRpb24oZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmFuZ2VDb3VudCA9IGNtLmxpc3RTZWxlY3Rpb25zKCkubGVuZ3RoO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZUNvdW50OyBpKyspIHtcbiAgICAgICAgdmFyIHJhbmdlID0gY20ubGlzdFNlbGVjdGlvbnMoKVtpXTtcbiAgICAgICAgaWYgKHJhbmdlLmVtcHR5KCkpXG4gICAgICAgICAgY20ucmVwbGFjZVJhbmdlKGNtLmdldExpbmUocmFuZ2UuaGVhZC5saW5lKSArIFwiXFxuXCIsIFBvcyhyYW5nZS5oZWFkLmxpbmUsIDApKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIGNtLnJlcGxhY2VSYW5nZShjbS5nZXRSYW5nZShyYW5nZS5mcm9tKCksIHJhbmdlLnRvKCkpLCByYW5nZS5mcm9tKCkpO1xuICAgICAgfVxuICAgICAgY20uc2Nyb2xsSW50b1ZpZXcoKTtcbiAgICB9KTtcbiAgfTtcblxuICBtYXBbY3RybCArIFwiVFwiXSA9IFwidHJhbnNwb3NlQ2hhcnNcIjtcblxuICBmdW5jdGlvbiBzb3J0TGluZXMoY20sIGNhc2VTZW5zaXRpdmUpIHtcbiAgICB2YXIgcmFuZ2VzID0gY20ubGlzdFNlbGVjdGlvbnMoKSwgdG9Tb3J0ID0gW10sIHNlbGVjdGVkO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcmFuZ2UgPSByYW5nZXNbaV07XG4gICAgICBpZiAocmFuZ2UuZW1wdHkoKSkgY29udGludWU7XG4gICAgICB2YXIgZnJvbSA9IHJhbmdlLmZyb20oKS5saW5lLCB0byA9IHJhbmdlLnRvKCkubGluZTtcbiAgICAgIHdoaWxlIChpIDwgcmFuZ2VzLmxlbmd0aCAtIDEgJiYgcmFuZ2VzW2kgKyAxXS5mcm9tKCkubGluZSA9PSB0bylcbiAgICAgICAgdG8gPSByYW5nZVsrK2ldLnRvKCkubGluZTtcbiAgICAgIHRvU29ydC5wdXNoKGZyb20sIHRvKTtcbiAgICB9XG4gICAgaWYgKHRvU29ydC5sZW5ndGgpIHNlbGVjdGVkID0gdHJ1ZTtcbiAgICBlbHNlIHRvU29ydC5wdXNoKGNtLmZpcnN0TGluZSgpLCBjbS5sYXN0TGluZSgpKTtcblxuICAgIGNtLm9wZXJhdGlvbihmdW5jdGlvbigpIHtcbiAgICAgIHZhciByYW5nZXMgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG9Tb3J0Lmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgIHZhciBmcm9tID0gdG9Tb3J0W2ldLCB0byA9IHRvU29ydFtpICsgMV07XG4gICAgICAgIHZhciBzdGFydCA9IFBvcyhmcm9tLCAwKSwgZW5kID0gUG9zKHRvKTtcbiAgICAgICAgdmFyIGxpbmVzID0gY20uZ2V0UmFuZ2Uoc3RhcnQsIGVuZCwgZmFsc2UpO1xuICAgICAgICBpZiAoY2FzZVNlbnNpdGl2ZSlcbiAgICAgICAgICBsaW5lcy5zb3J0KCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICBsaW5lcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgICAgIHZhciBhdSA9IGEudG9VcHBlckNhc2UoKSwgYnUgPSBiLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICBpZiAoYXUgIT0gYnUpIHsgYSA9IGF1OyBiID0gYnU7IH1cbiAgICAgICAgICAgIHJldHVybiBhIDwgYiA/IC0xIDogYSA9PSBiID8gMCA6IDE7XG4gICAgICAgICAgfSk7XG4gICAgICAgIGNtLnJlcGxhY2VSYW5nZShsaW5lcywgc3RhcnQsIGVuZCk7XG4gICAgICAgIGlmIChzZWxlY3RlZCkgcmFuZ2VzLnB1c2goe2FuY2hvcjogc3RhcnQsIGhlYWQ6IGVuZH0pO1xuICAgICAgfVxuICAgICAgaWYgKHNlbGVjdGVkKSBjbS5zZXRTZWxlY3Rpb25zKHJhbmdlcywgMCk7XG4gICAgfSk7XG4gIH1cblxuICBjbWRzW21hcFtcIkY5XCJdID0gXCJzb3J0TGluZXNcIl0gPSBmdW5jdGlvbihjbSkgeyBzb3J0TGluZXMoY20sIHRydWUpOyB9O1xuICBjbWRzW21hcFtjdHJsICsgXCJGOVwiXSA9IFwic29ydExpbmVzSW5zZW5zaXRpdmVcIl0gPSBmdW5jdGlvbihjbSkgeyBzb3J0TGluZXMoY20sIGZhbHNlKTsgfTtcblxuICBjbWRzW21hcFtcIkYyXCJdID0gXCJuZXh0Qm9va21hcmtcIl0gPSBmdW5jdGlvbihjbSkge1xuICAgIHZhciBtYXJrcyA9IGNtLnN0YXRlLnN1YmxpbWVCb29rbWFya3M7XG4gICAgaWYgKG1hcmtzKSB3aGlsZSAobWFya3MubGVuZ3RoKSB7XG4gICAgICB2YXIgY3VycmVudCA9IG1hcmtzLnNoaWZ0KCk7XG4gICAgICB2YXIgZm91bmQgPSBjdXJyZW50LmZpbmQoKTtcbiAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICBtYXJrcy5wdXNoKGN1cnJlbnQpO1xuICAgICAgICByZXR1cm4gY20uc2V0U2VsZWN0aW9uKGZvdW5kLmZyb20sIGZvdW5kLnRvKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY21kc1ttYXBbXCJTaGlmdC1GMlwiXSA9IFwicHJldkJvb2ttYXJrXCJdID0gZnVuY3Rpb24oY20pIHtcbiAgICB2YXIgbWFya3MgPSBjbS5zdGF0ZS5zdWJsaW1lQm9va21hcmtzO1xuICAgIGlmIChtYXJrcykgd2hpbGUgKG1hcmtzLmxlbmd0aCkge1xuICAgICAgbWFya3MudW5zaGlmdChtYXJrcy5wb3AoKSk7XG4gICAgICB2YXIgZm91bmQgPSBtYXJrc1ttYXJrcy5sZW5ndGggLSAxXS5maW5kKCk7XG4gICAgICBpZiAoIWZvdW5kKVxuICAgICAgICBtYXJrcy5wb3AoKTtcbiAgICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIGNtLnNldFNlbGVjdGlvbihmb3VuZC5mcm9tLCBmb3VuZC50byk7XG4gICAgfVxuICB9O1xuXG4gIGNtZHNbbWFwW2N0cmwgKyBcIkYyXCJdID0gXCJ0b2dnbGVCb29rbWFya1wiXSA9IGZ1bmN0aW9uKGNtKSB7XG4gICAgdmFyIHJhbmdlcyA9IGNtLmxpc3RTZWxlY3Rpb25zKCk7XG4gICAgdmFyIG1hcmtzID0gY20uc3RhdGUuc3VibGltZUJvb2ttYXJrcyB8fCAoY20uc3RhdGUuc3VibGltZUJvb2ttYXJrcyA9IFtdKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGZyb20gPSByYW5nZXNbaV0uZnJvbSgpLCB0byA9IHJhbmdlc1tpXS50bygpO1xuICAgICAgdmFyIGZvdW5kID0gY20uZmluZE1hcmtzKGZyb20sIHRvKTtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZm91bmQubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKGZvdW5kW2pdLnN1YmxpbWVCb29rbWFyaykge1xuICAgICAgICAgIGZvdW5kW2pdLmNsZWFyKCk7XG4gICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBtYXJrcy5sZW5ndGg7IGsrKylcbiAgICAgICAgICAgIGlmIChtYXJrc1trXSA9PSBmb3VuZFtqXSlcbiAgICAgICAgICAgICAgbWFya3Muc3BsaWNlKGstLSwgMSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChqID09IGZvdW5kLmxlbmd0aClcbiAgICAgICAgbWFya3MucHVzaChjbS5tYXJrVGV4dChmcm9tLCB0bywge3N1YmxpbWVCb29rbWFyazogdHJ1ZSwgY2xlYXJXaGVuRW1wdHk6IGZhbHNlfSkpO1xuICAgIH1cbiAgfTtcblxuICBjbWRzW21hcFtcIlNoaWZ0LVwiICsgY3RybCArIFwiRjJcIl0gPSBcImNsZWFyQm9va21hcmtzXCJdID0gZnVuY3Rpb24oY20pIHtcbiAgICB2YXIgbWFya3MgPSBjbS5zdGF0ZS5zdWJsaW1lQm9va21hcmtzO1xuICAgIGlmIChtYXJrcykgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrcy5sZW5ndGg7IGkrKykgbWFya3NbaV0uY2xlYXIoKTtcbiAgICBtYXJrcy5sZW5ndGggPSAwO1xuICB9O1xuXG4gIGNtZHNbbWFwW1wiQWx0LUYyXCJdID0gXCJzZWxlY3RCb29rbWFya3NcIl0gPSBmdW5jdGlvbihjbSkge1xuICAgIHZhciBtYXJrcyA9IGNtLnN0YXRlLnN1YmxpbWVCb29rbWFya3MsIHJhbmdlcyA9IFtdO1xuICAgIGlmIChtYXJrcykgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGZvdW5kID0gbWFya3NbaV0uZmluZCgpO1xuICAgICAgaWYgKCFmb3VuZClcbiAgICAgICAgbWFya3Muc3BsaWNlKGktLSwgMCk7XG4gICAgICBlbHNlXG4gICAgICAgIHJhbmdlcy5wdXNoKHthbmNob3I6IGZvdW5kLmZyb20sIGhlYWQ6IGZvdW5kLnRvfSk7XG4gICAgfVxuICAgIGlmIChyYW5nZXMubGVuZ3RoKVxuICAgICAgY20uc2V0U2VsZWN0aW9ucyhyYW5nZXMsIDApO1xuICB9O1xuXG4gIG1hcFtcIkFsdC1RXCJdID0gXCJ3cmFwTGluZXNcIjtcblxuICB2YXIgY0sgPSBjdHJsICsgXCJLIFwiO1xuXG4gIGZ1bmN0aW9uIG1vZGlmeVdvcmRPclNlbGVjdGlvbihjbSwgbW9kKSB7XG4gICAgY20ub3BlcmF0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJhbmdlcyA9IGNtLmxpc3RTZWxlY3Rpb25zKCksIGluZGljZXMgPSBbXSwgcmVwbGFjZW1lbnRzID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcmFuZ2UgPSByYW5nZXNbaV07XG4gICAgICAgIGlmIChyYW5nZS5lbXB0eSgpKSB7IGluZGljZXMucHVzaChpKTsgcmVwbGFjZW1lbnRzLnB1c2goXCJcIik7IH1cbiAgICAgICAgZWxzZSByZXBsYWNlbWVudHMucHVzaChtb2QoY20uZ2V0UmFuZ2UocmFuZ2UuZnJvbSgpLCByYW5nZS50bygpKSkpO1xuICAgICAgfVxuICAgICAgY20ucmVwbGFjZVNlbGVjdGlvbnMocmVwbGFjZW1lbnRzLCBcImFyb3VuZFwiLCBcImNhc2VcIik7XG4gICAgICBmb3IgKHZhciBpID0gaW5kaWNlcy5sZW5ndGggLSAxLCBhdDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgdmFyIHJhbmdlID0gcmFuZ2VzW2luZGljZXNbaV1dO1xuICAgICAgICBpZiAoYXQgJiYgQ29kZU1pcnJvci5jbXBQb3MocmFuZ2UuaGVhZCwgYXQpID4gMCkgY29udGludWU7XG4gICAgICAgIHZhciB3b3JkID0gd29yZEF0KGNtLCByYW5nZS5oZWFkKTtcbiAgICAgICAgYXQgPSB3b3JkLmZyb207XG4gICAgICAgIGNtLnJlcGxhY2VSYW5nZShtb2Qod29yZC53b3JkKSwgd29yZC5mcm9tLCB3b3JkLnRvKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIG1hcFtjSyArIGN0cmwgKyBcIkJhY2tzcGFjZVwiXSA9IFwiZGVsTGluZUxlZnRcIjtcblxuICBjbWRzW21hcFtcIkJhY2tzcGFjZVwiXSA9IFwic21hcnRCYWNrc3BhY2VcIl0gPSBmdW5jdGlvbihjbSkge1xuICAgIGlmIChjbS5zb21ldGhpbmdTZWxlY3RlZCgpKSByZXR1cm4gQ29kZU1pcnJvci5QYXNzO1xuXG4gICAgdmFyIGN1cnNvciA9IGNtLmdldEN1cnNvcigpO1xuICAgIHZhciB0b1N0YXJ0T2ZMaW5lID0gY20uZ2V0UmFuZ2Uoe2xpbmU6IGN1cnNvci5saW5lLCBjaDogMH0sIGN1cnNvcik7XG4gICAgdmFyIGNvbHVtbiA9IENvZGVNaXJyb3IuY291bnRDb2x1bW4odG9TdGFydE9mTGluZSwgbnVsbCwgY20uZ2V0T3B0aW9uKFwidGFiU2l6ZVwiKSk7XG4gICAgdmFyIGluZGVudFVuaXQgPSBjbS5nZXRPcHRpb24oXCJpbmRlbnRVbml0XCIpO1xuXG4gICAgaWYgKHRvU3RhcnRPZkxpbmUgJiYgIS9cXFMvLnRlc3QodG9TdGFydE9mTGluZSkgJiYgY29sdW1uICUgaW5kZW50VW5pdCA9PSAwKSB7XG4gICAgICB2YXIgcHJldkluZGVudCA9IG5ldyBQb3MoY3Vyc29yLmxpbmUsXG4gICAgICAgIENvZGVNaXJyb3IuZmluZENvbHVtbih0b1N0YXJ0T2ZMaW5lLCBjb2x1bW4gLSBpbmRlbnRVbml0LCBpbmRlbnRVbml0KSk7XG5cbiAgICAgIC8vIElmIG5vIHNtYXJ0IGRlbGV0ZSBpcyBoYXBwZW5pbmcgKGR1ZSB0byB0YWIgc2l6aW5nKSBqdXN0IGRvIGEgcmVndWxhciBkZWxldGVcbiAgICAgIGlmIChwcmV2SW5kZW50LmNoID09IGN1cnNvci5jaCkgcmV0dXJuIENvZGVNaXJyb3IuUGFzcztcblxuICAgICAgcmV0dXJuIGNtLnJlcGxhY2VSYW5nZShcIlwiLCBwcmV2SW5kZW50LCBjdXJzb3IsIFwiK2RlbGV0ZVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIENvZGVNaXJyb3IuUGFzcztcbiAgICB9XG4gIH07XG5cbiAgY21kc1ttYXBbY0sgKyBjdHJsICsgXCJLXCJdID0gXCJkZWxMaW5lUmlnaHRcIl0gPSBmdW5jdGlvbihjbSkge1xuICAgIGNtLm9wZXJhdGlvbihmdW5jdGlvbigpIHtcbiAgICAgIHZhciByYW5nZXMgPSBjbS5saXN0U2VsZWN0aW9ucygpO1xuICAgICAgZm9yICh2YXIgaSA9IHJhbmdlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcbiAgICAgICAgY20ucmVwbGFjZVJhbmdlKFwiXCIsIHJhbmdlc1tpXS5hbmNob3IsIFBvcyhyYW5nZXNbaV0udG8oKS5saW5lKSwgXCIrZGVsZXRlXCIpO1xuICAgICAgY20uc2Nyb2xsSW50b1ZpZXcoKTtcbiAgICB9KTtcbiAgfTtcblxuICBjbWRzW21hcFtjSyArIGN0cmwgKyBcIlVcIl0gPSBcInVwY2FzZUF0Q3Vyc29yXCJdID0gZnVuY3Rpb24oY20pIHtcbiAgICBtb2RpZnlXb3JkT3JTZWxlY3Rpb24oY20sIGZ1bmN0aW9uKHN0cikgeyByZXR1cm4gc3RyLnRvVXBwZXJDYXNlKCk7IH0pO1xuICB9O1xuICBjbWRzW21hcFtjSyArIGN0cmwgKyBcIkxcIl0gPSBcImRvd25jYXNlQXRDdXJzb3JcIl0gPSBmdW5jdGlvbihjbSkge1xuICAgIG1vZGlmeVdvcmRPclNlbGVjdGlvbihjbSwgZnVuY3Rpb24oc3RyKSB7IHJldHVybiBzdHIudG9Mb3dlckNhc2UoKTsgfSk7XG4gIH07XG5cbiAgY21kc1ttYXBbY0sgKyBjdHJsICsgXCJTcGFjZVwiXSA9IFwic2V0U3VibGltZU1hcmtcIl0gPSBmdW5jdGlvbihjbSkge1xuICAgIGlmIChjbS5zdGF0ZS5zdWJsaW1lTWFyaykgY20uc3RhdGUuc3VibGltZU1hcmsuY2xlYXIoKTtcbiAgICBjbS5zdGF0ZS5zdWJsaW1lTWFyayA9IGNtLnNldEJvb2ttYXJrKGNtLmdldEN1cnNvcigpKTtcbiAgfTtcbiAgY21kc1ttYXBbY0sgKyBjdHJsICsgXCJBXCJdID0gXCJzZWxlY3RUb1N1YmxpbWVNYXJrXCJdID0gZnVuY3Rpb24oY20pIHtcbiAgICB2YXIgZm91bmQgPSBjbS5zdGF0ZS5zdWJsaW1lTWFyayAmJiBjbS5zdGF0ZS5zdWJsaW1lTWFyay5maW5kKCk7XG4gICAgaWYgKGZvdW5kKSBjbS5zZXRTZWxlY3Rpb24oY20uZ2V0Q3Vyc29yKCksIGZvdW5kKTtcbiAgfTtcbiAgY21kc1ttYXBbY0sgKyBjdHJsICsgXCJXXCJdID0gXCJkZWxldGVUb1N1YmxpbWVNYXJrXCJdID0gZnVuY3Rpb24oY20pIHtcbiAgICB2YXIgZm91bmQgPSBjbS5zdGF0ZS5zdWJsaW1lTWFyayAmJiBjbS5zdGF0ZS5zdWJsaW1lTWFyay5maW5kKCk7XG4gICAgaWYgKGZvdW5kKSB7XG4gICAgICB2YXIgZnJvbSA9IGNtLmdldEN1cnNvcigpLCB0byA9IGZvdW5kO1xuICAgICAgaWYgKENvZGVNaXJyb3IuY21wUG9zKGZyb20sIHRvKSA+IDApIHsgdmFyIHRtcCA9IHRvOyB0byA9IGZyb207IGZyb20gPSB0bXA7IH1cbiAgICAgIGNtLnN0YXRlLnN1YmxpbWVLaWxsZWQgPSBjbS5nZXRSYW5nZShmcm9tLCB0byk7XG4gICAgICBjbS5yZXBsYWNlUmFuZ2UoXCJcIiwgZnJvbSwgdG8pO1xuICAgIH1cbiAgfTtcbiAgY21kc1ttYXBbY0sgKyBjdHJsICsgXCJYXCJdID0gXCJzd2FwV2l0aFN1YmxpbWVNYXJrXCJdID0gZnVuY3Rpb24oY20pIHtcbiAgICB2YXIgZm91bmQgPSBjbS5zdGF0ZS5zdWJsaW1lTWFyayAmJiBjbS5zdGF0ZS5zdWJsaW1lTWFyay5maW5kKCk7XG4gICAgaWYgKGZvdW5kKSB7XG4gICAgICBjbS5zdGF0ZS5zdWJsaW1lTWFyay5jbGVhcigpO1xuICAgICAgY20uc3RhdGUuc3VibGltZU1hcmsgPSBjbS5zZXRCb29rbWFyayhjbS5nZXRDdXJzb3IoKSk7XG4gICAgICBjbS5zZXRDdXJzb3IoZm91bmQpO1xuICAgIH1cbiAgfTtcbiAgY21kc1ttYXBbY0sgKyBjdHJsICsgXCJZXCJdID0gXCJzdWJsaW1lWWFua1wiXSA9IGZ1bmN0aW9uKGNtKSB7XG4gICAgaWYgKGNtLnN0YXRlLnN1YmxpbWVLaWxsZWQgIT0gbnVsbClcbiAgICAgIGNtLnJlcGxhY2VTZWxlY3Rpb24oY20uc3RhdGUuc3VibGltZUtpbGxlZCwgbnVsbCwgXCJwYXN0ZVwiKTtcbiAgfTtcblxuICBtYXBbY0sgKyBjdHJsICsgXCJHXCJdID0gXCJjbGVhckJvb2ttYXJrc1wiO1xuICBjbWRzW21hcFtjSyArIGN0cmwgKyBcIkNcIl0gPSBcInNob3dJbkNlbnRlclwiXSA9IGZ1bmN0aW9uKGNtKSB7XG4gICAgdmFyIHBvcyA9IGNtLmN1cnNvckNvb3JkcyhudWxsLCBcImxvY2FsXCIpO1xuICAgIGNtLnNjcm9sbFRvKG51bGwsIChwb3MudG9wICsgcG9zLmJvdHRvbSkgLyAyIC0gY20uZ2V0U2Nyb2xsSW5mbygpLmNsaWVudEhlaWdodCAvIDIpO1xuICB9O1xuXG4gIGNtZHNbbWFwW1wiU2hpZnQtQWx0LVVwXCJdID0gXCJzZWxlY3RMaW5lc1Vwd2FyZFwiXSA9IGZ1bmN0aW9uKGNtKSB7XG4gICAgY20ub3BlcmF0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJhbmdlcyA9IGNtLmxpc3RTZWxlY3Rpb25zKCk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcmFuZ2UgPSByYW5nZXNbaV07XG4gICAgICAgIGlmIChyYW5nZS5oZWFkLmxpbmUgPiBjbS5maXJzdExpbmUoKSlcbiAgICAgICAgICBjbS5hZGRTZWxlY3Rpb24oUG9zKHJhbmdlLmhlYWQubGluZSAtIDEsIHJhbmdlLmhlYWQuY2gpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbiAgY21kc1ttYXBbXCJTaGlmdC1BbHQtRG93blwiXSA9IFwic2VsZWN0TGluZXNEb3dud2FyZFwiXSA9IGZ1bmN0aW9uKGNtKSB7XG4gICAgY20ub3BlcmF0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJhbmdlcyA9IGNtLmxpc3RTZWxlY3Rpb25zKCk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcmFuZ2UgPSByYW5nZXNbaV07XG4gICAgICAgIGlmIChyYW5nZS5oZWFkLmxpbmUgPCBjbS5sYXN0TGluZSgpKVxuICAgICAgICAgIGNtLmFkZFNlbGVjdGlvbihQb3MocmFuZ2UuaGVhZC5saW5lICsgMSwgcmFuZ2UuaGVhZC5jaCkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGdldFRhcmdldChjbSkge1xuICAgIHZhciBmcm9tID0gY20uZ2V0Q3Vyc29yKFwiZnJvbVwiKSwgdG8gPSBjbS5nZXRDdXJzb3IoXCJ0b1wiKTtcbiAgICBpZiAoQ29kZU1pcnJvci5jbXBQb3MoZnJvbSwgdG8pID09IDApIHtcbiAgICAgIHZhciB3b3JkID0gd29yZEF0KGNtLCBmcm9tKTtcbiAgICAgIGlmICghd29yZC53b3JkKSByZXR1cm47XG4gICAgICBmcm9tID0gd29yZC5mcm9tO1xuICAgICAgdG8gPSB3b3JkLnRvO1xuICAgIH1cbiAgICByZXR1cm4ge2Zyb206IGZyb20sIHRvOiB0bywgcXVlcnk6IGNtLmdldFJhbmdlKGZyb20sIHRvKSwgd29yZDogd29yZH07XG4gIH1cblxuICBmdW5jdGlvbiBmaW5kQW5kR29UbyhjbSwgZm9yd2FyZCkge1xuICAgIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQoY20pO1xuICAgIGlmICghdGFyZ2V0KSByZXR1cm47XG4gICAgdmFyIHF1ZXJ5ID0gdGFyZ2V0LnF1ZXJ5O1xuICAgIHZhciBjdXIgPSBjbS5nZXRTZWFyY2hDdXJzb3IocXVlcnksIGZvcndhcmQgPyB0YXJnZXQudG8gOiB0YXJnZXQuZnJvbSk7XG5cbiAgICBpZiAoZm9yd2FyZCA/IGN1ci5maW5kTmV4dCgpIDogY3VyLmZpbmRQcmV2aW91cygpKSB7XG4gICAgICBjbS5zZXRTZWxlY3Rpb24oY3VyLmZyb20oKSwgY3VyLnRvKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXIgPSBjbS5nZXRTZWFyY2hDdXJzb3IocXVlcnksIGZvcndhcmQgPyBQb3MoY20uZmlyc3RMaW5lKCksIDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBjbS5jbGlwUG9zKFBvcyhjbS5sYXN0TGluZSgpKSkpO1xuICAgICAgaWYgKGZvcndhcmQgPyBjdXIuZmluZE5leHQoKSA6IGN1ci5maW5kUHJldmlvdXMoKSlcbiAgICAgICAgY20uc2V0U2VsZWN0aW9uKGN1ci5mcm9tKCksIGN1ci50bygpKTtcbiAgICAgIGVsc2UgaWYgKHRhcmdldC53b3JkKVxuICAgICAgICBjbS5zZXRTZWxlY3Rpb24odGFyZ2V0LmZyb20sIHRhcmdldC50byk7XG4gICAgfVxuICB9O1xuICBjbWRzW21hcFtjdHJsICsgXCJGM1wiXSA9IFwiZmluZFVuZGVyXCJdID0gZnVuY3Rpb24oY20pIHsgZmluZEFuZEdvVG8oY20sIHRydWUpOyB9O1xuICBjbWRzW21hcFtcIlNoaWZ0LVwiICsgY3RybCArIFwiRjNcIl0gPSBcImZpbmRVbmRlclByZXZpb3VzXCJdID0gZnVuY3Rpb24oY20pIHsgZmluZEFuZEdvVG8oY20sZmFsc2UpOyB9O1xuICBjbWRzW21hcFtcIkFsdC1GM1wiXSA9IFwiZmluZEFsbFVuZGVyXCJdID0gZnVuY3Rpb24oY20pIHtcbiAgICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KGNtKTtcbiAgICBpZiAoIXRhcmdldCkgcmV0dXJuO1xuICAgIHZhciBjdXIgPSBjbS5nZXRTZWFyY2hDdXJzb3IodGFyZ2V0LnF1ZXJ5KTtcbiAgICB2YXIgbWF0Y2hlcyA9IFtdO1xuICAgIHZhciBwcmltYXJ5SW5kZXggPSAtMTtcbiAgICB3aGlsZSAoY3VyLmZpbmROZXh0KCkpIHtcbiAgICAgIG1hdGNoZXMucHVzaCh7YW5jaG9yOiBjdXIuZnJvbSgpLCBoZWFkOiBjdXIudG8oKX0pO1xuICAgICAgaWYgKGN1ci5mcm9tKCkubGluZSA8PSB0YXJnZXQuZnJvbS5saW5lICYmIGN1ci5mcm9tKCkuY2ggPD0gdGFyZ2V0LmZyb20uY2gpXG4gICAgICAgIHByaW1hcnlJbmRleCsrO1xuICAgIH1cbiAgICBjbS5zZXRTZWxlY3Rpb25zKG1hdGNoZXMsIHByaW1hcnlJbmRleCk7XG4gIH07XG5cbiAgbWFwW1wiU2hpZnQtXCIgKyBjdHJsICsgXCJbXCJdID0gXCJmb2xkXCI7XG4gIG1hcFtcIlNoaWZ0LVwiICsgY3RybCArIFwiXVwiXSA9IFwidW5mb2xkXCI7XG4gIG1hcFtjSyArIGN0cmwgKyBcIjBcIl0gPSBtYXBbY0sgKyBjdHJsICsgXCJqXCJdID0gXCJ1bmZvbGRBbGxcIjtcblxuICBtYXBbY3RybCArIFwiSVwiXSA9IFwiZmluZEluY3JlbWVudGFsXCI7XG4gIG1hcFtcIlNoaWZ0LVwiICsgY3RybCArIFwiSVwiXSA9IFwiZmluZEluY3JlbWVudGFsUmV2ZXJzZVwiO1xuICBtYXBbY3RybCArIFwiSFwiXSA9IFwicmVwbGFjZVwiO1xuICBtYXBbXCJGM1wiXSA9IFwiZmluZE5leHRcIjtcbiAgbWFwW1wiU2hpZnQtRjNcIl0gPSBcImZpbmRQcmV2XCI7XG5cbiAgQ29kZU1pcnJvci5ub3JtYWxpemVLZXlNYXAobWFwKTtcbn0pO1xuIiwiLy8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhlcnNcbi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwOi8vY29kZW1pcnJvci5uZXQvTElDRU5TRVxuXG4vLyBUaGlzIGlzIENvZGVNaXJyb3IgKGh0dHA6Ly9jb2RlbWlycm9yLm5ldCksIGEgY29kZSBlZGl0b3Jcbi8vIGltcGxlbWVudGVkIGluIEphdmFTY3JpcHQgb24gdG9wIG9mIHRoZSBicm93c2VyJ3MgRE9NLlxuLy9cbi8vIFlvdSBjYW4gZmluZCBzb21lIHRlY2huaWNhbCBiYWNrZ3JvdW5kIGZvciBzb21lIG9mIHRoZSBjb2RlIGJlbG93XG4vLyBhdCBodHRwOi8vbWFyaWpuaGF2ZXJiZWtlLm5sL2Jsb2cvI2NtLWludGVybmFscyAuXG5cbihmdW5jdGlvbihtb2QpIHtcbiAgaWYgKHR5cGVvZiBleHBvcnRzID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSA9PSBcIm9iamVjdFwiKSAvLyBDb21tb25KU1xuICAgIG1vZHVsZS5leHBvcnRzID0gbW9kKCk7XG4gIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIC8vIEFNRFxuICAgIHJldHVybiBkZWZpbmUoW10sIG1vZCk7XG4gIGVsc2UgLy8gUGxhaW4gYnJvd3NlciBlbnZcbiAgICB0aGlzLkNvZGVNaXJyb3IgPSBtb2QoKTtcbn0pKGZ1bmN0aW9uKCkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICAvLyBCUk9XU0VSIFNOSUZGSU5HXG5cbiAgLy8gS2x1ZGdlcyBmb3IgYnVncyBhbmQgYmVoYXZpb3IgZGlmZmVyZW5jZXMgdGhhdCBjYW4ndCBiZSBmZWF0dXJlXG4gIC8vIGRldGVjdGVkIGFyZSBlbmFibGVkIGJhc2VkIG9uIHVzZXJBZ2VudCBldGMgc25pZmZpbmcuXG4gIHZhciB1c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuICB2YXIgcGxhdGZvcm0gPSBuYXZpZ2F0b3IucGxhdGZvcm07XG5cbiAgdmFyIGdlY2tvID0gL2dlY2tvXFwvXFxkL2kudGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgaWVfdXB0bzEwID0gL01TSUUgXFxkLy50ZXN0KHVzZXJBZ2VudCk7XG4gIHZhciBpZV8xMXVwID0gL1RyaWRlbnRcXC8oPzpbNy05XXxcXGR7Mix9KVxcLi4qcnY6KFxcZCspLy5leGVjKHVzZXJBZ2VudCk7XG4gIHZhciBpZSA9IGllX3VwdG8xMCB8fCBpZV8xMXVwO1xuICB2YXIgaWVfdmVyc2lvbiA9IGllICYmIChpZV91cHRvMTAgPyBkb2N1bWVudC5kb2N1bWVudE1vZGUgfHwgNiA6IGllXzExdXBbMV0pO1xuICB2YXIgd2Via2l0ID0gL1dlYktpdFxcLy8udGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgcXR3ZWJraXQgPSB3ZWJraXQgJiYgL1F0XFwvXFxkK1xcLlxcZCsvLnRlc3QodXNlckFnZW50KTtcbiAgdmFyIGNocm9tZSA9IC9DaHJvbWVcXC8vLnRlc3QodXNlckFnZW50KTtcbiAgdmFyIHByZXN0byA9IC9PcGVyYVxcLy8udGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgc2FmYXJpID0gL0FwcGxlIENvbXB1dGVyLy50ZXN0KG5hdmlnYXRvci52ZW5kb3IpO1xuICB2YXIgbWFjX2dlTW91bnRhaW5MaW9uID0gL01hYyBPUyBYIDFcXGRcXEQoWzgtOV18XFxkXFxkKVxcRC8udGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgcGhhbnRvbSA9IC9QaGFudG9tSlMvLnRlc3QodXNlckFnZW50KTtcblxuICB2YXIgaW9zID0gL0FwcGxlV2ViS2l0Ly50ZXN0KHVzZXJBZ2VudCkgJiYgL01vYmlsZVxcL1xcdysvLnRlc3QodXNlckFnZW50KTtcbiAgLy8gVGhpcyBpcyB3b2VmdWxseSBpbmNvbXBsZXRlLiBTdWdnZXN0aW9ucyBmb3IgYWx0ZXJuYXRpdmUgbWV0aG9kcyB3ZWxjb21lLlxuICB2YXIgbW9iaWxlID0gaW9zIHx8IC9BbmRyb2lkfHdlYk9TfEJsYWNrQmVycnl8T3BlcmEgTWluaXxPcGVyYSBNb2JpfElFTW9iaWxlL2kudGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgbWFjID0gaW9zIHx8IC9NYWMvLnRlc3QocGxhdGZvcm0pO1xuICB2YXIgd2luZG93cyA9IC93aW4vaS50ZXN0KHBsYXRmb3JtKTtcblxuICB2YXIgcHJlc3RvX3ZlcnNpb24gPSBwcmVzdG8gJiYgdXNlckFnZW50Lm1hdGNoKC9WZXJzaW9uXFwvKFxcZCpcXC5cXGQqKS8pO1xuICBpZiAocHJlc3RvX3ZlcnNpb24pIHByZXN0b192ZXJzaW9uID0gTnVtYmVyKHByZXN0b192ZXJzaW9uWzFdKTtcbiAgaWYgKHByZXN0b192ZXJzaW9uICYmIHByZXN0b192ZXJzaW9uID49IDE1KSB7IHByZXN0byA9IGZhbHNlOyB3ZWJraXQgPSB0cnVlOyB9XG4gIC8vIFNvbWUgYnJvd3NlcnMgdXNlIHRoZSB3cm9uZyBldmVudCBwcm9wZXJ0aWVzIHRvIHNpZ25hbCBjbWQvY3RybCBvbiBPUyBYXG4gIHZhciBmbGlwQ3RybENtZCA9IG1hYyAmJiAocXR3ZWJraXQgfHwgcHJlc3RvICYmIChwcmVzdG9fdmVyc2lvbiA9PSBudWxsIHx8IHByZXN0b192ZXJzaW9uIDwgMTIuMTEpKTtcbiAgdmFyIGNhcHR1cmVSaWdodENsaWNrID0gZ2Vja28gfHwgKGllICYmIGllX3ZlcnNpb24gPj0gOSk7XG5cbiAgLy8gT3B0aW1pemUgc29tZSBjb2RlIHdoZW4gdGhlc2UgZmVhdHVyZXMgYXJlIG5vdCB1c2VkLlxuICB2YXIgc2F3UmVhZE9ubHlTcGFucyA9IGZhbHNlLCBzYXdDb2xsYXBzZWRTcGFucyA9IGZhbHNlO1xuXG4gIC8vIEVESVRPUiBDT05TVFJVQ1RPUlxuXG4gIC8vIEEgQ29kZU1pcnJvciBpbnN0YW5jZSByZXByZXNlbnRzIGFuIGVkaXRvci4gVGhpcyBpcyB0aGUgb2JqZWN0XG4gIC8vIHRoYXQgdXNlciBjb2RlIGlzIHVzdWFsbHkgZGVhbGluZyB3aXRoLlxuXG4gIGZ1bmN0aW9uIENvZGVNaXJyb3IocGxhY2UsIG9wdGlvbnMpIHtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgQ29kZU1pcnJvcikpIHJldHVybiBuZXcgQ29kZU1pcnJvcihwbGFjZSwgb3B0aW9ucyk7XG5cbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zID0gb3B0aW9ucyA/IGNvcHlPYmoob3B0aW9ucykgOiB7fTtcbiAgICAvLyBEZXRlcm1pbmUgZWZmZWN0aXZlIG9wdGlvbnMgYmFzZWQgb24gZ2l2ZW4gdmFsdWVzIGFuZCBkZWZhdWx0cy5cbiAgICBjb3B5T2JqKGRlZmF1bHRzLCBvcHRpb25zLCBmYWxzZSk7XG4gICAgc2V0R3V0dGVyc0ZvckxpbmVOdW1iZXJzKG9wdGlvbnMpO1xuXG4gICAgdmFyIGRvYyA9IG9wdGlvbnMudmFsdWU7XG4gICAgaWYgKHR5cGVvZiBkb2MgPT0gXCJzdHJpbmdcIikgZG9jID0gbmV3IERvYyhkb2MsIG9wdGlvbnMubW9kZSwgbnVsbCwgb3B0aW9ucy5saW5lU2VwYXJhdG9yKTtcbiAgICB0aGlzLmRvYyA9IGRvYztcblxuICAgIHZhciBpbnB1dCA9IG5ldyBDb2RlTWlycm9yLmlucHV0U3R5bGVzW29wdGlvbnMuaW5wdXRTdHlsZV0odGhpcyk7XG4gICAgdmFyIGRpc3BsYXkgPSB0aGlzLmRpc3BsYXkgPSBuZXcgRGlzcGxheShwbGFjZSwgZG9jLCBpbnB1dCk7XG4gICAgZGlzcGxheS53cmFwcGVyLkNvZGVNaXJyb3IgPSB0aGlzO1xuICAgIHVwZGF0ZUd1dHRlcnModGhpcyk7XG4gICAgdGhlbWVDaGFuZ2VkKHRoaXMpO1xuICAgIGlmIChvcHRpb25zLmxpbmVXcmFwcGluZylcbiAgICAgIHRoaXMuZGlzcGxheS53cmFwcGVyLmNsYXNzTmFtZSArPSBcIiBDb2RlTWlycm9yLXdyYXBcIjtcbiAgICBpZiAob3B0aW9ucy5hdXRvZm9jdXMgJiYgIW1vYmlsZSkgZGlzcGxheS5pbnB1dC5mb2N1cygpO1xuICAgIGluaXRTY3JvbGxiYXJzKHRoaXMpO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGtleU1hcHM6IFtdLCAgLy8gc3RvcmVzIG1hcHMgYWRkZWQgYnkgYWRkS2V5TWFwXG4gICAgICBvdmVybGF5czogW10sIC8vIGhpZ2hsaWdodGluZyBvdmVybGF5cywgYXMgYWRkZWQgYnkgYWRkT3ZlcmxheVxuICAgICAgbW9kZUdlbjogMCwgICAvLyBidW1wZWQgd2hlbiBtb2RlL292ZXJsYXkgY2hhbmdlcywgdXNlZCB0byBpbnZhbGlkYXRlIGhpZ2hsaWdodGluZyBpbmZvXG4gICAgICBvdmVyd3JpdGU6IGZhbHNlLFxuICAgICAgZGVsYXlpbmdCbHVyRXZlbnQ6IGZhbHNlLFxuICAgICAgZm9jdXNlZDogZmFsc2UsXG4gICAgICBzdXBwcmVzc0VkaXRzOiBmYWxzZSwgLy8gdXNlZCB0byBkaXNhYmxlIGVkaXRpbmcgZHVyaW5nIGtleSBoYW5kbGVycyB3aGVuIGluIHJlYWRPbmx5IG1vZGVcbiAgICAgIHBhc3RlSW5jb21pbmc6IGZhbHNlLCBjdXRJbmNvbWluZzogZmFsc2UsIC8vIGhlbHAgcmVjb2duaXplIHBhc3RlL2N1dCBlZGl0cyBpbiBpbnB1dC5wb2xsXG4gICAgICBzZWxlY3RpbmdUZXh0OiBmYWxzZSxcbiAgICAgIGRyYWdnaW5nVGV4dDogZmFsc2UsXG4gICAgICBoaWdobGlnaHQ6IG5ldyBEZWxheWVkKCksIC8vIHN0b3JlcyBoaWdobGlnaHQgd29ya2VyIHRpbWVvdXRcbiAgICAgIGtleVNlcTogbnVsbCwgIC8vIFVuZmluaXNoZWQga2V5IHNlcXVlbmNlXG4gICAgICBzcGVjaWFsQ2hhcnM6IG51bGxcbiAgICB9O1xuXG4gICAgdmFyIGNtID0gdGhpcztcblxuICAgIC8vIE92ZXJyaWRlIG1hZ2ljIHRleHRhcmVhIGNvbnRlbnQgcmVzdG9yZSB0aGF0IElFIHNvbWV0aW1lcyBkb2VzXG4gICAgLy8gb24gb3VyIGhpZGRlbiB0ZXh0YXJlYSBvbiByZWxvYWRcbiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDExKSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBjbS5kaXNwbGF5LmlucHV0LnJlc2V0KHRydWUpOyB9LCAyMCk7XG5cbiAgICByZWdpc3RlckV2ZW50SGFuZGxlcnModGhpcyk7XG4gICAgZW5zdXJlR2xvYmFsSGFuZGxlcnMoKTtcblxuICAgIHN0YXJ0T3BlcmF0aW9uKHRoaXMpO1xuICAgIHRoaXMuY3VyT3AuZm9yY2VVcGRhdGUgPSB0cnVlO1xuICAgIGF0dGFjaERvYyh0aGlzLCBkb2MpO1xuXG4gICAgaWYgKChvcHRpb25zLmF1dG9mb2N1cyAmJiAhbW9iaWxlKSB8fCBjbS5oYXNGb2N1cygpKVxuICAgICAgc2V0VGltZW91dChiaW5kKG9uRm9jdXMsIHRoaXMpLCAyMCk7XG4gICAgZWxzZVxuICAgICAgb25CbHVyKHRoaXMpO1xuXG4gICAgZm9yICh2YXIgb3B0IGluIG9wdGlvbkhhbmRsZXJzKSBpZiAob3B0aW9uSGFuZGxlcnMuaGFzT3duUHJvcGVydHkob3B0KSlcbiAgICAgIG9wdGlvbkhhbmRsZXJzW29wdF0odGhpcywgb3B0aW9uc1tvcHRdLCBJbml0KTtcbiAgICBtYXliZVVwZGF0ZUxpbmVOdW1iZXJXaWR0aCh0aGlzKTtcbiAgICBpZiAob3B0aW9ucy5maW5pc2hJbml0KSBvcHRpb25zLmZpbmlzaEluaXQodGhpcyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbml0SG9va3MubGVuZ3RoOyArK2kpIGluaXRIb29rc1tpXSh0aGlzKTtcbiAgICBlbmRPcGVyYXRpb24odGhpcyk7XG4gICAgLy8gU3VwcHJlc3Mgb3B0aW1pemVsZWdpYmlsaXR5IGluIFdlYmtpdCwgc2luY2UgaXQgYnJlYWtzIHRleHRcbiAgICAvLyBtZWFzdXJpbmcgb24gbGluZSB3cmFwcGluZyBib3VuZGFyaWVzLlxuICAgIGlmICh3ZWJraXQgJiYgb3B0aW9ucy5saW5lV3JhcHBpbmcgJiZcbiAgICAgICAgZ2V0Q29tcHV0ZWRTdHlsZShkaXNwbGF5LmxpbmVEaXYpLnRleHRSZW5kZXJpbmcgPT0gXCJvcHRpbWl6ZWxlZ2liaWxpdHlcIilcbiAgICAgIGRpc3BsYXkubGluZURpdi5zdHlsZS50ZXh0UmVuZGVyaW5nID0gXCJhdXRvXCI7XG4gIH1cblxuICAvLyBESVNQTEFZIENPTlNUUlVDVE9SXG5cbiAgLy8gVGhlIGRpc3BsYXkgaGFuZGxlcyB0aGUgRE9NIGludGVncmF0aW9uLCBib3RoIGZvciBpbnB1dCByZWFkaW5nXG4gIC8vIGFuZCBjb250ZW50IGRyYXdpbmcuIEl0IGhvbGRzIHJlZmVyZW5jZXMgdG8gRE9NIG5vZGVzIGFuZFxuICAvLyBkaXNwbGF5LXJlbGF0ZWQgc3RhdGUuXG5cbiAgZnVuY3Rpb24gRGlzcGxheShwbGFjZSwgZG9jLCBpbnB1dCkge1xuICAgIHZhciBkID0gdGhpcztcbiAgICB0aGlzLmlucHV0ID0gaW5wdXQ7XG5cbiAgICAvLyBDb3ZlcnMgYm90dG9tLXJpZ2h0IHNxdWFyZSB3aGVuIGJvdGggc2Nyb2xsYmFycyBhcmUgcHJlc2VudC5cbiAgICBkLnNjcm9sbGJhckZpbGxlciA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3Itc2Nyb2xsYmFyLWZpbGxlclwiKTtcbiAgICBkLnNjcm9sbGJhckZpbGxlci5zZXRBdHRyaWJ1dGUoXCJjbS1ub3QtY29udGVudFwiLCBcInRydWVcIik7XG4gICAgLy8gQ292ZXJzIGJvdHRvbSBvZiBndXR0ZXIgd2hlbiBjb3Zlckd1dHRlck5leHRUb1Njcm9sbGJhciBpcyBvblxuICAgIC8vIGFuZCBoIHNjcm9sbGJhciBpcyBwcmVzZW50LlxuICAgIGQuZ3V0dGVyRmlsbGVyID0gZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1ndXR0ZXItZmlsbGVyXCIpO1xuICAgIGQuZ3V0dGVyRmlsbGVyLnNldEF0dHJpYnV0ZShcImNtLW5vdC1jb250ZW50XCIsIFwidHJ1ZVwiKTtcbiAgICAvLyBXaWxsIGNvbnRhaW4gdGhlIGFjdHVhbCBjb2RlLCBwb3NpdGlvbmVkIHRvIGNvdmVyIHRoZSB2aWV3cG9ydC5cbiAgICBkLmxpbmVEaXYgPSBlbHQoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLWNvZGVcIik7XG4gICAgLy8gRWxlbWVudHMgYXJlIGFkZGVkIHRvIHRoZXNlIHRvIHJlcHJlc2VudCBzZWxlY3Rpb24gYW5kIGN1cnNvcnMuXG4gICAgZC5zZWxlY3Rpb25EaXYgPSBlbHQoXCJkaXZcIiwgbnVsbCwgbnVsbCwgXCJwb3NpdGlvbjogcmVsYXRpdmU7IHotaW5kZXg6IDFcIik7XG4gICAgZC5jdXJzb3JEaXYgPSBlbHQoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLWN1cnNvcnNcIik7XG4gICAgLy8gQSB2aXNpYmlsaXR5OiBoaWRkZW4gZWxlbWVudCB1c2VkIHRvIGZpbmQgdGhlIHNpemUgb2YgdGhpbmdzLlxuICAgIGQubWVhc3VyZSA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItbWVhc3VyZVwiKTtcbiAgICAvLyBXaGVuIGxpbmVzIG91dHNpZGUgb2YgdGhlIHZpZXdwb3J0IGFyZSBtZWFzdXJlZCwgdGhleSBhcmUgZHJhd24gaW4gdGhpcy5cbiAgICBkLmxpbmVNZWFzdXJlID0gZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1tZWFzdXJlXCIpO1xuICAgIC8vIFdyYXBzIGV2ZXJ5dGhpbmcgdGhhdCBuZWVkcyB0byBleGlzdCBpbnNpZGUgdGhlIHZlcnRpY2FsbHktcGFkZGVkIGNvb3JkaW5hdGUgc3lzdGVtXG4gICAgZC5saW5lU3BhY2UgPSBlbHQoXCJkaXZcIiwgW2QubWVhc3VyZSwgZC5saW5lTWVhc3VyZSwgZC5zZWxlY3Rpb25EaXYsIGQuY3Vyc29yRGl2LCBkLmxpbmVEaXZdLFxuICAgICAgICAgICAgICAgICAgICAgIG51bGwsIFwicG9zaXRpb246IHJlbGF0aXZlOyBvdXRsaW5lOiBub25lXCIpO1xuICAgIC8vIE1vdmVkIGFyb3VuZCBpdHMgcGFyZW50IHRvIGNvdmVyIHZpc2libGUgdmlldy5cbiAgICBkLm1vdmVyID0gZWx0KFwiZGl2XCIsIFtlbHQoXCJkaXZcIiwgW2QubGluZVNwYWNlXSwgXCJDb2RlTWlycm9yLWxpbmVzXCIpXSwgbnVsbCwgXCJwb3NpdGlvbjogcmVsYXRpdmVcIik7XG4gICAgLy8gU2V0IHRvIHRoZSBoZWlnaHQgb2YgdGhlIGRvY3VtZW50LCBhbGxvd2luZyBzY3JvbGxpbmcuXG4gICAgZC5zaXplciA9IGVsdChcImRpdlwiLCBbZC5tb3Zlcl0sIFwiQ29kZU1pcnJvci1zaXplclwiKTtcbiAgICBkLnNpemVyV2lkdGggPSBudWxsO1xuICAgIC8vIEJlaGF2aW9yIG9mIGVsdHMgd2l0aCBvdmVyZmxvdzogYXV0byBhbmQgcGFkZGluZyBpc1xuICAgIC8vIGluY29uc2lzdGVudCBhY3Jvc3MgYnJvd3NlcnMuIFRoaXMgaXMgdXNlZCB0byBlbnN1cmUgdGhlXG4gICAgLy8gc2Nyb2xsYWJsZSBhcmVhIGlzIGJpZyBlbm91Z2guXG4gICAgZC5oZWlnaHRGb3JjZXIgPSBlbHQoXCJkaXZcIiwgbnVsbCwgbnVsbCwgXCJwb3NpdGlvbjogYWJzb2x1dGU7IGhlaWdodDogXCIgKyBzY3JvbGxlckdhcCArIFwicHg7IHdpZHRoOiAxcHg7XCIpO1xuICAgIC8vIFdpbGwgY29udGFpbiB0aGUgZ3V0dGVycywgaWYgYW55LlxuICAgIGQuZ3V0dGVycyA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItZ3V0dGVyc1wiKTtcbiAgICBkLmxpbmVHdXR0ZXIgPSBudWxsO1xuICAgIC8vIEFjdHVhbCBzY3JvbGxhYmxlIGVsZW1lbnQuXG4gICAgZC5zY3JvbGxlciA9IGVsdChcImRpdlwiLCBbZC5zaXplciwgZC5oZWlnaHRGb3JjZXIsIGQuZ3V0dGVyc10sIFwiQ29kZU1pcnJvci1zY3JvbGxcIik7XG4gICAgZC5zY3JvbGxlci5zZXRBdHRyaWJ1dGUoXCJ0YWJJbmRleFwiLCBcIi0xXCIpO1xuICAgIC8vIFRoZSBlbGVtZW50IGluIHdoaWNoIHRoZSBlZGl0b3IgbGl2ZXMuXG4gICAgZC53cmFwcGVyID0gZWx0KFwiZGl2XCIsIFtkLnNjcm9sbGJhckZpbGxlciwgZC5ndXR0ZXJGaWxsZXIsIGQuc2Nyb2xsZXJdLCBcIkNvZGVNaXJyb3JcIik7XG5cbiAgICAvLyBXb3JrIGFyb3VuZCBJRTcgei1pbmRleCBidWcgKG5vdCBwZXJmZWN0LCBoZW5jZSBJRTcgbm90IHJlYWxseSBiZWluZyBzdXBwb3J0ZWQpXG4gICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA4KSB7IGQuZ3V0dGVycy5zdHlsZS56SW5kZXggPSAtMTsgZC5zY3JvbGxlci5zdHlsZS5wYWRkaW5nUmlnaHQgPSAwOyB9XG4gICAgaWYgKCF3ZWJraXQgJiYgIShnZWNrbyAmJiBtb2JpbGUpKSBkLnNjcm9sbGVyLmRyYWdnYWJsZSA9IHRydWU7XG5cbiAgICBpZiAocGxhY2UpIHtcbiAgICAgIGlmIChwbGFjZS5hcHBlbmRDaGlsZCkgcGxhY2UuYXBwZW5kQ2hpbGQoZC53cmFwcGVyKTtcbiAgICAgIGVsc2UgcGxhY2UoZC53cmFwcGVyKTtcbiAgICB9XG5cbiAgICAvLyBDdXJyZW50IHJlbmRlcmVkIHJhbmdlIChtYXkgYmUgYmlnZ2VyIHRoYW4gdGhlIHZpZXcgd2luZG93KS5cbiAgICBkLnZpZXdGcm9tID0gZC52aWV3VG8gPSBkb2MuZmlyc3Q7XG4gICAgZC5yZXBvcnRlZFZpZXdGcm9tID0gZC5yZXBvcnRlZFZpZXdUbyA9IGRvYy5maXJzdDtcbiAgICAvLyBJbmZvcm1hdGlvbiBhYm91dCB0aGUgcmVuZGVyZWQgbGluZXMuXG4gICAgZC52aWV3ID0gW107XG4gICAgZC5yZW5kZXJlZFZpZXcgPSBudWxsO1xuICAgIC8vIEhvbGRzIGluZm8gYWJvdXQgYSBzaW5nbGUgcmVuZGVyZWQgbGluZSB3aGVuIGl0IHdhcyByZW5kZXJlZFxuICAgIC8vIGZvciBtZWFzdXJlbWVudCwgd2hpbGUgbm90IGluIHZpZXcuXG4gICAgZC5leHRlcm5hbE1lYXN1cmVkID0gbnVsbDtcbiAgICAvLyBFbXB0eSBzcGFjZSAoaW4gcGl4ZWxzKSBhYm92ZSB0aGUgdmlld1xuICAgIGQudmlld09mZnNldCA9IDA7XG4gICAgZC5sYXN0V3JhcEhlaWdodCA9IGQubGFzdFdyYXBXaWR0aCA9IDA7XG4gICAgZC51cGRhdGVMaW5lTnVtYmVycyA9IG51bGw7XG5cbiAgICBkLm5hdGl2ZUJhcldpZHRoID0gZC5iYXJIZWlnaHQgPSBkLmJhcldpZHRoID0gMDtcbiAgICBkLnNjcm9sbGJhcnNDbGlwcGVkID0gZmFsc2U7XG5cbiAgICAvLyBVc2VkIHRvIG9ubHkgcmVzaXplIHRoZSBsaW5lIG51bWJlciBndXR0ZXIgd2hlbiBuZWNlc3NhcnkgKHdoZW5cbiAgICAvLyB0aGUgYW1vdW50IG9mIGxpbmVzIGNyb3NzZXMgYSBib3VuZGFyeSB0aGF0IG1ha2VzIGl0cyB3aWR0aCBjaGFuZ2UpXG4gICAgZC5saW5lTnVtV2lkdGggPSBkLmxpbmVOdW1Jbm5lcldpZHRoID0gZC5saW5lTnVtQ2hhcnMgPSBudWxsO1xuICAgIC8vIFNldCB0byB0cnVlIHdoZW4gYSBub24taG9yaXpvbnRhbC1zY3JvbGxpbmcgbGluZSB3aWRnZXQgaXNcbiAgICAvLyBhZGRlZC4gQXMgYW4gb3B0aW1pemF0aW9uLCBsaW5lIHdpZGdldCBhbGlnbmluZyBpcyBza2lwcGVkIHdoZW5cbiAgICAvLyB0aGlzIGlzIGZhbHNlLlxuICAgIGQuYWxpZ25XaWRnZXRzID0gZmFsc2U7XG5cbiAgICBkLmNhY2hlZENoYXJXaWR0aCA9IGQuY2FjaGVkVGV4dEhlaWdodCA9IGQuY2FjaGVkUGFkZGluZ0ggPSBudWxsO1xuXG4gICAgLy8gVHJhY2tzIHRoZSBtYXhpbXVtIGxpbmUgbGVuZ3RoIHNvIHRoYXQgdGhlIGhvcml6b250YWwgc2Nyb2xsYmFyXG4gICAgLy8gY2FuIGJlIGtlcHQgc3RhdGljIHdoZW4gc2Nyb2xsaW5nLlxuICAgIGQubWF4TGluZSA9IG51bGw7XG4gICAgZC5tYXhMaW5lTGVuZ3RoID0gMDtcbiAgICBkLm1heExpbmVDaGFuZ2VkID0gZmFsc2U7XG5cbiAgICAvLyBVc2VkIGZvciBtZWFzdXJpbmcgd2hlZWwgc2Nyb2xsaW5nIGdyYW51bGFyaXR5XG4gICAgZC53aGVlbERYID0gZC53aGVlbERZID0gZC53aGVlbFN0YXJ0WCA9IGQud2hlZWxTdGFydFkgPSBudWxsO1xuXG4gICAgLy8gVHJ1ZSB3aGVuIHNoaWZ0IGlzIGhlbGQgZG93bi5cbiAgICBkLnNoaWZ0ID0gZmFsc2U7XG5cbiAgICAvLyBVc2VkIHRvIHRyYWNrIHdoZXRoZXIgYW55dGhpbmcgaGFwcGVuZWQgc2luY2UgdGhlIGNvbnRleHQgbWVudVxuICAgIC8vIHdhcyBvcGVuZWQuXG4gICAgZC5zZWxGb3JDb250ZXh0TWVudSA9IG51bGw7XG5cbiAgICBkLmFjdGl2ZVRvdWNoID0gbnVsbDtcblxuICAgIGlucHV0LmluaXQoZCk7XG4gIH1cblxuICAvLyBTVEFURSBVUERBVEVTXG5cbiAgLy8gVXNlZCB0byBnZXQgdGhlIGVkaXRvciBpbnRvIGEgY29uc2lzdGVudCBzdGF0ZSBhZ2FpbiB3aGVuIG9wdGlvbnMgY2hhbmdlLlxuXG4gIGZ1bmN0aW9uIGxvYWRNb2RlKGNtKSB7XG4gICAgY20uZG9jLm1vZGUgPSBDb2RlTWlycm9yLmdldE1vZGUoY20ub3B0aW9ucywgY20uZG9jLm1vZGVPcHRpb24pO1xuICAgIHJlc2V0TW9kZVN0YXRlKGNtKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2V0TW9kZVN0YXRlKGNtKSB7XG4gICAgY20uZG9jLml0ZXIoZnVuY3Rpb24obGluZSkge1xuICAgICAgaWYgKGxpbmUuc3RhdGVBZnRlcikgbGluZS5zdGF0ZUFmdGVyID0gbnVsbDtcbiAgICAgIGlmIChsaW5lLnN0eWxlcykgbGluZS5zdHlsZXMgPSBudWxsO1xuICAgIH0pO1xuICAgIGNtLmRvYy5mcm9udGllciA9IGNtLmRvYy5maXJzdDtcbiAgICBzdGFydFdvcmtlcihjbSwgMTAwKTtcbiAgICBjbS5zdGF0ZS5tb2RlR2VuKys7XG4gICAgaWYgKGNtLmN1ck9wKSByZWdDaGFuZ2UoY20pO1xuICB9XG5cbiAgZnVuY3Rpb24gd3JhcHBpbmdDaGFuZ2VkKGNtKSB7XG4gICAgaWYgKGNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7XG4gICAgICBhZGRDbGFzcyhjbS5kaXNwbGF5LndyYXBwZXIsIFwiQ29kZU1pcnJvci13cmFwXCIpO1xuICAgICAgY20uZGlzcGxheS5zaXplci5zdHlsZS5taW5XaWR0aCA9IFwiXCI7XG4gICAgICBjbS5kaXNwbGF5LnNpemVyV2lkdGggPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBybUNsYXNzKGNtLmRpc3BsYXkud3JhcHBlciwgXCJDb2RlTWlycm9yLXdyYXBcIik7XG4gICAgICBmaW5kTWF4TGluZShjbSk7XG4gICAgfVxuICAgIGVzdGltYXRlTGluZUhlaWdodHMoY20pO1xuICAgIHJlZ0NoYW5nZShjbSk7XG4gICAgY2xlYXJDYWNoZXMoY20pO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXt1cGRhdGVTY3JvbGxiYXJzKGNtKTt9LCAxMDApO1xuICB9XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgZXN0aW1hdGVzIHRoZSBoZWlnaHQgb2YgYSBsaW5lLCB0byB1c2UgYXNcbiAgLy8gZmlyc3QgYXBwcm94aW1hdGlvbiB1bnRpbCB0aGUgbGluZSBiZWNvbWVzIHZpc2libGUgKGFuZCBpcyB0aHVzXG4gIC8vIHByb3Blcmx5IG1lYXN1cmFibGUpLlxuICBmdW5jdGlvbiBlc3RpbWF0ZUhlaWdodChjbSkge1xuICAgIHZhciB0aCA9IHRleHRIZWlnaHQoY20uZGlzcGxheSksIHdyYXBwaW5nID0gY20ub3B0aW9ucy5saW5lV3JhcHBpbmc7XG4gICAgdmFyIHBlckxpbmUgPSB3cmFwcGluZyAmJiBNYXRoLm1heCg1LCBjbS5kaXNwbGF5LnNjcm9sbGVyLmNsaWVudFdpZHRoIC8gY2hhcldpZHRoKGNtLmRpc3BsYXkpIC0gMyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIGlmIChsaW5lSXNIaWRkZW4oY20uZG9jLCBsaW5lKSkgcmV0dXJuIDA7XG5cbiAgICAgIHZhciB3aWRnZXRzSGVpZ2h0ID0gMDtcbiAgICAgIGlmIChsaW5lLndpZGdldHMpIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZS53aWRnZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChsaW5lLndpZGdldHNbaV0uaGVpZ2h0KSB3aWRnZXRzSGVpZ2h0ICs9IGxpbmUud2lkZ2V0c1tpXS5oZWlnaHQ7XG4gICAgICB9XG5cbiAgICAgIGlmICh3cmFwcGluZylcbiAgICAgICAgcmV0dXJuIHdpZGdldHNIZWlnaHQgKyAoTWF0aC5jZWlsKGxpbmUudGV4dC5sZW5ndGggLyBwZXJMaW5lKSB8fCAxKSAqIHRoO1xuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gd2lkZ2V0c0hlaWdodCArIHRoO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBlc3RpbWF0ZUxpbmVIZWlnaHRzKGNtKSB7XG4gICAgdmFyIGRvYyA9IGNtLmRvYywgZXN0ID0gZXN0aW1hdGVIZWlnaHQoY20pO1xuICAgIGRvYy5pdGVyKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIHZhciBlc3RIZWlnaHQgPSBlc3QobGluZSk7XG4gICAgICBpZiAoZXN0SGVpZ2h0ICE9IGxpbmUuaGVpZ2h0KSB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIGVzdEhlaWdodCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiB0aGVtZUNoYW5nZWQoY20pIHtcbiAgICBjbS5kaXNwbGF5LndyYXBwZXIuY2xhc3NOYW1lID0gY20uZGlzcGxheS53cmFwcGVyLmNsYXNzTmFtZS5yZXBsYWNlKC9cXHMqY20tcy1cXFMrL2csIFwiXCIpICtcbiAgICAgIGNtLm9wdGlvbnMudGhlbWUucmVwbGFjZSgvKF58XFxzKVxccyovZywgXCIgY20tcy1cIik7XG4gICAgY2xlYXJDYWNoZXMoY20pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ3V0dGVyc0NoYW5nZWQoY20pIHtcbiAgICB1cGRhdGVHdXR0ZXJzKGNtKTtcbiAgICByZWdDaGFuZ2UoY20pO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXthbGlnbkhvcml6b250YWxseShjbSk7fSwgMjApO1xuICB9XG5cbiAgLy8gUmVidWlsZCB0aGUgZ3V0dGVyIGVsZW1lbnRzLCBlbnN1cmUgdGhlIG1hcmdpbiB0byB0aGUgbGVmdCBvZiB0aGVcbiAgLy8gY29kZSBtYXRjaGVzIHRoZWlyIHdpZHRoLlxuICBmdW5jdGlvbiB1cGRhdGVHdXR0ZXJzKGNtKSB7XG4gICAgdmFyIGd1dHRlcnMgPSBjbS5kaXNwbGF5Lmd1dHRlcnMsIHNwZWNzID0gY20ub3B0aW9ucy5ndXR0ZXJzO1xuICAgIHJlbW92ZUNoaWxkcmVuKGd1dHRlcnMpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3BlY3MubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBndXR0ZXJDbGFzcyA9IHNwZWNzW2ldO1xuICAgICAgdmFyIGdFbHQgPSBndXR0ZXJzLmFwcGVuZENoaWxkKGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItZ3V0dGVyIFwiICsgZ3V0dGVyQ2xhc3MpKTtcbiAgICAgIGlmIChndXR0ZXJDbGFzcyA9PSBcIkNvZGVNaXJyb3ItbGluZW51bWJlcnNcIikge1xuICAgICAgICBjbS5kaXNwbGF5LmxpbmVHdXR0ZXIgPSBnRWx0O1xuICAgICAgICBnRWx0LnN0eWxlLndpZHRoID0gKGNtLmRpc3BsYXkubGluZU51bVdpZHRoIHx8IDEpICsgXCJweFwiO1xuICAgICAgfVxuICAgIH1cbiAgICBndXR0ZXJzLnN0eWxlLmRpc3BsYXkgPSBpID8gXCJcIiA6IFwibm9uZVwiO1xuICAgIHVwZGF0ZUd1dHRlclNwYWNlKGNtKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUd1dHRlclNwYWNlKGNtKSB7XG4gICAgdmFyIHdpZHRoID0gY20uZGlzcGxheS5ndXR0ZXJzLm9mZnNldFdpZHRoO1xuICAgIGNtLmRpc3BsYXkuc2l6ZXIuc3R5bGUubWFyZ2luTGVmdCA9IHdpZHRoICsgXCJweFwiO1xuICB9XG5cbiAgLy8gQ29tcHV0ZSB0aGUgY2hhcmFjdGVyIGxlbmd0aCBvZiBhIGxpbmUsIHRha2luZyBpbnRvIGFjY291bnRcbiAgLy8gY29sbGFwc2VkIHJhbmdlcyAoc2VlIG1hcmtUZXh0KSB0aGF0IG1pZ2h0IGhpZGUgcGFydHMsIGFuZCBqb2luXG4gIC8vIG90aGVyIGxpbmVzIG9udG8gaXQuXG4gIGZ1bmN0aW9uIGxpbmVMZW5ndGgobGluZSkge1xuICAgIGlmIChsaW5lLmhlaWdodCA9PSAwKSByZXR1cm4gMDtcbiAgICB2YXIgbGVuID0gbGluZS50ZXh0Lmxlbmd0aCwgbWVyZ2VkLCBjdXIgPSBsaW5lO1xuICAgIHdoaWxlIChtZXJnZWQgPSBjb2xsYXBzZWRTcGFuQXRTdGFydChjdXIpKSB7XG4gICAgICB2YXIgZm91bmQgPSBtZXJnZWQuZmluZCgwLCB0cnVlKTtcbiAgICAgIGN1ciA9IGZvdW5kLmZyb20ubGluZTtcbiAgICAgIGxlbiArPSBmb3VuZC5mcm9tLmNoIC0gZm91bmQudG8uY2g7XG4gICAgfVxuICAgIGN1ciA9IGxpbmU7XG4gICAgd2hpbGUgKG1lcmdlZCA9IGNvbGxhcHNlZFNwYW5BdEVuZChjdXIpKSB7XG4gICAgICB2YXIgZm91bmQgPSBtZXJnZWQuZmluZCgwLCB0cnVlKTtcbiAgICAgIGxlbiAtPSBjdXIudGV4dC5sZW5ndGggLSBmb3VuZC5mcm9tLmNoO1xuICAgICAgY3VyID0gZm91bmQudG8ubGluZTtcbiAgICAgIGxlbiArPSBjdXIudGV4dC5sZW5ndGggLSBmb3VuZC50by5jaDtcbiAgICB9XG4gICAgcmV0dXJuIGxlbjtcbiAgfVxuXG4gIC8vIEZpbmQgdGhlIGxvbmdlc3QgbGluZSBpbiB0aGUgZG9jdW1lbnQuXG4gIGZ1bmN0aW9uIGZpbmRNYXhMaW5lKGNtKSB7XG4gICAgdmFyIGQgPSBjbS5kaXNwbGF5LCBkb2MgPSBjbS5kb2M7XG4gICAgZC5tYXhMaW5lID0gZ2V0TGluZShkb2MsIGRvYy5maXJzdCk7XG4gICAgZC5tYXhMaW5lTGVuZ3RoID0gbGluZUxlbmd0aChkLm1heExpbmUpO1xuICAgIGQubWF4TGluZUNoYW5nZWQgPSB0cnVlO1xuICAgIGRvYy5pdGVyKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIHZhciBsZW4gPSBsaW5lTGVuZ3RoKGxpbmUpO1xuICAgICAgaWYgKGxlbiA+IGQubWF4TGluZUxlbmd0aCkge1xuICAgICAgICBkLm1heExpbmVMZW5ndGggPSBsZW47XG4gICAgICAgIGQubWF4TGluZSA9IGxpbmU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvLyBNYWtlIHN1cmUgdGhlIGd1dHRlcnMgb3B0aW9ucyBjb250YWlucyB0aGUgZWxlbWVudFxuICAvLyBcIkNvZGVNaXJyb3ItbGluZW51bWJlcnNcIiB3aGVuIHRoZSBsaW5lTnVtYmVycyBvcHRpb24gaXMgdHJ1ZS5cbiAgZnVuY3Rpb24gc2V0R3V0dGVyc0ZvckxpbmVOdW1iZXJzKG9wdGlvbnMpIHtcbiAgICB2YXIgZm91bmQgPSBpbmRleE9mKG9wdGlvbnMuZ3V0dGVycywgXCJDb2RlTWlycm9yLWxpbmVudW1iZXJzXCIpO1xuICAgIGlmIChmb3VuZCA9PSAtMSAmJiBvcHRpb25zLmxpbmVOdW1iZXJzKSB7XG4gICAgICBvcHRpb25zLmd1dHRlcnMgPSBvcHRpb25zLmd1dHRlcnMuY29uY2F0KFtcIkNvZGVNaXJyb3ItbGluZW51bWJlcnNcIl0pO1xuICAgIH0gZWxzZSBpZiAoZm91bmQgPiAtMSAmJiAhb3B0aW9ucy5saW5lTnVtYmVycykge1xuICAgICAgb3B0aW9ucy5ndXR0ZXJzID0gb3B0aW9ucy5ndXR0ZXJzLnNsaWNlKDApO1xuICAgICAgb3B0aW9ucy5ndXR0ZXJzLnNwbGljZShmb3VuZCwgMSk7XG4gICAgfVxuICB9XG5cbiAgLy8gU0NST0xMQkFSU1xuXG4gIC8vIFByZXBhcmUgRE9NIHJlYWRzIG5lZWRlZCB0byB1cGRhdGUgdGhlIHNjcm9sbGJhcnMuIERvbmUgaW4gb25lXG4gIC8vIHNob3QgdG8gbWluaW1pemUgdXBkYXRlL21lYXN1cmUgcm91bmR0cmlwcy5cbiAgZnVuY3Rpb24gbWVhc3VyZUZvclNjcm9sbGJhcnMoY20pIHtcbiAgICB2YXIgZCA9IGNtLmRpc3BsYXksIGd1dHRlclcgPSBkLmd1dHRlcnMub2Zmc2V0V2lkdGg7XG4gICAgdmFyIGRvY0ggPSBNYXRoLnJvdW5kKGNtLmRvYy5oZWlnaHQgKyBwYWRkaW5nVmVydChjbS5kaXNwbGF5KSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNsaWVudEhlaWdodDogZC5zY3JvbGxlci5jbGllbnRIZWlnaHQsXG4gICAgICB2aWV3SGVpZ2h0OiBkLndyYXBwZXIuY2xpZW50SGVpZ2h0LFxuICAgICAgc2Nyb2xsV2lkdGg6IGQuc2Nyb2xsZXIuc2Nyb2xsV2lkdGgsIGNsaWVudFdpZHRoOiBkLnNjcm9sbGVyLmNsaWVudFdpZHRoLFxuICAgICAgdmlld1dpZHRoOiBkLndyYXBwZXIuY2xpZW50V2lkdGgsXG4gICAgICBiYXJMZWZ0OiBjbS5vcHRpb25zLmZpeGVkR3V0dGVyID8gZ3V0dGVyVyA6IDAsXG4gICAgICBkb2NIZWlnaHQ6IGRvY0gsXG4gICAgICBzY3JvbGxIZWlnaHQ6IGRvY0ggKyBzY3JvbGxHYXAoY20pICsgZC5iYXJIZWlnaHQsXG4gICAgICBuYXRpdmVCYXJXaWR0aDogZC5uYXRpdmVCYXJXaWR0aCxcbiAgICAgIGd1dHRlcldpZHRoOiBndXR0ZXJXXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIE5hdGl2ZVNjcm9sbGJhcnMocGxhY2UsIHNjcm9sbCwgY20pIHtcbiAgICB0aGlzLmNtID0gY207XG4gICAgdmFyIHZlcnQgPSB0aGlzLnZlcnQgPSBlbHQoXCJkaXZcIiwgW2VsdChcImRpdlwiLCBudWxsLCBudWxsLCBcIm1pbi13aWR0aDogMXB4XCIpXSwgXCJDb2RlTWlycm9yLXZzY3JvbGxiYXJcIik7XG4gICAgdmFyIGhvcml6ID0gdGhpcy5ob3JpeiA9IGVsdChcImRpdlwiLCBbZWx0KFwiZGl2XCIsIG51bGwsIG51bGwsIFwiaGVpZ2h0OiAxMDAlOyBtaW4taGVpZ2h0OiAxcHhcIildLCBcIkNvZGVNaXJyb3ItaHNjcm9sbGJhclwiKTtcbiAgICBwbGFjZSh2ZXJ0KTsgcGxhY2UoaG9yaXopO1xuXG4gICAgb24odmVydCwgXCJzY3JvbGxcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodmVydC5jbGllbnRIZWlnaHQpIHNjcm9sbCh2ZXJ0LnNjcm9sbFRvcCwgXCJ2ZXJ0aWNhbFwiKTtcbiAgICB9KTtcbiAgICBvbihob3JpeiwgXCJzY3JvbGxcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoaG9yaXouY2xpZW50V2lkdGgpIHNjcm9sbChob3Jpei5zY3JvbGxMZWZ0LCBcImhvcml6b250YWxcIik7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNoZWNrZWRPdmVybGF5ID0gZmFsc2U7XG4gICAgLy8gTmVlZCB0byBzZXQgYSBtaW5pbXVtIHdpZHRoIHRvIHNlZSB0aGUgc2Nyb2xsYmFyIG9uIElFNyAoYnV0IG11c3Qgbm90IHNldCBpdCBvbiBJRTgpLlxuICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOCkgdGhpcy5ob3Jpei5zdHlsZS5taW5IZWlnaHQgPSB0aGlzLnZlcnQuc3R5bGUubWluV2lkdGggPSBcIjE4cHhcIjtcbiAgfVxuXG4gIE5hdGl2ZVNjcm9sbGJhcnMucHJvdG90eXBlID0gY29weU9iaih7XG4gICAgdXBkYXRlOiBmdW5jdGlvbihtZWFzdXJlKSB7XG4gICAgICB2YXIgbmVlZHNIID0gbWVhc3VyZS5zY3JvbGxXaWR0aCA+IG1lYXN1cmUuY2xpZW50V2lkdGggKyAxO1xuICAgICAgdmFyIG5lZWRzViA9IG1lYXN1cmUuc2Nyb2xsSGVpZ2h0ID4gbWVhc3VyZS5jbGllbnRIZWlnaHQgKyAxO1xuICAgICAgdmFyIHNXaWR0aCA9IG1lYXN1cmUubmF0aXZlQmFyV2lkdGg7XG5cbiAgICAgIGlmIChuZWVkc1YpIHtcbiAgICAgICAgdGhpcy52ZXJ0LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgIHRoaXMudmVydC5zdHlsZS5ib3R0b20gPSBuZWVkc0ggPyBzV2lkdGggKyBcInB4XCIgOiBcIjBcIjtcbiAgICAgICAgdmFyIHRvdGFsSGVpZ2h0ID0gbWVhc3VyZS52aWV3SGVpZ2h0IC0gKG5lZWRzSCA/IHNXaWR0aCA6IDApO1xuICAgICAgICAvLyBBIGJ1ZyBpbiBJRTggY2FuIGNhdXNlIHRoaXMgdmFsdWUgdG8gYmUgbmVnYXRpdmUsIHNvIGd1YXJkIGl0LlxuICAgICAgICB0aGlzLnZlcnQuZmlyc3RDaGlsZC5zdHlsZS5oZWlnaHQgPVxuICAgICAgICAgIE1hdGgubWF4KDAsIG1lYXN1cmUuc2Nyb2xsSGVpZ2h0IC0gbWVhc3VyZS5jbGllbnRIZWlnaHQgKyB0b3RhbEhlaWdodCkgKyBcInB4XCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnZlcnQuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgICAgIHRoaXMudmVydC5maXJzdENoaWxkLnN0eWxlLmhlaWdodCA9IFwiMFwiO1xuICAgICAgfVxuXG4gICAgICBpZiAobmVlZHNIKSB7XG4gICAgICAgIHRoaXMuaG9yaXouc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgdGhpcy5ob3Jpei5zdHlsZS5yaWdodCA9IG5lZWRzViA/IHNXaWR0aCArIFwicHhcIiA6IFwiMFwiO1xuICAgICAgICB0aGlzLmhvcml6LnN0eWxlLmxlZnQgPSBtZWFzdXJlLmJhckxlZnQgKyBcInB4XCI7XG4gICAgICAgIHZhciB0b3RhbFdpZHRoID0gbWVhc3VyZS52aWV3V2lkdGggLSBtZWFzdXJlLmJhckxlZnQgLSAobmVlZHNWID8gc1dpZHRoIDogMCk7XG4gICAgICAgIHRoaXMuaG9yaXouZmlyc3RDaGlsZC5zdHlsZS53aWR0aCA9XG4gICAgICAgICAgKG1lYXN1cmUuc2Nyb2xsV2lkdGggLSBtZWFzdXJlLmNsaWVudFdpZHRoICsgdG90YWxXaWR0aCkgKyBcInB4XCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhvcml6LnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgICAgICB0aGlzLmhvcml6LmZpcnN0Q2hpbGQuc3R5bGUud2lkdGggPSBcIjBcIjtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLmNoZWNrZWRPdmVybGF5ICYmIG1lYXN1cmUuY2xpZW50SGVpZ2h0ID4gMCkge1xuICAgICAgICBpZiAoc1dpZHRoID09IDApIHRoaXMub3ZlcmxheUhhY2soKTtcbiAgICAgICAgdGhpcy5jaGVja2VkT3ZlcmxheSA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7cmlnaHQ6IG5lZWRzViA/IHNXaWR0aCA6IDAsIGJvdHRvbTogbmVlZHNIID8gc1dpZHRoIDogMH07XG4gICAgfSxcbiAgICBzZXRTY3JvbGxMZWZ0OiBmdW5jdGlvbihwb3MpIHtcbiAgICAgIGlmICh0aGlzLmhvcml6LnNjcm9sbExlZnQgIT0gcG9zKSB0aGlzLmhvcml6LnNjcm9sbExlZnQgPSBwb3M7XG4gICAgfSxcbiAgICBzZXRTY3JvbGxUb3A6IGZ1bmN0aW9uKHBvcykge1xuICAgICAgaWYgKHRoaXMudmVydC5zY3JvbGxUb3AgIT0gcG9zKSB0aGlzLnZlcnQuc2Nyb2xsVG9wID0gcG9zO1xuICAgIH0sXG4gICAgb3ZlcmxheUhhY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHcgPSBtYWMgJiYgIW1hY19nZU1vdW50YWluTGlvbiA/IFwiMTJweFwiIDogXCIxOHB4XCI7XG4gICAgICB0aGlzLmhvcml6LnN0eWxlLm1pbkhlaWdodCA9IHRoaXMudmVydC5zdHlsZS5taW5XaWR0aCA9IHc7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYmFyTW91c2VEb3duID0gZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoZV90YXJnZXQoZSkgIT0gc2VsZi52ZXJ0ICYmIGVfdGFyZ2V0KGUpICE9IHNlbGYuaG9yaXopXG4gICAgICAgICAgb3BlcmF0aW9uKHNlbGYuY20sIG9uTW91c2VEb3duKShlKTtcbiAgICAgIH07XG4gICAgICBvbih0aGlzLnZlcnQsIFwibW91c2Vkb3duXCIsIGJhck1vdXNlRG93bik7XG4gICAgICBvbih0aGlzLmhvcml6LCBcIm1vdXNlZG93blwiLCBiYXJNb3VzZURvd24pO1xuICAgIH0sXG4gICAgY2xlYXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhcmVudCA9IHRoaXMuaG9yaXoucGFyZW50Tm9kZTtcbiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZCh0aGlzLmhvcml6KTtcbiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZCh0aGlzLnZlcnQpO1xuICAgIH1cbiAgfSwgTmF0aXZlU2Nyb2xsYmFycy5wcm90b3R5cGUpO1xuXG4gIGZ1bmN0aW9uIE51bGxTY3JvbGxiYXJzKCkge31cblxuICBOdWxsU2Nyb2xsYmFycy5wcm90b3R5cGUgPSBjb3B5T2JqKHtcbiAgICB1cGRhdGU6IGZ1bmN0aW9uKCkgeyByZXR1cm4ge2JvdHRvbTogMCwgcmlnaHQ6IDB9OyB9LFxuICAgIHNldFNjcm9sbExlZnQ6IGZ1bmN0aW9uKCkge30sXG4gICAgc2V0U2Nyb2xsVG9wOiBmdW5jdGlvbigpIHt9LFxuICAgIGNsZWFyOiBmdW5jdGlvbigpIHt9XG4gIH0sIE51bGxTY3JvbGxiYXJzLnByb3RvdHlwZSk7XG5cbiAgQ29kZU1pcnJvci5zY3JvbGxiYXJNb2RlbCA9IHtcIm5hdGl2ZVwiOiBOYXRpdmVTY3JvbGxiYXJzLCBcIm51bGxcIjogTnVsbFNjcm9sbGJhcnN9O1xuXG4gIGZ1bmN0aW9uIGluaXRTY3JvbGxiYXJzKGNtKSB7XG4gICAgaWYgKGNtLmRpc3BsYXkuc2Nyb2xsYmFycykge1xuICAgICAgY20uZGlzcGxheS5zY3JvbGxiYXJzLmNsZWFyKCk7XG4gICAgICBpZiAoY20uZGlzcGxheS5zY3JvbGxiYXJzLmFkZENsYXNzKVxuICAgICAgICBybUNsYXNzKGNtLmRpc3BsYXkud3JhcHBlciwgY20uZGlzcGxheS5zY3JvbGxiYXJzLmFkZENsYXNzKTtcbiAgICB9XG5cbiAgICBjbS5kaXNwbGF5LnNjcm9sbGJhcnMgPSBuZXcgQ29kZU1pcnJvci5zY3JvbGxiYXJNb2RlbFtjbS5vcHRpb25zLnNjcm9sbGJhclN0eWxlXShmdW5jdGlvbihub2RlKSB7XG4gICAgICBjbS5kaXNwbGF5LndyYXBwZXIuaW5zZXJ0QmVmb3JlKG5vZGUsIGNtLmRpc3BsYXkuc2Nyb2xsYmFyRmlsbGVyKTtcbiAgICAgIC8vIFByZXZlbnQgY2xpY2tzIGluIHRoZSBzY3JvbGxiYXJzIGZyb20ga2lsbGluZyBmb2N1c1xuICAgICAgb24obm9kZSwgXCJtb3VzZWRvd25cIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChjbS5zdGF0ZS5mb2N1c2VkKSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBjbS5kaXNwbGF5LmlucHV0LmZvY3VzKCk7IH0sIDApO1xuICAgICAgfSk7XG4gICAgICBub2RlLnNldEF0dHJpYnV0ZShcImNtLW5vdC1jb250ZW50XCIsIFwidHJ1ZVwiKTtcbiAgICB9LCBmdW5jdGlvbihwb3MsIGF4aXMpIHtcbiAgICAgIGlmIChheGlzID09IFwiaG9yaXpvbnRhbFwiKSBzZXRTY3JvbGxMZWZ0KGNtLCBwb3MpO1xuICAgICAgZWxzZSBzZXRTY3JvbGxUb3AoY20sIHBvcyk7XG4gICAgfSwgY20pO1xuICAgIGlmIChjbS5kaXNwbGF5LnNjcm9sbGJhcnMuYWRkQ2xhc3MpXG4gICAgICBhZGRDbGFzcyhjbS5kaXNwbGF5LndyYXBwZXIsIGNtLmRpc3BsYXkuc2Nyb2xsYmFycy5hZGRDbGFzcyk7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVTY3JvbGxiYXJzKGNtLCBtZWFzdXJlKSB7XG4gICAgaWYgKCFtZWFzdXJlKSBtZWFzdXJlID0gbWVhc3VyZUZvclNjcm9sbGJhcnMoY20pO1xuICAgIHZhciBzdGFydFdpZHRoID0gY20uZGlzcGxheS5iYXJXaWR0aCwgc3RhcnRIZWlnaHQgPSBjbS5kaXNwbGF5LmJhckhlaWdodDtcbiAgICB1cGRhdGVTY3JvbGxiYXJzSW5uZXIoY20sIG1lYXN1cmUpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNCAmJiBzdGFydFdpZHRoICE9IGNtLmRpc3BsYXkuYmFyV2lkdGggfHwgc3RhcnRIZWlnaHQgIT0gY20uZGlzcGxheS5iYXJIZWlnaHQ7IGkrKykge1xuICAgICAgaWYgKHN0YXJ0V2lkdGggIT0gY20uZGlzcGxheS5iYXJXaWR0aCAmJiBjbS5vcHRpb25zLmxpbmVXcmFwcGluZylcbiAgICAgICAgdXBkYXRlSGVpZ2h0c0luVmlld3BvcnQoY20pO1xuICAgICAgdXBkYXRlU2Nyb2xsYmFyc0lubmVyKGNtLCBtZWFzdXJlRm9yU2Nyb2xsYmFycyhjbSkpO1xuICAgICAgc3RhcnRXaWR0aCA9IGNtLmRpc3BsYXkuYmFyV2lkdGg7IHN0YXJ0SGVpZ2h0ID0gY20uZGlzcGxheS5iYXJIZWlnaHQ7XG4gICAgfVxuICB9XG5cbiAgLy8gUmUtc3luY2hyb25pemUgdGhlIGZha2Ugc2Nyb2xsYmFycyB3aXRoIHRoZSBhY3R1YWwgc2l6ZSBvZiB0aGVcbiAgLy8gY29udGVudC5cbiAgZnVuY3Rpb24gdXBkYXRlU2Nyb2xsYmFyc0lubmVyKGNtLCBtZWFzdXJlKSB7XG4gICAgdmFyIGQgPSBjbS5kaXNwbGF5O1xuICAgIHZhciBzaXplcyA9IGQuc2Nyb2xsYmFycy51cGRhdGUobWVhc3VyZSk7XG5cbiAgICBkLnNpemVyLnN0eWxlLnBhZGRpbmdSaWdodCA9IChkLmJhcldpZHRoID0gc2l6ZXMucmlnaHQpICsgXCJweFwiO1xuICAgIGQuc2l6ZXIuc3R5bGUucGFkZGluZ0JvdHRvbSA9IChkLmJhckhlaWdodCA9IHNpemVzLmJvdHRvbSkgKyBcInB4XCI7XG5cbiAgICBpZiAoc2l6ZXMucmlnaHQgJiYgc2l6ZXMuYm90dG9tKSB7XG4gICAgICBkLnNjcm9sbGJhckZpbGxlci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgZC5zY3JvbGxiYXJGaWxsZXIuc3R5bGUuaGVpZ2h0ID0gc2l6ZXMuYm90dG9tICsgXCJweFwiO1xuICAgICAgZC5zY3JvbGxiYXJGaWxsZXIuc3R5bGUud2lkdGggPSBzaXplcy5yaWdodCArIFwicHhcIjtcbiAgICB9IGVsc2UgZC5zY3JvbGxiYXJGaWxsZXIuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgaWYgKHNpemVzLmJvdHRvbSAmJiBjbS5vcHRpb25zLmNvdmVyR3V0dGVyTmV4dFRvU2Nyb2xsYmFyICYmIGNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIpIHtcbiAgICAgIGQuZ3V0dGVyRmlsbGVyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICBkLmd1dHRlckZpbGxlci5zdHlsZS5oZWlnaHQgPSBzaXplcy5ib3R0b20gKyBcInB4XCI7XG4gICAgICBkLmd1dHRlckZpbGxlci5zdHlsZS53aWR0aCA9IG1lYXN1cmUuZ3V0dGVyV2lkdGggKyBcInB4XCI7XG4gICAgfSBlbHNlIGQuZ3V0dGVyRmlsbGVyLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICB9XG5cbiAgLy8gQ29tcHV0ZSB0aGUgbGluZXMgdGhhdCBhcmUgdmlzaWJsZSBpbiBhIGdpdmVuIHZpZXdwb3J0IChkZWZhdWx0c1xuICAvLyB0aGUgdGhlIGN1cnJlbnQgc2Nyb2xsIHBvc2l0aW9uKS4gdmlld3BvcnQgbWF5IGNvbnRhaW4gdG9wLFxuICAvLyBoZWlnaHQsIGFuZCBlbnN1cmUgKHNlZSBvcC5zY3JvbGxUb1BvcykgcHJvcGVydGllcy5cbiAgZnVuY3Rpb24gdmlzaWJsZUxpbmVzKGRpc3BsYXksIGRvYywgdmlld3BvcnQpIHtcbiAgICB2YXIgdG9wID0gdmlld3BvcnQgJiYgdmlld3BvcnQudG9wICE9IG51bGwgPyBNYXRoLm1heCgwLCB2aWV3cG9ydC50b3ApIDogZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3A7XG4gICAgdG9wID0gTWF0aC5mbG9vcih0b3AgLSBwYWRkaW5nVG9wKGRpc3BsYXkpKTtcbiAgICB2YXIgYm90dG9tID0gdmlld3BvcnQgJiYgdmlld3BvcnQuYm90dG9tICE9IG51bGwgPyB2aWV3cG9ydC5ib3R0b20gOiB0b3AgKyBkaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0O1xuXG4gICAgdmFyIGZyb20gPSBsaW5lQXRIZWlnaHQoZG9jLCB0b3ApLCB0byA9IGxpbmVBdEhlaWdodChkb2MsIGJvdHRvbSk7XG4gICAgLy8gRW5zdXJlIGlzIGEge2Zyb206IHtsaW5lLCBjaH0sIHRvOiB7bGluZSwgY2h9fSBvYmplY3QsIGFuZFxuICAgIC8vIGZvcmNlcyB0aG9zZSBsaW5lcyBpbnRvIHRoZSB2aWV3cG9ydCAoaWYgcG9zc2libGUpLlxuICAgIGlmICh2aWV3cG9ydCAmJiB2aWV3cG9ydC5lbnN1cmUpIHtcbiAgICAgIHZhciBlbnN1cmVGcm9tID0gdmlld3BvcnQuZW5zdXJlLmZyb20ubGluZSwgZW5zdXJlVG8gPSB2aWV3cG9ydC5lbnN1cmUudG8ubGluZTtcbiAgICAgIGlmIChlbnN1cmVGcm9tIDwgZnJvbSkge1xuICAgICAgICBmcm9tID0gZW5zdXJlRnJvbTtcbiAgICAgICAgdG8gPSBsaW5lQXRIZWlnaHQoZG9jLCBoZWlnaHRBdExpbmUoZ2V0TGluZShkb2MsIGVuc3VyZUZyb20pKSArIGRpc3BsYXkud3JhcHBlci5jbGllbnRIZWlnaHQpO1xuICAgICAgfSBlbHNlIGlmIChNYXRoLm1pbihlbnN1cmVUbywgZG9jLmxhc3RMaW5lKCkpID49IHRvKSB7XG4gICAgICAgIGZyb20gPSBsaW5lQXRIZWlnaHQoZG9jLCBoZWlnaHRBdExpbmUoZ2V0TGluZShkb2MsIGVuc3VyZVRvKSkgLSBkaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0KTtcbiAgICAgICAgdG8gPSBlbnN1cmVUbztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtmcm9tOiBmcm9tLCB0bzogTWF0aC5tYXgodG8sIGZyb20gKyAxKX07XG4gIH1cblxuICAvLyBMSU5FIE5VTUJFUlNcblxuICAvLyBSZS1hbGlnbiBsaW5lIG51bWJlcnMgYW5kIGd1dHRlciBtYXJrcyB0byBjb21wZW5zYXRlIGZvclxuICAvLyBob3Jpem9udGFsIHNjcm9sbGluZy5cbiAgZnVuY3Rpb24gYWxpZ25Ib3Jpem9udGFsbHkoY20pIHtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIHZpZXcgPSBkaXNwbGF5LnZpZXc7XG4gICAgaWYgKCFkaXNwbGF5LmFsaWduV2lkZ2V0cyAmJiAoIWRpc3BsYXkuZ3V0dGVycy5maXJzdENoaWxkIHx8ICFjbS5vcHRpb25zLmZpeGVkR3V0dGVyKSkgcmV0dXJuO1xuICAgIHZhciBjb21wID0gY29tcGVuc2F0ZUZvckhTY3JvbGwoZGlzcGxheSkgLSBkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbExlZnQgKyBjbS5kb2Muc2Nyb2xsTGVmdDtcbiAgICB2YXIgZ3V0dGVyVyA9IGRpc3BsYXkuZ3V0dGVycy5vZmZzZXRXaWR0aCwgbGVmdCA9IGNvbXAgKyBcInB4XCI7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aWV3Lmxlbmd0aDsgaSsrKSBpZiAoIXZpZXdbaV0uaGlkZGVuKSB7XG4gICAgICBpZiAoY20ub3B0aW9ucy5maXhlZEd1dHRlciAmJiB2aWV3W2ldLmd1dHRlcilcbiAgICAgICAgdmlld1tpXS5ndXR0ZXIuc3R5bGUubGVmdCA9IGxlZnQ7XG4gICAgICB2YXIgYWxpZ24gPSB2aWV3W2ldLmFsaWduYWJsZTtcbiAgICAgIGlmIChhbGlnbikgZm9yICh2YXIgaiA9IDA7IGogPCBhbGlnbi5sZW5ndGg7IGorKylcbiAgICAgICAgYWxpZ25bal0uc3R5bGUubGVmdCA9IGxlZnQ7XG4gICAgfVxuICAgIGlmIChjbS5vcHRpb25zLmZpeGVkR3V0dGVyKVxuICAgICAgZGlzcGxheS5ndXR0ZXJzLnN0eWxlLmxlZnQgPSAoY29tcCArIGd1dHRlclcpICsgXCJweFwiO1xuICB9XG5cbiAgLy8gVXNlZCB0byBlbnN1cmUgdGhhdCB0aGUgbGluZSBudW1iZXIgZ3V0dGVyIGlzIHN0aWxsIHRoZSByaWdodFxuICAvLyBzaXplIGZvciB0aGUgY3VycmVudCBkb2N1bWVudCBzaXplLiBSZXR1cm5zIHRydWUgd2hlbiBhbiB1cGRhdGVcbiAgLy8gaXMgbmVlZGVkLlxuICBmdW5jdGlvbiBtYXliZVVwZGF0ZUxpbmVOdW1iZXJXaWR0aChjbSkge1xuICAgIGlmICghY20ub3B0aW9ucy5saW5lTnVtYmVycykgcmV0dXJuIGZhbHNlO1xuICAgIHZhciBkb2MgPSBjbS5kb2MsIGxhc3QgPSBsaW5lTnVtYmVyRm9yKGNtLm9wdGlvbnMsIGRvYy5maXJzdCArIGRvYy5zaXplIC0gMSksIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIGlmIChsYXN0Lmxlbmd0aCAhPSBkaXNwbGF5LmxpbmVOdW1DaGFycykge1xuICAgICAgdmFyIHRlc3QgPSBkaXNwbGF5Lm1lYXN1cmUuYXBwZW5kQ2hpbGQoZWx0KFwiZGl2XCIsIFtlbHQoXCJkaXZcIiwgbGFzdCldLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQ29kZU1pcnJvci1saW5lbnVtYmVyIENvZGVNaXJyb3ItZ3V0dGVyLWVsdFwiKSk7XG4gICAgICB2YXIgaW5uZXJXID0gdGVzdC5maXJzdENoaWxkLm9mZnNldFdpZHRoLCBwYWRkaW5nID0gdGVzdC5vZmZzZXRXaWR0aCAtIGlubmVyVztcbiAgICAgIGRpc3BsYXkubGluZUd1dHRlci5zdHlsZS53aWR0aCA9IFwiXCI7XG4gICAgICBkaXNwbGF5LmxpbmVOdW1Jbm5lcldpZHRoID0gTWF0aC5tYXgoaW5uZXJXLCBkaXNwbGF5LmxpbmVHdXR0ZXIub2Zmc2V0V2lkdGggLSBwYWRkaW5nKSArIDE7XG4gICAgICBkaXNwbGF5LmxpbmVOdW1XaWR0aCA9IGRpc3BsYXkubGluZU51bUlubmVyV2lkdGggKyBwYWRkaW5nO1xuICAgICAgZGlzcGxheS5saW5lTnVtQ2hhcnMgPSBkaXNwbGF5LmxpbmVOdW1Jbm5lcldpZHRoID8gbGFzdC5sZW5ndGggOiAtMTtcbiAgICAgIGRpc3BsYXkubGluZUd1dHRlci5zdHlsZS53aWR0aCA9IGRpc3BsYXkubGluZU51bVdpZHRoICsgXCJweFwiO1xuICAgICAgdXBkYXRlR3V0dGVyU3BhY2UoY20pO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxpbmVOdW1iZXJGb3Iob3B0aW9ucywgaSkge1xuICAgIHJldHVybiBTdHJpbmcob3B0aW9ucy5saW5lTnVtYmVyRm9ybWF0dGVyKGkgKyBvcHRpb25zLmZpcnN0TGluZU51bWJlcikpO1xuICB9XG5cbiAgLy8gQ29tcHV0ZXMgZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0ICsgZGlzcGxheS5ndXR0ZXJzLm9mZnNldFdpZHRoLFxuICAvLyBidXQgdXNpbmcgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IHRvIGdldCBhIHN1Yi1waXhlbC1hY2N1cmF0ZVxuICAvLyByZXN1bHQuXG4gIGZ1bmN0aW9uIGNvbXBlbnNhdGVGb3JIU2Nyb2xsKGRpc3BsYXkpIHtcbiAgICByZXR1cm4gZGlzcGxheS5zY3JvbGxlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0IC0gZGlzcGxheS5zaXplci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xuICB9XG5cbiAgLy8gRElTUExBWSBEUkFXSU5HXG5cbiAgZnVuY3Rpb24gRGlzcGxheVVwZGF0ZShjbSwgdmlld3BvcnQsIGZvcmNlKSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuXG4gICAgdGhpcy52aWV3cG9ydCA9IHZpZXdwb3J0O1xuICAgIC8vIFN0b3JlIHNvbWUgdmFsdWVzIHRoYXQgd2UnbGwgbmVlZCBsYXRlciAoYnV0IGRvbid0IHdhbnQgdG8gZm9yY2UgYSByZWxheW91dCBmb3IpXG4gICAgdGhpcy52aXNpYmxlID0gdmlzaWJsZUxpbmVzKGRpc3BsYXksIGNtLmRvYywgdmlld3BvcnQpO1xuICAgIHRoaXMuZWRpdG9ySXNIaWRkZW4gPSAhZGlzcGxheS53cmFwcGVyLm9mZnNldFdpZHRoO1xuICAgIHRoaXMud3JhcHBlckhlaWdodCA9IGRpc3BsYXkud3JhcHBlci5jbGllbnRIZWlnaHQ7XG4gICAgdGhpcy53cmFwcGVyV2lkdGggPSBkaXNwbGF5LndyYXBwZXIuY2xpZW50V2lkdGg7XG4gICAgdGhpcy5vbGREaXNwbGF5V2lkdGggPSBkaXNwbGF5V2lkdGgoY20pO1xuICAgIHRoaXMuZm9yY2UgPSBmb3JjZTtcbiAgICB0aGlzLmRpbXMgPSBnZXREaW1lbnNpb25zKGNtKTtcbiAgICB0aGlzLmV2ZW50cyA9IFtdO1xuICB9XG5cbiAgRGlzcGxheVVwZGF0ZS5wcm90b3R5cGUuc2lnbmFsID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuICAgIGlmIChoYXNIYW5kbGVyKGVtaXR0ZXIsIHR5cGUpKVxuICAgICAgdGhpcy5ldmVudHMucHVzaChhcmd1bWVudHMpO1xuICB9O1xuICBEaXNwbGF5VXBkYXRlLnByb3RvdHlwZS5maW5pc2ggPSBmdW5jdGlvbigpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZXZlbnRzLmxlbmd0aDsgaSsrKVxuICAgICAgc2lnbmFsLmFwcGx5KG51bGwsIHRoaXMuZXZlbnRzW2ldKTtcbiAgfTtcblxuICBmdW5jdGlvbiBtYXliZUNsaXBTY3JvbGxiYXJzKGNtKSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIGlmICghZGlzcGxheS5zY3JvbGxiYXJzQ2xpcHBlZCAmJiBkaXNwbGF5LnNjcm9sbGVyLm9mZnNldFdpZHRoKSB7XG4gICAgICBkaXNwbGF5Lm5hdGl2ZUJhcldpZHRoID0gZGlzcGxheS5zY3JvbGxlci5vZmZzZXRXaWR0aCAtIGRpc3BsYXkuc2Nyb2xsZXIuY2xpZW50V2lkdGg7XG4gICAgICBkaXNwbGF5LmhlaWdodEZvcmNlci5zdHlsZS5oZWlnaHQgPSBzY3JvbGxHYXAoY20pICsgXCJweFwiO1xuICAgICAgZGlzcGxheS5zaXplci5zdHlsZS5tYXJnaW5Cb3R0b20gPSAtZGlzcGxheS5uYXRpdmVCYXJXaWR0aCArIFwicHhcIjtcbiAgICAgIGRpc3BsYXkuc2l6ZXIuc3R5bGUuYm9yZGVyUmlnaHRXaWR0aCA9IHNjcm9sbEdhcChjbSkgKyBcInB4XCI7XG4gICAgICBkaXNwbGF5LnNjcm9sbGJhcnNDbGlwcGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvLyBEb2VzIHRoZSBhY3R1YWwgdXBkYXRpbmcgb2YgdGhlIGxpbmUgZGlzcGxheS4gQmFpbHMgb3V0XG4gIC8vIChyZXR1cm5pbmcgZmFsc2UpIHdoZW4gdGhlcmUgaXMgbm90aGluZyB0byBiZSBkb25lIGFuZCBmb3JjZWQgaXNcbiAgLy8gZmFsc2UuXG4gIGZ1bmN0aW9uIHVwZGF0ZURpc3BsYXlJZk5lZWRlZChjbSwgdXBkYXRlKSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBkb2MgPSBjbS5kb2M7XG5cbiAgICBpZiAodXBkYXRlLmVkaXRvcklzSGlkZGVuKSB7XG4gICAgICByZXNldFZpZXcoY20pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIEJhaWwgb3V0IGlmIHRoZSB2aXNpYmxlIGFyZWEgaXMgYWxyZWFkeSByZW5kZXJlZCBhbmQgbm90aGluZyBjaGFuZ2VkLlxuICAgIGlmICghdXBkYXRlLmZvcmNlICYmXG4gICAgICAgIHVwZGF0ZS52aXNpYmxlLmZyb20gPj0gZGlzcGxheS52aWV3RnJvbSAmJiB1cGRhdGUudmlzaWJsZS50byA8PSBkaXNwbGF5LnZpZXdUbyAmJlxuICAgICAgICAoZGlzcGxheS51cGRhdGVMaW5lTnVtYmVycyA9PSBudWxsIHx8IGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMgPj0gZGlzcGxheS52aWV3VG8pICYmXG4gICAgICAgIGRpc3BsYXkucmVuZGVyZWRWaWV3ID09IGRpc3BsYXkudmlldyAmJiBjb3VudERpcnR5VmlldyhjbSkgPT0gMClcbiAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIGlmIChtYXliZVVwZGF0ZUxpbmVOdW1iZXJXaWR0aChjbSkpIHtcbiAgICAgIHJlc2V0VmlldyhjbSk7XG4gICAgICB1cGRhdGUuZGltcyA9IGdldERpbWVuc2lvbnMoY20pO1xuICAgIH1cblxuICAgIC8vIENvbXB1dGUgYSBzdWl0YWJsZSBuZXcgdmlld3BvcnQgKGZyb20gJiB0bylcbiAgICB2YXIgZW5kID0gZG9jLmZpcnN0ICsgZG9jLnNpemU7XG4gICAgdmFyIGZyb20gPSBNYXRoLm1heCh1cGRhdGUudmlzaWJsZS5mcm9tIC0gY20ub3B0aW9ucy52aWV3cG9ydE1hcmdpbiwgZG9jLmZpcnN0KTtcbiAgICB2YXIgdG8gPSBNYXRoLm1pbihlbmQsIHVwZGF0ZS52aXNpYmxlLnRvICsgY20ub3B0aW9ucy52aWV3cG9ydE1hcmdpbik7XG4gICAgaWYgKGRpc3BsYXkudmlld0Zyb20gPCBmcm9tICYmIGZyb20gLSBkaXNwbGF5LnZpZXdGcm9tIDwgMjApIGZyb20gPSBNYXRoLm1heChkb2MuZmlyc3QsIGRpc3BsYXkudmlld0Zyb20pO1xuICAgIGlmIChkaXNwbGF5LnZpZXdUbyA+IHRvICYmIGRpc3BsYXkudmlld1RvIC0gdG8gPCAyMCkgdG8gPSBNYXRoLm1pbihlbmQsIGRpc3BsYXkudmlld1RvKTtcbiAgICBpZiAoc2F3Q29sbGFwc2VkU3BhbnMpIHtcbiAgICAgIGZyb20gPSB2aXN1YWxMaW5lTm8oY20uZG9jLCBmcm9tKTtcbiAgICAgIHRvID0gdmlzdWFsTGluZUVuZE5vKGNtLmRvYywgdG8pO1xuICAgIH1cblxuICAgIHZhciBkaWZmZXJlbnQgPSBmcm9tICE9IGRpc3BsYXkudmlld0Zyb20gfHwgdG8gIT0gZGlzcGxheS52aWV3VG8gfHxcbiAgICAgIGRpc3BsYXkubGFzdFdyYXBIZWlnaHQgIT0gdXBkYXRlLndyYXBwZXJIZWlnaHQgfHwgZGlzcGxheS5sYXN0V3JhcFdpZHRoICE9IHVwZGF0ZS53cmFwcGVyV2lkdGg7XG4gICAgYWRqdXN0VmlldyhjbSwgZnJvbSwgdG8pO1xuXG4gICAgZGlzcGxheS52aWV3T2Zmc2V0ID0gaGVpZ2h0QXRMaW5lKGdldExpbmUoY20uZG9jLCBkaXNwbGF5LnZpZXdGcm9tKSk7XG4gICAgLy8gUG9zaXRpb24gdGhlIG1vdmVyIGRpdiB0byBhbGlnbiB3aXRoIHRoZSBjdXJyZW50IHNjcm9sbCBwb3NpdGlvblxuICAgIGNtLmRpc3BsYXkubW92ZXIuc3R5bGUudG9wID0gZGlzcGxheS52aWV3T2Zmc2V0ICsgXCJweFwiO1xuXG4gICAgdmFyIHRvVXBkYXRlID0gY291bnREaXJ0eVZpZXcoY20pO1xuICAgIGlmICghZGlmZmVyZW50ICYmIHRvVXBkYXRlID09IDAgJiYgIXVwZGF0ZS5mb3JjZSAmJiBkaXNwbGF5LnJlbmRlcmVkVmlldyA9PSBkaXNwbGF5LnZpZXcgJiZcbiAgICAgICAgKGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMgPT0gbnVsbCB8fCBkaXNwbGF5LnVwZGF0ZUxpbmVOdW1iZXJzID49IGRpc3BsYXkudmlld1RvKSlcbiAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIC8vIEZvciBiaWcgY2hhbmdlcywgd2UgaGlkZSB0aGUgZW5jbG9zaW5nIGVsZW1lbnQgZHVyaW5nIHRoZVxuICAgIC8vIHVwZGF0ZSwgc2luY2UgdGhhdCBzcGVlZHMgdXAgdGhlIG9wZXJhdGlvbnMgb24gbW9zdCBicm93c2Vycy5cbiAgICB2YXIgZm9jdXNlZCA9IGFjdGl2ZUVsdCgpO1xuICAgIGlmICh0b1VwZGF0ZSA+IDQpIGRpc3BsYXkubGluZURpdi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgcGF0Y2hEaXNwbGF5KGNtLCBkaXNwbGF5LnVwZGF0ZUxpbmVOdW1iZXJzLCB1cGRhdGUuZGltcyk7XG4gICAgaWYgKHRvVXBkYXRlID4gNCkgZGlzcGxheS5saW5lRGl2LnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgIGRpc3BsYXkucmVuZGVyZWRWaWV3ID0gZGlzcGxheS52aWV3O1xuICAgIC8vIFRoZXJlIG1pZ2h0IGhhdmUgYmVlbiBhIHdpZGdldCB3aXRoIGEgZm9jdXNlZCBlbGVtZW50IHRoYXQgZ290XG4gICAgLy8gaGlkZGVuIG9yIHVwZGF0ZWQsIGlmIHNvIHJlLWZvY3VzIGl0LlxuICAgIGlmIChmb2N1c2VkICYmIGFjdGl2ZUVsdCgpICE9IGZvY3VzZWQgJiYgZm9jdXNlZC5vZmZzZXRIZWlnaHQpIGZvY3VzZWQuZm9jdXMoKTtcblxuICAgIC8vIFByZXZlbnQgc2VsZWN0aW9uIGFuZCBjdXJzb3JzIGZyb20gaW50ZXJmZXJpbmcgd2l0aCB0aGUgc2Nyb2xsXG4gICAgLy8gd2lkdGggYW5kIGhlaWdodC5cbiAgICByZW1vdmVDaGlsZHJlbihkaXNwbGF5LmN1cnNvckRpdik7XG4gICAgcmVtb3ZlQ2hpbGRyZW4oZGlzcGxheS5zZWxlY3Rpb25EaXYpO1xuICAgIGRpc3BsYXkuZ3V0dGVycy5zdHlsZS5oZWlnaHQgPSBkaXNwbGF5LnNpemVyLnN0eWxlLm1pbkhlaWdodCA9IDA7XG5cbiAgICBpZiAoZGlmZmVyZW50KSB7XG4gICAgICBkaXNwbGF5Lmxhc3RXcmFwSGVpZ2h0ID0gdXBkYXRlLndyYXBwZXJIZWlnaHQ7XG4gICAgICBkaXNwbGF5Lmxhc3RXcmFwV2lkdGggPSB1cGRhdGUud3JhcHBlcldpZHRoO1xuICAgICAgc3RhcnRXb3JrZXIoY20sIDQwMCk7XG4gICAgfVxuXG4gICAgZGlzcGxheS51cGRhdGVMaW5lTnVtYmVycyA9IG51bGw7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBvc3RVcGRhdGVEaXNwbGF5KGNtLCB1cGRhdGUpIHtcbiAgICB2YXIgdmlld3BvcnQgPSB1cGRhdGUudmlld3BvcnQ7XG4gICAgZm9yICh2YXIgZmlyc3QgPSB0cnVlOzsgZmlyc3QgPSBmYWxzZSkge1xuICAgICAgaWYgKCFmaXJzdCB8fCAhY20ub3B0aW9ucy5saW5lV3JhcHBpbmcgfHwgdXBkYXRlLm9sZERpc3BsYXlXaWR0aCA9PSBkaXNwbGF5V2lkdGgoY20pKSB7XG4gICAgICAgIC8vIENsaXAgZm9yY2VkIHZpZXdwb3J0IHRvIGFjdHVhbCBzY3JvbGxhYmxlIGFyZWEuXG4gICAgICAgIGlmICh2aWV3cG9ydCAmJiB2aWV3cG9ydC50b3AgIT0gbnVsbClcbiAgICAgICAgICB2aWV3cG9ydCA9IHt0b3A6IE1hdGgubWluKGNtLmRvYy5oZWlnaHQgKyBwYWRkaW5nVmVydChjbS5kaXNwbGF5KSAtIGRpc3BsYXlIZWlnaHQoY20pLCB2aWV3cG9ydC50b3ApfTtcbiAgICAgICAgLy8gVXBkYXRlZCBsaW5lIGhlaWdodHMgbWlnaHQgcmVzdWx0IGluIHRoZSBkcmF3biBhcmVhIG5vdFxuICAgICAgICAvLyBhY3R1YWxseSBjb3ZlcmluZyB0aGUgdmlld3BvcnQuIEtlZXAgbG9vcGluZyB1bnRpbCBpdCBkb2VzLlxuICAgICAgICB1cGRhdGUudmlzaWJsZSA9IHZpc2libGVMaW5lcyhjbS5kaXNwbGF5LCBjbS5kb2MsIHZpZXdwb3J0KTtcbiAgICAgICAgaWYgKHVwZGF0ZS52aXNpYmxlLmZyb20gPj0gY20uZGlzcGxheS52aWV3RnJvbSAmJiB1cGRhdGUudmlzaWJsZS50byA8PSBjbS5kaXNwbGF5LnZpZXdUbylcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmICghdXBkYXRlRGlzcGxheUlmTmVlZGVkKGNtLCB1cGRhdGUpKSBicmVhaztcbiAgICAgIHVwZGF0ZUhlaWdodHNJblZpZXdwb3J0KGNtKTtcbiAgICAgIHZhciBiYXJNZWFzdXJlID0gbWVhc3VyZUZvclNjcm9sbGJhcnMoY20pO1xuICAgICAgdXBkYXRlU2VsZWN0aW9uKGNtKTtcbiAgICAgIHNldERvY3VtZW50SGVpZ2h0KGNtLCBiYXJNZWFzdXJlKTtcbiAgICAgIHVwZGF0ZVNjcm9sbGJhcnMoY20sIGJhck1lYXN1cmUpO1xuICAgIH1cblxuICAgIHVwZGF0ZS5zaWduYWwoY20sIFwidXBkYXRlXCIsIGNtKTtcbiAgICBpZiAoY20uZGlzcGxheS52aWV3RnJvbSAhPSBjbS5kaXNwbGF5LnJlcG9ydGVkVmlld0Zyb20gfHwgY20uZGlzcGxheS52aWV3VG8gIT0gY20uZGlzcGxheS5yZXBvcnRlZFZpZXdUbykge1xuICAgICAgdXBkYXRlLnNpZ25hbChjbSwgXCJ2aWV3cG9ydENoYW5nZVwiLCBjbSwgY20uZGlzcGxheS52aWV3RnJvbSwgY20uZGlzcGxheS52aWV3VG8pO1xuICAgICAgY20uZGlzcGxheS5yZXBvcnRlZFZpZXdGcm9tID0gY20uZGlzcGxheS52aWV3RnJvbTsgY20uZGlzcGxheS5yZXBvcnRlZFZpZXdUbyA9IGNtLmRpc3BsYXkudmlld1RvO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZURpc3BsYXlTaW1wbGUoY20sIHZpZXdwb3J0KSB7XG4gICAgdmFyIHVwZGF0ZSA9IG5ldyBEaXNwbGF5VXBkYXRlKGNtLCB2aWV3cG9ydCk7XG4gICAgaWYgKHVwZGF0ZURpc3BsYXlJZk5lZWRlZChjbSwgdXBkYXRlKSkge1xuICAgICAgdXBkYXRlSGVpZ2h0c0luVmlld3BvcnQoY20pO1xuICAgICAgcG9zdFVwZGF0ZURpc3BsYXkoY20sIHVwZGF0ZSk7XG4gICAgICB2YXIgYmFyTWVhc3VyZSA9IG1lYXN1cmVGb3JTY3JvbGxiYXJzKGNtKTtcbiAgICAgIHVwZGF0ZVNlbGVjdGlvbihjbSk7XG4gICAgICBzZXREb2N1bWVudEhlaWdodChjbSwgYmFyTWVhc3VyZSk7XG4gICAgICB1cGRhdGVTY3JvbGxiYXJzKGNtLCBiYXJNZWFzdXJlKTtcbiAgICAgIHVwZGF0ZS5maW5pc2goKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzZXREb2N1bWVudEhlaWdodChjbSwgbWVhc3VyZSkge1xuICAgIGNtLmRpc3BsYXkuc2l6ZXIuc3R5bGUubWluSGVpZ2h0ID0gbWVhc3VyZS5kb2NIZWlnaHQgKyBcInB4XCI7XG4gICAgdmFyIHRvdGFsID0gbWVhc3VyZS5kb2NIZWlnaHQgKyBjbS5kaXNwbGF5LmJhckhlaWdodDtcbiAgICBjbS5kaXNwbGF5LmhlaWdodEZvcmNlci5zdHlsZS50b3AgPSB0b3RhbCArIFwicHhcIjtcbiAgICBjbS5kaXNwbGF5Lmd1dHRlcnMuc3R5bGUuaGVpZ2h0ID0gTWF0aC5tYXgodG90YWwgKyBzY3JvbGxHYXAoY20pLCBtZWFzdXJlLmNsaWVudEhlaWdodCkgKyBcInB4XCI7XG4gIH1cblxuICAvLyBSZWFkIHRoZSBhY3R1YWwgaGVpZ2h0cyBvZiB0aGUgcmVuZGVyZWQgbGluZXMsIGFuZCB1cGRhdGUgdGhlaXJcbiAgLy8gc3RvcmVkIGhlaWdodHMgdG8gbWF0Y2guXG4gIGZ1bmN0aW9uIHVwZGF0ZUhlaWdodHNJblZpZXdwb3J0KGNtKSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIHZhciBwcmV2Qm90dG9tID0gZGlzcGxheS5saW5lRGl2Lm9mZnNldFRvcDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpc3BsYXkudmlldy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGN1ciA9IGRpc3BsYXkudmlld1tpXSwgaGVpZ2h0O1xuICAgICAgaWYgKGN1ci5oaWRkZW4pIGNvbnRpbnVlO1xuICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA4KSB7XG4gICAgICAgIHZhciBib3QgPSBjdXIubm9kZS5vZmZzZXRUb3AgKyBjdXIubm9kZS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgIGhlaWdodCA9IGJvdCAtIHByZXZCb3R0b207XG4gICAgICAgIHByZXZCb3R0b20gPSBib3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYm94ID0gY3VyLm5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGhlaWdodCA9IGJveC5ib3R0b20gLSBib3gudG9wO1xuICAgICAgfVxuICAgICAgdmFyIGRpZmYgPSBjdXIubGluZS5oZWlnaHQgLSBoZWlnaHQ7XG4gICAgICBpZiAoaGVpZ2h0IDwgMikgaGVpZ2h0ID0gdGV4dEhlaWdodChkaXNwbGF5KTtcbiAgICAgIGlmIChkaWZmID4gLjAwMSB8fCBkaWZmIDwgLS4wMDEpIHtcbiAgICAgICAgdXBkYXRlTGluZUhlaWdodChjdXIubGluZSwgaGVpZ2h0KTtcbiAgICAgICAgdXBkYXRlV2lkZ2V0SGVpZ2h0KGN1ci5saW5lKTtcbiAgICAgICAgaWYgKGN1ci5yZXN0KSBmb3IgKHZhciBqID0gMDsgaiA8IGN1ci5yZXN0Lmxlbmd0aDsgaisrKVxuICAgICAgICAgIHVwZGF0ZVdpZGdldEhlaWdodChjdXIucmVzdFtqXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gUmVhZCBhbmQgc3RvcmUgdGhlIGhlaWdodCBvZiBsaW5lIHdpZGdldHMgYXNzb2NpYXRlZCB3aXRoIHRoZVxuICAvLyBnaXZlbiBsaW5lLlxuICBmdW5jdGlvbiB1cGRhdGVXaWRnZXRIZWlnaHQobGluZSkge1xuICAgIGlmIChsaW5lLndpZGdldHMpIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZS53aWRnZXRzLmxlbmd0aDsgKytpKVxuICAgICAgbGluZS53aWRnZXRzW2ldLmhlaWdodCA9IGxpbmUud2lkZ2V0c1tpXS5ub2RlLm9mZnNldEhlaWdodDtcbiAgfVxuXG4gIC8vIERvIGEgYnVsay1yZWFkIG9mIHRoZSBET00gcG9zaXRpb25zIGFuZCBzaXplcyBuZWVkZWQgdG8gZHJhdyB0aGVcbiAgLy8gdmlldywgc28gdGhhdCB3ZSBkb24ndCBpbnRlcmxlYXZlIHJlYWRpbmcgYW5kIHdyaXRpbmcgdG8gdGhlIERPTS5cbiAgZnVuY3Rpb24gZ2V0RGltZW5zaW9ucyhjbSkge1xuICAgIHZhciBkID0gY20uZGlzcGxheSwgbGVmdCA9IHt9LCB3aWR0aCA9IHt9O1xuICAgIHZhciBndXR0ZXJMZWZ0ID0gZC5ndXR0ZXJzLmNsaWVudExlZnQ7XG4gICAgZm9yICh2YXIgbiA9IGQuZ3V0dGVycy5maXJzdENoaWxkLCBpID0gMDsgbjsgbiA9IG4ubmV4dFNpYmxpbmcsICsraSkge1xuICAgICAgbGVmdFtjbS5vcHRpb25zLmd1dHRlcnNbaV1dID0gbi5vZmZzZXRMZWZ0ICsgbi5jbGllbnRMZWZ0ICsgZ3V0dGVyTGVmdDtcbiAgICAgIHdpZHRoW2NtLm9wdGlvbnMuZ3V0dGVyc1tpXV0gPSBuLmNsaWVudFdpZHRoO1xuICAgIH1cbiAgICByZXR1cm4ge2ZpeGVkUG9zOiBjb21wZW5zYXRlRm9ySFNjcm9sbChkKSxcbiAgICAgICAgICAgIGd1dHRlclRvdGFsV2lkdGg6IGQuZ3V0dGVycy5vZmZzZXRXaWR0aCxcbiAgICAgICAgICAgIGd1dHRlckxlZnQ6IGxlZnQsXG4gICAgICAgICAgICBndXR0ZXJXaWR0aDogd2lkdGgsXG4gICAgICAgICAgICB3cmFwcGVyV2lkdGg6IGQud3JhcHBlci5jbGllbnRXaWR0aH07XG4gIH1cblxuICAvLyBTeW5jIHRoZSBhY3R1YWwgZGlzcGxheSBET00gc3RydWN0dXJlIHdpdGggZGlzcGxheS52aWV3LCByZW1vdmluZ1xuICAvLyBub2RlcyBmb3IgbGluZXMgdGhhdCBhcmUgbm8gbG9uZ2VyIGluIHZpZXcsIGFuZCBjcmVhdGluZyB0aGUgb25lc1xuICAvLyB0aGF0IGFyZSBub3QgdGhlcmUgeWV0LCBhbmQgdXBkYXRpbmcgdGhlIG9uZXMgdGhhdCBhcmUgb3V0IG9mXG4gIC8vIGRhdGUuXG4gIGZ1bmN0aW9uIHBhdGNoRGlzcGxheShjbSwgdXBkYXRlTnVtYmVyc0Zyb20sIGRpbXMpIHtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIGxpbmVOdW1iZXJzID0gY20ub3B0aW9ucy5saW5lTnVtYmVycztcbiAgICB2YXIgY29udGFpbmVyID0gZGlzcGxheS5saW5lRGl2LCBjdXIgPSBjb250YWluZXIuZmlyc3RDaGlsZDtcblxuICAgIGZ1bmN0aW9uIHJtKG5vZGUpIHtcbiAgICAgIHZhciBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcbiAgICAgIC8vIFdvcmtzIGFyb3VuZCBhIHRocm93LXNjcm9sbCBidWcgaW4gT1MgWCBXZWJraXRcbiAgICAgIGlmICh3ZWJraXQgJiYgbWFjICYmIGNtLmRpc3BsYXkuY3VycmVudFdoZWVsVGFyZ2V0ID09IG5vZGUpXG4gICAgICAgIG5vZGUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgZWxzZVxuICAgICAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgICByZXR1cm4gbmV4dDtcbiAgICB9XG5cbiAgICB2YXIgdmlldyA9IGRpc3BsYXkudmlldywgbGluZU4gPSBkaXNwbGF5LnZpZXdGcm9tO1xuICAgIC8vIExvb3Agb3ZlciB0aGUgZWxlbWVudHMgaW4gdGhlIHZpZXcsIHN5bmNpbmcgY3VyICh0aGUgRE9NIG5vZGVzXG4gICAgLy8gaW4gZGlzcGxheS5saW5lRGl2KSB3aXRoIHRoZSB2aWV3IGFzIHdlIGdvLlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmlldy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGxpbmVWaWV3ID0gdmlld1tpXTtcbiAgICAgIGlmIChsaW5lVmlldy5oaWRkZW4pIHtcbiAgICAgIH0gZWxzZSBpZiAoIWxpbmVWaWV3Lm5vZGUgfHwgbGluZVZpZXcubm9kZS5wYXJlbnROb2RlICE9IGNvbnRhaW5lcikgeyAvLyBOb3QgZHJhd24geWV0XG4gICAgICAgIHZhciBub2RlID0gYnVpbGRMaW5lRWxlbWVudChjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKTtcbiAgICAgICAgY29udGFpbmVyLmluc2VydEJlZm9yZShub2RlLCBjdXIpO1xuICAgICAgfSBlbHNlIHsgLy8gQWxyZWFkeSBkcmF3blxuICAgICAgICB3aGlsZSAoY3VyICE9IGxpbmVWaWV3Lm5vZGUpIGN1ciA9IHJtKGN1cik7XG4gICAgICAgIHZhciB1cGRhdGVOdW1iZXIgPSBsaW5lTnVtYmVycyAmJiB1cGRhdGVOdW1iZXJzRnJvbSAhPSBudWxsICYmXG4gICAgICAgICAgdXBkYXRlTnVtYmVyc0Zyb20gPD0gbGluZU4gJiYgbGluZVZpZXcubGluZU51bWJlcjtcbiAgICAgICAgaWYgKGxpbmVWaWV3LmNoYW5nZXMpIHtcbiAgICAgICAgICBpZiAoaW5kZXhPZihsaW5lVmlldy5jaGFuZ2VzLCBcImd1dHRlclwiKSA+IC0xKSB1cGRhdGVOdW1iZXIgPSBmYWxzZTtcbiAgICAgICAgICB1cGRhdGVMaW5lRm9yQ2hhbmdlcyhjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXBkYXRlTnVtYmVyKSB7XG4gICAgICAgICAgcmVtb3ZlQ2hpbGRyZW4obGluZVZpZXcubGluZU51bWJlcik7XG4gICAgICAgICAgbGluZVZpZXcubGluZU51bWJlci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShsaW5lTnVtYmVyRm9yKGNtLm9wdGlvbnMsIGxpbmVOKSkpO1xuICAgICAgICB9XG4gICAgICAgIGN1ciA9IGxpbmVWaWV3Lm5vZGUubmV4dFNpYmxpbmc7XG4gICAgICB9XG4gICAgICBsaW5lTiArPSBsaW5lVmlldy5zaXplO1xuICAgIH1cbiAgICB3aGlsZSAoY3VyKSBjdXIgPSBybShjdXIpO1xuICB9XG5cbiAgLy8gV2hlbiBhbiBhc3BlY3Qgb2YgYSBsaW5lIGNoYW5nZXMsIGEgc3RyaW5nIGlzIGFkZGVkIHRvXG4gIC8vIGxpbmVWaWV3LmNoYW5nZXMuIFRoaXMgdXBkYXRlcyB0aGUgcmVsZXZhbnQgcGFydCBvZiB0aGUgbGluZSdzXG4gIC8vIERPTSBzdHJ1Y3R1cmUuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmVGb3JDaGFuZ2VzKGNtLCBsaW5lVmlldywgbGluZU4sIGRpbXMpIHtcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxpbmVWaWV3LmNoYW5nZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgIHZhciB0eXBlID0gbGluZVZpZXcuY2hhbmdlc1tqXTtcbiAgICAgIGlmICh0eXBlID09IFwidGV4dFwiKSB1cGRhdGVMaW5lVGV4dChjbSwgbGluZVZpZXcpO1xuICAgICAgZWxzZSBpZiAodHlwZSA9PSBcImd1dHRlclwiKSB1cGRhdGVMaW5lR3V0dGVyKGNtLCBsaW5lVmlldywgbGluZU4sIGRpbXMpO1xuICAgICAgZWxzZSBpZiAodHlwZSA9PSBcImNsYXNzXCIpIHVwZGF0ZUxpbmVDbGFzc2VzKGxpbmVWaWV3KTtcbiAgICAgIGVsc2UgaWYgKHR5cGUgPT0gXCJ3aWRnZXRcIikgdXBkYXRlTGluZVdpZGdldHMoY20sIGxpbmVWaWV3LCBkaW1zKTtcbiAgICB9XG4gICAgbGluZVZpZXcuY2hhbmdlcyA9IG51bGw7XG4gIH1cblxuICAvLyBMaW5lcyB3aXRoIGd1dHRlciBlbGVtZW50cywgd2lkZ2V0cyBvciBhIGJhY2tncm91bmQgY2xhc3MgbmVlZCB0b1xuICAvLyBiZSB3cmFwcGVkLCBhbmQgaGF2ZSB0aGUgZXh0cmEgZWxlbWVudHMgYWRkZWQgdG8gdGhlIHdyYXBwZXIgZGl2XG4gIGZ1bmN0aW9uIGVuc3VyZUxpbmVXcmFwcGVkKGxpbmVWaWV3KSB7XG4gICAgaWYgKGxpbmVWaWV3Lm5vZGUgPT0gbGluZVZpZXcudGV4dCkge1xuICAgICAgbGluZVZpZXcubm9kZSA9IGVsdChcImRpdlwiLCBudWxsLCBudWxsLCBcInBvc2l0aW9uOiByZWxhdGl2ZVwiKTtcbiAgICAgIGlmIChsaW5lVmlldy50ZXh0LnBhcmVudE5vZGUpXG4gICAgICAgIGxpbmVWaWV3LnRleHQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobGluZVZpZXcubm9kZSwgbGluZVZpZXcudGV4dCk7XG4gICAgICBsaW5lVmlldy5ub2RlLmFwcGVuZENoaWxkKGxpbmVWaWV3LnRleHQpO1xuICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA4KSBsaW5lVmlldy5ub2RlLnN0eWxlLnpJbmRleCA9IDI7XG4gICAgfVxuICAgIHJldHVybiBsaW5lVmlldy5ub2RlO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlTGluZUJhY2tncm91bmQobGluZVZpZXcpIHtcbiAgICB2YXIgY2xzID0gbGluZVZpZXcuYmdDbGFzcyA/IGxpbmVWaWV3LmJnQ2xhc3MgKyBcIiBcIiArIChsaW5lVmlldy5saW5lLmJnQ2xhc3MgfHwgXCJcIikgOiBsaW5lVmlldy5saW5lLmJnQ2xhc3M7XG4gICAgaWYgKGNscykgY2xzICs9IFwiIENvZGVNaXJyb3ItbGluZWJhY2tncm91bmRcIjtcbiAgICBpZiAobGluZVZpZXcuYmFja2dyb3VuZCkge1xuICAgICAgaWYgKGNscykgbGluZVZpZXcuYmFja2dyb3VuZC5jbGFzc05hbWUgPSBjbHM7XG4gICAgICBlbHNlIHsgbGluZVZpZXcuYmFja2dyb3VuZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGxpbmVWaWV3LmJhY2tncm91bmQpOyBsaW5lVmlldy5iYWNrZ3JvdW5kID0gbnVsbDsgfVxuICAgIH0gZWxzZSBpZiAoY2xzKSB7XG4gICAgICB2YXIgd3JhcCA9IGVuc3VyZUxpbmVXcmFwcGVkKGxpbmVWaWV3KTtcbiAgICAgIGxpbmVWaWV3LmJhY2tncm91bmQgPSB3cmFwLmluc2VydEJlZm9yZShlbHQoXCJkaXZcIiwgbnVsbCwgY2xzKSwgd3JhcC5maXJzdENoaWxkKTtcbiAgICB9XG4gIH1cblxuICAvLyBXcmFwcGVyIGFyb3VuZCBidWlsZExpbmVDb250ZW50IHdoaWNoIHdpbGwgcmV1c2UgdGhlIHN0cnVjdHVyZVxuICAvLyBpbiBkaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQgd2hlbiBwb3NzaWJsZS5cbiAgZnVuY3Rpb24gZ2V0TGluZUNvbnRlbnQoY20sIGxpbmVWaWV3KSB7XG4gICAgdmFyIGV4dCA9IGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZDtcbiAgICBpZiAoZXh0ICYmIGV4dC5saW5lID09IGxpbmVWaWV3LmxpbmUpIHtcbiAgICAgIGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZCA9IG51bGw7XG4gICAgICBsaW5lVmlldy5tZWFzdXJlID0gZXh0Lm1lYXN1cmU7XG4gICAgICByZXR1cm4gZXh0LmJ1aWx0O1xuICAgIH1cbiAgICByZXR1cm4gYnVpbGRMaW5lQ29udGVudChjbSwgbGluZVZpZXcpO1xuICB9XG5cbiAgLy8gUmVkcmF3IHRoZSBsaW5lJ3MgdGV4dC4gSW50ZXJhY3RzIHdpdGggdGhlIGJhY2tncm91bmQgYW5kIHRleHRcbiAgLy8gY2xhc3NlcyBiZWNhdXNlIHRoZSBtb2RlIG1heSBvdXRwdXQgdG9rZW5zIHRoYXQgaW5mbHVlbmNlIHRoZXNlXG4gIC8vIGNsYXNzZXMuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmVUZXh0KGNtLCBsaW5lVmlldykge1xuICAgIHZhciBjbHMgPSBsaW5lVmlldy50ZXh0LmNsYXNzTmFtZTtcbiAgICB2YXIgYnVpbHQgPSBnZXRMaW5lQ29udGVudChjbSwgbGluZVZpZXcpO1xuICAgIGlmIChsaW5lVmlldy50ZXh0ID09IGxpbmVWaWV3Lm5vZGUpIGxpbmVWaWV3Lm5vZGUgPSBidWlsdC5wcmU7XG4gICAgbGluZVZpZXcudGV4dC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChidWlsdC5wcmUsIGxpbmVWaWV3LnRleHQpO1xuICAgIGxpbmVWaWV3LnRleHQgPSBidWlsdC5wcmU7XG4gICAgaWYgKGJ1aWx0LmJnQ2xhc3MgIT0gbGluZVZpZXcuYmdDbGFzcyB8fCBidWlsdC50ZXh0Q2xhc3MgIT0gbGluZVZpZXcudGV4dENsYXNzKSB7XG4gICAgICBsaW5lVmlldy5iZ0NsYXNzID0gYnVpbHQuYmdDbGFzcztcbiAgICAgIGxpbmVWaWV3LnRleHRDbGFzcyA9IGJ1aWx0LnRleHRDbGFzcztcbiAgICAgIHVwZGF0ZUxpbmVDbGFzc2VzKGxpbmVWaWV3KTtcbiAgICB9IGVsc2UgaWYgKGNscykge1xuICAgICAgbGluZVZpZXcudGV4dC5jbGFzc05hbWUgPSBjbHM7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlTGluZUNsYXNzZXMobGluZVZpZXcpIHtcbiAgICB1cGRhdGVMaW5lQmFja2dyb3VuZChsaW5lVmlldyk7XG4gICAgaWYgKGxpbmVWaWV3LmxpbmUud3JhcENsYXNzKVxuICAgICAgZW5zdXJlTGluZVdyYXBwZWQobGluZVZpZXcpLmNsYXNzTmFtZSA9IGxpbmVWaWV3LmxpbmUud3JhcENsYXNzO1xuICAgIGVsc2UgaWYgKGxpbmVWaWV3Lm5vZGUgIT0gbGluZVZpZXcudGV4dClcbiAgICAgIGxpbmVWaWV3Lm5vZGUuY2xhc3NOYW1lID0gXCJcIjtcbiAgICB2YXIgdGV4dENsYXNzID0gbGluZVZpZXcudGV4dENsYXNzID8gbGluZVZpZXcudGV4dENsYXNzICsgXCIgXCIgKyAobGluZVZpZXcubGluZS50ZXh0Q2xhc3MgfHwgXCJcIikgOiBsaW5lVmlldy5saW5lLnRleHRDbGFzcztcbiAgICBsaW5lVmlldy50ZXh0LmNsYXNzTmFtZSA9IHRleHRDbGFzcyB8fCBcIlwiO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlTGluZUd1dHRlcihjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKSB7XG4gICAgaWYgKGxpbmVWaWV3Lmd1dHRlcikge1xuICAgICAgbGluZVZpZXcubm9kZS5yZW1vdmVDaGlsZChsaW5lVmlldy5ndXR0ZXIpO1xuICAgICAgbGluZVZpZXcuZ3V0dGVyID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKGxpbmVWaWV3Lmd1dHRlckJhY2tncm91bmQpIHtcbiAgICAgIGxpbmVWaWV3Lm5vZGUucmVtb3ZlQ2hpbGQobGluZVZpZXcuZ3V0dGVyQmFja2dyb3VuZCk7XG4gICAgICBsaW5lVmlldy5ndXR0ZXJCYWNrZ3JvdW5kID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKGxpbmVWaWV3LmxpbmUuZ3V0dGVyQ2xhc3MpIHtcbiAgICAgIHZhciB3cmFwID0gZW5zdXJlTGluZVdyYXBwZWQobGluZVZpZXcpO1xuICAgICAgbGluZVZpZXcuZ3V0dGVyQmFja2dyb3VuZCA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItZ3V0dGVyLWJhY2tncm91bmQgXCIgKyBsaW5lVmlldy5saW5lLmd1dHRlckNsYXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxlZnQ6IFwiICsgKGNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIgPyBkaW1zLmZpeGVkUG9zIDogLWRpbXMuZ3V0dGVyVG90YWxXaWR0aCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInB4OyB3aWR0aDogXCIgKyBkaW1zLmd1dHRlclRvdGFsV2lkdGggKyBcInB4XCIpO1xuICAgICAgd3JhcC5pbnNlcnRCZWZvcmUobGluZVZpZXcuZ3V0dGVyQmFja2dyb3VuZCwgbGluZVZpZXcudGV4dCk7XG4gICAgfVxuICAgIHZhciBtYXJrZXJzID0gbGluZVZpZXcubGluZS5ndXR0ZXJNYXJrZXJzO1xuICAgIGlmIChjbS5vcHRpb25zLmxpbmVOdW1iZXJzIHx8IG1hcmtlcnMpIHtcbiAgICAgIHZhciB3cmFwID0gZW5zdXJlTGluZVdyYXBwZWQobGluZVZpZXcpO1xuICAgICAgdmFyIGd1dHRlcldyYXAgPSBsaW5lVmlldy5ndXR0ZXIgPSBlbHQoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLWd1dHRlci13cmFwcGVyXCIsIFwibGVmdDogXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIgPyBkaW1zLmZpeGVkUG9zIDogLWRpbXMuZ3V0dGVyVG90YWxXaWR0aCkgKyBcInB4XCIpO1xuICAgICAgY20uZGlzcGxheS5pbnB1dC5zZXRVbmVkaXRhYmxlKGd1dHRlcldyYXApO1xuICAgICAgd3JhcC5pbnNlcnRCZWZvcmUoZ3V0dGVyV3JhcCwgbGluZVZpZXcudGV4dCk7XG4gICAgICBpZiAobGluZVZpZXcubGluZS5ndXR0ZXJDbGFzcylcbiAgICAgICAgZ3V0dGVyV3JhcC5jbGFzc05hbWUgKz0gXCIgXCIgKyBsaW5lVmlldy5saW5lLmd1dHRlckNsYXNzO1xuICAgICAgaWYgKGNtLm9wdGlvbnMubGluZU51bWJlcnMgJiYgKCFtYXJrZXJzIHx8ICFtYXJrZXJzW1wiQ29kZU1pcnJvci1saW5lbnVtYmVyc1wiXSkpXG4gICAgICAgIGxpbmVWaWV3LmxpbmVOdW1iZXIgPSBndXR0ZXJXcmFwLmFwcGVuZENoaWxkKFxuICAgICAgICAgIGVsdChcImRpdlwiLCBsaW5lTnVtYmVyRm9yKGNtLm9wdGlvbnMsIGxpbmVOKSxcbiAgICAgICAgICAgICAgXCJDb2RlTWlycm9yLWxpbmVudW1iZXIgQ29kZU1pcnJvci1ndXR0ZXItZWx0XCIsXG4gICAgICAgICAgICAgIFwibGVmdDogXCIgKyBkaW1zLmd1dHRlckxlZnRbXCJDb2RlTWlycm9yLWxpbmVudW1iZXJzXCJdICsgXCJweDsgd2lkdGg6IFwiXG4gICAgICAgICAgICAgICsgY20uZGlzcGxheS5saW5lTnVtSW5uZXJXaWR0aCArIFwicHhcIikpO1xuICAgICAgaWYgKG1hcmtlcnMpIGZvciAodmFyIGsgPSAwOyBrIDwgY20ub3B0aW9ucy5ndXR0ZXJzLmxlbmd0aDsgKytrKSB7XG4gICAgICAgIHZhciBpZCA9IGNtLm9wdGlvbnMuZ3V0dGVyc1trXSwgZm91bmQgPSBtYXJrZXJzLmhhc093blByb3BlcnR5KGlkKSAmJiBtYXJrZXJzW2lkXTtcbiAgICAgICAgaWYgKGZvdW5kKVxuICAgICAgICAgIGd1dHRlcldyYXAuYXBwZW5kQ2hpbGQoZWx0KFwiZGl2XCIsIFtmb3VuZF0sIFwiQ29kZU1pcnJvci1ndXR0ZXItZWx0XCIsIFwibGVmdDogXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpbXMuZ3V0dGVyTGVmdFtpZF0gKyBcInB4OyB3aWR0aDogXCIgKyBkaW1zLmd1dHRlcldpZHRoW2lkXSArIFwicHhcIikpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmVXaWRnZXRzKGNtLCBsaW5lVmlldywgZGltcykge1xuICAgIGlmIChsaW5lVmlldy5hbGlnbmFibGUpIGxpbmVWaWV3LmFsaWduYWJsZSA9IG51bGw7XG4gICAgZm9yICh2YXIgbm9kZSA9IGxpbmVWaWV3Lm5vZGUuZmlyc3RDaGlsZCwgbmV4dDsgbm9kZTsgbm9kZSA9IG5leHQpIHtcbiAgICAgIHZhciBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcbiAgICAgIGlmIChub2RlLmNsYXNzTmFtZSA9PSBcIkNvZGVNaXJyb3ItbGluZXdpZGdldFwiKVxuICAgICAgICBsaW5lVmlldy5ub2RlLnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgIH1cbiAgICBpbnNlcnRMaW5lV2lkZ2V0cyhjbSwgbGluZVZpZXcsIGRpbXMpO1xuICB9XG5cbiAgLy8gQnVpbGQgYSBsaW5lJ3MgRE9NIHJlcHJlc2VudGF0aW9uIGZyb20gc2NyYXRjaFxuICBmdW5jdGlvbiBidWlsZExpbmVFbGVtZW50KGNtLCBsaW5lVmlldywgbGluZU4sIGRpbXMpIHtcbiAgICB2YXIgYnVpbHQgPSBnZXRMaW5lQ29udGVudChjbSwgbGluZVZpZXcpO1xuICAgIGxpbmVWaWV3LnRleHQgPSBsaW5lVmlldy5ub2RlID0gYnVpbHQucHJlO1xuICAgIGlmIChidWlsdC5iZ0NsYXNzKSBsaW5lVmlldy5iZ0NsYXNzID0gYnVpbHQuYmdDbGFzcztcbiAgICBpZiAoYnVpbHQudGV4dENsYXNzKSBsaW5lVmlldy50ZXh0Q2xhc3MgPSBidWlsdC50ZXh0Q2xhc3M7XG5cbiAgICB1cGRhdGVMaW5lQ2xhc3NlcyhsaW5lVmlldyk7XG4gICAgdXBkYXRlTGluZUd1dHRlcihjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKTtcbiAgICBpbnNlcnRMaW5lV2lkZ2V0cyhjbSwgbGluZVZpZXcsIGRpbXMpO1xuICAgIHJldHVybiBsaW5lVmlldy5ub2RlO1xuICB9XG5cbiAgLy8gQSBsaW5lVmlldyBtYXkgY29udGFpbiBtdWx0aXBsZSBsb2dpY2FsIGxpbmVzICh3aGVuIG1lcmdlZCBieVxuICAvLyBjb2xsYXBzZWQgc3BhbnMpLiBUaGUgd2lkZ2V0cyBmb3IgYWxsIG9mIHRoZW0gbmVlZCB0byBiZSBkcmF3bi5cbiAgZnVuY3Rpb24gaW5zZXJ0TGluZVdpZGdldHMoY20sIGxpbmVWaWV3LCBkaW1zKSB7XG4gICAgaW5zZXJ0TGluZVdpZGdldHNGb3IoY20sIGxpbmVWaWV3LmxpbmUsIGxpbmVWaWV3LCBkaW1zLCB0cnVlKTtcbiAgICBpZiAobGluZVZpZXcucmVzdCkgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lVmlldy5yZXN0Lmxlbmd0aDsgaSsrKVxuICAgICAgaW5zZXJ0TGluZVdpZGdldHNGb3IoY20sIGxpbmVWaWV3LnJlc3RbaV0sIGxpbmVWaWV3LCBkaW1zLCBmYWxzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBpbnNlcnRMaW5lV2lkZ2V0c0ZvcihjbSwgbGluZSwgbGluZVZpZXcsIGRpbXMsIGFsbG93QWJvdmUpIHtcbiAgICBpZiAoIWxpbmUud2lkZ2V0cykgcmV0dXJuO1xuICAgIHZhciB3cmFwID0gZW5zdXJlTGluZVdyYXBwZWQobGluZVZpZXcpO1xuICAgIGZvciAodmFyIGkgPSAwLCB3cyA9IGxpbmUud2lkZ2V0czsgaSA8IHdzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgd2lkZ2V0ID0gd3NbaV0sIG5vZGUgPSBlbHQoXCJkaXZcIiwgW3dpZGdldC5ub2RlXSwgXCJDb2RlTWlycm9yLWxpbmV3aWRnZXRcIik7XG4gICAgICBpZiAoIXdpZGdldC5oYW5kbGVNb3VzZUV2ZW50cykgbm9kZS5zZXRBdHRyaWJ1dGUoXCJjbS1pZ25vcmUtZXZlbnRzXCIsIFwidHJ1ZVwiKTtcbiAgICAgIHBvc2l0aW9uTGluZVdpZGdldCh3aWRnZXQsIG5vZGUsIGxpbmVWaWV3LCBkaW1zKTtcbiAgICAgIGNtLmRpc3BsYXkuaW5wdXQuc2V0VW5lZGl0YWJsZShub2RlKTtcbiAgICAgIGlmIChhbGxvd0Fib3ZlICYmIHdpZGdldC5hYm92ZSlcbiAgICAgICAgd3JhcC5pbnNlcnRCZWZvcmUobm9kZSwgbGluZVZpZXcuZ3V0dGVyIHx8IGxpbmVWaWV3LnRleHQpO1xuICAgICAgZWxzZVxuICAgICAgICB3cmFwLmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgc2lnbmFsTGF0ZXIod2lkZ2V0LCBcInJlZHJhd1wiKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwb3NpdGlvbkxpbmVXaWRnZXQod2lkZ2V0LCBub2RlLCBsaW5lVmlldywgZGltcykge1xuICAgIGlmICh3aWRnZXQubm9IU2Nyb2xsKSB7XG4gICAgICAobGluZVZpZXcuYWxpZ25hYmxlIHx8IChsaW5lVmlldy5hbGlnbmFibGUgPSBbXSkpLnB1c2gobm9kZSk7XG4gICAgICB2YXIgd2lkdGggPSBkaW1zLndyYXBwZXJXaWR0aDtcbiAgICAgIG5vZGUuc3R5bGUubGVmdCA9IGRpbXMuZml4ZWRQb3MgKyBcInB4XCI7XG4gICAgICBpZiAoIXdpZGdldC5jb3Zlckd1dHRlcikge1xuICAgICAgICB3aWR0aCAtPSBkaW1zLmd1dHRlclRvdGFsV2lkdGg7XG4gICAgICAgIG5vZGUuc3R5bGUucGFkZGluZ0xlZnQgPSBkaW1zLmd1dHRlclRvdGFsV2lkdGggKyBcInB4XCI7XG4gICAgICB9XG4gICAgICBub2RlLnN0eWxlLndpZHRoID0gd2lkdGggKyBcInB4XCI7XG4gICAgfVxuICAgIGlmICh3aWRnZXQuY292ZXJHdXR0ZXIpIHtcbiAgICAgIG5vZGUuc3R5bGUuekluZGV4ID0gNTtcbiAgICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XG4gICAgICBpZiAoIXdpZGdldC5ub0hTY3JvbGwpIG5vZGUuc3R5bGUubWFyZ2luTGVmdCA9IC1kaW1zLmd1dHRlclRvdGFsV2lkdGggKyBcInB4XCI7XG4gICAgfVxuICB9XG5cbiAgLy8gUE9TSVRJT04gT0JKRUNUXG5cbiAgLy8gQSBQb3MgaW5zdGFuY2UgcmVwcmVzZW50cyBhIHBvc2l0aW9uIHdpdGhpbiB0aGUgdGV4dC5cbiAgdmFyIFBvcyA9IENvZGVNaXJyb3IuUG9zID0gZnVuY3Rpb24obGluZSwgY2gpIHtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUG9zKSkgcmV0dXJuIG5ldyBQb3MobGluZSwgY2gpO1xuICAgIHRoaXMubGluZSA9IGxpbmU7IHRoaXMuY2ggPSBjaDtcbiAgfTtcblxuICAvLyBDb21wYXJlIHR3byBwb3NpdGlvbnMsIHJldHVybiAwIGlmIHRoZXkgYXJlIHRoZSBzYW1lLCBhIG5lZ2F0aXZlXG4gIC8vIG51bWJlciB3aGVuIGEgaXMgbGVzcywgYW5kIGEgcG9zaXRpdmUgbnVtYmVyIG90aGVyd2lzZS5cbiAgdmFyIGNtcCA9IENvZGVNaXJyb3IuY21wUG9zID0gZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYS5saW5lIC0gYi5saW5lIHx8IGEuY2ggLSBiLmNoOyB9O1xuXG4gIGZ1bmN0aW9uIGNvcHlQb3MoeCkge3JldHVybiBQb3MoeC5saW5lLCB4LmNoKTt9XG4gIGZ1bmN0aW9uIG1heFBvcyhhLCBiKSB7IHJldHVybiBjbXAoYSwgYikgPCAwID8gYiA6IGE7IH1cbiAgZnVuY3Rpb24gbWluUG9zKGEsIGIpIHsgcmV0dXJuIGNtcChhLCBiKSA8IDAgPyBhIDogYjsgfVxuXG4gIC8vIElOUFVUIEhBTkRMSU5HXG5cbiAgZnVuY3Rpb24gZW5zdXJlRm9jdXMoY20pIHtcbiAgICBpZiAoIWNtLnN0YXRlLmZvY3VzZWQpIHsgY20uZGlzcGxheS5pbnB1dC5mb2N1cygpOyBvbkZvY3VzKGNtKTsgfVxuICB9XG5cbiAgZnVuY3Rpb24gaXNSZWFkT25seShjbSkge1xuICAgIHJldHVybiBjbS5vcHRpb25zLnJlYWRPbmx5IHx8IGNtLmRvYy5jYW50RWRpdDtcbiAgfVxuXG4gIC8vIFRoaXMgd2lsbCBiZSBzZXQgdG8gYW4gYXJyYXkgb2Ygc3RyaW5ncyB3aGVuIGNvcHlpbmcsIHNvIHRoYXQsXG4gIC8vIHdoZW4gcGFzdGluZywgd2Uga25vdyB3aGF0IGtpbmQgb2Ygc2VsZWN0aW9ucyB0aGUgY29waWVkIHRleHRcbiAgLy8gd2FzIG1hZGUgb3V0IG9mLlxuICB2YXIgbGFzdENvcGllZCA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYXBwbHlUZXh0SW5wdXQoY20sIGluc2VydGVkLCBkZWxldGVkLCBzZWwsIG9yaWdpbikge1xuICAgIHZhciBkb2MgPSBjbS5kb2M7XG4gICAgY20uZGlzcGxheS5zaGlmdCA9IGZhbHNlO1xuICAgIGlmICghc2VsKSBzZWwgPSBkb2Muc2VsO1xuXG4gICAgdmFyIHBhc3RlID0gY20uc3RhdGUucGFzdGVJbmNvbWluZyB8fCBvcmlnaW4gPT0gXCJwYXN0ZVwiO1xuICAgIHZhciB0ZXh0TGluZXMgPSBkb2Muc3BsaXRMaW5lcyhpbnNlcnRlZCksIG11bHRpUGFzdGUgPSBudWxsO1xuICAgIC8vIFdoZW4gcGFzaW5nIE4gbGluZXMgaW50byBOIHNlbGVjdGlvbnMsIGluc2VydCBvbmUgbGluZSBwZXIgc2VsZWN0aW9uXG4gICAgaWYgKHBhc3RlICYmIHNlbC5yYW5nZXMubGVuZ3RoID4gMSkge1xuICAgICAgaWYgKGxhc3RDb3BpZWQgJiYgbGFzdENvcGllZC5qb2luKFwiXFxuXCIpID09IGluc2VydGVkKSB7XG4gICAgICAgIGlmIChzZWwucmFuZ2VzLmxlbmd0aCAlIGxhc3RDb3BpZWQubGVuZ3RoID09IDApIHtcbiAgICAgICAgICBtdWx0aVBhc3RlID0gW107XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0Q29waWVkLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgbXVsdGlQYXN0ZS5wdXNoKGRvYy5zcGxpdExpbmVzKGxhc3RDb3BpZWRbaV0pKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0ZXh0TGluZXMubGVuZ3RoID09IHNlbC5yYW5nZXMubGVuZ3RoKSB7XG4gICAgICAgIG11bHRpUGFzdGUgPSBtYXAodGV4dExpbmVzLCBmdW5jdGlvbihsKSB7IHJldHVybiBbbF07IH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE5vcm1hbCBiZWhhdmlvciBpcyB0byBpbnNlcnQgdGhlIG5ldyB0ZXh0IGludG8gZXZlcnkgc2VsZWN0aW9uXG4gICAgZm9yICh2YXIgaSA9IHNlbC5yYW5nZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHZhciByYW5nZSA9IHNlbC5yYW5nZXNbaV07XG4gICAgICB2YXIgZnJvbSA9IHJhbmdlLmZyb20oKSwgdG8gPSByYW5nZS50bygpO1xuICAgICAgaWYgKHJhbmdlLmVtcHR5KCkpIHtcbiAgICAgICAgaWYgKGRlbGV0ZWQgJiYgZGVsZXRlZCA+IDApIC8vIEhhbmRsZSBkZWxldGlvblxuICAgICAgICAgIGZyb20gPSBQb3MoZnJvbS5saW5lLCBmcm9tLmNoIC0gZGVsZXRlZCk7XG4gICAgICAgIGVsc2UgaWYgKGNtLnN0YXRlLm92ZXJ3cml0ZSAmJiAhcGFzdGUpIC8vIEhhbmRsZSBvdmVyd3JpdGVcbiAgICAgICAgICB0byA9IFBvcyh0by5saW5lLCBNYXRoLm1pbihnZXRMaW5lKGRvYywgdG8ubGluZSkudGV4dC5sZW5ndGgsIHRvLmNoICsgbHN0KHRleHRMaW5lcykubGVuZ3RoKSk7XG4gICAgICB9XG4gICAgICB2YXIgdXBkYXRlSW5wdXQgPSBjbS5jdXJPcC51cGRhdGVJbnB1dDtcbiAgICAgIHZhciBjaGFuZ2VFdmVudCA9IHtmcm9tOiBmcm9tLCB0bzogdG8sIHRleHQ6IG11bHRpUGFzdGUgPyBtdWx0aVBhc3RlW2kgJSBtdWx0aVBhc3RlLmxlbmd0aF0gOiB0ZXh0TGluZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOiBvcmlnaW4gfHwgKHBhc3RlID8gXCJwYXN0ZVwiIDogY20uc3RhdGUuY3V0SW5jb21pbmcgPyBcImN1dFwiIDogXCIraW5wdXRcIil9O1xuICAgICAgbWFrZUNoYW5nZShjbS5kb2MsIGNoYW5nZUV2ZW50KTtcbiAgICAgIHNpZ25hbExhdGVyKGNtLCBcImlucHV0UmVhZFwiLCBjbSwgY2hhbmdlRXZlbnQpO1xuICAgIH1cbiAgICBpZiAoaW5zZXJ0ZWQgJiYgIXBhc3RlKVxuICAgICAgdHJpZ2dlckVsZWN0cmljKGNtLCBpbnNlcnRlZCk7XG5cbiAgICBlbnN1cmVDdXJzb3JWaXNpYmxlKGNtKTtcbiAgICBjbS5jdXJPcC51cGRhdGVJbnB1dCA9IHVwZGF0ZUlucHV0O1xuICAgIGNtLmN1ck9wLnR5cGluZyA9IHRydWU7XG4gICAgY20uc3RhdGUucGFzdGVJbmNvbWluZyA9IGNtLnN0YXRlLmN1dEluY29taW5nID0gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVQYXN0ZShlLCBjbSkge1xuICAgIHZhciBwYXN0ZWQgPSBlLmNsaXBib2FyZERhdGEgJiYgZS5jbGlwYm9hcmREYXRhLmdldERhdGEoXCJ0ZXh0L3BsYWluXCIpO1xuICAgIGlmIChwYXN0ZWQpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmICghaXNSZWFkT25seShjbSkgJiYgIWNtLm9wdGlvbnMuZGlzYWJsZUlucHV0KVxuICAgICAgICBydW5Jbk9wKGNtLCBmdW5jdGlvbigpIHsgYXBwbHlUZXh0SW5wdXQoY20sIHBhc3RlZCwgMCwgbnVsbCwgXCJwYXN0ZVwiKTsgfSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB0cmlnZ2VyRWxlY3RyaWMoY20sIGluc2VydGVkKSB7XG4gICAgLy8gV2hlbiBhbiAnZWxlY3RyaWMnIGNoYXJhY3RlciBpcyBpbnNlcnRlZCwgaW1tZWRpYXRlbHkgdHJpZ2dlciBhIHJlaW5kZW50XG4gICAgaWYgKCFjbS5vcHRpb25zLmVsZWN0cmljQ2hhcnMgfHwgIWNtLm9wdGlvbnMuc21hcnRJbmRlbnQpIHJldHVybjtcbiAgICB2YXIgc2VsID0gY20uZG9jLnNlbDtcblxuICAgIGZvciAodmFyIGkgPSBzZWwucmFuZ2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB2YXIgcmFuZ2UgPSBzZWwucmFuZ2VzW2ldO1xuICAgICAgaWYgKHJhbmdlLmhlYWQuY2ggPiAxMDAgfHwgKGkgJiYgc2VsLnJhbmdlc1tpIC0gMV0uaGVhZC5saW5lID09IHJhbmdlLmhlYWQubGluZSkpIGNvbnRpbnVlO1xuICAgICAgdmFyIG1vZGUgPSBjbS5nZXRNb2RlQXQocmFuZ2UuaGVhZCk7XG4gICAgICB2YXIgaW5kZW50ZWQgPSBmYWxzZTtcbiAgICAgIGlmIChtb2RlLmVsZWN0cmljQ2hhcnMpIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtb2RlLmVsZWN0cmljQ2hhcnMubGVuZ3RoOyBqKyspXG4gICAgICAgICAgaWYgKGluc2VydGVkLmluZGV4T2YobW9kZS5lbGVjdHJpY0NoYXJzLmNoYXJBdChqKSkgPiAtMSkge1xuICAgICAgICAgICAgaW5kZW50ZWQgPSBpbmRlbnRMaW5lKGNtLCByYW5nZS5oZWFkLmxpbmUsIFwic21hcnRcIik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG1vZGUuZWxlY3RyaWNJbnB1dCkge1xuICAgICAgICBpZiAobW9kZS5lbGVjdHJpY0lucHV0LnRlc3QoZ2V0TGluZShjbS5kb2MsIHJhbmdlLmhlYWQubGluZSkudGV4dC5zbGljZSgwLCByYW5nZS5oZWFkLmNoKSkpXG4gICAgICAgICAgaW5kZW50ZWQgPSBpbmRlbnRMaW5lKGNtLCByYW5nZS5oZWFkLmxpbmUsIFwic21hcnRcIik7XG4gICAgICB9XG4gICAgICBpZiAoaW5kZW50ZWQpIHNpZ25hbExhdGVyKGNtLCBcImVsZWN0cmljSW5wdXRcIiwgY20sIHJhbmdlLmhlYWQubGluZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY29weWFibGVSYW5nZXMoY20pIHtcbiAgICB2YXIgdGV4dCA9IFtdLCByYW5nZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNtLmRvYy5zZWwucmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbGluZSA9IGNtLmRvYy5zZWwucmFuZ2VzW2ldLmhlYWQubGluZTtcbiAgICAgIHZhciBsaW5lUmFuZ2UgPSB7YW5jaG9yOiBQb3MobGluZSwgMCksIGhlYWQ6IFBvcyhsaW5lICsgMSwgMCl9O1xuICAgICAgcmFuZ2VzLnB1c2gobGluZVJhbmdlKTtcbiAgICAgIHRleHQucHVzaChjbS5nZXRSYW5nZShsaW5lUmFuZ2UuYW5jaG9yLCBsaW5lUmFuZ2UuaGVhZCkpO1xuICAgIH1cbiAgICByZXR1cm4ge3RleHQ6IHRleHQsIHJhbmdlczogcmFuZ2VzfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc2FibGVCcm93c2VyTWFnaWMoZmllbGQpIHtcbiAgICBmaWVsZC5zZXRBdHRyaWJ1dGUoXCJhdXRvY29ycmVjdFwiLCBcIm9mZlwiKTtcbiAgICBmaWVsZC5zZXRBdHRyaWJ1dGUoXCJhdXRvY2FwaXRhbGl6ZVwiLCBcIm9mZlwiKTtcbiAgICBmaWVsZC5zZXRBdHRyaWJ1dGUoXCJzcGVsbGNoZWNrXCIsIFwiZmFsc2VcIik7XG4gIH1cblxuICAvLyBURVhUQVJFQSBJTlBVVCBTVFlMRVxuXG4gIGZ1bmN0aW9uIFRleHRhcmVhSW5wdXQoY20pIHtcbiAgICB0aGlzLmNtID0gY207XG4gICAgLy8gU2VlIGlucHV0LnBvbGwgYW5kIGlucHV0LnJlc2V0XG4gICAgdGhpcy5wcmV2SW5wdXQgPSBcIlwiO1xuXG4gICAgLy8gRmxhZyB0aGF0IGluZGljYXRlcyB3aGV0aGVyIHdlIGV4cGVjdCBpbnB1dCB0byBhcHBlYXIgcmVhbCBzb29uXG4gICAgLy8gbm93IChhZnRlciBzb21lIGV2ZW50IGxpa2UgJ2tleXByZXNzJyBvciAnaW5wdXQnKSBhbmQgYXJlXG4gICAgLy8gcG9sbGluZyBpbnRlbnNpdmVseS5cbiAgICB0aGlzLnBvbGxpbmdGYXN0ID0gZmFsc2U7XG4gICAgLy8gU2VsZi1yZXNldHRpbmcgdGltZW91dCBmb3IgdGhlIHBvbGxlclxuICAgIHRoaXMucG9sbGluZyA9IG5ldyBEZWxheWVkKCk7XG4gICAgLy8gVHJhY2tzIHdoZW4gaW5wdXQucmVzZXQgaGFzIHB1bnRlZCB0byBqdXN0IHB1dHRpbmcgYSBzaG9ydFxuICAgIC8vIHN0cmluZyBpbnRvIHRoZSB0ZXh0YXJlYSBpbnN0ZWFkIG9mIHRoZSBmdWxsIHNlbGVjdGlvbi5cbiAgICB0aGlzLmluYWNjdXJhdGVTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAvLyBVc2VkIHRvIHdvcmsgYXJvdW5kIElFIGlzc3VlIHdpdGggc2VsZWN0aW9uIGJlaW5nIGZvcmdvdHRlbiB3aGVuIGZvY3VzIG1vdmVzIGF3YXkgZnJvbSB0ZXh0YXJlYVxuICAgIHRoaXMuaGFzU2VsZWN0aW9uID0gZmFsc2U7XG4gICAgdGhpcy5jb21wb3NpbmcgPSBudWxsO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGhpZGRlblRleHRhcmVhKCkge1xuICAgIHZhciB0ZSA9IGVsdChcInRleHRhcmVhXCIsIG51bGwsIG51bGwsIFwicG9zaXRpb246IGFic29sdXRlOyBwYWRkaW5nOiAwOyB3aWR0aDogMXB4OyBoZWlnaHQ6IDFlbTsgb3V0bGluZTogbm9uZVwiKTtcbiAgICB2YXIgZGl2ID0gZWx0KFwiZGl2XCIsIFt0ZV0sIG51bGwsIFwib3ZlcmZsb3c6IGhpZGRlbjsgcG9zaXRpb246IHJlbGF0aXZlOyB3aWR0aDogM3B4OyBoZWlnaHQ6IDBweDtcIik7XG4gICAgLy8gVGhlIHRleHRhcmVhIGlzIGtlcHQgcG9zaXRpb25lZCBuZWFyIHRoZSBjdXJzb3IgdG8gcHJldmVudCB0aGVcbiAgICAvLyBmYWN0IHRoYXQgaXQnbGwgYmUgc2Nyb2xsZWQgaW50byB2aWV3IG9uIGlucHV0IGZyb20gc2Nyb2xsaW5nXG4gICAgLy8gb3VyIGZha2UgY3Vyc29yIG91dCBvZiB2aWV3LiBPbiB3ZWJraXQsIHdoZW4gd3JhcD1vZmYsIHBhc3RlIGlzXG4gICAgLy8gdmVyeSBzbG93LiBTbyBtYWtlIHRoZSBhcmVhIHdpZGUgaW5zdGVhZC5cbiAgICBpZiAod2Via2l0KSB0ZS5zdHlsZS53aWR0aCA9IFwiMTAwMHB4XCI7XG4gICAgZWxzZSB0ZS5zZXRBdHRyaWJ1dGUoXCJ3cmFwXCIsIFwib2ZmXCIpO1xuICAgIC8vIElmIGJvcmRlcjogMDsgLS0gaU9TIGZhaWxzIHRvIG9wZW4ga2V5Ym9hcmQgKGlzc3VlICMxMjg3KVxuICAgIGlmIChpb3MpIHRlLnN0eWxlLmJvcmRlciA9IFwiMXB4IHNvbGlkIGJsYWNrXCI7XG4gICAgZGlzYWJsZUJyb3dzZXJNYWdpYyh0ZSk7XG4gICAgcmV0dXJuIGRpdjtcbiAgfVxuXG4gIFRleHRhcmVhSW5wdXQucHJvdG90eXBlID0gY29weU9iaih7XG4gICAgaW5pdDogZnVuY3Rpb24oZGlzcGxheSkge1xuICAgICAgdmFyIGlucHV0ID0gdGhpcywgY20gPSB0aGlzLmNtO1xuXG4gICAgICAvLyBXcmFwcyBhbmQgaGlkZXMgaW5wdXQgdGV4dGFyZWFcbiAgICAgIHZhciBkaXYgPSB0aGlzLndyYXBwZXIgPSBoaWRkZW5UZXh0YXJlYSgpO1xuICAgICAgLy8gVGhlIHNlbWloaWRkZW4gdGV4dGFyZWEgdGhhdCBpcyBmb2N1c2VkIHdoZW4gdGhlIGVkaXRvciBpc1xuICAgICAgLy8gZm9jdXNlZCwgYW5kIHJlY2VpdmVzIGlucHV0LlxuICAgICAgdmFyIHRlID0gdGhpcy50ZXh0YXJlYSA9IGRpdi5maXJzdENoaWxkO1xuICAgICAgZGlzcGxheS53cmFwcGVyLmluc2VydEJlZm9yZShkaXYsIGRpc3BsYXkud3JhcHBlci5maXJzdENoaWxkKTtcblxuICAgICAgLy8gTmVlZGVkIHRvIGhpZGUgYmlnIGJsdWUgYmxpbmtpbmcgY3Vyc29yIG9uIE1vYmlsZSBTYWZhcmkgKGRvZXNuJ3Qgc2VlbSB0byB3b3JrIGluIGlPUyA4IGFueW1vcmUpXG4gICAgICBpZiAoaW9zKSB0ZS5zdHlsZS53aWR0aCA9IFwiMHB4XCI7XG5cbiAgICAgIG9uKHRlLCBcImlucHV0XCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA+PSA5ICYmIGlucHV0Lmhhc1NlbGVjdGlvbikgaW5wdXQuaGFzU2VsZWN0aW9uID0gbnVsbDtcbiAgICAgICAgaW5wdXQucG9sbCgpO1xuICAgICAgfSk7XG5cbiAgICAgIG9uKHRlLCBcInBhc3RlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGhhbmRsZVBhc3RlKGUsIGNtKSkgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgY20uc3RhdGUucGFzdGVJbmNvbWluZyA9IHRydWU7XG4gICAgICAgIGlucHV0LmZhc3RQb2xsKCk7XG4gICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gcHJlcGFyZUNvcHlDdXQoZSkge1xuICAgICAgICBpZiAoY20uc29tZXRoaW5nU2VsZWN0ZWQoKSkge1xuICAgICAgICAgIGxhc3RDb3BpZWQgPSBjbS5nZXRTZWxlY3Rpb25zKCk7XG4gICAgICAgICAgaWYgKGlucHV0LmluYWNjdXJhdGVTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIGlucHV0LnByZXZJbnB1dCA9IFwiXCI7XG4gICAgICAgICAgICBpbnB1dC5pbmFjY3VyYXRlU2VsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICB0ZS52YWx1ZSA9IGxhc3RDb3BpZWQuam9pbihcIlxcblwiKTtcbiAgICAgICAgICAgIHNlbGVjdElucHV0KHRlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoIWNtLm9wdGlvbnMubGluZVdpc2VDb3B5Q3V0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciByYW5nZXMgPSBjb3B5YWJsZVJhbmdlcyhjbSk7XG4gICAgICAgICAgbGFzdENvcGllZCA9IHJhbmdlcy50ZXh0O1xuICAgICAgICAgIGlmIChlLnR5cGUgPT0gXCJjdXRcIikge1xuICAgICAgICAgICAgY20uc2V0U2VsZWN0aW9ucyhyYW5nZXMucmFuZ2VzLCBudWxsLCBzZWxfZG9udFNjcm9sbCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlucHV0LnByZXZJbnB1dCA9IFwiXCI7XG4gICAgICAgICAgICB0ZS52YWx1ZSA9IHJhbmdlcy50ZXh0LmpvaW4oXCJcXG5cIik7XG4gICAgICAgICAgICBzZWxlY3RJbnB1dCh0ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlLnR5cGUgPT0gXCJjdXRcIikgY20uc3RhdGUuY3V0SW5jb21pbmcgPSB0cnVlO1xuICAgICAgfVxuICAgICAgb24odGUsIFwiY3V0XCIsIHByZXBhcmVDb3B5Q3V0KTtcbiAgICAgIG9uKHRlLCBcImNvcHlcIiwgcHJlcGFyZUNvcHlDdXQpO1xuXG4gICAgICBvbihkaXNwbGF5LnNjcm9sbGVyLCBcInBhc3RlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGV2ZW50SW5XaWRnZXQoZGlzcGxheSwgZSkpIHJldHVybjtcbiAgICAgICAgY20uc3RhdGUucGFzdGVJbmNvbWluZyA9IHRydWU7XG4gICAgICAgIGlucHV0LmZvY3VzKCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gUHJldmVudCBub3JtYWwgc2VsZWN0aW9uIGluIHRoZSBlZGl0b3IgKHdlIGhhbmRsZSBvdXIgb3duKVxuICAgICAgb24oZGlzcGxheS5saW5lU3BhY2UsIFwic2VsZWN0c3RhcnRcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoIWV2ZW50SW5XaWRnZXQoZGlzcGxheSwgZSkpIGVfcHJldmVudERlZmF1bHQoZSk7XG4gICAgICB9KTtcblxuICAgICAgb24odGUsIFwiY29tcG9zaXRpb25zdGFydFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHN0YXJ0ID0gY20uZ2V0Q3Vyc29yKFwiZnJvbVwiKTtcbiAgICAgICAgaWYgKGlucHV0LmNvbXBvc2luZykgaW5wdXQuY29tcG9zaW5nLnJhbmdlLmNsZWFyKClcbiAgICAgICAgaW5wdXQuY29tcG9zaW5nID0ge1xuICAgICAgICAgIHN0YXJ0OiBzdGFydCxcbiAgICAgICAgICByYW5nZTogY20ubWFya1RleHQoc3RhcnQsIGNtLmdldEN1cnNvcihcInRvXCIpLCB7Y2xhc3NOYW1lOiBcIkNvZGVNaXJyb3ItY29tcG9zaW5nXCJ9KVxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgICBvbih0ZSwgXCJjb21wb3NpdGlvbmVuZFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGlucHV0LmNvbXBvc2luZykge1xuICAgICAgICAgIGlucHV0LnBvbGwoKTtcbiAgICAgICAgICBpbnB1dC5jb21wb3NpbmcucmFuZ2UuY2xlYXIoKTtcbiAgICAgICAgICBpbnB1dC5jb21wb3NpbmcgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgcHJlcGFyZVNlbGVjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAvLyBSZWRyYXcgdGhlIHNlbGVjdGlvbiBhbmQvb3IgY3Vyc29yXG4gICAgICB2YXIgY20gPSB0aGlzLmNtLCBkaXNwbGF5ID0gY20uZGlzcGxheSwgZG9jID0gY20uZG9jO1xuICAgICAgdmFyIHJlc3VsdCA9IHByZXBhcmVTZWxlY3Rpb24oY20pO1xuXG4gICAgICAvLyBNb3ZlIHRoZSBoaWRkZW4gdGV4dGFyZWEgbmVhciB0aGUgY3Vyc29yIHRvIHByZXZlbnQgc2Nyb2xsaW5nIGFydGlmYWN0c1xuICAgICAgaWYgKGNtLm9wdGlvbnMubW92ZUlucHV0V2l0aEN1cnNvcikge1xuICAgICAgICB2YXIgaGVhZFBvcyA9IGN1cnNvckNvb3JkcyhjbSwgZG9jLnNlbC5wcmltYXJ5KCkuaGVhZCwgXCJkaXZcIik7XG4gICAgICAgIHZhciB3cmFwT2ZmID0gZGlzcGxheS53cmFwcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBsaW5lT2ZmID0gZGlzcGxheS5saW5lRGl2LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICByZXN1bHQudGVUb3AgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihkaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0IC0gMTAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRQb3MudG9wICsgbGluZU9mZi50b3AgLSB3cmFwT2ZmLnRvcCkpO1xuICAgICAgICByZXN1bHQudGVMZWZ0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oZGlzcGxheS53cmFwcGVyLmNsaWVudFdpZHRoIC0gMTAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkUG9zLmxlZnQgKyBsaW5lT2ZmLmxlZnQgLSB3cmFwT2ZmLmxlZnQpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuXG4gICAgc2hvd1NlbGVjdGlvbjogZnVuY3Rpb24oZHJhd24pIHtcbiAgICAgIHZhciBjbSA9IHRoaXMuY20sIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgICAgcmVtb3ZlQ2hpbGRyZW5BbmRBZGQoZGlzcGxheS5jdXJzb3JEaXYsIGRyYXduLmN1cnNvcnMpO1xuICAgICAgcmVtb3ZlQ2hpbGRyZW5BbmRBZGQoZGlzcGxheS5zZWxlY3Rpb25EaXYsIGRyYXduLnNlbGVjdGlvbik7XG4gICAgICBpZiAoZHJhd24udGVUb3AgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLndyYXBwZXIuc3R5bGUudG9wID0gZHJhd24udGVUb3AgKyBcInB4XCI7XG4gICAgICAgIHRoaXMud3JhcHBlci5zdHlsZS5sZWZ0ID0gZHJhd24udGVMZWZ0ICsgXCJweFwiO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBSZXNldCB0aGUgaW5wdXQgdG8gY29ycmVzcG9uZCB0byB0aGUgc2VsZWN0aW9uIChvciB0byBiZSBlbXB0eSxcbiAgICAvLyB3aGVuIG5vdCB0eXBpbmcgYW5kIG5vdGhpbmcgaXMgc2VsZWN0ZWQpXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKHR5cGluZykge1xuICAgICAgaWYgKHRoaXMuY29udGV4dE1lbnVQZW5kaW5nKSByZXR1cm47XG4gICAgICB2YXIgbWluaW1hbCwgc2VsZWN0ZWQsIGNtID0gdGhpcy5jbSwgZG9jID0gY20uZG9jO1xuICAgICAgaWYgKGNtLnNvbWV0aGluZ1NlbGVjdGVkKCkpIHtcbiAgICAgICAgdGhpcy5wcmV2SW5wdXQgPSBcIlwiO1xuICAgICAgICB2YXIgcmFuZ2UgPSBkb2Muc2VsLnByaW1hcnkoKTtcbiAgICAgICAgbWluaW1hbCA9IGhhc0NvcHlFdmVudCAmJlxuICAgICAgICAgIChyYW5nZS50bygpLmxpbmUgLSByYW5nZS5mcm9tKCkubGluZSA+IDEwMCB8fCAoc2VsZWN0ZWQgPSBjbS5nZXRTZWxlY3Rpb24oKSkubGVuZ3RoID4gMTAwMCk7XG4gICAgICAgIHZhciBjb250ZW50ID0gbWluaW1hbCA/IFwiLVwiIDogc2VsZWN0ZWQgfHwgY20uZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIHRoaXMudGV4dGFyZWEudmFsdWUgPSBjb250ZW50O1xuICAgICAgICBpZiAoY20uc3RhdGUuZm9jdXNlZCkgc2VsZWN0SW5wdXQodGhpcy50ZXh0YXJlYSk7XG4gICAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uID49IDkpIHRoaXMuaGFzU2VsZWN0aW9uID0gY29udGVudDtcbiAgICAgIH0gZWxzZSBpZiAoIXR5cGluZykge1xuICAgICAgICB0aGlzLnByZXZJbnB1dCA9IHRoaXMudGV4dGFyZWEudmFsdWUgPSBcIlwiO1xuICAgICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA+PSA5KSB0aGlzLmhhc1NlbGVjdGlvbiA9IG51bGw7XG4gICAgICB9XG4gICAgICB0aGlzLmluYWNjdXJhdGVTZWxlY3Rpb24gPSBtaW5pbWFsO1xuICAgIH0sXG5cbiAgICBnZXRGaWVsZDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLnRleHRhcmVhOyB9LFxuXG4gICAgc3VwcG9ydHNUb3VjaDogZnVuY3Rpb24oKSB7IHJldHVybiBmYWxzZTsgfSxcblxuICAgIGZvY3VzOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmNtLm9wdGlvbnMucmVhZE9ubHkgIT0gXCJub2N1cnNvclwiICYmICghbW9iaWxlIHx8IGFjdGl2ZUVsdCgpICE9IHRoaXMudGV4dGFyZWEpKSB7XG4gICAgICAgIHRyeSB7IHRoaXMudGV4dGFyZWEuZm9jdXMoKTsgfVxuICAgICAgICBjYXRjaCAoZSkge30gLy8gSUU4IHdpbGwgdGhyb3cgaWYgdGhlIHRleHRhcmVhIGlzIGRpc3BsYXk6IG5vbmUgb3Igbm90IGluIERPTVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBibHVyOiBmdW5jdGlvbigpIHsgdGhpcy50ZXh0YXJlYS5ibHVyKCk7IH0sXG5cbiAgICByZXNldFBvc2l0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMud3JhcHBlci5zdHlsZS50b3AgPSB0aGlzLndyYXBwZXIuc3R5bGUubGVmdCA9IDA7XG4gICAgfSxcblxuICAgIHJlY2VpdmVkRm9jdXM6IGZ1bmN0aW9uKCkgeyB0aGlzLnNsb3dQb2xsKCk7IH0sXG5cbiAgICAvLyBQb2xsIGZvciBpbnB1dCBjaGFuZ2VzLCB1c2luZyB0aGUgbm9ybWFsIHJhdGUgb2YgcG9sbGluZy4gVGhpc1xuICAgIC8vIHJ1bnMgYXMgbG9uZyBhcyB0aGUgZWRpdG9yIGlzIGZvY3VzZWQuXG4gICAgc2xvd1BvbGw6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGlucHV0ID0gdGhpcztcbiAgICAgIGlmIChpbnB1dC5wb2xsaW5nRmFzdCkgcmV0dXJuO1xuICAgICAgaW5wdXQucG9sbGluZy5zZXQodGhpcy5jbS5vcHRpb25zLnBvbGxJbnRlcnZhbCwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlucHV0LnBvbGwoKTtcbiAgICAgICAgaWYgKGlucHV0LmNtLnN0YXRlLmZvY3VzZWQpIGlucHV0LnNsb3dQb2xsKCk7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy8gV2hlbiBhbiBldmVudCBoYXMganVzdCBjb21lIGluIHRoYXQgaXMgbGlrZWx5IHRvIGFkZCBvciBjaGFuZ2VcbiAgICAvLyBzb21ldGhpbmcgaW4gdGhlIGlucHV0IHRleHRhcmVhLCB3ZSBwb2xsIGZhc3RlciwgdG8gZW5zdXJlIHRoYXRcbiAgICAvLyB0aGUgY2hhbmdlIGFwcGVhcnMgb24gdGhlIHNjcmVlbiBxdWlja2x5LlxuICAgIGZhc3RQb2xsOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBtaXNzZWQgPSBmYWxzZSwgaW5wdXQgPSB0aGlzO1xuICAgICAgaW5wdXQucG9sbGluZ0Zhc3QgPSB0cnVlO1xuICAgICAgZnVuY3Rpb24gcCgpIHtcbiAgICAgICAgdmFyIGNoYW5nZWQgPSBpbnB1dC5wb2xsKCk7XG4gICAgICAgIGlmICghY2hhbmdlZCAmJiAhbWlzc2VkKSB7bWlzc2VkID0gdHJ1ZTsgaW5wdXQucG9sbGluZy5zZXQoNjAsIHApO31cbiAgICAgICAgZWxzZSB7aW5wdXQucG9sbGluZ0Zhc3QgPSBmYWxzZTsgaW5wdXQuc2xvd1BvbGwoKTt9XG4gICAgICB9XG4gICAgICBpbnB1dC5wb2xsaW5nLnNldCgyMCwgcCk7XG4gICAgfSxcblxuICAgIC8vIFJlYWQgaW5wdXQgZnJvbSB0aGUgdGV4dGFyZWEsIGFuZCB1cGRhdGUgdGhlIGRvY3VtZW50IHRvIG1hdGNoLlxuICAgIC8vIFdoZW4gc29tZXRoaW5nIGlzIHNlbGVjdGVkLCBpdCBpcyBwcmVzZW50IGluIHRoZSB0ZXh0YXJlYSwgYW5kXG4gICAgLy8gc2VsZWN0ZWQgKHVubGVzcyBpdCBpcyBodWdlLCBpbiB3aGljaCBjYXNlIGEgcGxhY2Vob2xkZXIgaXNcbiAgICAvLyB1c2VkKS4gV2hlbiBub3RoaW5nIGlzIHNlbGVjdGVkLCB0aGUgY3Vyc29yIHNpdHMgYWZ0ZXIgcHJldmlvdXNseVxuICAgIC8vIHNlZW4gdGV4dCAoY2FuIGJlIGVtcHR5KSwgd2hpY2ggaXMgc3RvcmVkIGluIHByZXZJbnB1dCAod2UgbXVzdFxuICAgIC8vIG5vdCByZXNldCB0aGUgdGV4dGFyZWEgd2hlbiB0eXBpbmcsIGJlY2F1c2UgdGhhdCBicmVha3MgSU1FKS5cbiAgICBwb2xsOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjbSA9IHRoaXMuY20sIGlucHV0ID0gdGhpcy50ZXh0YXJlYSwgcHJldklucHV0ID0gdGhpcy5wcmV2SW5wdXQ7XG4gICAgICAvLyBTaW5jZSB0aGlzIGlzIGNhbGxlZCBhICpsb3QqLCB0cnkgdG8gYmFpbCBvdXQgYXMgY2hlYXBseSBhc1xuICAgICAgLy8gcG9zc2libGUgd2hlbiBpdCBpcyBjbGVhciB0aGF0IG5vdGhpbmcgaGFwcGVuZWQuIGhhc1NlbGVjdGlvblxuICAgICAgLy8gd2lsbCBiZSB0aGUgY2FzZSB3aGVuIHRoZXJlIGlzIGEgbG90IG9mIHRleHQgaW4gdGhlIHRleHRhcmVhLFxuICAgICAgLy8gaW4gd2hpY2ggY2FzZSByZWFkaW5nIGl0cyB2YWx1ZSB3b3VsZCBiZSBleHBlbnNpdmUuXG4gICAgICBpZiAodGhpcy5jb250ZXh0TWVudVBlbmRpbmcgfHwgIWNtLnN0YXRlLmZvY3VzZWQgfHxcbiAgICAgICAgICAoaGFzU2VsZWN0aW9uKGlucHV0KSAmJiAhcHJldklucHV0ICYmICF0aGlzLmNvbXBvc2luZykgfHxcbiAgICAgICAgICBpc1JlYWRPbmx5KGNtKSB8fCBjbS5vcHRpb25zLmRpc2FibGVJbnB1dCB8fCBjbS5zdGF0ZS5rZXlTZXEpXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgdmFyIHRleHQgPSBpbnB1dC52YWx1ZTtcbiAgICAgIC8vIElmIG5vdGhpbmcgY2hhbmdlZCwgYmFpbC5cbiAgICAgIGlmICh0ZXh0ID09IHByZXZJbnB1dCAmJiAhY20uc29tZXRoaW5nU2VsZWN0ZWQoKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgLy8gV29yayBhcm91bmQgbm9uc2Vuc2ljYWwgc2VsZWN0aW9uIHJlc2V0dGluZyBpbiBJRTkvMTAsIGFuZFxuICAgICAgLy8gaW5leHBsaWNhYmxlIGFwcGVhcmFuY2Ugb2YgcHJpdmF0ZSBhcmVhIHVuaWNvZGUgY2hhcmFjdGVycyBvblxuICAgICAgLy8gc29tZSBrZXkgY29tYm9zIGluIE1hYyAoIzI2ODkpLlxuICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPj0gOSAmJiB0aGlzLmhhc1NlbGVjdGlvbiA9PT0gdGV4dCB8fFxuICAgICAgICAgIG1hYyAmJiAvW1xcdWY3MDAtXFx1ZjdmZl0vLnRlc3QodGV4dCkpIHtcbiAgICAgICAgY20uZGlzcGxheS5pbnB1dC5yZXNldCgpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChjbS5kb2Muc2VsID09IGNtLmRpc3BsYXkuc2VsRm9yQ29udGV4dE1lbnUpIHtcbiAgICAgICAgdmFyIGZpcnN0ID0gdGV4dC5jaGFyQ29kZUF0KDApO1xuICAgICAgICBpZiAoZmlyc3QgPT0gMHgyMDBiICYmICFwcmV2SW5wdXQpIHByZXZJbnB1dCA9IFwiXFx1MjAwYlwiO1xuICAgICAgICBpZiAoZmlyc3QgPT0gMHgyMWRhKSB7IHRoaXMucmVzZXQoKTsgcmV0dXJuIHRoaXMuY20uZXhlY0NvbW1hbmQoXCJ1bmRvXCIpOyB9XG4gICAgICB9XG4gICAgICAvLyBGaW5kIHRoZSBwYXJ0IG9mIHRoZSBpbnB1dCB0aGF0IGlzIGFjdHVhbGx5IG5ld1xuICAgICAgdmFyIHNhbWUgPSAwLCBsID0gTWF0aC5taW4ocHJldklucHV0Lmxlbmd0aCwgdGV4dC5sZW5ndGgpO1xuICAgICAgd2hpbGUgKHNhbWUgPCBsICYmIHByZXZJbnB1dC5jaGFyQ29kZUF0KHNhbWUpID09IHRleHQuY2hhckNvZGVBdChzYW1lKSkgKytzYW1lO1xuXG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBydW5Jbk9wKGNtLCBmdW5jdGlvbigpIHtcbiAgICAgICAgYXBwbHlUZXh0SW5wdXQoY20sIHRleHQuc2xpY2Uoc2FtZSksIHByZXZJbnB1dC5sZW5ndGggLSBzYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICBudWxsLCBzZWxmLmNvbXBvc2luZyA/IFwiKmNvbXBvc2VcIiA6IG51bGwpO1xuXG4gICAgICAgIC8vIERvbid0IGxlYXZlIGxvbmcgdGV4dCBpbiB0aGUgdGV4dGFyZWEsIHNpbmNlIGl0IG1ha2VzIGZ1cnRoZXIgcG9sbGluZyBzbG93XG4gICAgICAgIGlmICh0ZXh0Lmxlbmd0aCA+IDEwMDAgfHwgdGV4dC5pbmRleE9mKFwiXFxuXCIpID4gLTEpIGlucHV0LnZhbHVlID0gc2VsZi5wcmV2SW5wdXQgPSBcIlwiO1xuICAgICAgICBlbHNlIHNlbGYucHJldklucHV0ID0gdGV4dDtcblxuICAgICAgICBpZiAoc2VsZi5jb21wb3NpbmcpIHtcbiAgICAgICAgICBzZWxmLmNvbXBvc2luZy5yYW5nZS5jbGVhcigpO1xuICAgICAgICAgIHNlbGYuY29tcG9zaW5nLnJhbmdlID0gY20ubWFya1RleHQoc2VsZi5jb21wb3Npbmcuc3RhcnQsIGNtLmdldEN1cnNvcihcInRvXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NsYXNzTmFtZTogXCJDb2RlTWlycm9yLWNvbXBvc2luZ1wifSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcblxuICAgIGVuc3VyZVBvbGxlZDogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5wb2xsaW5nRmFzdCAmJiB0aGlzLnBvbGwoKSkgdGhpcy5wb2xsaW5nRmFzdCA9IGZhbHNlO1xuICAgIH0sXG5cbiAgICBvbktleVByZXNzOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uID49IDkpIHRoaXMuaGFzU2VsZWN0aW9uID0gbnVsbDtcbiAgICAgIHRoaXMuZmFzdFBvbGwoKTtcbiAgICB9LFxuXG4gICAgb25Db250ZXh0TWVudTogZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIGlucHV0ID0gdGhpcywgY20gPSBpbnB1dC5jbSwgZGlzcGxheSA9IGNtLmRpc3BsYXksIHRlID0gaW5wdXQudGV4dGFyZWE7XG4gICAgICB2YXIgcG9zID0gcG9zRnJvbU1vdXNlKGNtLCBlKSwgc2Nyb2xsUG9zID0gZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3A7XG4gICAgICBpZiAoIXBvcyB8fCBwcmVzdG8pIHJldHVybjsgLy8gT3BlcmEgaXMgZGlmZmljdWx0LlxuXG4gICAgICAvLyBSZXNldCB0aGUgY3VycmVudCB0ZXh0IHNlbGVjdGlvbiBvbmx5IGlmIHRoZSBjbGljayBpcyBkb25lIG91dHNpZGUgb2YgdGhlIHNlbGVjdGlvblxuICAgICAgLy8gYW5kICdyZXNldFNlbGVjdGlvbk9uQ29udGV4dE1lbnUnIG9wdGlvbiBpcyB0cnVlLlxuICAgICAgdmFyIHJlc2V0ID0gY20ub3B0aW9ucy5yZXNldFNlbGVjdGlvbk9uQ29udGV4dE1lbnU7XG4gICAgICBpZiAocmVzZXQgJiYgY20uZG9jLnNlbC5jb250YWlucyhwb3MpID09IC0xKVxuICAgICAgICBvcGVyYXRpb24oY20sIHNldFNlbGVjdGlvbikoY20uZG9jLCBzaW1wbGVTZWxlY3Rpb24ocG9zKSwgc2VsX2RvbnRTY3JvbGwpO1xuXG4gICAgICB2YXIgb2xkQ1NTID0gdGUuc3R5bGUuY3NzVGV4dDtcbiAgICAgIGlucHV0LndyYXBwZXIuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICB0ZS5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjogZml4ZWQ7IHdpZHRoOiAzMHB4OyBoZWlnaHQ6IDMwcHg7IHRvcDogXCIgKyAoZS5jbGllbnRZIC0gNSkgK1xuICAgICAgICBcInB4OyBsZWZ0OiBcIiArIChlLmNsaWVudFggLSA1KSArIFwicHg7IHotaW5kZXg6IDEwMDA7IGJhY2tncm91bmQ6IFwiICtcbiAgICAgICAgKGllID8gXCJyZ2JhKDI1NSwgMjU1LCAyNTUsIC4wNSlcIiA6IFwidHJhbnNwYXJlbnRcIikgK1xuICAgICAgICBcIjsgb3V0bGluZTogbm9uZTsgYm9yZGVyLXdpZHRoOiAwOyBvdXRsaW5lOiBub25lOyBvdmVyZmxvdzogaGlkZGVuOyBvcGFjaXR5OiAuMDU7IGZpbHRlcjogYWxwaGEob3BhY2l0eT01KTtcIjtcbiAgICAgIGlmICh3ZWJraXQpIHZhciBvbGRTY3JvbGxZID0gd2luZG93LnNjcm9sbFk7IC8vIFdvcmsgYXJvdW5kIENocm9tZSBpc3N1ZSAoIzI3MTIpXG4gICAgICBkaXNwbGF5LmlucHV0LmZvY3VzKCk7XG4gICAgICBpZiAod2Via2l0KSB3aW5kb3cuc2Nyb2xsVG8obnVsbCwgb2xkU2Nyb2xsWSk7XG4gICAgICBkaXNwbGF5LmlucHV0LnJlc2V0KCk7XG4gICAgICAvLyBBZGRzIFwiU2VsZWN0IGFsbFwiIHRvIGNvbnRleHQgbWVudSBpbiBGRlxuICAgICAgaWYgKCFjbS5zb21ldGhpbmdTZWxlY3RlZCgpKSB0ZS52YWx1ZSA9IGlucHV0LnByZXZJbnB1dCA9IFwiIFwiO1xuICAgICAgaW5wdXQuY29udGV4dE1lbnVQZW5kaW5nID0gdHJ1ZTtcbiAgICAgIGRpc3BsYXkuc2VsRm9yQ29udGV4dE1lbnUgPSBjbS5kb2Muc2VsO1xuICAgICAgY2xlYXJUaW1lb3V0KGRpc3BsYXkuZGV0ZWN0aW5nU2VsZWN0QWxsKTtcblxuICAgICAgLy8gU2VsZWN0LWFsbCB3aWxsIGJlIGdyZXllZCBvdXQgaWYgdGhlcmUncyBub3RoaW5nIHRvIHNlbGVjdCwgc29cbiAgICAgIC8vIHRoaXMgYWRkcyBhIHplcm8td2lkdGggc3BhY2Ugc28gdGhhdCB3ZSBjYW4gbGF0ZXIgY2hlY2sgd2hldGhlclxuICAgICAgLy8gaXQgZ290IHNlbGVjdGVkLlxuICAgICAgZnVuY3Rpb24gcHJlcGFyZVNlbGVjdEFsbEhhY2soKSB7XG4gICAgICAgIGlmICh0ZS5zZWxlY3Rpb25TdGFydCAhPSBudWxsKSB7XG4gICAgICAgICAgdmFyIHNlbGVjdGVkID0gY20uc29tZXRoaW5nU2VsZWN0ZWQoKTtcbiAgICAgICAgICB2YXIgZXh0dmFsID0gXCJcXHUyMDBiXCIgKyAoc2VsZWN0ZWQgPyB0ZS52YWx1ZSA6IFwiXCIpO1xuICAgICAgICAgIHRlLnZhbHVlID0gXCJcXHUyMWRhXCI7IC8vIFVzZWQgdG8gY2F0Y2ggY29udGV4dC1tZW51IHVuZG9cbiAgICAgICAgICB0ZS52YWx1ZSA9IGV4dHZhbDtcbiAgICAgICAgICBpbnB1dC5wcmV2SW5wdXQgPSBzZWxlY3RlZCA/IFwiXCIgOiBcIlxcdTIwMGJcIjtcbiAgICAgICAgICB0ZS5zZWxlY3Rpb25TdGFydCA9IDE7IHRlLnNlbGVjdGlvbkVuZCA9IGV4dHZhbC5sZW5ndGg7XG4gICAgICAgICAgLy8gUmUtc2V0IHRoaXMsIGluIGNhc2Ugc29tZSBvdGhlciBoYW5kbGVyIHRvdWNoZWQgdGhlXG4gICAgICAgICAgLy8gc2VsZWN0aW9uIGluIHRoZSBtZWFudGltZS5cbiAgICAgICAgICBkaXNwbGF5LnNlbEZvckNvbnRleHRNZW51ID0gY20uZG9jLnNlbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZnVuY3Rpb24gcmVoaWRlKCkge1xuICAgICAgICBpbnB1dC5jb250ZXh0TWVudVBlbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgaW5wdXQud3JhcHBlci5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcbiAgICAgICAgdGUuc3R5bGUuY3NzVGV4dCA9IG9sZENTUztcbiAgICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA5KSBkaXNwbGF5LnNjcm9sbGJhcnMuc2V0U2Nyb2xsVG9wKGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zKTtcblxuICAgICAgICAvLyBUcnkgdG8gZGV0ZWN0IHRoZSB1c2VyIGNob29zaW5nIHNlbGVjdC1hbGxcbiAgICAgICAgaWYgKHRlLnNlbGVjdGlvblN0YXJ0ICE9IG51bGwpIHtcbiAgICAgICAgICBpZiAoIWllIHx8IChpZSAmJiBpZV92ZXJzaW9uIDwgOSkpIHByZXBhcmVTZWxlY3RBbGxIYWNrKCk7XG4gICAgICAgICAgdmFyIGkgPSAwLCBwb2xsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoZGlzcGxheS5zZWxGb3JDb250ZXh0TWVudSA9PSBjbS5kb2Muc2VsICYmIHRlLnNlbGVjdGlvblN0YXJ0ID09IDAgJiZcbiAgICAgICAgICAgICAgICB0ZS5zZWxlY3Rpb25FbmQgPiAwICYmIGlucHV0LnByZXZJbnB1dCA9PSBcIlxcdTIwMGJcIilcbiAgICAgICAgICAgICAgb3BlcmF0aW9uKGNtLCBjb21tYW5kcy5zZWxlY3RBbGwpKGNtKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGkrKyA8IDEwKSBkaXNwbGF5LmRldGVjdGluZ1NlbGVjdEFsbCA9IHNldFRpbWVvdXQocG9sbCwgNTAwKTtcbiAgICAgICAgICAgIGVsc2UgZGlzcGxheS5pbnB1dC5yZXNldCgpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgZGlzcGxheS5kZXRlY3RpbmdTZWxlY3RBbGwgPSBzZXRUaW1lb3V0KHBvbGwsIDIwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPj0gOSkgcHJlcGFyZVNlbGVjdEFsbEhhY2soKTtcbiAgICAgIGlmIChjYXB0dXJlUmlnaHRDbGljaykge1xuICAgICAgICBlX3N0b3AoZSk7XG4gICAgICAgIHZhciBtb3VzZXVwID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgb2ZmKHdpbmRvdywgXCJtb3VzZXVwXCIsIG1vdXNldXApO1xuICAgICAgICAgIHNldFRpbWVvdXQocmVoaWRlLCAyMCk7XG4gICAgICAgIH07XG4gICAgICAgIG9uKHdpbmRvdywgXCJtb3VzZXVwXCIsIG1vdXNldXApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0VGltZW91dChyZWhpZGUsIDUwKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVhZE9ubHlDaGFuZ2VkOiBmdW5jdGlvbih2YWwpIHtcbiAgICAgIGlmICghdmFsKSB0aGlzLnJlc2V0KCk7XG4gICAgfSxcblxuICAgIHNldFVuZWRpdGFibGU6IG5vdGhpbmcsXG5cbiAgICBuZWVkc0NvbnRlbnRBdHRyaWJ1dGU6IGZhbHNlXG4gIH0sIFRleHRhcmVhSW5wdXQucHJvdG90eXBlKTtcblxuICAvLyBDT05URU5URURJVEFCTEUgSU5QVVQgU1RZTEVcblxuICBmdW5jdGlvbiBDb250ZW50RWRpdGFibGVJbnB1dChjbSkge1xuICAgIHRoaXMuY20gPSBjbTtcbiAgICB0aGlzLmxhc3RBbmNob3JOb2RlID0gdGhpcy5sYXN0QW5jaG9yT2Zmc2V0ID0gdGhpcy5sYXN0Rm9jdXNOb2RlID0gdGhpcy5sYXN0Rm9jdXNPZmZzZXQgPSBudWxsO1xuICAgIHRoaXMucG9sbGluZyA9IG5ldyBEZWxheWVkKCk7XG4gICAgdGhpcy5ncmFjZVBlcmlvZCA9IGZhbHNlO1xuICB9XG5cbiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlID0gY29weU9iaih7XG4gICAgaW5pdDogZnVuY3Rpb24oZGlzcGxheSkge1xuICAgICAgdmFyIGlucHV0ID0gdGhpcywgY20gPSBpbnB1dC5jbTtcbiAgICAgIHZhciBkaXYgPSBpbnB1dC5kaXYgPSBkaXNwbGF5LmxpbmVEaXY7XG4gICAgICBkaXNhYmxlQnJvd3Nlck1hZ2ljKGRpdik7XG5cbiAgICAgIG9uKGRpdiwgXCJwYXN0ZVwiLCBmdW5jdGlvbihlKSB7IGhhbmRsZVBhc3RlKGUsIGNtKTsgfSlcblxuICAgICAgb24oZGl2LCBcImNvbXBvc2l0aW9uc3RhcnRcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgZGF0YSA9IGUuZGF0YTtcbiAgICAgICAgaW5wdXQuY29tcG9zaW5nID0ge3NlbDogY20uZG9jLnNlbCwgZGF0YTogZGF0YSwgc3RhcnREYXRhOiBkYXRhfTtcbiAgICAgICAgaWYgKCFkYXRhKSByZXR1cm47XG4gICAgICAgIHZhciBwcmltID0gY20uZG9jLnNlbC5wcmltYXJ5KCk7XG4gICAgICAgIHZhciBsaW5lID0gY20uZ2V0TGluZShwcmltLmhlYWQubGluZSk7XG4gICAgICAgIHZhciBmb3VuZCA9IGxpbmUuaW5kZXhPZihkYXRhLCBNYXRoLm1heCgwLCBwcmltLmhlYWQuY2ggLSBkYXRhLmxlbmd0aCkpO1xuICAgICAgICBpZiAoZm91bmQgPiAtMSAmJiBmb3VuZCA8PSBwcmltLmhlYWQuY2gpXG4gICAgICAgICAgaW5wdXQuY29tcG9zaW5nLnNlbCA9IHNpbXBsZVNlbGVjdGlvbihQb3MocHJpbS5oZWFkLmxpbmUsIGZvdW5kKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvcyhwcmltLmhlYWQubGluZSwgZm91bmQgKyBkYXRhLmxlbmd0aCkpO1xuICAgICAgfSk7XG4gICAgICBvbihkaXYsIFwiY29tcG9zaXRpb251cGRhdGVcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBpbnB1dC5jb21wb3NpbmcuZGF0YSA9IGUuZGF0YTtcbiAgICAgIH0pO1xuICAgICAgb24oZGl2LCBcImNvbXBvc2l0aW9uZW5kXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIG91cnMgPSBpbnB1dC5jb21wb3Npbmc7XG4gICAgICAgIGlmICghb3VycykgcmV0dXJuO1xuICAgICAgICBpZiAoZS5kYXRhICE9IG91cnMuc3RhcnREYXRhICYmICEvXFx1MjAwYi8udGVzdChlLmRhdGEpKVxuICAgICAgICAgIG91cnMuZGF0YSA9IGUuZGF0YTtcbiAgICAgICAgLy8gTmVlZCBhIHNtYWxsIGRlbGF5IHRvIHByZXZlbnQgb3RoZXIgY29kZSAoaW5wdXQgZXZlbnQsXG4gICAgICAgIC8vIHNlbGVjdGlvbiBwb2xsaW5nKSBmcm9tIGRvaW5nIGRhbWFnZSB3aGVuIGZpcmVkIHJpZ2h0IGFmdGVyXG4gICAgICAgIC8vIGNvbXBvc2l0aW9uZW5kLlxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICghb3Vycy5oYW5kbGVkKVxuICAgICAgICAgICAgaW5wdXQuYXBwbHlDb21wb3NpdGlvbihvdXJzKTtcbiAgICAgICAgICBpZiAoaW5wdXQuY29tcG9zaW5nID09IG91cnMpXG4gICAgICAgICAgICBpbnB1dC5jb21wb3NpbmcgPSBudWxsO1xuICAgICAgICB9LCA1MCk7XG4gICAgICB9KTtcblxuICAgICAgb24oZGl2LCBcInRvdWNoc3RhcnRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlucHV0LmZvcmNlQ29tcG9zaXRpb25FbmQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBvbihkaXYsIFwiaW5wdXRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChpbnB1dC5jb21wb3NpbmcpIHJldHVybjtcbiAgICAgICAgaWYgKGlzUmVhZE9ubHkoY20pIHx8ICFpbnB1dC5wb2xsQ29udGVudCgpKVxuICAgICAgICAgIHJ1bkluT3AoaW5wdXQuY20sIGZ1bmN0aW9uKCkge3JlZ0NoYW5nZShjbSk7fSk7XG4gICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gb25Db3B5Q3V0KGUpIHtcbiAgICAgICAgaWYgKGNtLnNvbWV0aGluZ1NlbGVjdGVkKCkpIHtcbiAgICAgICAgICBsYXN0Q29waWVkID0gY20uZ2V0U2VsZWN0aW9ucygpO1xuICAgICAgICAgIGlmIChlLnR5cGUgPT0gXCJjdXRcIikgY20ucmVwbGFjZVNlbGVjdGlvbihcIlwiLCBudWxsLCBcImN1dFwiKTtcbiAgICAgICAgfSBlbHNlIGlmICghY20ub3B0aW9ucy5saW5lV2lzZUNvcHlDdXQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHJhbmdlcyA9IGNvcHlhYmxlUmFuZ2VzKGNtKTtcbiAgICAgICAgICBsYXN0Q29waWVkID0gcmFuZ2VzLnRleHQ7XG4gICAgICAgICAgaWYgKGUudHlwZSA9PSBcImN1dFwiKSB7XG4gICAgICAgICAgICBjbS5vcGVyYXRpb24oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGNtLnNldFNlbGVjdGlvbnMocmFuZ2VzLnJhbmdlcywgMCwgc2VsX2RvbnRTY3JvbGwpO1xuICAgICAgICAgICAgICBjbS5yZXBsYWNlU2VsZWN0aW9uKFwiXCIsIG51bGwsIFwiY3V0XCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGlPUyBleHBvc2VzIHRoZSBjbGlwYm9hcmQgQVBJLCBidXQgc2VlbXMgdG8gZGlzY2FyZCBjb250ZW50IGluc2VydGVkIGludG8gaXRcbiAgICAgICAgaWYgKGUuY2xpcGJvYXJkRGF0YSAmJiAhaW9zKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGUuY2xpcGJvYXJkRGF0YS5jbGVhckRhdGEoKTtcbiAgICAgICAgICBlLmNsaXBib2FyZERhdGEuc2V0RGF0YShcInRleHQvcGxhaW5cIiwgbGFzdENvcGllZC5qb2luKFwiXFxuXCIpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBPbGQtZmFzaGlvbmVkIGJyaWVmbHktZm9jdXMtYS10ZXh0YXJlYSBoYWNrXG4gICAgICAgICAgdmFyIGtsdWRnZSA9IGhpZGRlblRleHRhcmVhKCksIHRlID0ga2x1ZGdlLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgY20uZGlzcGxheS5saW5lU3BhY2UuaW5zZXJ0QmVmb3JlKGtsdWRnZSwgY20uZGlzcGxheS5saW5lU3BhY2UuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgdGUudmFsdWUgPSBsYXN0Q29waWVkLmpvaW4oXCJcXG5cIik7XG4gICAgICAgICAgdmFyIGhhZEZvY3VzID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICAgICAgICBzZWxlY3RJbnB1dCh0ZSk7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNtLmRpc3BsYXkubGluZVNwYWNlLnJlbW92ZUNoaWxkKGtsdWRnZSk7XG4gICAgICAgICAgICBoYWRGb2N1cy5mb2N1cygpO1xuICAgICAgICAgIH0sIDUwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgb24oZGl2LCBcImNvcHlcIiwgb25Db3B5Q3V0KTtcbiAgICAgIG9uKGRpdiwgXCJjdXRcIiwgb25Db3B5Q3V0KTtcbiAgICB9LFxuXG4gICAgcHJlcGFyZVNlbGVjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gcHJlcGFyZVNlbGVjdGlvbih0aGlzLmNtLCBmYWxzZSk7XG4gICAgICByZXN1bHQuZm9jdXMgPSB0aGlzLmNtLnN0YXRlLmZvY3VzZWQ7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG5cbiAgICBzaG93U2VsZWN0aW9uOiBmdW5jdGlvbihpbmZvKSB7XG4gICAgICBpZiAoIWluZm8gfHwgIXRoaXMuY20uZGlzcGxheS52aWV3Lmxlbmd0aCkgcmV0dXJuO1xuICAgICAgaWYgKGluZm8uZm9jdXMpIHRoaXMuc2hvd1ByaW1hcnlTZWxlY3Rpb24oKTtcbiAgICAgIHRoaXMuc2hvd011bHRpcGxlU2VsZWN0aW9ucyhpbmZvKTtcbiAgICB9LFxuXG4gICAgc2hvd1ByaW1hcnlTZWxlY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKSwgcHJpbSA9IHRoaXMuY20uZG9jLnNlbC5wcmltYXJ5KCk7XG4gICAgICB2YXIgY3VyQW5jaG9yID0gZG9tVG9Qb3ModGhpcy5jbSwgc2VsLmFuY2hvck5vZGUsIHNlbC5hbmNob3JPZmZzZXQpO1xuICAgICAgdmFyIGN1ckZvY3VzID0gZG9tVG9Qb3ModGhpcy5jbSwgc2VsLmZvY3VzTm9kZSwgc2VsLmZvY3VzT2Zmc2V0KTtcbiAgICAgIGlmIChjdXJBbmNob3IgJiYgIWN1ckFuY2hvci5iYWQgJiYgY3VyRm9jdXMgJiYgIWN1ckZvY3VzLmJhZCAmJlxuICAgICAgICAgIGNtcChtaW5Qb3MoY3VyQW5jaG9yLCBjdXJGb2N1cyksIHByaW0uZnJvbSgpKSA9PSAwICYmXG4gICAgICAgICAgY21wKG1heFBvcyhjdXJBbmNob3IsIGN1ckZvY3VzKSwgcHJpbS50bygpKSA9PSAwKVxuICAgICAgICByZXR1cm47XG5cbiAgICAgIHZhciBzdGFydCA9IHBvc1RvRE9NKHRoaXMuY20sIHByaW0uZnJvbSgpKTtcbiAgICAgIHZhciBlbmQgPSBwb3NUb0RPTSh0aGlzLmNtLCBwcmltLnRvKCkpO1xuICAgICAgaWYgKCFzdGFydCAmJiAhZW5kKSByZXR1cm47XG5cbiAgICAgIHZhciB2aWV3ID0gdGhpcy5jbS5kaXNwbGF5LnZpZXc7XG4gICAgICB2YXIgb2xkID0gc2VsLnJhbmdlQ291bnQgJiYgc2VsLmdldFJhbmdlQXQoMCk7XG4gICAgICBpZiAoIXN0YXJ0KSB7XG4gICAgICAgIHN0YXJ0ID0ge25vZGU6IHZpZXdbMF0ubWVhc3VyZS5tYXBbMl0sIG9mZnNldDogMH07XG4gICAgICB9IGVsc2UgaWYgKCFlbmQpIHsgLy8gRklYTUUgZGFuZ2Vyb3VzbHkgaGFja3lcbiAgICAgICAgdmFyIG1lYXN1cmUgPSB2aWV3W3ZpZXcubGVuZ3RoIC0gMV0ubWVhc3VyZTtcbiAgICAgICAgdmFyIG1hcCA9IG1lYXN1cmUubWFwcyA/IG1lYXN1cmUubWFwc1ttZWFzdXJlLm1hcHMubGVuZ3RoIC0gMV0gOiBtZWFzdXJlLm1hcDtcbiAgICAgICAgZW5kID0ge25vZGU6IG1hcFttYXAubGVuZ3RoIC0gMV0sIG9mZnNldDogbWFwW21hcC5sZW5ndGggLSAyXSAtIG1hcFttYXAubGVuZ3RoIC0gM119O1xuICAgICAgfVxuXG4gICAgICB0cnkgeyB2YXIgcm5nID0gcmFuZ2Uoc3RhcnQubm9kZSwgc3RhcnQub2Zmc2V0LCBlbmQub2Zmc2V0LCBlbmQubm9kZSk7IH1cbiAgICAgIGNhdGNoKGUpIHt9IC8vIE91ciBtb2RlbCBvZiB0aGUgRE9NIG1pZ2h0IGJlIG91dGRhdGVkLCBpbiB3aGljaCBjYXNlIHRoZSByYW5nZSB3ZSB0cnkgdG8gc2V0IGNhbiBiZSBpbXBvc3NpYmxlXG4gICAgICBpZiAocm5nKSB7XG4gICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgICAgc2VsLmFkZFJhbmdlKHJuZyk7XG4gICAgICAgIGlmIChvbGQgJiYgc2VsLmFuY2hvck5vZGUgPT0gbnVsbCkgc2VsLmFkZFJhbmdlKG9sZCk7XG4gICAgICAgIGVsc2UgaWYgKGdlY2tvKSB0aGlzLnN0YXJ0R3JhY2VQZXJpb2QoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVtZW1iZXJTZWxlY3Rpb24oKTtcbiAgICB9LFxuXG4gICAgc3RhcnRHcmFjZVBlcmlvZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaW5wdXQgPSB0aGlzO1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZ3JhY2VQZXJpb2QpO1xuICAgICAgdGhpcy5ncmFjZVBlcmlvZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlucHV0LmdyYWNlUGVyaW9kID0gZmFsc2U7XG4gICAgICAgIGlmIChpbnB1dC5zZWxlY3Rpb25DaGFuZ2VkKCkpXG4gICAgICAgICAgaW5wdXQuY20ub3BlcmF0aW9uKGZ1bmN0aW9uKCkgeyBpbnB1dC5jbS5jdXJPcC5zZWxlY3Rpb25DaGFuZ2VkID0gdHJ1ZTsgfSk7XG4gICAgICB9LCAyMCk7XG4gICAgfSxcblxuICAgIHNob3dNdWx0aXBsZVNlbGVjdGlvbnM6IGZ1bmN0aW9uKGluZm8pIHtcbiAgICAgIHJlbW92ZUNoaWxkcmVuQW5kQWRkKHRoaXMuY20uZGlzcGxheS5jdXJzb3JEaXYsIGluZm8uY3Vyc29ycyk7XG4gICAgICByZW1vdmVDaGlsZHJlbkFuZEFkZCh0aGlzLmNtLmRpc3BsYXkuc2VsZWN0aW9uRGl2LCBpbmZvLnNlbGVjdGlvbik7XG4gICAgfSxcblxuICAgIHJlbWVtYmVyU2VsZWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICB0aGlzLmxhc3RBbmNob3JOb2RlID0gc2VsLmFuY2hvck5vZGU7IHRoaXMubGFzdEFuY2hvck9mZnNldCA9IHNlbC5hbmNob3JPZmZzZXQ7XG4gICAgICB0aGlzLmxhc3RGb2N1c05vZGUgPSBzZWwuZm9jdXNOb2RlOyB0aGlzLmxhc3RGb2N1c09mZnNldCA9IHNlbC5mb2N1c09mZnNldDtcbiAgICB9LFxuXG4gICAgc2VsZWN0aW9uSW5FZGl0b3I6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgIGlmICghc2VsLnJhbmdlQ291bnQpIHJldHVybiBmYWxzZTtcbiAgICAgIHZhciBub2RlID0gc2VsLmdldFJhbmdlQXQoMCkuY29tbW9uQW5jZXN0b3JDb250YWluZXI7XG4gICAgICByZXR1cm4gY29udGFpbnModGhpcy5kaXYsIG5vZGUpO1xuICAgIH0sXG5cbiAgICBmb2N1czogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5jbS5vcHRpb25zLnJlYWRPbmx5ICE9IFwibm9jdXJzb3JcIikgdGhpcy5kaXYuZm9jdXMoKTtcbiAgICB9LFxuICAgIGJsdXI6IGZ1bmN0aW9uKCkgeyB0aGlzLmRpdi5ibHVyKCk7IH0sXG4gICAgZ2V0RmllbGQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5kaXY7IH0sXG5cbiAgICBzdXBwb3J0c1RvdWNoOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0sXG5cbiAgICByZWNlaXZlZEZvY3VzOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpbnB1dCA9IHRoaXM7XG4gICAgICBpZiAodGhpcy5zZWxlY3Rpb25JbkVkaXRvcigpKVxuICAgICAgICB0aGlzLnBvbGxTZWxlY3Rpb24oKTtcbiAgICAgIGVsc2VcbiAgICAgICAgcnVuSW5PcCh0aGlzLmNtLCBmdW5jdGlvbigpIHsgaW5wdXQuY20uY3VyT3Auc2VsZWN0aW9uQ2hhbmdlZCA9IHRydWU7IH0pO1xuXG4gICAgICBmdW5jdGlvbiBwb2xsKCkge1xuICAgICAgICBpZiAoaW5wdXQuY20uc3RhdGUuZm9jdXNlZCkge1xuICAgICAgICAgIGlucHV0LnBvbGxTZWxlY3Rpb24oKTtcbiAgICAgICAgICBpbnB1dC5wb2xsaW5nLnNldChpbnB1dC5jbS5vcHRpb25zLnBvbGxJbnRlcnZhbCwgcG9sbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMucG9sbGluZy5zZXQodGhpcy5jbS5vcHRpb25zLnBvbGxJbnRlcnZhbCwgcG9sbCk7XG4gICAgfSxcblxuICAgIHNlbGVjdGlvbkNoYW5nZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgIHJldHVybiBzZWwuYW5jaG9yTm9kZSAhPSB0aGlzLmxhc3RBbmNob3JOb2RlIHx8IHNlbC5hbmNob3JPZmZzZXQgIT0gdGhpcy5sYXN0QW5jaG9yT2Zmc2V0IHx8XG4gICAgICAgIHNlbC5mb2N1c05vZGUgIT0gdGhpcy5sYXN0Rm9jdXNOb2RlIHx8IHNlbC5mb2N1c09mZnNldCAhPSB0aGlzLmxhc3RGb2N1c09mZnNldDtcbiAgICB9LFxuXG4gICAgcG9sbFNlbGVjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIXRoaXMuY29tcG9zaW5nICYmICF0aGlzLmdyYWNlUGVyaW9kICYmIHRoaXMuc2VsZWN0aW9uQ2hhbmdlZCgpKSB7XG4gICAgICAgIHZhciBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCksIGNtID0gdGhpcy5jbTtcbiAgICAgICAgdGhpcy5yZW1lbWJlclNlbGVjdGlvbigpO1xuICAgICAgICB2YXIgYW5jaG9yID0gZG9tVG9Qb3MoY20sIHNlbC5hbmNob3JOb2RlLCBzZWwuYW5jaG9yT2Zmc2V0KTtcbiAgICAgICAgdmFyIGhlYWQgPSBkb21Ub1BvcyhjbSwgc2VsLmZvY3VzTm9kZSwgc2VsLmZvY3VzT2Zmc2V0KTtcbiAgICAgICAgaWYgKGFuY2hvciAmJiBoZWFkKSBydW5Jbk9wKGNtLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZXRTZWxlY3Rpb24oY20uZG9jLCBzaW1wbGVTZWxlY3Rpb24oYW5jaG9yLCBoZWFkKSwgc2VsX2RvbnRTY3JvbGwpO1xuICAgICAgICAgIGlmIChhbmNob3IuYmFkIHx8IGhlYWQuYmFkKSBjbS5jdXJPcC5zZWxlY3Rpb25DaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHBvbGxDb250ZW50OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjbSA9IHRoaXMuY20sIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBzZWwgPSBjbS5kb2Muc2VsLnByaW1hcnkoKTtcbiAgICAgIHZhciBmcm9tID0gc2VsLmZyb20oKSwgdG8gPSBzZWwudG8oKTtcbiAgICAgIGlmIChmcm9tLmxpbmUgPCBkaXNwbGF5LnZpZXdGcm9tIHx8IHRvLmxpbmUgPiBkaXNwbGF5LnZpZXdUbyAtIDEpIHJldHVybiBmYWxzZTtcblxuICAgICAgdmFyIGZyb21JbmRleDtcbiAgICAgIGlmIChmcm9tLmxpbmUgPT0gZGlzcGxheS52aWV3RnJvbSB8fCAoZnJvbUluZGV4ID0gZmluZFZpZXdJbmRleChjbSwgZnJvbS5saW5lKSkgPT0gMCkge1xuICAgICAgICB2YXIgZnJvbUxpbmUgPSBsaW5lTm8oZGlzcGxheS52aWV3WzBdLmxpbmUpO1xuICAgICAgICB2YXIgZnJvbU5vZGUgPSBkaXNwbGF5LnZpZXdbMF0ubm9kZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBmcm9tTGluZSA9IGxpbmVObyhkaXNwbGF5LnZpZXdbZnJvbUluZGV4XS5saW5lKTtcbiAgICAgICAgdmFyIGZyb21Ob2RlID0gZGlzcGxheS52aWV3W2Zyb21JbmRleCAtIDFdLm5vZGUubmV4dFNpYmxpbmc7XG4gICAgICB9XG4gICAgICB2YXIgdG9JbmRleCA9IGZpbmRWaWV3SW5kZXgoY20sIHRvLmxpbmUpO1xuICAgICAgaWYgKHRvSW5kZXggPT0gZGlzcGxheS52aWV3Lmxlbmd0aCAtIDEpIHtcbiAgICAgICAgdmFyIHRvTGluZSA9IGRpc3BsYXkudmlld1RvIC0gMTtcbiAgICAgICAgdmFyIHRvTm9kZSA9IGRpc3BsYXkubGluZURpdi5sYXN0Q2hpbGQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgdG9MaW5lID0gbGluZU5vKGRpc3BsYXkudmlld1t0b0luZGV4ICsgMV0ubGluZSkgLSAxO1xuICAgICAgICB2YXIgdG9Ob2RlID0gZGlzcGxheS52aWV3W3RvSW5kZXggKyAxXS5ub2RlLnByZXZpb3VzU2libGluZztcbiAgICAgIH1cblxuICAgICAgdmFyIG5ld1RleHQgPSBjbS5kb2Muc3BsaXRMaW5lcyhkb21UZXh0QmV0d2VlbihjbSwgZnJvbU5vZGUsIHRvTm9kZSwgZnJvbUxpbmUsIHRvTGluZSkpO1xuICAgICAgdmFyIG9sZFRleHQgPSBnZXRCZXR3ZWVuKGNtLmRvYywgUG9zKGZyb21MaW5lLCAwKSwgUG9zKHRvTGluZSwgZ2V0TGluZShjbS5kb2MsIHRvTGluZSkudGV4dC5sZW5ndGgpKTtcbiAgICAgIHdoaWxlIChuZXdUZXh0Lmxlbmd0aCA+IDEgJiYgb2xkVGV4dC5sZW5ndGggPiAxKSB7XG4gICAgICAgIGlmIChsc3QobmV3VGV4dCkgPT0gbHN0KG9sZFRleHQpKSB7IG5ld1RleHQucG9wKCk7IG9sZFRleHQucG9wKCk7IHRvTGluZS0tOyB9XG4gICAgICAgIGVsc2UgaWYgKG5ld1RleHRbMF0gPT0gb2xkVGV4dFswXSkgeyBuZXdUZXh0LnNoaWZ0KCk7IG9sZFRleHQuc2hpZnQoKTsgZnJvbUxpbmUrKzsgfVxuICAgICAgICBlbHNlIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICB2YXIgY3V0RnJvbnQgPSAwLCBjdXRFbmQgPSAwO1xuICAgICAgdmFyIG5ld1RvcCA9IG5ld1RleHRbMF0sIG9sZFRvcCA9IG9sZFRleHRbMF0sIG1heEN1dEZyb250ID0gTWF0aC5taW4obmV3VG9wLmxlbmd0aCwgb2xkVG9wLmxlbmd0aCk7XG4gICAgICB3aGlsZSAoY3V0RnJvbnQgPCBtYXhDdXRGcm9udCAmJiBuZXdUb3AuY2hhckNvZGVBdChjdXRGcm9udCkgPT0gb2xkVG9wLmNoYXJDb2RlQXQoY3V0RnJvbnQpKVxuICAgICAgICArK2N1dEZyb250O1xuICAgICAgdmFyIG5ld0JvdCA9IGxzdChuZXdUZXh0KSwgb2xkQm90ID0gbHN0KG9sZFRleHQpO1xuICAgICAgdmFyIG1heEN1dEVuZCA9IE1hdGgubWluKG5ld0JvdC5sZW5ndGggLSAobmV3VGV4dC5sZW5ndGggPT0gMSA/IGN1dEZyb250IDogMCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkQm90Lmxlbmd0aCAtIChvbGRUZXh0Lmxlbmd0aCA9PSAxID8gY3V0RnJvbnQgOiAwKSk7XG4gICAgICB3aGlsZSAoY3V0RW5kIDwgbWF4Q3V0RW5kICYmXG4gICAgICAgICAgICAgbmV3Qm90LmNoYXJDb2RlQXQobmV3Qm90Lmxlbmd0aCAtIGN1dEVuZCAtIDEpID09IG9sZEJvdC5jaGFyQ29kZUF0KG9sZEJvdC5sZW5ndGggLSBjdXRFbmQgLSAxKSlcbiAgICAgICAgKytjdXRFbmQ7XG5cbiAgICAgIG5ld1RleHRbbmV3VGV4dC5sZW5ndGggLSAxXSA9IG5ld0JvdC5zbGljZSgwLCBuZXdCb3QubGVuZ3RoIC0gY3V0RW5kKTtcbiAgICAgIG5ld1RleHRbMF0gPSBuZXdUZXh0WzBdLnNsaWNlKGN1dEZyb250KTtcblxuICAgICAgdmFyIGNoRnJvbSA9IFBvcyhmcm9tTGluZSwgY3V0RnJvbnQpO1xuICAgICAgdmFyIGNoVG8gPSBQb3ModG9MaW5lLCBvbGRUZXh0Lmxlbmd0aCA/IGxzdChvbGRUZXh0KS5sZW5ndGggLSBjdXRFbmQgOiAwKTtcbiAgICAgIGlmIChuZXdUZXh0Lmxlbmd0aCA+IDEgfHwgbmV3VGV4dFswXSB8fCBjbXAoY2hGcm9tLCBjaFRvKSkge1xuICAgICAgICByZXBsYWNlUmFuZ2UoY20uZG9jLCBuZXdUZXh0LCBjaEZyb20sIGNoVG8sIFwiK2lucHV0XCIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZW5zdXJlUG9sbGVkOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZm9yY2VDb21wb3NpdGlvbkVuZCgpO1xuICAgIH0sXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5mb3JjZUNvbXBvc2l0aW9uRW5kKCk7XG4gICAgfSxcbiAgICBmb3JjZUNvbXBvc2l0aW9uRW5kOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghdGhpcy5jb21wb3NpbmcgfHwgdGhpcy5jb21wb3NpbmcuaGFuZGxlZCkgcmV0dXJuO1xuICAgICAgdGhpcy5hcHBseUNvbXBvc2l0aW9uKHRoaXMuY29tcG9zaW5nKTtcbiAgICAgIHRoaXMuY29tcG9zaW5nLmhhbmRsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5kaXYuYmx1cigpO1xuICAgICAgdGhpcy5kaXYuZm9jdXMoKTtcbiAgICB9LFxuICAgIGFwcGx5Q29tcG9zaXRpb246IGZ1bmN0aW9uKGNvbXBvc2luZykge1xuICAgICAgaWYgKGlzUmVhZE9ubHkodGhpcy5jbSkpXG4gICAgICAgIG9wZXJhdGlvbih0aGlzLmNtLCByZWdDaGFuZ2UpKHRoaXMuY20pXG4gICAgICBlbHNlIGlmIChjb21wb3NpbmcuZGF0YSAmJiBjb21wb3NpbmcuZGF0YSAhPSBjb21wb3Npbmcuc3RhcnREYXRhKVxuICAgICAgICBvcGVyYXRpb24odGhpcy5jbSwgYXBwbHlUZXh0SW5wdXQpKHRoaXMuY20sIGNvbXBvc2luZy5kYXRhLCAwLCBjb21wb3Npbmcuc2VsKTtcbiAgICB9LFxuXG4gICAgc2V0VW5lZGl0YWJsZTogZnVuY3Rpb24obm9kZSkge1xuICAgICAgbm9kZS5jb250ZW50RWRpdGFibGUgPSBcImZhbHNlXCJcbiAgICB9LFxuXG4gICAgb25LZXlQcmVzczogZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKCFpc1JlYWRPbmx5KHRoaXMuY20pKVxuICAgICAgICBvcGVyYXRpb24odGhpcy5jbSwgYXBwbHlUZXh0SW5wdXQpKHRoaXMuY20sIFN0cmluZy5mcm9tQ2hhckNvZGUoZS5jaGFyQ29kZSA9PSBudWxsID8gZS5rZXlDb2RlIDogZS5jaGFyQ29kZSksIDApO1xuICAgIH0sXG5cbiAgICByZWFkT25seUNoYW5nZWQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgdGhpcy5kaXYuY29udGVudEVkaXRhYmxlID0gU3RyaW5nKHZhbCAhPSBcIm5vY3Vyc29yXCIpXG4gICAgfSxcblxuICAgIG9uQ29udGV4dE1lbnU6IG5vdGhpbmcsXG4gICAgcmVzZXRQb3NpdGlvbjogbm90aGluZyxcblxuICAgIG5lZWRzQ29udGVudEF0dHJpYnV0ZTogdHJ1ZVxuICB9LCBDb250ZW50RWRpdGFibGVJbnB1dC5wcm90b3R5cGUpO1xuXG4gIGZ1bmN0aW9uIHBvc1RvRE9NKGNtLCBwb3MpIHtcbiAgICB2YXIgdmlldyA9IGZpbmRWaWV3Rm9yTGluZShjbSwgcG9zLmxpbmUpO1xuICAgIGlmICghdmlldyB8fCB2aWV3LmhpZGRlbikgcmV0dXJuIG51bGw7XG4gICAgdmFyIGxpbmUgPSBnZXRMaW5lKGNtLmRvYywgcG9zLmxpbmUpO1xuICAgIHZhciBpbmZvID0gbWFwRnJvbUxpbmVWaWV3KHZpZXcsIGxpbmUsIHBvcy5saW5lKTtcblxuICAgIHZhciBvcmRlciA9IGdldE9yZGVyKGxpbmUpLCBzaWRlID0gXCJsZWZ0XCI7XG4gICAgaWYgKG9yZGVyKSB7XG4gICAgICB2YXIgcGFydFBvcyA9IGdldEJpZGlQYXJ0QXQob3JkZXIsIHBvcy5jaCk7XG4gICAgICBzaWRlID0gcGFydFBvcyAlIDIgPyBcInJpZ2h0XCIgOiBcImxlZnRcIjtcbiAgICB9XG4gICAgdmFyIHJlc3VsdCA9IG5vZGVBbmRPZmZzZXRJbkxpbmVNYXAoaW5mby5tYXAsIHBvcy5jaCwgc2lkZSk7XG4gICAgcmVzdWx0Lm9mZnNldCA9IHJlc3VsdC5jb2xsYXBzZSA9PSBcInJpZ2h0XCIgPyByZXN1bHQuZW5kIDogcmVzdWx0LnN0YXJ0O1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBiYWRQb3MocG9zLCBiYWQpIHsgaWYgKGJhZCkgcG9zLmJhZCA9IHRydWU7IHJldHVybiBwb3M7IH1cblxuICBmdW5jdGlvbiBkb21Ub1BvcyhjbSwgbm9kZSwgb2Zmc2V0KSB7XG4gICAgdmFyIGxpbmVOb2RlO1xuICAgIGlmIChub2RlID09IGNtLmRpc3BsYXkubGluZURpdikge1xuICAgICAgbGluZU5vZGUgPSBjbS5kaXNwbGF5LmxpbmVEaXYuY2hpbGROb2Rlc1tvZmZzZXRdO1xuICAgICAgaWYgKCFsaW5lTm9kZSkgcmV0dXJuIGJhZFBvcyhjbS5jbGlwUG9zKFBvcyhjbS5kaXNwbGF5LnZpZXdUbyAtIDEpKSwgdHJ1ZSk7XG4gICAgICBub2RlID0gbnVsbDsgb2Zmc2V0ID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsaW5lTm9kZSA9IG5vZGU7OyBsaW5lTm9kZSA9IGxpbmVOb2RlLnBhcmVudE5vZGUpIHtcbiAgICAgICAgaWYgKCFsaW5lTm9kZSB8fCBsaW5lTm9kZSA9PSBjbS5kaXNwbGF5LmxpbmVEaXYpIHJldHVybiBudWxsO1xuICAgICAgICBpZiAobGluZU5vZGUucGFyZW50Tm9kZSAmJiBsaW5lTm9kZS5wYXJlbnROb2RlID09IGNtLmRpc3BsYXkubGluZURpdikgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY20uZGlzcGxheS52aWV3Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbGluZVZpZXcgPSBjbS5kaXNwbGF5LnZpZXdbaV07XG4gICAgICBpZiAobGluZVZpZXcubm9kZSA9PSBsaW5lTm9kZSlcbiAgICAgICAgcmV0dXJuIGxvY2F0ZU5vZGVJbkxpbmVWaWV3KGxpbmVWaWV3LCBub2RlLCBvZmZzZXQpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGxvY2F0ZU5vZGVJbkxpbmVWaWV3KGxpbmVWaWV3LCBub2RlLCBvZmZzZXQpIHtcbiAgICB2YXIgd3JhcHBlciA9IGxpbmVWaWV3LnRleHQuZmlyc3RDaGlsZCwgYmFkID0gZmFsc2U7XG4gICAgaWYgKCFub2RlIHx8ICFjb250YWlucyh3cmFwcGVyLCBub2RlKSkgcmV0dXJuIGJhZFBvcyhQb3MobGluZU5vKGxpbmVWaWV3LmxpbmUpLCAwKSwgdHJ1ZSk7XG4gICAgaWYgKG5vZGUgPT0gd3JhcHBlcikge1xuICAgICAgYmFkID0gdHJ1ZTtcbiAgICAgIG5vZGUgPSB3cmFwcGVyLmNoaWxkTm9kZXNbb2Zmc2V0XTtcbiAgICAgIG9mZnNldCA9IDA7XG4gICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgdmFyIGxpbmUgPSBsaW5lVmlldy5yZXN0ID8gbHN0KGxpbmVWaWV3LnJlc3QpIDogbGluZVZpZXcubGluZTtcbiAgICAgICAgcmV0dXJuIGJhZFBvcyhQb3MobGluZU5vKGxpbmUpLCBsaW5lLnRleHQubGVuZ3RoKSwgYmFkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgdGV4dE5vZGUgPSBub2RlLm5vZGVUeXBlID09IDMgPyBub2RlIDogbnVsbCwgdG9wTm9kZSA9IG5vZGU7XG4gICAgaWYgKCF0ZXh0Tm9kZSAmJiBub2RlLmNoaWxkTm9kZXMubGVuZ3RoID09IDEgJiYgbm9kZS5maXJzdENoaWxkLm5vZGVUeXBlID09IDMpIHtcbiAgICAgIHRleHROb2RlID0gbm9kZS5maXJzdENoaWxkO1xuICAgICAgaWYgKG9mZnNldCkgb2Zmc2V0ID0gdGV4dE5vZGUubm9kZVZhbHVlLmxlbmd0aDtcbiAgICB9XG4gICAgd2hpbGUgKHRvcE5vZGUucGFyZW50Tm9kZSAhPSB3cmFwcGVyKSB0b3BOb2RlID0gdG9wTm9kZS5wYXJlbnROb2RlO1xuICAgIHZhciBtZWFzdXJlID0gbGluZVZpZXcubWVhc3VyZSwgbWFwcyA9IG1lYXN1cmUubWFwcztcblxuICAgIGZ1bmN0aW9uIGZpbmQodGV4dE5vZGUsIHRvcE5vZGUsIG9mZnNldCkge1xuICAgICAgZm9yICh2YXIgaSA9IC0xOyBpIDwgKG1hcHMgPyBtYXBzLmxlbmd0aCA6IDApOyBpKyspIHtcbiAgICAgICAgdmFyIG1hcCA9IGkgPCAwID8gbWVhc3VyZS5tYXAgOiBtYXBzW2ldO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1hcC5sZW5ndGg7IGogKz0gMykge1xuICAgICAgICAgIHZhciBjdXJOb2RlID0gbWFwW2ogKyAyXTtcbiAgICAgICAgICBpZiAoY3VyTm9kZSA9PSB0ZXh0Tm9kZSB8fCBjdXJOb2RlID09IHRvcE5vZGUpIHtcbiAgICAgICAgICAgIHZhciBsaW5lID0gbGluZU5vKGkgPCAwID8gbGluZVZpZXcubGluZSA6IGxpbmVWaWV3LnJlc3RbaV0pO1xuICAgICAgICAgICAgdmFyIGNoID0gbWFwW2pdICsgb2Zmc2V0O1xuICAgICAgICAgICAgaWYgKG9mZnNldCA8IDAgfHwgY3VyTm9kZSAhPSB0ZXh0Tm9kZSkgY2ggPSBtYXBbaiArIChvZmZzZXQgPyAxIDogMCldO1xuICAgICAgICAgICAgcmV0dXJuIFBvcyhsaW5lLCBjaCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBmb3VuZCA9IGZpbmQodGV4dE5vZGUsIHRvcE5vZGUsIG9mZnNldCk7XG4gICAgaWYgKGZvdW5kKSByZXR1cm4gYmFkUG9zKGZvdW5kLCBiYWQpO1xuXG4gICAgLy8gRklYTUUgdGhpcyBpcyBhbGwgcmVhbGx5IHNoYWt5LiBtaWdodCBoYW5kbGUgdGhlIGZldyBjYXNlcyBpdCBuZWVkcyB0byBoYW5kbGUsIGJ1dCBsaWtlbHkgdG8gY2F1c2UgcHJvYmxlbXNcbiAgICBmb3IgKHZhciBhZnRlciA9IHRvcE5vZGUubmV4dFNpYmxpbmcsIGRpc3QgPSB0ZXh0Tm9kZSA/IHRleHROb2RlLm5vZGVWYWx1ZS5sZW5ndGggLSBvZmZzZXQgOiAwOyBhZnRlcjsgYWZ0ZXIgPSBhZnRlci5uZXh0U2libGluZykge1xuICAgICAgZm91bmQgPSBmaW5kKGFmdGVyLCBhZnRlci5maXJzdENoaWxkLCAwKTtcbiAgICAgIGlmIChmb3VuZClcbiAgICAgICAgcmV0dXJuIGJhZFBvcyhQb3MoZm91bmQubGluZSwgZm91bmQuY2ggLSBkaXN0KSwgYmFkKTtcbiAgICAgIGVsc2VcbiAgICAgICAgZGlzdCArPSBhZnRlci50ZXh0Q29udGVudC5sZW5ndGg7XG4gICAgfVxuICAgIGZvciAodmFyIGJlZm9yZSA9IHRvcE5vZGUucHJldmlvdXNTaWJsaW5nLCBkaXN0ID0gb2Zmc2V0OyBiZWZvcmU7IGJlZm9yZSA9IGJlZm9yZS5wcmV2aW91c1NpYmxpbmcpIHtcbiAgICAgIGZvdW5kID0gZmluZChiZWZvcmUsIGJlZm9yZS5maXJzdENoaWxkLCAtMSk7XG4gICAgICBpZiAoZm91bmQpXG4gICAgICAgIHJldHVybiBiYWRQb3MoUG9zKGZvdW5kLmxpbmUsIGZvdW5kLmNoICsgZGlzdCksIGJhZCk7XG4gICAgICBlbHNlXG4gICAgICAgIGRpc3QgKz0gYWZ0ZXIudGV4dENvbnRlbnQubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRvbVRleHRCZXR3ZWVuKGNtLCBmcm9tLCB0bywgZnJvbUxpbmUsIHRvTGluZSkge1xuICAgIHZhciB0ZXh0ID0gXCJcIiwgY2xvc2luZyA9IGZhbHNlLCBsaW5lU2VwID0gY20uZG9jLmxpbmVTZXBhcmF0b3IoKTtcbiAgICBmdW5jdGlvbiByZWNvZ25pemVNYXJrZXIoaWQpIHsgcmV0dXJuIGZ1bmN0aW9uKG1hcmtlcikgeyByZXR1cm4gbWFya2VyLmlkID09IGlkOyB9OyB9XG4gICAgZnVuY3Rpb24gd2Fsayhub2RlKSB7XG4gICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxKSB7XG4gICAgICAgIHZhciBjbVRleHQgPSBub2RlLmdldEF0dHJpYnV0ZShcImNtLXRleHRcIik7XG4gICAgICAgIGlmIChjbVRleHQgIT0gbnVsbCkge1xuICAgICAgICAgIGlmIChjbVRleHQgPT0gXCJcIikgY21UZXh0ID0gbm9kZS50ZXh0Q29udGVudC5yZXBsYWNlKC9cXHUyMDBiL2csIFwiXCIpO1xuICAgICAgICAgIHRleHQgKz0gY21UZXh0O1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWFya2VySUQgPSBub2RlLmdldEF0dHJpYnV0ZShcImNtLW1hcmtlclwiKSwgcmFuZ2U7XG4gICAgICAgIGlmIChtYXJrZXJJRCkge1xuICAgICAgICAgIHZhciBmb3VuZCA9IGNtLmZpbmRNYXJrcyhQb3MoZnJvbUxpbmUsIDApLCBQb3ModG9MaW5lICsgMSwgMCksIHJlY29nbml6ZU1hcmtlcigrbWFya2VySUQpKTtcbiAgICAgICAgICBpZiAoZm91bmQubGVuZ3RoICYmIChyYW5nZSA9IGZvdW5kWzBdLmZpbmQoKSkpXG4gICAgICAgICAgICB0ZXh0ICs9IGdldEJldHdlZW4oY20uZG9jLCByYW5nZS5mcm9tLCByYW5nZS50bykuam9pbihsaW5lU2VwKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpID09IFwiZmFsc2VcIikgcmV0dXJuO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGUuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICB3YWxrKG5vZGUuY2hpbGROb2Rlc1tpXSk7XG4gICAgICAgIGlmICgvXihwcmV8ZGl2fHApJC9pLnRlc3Qobm9kZS5ub2RlTmFtZSkpXG4gICAgICAgICAgY2xvc2luZyA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT0gMykge1xuICAgICAgICB2YXIgdmFsID0gbm9kZS5ub2RlVmFsdWU7XG4gICAgICAgIGlmICghdmFsKSByZXR1cm47XG4gICAgICAgIGlmIChjbG9zaW5nKSB7XG4gICAgICAgICAgdGV4dCArPSBsaW5lU2VwO1xuICAgICAgICAgIGNsb3NpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0ZXh0ICs9IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yICg7Oykge1xuICAgICAgd2Fsayhmcm9tKTtcbiAgICAgIGlmIChmcm9tID09IHRvKSBicmVhaztcbiAgICAgIGZyb20gPSBmcm9tLm5leHRTaWJsaW5nO1xuICAgIH1cbiAgICByZXR1cm4gdGV4dDtcbiAgfVxuXG4gIENvZGVNaXJyb3IuaW5wdXRTdHlsZXMgPSB7XCJ0ZXh0YXJlYVwiOiBUZXh0YXJlYUlucHV0LCBcImNvbnRlbnRlZGl0YWJsZVwiOiBDb250ZW50RWRpdGFibGVJbnB1dH07XG5cbiAgLy8gU0VMRUNUSU9OIC8gQ1VSU09SXG5cbiAgLy8gU2VsZWN0aW9uIG9iamVjdHMgYXJlIGltbXV0YWJsZS4gQSBuZXcgb25lIGlzIGNyZWF0ZWQgZXZlcnkgdGltZVxuICAvLyB0aGUgc2VsZWN0aW9uIGNoYW5nZXMuIEEgc2VsZWN0aW9uIGlzIG9uZSBvciBtb3JlIG5vbi1vdmVybGFwcGluZ1xuICAvLyAoYW5kIG5vbi10b3VjaGluZykgcmFuZ2VzLCBzb3J0ZWQsIGFuZCBhbiBpbnRlZ2VyIHRoYXQgaW5kaWNhdGVzXG4gIC8vIHdoaWNoIG9uZSBpcyB0aGUgcHJpbWFyeSBzZWxlY3Rpb24gKHRoZSBvbmUgdGhhdCdzIHNjcm9sbGVkIGludG9cbiAgLy8gdmlldywgdGhhdCBnZXRDdXJzb3IgcmV0dXJucywgZXRjKS5cbiAgZnVuY3Rpb24gU2VsZWN0aW9uKHJhbmdlcywgcHJpbUluZGV4KSB7XG4gICAgdGhpcy5yYW5nZXMgPSByYW5nZXM7XG4gICAgdGhpcy5wcmltSW5kZXggPSBwcmltSW5kZXg7XG4gIH1cblxuICBTZWxlY3Rpb24ucHJvdG90eXBlID0ge1xuICAgIHByaW1hcnk6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5yYW5nZXNbdGhpcy5wcmltSW5kZXhdOyB9LFxuICAgIGVxdWFsczogZnVuY3Rpb24ob3RoZXIpIHtcbiAgICAgIGlmIChvdGhlciA9PSB0aGlzKSByZXR1cm4gdHJ1ZTtcbiAgICAgIGlmIChvdGhlci5wcmltSW5kZXggIT0gdGhpcy5wcmltSW5kZXggfHwgb3RoZXIucmFuZ2VzLmxlbmd0aCAhPSB0aGlzLnJhbmdlcy5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5yYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGhlcmUgPSB0aGlzLnJhbmdlc1tpXSwgdGhlcmUgPSBvdGhlci5yYW5nZXNbaV07XG4gICAgICAgIGlmIChjbXAoaGVyZS5hbmNob3IsIHRoZXJlLmFuY2hvcikgIT0gMCB8fCBjbXAoaGVyZS5oZWFkLCB0aGVyZS5oZWFkKSAhPSAwKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIGRlZXBDb3B5OiBmdW5jdGlvbigpIHtcbiAgICAgIGZvciAodmFyIG91dCA9IFtdLCBpID0gMDsgaSA8IHRoaXMucmFuZ2VzLmxlbmd0aDsgaSsrKVxuICAgICAgICBvdXRbaV0gPSBuZXcgUmFuZ2UoY29weVBvcyh0aGlzLnJhbmdlc1tpXS5hbmNob3IpLCBjb3B5UG9zKHRoaXMucmFuZ2VzW2ldLmhlYWQpKTtcbiAgICAgIHJldHVybiBuZXcgU2VsZWN0aW9uKG91dCwgdGhpcy5wcmltSW5kZXgpO1xuICAgIH0sXG4gICAgc29tZXRoaW5nU2VsZWN0ZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJhbmdlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgaWYgKCF0aGlzLnJhbmdlc1tpXS5lbXB0eSgpKSByZXR1cm4gdHJ1ZTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuICAgIGNvbnRhaW5zOiBmdW5jdGlvbihwb3MsIGVuZCkge1xuICAgICAgaWYgKCFlbmQpIGVuZCA9IHBvcztcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5yYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHJhbmdlID0gdGhpcy5yYW5nZXNbaV07XG4gICAgICAgIGlmIChjbXAoZW5kLCByYW5nZS5mcm9tKCkpID49IDAgJiYgY21wKHBvcywgcmFuZ2UudG8oKSkgPD0gMClcbiAgICAgICAgICByZXR1cm4gaTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gUmFuZ2UoYW5jaG9yLCBoZWFkKSB7XG4gICAgdGhpcy5hbmNob3IgPSBhbmNob3I7IHRoaXMuaGVhZCA9IGhlYWQ7XG4gIH1cblxuICBSYW5nZS5wcm90b3R5cGUgPSB7XG4gICAgZnJvbTogZnVuY3Rpb24oKSB7IHJldHVybiBtaW5Qb3ModGhpcy5hbmNob3IsIHRoaXMuaGVhZCk7IH0sXG4gICAgdG86IGZ1bmN0aW9uKCkgeyByZXR1cm4gbWF4UG9zKHRoaXMuYW5jaG9yLCB0aGlzLmhlYWQpOyB9LFxuICAgIGVtcHR5OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmhlYWQubGluZSA9PSB0aGlzLmFuY2hvci5saW5lICYmIHRoaXMuaGVhZC5jaCA9PSB0aGlzLmFuY2hvci5jaDtcbiAgICB9XG4gIH07XG5cbiAgLy8gVGFrZSBhbiB1bnNvcnRlZCwgcG90ZW50aWFsbHkgb3ZlcmxhcHBpbmcgc2V0IG9mIHJhbmdlcywgYW5kXG4gIC8vIGJ1aWxkIGEgc2VsZWN0aW9uIG91dCBvZiBpdC4gJ0NvbnN1bWVzJyByYW5nZXMgYXJyYXkgKG1vZGlmeWluZ1xuICAvLyBpdCkuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZVNlbGVjdGlvbihyYW5nZXMsIHByaW1JbmRleCkge1xuICAgIHZhciBwcmltID0gcmFuZ2VzW3ByaW1JbmRleF07XG4gICAgcmFuZ2VzLnNvcnQoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gY21wKGEuZnJvbSgpLCBiLmZyb20oKSk7IH0pO1xuICAgIHByaW1JbmRleCA9IGluZGV4T2YocmFuZ2VzLCBwcmltKTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGN1ciA9IHJhbmdlc1tpXSwgcHJldiA9IHJhbmdlc1tpIC0gMV07XG4gICAgICBpZiAoY21wKHByZXYudG8oKSwgY3VyLmZyb20oKSkgPj0gMCkge1xuICAgICAgICB2YXIgZnJvbSA9IG1pblBvcyhwcmV2LmZyb20oKSwgY3VyLmZyb20oKSksIHRvID0gbWF4UG9zKHByZXYudG8oKSwgY3VyLnRvKCkpO1xuICAgICAgICB2YXIgaW52ID0gcHJldi5lbXB0eSgpID8gY3VyLmZyb20oKSA9PSBjdXIuaGVhZCA6IHByZXYuZnJvbSgpID09IHByZXYuaGVhZDtcbiAgICAgICAgaWYgKGkgPD0gcHJpbUluZGV4KSAtLXByaW1JbmRleDtcbiAgICAgICAgcmFuZ2VzLnNwbGljZSgtLWksIDIsIG5ldyBSYW5nZShpbnYgPyB0byA6IGZyb20sIGludiA/IGZyb20gOiB0bykpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IFNlbGVjdGlvbihyYW5nZXMsIHByaW1JbmRleCk7XG4gIH1cblxuICBmdW5jdGlvbiBzaW1wbGVTZWxlY3Rpb24oYW5jaG9yLCBoZWFkKSB7XG4gICAgcmV0dXJuIG5ldyBTZWxlY3Rpb24oW25ldyBSYW5nZShhbmNob3IsIGhlYWQgfHwgYW5jaG9yKV0sIDApO1xuICB9XG5cbiAgLy8gTW9zdCBvZiB0aGUgZXh0ZXJuYWwgQVBJIGNsaXBzIGdpdmVuIHBvc2l0aW9ucyB0byBtYWtlIHN1cmUgdGhleVxuICAvLyBhY3R1YWxseSBleGlzdCB3aXRoaW4gdGhlIGRvY3VtZW50LlxuICBmdW5jdGlvbiBjbGlwTGluZShkb2MsIG4pIHtyZXR1cm4gTWF0aC5tYXgoZG9jLmZpcnN0LCBNYXRoLm1pbihuLCBkb2MuZmlyc3QgKyBkb2Muc2l6ZSAtIDEpKTt9XG4gIGZ1bmN0aW9uIGNsaXBQb3MoZG9jLCBwb3MpIHtcbiAgICBpZiAocG9zLmxpbmUgPCBkb2MuZmlyc3QpIHJldHVybiBQb3MoZG9jLmZpcnN0LCAwKTtcbiAgICB2YXIgbGFzdCA9IGRvYy5maXJzdCArIGRvYy5zaXplIC0gMTtcbiAgICBpZiAocG9zLmxpbmUgPiBsYXN0KSByZXR1cm4gUG9zKGxhc3QsIGdldExpbmUoZG9jLCBsYXN0KS50ZXh0Lmxlbmd0aCk7XG4gICAgcmV0dXJuIGNsaXBUb0xlbihwb3MsIGdldExpbmUoZG9jLCBwb3MubGluZSkudGV4dC5sZW5ndGgpO1xuICB9XG4gIGZ1bmN0aW9uIGNsaXBUb0xlbihwb3MsIGxpbmVsZW4pIHtcbiAgICB2YXIgY2ggPSBwb3MuY2g7XG4gICAgaWYgKGNoID09IG51bGwgfHwgY2ggPiBsaW5lbGVuKSByZXR1cm4gUG9zKHBvcy5saW5lLCBsaW5lbGVuKTtcbiAgICBlbHNlIGlmIChjaCA8IDApIHJldHVybiBQb3MocG9zLmxpbmUsIDApO1xuICAgIGVsc2UgcmV0dXJuIHBvcztcbiAgfVxuICBmdW5jdGlvbiBpc0xpbmUoZG9jLCBsKSB7cmV0dXJuIGwgPj0gZG9jLmZpcnN0ICYmIGwgPCBkb2MuZmlyc3QgKyBkb2Muc2l6ZTt9XG4gIGZ1bmN0aW9uIGNsaXBQb3NBcnJheShkb2MsIGFycmF5KSB7XG4gICAgZm9yICh2YXIgb3V0ID0gW10sIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIG91dFtpXSA9IGNsaXBQb3MoZG9jLCBhcnJheVtpXSk7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuXG4gIC8vIFNFTEVDVElPTiBVUERBVEVTXG5cbiAgLy8gVGhlICdzY3JvbGwnIHBhcmFtZXRlciBnaXZlbiB0byBtYW55IG9mIHRoZXNlIGluZGljYXRlZCB3aGV0aGVyXG4gIC8vIHRoZSBuZXcgY3Vyc29yIHBvc2l0aW9uIHNob3VsZCBiZSBzY3JvbGxlZCBpbnRvIHZpZXcgYWZ0ZXJcbiAgLy8gbW9kaWZ5aW5nIHRoZSBzZWxlY3Rpb24uXG5cbiAgLy8gSWYgc2hpZnQgaXMgaGVsZCBvciB0aGUgZXh0ZW5kIGZsYWcgaXMgc2V0LCBleHRlbmRzIGEgcmFuZ2UgdG9cbiAgLy8gaW5jbHVkZSBhIGdpdmVuIHBvc2l0aW9uIChhbmQgb3B0aW9uYWxseSBhIHNlY29uZCBwb3NpdGlvbikuXG4gIC8vIE90aGVyd2lzZSwgc2ltcGx5IHJldHVybnMgdGhlIHJhbmdlIGJldHdlZW4gdGhlIGdpdmVuIHBvc2l0aW9ucy5cbiAgLy8gVXNlZCBmb3IgY3Vyc29yIG1vdGlvbiBhbmQgc3VjaC5cbiAgZnVuY3Rpb24gZXh0ZW5kUmFuZ2UoZG9jLCByYW5nZSwgaGVhZCwgb3RoZXIpIHtcbiAgICBpZiAoZG9jLmNtICYmIGRvYy5jbS5kaXNwbGF5LnNoaWZ0IHx8IGRvYy5leHRlbmQpIHtcbiAgICAgIHZhciBhbmNob3IgPSByYW5nZS5hbmNob3I7XG4gICAgICBpZiAob3RoZXIpIHtcbiAgICAgICAgdmFyIHBvc0JlZm9yZSA9IGNtcChoZWFkLCBhbmNob3IpIDwgMDtcbiAgICAgICAgaWYgKHBvc0JlZm9yZSAhPSAoY21wKG90aGVyLCBhbmNob3IpIDwgMCkpIHtcbiAgICAgICAgICBhbmNob3IgPSBoZWFkO1xuICAgICAgICAgIGhlYWQgPSBvdGhlcjtcbiAgICAgICAgfSBlbHNlIGlmIChwb3NCZWZvcmUgIT0gKGNtcChoZWFkLCBvdGhlcikgPCAwKSkge1xuICAgICAgICAgIGhlYWQgPSBvdGhlcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBSYW5nZShhbmNob3IsIGhlYWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IFJhbmdlKG90aGVyIHx8IGhlYWQsIGhlYWQpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEV4dGVuZCB0aGUgcHJpbWFyeSBzZWxlY3Rpb24gcmFuZ2UsIGRpc2NhcmQgdGhlIHJlc3QuXG4gIGZ1bmN0aW9uIGV4dGVuZFNlbGVjdGlvbihkb2MsIGhlYWQsIG90aGVyLCBvcHRpb25zKSB7XG4gICAgc2V0U2VsZWN0aW9uKGRvYywgbmV3IFNlbGVjdGlvbihbZXh0ZW5kUmFuZ2UoZG9jLCBkb2Muc2VsLnByaW1hcnkoKSwgaGVhZCwgb3RoZXIpXSwgMCksIG9wdGlvbnMpO1xuICB9XG5cbiAgLy8gRXh0ZW5kIGFsbCBzZWxlY3Rpb25zIChwb3MgaXMgYW4gYXJyYXkgb2Ygc2VsZWN0aW9ucyB3aXRoIGxlbmd0aFxuICAvLyBlcXVhbCB0aGUgbnVtYmVyIG9mIHNlbGVjdGlvbnMpXG4gIGZ1bmN0aW9uIGV4dGVuZFNlbGVjdGlvbnMoZG9jLCBoZWFkcywgb3B0aW9ucykge1xuICAgIGZvciAodmFyIG91dCA9IFtdLCBpID0gMDsgaSA8IGRvYy5zZWwucmFuZ2VzLmxlbmd0aDsgaSsrKVxuICAgICAgb3V0W2ldID0gZXh0ZW5kUmFuZ2UoZG9jLCBkb2Muc2VsLnJhbmdlc1tpXSwgaGVhZHNbaV0sIG51bGwpO1xuICAgIHZhciBuZXdTZWwgPSBub3JtYWxpemVTZWxlY3Rpb24ob3V0LCBkb2Muc2VsLnByaW1JbmRleCk7XG4gICAgc2V0U2VsZWN0aW9uKGRvYywgbmV3U2VsLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8vIFVwZGF0ZXMgYSBzaW5nbGUgcmFuZ2UgaW4gdGhlIHNlbGVjdGlvbi5cbiAgZnVuY3Rpb24gcmVwbGFjZU9uZVNlbGVjdGlvbihkb2MsIGksIHJhbmdlLCBvcHRpb25zKSB7XG4gICAgdmFyIHJhbmdlcyA9IGRvYy5zZWwucmFuZ2VzLnNsaWNlKDApO1xuICAgIHJhbmdlc1tpXSA9IHJhbmdlO1xuICAgIHNldFNlbGVjdGlvbihkb2MsIG5vcm1hbGl6ZVNlbGVjdGlvbihyYW5nZXMsIGRvYy5zZWwucHJpbUluZGV4KSwgb3B0aW9ucyk7XG4gIH1cblxuICAvLyBSZXNldCB0aGUgc2VsZWN0aW9uIHRvIGEgc2luZ2xlIHJhbmdlLlxuICBmdW5jdGlvbiBzZXRTaW1wbGVTZWxlY3Rpb24oZG9jLCBhbmNob3IsIGhlYWQsIG9wdGlvbnMpIHtcbiAgICBzZXRTZWxlY3Rpb24oZG9jLCBzaW1wbGVTZWxlY3Rpb24oYW5jaG9yLCBoZWFkKSwgb3B0aW9ucyk7XG4gIH1cblxuICAvLyBHaXZlIGJlZm9yZVNlbGVjdGlvbkNoYW5nZSBoYW5kbGVycyBhIGNoYW5nZSB0byBpbmZsdWVuY2UgYVxuICAvLyBzZWxlY3Rpb24gdXBkYXRlLlxuICBmdW5jdGlvbiBmaWx0ZXJTZWxlY3Rpb25DaGFuZ2UoZG9jLCBzZWwpIHtcbiAgICB2YXIgb2JqID0ge1xuICAgICAgcmFuZ2VzOiBzZWwucmFuZ2VzLFxuICAgICAgdXBkYXRlOiBmdW5jdGlvbihyYW5nZXMpIHtcbiAgICAgICAgdGhpcy5yYW5nZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgdGhpcy5yYW5nZXNbaV0gPSBuZXcgUmFuZ2UoY2xpcFBvcyhkb2MsIHJhbmdlc1tpXS5hbmNob3IpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaXBQb3MoZG9jLCByYW5nZXNbaV0uaGVhZCkpO1xuICAgICAgfVxuICAgIH07XG4gICAgc2lnbmFsKGRvYywgXCJiZWZvcmVTZWxlY3Rpb25DaGFuZ2VcIiwgZG9jLCBvYmopO1xuICAgIGlmIChkb2MuY20pIHNpZ25hbChkb2MuY20sIFwiYmVmb3JlU2VsZWN0aW9uQ2hhbmdlXCIsIGRvYy5jbSwgb2JqKTtcbiAgICBpZiAob2JqLnJhbmdlcyAhPSBzZWwucmFuZ2VzKSByZXR1cm4gbm9ybWFsaXplU2VsZWN0aW9uKG9iai5yYW5nZXMsIG9iai5yYW5nZXMubGVuZ3RoIC0gMSk7XG4gICAgZWxzZSByZXR1cm4gc2VsO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0U2VsZWN0aW9uUmVwbGFjZUhpc3RvcnkoZG9jLCBzZWwsIG9wdGlvbnMpIHtcbiAgICB2YXIgZG9uZSA9IGRvYy5oaXN0b3J5LmRvbmUsIGxhc3QgPSBsc3QoZG9uZSk7XG4gICAgaWYgKGxhc3QgJiYgbGFzdC5yYW5nZXMpIHtcbiAgICAgIGRvbmVbZG9uZS5sZW5ndGggLSAxXSA9IHNlbDtcbiAgICAgIHNldFNlbGVjdGlvbk5vVW5kbyhkb2MsIHNlbCwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFNlbGVjdGlvbihkb2MsIHNlbCwgb3B0aW9ucyk7XG4gICAgfVxuICB9XG5cbiAgLy8gU2V0IGEgbmV3IHNlbGVjdGlvbi5cbiAgZnVuY3Rpb24gc2V0U2VsZWN0aW9uKGRvYywgc2VsLCBvcHRpb25zKSB7XG4gICAgc2V0U2VsZWN0aW9uTm9VbmRvKGRvYywgc2VsLCBvcHRpb25zKTtcbiAgICBhZGRTZWxlY3Rpb25Ub0hpc3RvcnkoZG9jLCBkb2Muc2VsLCBkb2MuY20gPyBkb2MuY20uY3VyT3AuaWQgOiBOYU4sIG9wdGlvbnMpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0U2VsZWN0aW9uTm9VbmRvKGRvYywgc2VsLCBvcHRpb25zKSB7XG4gICAgaWYgKGhhc0hhbmRsZXIoZG9jLCBcImJlZm9yZVNlbGVjdGlvbkNoYW5nZVwiKSB8fCBkb2MuY20gJiYgaGFzSGFuZGxlcihkb2MuY20sIFwiYmVmb3JlU2VsZWN0aW9uQ2hhbmdlXCIpKVxuICAgICAgc2VsID0gZmlsdGVyU2VsZWN0aW9uQ2hhbmdlKGRvYywgc2VsKTtcblxuICAgIHZhciBiaWFzID0gb3B0aW9ucyAmJiBvcHRpb25zLmJpYXMgfHxcbiAgICAgIChjbXAoc2VsLnByaW1hcnkoKS5oZWFkLCBkb2Muc2VsLnByaW1hcnkoKS5oZWFkKSA8IDAgPyAtMSA6IDEpO1xuICAgIHNldFNlbGVjdGlvbklubmVyKGRvYywgc2tpcEF0b21pY0luU2VsZWN0aW9uKGRvYywgc2VsLCBiaWFzLCB0cnVlKSk7XG5cbiAgICBpZiAoIShvcHRpb25zICYmIG9wdGlvbnMuc2Nyb2xsID09PSBmYWxzZSkgJiYgZG9jLmNtKVxuICAgICAgZW5zdXJlQ3Vyc29yVmlzaWJsZShkb2MuY20pO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0U2VsZWN0aW9uSW5uZXIoZG9jLCBzZWwpIHtcbiAgICBpZiAoc2VsLmVxdWFscyhkb2Muc2VsKSkgcmV0dXJuO1xuXG4gICAgZG9jLnNlbCA9IHNlbDtcblxuICAgIGlmIChkb2MuY20pIHtcbiAgICAgIGRvYy5jbS5jdXJPcC51cGRhdGVJbnB1dCA9IGRvYy5jbS5jdXJPcC5zZWxlY3Rpb25DaGFuZ2VkID0gdHJ1ZTtcbiAgICAgIHNpZ25hbEN1cnNvckFjdGl2aXR5KGRvYy5jbSk7XG4gICAgfVxuICAgIHNpZ25hbExhdGVyKGRvYywgXCJjdXJzb3JBY3Rpdml0eVwiLCBkb2MpO1xuICB9XG5cbiAgLy8gVmVyaWZ5IHRoYXQgdGhlIHNlbGVjdGlvbiBkb2VzIG5vdCBwYXJ0aWFsbHkgc2VsZWN0IGFueSBhdG9taWNcbiAgLy8gbWFya2VkIHJhbmdlcy5cbiAgZnVuY3Rpb24gcmVDaGVja1NlbGVjdGlvbihkb2MpIHtcbiAgICBzZXRTZWxlY3Rpb25Jbm5lcihkb2MsIHNraXBBdG9taWNJblNlbGVjdGlvbihkb2MsIGRvYy5zZWwsIG51bGwsIGZhbHNlKSwgc2VsX2RvbnRTY3JvbGwpO1xuICB9XG5cbiAgLy8gUmV0dXJuIGEgc2VsZWN0aW9uIHRoYXQgZG9lcyBub3QgcGFydGlhbGx5IHNlbGVjdCBhbnkgYXRvbWljXG4gIC8vIHJhbmdlcy5cbiAgZnVuY3Rpb24gc2tpcEF0b21pY0luU2VsZWN0aW9uKGRvYywgc2VsLCBiaWFzLCBtYXlDbGVhcikge1xuICAgIHZhciBvdXQ7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWwucmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcmFuZ2UgPSBzZWwucmFuZ2VzW2ldO1xuICAgICAgdmFyIG5ld0FuY2hvciA9IHNraXBBdG9taWMoZG9jLCByYW5nZS5hbmNob3IsIGJpYXMsIG1heUNsZWFyKTtcbiAgICAgIHZhciBuZXdIZWFkID0gc2tpcEF0b21pYyhkb2MsIHJhbmdlLmhlYWQsIGJpYXMsIG1heUNsZWFyKTtcbiAgICAgIGlmIChvdXQgfHwgbmV3QW5jaG9yICE9IHJhbmdlLmFuY2hvciB8fCBuZXdIZWFkICE9IHJhbmdlLmhlYWQpIHtcbiAgICAgICAgaWYgKCFvdXQpIG91dCA9IHNlbC5yYW5nZXMuc2xpY2UoMCwgaSk7XG4gICAgICAgIG91dFtpXSA9IG5ldyBSYW5nZShuZXdBbmNob3IsIG5ld0hlYWQpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3V0ID8gbm9ybWFsaXplU2VsZWN0aW9uKG91dCwgc2VsLnByaW1JbmRleCkgOiBzZWw7XG4gIH1cblxuICAvLyBFbnN1cmUgYSBnaXZlbiBwb3NpdGlvbiBpcyBub3QgaW5zaWRlIGFuIGF0b21pYyByYW5nZS5cbiAgZnVuY3Rpb24gc2tpcEF0b21pYyhkb2MsIHBvcywgYmlhcywgbWF5Q2xlYXIpIHtcbiAgICB2YXIgZmxpcHBlZCA9IGZhbHNlLCBjdXJQb3MgPSBwb3M7XG4gICAgdmFyIGRpciA9IGJpYXMgfHwgMTtcbiAgICBkb2MuY2FudEVkaXQgPSBmYWxzZTtcbiAgICBzZWFyY2g6IGZvciAoOzspIHtcbiAgICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIGN1clBvcy5saW5lKTtcbiAgICAgIGlmIChsaW5lLm1hcmtlZFNwYW5zKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZS5tYXJrZWRTcGFucy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIHZhciBzcCA9IGxpbmUubWFya2VkU3BhbnNbaV0sIG0gPSBzcC5tYXJrZXI7XG4gICAgICAgICAgaWYgKChzcC5mcm9tID09IG51bGwgfHwgKG0uaW5jbHVzaXZlTGVmdCA/IHNwLmZyb20gPD0gY3VyUG9zLmNoIDogc3AuZnJvbSA8IGN1clBvcy5jaCkpICYmXG4gICAgICAgICAgICAgIChzcC50byA9PSBudWxsIHx8IChtLmluY2x1c2l2ZVJpZ2h0ID8gc3AudG8gPj0gY3VyUG9zLmNoIDogc3AudG8gPiBjdXJQb3MuY2gpKSkge1xuICAgICAgICAgICAgaWYgKG1heUNsZWFyKSB7XG4gICAgICAgICAgICAgIHNpZ25hbChtLCBcImJlZm9yZUN1cnNvckVudGVyXCIpO1xuICAgICAgICAgICAgICBpZiAobS5leHBsaWNpdGx5Q2xlYXJlZCkge1xuICAgICAgICAgICAgICAgIGlmICghbGluZS5tYXJrZWRTcGFucykgYnJlYWs7XG4gICAgICAgICAgICAgICAgZWxzZSB7LS1pOyBjb250aW51ZTt9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghbS5hdG9taWMpIGNvbnRpbnVlO1xuICAgICAgICAgICAgdmFyIG5ld1BvcyA9IG0uZmluZChkaXIgPCAwID8gLTEgOiAxKTtcbiAgICAgICAgICAgIGlmIChjbXAobmV3UG9zLCBjdXJQb3MpID09IDApIHtcbiAgICAgICAgICAgICAgbmV3UG9zLmNoICs9IGRpcjtcbiAgICAgICAgICAgICAgaWYgKG5ld1Bvcy5jaCA8IDApIHtcbiAgICAgICAgICAgICAgICBpZiAobmV3UG9zLmxpbmUgPiBkb2MuZmlyc3QpIG5ld1BvcyA9IGNsaXBQb3MoZG9jLCBQb3MobmV3UG9zLmxpbmUgLSAxKSk7XG4gICAgICAgICAgICAgICAgZWxzZSBuZXdQb3MgPSBudWxsO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5ld1Bvcy5jaCA+IGxpbmUudGV4dC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAobmV3UG9zLmxpbmUgPCBkb2MuZmlyc3QgKyBkb2Muc2l6ZSAtIDEpIG5ld1BvcyA9IFBvcyhuZXdQb3MubGluZSArIDEsIDApO1xuICAgICAgICAgICAgICAgIGVsc2UgbmV3UG9zID0gbnVsbDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoIW5ld1Bvcykge1xuICAgICAgICAgICAgICAgIGlmIChmbGlwcGVkKSB7XG4gICAgICAgICAgICAgICAgICAvLyBEcml2ZW4gaW4gYSBjb3JuZXIgLS0gbm8gdmFsaWQgY3Vyc29yIHBvc2l0aW9uIGZvdW5kIGF0IGFsbFxuICAgICAgICAgICAgICAgICAgLy8gLS0gdHJ5IGFnYWluICp3aXRoKiBjbGVhcmluZywgaWYgd2UgZGlkbid0IGFscmVhZHlcbiAgICAgICAgICAgICAgICAgIGlmICghbWF5Q2xlYXIpIHJldHVybiBza2lwQXRvbWljKGRvYywgcG9zLCBiaWFzLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgdHVybiBvZmYgZWRpdGluZyB1bnRpbCBmdXJ0aGVyIG5vdGljZSwgYW5kIHJldHVybiB0aGUgc3RhcnQgb2YgdGhlIGRvY1xuICAgICAgICAgICAgICAgICAgZG9jLmNhbnRFZGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBQb3MoZG9jLmZpcnN0LCAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmxpcHBlZCA9IHRydWU7IG5ld1BvcyA9IHBvczsgZGlyID0gLWRpcjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VyUG9zID0gbmV3UG9zO1xuICAgICAgICAgICAgY29udGludWUgc2VhcmNoO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGN1clBvcztcbiAgICB9XG4gIH1cblxuICAvLyBTRUxFQ1RJT04gRFJBV0lOR1xuXG4gIGZ1bmN0aW9uIHVwZGF0ZVNlbGVjdGlvbihjbSkge1xuICAgIGNtLmRpc3BsYXkuaW5wdXQuc2hvd1NlbGVjdGlvbihjbS5kaXNwbGF5LmlucHV0LnByZXBhcmVTZWxlY3Rpb24oKSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcmVwYXJlU2VsZWN0aW9uKGNtLCBwcmltYXJ5KSB7XG4gICAgdmFyIGRvYyA9IGNtLmRvYywgcmVzdWx0ID0ge307XG4gICAgdmFyIGN1ckZyYWdtZW50ID0gcmVzdWx0LmN1cnNvcnMgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgdmFyIHNlbEZyYWdtZW50ID0gcmVzdWx0LnNlbGVjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLnNlbC5yYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChwcmltYXJ5ID09PSBmYWxzZSAmJiBpID09IGRvYy5zZWwucHJpbUluZGV4KSBjb250aW51ZTtcbiAgICAgIHZhciByYW5nZSA9IGRvYy5zZWwucmFuZ2VzW2ldO1xuICAgICAgdmFyIGNvbGxhcHNlZCA9IHJhbmdlLmVtcHR5KCk7XG4gICAgICBpZiAoY29sbGFwc2VkIHx8IGNtLm9wdGlvbnMuc2hvd0N1cnNvcldoZW5TZWxlY3RpbmcpXG4gICAgICAgIGRyYXdTZWxlY3Rpb25DdXJzb3IoY20sIHJhbmdlLmhlYWQsIGN1ckZyYWdtZW50KTtcbiAgICAgIGlmICghY29sbGFwc2VkKVxuICAgICAgICBkcmF3U2VsZWN0aW9uUmFuZ2UoY20sIHJhbmdlLCBzZWxGcmFnbWVudCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyBEcmF3cyBhIGN1cnNvciBmb3IgdGhlIGdpdmVuIHJhbmdlXG4gIGZ1bmN0aW9uIGRyYXdTZWxlY3Rpb25DdXJzb3IoY20sIGhlYWQsIG91dHB1dCkge1xuICAgIHZhciBwb3MgPSBjdXJzb3JDb29yZHMoY20sIGhlYWQsIFwiZGl2XCIsIG51bGwsIG51bGwsICFjbS5vcHRpb25zLnNpbmdsZUN1cnNvckhlaWdodFBlckxpbmUpO1xuXG4gICAgdmFyIGN1cnNvciA9IG91dHB1dC5hcHBlbmRDaGlsZChlbHQoXCJkaXZcIiwgXCJcXHUwMGEwXCIsIFwiQ29kZU1pcnJvci1jdXJzb3JcIikpO1xuICAgIGN1cnNvci5zdHlsZS5sZWZ0ID0gcG9zLmxlZnQgKyBcInB4XCI7XG4gICAgY3Vyc29yLnN0eWxlLnRvcCA9IHBvcy50b3AgKyBcInB4XCI7XG4gICAgY3Vyc29yLnN0eWxlLmhlaWdodCA9IE1hdGgubWF4KDAsIHBvcy5ib3R0b20gLSBwb3MudG9wKSAqIGNtLm9wdGlvbnMuY3Vyc29ySGVpZ2h0ICsgXCJweFwiO1xuXG4gICAgaWYgKHBvcy5vdGhlcikge1xuICAgICAgLy8gU2Vjb25kYXJ5IGN1cnNvciwgc2hvd24gd2hlbiBvbiBhICdqdW1wJyBpbiBiaS1kaXJlY3Rpb25hbCB0ZXh0XG4gICAgICB2YXIgb3RoZXJDdXJzb3IgPSBvdXRwdXQuYXBwZW5kQ2hpbGQoZWx0KFwiZGl2XCIsIFwiXFx1MDBhMFwiLCBcIkNvZGVNaXJyb3ItY3Vyc29yIENvZGVNaXJyb3Itc2Vjb25kYXJ5Y3Vyc29yXCIpKTtcbiAgICAgIG90aGVyQ3Vyc29yLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgICAgb3RoZXJDdXJzb3Iuc3R5bGUubGVmdCA9IHBvcy5vdGhlci5sZWZ0ICsgXCJweFwiO1xuICAgICAgb3RoZXJDdXJzb3Iuc3R5bGUudG9wID0gcG9zLm90aGVyLnRvcCArIFwicHhcIjtcbiAgICAgIG90aGVyQ3Vyc29yLnN0eWxlLmhlaWdodCA9IChwb3Mub3RoZXIuYm90dG9tIC0gcG9zLm90aGVyLnRvcCkgKiAuODUgKyBcInB4XCI7XG4gICAgfVxuICB9XG5cbiAgLy8gRHJhd3MgdGhlIGdpdmVuIHJhbmdlIGFzIGEgaGlnaGxpZ2h0ZWQgc2VsZWN0aW9uXG4gIGZ1bmN0aW9uIGRyYXdTZWxlY3Rpb25SYW5nZShjbSwgcmFuZ2UsIG91dHB1dCkge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgZG9jID0gY20uZG9jO1xuICAgIHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICB2YXIgcGFkZGluZyA9IHBhZGRpbmdIKGNtLmRpc3BsYXkpLCBsZWZ0U2lkZSA9IHBhZGRpbmcubGVmdDtcbiAgICB2YXIgcmlnaHRTaWRlID0gTWF0aC5tYXgoZGlzcGxheS5zaXplcldpZHRoLCBkaXNwbGF5V2lkdGgoY20pIC0gZGlzcGxheS5zaXplci5vZmZzZXRMZWZ0KSAtIHBhZGRpbmcucmlnaHQ7XG5cbiAgICBmdW5jdGlvbiBhZGQobGVmdCwgdG9wLCB3aWR0aCwgYm90dG9tKSB7XG4gICAgICBpZiAodG9wIDwgMCkgdG9wID0gMDtcbiAgICAgIHRvcCA9IE1hdGgucm91bmQodG9wKTtcbiAgICAgIGJvdHRvbSA9IE1hdGgucm91bmQoYm90dG9tKTtcbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3Itc2VsZWN0ZWRcIiwgXCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IFwiICsgbGVmdCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJweDsgdG9wOiBcIiArIHRvcCArIFwicHg7IHdpZHRoOiBcIiArICh3aWR0aCA9PSBudWxsID8gcmlnaHRTaWRlIC0gbGVmdCA6IHdpZHRoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJweDsgaGVpZ2h0OiBcIiArIChib3R0b20gLSB0b3ApICsgXCJweFwiKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZHJhd0ZvckxpbmUobGluZSwgZnJvbUFyZywgdG9BcmcpIHtcbiAgICAgIHZhciBsaW5lT2JqID0gZ2V0TGluZShkb2MsIGxpbmUpO1xuICAgICAgdmFyIGxpbmVMZW4gPSBsaW5lT2JqLnRleHQubGVuZ3RoO1xuICAgICAgdmFyIHN0YXJ0LCBlbmQ7XG4gICAgICBmdW5jdGlvbiBjb29yZHMoY2gsIGJpYXMpIHtcbiAgICAgICAgcmV0dXJuIGNoYXJDb29yZHMoY20sIFBvcyhsaW5lLCBjaCksIFwiZGl2XCIsIGxpbmVPYmosIGJpYXMpO1xuICAgICAgfVxuXG4gICAgICBpdGVyYXRlQmlkaVNlY3Rpb25zKGdldE9yZGVyKGxpbmVPYmopLCBmcm9tQXJnIHx8IDAsIHRvQXJnID09IG51bGwgPyBsaW5lTGVuIDogdG9BcmcsIGZ1bmN0aW9uKGZyb20sIHRvLCBkaXIpIHtcbiAgICAgICAgdmFyIGxlZnRQb3MgPSBjb29yZHMoZnJvbSwgXCJsZWZ0XCIpLCByaWdodFBvcywgbGVmdCwgcmlnaHQ7XG4gICAgICAgIGlmIChmcm9tID09IHRvKSB7XG4gICAgICAgICAgcmlnaHRQb3MgPSBsZWZ0UG9zO1xuICAgICAgICAgIGxlZnQgPSByaWdodCA9IGxlZnRQb3MubGVmdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByaWdodFBvcyA9IGNvb3Jkcyh0byAtIDEsIFwicmlnaHRcIik7XG4gICAgICAgICAgaWYgKGRpciA9PSBcInJ0bFwiKSB7IHZhciB0bXAgPSBsZWZ0UG9zOyBsZWZ0UG9zID0gcmlnaHRQb3M7IHJpZ2h0UG9zID0gdG1wOyB9XG4gICAgICAgICAgbGVmdCA9IGxlZnRQb3MubGVmdDtcbiAgICAgICAgICByaWdodCA9IHJpZ2h0UG9zLnJpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChmcm9tQXJnID09IG51bGwgJiYgZnJvbSA9PSAwKSBsZWZ0ID0gbGVmdFNpZGU7XG4gICAgICAgIGlmIChyaWdodFBvcy50b3AgLSBsZWZ0UG9zLnRvcCA+IDMpIHsgLy8gRGlmZmVyZW50IGxpbmVzLCBkcmF3IHRvcCBwYXJ0XG4gICAgICAgICAgYWRkKGxlZnQsIGxlZnRQb3MudG9wLCBudWxsLCBsZWZ0UG9zLmJvdHRvbSk7XG4gICAgICAgICAgbGVmdCA9IGxlZnRTaWRlO1xuICAgICAgICAgIGlmIChsZWZ0UG9zLmJvdHRvbSA8IHJpZ2h0UG9zLnRvcCkgYWRkKGxlZnQsIGxlZnRQb3MuYm90dG9tLCBudWxsLCByaWdodFBvcy50b3ApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b0FyZyA9PSBudWxsICYmIHRvID09IGxpbmVMZW4pIHJpZ2h0ID0gcmlnaHRTaWRlO1xuICAgICAgICBpZiAoIXN0YXJ0IHx8IGxlZnRQb3MudG9wIDwgc3RhcnQudG9wIHx8IGxlZnRQb3MudG9wID09IHN0YXJ0LnRvcCAmJiBsZWZ0UG9zLmxlZnQgPCBzdGFydC5sZWZ0KVxuICAgICAgICAgIHN0YXJ0ID0gbGVmdFBvcztcbiAgICAgICAgaWYgKCFlbmQgfHwgcmlnaHRQb3MuYm90dG9tID4gZW5kLmJvdHRvbSB8fCByaWdodFBvcy5ib3R0b20gPT0gZW5kLmJvdHRvbSAmJiByaWdodFBvcy5yaWdodCA+IGVuZC5yaWdodClcbiAgICAgICAgICBlbmQgPSByaWdodFBvcztcbiAgICAgICAgaWYgKGxlZnQgPCBsZWZ0U2lkZSArIDEpIGxlZnQgPSBsZWZ0U2lkZTtcbiAgICAgICAgYWRkKGxlZnQsIHJpZ2h0UG9zLnRvcCwgcmlnaHQgLSBsZWZ0LCByaWdodFBvcy5ib3R0b20pO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4ge3N0YXJ0OiBzdGFydCwgZW5kOiBlbmR9O1xuICAgIH1cblxuICAgIHZhciBzRnJvbSA9IHJhbmdlLmZyb20oKSwgc1RvID0gcmFuZ2UudG8oKTtcbiAgICBpZiAoc0Zyb20ubGluZSA9PSBzVG8ubGluZSkge1xuICAgICAgZHJhd0ZvckxpbmUoc0Zyb20ubGluZSwgc0Zyb20uY2gsIHNUby5jaCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBmcm9tTGluZSA9IGdldExpbmUoZG9jLCBzRnJvbS5saW5lKSwgdG9MaW5lID0gZ2V0TGluZShkb2MsIHNUby5saW5lKTtcbiAgICAgIHZhciBzaW5nbGVWTGluZSA9IHZpc3VhbExpbmUoZnJvbUxpbmUpID09IHZpc3VhbExpbmUodG9MaW5lKTtcbiAgICAgIHZhciBsZWZ0RW5kID0gZHJhd0ZvckxpbmUoc0Zyb20ubGluZSwgc0Zyb20uY2gsIHNpbmdsZVZMaW5lID8gZnJvbUxpbmUudGV4dC5sZW5ndGggKyAxIDogbnVsbCkuZW5kO1xuICAgICAgdmFyIHJpZ2h0U3RhcnQgPSBkcmF3Rm9yTGluZShzVG8ubGluZSwgc2luZ2xlVkxpbmUgPyAwIDogbnVsbCwgc1RvLmNoKS5zdGFydDtcbiAgICAgIGlmIChzaW5nbGVWTGluZSkge1xuICAgICAgICBpZiAobGVmdEVuZC50b3AgPCByaWdodFN0YXJ0LnRvcCAtIDIpIHtcbiAgICAgICAgICBhZGQobGVmdEVuZC5yaWdodCwgbGVmdEVuZC50b3AsIG51bGwsIGxlZnRFbmQuYm90dG9tKTtcbiAgICAgICAgICBhZGQobGVmdFNpZGUsIHJpZ2h0U3RhcnQudG9wLCByaWdodFN0YXJ0LmxlZnQsIHJpZ2h0U3RhcnQuYm90dG9tKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhZGQobGVmdEVuZC5yaWdodCwgbGVmdEVuZC50b3AsIHJpZ2h0U3RhcnQubGVmdCAtIGxlZnRFbmQucmlnaHQsIGxlZnRFbmQuYm90dG9tKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGxlZnRFbmQuYm90dG9tIDwgcmlnaHRTdGFydC50b3ApXG4gICAgICAgIGFkZChsZWZ0U2lkZSwgbGVmdEVuZC5ib3R0b20sIG51bGwsIHJpZ2h0U3RhcnQudG9wKTtcbiAgICB9XG5cbiAgICBvdXRwdXQuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICB9XG5cbiAgLy8gQ3Vyc29yLWJsaW5raW5nXG4gIGZ1bmN0aW9uIHJlc3RhcnRCbGluayhjbSkge1xuICAgIGlmICghY20uc3RhdGUuZm9jdXNlZCkgcmV0dXJuO1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICBjbGVhckludGVydmFsKGRpc3BsYXkuYmxpbmtlcik7XG4gICAgdmFyIG9uID0gdHJ1ZTtcbiAgICBkaXNwbGF5LmN1cnNvckRpdi5zdHlsZS52aXNpYmlsaXR5ID0gXCJcIjtcbiAgICBpZiAoY20ub3B0aW9ucy5jdXJzb3JCbGlua1JhdGUgPiAwKVxuICAgICAgZGlzcGxheS5ibGlua2VyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgIGRpc3BsYXkuY3Vyc29yRGl2LnN0eWxlLnZpc2liaWxpdHkgPSAob24gPSAhb24pID8gXCJcIiA6IFwiaGlkZGVuXCI7XG4gICAgICB9LCBjbS5vcHRpb25zLmN1cnNvckJsaW5rUmF0ZSk7XG4gICAgZWxzZSBpZiAoY20ub3B0aW9ucy5jdXJzb3JCbGlua1JhdGUgPCAwKVxuICAgICAgZGlzcGxheS5jdXJzb3JEaXYuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gIH1cblxuICAvLyBISUdITElHSFQgV09SS0VSXG5cbiAgZnVuY3Rpb24gc3RhcnRXb3JrZXIoY20sIHRpbWUpIHtcbiAgICBpZiAoY20uZG9jLm1vZGUuc3RhcnRTdGF0ZSAmJiBjbS5kb2MuZnJvbnRpZXIgPCBjbS5kaXNwbGF5LnZpZXdUbylcbiAgICAgIGNtLnN0YXRlLmhpZ2hsaWdodC5zZXQodGltZSwgYmluZChoaWdobGlnaHRXb3JrZXIsIGNtKSk7XG4gIH1cblxuICBmdW5jdGlvbiBoaWdobGlnaHRXb3JrZXIoY20pIHtcbiAgICB2YXIgZG9jID0gY20uZG9jO1xuICAgIGlmIChkb2MuZnJvbnRpZXIgPCBkb2MuZmlyc3QpIGRvYy5mcm9udGllciA9IGRvYy5maXJzdDtcbiAgICBpZiAoZG9jLmZyb250aWVyID49IGNtLmRpc3BsYXkudmlld1RvKSByZXR1cm47XG4gICAgdmFyIGVuZCA9ICtuZXcgRGF0ZSArIGNtLm9wdGlvbnMud29ya1RpbWU7XG4gICAgdmFyIHN0YXRlID0gY29weVN0YXRlKGRvYy5tb2RlLCBnZXRTdGF0ZUJlZm9yZShjbSwgZG9jLmZyb250aWVyKSk7XG4gICAgdmFyIGNoYW5nZWRMaW5lcyA9IFtdO1xuXG4gICAgZG9jLml0ZXIoZG9jLmZyb250aWVyLCBNYXRoLm1pbihkb2MuZmlyc3QgKyBkb2Muc2l6ZSwgY20uZGlzcGxheS52aWV3VG8gKyA1MDApLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgICBpZiAoZG9jLmZyb250aWVyID49IGNtLmRpc3BsYXkudmlld0Zyb20pIHsgLy8gVmlzaWJsZVxuICAgICAgICB2YXIgb2xkU3R5bGVzID0gbGluZS5zdHlsZXMsIHRvb0xvbmcgPSBsaW5lLnRleHQubGVuZ3RoID4gY20ub3B0aW9ucy5tYXhIaWdobGlnaHRMZW5ndGg7XG4gICAgICAgIHZhciBoaWdobGlnaHRlZCA9IGhpZ2hsaWdodExpbmUoY20sIGxpbmUsIHRvb0xvbmcgPyBjb3B5U3RhdGUoZG9jLm1vZGUsIHN0YXRlKSA6IHN0YXRlLCB0cnVlKTtcbiAgICAgICAgbGluZS5zdHlsZXMgPSBoaWdobGlnaHRlZC5zdHlsZXM7XG4gICAgICAgIHZhciBvbGRDbHMgPSBsaW5lLnN0eWxlQ2xhc3NlcywgbmV3Q2xzID0gaGlnaGxpZ2h0ZWQuY2xhc3NlcztcbiAgICAgICAgaWYgKG5ld0NscykgbGluZS5zdHlsZUNsYXNzZXMgPSBuZXdDbHM7XG4gICAgICAgIGVsc2UgaWYgKG9sZENscykgbGluZS5zdHlsZUNsYXNzZXMgPSBudWxsO1xuICAgICAgICB2YXIgaXNjaGFuZ2UgPSAhb2xkU3R5bGVzIHx8IG9sZFN0eWxlcy5sZW5ndGggIT0gbGluZS5zdHlsZXMubGVuZ3RoIHx8XG4gICAgICAgICAgb2xkQ2xzICE9IG5ld0NscyAmJiAoIW9sZENscyB8fCAhbmV3Q2xzIHx8IG9sZENscy5iZ0NsYXNzICE9IG5ld0Nscy5iZ0NsYXNzIHx8IG9sZENscy50ZXh0Q2xhc3MgIT0gbmV3Q2xzLnRleHRDbGFzcyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyAhaXNjaGFuZ2UgJiYgaSA8IG9sZFN0eWxlcy5sZW5ndGg7ICsraSkgaXNjaGFuZ2UgPSBvbGRTdHlsZXNbaV0gIT0gbGluZS5zdHlsZXNbaV07XG4gICAgICAgIGlmIChpc2NoYW5nZSkgY2hhbmdlZExpbmVzLnB1c2goZG9jLmZyb250aWVyKTtcbiAgICAgICAgbGluZS5zdGF0ZUFmdGVyID0gdG9vTG9uZyA/IHN0YXRlIDogY29weVN0YXRlKGRvYy5tb2RlLCBzdGF0ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobGluZS50ZXh0Lmxlbmd0aCA8PSBjbS5vcHRpb25zLm1heEhpZ2hsaWdodExlbmd0aClcbiAgICAgICAgICBwcm9jZXNzTGluZShjbSwgbGluZS50ZXh0LCBzdGF0ZSk7XG4gICAgICAgIGxpbmUuc3RhdGVBZnRlciA9IGRvYy5mcm9udGllciAlIDUgPT0gMCA/IGNvcHlTdGF0ZShkb2MubW9kZSwgc3RhdGUpIDogbnVsbDtcbiAgICAgIH1cbiAgICAgICsrZG9jLmZyb250aWVyO1xuICAgICAgaWYgKCtuZXcgRGF0ZSA+IGVuZCkge1xuICAgICAgICBzdGFydFdvcmtlcihjbSwgY20ub3B0aW9ucy53b3JrRGVsYXkpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoY2hhbmdlZExpbmVzLmxlbmd0aCkgcnVuSW5PcChjbSwgZnVuY3Rpb24oKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYW5nZWRMaW5lcy5sZW5ndGg7IGkrKylcbiAgICAgICAgcmVnTGluZUNoYW5nZShjbSwgY2hhbmdlZExpbmVzW2ldLCBcInRleHRcIik7XG4gICAgfSk7XG4gIH1cblxuICAvLyBGaW5kcyB0aGUgbGluZSB0byBzdGFydCB3aXRoIHdoZW4gc3RhcnRpbmcgYSBwYXJzZS4gVHJpZXMgdG9cbiAgLy8gZmluZCBhIGxpbmUgd2l0aCBhIHN0YXRlQWZ0ZXIsIHNvIHRoYXQgaXQgY2FuIHN0YXJ0IHdpdGggYVxuICAvLyB2YWxpZCBzdGF0ZS4gSWYgdGhhdCBmYWlscywgaXQgcmV0dXJucyB0aGUgbGluZSB3aXRoIHRoZVxuICAvLyBzbWFsbGVzdCBpbmRlbnRhdGlvbiwgd2hpY2ggdGVuZHMgdG8gbmVlZCB0aGUgbGVhc3QgY29udGV4dCB0b1xuICAvLyBwYXJzZSBjb3JyZWN0bHkuXG4gIGZ1bmN0aW9uIGZpbmRTdGFydExpbmUoY20sIG4sIHByZWNpc2UpIHtcbiAgICB2YXIgbWluaW5kZW50LCBtaW5saW5lLCBkb2MgPSBjbS5kb2M7XG4gICAgdmFyIGxpbSA9IHByZWNpc2UgPyAtMSA6IG4gLSAoY20uZG9jLm1vZGUuaW5uZXJNb2RlID8gMTAwMCA6IDEwMCk7XG4gICAgZm9yICh2YXIgc2VhcmNoID0gbjsgc2VhcmNoID4gbGltOyAtLXNlYXJjaCkge1xuICAgICAgaWYgKHNlYXJjaCA8PSBkb2MuZmlyc3QpIHJldHVybiBkb2MuZmlyc3Q7XG4gICAgICB2YXIgbGluZSA9IGdldExpbmUoZG9jLCBzZWFyY2ggLSAxKTtcbiAgICAgIGlmIChsaW5lLnN0YXRlQWZ0ZXIgJiYgKCFwcmVjaXNlIHx8IHNlYXJjaCA8PSBkb2MuZnJvbnRpZXIpKSByZXR1cm4gc2VhcmNoO1xuICAgICAgdmFyIGluZGVudGVkID0gY291bnRDb2x1bW4obGluZS50ZXh0LCBudWxsLCBjbS5vcHRpb25zLnRhYlNpemUpO1xuICAgICAgaWYgKG1pbmxpbmUgPT0gbnVsbCB8fCBtaW5pbmRlbnQgPiBpbmRlbnRlZCkge1xuICAgICAgICBtaW5saW5lID0gc2VhcmNoIC0gMTtcbiAgICAgICAgbWluaW5kZW50ID0gaW5kZW50ZWQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtaW5saW5lO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0U3RhdGVCZWZvcmUoY20sIG4sIHByZWNpc2UpIHtcbiAgICB2YXIgZG9jID0gY20uZG9jLCBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICBpZiAoIWRvYy5tb2RlLnN0YXJ0U3RhdGUpIHJldHVybiB0cnVlO1xuICAgIHZhciBwb3MgPSBmaW5kU3RhcnRMaW5lKGNtLCBuLCBwcmVjaXNlKSwgc3RhdGUgPSBwb3MgPiBkb2MuZmlyc3QgJiYgZ2V0TGluZShkb2MsIHBvcy0xKS5zdGF0ZUFmdGVyO1xuICAgIGlmICghc3RhdGUpIHN0YXRlID0gc3RhcnRTdGF0ZShkb2MubW9kZSk7XG4gICAgZWxzZSBzdGF0ZSA9IGNvcHlTdGF0ZShkb2MubW9kZSwgc3RhdGUpO1xuICAgIGRvYy5pdGVyKHBvcywgbiwgZnVuY3Rpb24obGluZSkge1xuICAgICAgcHJvY2Vzc0xpbmUoY20sIGxpbmUudGV4dCwgc3RhdGUpO1xuICAgICAgdmFyIHNhdmUgPSBwb3MgPT0gbiAtIDEgfHwgcG9zICUgNSA9PSAwIHx8IHBvcyA+PSBkaXNwbGF5LnZpZXdGcm9tICYmIHBvcyA8IGRpc3BsYXkudmlld1RvO1xuICAgICAgbGluZS5zdGF0ZUFmdGVyID0gc2F2ZSA/IGNvcHlTdGF0ZShkb2MubW9kZSwgc3RhdGUpIDogbnVsbDtcbiAgICAgICsrcG9zO1xuICAgIH0pO1xuICAgIGlmIChwcmVjaXNlKSBkb2MuZnJvbnRpZXIgPSBwb3M7XG4gICAgcmV0dXJuIHN0YXRlO1xuICB9XG5cbiAgLy8gUE9TSVRJT04gTUVBU1VSRU1FTlRcblxuICBmdW5jdGlvbiBwYWRkaW5nVG9wKGRpc3BsYXkpIHtyZXR1cm4gZGlzcGxheS5saW5lU3BhY2Uub2Zmc2V0VG9wO31cbiAgZnVuY3Rpb24gcGFkZGluZ1ZlcnQoZGlzcGxheSkge3JldHVybiBkaXNwbGF5Lm1vdmVyLm9mZnNldEhlaWdodCAtIGRpc3BsYXkubGluZVNwYWNlLm9mZnNldEhlaWdodDt9XG4gIGZ1bmN0aW9uIHBhZGRpbmdIKGRpc3BsYXkpIHtcbiAgICBpZiAoZGlzcGxheS5jYWNoZWRQYWRkaW5nSCkgcmV0dXJuIGRpc3BsYXkuY2FjaGVkUGFkZGluZ0g7XG4gICAgdmFyIGUgPSByZW1vdmVDaGlsZHJlbkFuZEFkZChkaXNwbGF5Lm1lYXN1cmUsIGVsdChcInByZVwiLCBcInhcIikpO1xuICAgIHZhciBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlID8gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZSkgOiBlLmN1cnJlbnRTdHlsZTtcbiAgICB2YXIgZGF0YSA9IHtsZWZ0OiBwYXJzZUludChzdHlsZS5wYWRkaW5nTGVmdCksIHJpZ2h0OiBwYXJzZUludChzdHlsZS5wYWRkaW5nUmlnaHQpfTtcbiAgICBpZiAoIWlzTmFOKGRhdGEubGVmdCkgJiYgIWlzTmFOKGRhdGEucmlnaHQpKSBkaXNwbGF5LmNhY2hlZFBhZGRpbmdIID0gZGF0YTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNjcm9sbEdhcChjbSkgeyByZXR1cm4gc2Nyb2xsZXJHYXAgLSBjbS5kaXNwbGF5Lm5hdGl2ZUJhcldpZHRoOyB9XG4gIGZ1bmN0aW9uIGRpc3BsYXlXaWR0aChjbSkge1xuICAgIHJldHVybiBjbS5kaXNwbGF5LnNjcm9sbGVyLmNsaWVudFdpZHRoIC0gc2Nyb2xsR2FwKGNtKSAtIGNtLmRpc3BsYXkuYmFyV2lkdGg7XG4gIH1cbiAgZnVuY3Rpb24gZGlzcGxheUhlaWdodChjbSkge1xuICAgIHJldHVybiBjbS5kaXNwbGF5LnNjcm9sbGVyLmNsaWVudEhlaWdodCAtIHNjcm9sbEdhcChjbSkgLSBjbS5kaXNwbGF5LmJhckhlaWdodDtcbiAgfVxuXG4gIC8vIEVuc3VyZSB0aGUgbGluZVZpZXcud3JhcHBpbmcuaGVpZ2h0cyBhcnJheSBpcyBwb3B1bGF0ZWQuIFRoaXMgaXNcbiAgLy8gYW4gYXJyYXkgb2YgYm90dG9tIG9mZnNldHMgZm9yIHRoZSBsaW5lcyB0aGF0IG1ha2UgdXAgYSBkcmF3blxuICAvLyBsaW5lLiBXaGVuIGxpbmVXcmFwcGluZyBpcyBvbiwgdGhlcmUgbWlnaHQgYmUgbW9yZSB0aGFuIG9uZVxuICAvLyBoZWlnaHQuXG4gIGZ1bmN0aW9uIGVuc3VyZUxpbmVIZWlnaHRzKGNtLCBsaW5lVmlldywgcmVjdCkge1xuICAgIHZhciB3cmFwcGluZyA9IGNtLm9wdGlvbnMubGluZVdyYXBwaW5nO1xuICAgIHZhciBjdXJXaWR0aCA9IHdyYXBwaW5nICYmIGRpc3BsYXlXaWR0aChjbSk7XG4gICAgaWYgKCFsaW5lVmlldy5tZWFzdXJlLmhlaWdodHMgfHwgd3JhcHBpbmcgJiYgbGluZVZpZXcubWVhc3VyZS53aWR0aCAhPSBjdXJXaWR0aCkge1xuICAgICAgdmFyIGhlaWdodHMgPSBsaW5lVmlldy5tZWFzdXJlLmhlaWdodHMgPSBbXTtcbiAgICAgIGlmICh3cmFwcGluZykge1xuICAgICAgICBsaW5lVmlldy5tZWFzdXJlLndpZHRoID0gY3VyV2lkdGg7XG4gICAgICAgIHZhciByZWN0cyA9IGxpbmVWaWV3LnRleHQuZmlyc3RDaGlsZC5nZXRDbGllbnRSZWN0cygpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlY3RzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgIHZhciBjdXIgPSByZWN0c1tpXSwgbmV4dCA9IHJlY3RzW2kgKyAxXTtcbiAgICAgICAgICBpZiAoTWF0aC5hYnMoY3VyLmJvdHRvbSAtIG5leHQuYm90dG9tKSA+IDIpXG4gICAgICAgICAgICBoZWlnaHRzLnB1c2goKGN1ci5ib3R0b20gKyBuZXh0LnRvcCkgLyAyIC0gcmVjdC50b3ApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBoZWlnaHRzLnB1c2gocmVjdC5ib3R0b20gLSByZWN0LnRvcCk7XG4gICAgfVxuICB9XG5cbiAgLy8gRmluZCBhIGxpbmUgbWFwIChtYXBwaW5nIGNoYXJhY3RlciBvZmZzZXRzIHRvIHRleHQgbm9kZXMpIGFuZCBhXG4gIC8vIG1lYXN1cmVtZW50IGNhY2hlIGZvciB0aGUgZ2l2ZW4gbGluZSBudW1iZXIuIChBIGxpbmUgdmlldyBtaWdodFxuICAvLyBjb250YWluIG11bHRpcGxlIGxpbmVzIHdoZW4gY29sbGFwc2VkIHJhbmdlcyBhcmUgcHJlc2VudC4pXG4gIGZ1bmN0aW9uIG1hcEZyb21MaW5lVmlldyhsaW5lVmlldywgbGluZSwgbGluZU4pIHtcbiAgICBpZiAobGluZVZpZXcubGluZSA9PSBsaW5lKVxuICAgICAgcmV0dXJuIHttYXA6IGxpbmVWaWV3Lm1lYXN1cmUubWFwLCBjYWNoZTogbGluZVZpZXcubWVhc3VyZS5jYWNoZX07XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lVmlldy5yZXN0Lmxlbmd0aDsgaSsrKVxuICAgICAgaWYgKGxpbmVWaWV3LnJlc3RbaV0gPT0gbGluZSlcbiAgICAgICAgcmV0dXJuIHttYXA6IGxpbmVWaWV3Lm1lYXN1cmUubWFwc1tpXSwgY2FjaGU6IGxpbmVWaWV3Lm1lYXN1cmUuY2FjaGVzW2ldfTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVWaWV3LnJlc3QubGVuZ3RoOyBpKyspXG4gICAgICBpZiAobGluZU5vKGxpbmVWaWV3LnJlc3RbaV0pID4gbGluZU4pXG4gICAgICAgIHJldHVybiB7bWFwOiBsaW5lVmlldy5tZWFzdXJlLm1hcHNbaV0sIGNhY2hlOiBsaW5lVmlldy5tZWFzdXJlLmNhY2hlc1tpXSwgYmVmb3JlOiB0cnVlfTtcbiAgfVxuXG4gIC8vIFJlbmRlciBhIGxpbmUgaW50byB0aGUgaGlkZGVuIG5vZGUgZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkLiBVc2VkXG4gIC8vIHdoZW4gbWVhc3VyZW1lbnQgaXMgbmVlZGVkIGZvciBhIGxpbmUgdGhhdCdzIG5vdCBpbiB0aGUgdmlld3BvcnQuXG4gIGZ1bmN0aW9uIHVwZGF0ZUV4dGVybmFsTWVhc3VyZW1lbnQoY20sIGxpbmUpIHtcbiAgICBsaW5lID0gdmlzdWFsTGluZShsaW5lKTtcbiAgICB2YXIgbGluZU4gPSBsaW5lTm8obGluZSk7XG4gICAgdmFyIHZpZXcgPSBjbS5kaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQgPSBuZXcgTGluZVZpZXcoY20uZG9jLCBsaW5lLCBsaW5lTik7XG4gICAgdmlldy5saW5lTiA9IGxpbmVOO1xuICAgIHZhciBidWlsdCA9IHZpZXcuYnVpbHQgPSBidWlsZExpbmVDb250ZW50KGNtLCB2aWV3KTtcbiAgICB2aWV3LnRleHQgPSBidWlsdC5wcmU7XG4gICAgcmVtb3ZlQ2hpbGRyZW5BbmRBZGQoY20uZGlzcGxheS5saW5lTWVhc3VyZSwgYnVpbHQucHJlKTtcbiAgICByZXR1cm4gdmlldztcbiAgfVxuXG4gIC8vIEdldCBhIHt0b3AsIGJvdHRvbSwgbGVmdCwgcmlnaHR9IGJveCAoaW4gbGluZS1sb2NhbCBjb29yZGluYXRlcylcbiAgLy8gZm9yIGEgZ2l2ZW4gY2hhcmFjdGVyLlxuICBmdW5jdGlvbiBtZWFzdXJlQ2hhcihjbSwgbGluZSwgY2gsIGJpYXMpIHtcbiAgICByZXR1cm4gbWVhc3VyZUNoYXJQcmVwYXJlZChjbSwgcHJlcGFyZU1lYXN1cmVGb3JMaW5lKGNtLCBsaW5lKSwgY2gsIGJpYXMpO1xuICB9XG5cbiAgLy8gRmluZCBhIGxpbmUgdmlldyB0aGF0IGNvcnJlc3BvbmRzIHRvIHRoZSBnaXZlbiBsaW5lIG51bWJlci5cbiAgZnVuY3Rpb24gZmluZFZpZXdGb3JMaW5lKGNtLCBsaW5lTikge1xuICAgIGlmIChsaW5lTiA+PSBjbS5kaXNwbGF5LnZpZXdGcm9tICYmIGxpbmVOIDwgY20uZGlzcGxheS52aWV3VG8pXG4gICAgICByZXR1cm4gY20uZGlzcGxheS52aWV3W2ZpbmRWaWV3SW5kZXgoY20sIGxpbmVOKV07XG4gICAgdmFyIGV4dCA9IGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZDtcbiAgICBpZiAoZXh0ICYmIGxpbmVOID49IGV4dC5saW5lTiAmJiBsaW5lTiA8IGV4dC5saW5lTiArIGV4dC5zaXplKVxuICAgICAgcmV0dXJuIGV4dDtcbiAgfVxuXG4gIC8vIE1lYXN1cmVtZW50IGNhbiBiZSBzcGxpdCBpbiB0d28gc3RlcHMsIHRoZSBzZXQtdXAgd29yayB0aGF0XG4gIC8vIGFwcGxpZXMgdG8gdGhlIHdob2xlIGxpbmUsIGFuZCB0aGUgbWVhc3VyZW1lbnQgb2YgdGhlIGFjdHVhbFxuICAvLyBjaGFyYWN0ZXIuIEZ1bmN0aW9ucyBsaWtlIGNvb3Jkc0NoYXIsIHRoYXQgbmVlZCB0byBkbyBhIGxvdCBvZlxuICAvLyBtZWFzdXJlbWVudHMgaW4gYSByb3csIGNhbiB0aHVzIGVuc3VyZSB0aGF0IHRoZSBzZXQtdXAgd29yayBpc1xuICAvLyBvbmx5IGRvbmUgb25jZS5cbiAgZnVuY3Rpb24gcHJlcGFyZU1lYXN1cmVGb3JMaW5lKGNtLCBsaW5lKSB7XG4gICAgdmFyIGxpbmVOID0gbGluZU5vKGxpbmUpO1xuICAgIHZhciB2aWV3ID0gZmluZFZpZXdGb3JMaW5lKGNtLCBsaW5lTik7XG4gICAgaWYgKHZpZXcgJiYgIXZpZXcudGV4dCkge1xuICAgICAgdmlldyA9IG51bGw7XG4gICAgfSBlbHNlIGlmICh2aWV3ICYmIHZpZXcuY2hhbmdlcykge1xuICAgICAgdXBkYXRlTGluZUZvckNoYW5nZXMoY20sIHZpZXcsIGxpbmVOLCBnZXREaW1lbnNpb25zKGNtKSk7XG4gICAgICBjbS5jdXJPcC5mb3JjZVVwZGF0ZSA9IHRydWU7XG4gICAgfVxuICAgIGlmICghdmlldylcbiAgICAgIHZpZXcgPSB1cGRhdGVFeHRlcm5hbE1lYXN1cmVtZW50KGNtLCBsaW5lKTtcblxuICAgIHZhciBpbmZvID0gbWFwRnJvbUxpbmVWaWV3KHZpZXcsIGxpbmUsIGxpbmVOKTtcbiAgICByZXR1cm4ge1xuICAgICAgbGluZTogbGluZSwgdmlldzogdmlldywgcmVjdDogbnVsbCxcbiAgICAgIG1hcDogaW5mby5tYXAsIGNhY2hlOiBpbmZvLmNhY2hlLCBiZWZvcmU6IGluZm8uYmVmb3JlLFxuICAgICAgaGFzSGVpZ2h0czogZmFsc2VcbiAgICB9O1xuICB9XG5cbiAgLy8gR2l2ZW4gYSBwcmVwYXJlZCBtZWFzdXJlbWVudCBvYmplY3QsIG1lYXN1cmVzIHRoZSBwb3NpdGlvbiBvZiBhblxuICAvLyBhY3R1YWwgY2hhcmFjdGVyIChvciBmZXRjaGVzIGl0IGZyb20gdGhlIGNhY2hlKS5cbiAgZnVuY3Rpb24gbWVhc3VyZUNoYXJQcmVwYXJlZChjbSwgcHJlcGFyZWQsIGNoLCBiaWFzLCB2YXJIZWlnaHQpIHtcbiAgICBpZiAocHJlcGFyZWQuYmVmb3JlKSBjaCA9IC0xO1xuICAgIHZhciBrZXkgPSBjaCArIChiaWFzIHx8IFwiXCIpLCBmb3VuZDtcbiAgICBpZiAocHJlcGFyZWQuY2FjaGUuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgZm91bmQgPSBwcmVwYXJlZC5jYWNoZVtrZXldO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXByZXBhcmVkLnJlY3QpXG4gICAgICAgIHByZXBhcmVkLnJlY3QgPSBwcmVwYXJlZC52aWV3LnRleHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBpZiAoIXByZXBhcmVkLmhhc0hlaWdodHMpIHtcbiAgICAgICAgZW5zdXJlTGluZUhlaWdodHMoY20sIHByZXBhcmVkLnZpZXcsIHByZXBhcmVkLnJlY3QpO1xuICAgICAgICBwcmVwYXJlZC5oYXNIZWlnaHRzID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGZvdW5kID0gbWVhc3VyZUNoYXJJbm5lcihjbSwgcHJlcGFyZWQsIGNoLCBiaWFzKTtcbiAgICAgIGlmICghZm91bmQuYm9ndXMpIHByZXBhcmVkLmNhY2hlW2tleV0gPSBmb3VuZDtcbiAgICB9XG4gICAgcmV0dXJuIHtsZWZ0OiBmb3VuZC5sZWZ0LCByaWdodDogZm91bmQucmlnaHQsXG4gICAgICAgICAgICB0b3A6IHZhckhlaWdodCA/IGZvdW5kLnJ0b3AgOiBmb3VuZC50b3AsXG4gICAgICAgICAgICBib3R0b206IHZhckhlaWdodCA/IGZvdW5kLnJib3R0b20gOiBmb3VuZC5ib3R0b219O1xuICB9XG5cbiAgdmFyIG51bGxSZWN0ID0ge2xlZnQ6IDAsIHJpZ2h0OiAwLCB0b3A6IDAsIGJvdHRvbTogMH07XG5cbiAgZnVuY3Rpb24gbm9kZUFuZE9mZnNldEluTGluZU1hcChtYXAsIGNoLCBiaWFzKSB7XG4gICAgdmFyIG5vZGUsIHN0YXJ0LCBlbmQsIGNvbGxhcHNlO1xuICAgIC8vIEZpcnN0LCBzZWFyY2ggdGhlIGxpbmUgbWFwIGZvciB0aGUgdGV4dCBub2RlIGNvcnJlc3BvbmRpbmcgdG8sXG4gICAgLy8gb3IgY2xvc2VzdCB0bywgdGhlIHRhcmdldCBjaGFyYWN0ZXIuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXAubGVuZ3RoOyBpICs9IDMpIHtcbiAgICAgIHZhciBtU3RhcnQgPSBtYXBbaV0sIG1FbmQgPSBtYXBbaSArIDFdO1xuICAgICAgaWYgKGNoIDwgbVN0YXJ0KSB7XG4gICAgICAgIHN0YXJ0ID0gMDsgZW5kID0gMTtcbiAgICAgICAgY29sbGFwc2UgPSBcImxlZnRcIjtcbiAgICAgIH0gZWxzZSBpZiAoY2ggPCBtRW5kKSB7XG4gICAgICAgIHN0YXJ0ID0gY2ggLSBtU3RhcnQ7XG4gICAgICAgIGVuZCA9IHN0YXJ0ICsgMTtcbiAgICAgIH0gZWxzZSBpZiAoaSA9PSBtYXAubGVuZ3RoIC0gMyB8fCBjaCA9PSBtRW5kICYmIG1hcFtpICsgM10gPiBjaCkge1xuICAgICAgICBlbmQgPSBtRW5kIC0gbVN0YXJ0O1xuICAgICAgICBzdGFydCA9IGVuZCAtIDE7XG4gICAgICAgIGlmIChjaCA+PSBtRW5kKSBjb2xsYXBzZSA9IFwicmlnaHRcIjtcbiAgICAgIH1cbiAgICAgIGlmIChzdGFydCAhPSBudWxsKSB7XG4gICAgICAgIG5vZGUgPSBtYXBbaSArIDJdO1xuICAgICAgICBpZiAobVN0YXJ0ID09IG1FbmQgJiYgYmlhcyA9PSAobm9kZS5pbnNlcnRMZWZ0ID8gXCJsZWZ0XCIgOiBcInJpZ2h0XCIpKVxuICAgICAgICAgIGNvbGxhcHNlID0gYmlhcztcbiAgICAgICAgaWYgKGJpYXMgPT0gXCJsZWZ0XCIgJiYgc3RhcnQgPT0gMClcbiAgICAgICAgICB3aGlsZSAoaSAmJiBtYXBbaSAtIDJdID09IG1hcFtpIC0gM10gJiYgbWFwW2kgLSAxXS5pbnNlcnRMZWZ0KSB7XG4gICAgICAgICAgICBub2RlID0gbWFwWyhpIC09IDMpICsgMl07XG4gICAgICAgICAgICBjb2xsYXBzZSA9IFwibGVmdFwiO1xuICAgICAgICAgIH1cbiAgICAgICAgaWYgKGJpYXMgPT0gXCJyaWdodFwiICYmIHN0YXJ0ID09IG1FbmQgLSBtU3RhcnQpXG4gICAgICAgICAgd2hpbGUgKGkgPCBtYXAubGVuZ3RoIC0gMyAmJiBtYXBbaSArIDNdID09IG1hcFtpICsgNF0gJiYgIW1hcFtpICsgNV0uaW5zZXJ0TGVmdCkge1xuICAgICAgICAgICAgbm9kZSA9IG1hcFsoaSArPSAzKSArIDJdO1xuICAgICAgICAgICAgY29sbGFwc2UgPSBcInJpZ2h0XCI7XG4gICAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtub2RlOiBub2RlLCBzdGFydDogc3RhcnQsIGVuZDogZW5kLCBjb2xsYXBzZTogY29sbGFwc2UsIGNvdmVyU3RhcnQ6IG1TdGFydCwgY292ZXJFbmQ6IG1FbmR9O1xuICB9XG5cbiAgZnVuY3Rpb24gbWVhc3VyZUNoYXJJbm5lcihjbSwgcHJlcGFyZWQsIGNoLCBiaWFzKSB7XG4gICAgdmFyIHBsYWNlID0gbm9kZUFuZE9mZnNldEluTGluZU1hcChwcmVwYXJlZC5tYXAsIGNoLCBiaWFzKTtcbiAgICB2YXIgbm9kZSA9IHBsYWNlLm5vZGUsIHN0YXJ0ID0gcGxhY2Uuc3RhcnQsIGVuZCA9IHBsYWNlLmVuZCwgY29sbGFwc2UgPSBwbGFjZS5jb2xsYXBzZTtcblxuICAgIHZhciByZWN0O1xuICAgIGlmIChub2RlLm5vZGVUeXBlID09IDMpIHsgLy8gSWYgaXQgaXMgYSB0ZXh0IG5vZGUsIHVzZSBhIHJhbmdlIHRvIHJldHJpZXZlIHRoZSBjb29yZGluYXRlcy5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7IC8vIFJldHJ5IGEgbWF4aW11bSBvZiA0IHRpbWVzIHdoZW4gbm9uc2Vuc2UgcmVjdGFuZ2xlcyBhcmUgcmV0dXJuZWRcbiAgICAgICAgd2hpbGUgKHN0YXJ0ICYmIGlzRXh0ZW5kaW5nQ2hhcihwcmVwYXJlZC5saW5lLnRleHQuY2hhckF0KHBsYWNlLmNvdmVyU3RhcnQgKyBzdGFydCkpKSAtLXN0YXJ0O1xuICAgICAgICB3aGlsZSAocGxhY2UuY292ZXJTdGFydCArIGVuZCA8IHBsYWNlLmNvdmVyRW5kICYmIGlzRXh0ZW5kaW5nQ2hhcihwcmVwYXJlZC5saW5lLnRleHQuY2hhckF0KHBsYWNlLmNvdmVyU3RhcnQgKyBlbmQpKSkgKytlbmQ7XG4gICAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOSAmJiBzdGFydCA9PSAwICYmIGVuZCA9PSBwbGFjZS5jb3ZlckVuZCAtIHBsYWNlLmNvdmVyU3RhcnQpIHtcbiAgICAgICAgICByZWN0ID0gbm9kZS5wYXJlbnROb2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB9IGVsc2UgaWYgKGllICYmIGNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7XG4gICAgICAgICAgdmFyIHJlY3RzID0gcmFuZ2Uobm9kZSwgc3RhcnQsIGVuZCkuZ2V0Q2xpZW50UmVjdHMoKTtcbiAgICAgICAgICBpZiAocmVjdHMubGVuZ3RoKVxuICAgICAgICAgICAgcmVjdCA9IHJlY3RzW2JpYXMgPT0gXCJyaWdodFwiID8gcmVjdHMubGVuZ3RoIC0gMSA6IDBdO1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJlY3QgPSBudWxsUmVjdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZWN0ID0gcmFuZ2Uobm9kZSwgc3RhcnQsIGVuZCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgfHwgbnVsbFJlY3Q7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlY3QubGVmdCB8fCByZWN0LnJpZ2h0IHx8IHN0YXJ0ID09IDApIGJyZWFrO1xuICAgICAgICBlbmQgPSBzdGFydDtcbiAgICAgICAgc3RhcnQgPSBzdGFydCAtIDE7XG4gICAgICAgIGNvbGxhcHNlID0gXCJyaWdodFwiO1xuICAgICAgfVxuICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCAxMSkgcmVjdCA9IG1heWJlVXBkYXRlUmVjdEZvclpvb21pbmcoY20uZGlzcGxheS5tZWFzdXJlLCByZWN0KTtcbiAgICB9IGVsc2UgeyAvLyBJZiBpdCBpcyBhIHdpZGdldCwgc2ltcGx5IGdldCB0aGUgYm94IGZvciB0aGUgd2hvbGUgd2lkZ2V0LlxuICAgICAgaWYgKHN0YXJ0ID4gMCkgY29sbGFwc2UgPSBiaWFzID0gXCJyaWdodFwiO1xuICAgICAgdmFyIHJlY3RzO1xuICAgICAgaWYgKGNtLm9wdGlvbnMubGluZVdyYXBwaW5nICYmIChyZWN0cyA9IG5vZGUuZ2V0Q2xpZW50UmVjdHMoKSkubGVuZ3RoID4gMSlcbiAgICAgICAgcmVjdCA9IHJlY3RzW2JpYXMgPT0gXCJyaWdodFwiID8gcmVjdHMubGVuZ3RoIC0gMSA6IDBdO1xuICAgICAgZWxzZVxuICAgICAgICByZWN0ID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB9XG4gICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA5ICYmICFzdGFydCAmJiAoIXJlY3QgfHwgIXJlY3QubGVmdCAmJiAhcmVjdC5yaWdodCkpIHtcbiAgICAgIHZhciByU3BhbiA9IG5vZGUucGFyZW50Tm9kZS5nZXRDbGllbnRSZWN0cygpWzBdO1xuICAgICAgaWYgKHJTcGFuKVxuICAgICAgICByZWN0ID0ge2xlZnQ6IHJTcGFuLmxlZnQsIHJpZ2h0OiByU3Bhbi5sZWZ0ICsgY2hhcldpZHRoKGNtLmRpc3BsYXkpLCB0b3A6IHJTcGFuLnRvcCwgYm90dG9tOiByU3Bhbi5ib3R0b219O1xuICAgICAgZWxzZVxuICAgICAgICByZWN0ID0gbnVsbFJlY3Q7XG4gICAgfVxuXG4gICAgdmFyIHJ0b3AgPSByZWN0LnRvcCAtIHByZXBhcmVkLnJlY3QudG9wLCByYm90ID0gcmVjdC5ib3R0b20gLSBwcmVwYXJlZC5yZWN0LnRvcDtcbiAgICB2YXIgbWlkID0gKHJ0b3AgKyByYm90KSAvIDI7XG4gICAgdmFyIGhlaWdodHMgPSBwcmVwYXJlZC52aWV3Lm1lYXN1cmUuaGVpZ2h0cztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhlaWdodHMubGVuZ3RoIC0gMTsgaSsrKVxuICAgICAgaWYgKG1pZCA8IGhlaWdodHNbaV0pIGJyZWFrO1xuICAgIHZhciB0b3AgPSBpID8gaGVpZ2h0c1tpIC0gMV0gOiAwLCBib3QgPSBoZWlnaHRzW2ldO1xuICAgIHZhciByZXN1bHQgPSB7bGVmdDogKGNvbGxhcHNlID09IFwicmlnaHRcIiA/IHJlY3QucmlnaHQgOiByZWN0LmxlZnQpIC0gcHJlcGFyZWQucmVjdC5sZWZ0LFxuICAgICAgICAgICAgICAgICAgcmlnaHQ6IChjb2xsYXBzZSA9PSBcImxlZnRcIiA/IHJlY3QubGVmdCA6IHJlY3QucmlnaHQpIC0gcHJlcGFyZWQucmVjdC5sZWZ0LFxuICAgICAgICAgICAgICAgICAgdG9wOiB0b3AsIGJvdHRvbTogYm90fTtcbiAgICBpZiAoIXJlY3QubGVmdCAmJiAhcmVjdC5yaWdodCkgcmVzdWx0LmJvZ3VzID0gdHJ1ZTtcbiAgICBpZiAoIWNtLm9wdGlvbnMuc2luZ2xlQ3Vyc29ySGVpZ2h0UGVyTGluZSkgeyByZXN1bHQucnRvcCA9IHJ0b3A7IHJlc3VsdC5yYm90dG9tID0gcmJvdDsgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIFdvcmsgYXJvdW5kIHByb2JsZW0gd2l0aCBib3VuZGluZyBjbGllbnQgcmVjdHMgb24gcmFuZ2VzIGJlaW5nXG4gIC8vIHJldHVybmVkIGluY29ycmVjdGx5IHdoZW4gem9vbWVkIG9uIElFMTAgYW5kIGJlbG93LlxuICBmdW5jdGlvbiBtYXliZVVwZGF0ZVJlY3RGb3Jab29taW5nKG1lYXN1cmUsIHJlY3QpIHtcbiAgICBpZiAoIXdpbmRvdy5zY3JlZW4gfHwgc2NyZWVuLmxvZ2ljYWxYRFBJID09IG51bGwgfHxcbiAgICAgICAgc2NyZWVuLmxvZ2ljYWxYRFBJID09IHNjcmVlbi5kZXZpY2VYRFBJIHx8ICFoYXNCYWRab29tZWRSZWN0cyhtZWFzdXJlKSlcbiAgICAgIHJldHVybiByZWN0O1xuICAgIHZhciBzY2FsZVggPSBzY3JlZW4ubG9naWNhbFhEUEkgLyBzY3JlZW4uZGV2aWNlWERQSTtcbiAgICB2YXIgc2NhbGVZID0gc2NyZWVuLmxvZ2ljYWxZRFBJIC8gc2NyZWVuLmRldmljZVlEUEk7XG4gICAgcmV0dXJuIHtsZWZ0OiByZWN0LmxlZnQgKiBzY2FsZVgsIHJpZ2h0OiByZWN0LnJpZ2h0ICogc2NhbGVYLFxuICAgICAgICAgICAgdG9wOiByZWN0LnRvcCAqIHNjYWxlWSwgYm90dG9tOiByZWN0LmJvdHRvbSAqIHNjYWxlWX07XG4gIH1cblxuICBmdW5jdGlvbiBjbGVhckxpbmVNZWFzdXJlbWVudENhY2hlRm9yKGxpbmVWaWV3KSB7XG4gICAgaWYgKGxpbmVWaWV3Lm1lYXN1cmUpIHtcbiAgICAgIGxpbmVWaWV3Lm1lYXN1cmUuY2FjaGUgPSB7fTtcbiAgICAgIGxpbmVWaWV3Lm1lYXN1cmUuaGVpZ2h0cyA9IG51bGw7XG4gICAgICBpZiAobGluZVZpZXcucmVzdCkgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lVmlldy5yZXN0Lmxlbmd0aDsgaSsrKVxuICAgICAgICBsaW5lVmlldy5tZWFzdXJlLmNhY2hlc1tpXSA9IHt9O1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyTGluZU1lYXN1cmVtZW50Q2FjaGUoY20pIHtcbiAgICBjbS5kaXNwbGF5LmV4dGVybmFsTWVhc3VyZSA9IG51bGw7XG4gICAgcmVtb3ZlQ2hpbGRyZW4oY20uZGlzcGxheS5saW5lTWVhc3VyZSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbS5kaXNwbGF5LnZpZXcubGVuZ3RoOyBpKyspXG4gICAgICBjbGVhckxpbmVNZWFzdXJlbWVudENhY2hlRm9yKGNtLmRpc3BsYXkudmlld1tpXSk7XG4gIH1cblxuICBmdW5jdGlvbiBjbGVhckNhY2hlcyhjbSkge1xuICAgIGNsZWFyTGluZU1lYXN1cmVtZW50Q2FjaGUoY20pO1xuICAgIGNtLmRpc3BsYXkuY2FjaGVkQ2hhcldpZHRoID0gY20uZGlzcGxheS5jYWNoZWRUZXh0SGVpZ2h0ID0gY20uZGlzcGxheS5jYWNoZWRQYWRkaW5nSCA9IG51bGw7XG4gICAgaWYgKCFjbS5vcHRpb25zLmxpbmVXcmFwcGluZykgY20uZGlzcGxheS5tYXhMaW5lQ2hhbmdlZCA9IHRydWU7XG4gICAgY20uZGlzcGxheS5saW5lTnVtQ2hhcnMgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gcGFnZVNjcm9sbFgoKSB7IHJldHVybiB3aW5kb3cucGFnZVhPZmZzZXQgfHwgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB8fCBkb2N1bWVudC5ib2R5KS5zY3JvbGxMZWZ0OyB9XG4gIGZ1bmN0aW9uIHBhZ2VTY3JvbGxZKCkgeyByZXR1cm4gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keSkuc2Nyb2xsVG9wOyB9XG5cbiAgLy8gQ29udmVydHMgYSB7dG9wLCBib3R0b20sIGxlZnQsIHJpZ2h0fSBib3ggZnJvbSBsaW5lLWxvY2FsXG4gIC8vIGNvb3JkaW5hdGVzIGludG8gYW5vdGhlciBjb29yZGluYXRlIHN5c3RlbS4gQ29udGV4dCBtYXkgYmUgb25lIG9mXG4gIC8vIFwibGluZVwiLCBcImRpdlwiIChkaXNwbGF5LmxpbmVEaXYpLCBcImxvY2FsXCIvbnVsbCAoZWRpdG9yKSwgXCJ3aW5kb3dcIixcbiAgLy8gb3IgXCJwYWdlXCIuXG4gIGZ1bmN0aW9uIGludG9Db29yZFN5c3RlbShjbSwgbGluZU9iaiwgcmVjdCwgY29udGV4dCkge1xuICAgIGlmIChsaW5lT2JqLndpZGdldHMpIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZU9iai53aWRnZXRzLmxlbmd0aDsgKytpKSBpZiAobGluZU9iai53aWRnZXRzW2ldLmFib3ZlKSB7XG4gICAgICB2YXIgc2l6ZSA9IHdpZGdldEhlaWdodChsaW5lT2JqLndpZGdldHNbaV0pO1xuICAgICAgcmVjdC50b3AgKz0gc2l6ZTsgcmVjdC5ib3R0b20gKz0gc2l6ZTtcbiAgICB9XG4gICAgaWYgKGNvbnRleHQgPT0gXCJsaW5lXCIpIHJldHVybiByZWN0O1xuICAgIGlmICghY29udGV4dCkgY29udGV4dCA9IFwibG9jYWxcIjtcbiAgICB2YXIgeU9mZiA9IGhlaWdodEF0TGluZShsaW5lT2JqKTtcbiAgICBpZiAoY29udGV4dCA9PSBcImxvY2FsXCIpIHlPZmYgKz0gcGFkZGluZ1RvcChjbS5kaXNwbGF5KTtcbiAgICBlbHNlIHlPZmYgLT0gY20uZGlzcGxheS52aWV3T2Zmc2V0O1xuICAgIGlmIChjb250ZXh0ID09IFwicGFnZVwiIHx8IGNvbnRleHQgPT0gXCJ3aW5kb3dcIikge1xuICAgICAgdmFyIGxPZmYgPSBjbS5kaXNwbGF5LmxpbmVTcGFjZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHlPZmYgKz0gbE9mZi50b3AgKyAoY29udGV4dCA9PSBcIndpbmRvd1wiID8gMCA6IHBhZ2VTY3JvbGxZKCkpO1xuICAgICAgdmFyIHhPZmYgPSBsT2ZmLmxlZnQgKyAoY29udGV4dCA9PSBcIndpbmRvd1wiID8gMCA6IHBhZ2VTY3JvbGxYKCkpO1xuICAgICAgcmVjdC5sZWZ0ICs9IHhPZmY7IHJlY3QucmlnaHQgKz0geE9mZjtcbiAgICB9XG4gICAgcmVjdC50b3AgKz0geU9mZjsgcmVjdC5ib3R0b20gKz0geU9mZjtcbiAgICByZXR1cm4gcmVjdDtcbiAgfVxuXG4gIC8vIENvdmVydHMgYSBib3ggZnJvbSBcImRpdlwiIGNvb3JkcyB0byBhbm90aGVyIGNvb3JkaW5hdGUgc3lzdGVtLlxuICAvLyBDb250ZXh0IG1heSBiZSBcIndpbmRvd1wiLCBcInBhZ2VcIiwgXCJkaXZcIiwgb3IgXCJsb2NhbFwiL251bGwuXG4gIGZ1bmN0aW9uIGZyb21Db29yZFN5c3RlbShjbSwgY29vcmRzLCBjb250ZXh0KSB7XG4gICAgaWYgKGNvbnRleHQgPT0gXCJkaXZcIikgcmV0dXJuIGNvb3JkcztcbiAgICB2YXIgbGVmdCA9IGNvb3Jkcy5sZWZ0LCB0b3AgPSBjb29yZHMudG9wO1xuICAgIC8vIEZpcnN0IG1vdmUgaW50byBcInBhZ2VcIiBjb29yZGluYXRlIHN5c3RlbVxuICAgIGlmIChjb250ZXh0ID09IFwicGFnZVwiKSB7XG4gICAgICBsZWZ0IC09IHBhZ2VTY3JvbGxYKCk7XG4gICAgICB0b3AgLT0gcGFnZVNjcm9sbFkoKTtcbiAgICB9IGVsc2UgaWYgKGNvbnRleHQgPT0gXCJsb2NhbFwiIHx8ICFjb250ZXh0KSB7XG4gICAgICB2YXIgbG9jYWxCb3ggPSBjbS5kaXNwbGF5LnNpemVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgbGVmdCArPSBsb2NhbEJveC5sZWZ0O1xuICAgICAgdG9wICs9IGxvY2FsQm94LnRvcDtcbiAgICB9XG5cbiAgICB2YXIgbGluZVNwYWNlQm94ID0gY20uZGlzcGxheS5saW5lU3BhY2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmV0dXJuIHtsZWZ0OiBsZWZ0IC0gbGluZVNwYWNlQm94LmxlZnQsIHRvcDogdG9wIC0gbGluZVNwYWNlQm94LnRvcH07XG4gIH1cblxuICBmdW5jdGlvbiBjaGFyQ29vcmRzKGNtLCBwb3MsIGNvbnRleHQsIGxpbmVPYmosIGJpYXMpIHtcbiAgICBpZiAoIWxpbmVPYmopIGxpbmVPYmogPSBnZXRMaW5lKGNtLmRvYywgcG9zLmxpbmUpO1xuICAgIHJldHVybiBpbnRvQ29vcmRTeXN0ZW0oY20sIGxpbmVPYmosIG1lYXN1cmVDaGFyKGNtLCBsaW5lT2JqLCBwb3MuY2gsIGJpYXMpLCBjb250ZXh0KTtcbiAgfVxuXG4gIC8vIFJldHVybnMgYSBib3ggZm9yIGEgZ2l2ZW4gY3Vyc29yIHBvc2l0aW9uLCB3aGljaCBtYXkgaGF2ZSBhblxuICAvLyAnb3RoZXInIHByb3BlcnR5IGNvbnRhaW5pbmcgdGhlIHBvc2l0aW9uIG9mIHRoZSBzZWNvbmRhcnkgY3Vyc29yXG4gIC8vIG9uIGEgYmlkaSBib3VuZGFyeS5cbiAgZnVuY3Rpb24gY3Vyc29yQ29vcmRzKGNtLCBwb3MsIGNvbnRleHQsIGxpbmVPYmosIHByZXBhcmVkTWVhc3VyZSwgdmFySGVpZ2h0KSB7XG4gICAgbGluZU9iaiA9IGxpbmVPYmogfHwgZ2V0TGluZShjbS5kb2MsIHBvcy5saW5lKTtcbiAgICBpZiAoIXByZXBhcmVkTWVhc3VyZSkgcHJlcGFyZWRNZWFzdXJlID0gcHJlcGFyZU1lYXN1cmVGb3JMaW5lKGNtLCBsaW5lT2JqKTtcbiAgICBmdW5jdGlvbiBnZXQoY2gsIHJpZ2h0KSB7XG4gICAgICB2YXIgbSA9IG1lYXN1cmVDaGFyUHJlcGFyZWQoY20sIHByZXBhcmVkTWVhc3VyZSwgY2gsIHJpZ2h0ID8gXCJyaWdodFwiIDogXCJsZWZ0XCIsIHZhckhlaWdodCk7XG4gICAgICBpZiAocmlnaHQpIG0ubGVmdCA9IG0ucmlnaHQ7IGVsc2UgbS5yaWdodCA9IG0ubGVmdDtcbiAgICAgIHJldHVybiBpbnRvQ29vcmRTeXN0ZW0oY20sIGxpbmVPYmosIG0sIGNvbnRleHQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRCaWRpKGNoLCBwYXJ0UG9zKSB7XG4gICAgICB2YXIgcGFydCA9IG9yZGVyW3BhcnRQb3NdLCByaWdodCA9IHBhcnQubGV2ZWwgJSAyO1xuICAgICAgaWYgKGNoID09IGJpZGlMZWZ0KHBhcnQpICYmIHBhcnRQb3MgJiYgcGFydC5sZXZlbCA8IG9yZGVyW3BhcnRQb3MgLSAxXS5sZXZlbCkge1xuICAgICAgICBwYXJ0ID0gb3JkZXJbLS1wYXJ0UG9zXTtcbiAgICAgICAgY2ggPSBiaWRpUmlnaHQocGFydCkgLSAocGFydC5sZXZlbCAlIDIgPyAwIDogMSk7XG4gICAgICAgIHJpZ2h0ID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoY2ggPT0gYmlkaVJpZ2h0KHBhcnQpICYmIHBhcnRQb3MgPCBvcmRlci5sZW5ndGggLSAxICYmIHBhcnQubGV2ZWwgPCBvcmRlcltwYXJ0UG9zICsgMV0ubGV2ZWwpIHtcbiAgICAgICAgcGFydCA9IG9yZGVyWysrcGFydFBvc107XG4gICAgICAgIGNoID0gYmlkaUxlZnQocGFydCkgLSBwYXJ0LmxldmVsICUgMjtcbiAgICAgICAgcmlnaHQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChyaWdodCAmJiBjaCA9PSBwYXJ0LnRvICYmIGNoID4gcGFydC5mcm9tKSByZXR1cm4gZ2V0KGNoIC0gMSk7XG4gICAgICByZXR1cm4gZ2V0KGNoLCByaWdodCk7XG4gICAgfVxuICAgIHZhciBvcmRlciA9IGdldE9yZGVyKGxpbmVPYmopLCBjaCA9IHBvcy5jaDtcbiAgICBpZiAoIW9yZGVyKSByZXR1cm4gZ2V0KGNoKTtcbiAgICB2YXIgcGFydFBvcyA9IGdldEJpZGlQYXJ0QXQob3JkZXIsIGNoKTtcbiAgICB2YXIgdmFsID0gZ2V0QmlkaShjaCwgcGFydFBvcyk7XG4gICAgaWYgKGJpZGlPdGhlciAhPSBudWxsKSB2YWwub3RoZXIgPSBnZXRCaWRpKGNoLCBiaWRpT3RoZXIpO1xuICAgIHJldHVybiB2YWw7XG4gIH1cblxuICAvLyBVc2VkIHRvIGNoZWFwbHkgZXN0aW1hdGUgdGhlIGNvb3JkaW5hdGVzIGZvciBhIHBvc2l0aW9uLiBVc2VkIGZvclxuICAvLyBpbnRlcm1lZGlhdGUgc2Nyb2xsIHVwZGF0ZXMuXG4gIGZ1bmN0aW9uIGVzdGltYXRlQ29vcmRzKGNtLCBwb3MpIHtcbiAgICB2YXIgbGVmdCA9IDAsIHBvcyA9IGNsaXBQb3MoY20uZG9jLCBwb3MpO1xuICAgIGlmICghY20ub3B0aW9ucy5saW5lV3JhcHBpbmcpIGxlZnQgPSBjaGFyV2lkdGgoY20uZGlzcGxheSkgKiBwb3MuY2g7XG4gICAgdmFyIGxpbmVPYmogPSBnZXRMaW5lKGNtLmRvYywgcG9zLmxpbmUpO1xuICAgIHZhciB0b3AgPSBoZWlnaHRBdExpbmUobGluZU9iaikgKyBwYWRkaW5nVG9wKGNtLmRpc3BsYXkpO1xuICAgIHJldHVybiB7bGVmdDogbGVmdCwgcmlnaHQ6IGxlZnQsIHRvcDogdG9wLCBib3R0b206IHRvcCArIGxpbmVPYmouaGVpZ2h0fTtcbiAgfVxuXG4gIC8vIFBvc2l0aW9ucyByZXR1cm5lZCBieSBjb29yZHNDaGFyIGNvbnRhaW4gc29tZSBleHRyYSBpbmZvcm1hdGlvbi5cbiAgLy8geFJlbCBpcyB0aGUgcmVsYXRpdmUgeCBwb3NpdGlvbiBvZiB0aGUgaW5wdXQgY29vcmRpbmF0ZXMgY29tcGFyZWRcbiAgLy8gdG8gdGhlIGZvdW5kIHBvc2l0aW9uIChzbyB4UmVsID4gMCBtZWFucyB0aGUgY29vcmRpbmF0ZXMgYXJlIHRvXG4gIC8vIHRoZSByaWdodCBvZiB0aGUgY2hhcmFjdGVyIHBvc2l0aW9uLCBmb3IgZXhhbXBsZSkuIFdoZW4gb3V0c2lkZVxuICAvLyBpcyB0cnVlLCB0aGF0IG1lYW5zIHRoZSBjb29yZGluYXRlcyBsaWUgb3V0c2lkZSB0aGUgbGluZSdzXG4gIC8vIHZlcnRpY2FsIHJhbmdlLlxuICBmdW5jdGlvbiBQb3NXaXRoSW5mbyhsaW5lLCBjaCwgb3V0c2lkZSwgeFJlbCkge1xuICAgIHZhciBwb3MgPSBQb3MobGluZSwgY2gpO1xuICAgIHBvcy54UmVsID0geFJlbDtcbiAgICBpZiAob3V0c2lkZSkgcG9zLm91dHNpZGUgPSB0cnVlO1xuICAgIHJldHVybiBwb3M7XG4gIH1cblxuICAvLyBDb21wdXRlIHRoZSBjaGFyYWN0ZXIgcG9zaXRpb24gY2xvc2VzdCB0byB0aGUgZ2l2ZW4gY29vcmRpbmF0ZXMuXG4gIC8vIElucHV0IG11c3QgYmUgbGluZVNwYWNlLWxvY2FsIChcImRpdlwiIGNvb3JkaW5hdGUgc3lzdGVtKS5cbiAgZnVuY3Rpb24gY29vcmRzQ2hhcihjbSwgeCwgeSkge1xuICAgIHZhciBkb2MgPSBjbS5kb2M7XG4gICAgeSArPSBjbS5kaXNwbGF5LnZpZXdPZmZzZXQ7XG4gICAgaWYgKHkgPCAwKSByZXR1cm4gUG9zV2l0aEluZm8oZG9jLmZpcnN0LCAwLCB0cnVlLCAtMSk7XG4gICAgdmFyIGxpbmVOID0gbGluZUF0SGVpZ2h0KGRvYywgeSksIGxhc3QgPSBkb2MuZmlyc3QgKyBkb2Muc2l6ZSAtIDE7XG4gICAgaWYgKGxpbmVOID4gbGFzdClcbiAgICAgIHJldHVybiBQb3NXaXRoSW5mbyhkb2MuZmlyc3QgKyBkb2Muc2l6ZSAtIDEsIGdldExpbmUoZG9jLCBsYXN0KS50ZXh0Lmxlbmd0aCwgdHJ1ZSwgMSk7XG4gICAgaWYgKHggPCAwKSB4ID0gMDtcblxuICAgIHZhciBsaW5lT2JqID0gZ2V0TGluZShkb2MsIGxpbmVOKTtcbiAgICBmb3IgKDs7KSB7XG4gICAgICB2YXIgZm91bmQgPSBjb29yZHNDaGFySW5uZXIoY20sIGxpbmVPYmosIGxpbmVOLCB4LCB5KTtcbiAgICAgIHZhciBtZXJnZWQgPSBjb2xsYXBzZWRTcGFuQXRFbmQobGluZU9iaik7XG4gICAgICB2YXIgbWVyZ2VkUG9zID0gbWVyZ2VkICYmIG1lcmdlZC5maW5kKDAsIHRydWUpO1xuICAgICAgaWYgKG1lcmdlZCAmJiAoZm91bmQuY2ggPiBtZXJnZWRQb3MuZnJvbS5jaCB8fCBmb3VuZC5jaCA9PSBtZXJnZWRQb3MuZnJvbS5jaCAmJiBmb3VuZC54UmVsID4gMCkpXG4gICAgICAgIGxpbmVOID0gbGluZU5vKGxpbmVPYmogPSBtZXJnZWRQb3MudG8ubGluZSk7XG4gICAgICBlbHNlXG4gICAgICAgIHJldHVybiBmb3VuZDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjb29yZHNDaGFySW5uZXIoY20sIGxpbmVPYmosIGxpbmVObywgeCwgeSkge1xuICAgIHZhciBpbm5lck9mZiA9IHkgLSBoZWlnaHRBdExpbmUobGluZU9iaik7XG4gICAgdmFyIHdyb25nTGluZSA9IGZhbHNlLCBhZGp1c3QgPSAyICogY20uZGlzcGxheS53cmFwcGVyLmNsaWVudFdpZHRoO1xuICAgIHZhciBwcmVwYXJlZE1lYXN1cmUgPSBwcmVwYXJlTWVhc3VyZUZvckxpbmUoY20sIGxpbmVPYmopO1xuXG4gICAgZnVuY3Rpb24gZ2V0WChjaCkge1xuICAgICAgdmFyIHNwID0gY3Vyc29yQ29vcmRzKGNtLCBQb3MobGluZU5vLCBjaCksIFwibGluZVwiLCBsaW5lT2JqLCBwcmVwYXJlZE1lYXN1cmUpO1xuICAgICAgd3JvbmdMaW5lID0gdHJ1ZTtcbiAgICAgIGlmIChpbm5lck9mZiA+IHNwLmJvdHRvbSkgcmV0dXJuIHNwLmxlZnQgLSBhZGp1c3Q7XG4gICAgICBlbHNlIGlmIChpbm5lck9mZiA8IHNwLnRvcCkgcmV0dXJuIHNwLmxlZnQgKyBhZGp1c3Q7XG4gICAgICBlbHNlIHdyb25nTGluZSA9IGZhbHNlO1xuICAgICAgcmV0dXJuIHNwLmxlZnQ7XG4gICAgfVxuXG4gICAgdmFyIGJpZGkgPSBnZXRPcmRlcihsaW5lT2JqKSwgZGlzdCA9IGxpbmVPYmoudGV4dC5sZW5ndGg7XG4gICAgdmFyIGZyb20gPSBsaW5lTGVmdChsaW5lT2JqKSwgdG8gPSBsaW5lUmlnaHQobGluZU9iaik7XG4gICAgdmFyIGZyb21YID0gZ2V0WChmcm9tKSwgZnJvbU91dHNpZGUgPSB3cm9uZ0xpbmUsIHRvWCA9IGdldFgodG8pLCB0b091dHNpZGUgPSB3cm9uZ0xpbmU7XG5cbiAgICBpZiAoeCA+IHRvWCkgcmV0dXJuIFBvc1dpdGhJbmZvKGxpbmVObywgdG8sIHRvT3V0c2lkZSwgMSk7XG4gICAgLy8gRG8gYSBiaW5hcnkgc2VhcmNoIGJldHdlZW4gdGhlc2UgYm91bmRzLlxuICAgIGZvciAoOzspIHtcbiAgICAgIGlmIChiaWRpID8gdG8gPT0gZnJvbSB8fCB0byA9PSBtb3ZlVmlzdWFsbHkobGluZU9iaiwgZnJvbSwgMSkgOiB0byAtIGZyb20gPD0gMSkge1xuICAgICAgICB2YXIgY2ggPSB4IDwgZnJvbVggfHwgeCAtIGZyb21YIDw9IHRvWCAtIHggPyBmcm9tIDogdG87XG4gICAgICAgIHZhciB4RGlmZiA9IHggLSAoY2ggPT0gZnJvbSA/IGZyb21YIDogdG9YKTtcbiAgICAgICAgd2hpbGUgKGlzRXh0ZW5kaW5nQ2hhcihsaW5lT2JqLnRleHQuY2hhckF0KGNoKSkpICsrY2g7XG4gICAgICAgIHZhciBwb3MgPSBQb3NXaXRoSW5mbyhsaW5lTm8sIGNoLCBjaCA9PSBmcm9tID8gZnJvbU91dHNpZGUgOiB0b091dHNpZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4RGlmZiA8IC0xID8gLTEgOiB4RGlmZiA+IDEgPyAxIDogMCk7XG4gICAgICAgIHJldHVybiBwb3M7XG4gICAgICB9XG4gICAgICB2YXIgc3RlcCA9IE1hdGguY2VpbChkaXN0IC8gMiksIG1pZGRsZSA9IGZyb20gKyBzdGVwO1xuICAgICAgaWYgKGJpZGkpIHtcbiAgICAgICAgbWlkZGxlID0gZnJvbTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGVwOyArK2kpIG1pZGRsZSA9IG1vdmVWaXN1YWxseShsaW5lT2JqLCBtaWRkbGUsIDEpO1xuICAgICAgfVxuICAgICAgdmFyIG1pZGRsZVggPSBnZXRYKG1pZGRsZSk7XG4gICAgICBpZiAobWlkZGxlWCA+IHgpIHt0byA9IG1pZGRsZTsgdG9YID0gbWlkZGxlWDsgaWYgKHRvT3V0c2lkZSA9IHdyb25nTGluZSkgdG9YICs9IDEwMDA7IGRpc3QgPSBzdGVwO31cbiAgICAgIGVsc2Uge2Zyb20gPSBtaWRkbGU7IGZyb21YID0gbWlkZGxlWDsgZnJvbU91dHNpZGUgPSB3cm9uZ0xpbmU7IGRpc3QgLT0gc3RlcDt9XG4gICAgfVxuICB9XG5cbiAgdmFyIG1lYXN1cmVUZXh0O1xuICAvLyBDb21wdXRlIHRoZSBkZWZhdWx0IHRleHQgaGVpZ2h0LlxuICBmdW5jdGlvbiB0ZXh0SGVpZ2h0KGRpc3BsYXkpIHtcbiAgICBpZiAoZGlzcGxheS5jYWNoZWRUZXh0SGVpZ2h0ICE9IG51bGwpIHJldHVybiBkaXNwbGF5LmNhY2hlZFRleHRIZWlnaHQ7XG4gICAgaWYgKG1lYXN1cmVUZXh0ID09IG51bGwpIHtcbiAgICAgIG1lYXN1cmVUZXh0ID0gZWx0KFwicHJlXCIpO1xuICAgICAgLy8gTWVhc3VyZSBhIGJ1bmNoIG9mIGxpbmVzLCBmb3IgYnJvd3NlcnMgdGhhdCBjb21wdXRlXG4gICAgICAvLyBmcmFjdGlvbmFsIGhlaWdodHMuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ5OyArK2kpIHtcbiAgICAgICAgbWVhc3VyZVRleHQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJ4XCIpKTtcbiAgICAgICAgbWVhc3VyZVRleHQuYXBwZW5kQ2hpbGQoZWx0KFwiYnJcIikpO1xuICAgICAgfVxuICAgICAgbWVhc3VyZVRleHQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJ4XCIpKTtcbiAgICB9XG4gICAgcmVtb3ZlQ2hpbGRyZW5BbmRBZGQoZGlzcGxheS5tZWFzdXJlLCBtZWFzdXJlVGV4dCk7XG4gICAgdmFyIGhlaWdodCA9IG1lYXN1cmVUZXh0Lm9mZnNldEhlaWdodCAvIDUwO1xuICAgIGlmIChoZWlnaHQgPiAzKSBkaXNwbGF5LmNhY2hlZFRleHRIZWlnaHQgPSBoZWlnaHQ7XG4gICAgcmVtb3ZlQ2hpbGRyZW4oZGlzcGxheS5tZWFzdXJlKTtcbiAgICByZXR1cm4gaGVpZ2h0IHx8IDE7XG4gIH1cblxuICAvLyBDb21wdXRlIHRoZSBkZWZhdWx0IGNoYXJhY3RlciB3aWR0aC5cbiAgZnVuY3Rpb24gY2hhcldpZHRoKGRpc3BsYXkpIHtcbiAgICBpZiAoZGlzcGxheS5jYWNoZWRDaGFyV2lkdGggIT0gbnVsbCkgcmV0dXJuIGRpc3BsYXkuY2FjaGVkQ2hhcldpZHRoO1xuICAgIHZhciBhbmNob3IgPSBlbHQoXCJzcGFuXCIsIFwieHh4eHh4eHh4eFwiKTtcbiAgICB2YXIgcHJlID0gZWx0KFwicHJlXCIsIFthbmNob3JdKTtcbiAgICByZW1vdmVDaGlsZHJlbkFuZEFkZChkaXNwbGF5Lm1lYXN1cmUsIHByZSk7XG4gICAgdmFyIHJlY3QgPSBhbmNob3IuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIHdpZHRoID0gKHJlY3QucmlnaHQgLSByZWN0LmxlZnQpIC8gMTA7XG4gICAgaWYgKHdpZHRoID4gMikgZGlzcGxheS5jYWNoZWRDaGFyV2lkdGggPSB3aWR0aDtcbiAgICByZXR1cm4gd2lkdGggfHwgMTA7XG4gIH1cblxuICAvLyBPUEVSQVRJT05TXG5cbiAgLy8gT3BlcmF0aW9ucyBhcmUgdXNlZCB0byB3cmFwIGEgc2VyaWVzIG9mIGNoYW5nZXMgdG8gdGhlIGVkaXRvclxuICAvLyBzdGF0ZSBpbiBzdWNoIGEgd2F5IHRoYXQgZWFjaCBjaGFuZ2Ugd29uJ3QgaGF2ZSB0byB1cGRhdGUgdGhlXG4gIC8vIGN1cnNvciBhbmQgZGlzcGxheSAod2hpY2ggd291bGQgYmUgYXdrd2FyZCwgc2xvdywgYW5kXG4gIC8vIGVycm9yLXByb25lKS4gSW5zdGVhZCwgZGlzcGxheSB1cGRhdGVzIGFyZSBiYXRjaGVkIGFuZCB0aGVuIGFsbFxuICAvLyBjb21iaW5lZCBhbmQgZXhlY3V0ZWQgYXQgb25jZS5cblxuICB2YXIgb3BlcmF0aW9uR3JvdXAgPSBudWxsO1xuXG4gIHZhciBuZXh0T3BJZCA9IDA7XG4gIC8vIFN0YXJ0IGEgbmV3IG9wZXJhdGlvbi5cbiAgZnVuY3Rpb24gc3RhcnRPcGVyYXRpb24oY20pIHtcbiAgICBjbS5jdXJPcCA9IHtcbiAgICAgIGNtOiBjbSxcbiAgICAgIHZpZXdDaGFuZ2VkOiBmYWxzZSwgICAgICAvLyBGbGFnIHRoYXQgaW5kaWNhdGVzIHRoYXQgbGluZXMgbWlnaHQgbmVlZCB0byBiZSByZWRyYXduXG4gICAgICBzdGFydEhlaWdodDogY20uZG9jLmhlaWdodCwgLy8gVXNlZCB0byBkZXRlY3QgbmVlZCB0byB1cGRhdGUgc2Nyb2xsYmFyXG4gICAgICBmb3JjZVVwZGF0ZTogZmFsc2UsICAgICAgLy8gVXNlZCB0byBmb3JjZSBhIHJlZHJhd1xuICAgICAgdXBkYXRlSW5wdXQ6IG51bGwsICAgICAgIC8vIFdoZXRoZXIgdG8gcmVzZXQgdGhlIGlucHV0IHRleHRhcmVhXG4gICAgICB0eXBpbmc6IGZhbHNlLCAgICAgICAgICAgLy8gV2hldGhlciB0aGlzIHJlc2V0IHNob3VsZCBiZSBjYXJlZnVsIHRvIGxlYXZlIGV4aXN0aW5nIHRleHQgKGZvciBjb21wb3NpdGluZylcbiAgICAgIGNoYW5nZU9ianM6IG51bGwsICAgICAgICAvLyBBY2N1bXVsYXRlZCBjaGFuZ2VzLCBmb3IgZmlyaW5nIGNoYW5nZSBldmVudHNcbiAgICAgIGN1cnNvckFjdGl2aXR5SGFuZGxlcnM6IG51bGwsIC8vIFNldCBvZiBoYW5kbGVycyB0byBmaXJlIGN1cnNvckFjdGl2aXR5IG9uXG4gICAgICBjdXJzb3JBY3Rpdml0eUNhbGxlZDogMCwgLy8gVHJhY2tzIHdoaWNoIGN1cnNvckFjdGl2aXR5IGhhbmRsZXJzIGhhdmUgYmVlbiBjYWxsZWQgYWxyZWFkeVxuICAgICAgc2VsZWN0aW9uQ2hhbmdlZDogZmFsc2UsIC8vIFdoZXRoZXIgdGhlIHNlbGVjdGlvbiBuZWVkcyB0byBiZSByZWRyYXduXG4gICAgICB1cGRhdGVNYXhMaW5lOiBmYWxzZSwgICAgLy8gU2V0IHdoZW4gdGhlIHdpZGVzdCBsaW5lIG5lZWRzIHRvIGJlIGRldGVybWluZWQgYW5ld1xuICAgICAgc2Nyb2xsTGVmdDogbnVsbCwgc2Nyb2xsVG9wOiBudWxsLCAvLyBJbnRlcm1lZGlhdGUgc2Nyb2xsIHBvc2l0aW9uLCBub3QgcHVzaGVkIHRvIERPTSB5ZXRcbiAgICAgIHNjcm9sbFRvUG9zOiBudWxsLCAgICAgICAvLyBVc2VkIHRvIHNjcm9sbCB0byBhIHNwZWNpZmljIHBvc2l0aW9uXG4gICAgICBmb2N1czogZmFsc2UsXG4gICAgICBpZDogKytuZXh0T3BJZCAgICAgICAgICAgLy8gVW5pcXVlIElEXG4gICAgfTtcbiAgICBpZiAob3BlcmF0aW9uR3JvdXApIHtcbiAgICAgIG9wZXJhdGlvbkdyb3VwLm9wcy5wdXNoKGNtLmN1ck9wKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY20uY3VyT3Aub3duc0dyb3VwID0gb3BlcmF0aW9uR3JvdXAgPSB7XG4gICAgICAgIG9wczogW2NtLmN1ck9wXSxcbiAgICAgICAgZGVsYXllZENhbGxiYWNrczogW11cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZmlyZUNhbGxiYWNrc0Zvck9wcyhncm91cCkge1xuICAgIC8vIENhbGxzIGRlbGF5ZWQgY2FsbGJhY2tzIGFuZCBjdXJzb3JBY3Rpdml0eSBoYW5kbGVycyB1bnRpbCBub1xuICAgIC8vIG5ldyBvbmVzIGFwcGVhclxuICAgIHZhciBjYWxsYmFja3MgPSBncm91cC5kZWxheWVkQ2FsbGJhY2tzLCBpID0gMDtcbiAgICBkbyB7XG4gICAgICBmb3IgKDsgaSA8IGNhbGxiYWNrcy5sZW5ndGg7IGkrKylcbiAgICAgICAgY2FsbGJhY2tzW2ldLmNhbGwobnVsbCk7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGdyb3VwLm9wcy5sZW5ndGg7IGorKykge1xuICAgICAgICB2YXIgb3AgPSBncm91cC5vcHNbal07XG4gICAgICAgIGlmIChvcC5jdXJzb3JBY3Rpdml0eUhhbmRsZXJzKVxuICAgICAgICAgIHdoaWxlIChvcC5jdXJzb3JBY3Rpdml0eUNhbGxlZCA8IG9wLmN1cnNvckFjdGl2aXR5SGFuZGxlcnMubGVuZ3RoKVxuICAgICAgICAgICAgb3AuY3Vyc29yQWN0aXZpdHlIYW5kbGVyc1tvcC5jdXJzb3JBY3Rpdml0eUNhbGxlZCsrXS5jYWxsKG51bGwsIG9wLmNtKTtcbiAgICAgIH1cbiAgICB9IHdoaWxlIChpIDwgY2FsbGJhY2tzLmxlbmd0aCk7XG4gIH1cblxuICAvLyBGaW5pc2ggYW4gb3BlcmF0aW9uLCB1cGRhdGluZyB0aGUgZGlzcGxheSBhbmQgc2lnbmFsbGluZyBkZWxheWVkIGV2ZW50c1xuICBmdW5jdGlvbiBlbmRPcGVyYXRpb24oY20pIHtcbiAgICB2YXIgb3AgPSBjbS5jdXJPcCwgZ3JvdXAgPSBvcC5vd25zR3JvdXA7XG4gICAgaWYgKCFncm91cCkgcmV0dXJuO1xuXG4gICAgdHJ5IHsgZmlyZUNhbGxiYWNrc0Zvck9wcyhncm91cCk7IH1cbiAgICBmaW5hbGx5IHtcbiAgICAgIG9wZXJhdGlvbkdyb3VwID0gbnVsbDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JvdXAub3BzLmxlbmd0aDsgaSsrKVxuICAgICAgICBncm91cC5vcHNbaV0uY20uY3VyT3AgPSBudWxsO1xuICAgICAgZW5kT3BlcmF0aW9ucyhncm91cCk7XG4gICAgfVxuICB9XG5cbiAgLy8gVGhlIERPTSB1cGRhdGVzIGRvbmUgd2hlbiBhbiBvcGVyYXRpb24gZmluaXNoZXMgYXJlIGJhdGNoZWQgc29cbiAgLy8gdGhhdCB0aGUgbWluaW11bSBudW1iZXIgb2YgcmVsYXlvdXRzIGFyZSByZXF1aXJlZC5cbiAgZnVuY3Rpb24gZW5kT3BlcmF0aW9ucyhncm91cCkge1xuICAgIHZhciBvcHMgPSBncm91cC5vcHM7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHMubGVuZ3RoOyBpKyspIC8vIFJlYWQgRE9NXG4gICAgICBlbmRPcGVyYXRpb25fUjEob3BzW2ldKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wcy5sZW5ndGg7IGkrKykgLy8gV3JpdGUgRE9NIChtYXliZSlcbiAgICAgIGVuZE9wZXJhdGlvbl9XMShvcHNbaV0pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3BzLmxlbmd0aDsgaSsrKSAvLyBSZWFkIERPTVxuICAgICAgZW5kT3BlcmF0aW9uX1IyKG9wc1tpXSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHMubGVuZ3RoOyBpKyspIC8vIFdyaXRlIERPTSAobWF5YmUpXG4gICAgICBlbmRPcGVyYXRpb25fVzIob3BzW2ldKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wcy5sZW5ndGg7IGkrKykgLy8gUmVhZCBET01cbiAgICAgIGVuZE9wZXJhdGlvbl9maW5pc2gob3BzW2ldKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVuZE9wZXJhdGlvbl9SMShvcCkge1xuICAgIHZhciBjbSA9IG9wLmNtLCBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICBtYXliZUNsaXBTY3JvbGxiYXJzKGNtKTtcbiAgICBpZiAob3AudXBkYXRlTWF4TGluZSkgZmluZE1heExpbmUoY20pO1xuXG4gICAgb3AubXVzdFVwZGF0ZSA9IG9wLnZpZXdDaGFuZ2VkIHx8IG9wLmZvcmNlVXBkYXRlIHx8IG9wLnNjcm9sbFRvcCAhPSBudWxsIHx8XG4gICAgICBvcC5zY3JvbGxUb1BvcyAmJiAob3Auc2Nyb2xsVG9Qb3MuZnJvbS5saW5lIDwgZGlzcGxheS52aWV3RnJvbSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIG9wLnNjcm9sbFRvUG9zLnRvLmxpbmUgPj0gZGlzcGxheS52aWV3VG8pIHx8XG4gICAgICBkaXNwbGF5Lm1heExpbmVDaGFuZ2VkICYmIGNtLm9wdGlvbnMubGluZVdyYXBwaW5nO1xuICAgIG9wLnVwZGF0ZSA9IG9wLm11c3RVcGRhdGUgJiZcbiAgICAgIG5ldyBEaXNwbGF5VXBkYXRlKGNtLCBvcC5tdXN0VXBkYXRlICYmIHt0b3A6IG9wLnNjcm9sbFRvcCwgZW5zdXJlOiBvcC5zY3JvbGxUb1Bvc30sIG9wLmZvcmNlVXBkYXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVuZE9wZXJhdGlvbl9XMShvcCkge1xuICAgIG9wLnVwZGF0ZWREaXNwbGF5ID0gb3AubXVzdFVwZGF0ZSAmJiB1cGRhdGVEaXNwbGF5SWZOZWVkZWQob3AuY20sIG9wLnVwZGF0ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBlbmRPcGVyYXRpb25fUjIob3ApIHtcbiAgICB2YXIgY20gPSBvcC5jbSwgZGlzcGxheSA9IGNtLmRpc3BsYXk7XG4gICAgaWYgKG9wLnVwZGF0ZWREaXNwbGF5KSB1cGRhdGVIZWlnaHRzSW5WaWV3cG9ydChjbSk7XG5cbiAgICBvcC5iYXJNZWFzdXJlID0gbWVhc3VyZUZvclNjcm9sbGJhcnMoY20pO1xuXG4gICAgLy8gSWYgdGhlIG1heCBsaW5lIGNoYW5nZWQgc2luY2UgaXQgd2FzIGxhc3QgbWVhc3VyZWQsIG1lYXN1cmUgaXQsXG4gICAgLy8gYW5kIGVuc3VyZSB0aGUgZG9jdW1lbnQncyB3aWR0aCBtYXRjaGVzIGl0LlxuICAgIC8vIHVwZGF0ZURpc3BsYXlfVzIgd2lsbCB1c2UgdGhlc2UgcHJvcGVydGllcyB0byBkbyB0aGUgYWN0dWFsIHJlc2l6aW5nXG4gICAgaWYgKGRpc3BsYXkubWF4TGluZUNoYW5nZWQgJiYgIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7XG4gICAgICBvcC5hZGp1c3RXaWR0aFRvID0gbWVhc3VyZUNoYXIoY20sIGRpc3BsYXkubWF4TGluZSwgZGlzcGxheS5tYXhMaW5lLnRleHQubGVuZ3RoKS5sZWZ0ICsgMztcbiAgICAgIGNtLmRpc3BsYXkuc2l6ZXJXaWR0aCA9IG9wLmFkanVzdFdpZHRoVG87XG4gICAgICBvcC5iYXJNZWFzdXJlLnNjcm9sbFdpZHRoID1cbiAgICAgICAgTWF0aC5tYXgoZGlzcGxheS5zY3JvbGxlci5jbGllbnRXaWR0aCwgZGlzcGxheS5zaXplci5vZmZzZXRMZWZ0ICsgb3AuYWRqdXN0V2lkdGhUbyArIHNjcm9sbEdhcChjbSkgKyBjbS5kaXNwbGF5LmJhcldpZHRoKTtcbiAgICAgIG9wLm1heFNjcm9sbExlZnQgPSBNYXRoLm1heCgwLCBkaXNwbGF5LnNpemVyLm9mZnNldExlZnQgKyBvcC5hZGp1c3RXaWR0aFRvIC0gZGlzcGxheVdpZHRoKGNtKSk7XG4gICAgfVxuXG4gICAgaWYgKG9wLnVwZGF0ZWREaXNwbGF5IHx8IG9wLnNlbGVjdGlvbkNoYW5nZWQpXG4gICAgICBvcC5wcmVwYXJlZFNlbGVjdGlvbiA9IGRpc3BsYXkuaW5wdXQucHJlcGFyZVNlbGVjdGlvbigpO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5kT3BlcmF0aW9uX1cyKG9wKSB7XG4gICAgdmFyIGNtID0gb3AuY207XG5cbiAgICBpZiAob3AuYWRqdXN0V2lkdGhUbyAhPSBudWxsKSB7XG4gICAgICBjbS5kaXNwbGF5LnNpemVyLnN0eWxlLm1pbldpZHRoID0gb3AuYWRqdXN0V2lkdGhUbyArIFwicHhcIjtcbiAgICAgIGlmIChvcC5tYXhTY3JvbGxMZWZ0IDwgY20uZG9jLnNjcm9sbExlZnQpXG4gICAgICAgIHNldFNjcm9sbExlZnQoY20sIE1hdGgubWluKGNtLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsTGVmdCwgb3AubWF4U2Nyb2xsTGVmdCksIHRydWUpO1xuICAgICAgY20uZGlzcGxheS5tYXhMaW5lQ2hhbmdlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChvcC5wcmVwYXJlZFNlbGVjdGlvbilcbiAgICAgIGNtLmRpc3BsYXkuaW5wdXQuc2hvd1NlbGVjdGlvbihvcC5wcmVwYXJlZFNlbGVjdGlvbik7XG4gICAgaWYgKG9wLnVwZGF0ZWREaXNwbGF5KVxuICAgICAgc2V0RG9jdW1lbnRIZWlnaHQoY20sIG9wLmJhck1lYXN1cmUpO1xuICAgIGlmIChvcC51cGRhdGVkRGlzcGxheSB8fCBvcC5zdGFydEhlaWdodCAhPSBjbS5kb2MuaGVpZ2h0KVxuICAgICAgdXBkYXRlU2Nyb2xsYmFycyhjbSwgb3AuYmFyTWVhc3VyZSk7XG5cbiAgICBpZiAob3Auc2VsZWN0aW9uQ2hhbmdlZCkgcmVzdGFydEJsaW5rKGNtKTtcblxuICAgIGlmIChjbS5zdGF0ZS5mb2N1c2VkICYmIG9wLnVwZGF0ZUlucHV0KVxuICAgICAgY20uZGlzcGxheS5pbnB1dC5yZXNldChvcC50eXBpbmcpO1xuICAgIGlmIChvcC5mb2N1cyAmJiBvcC5mb2N1cyA9PSBhY3RpdmVFbHQoKSkgZW5zdXJlRm9jdXMob3AuY20pO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5kT3BlcmF0aW9uX2ZpbmlzaChvcCkge1xuICAgIHZhciBjbSA9IG9wLmNtLCBkaXNwbGF5ID0gY20uZGlzcGxheSwgZG9jID0gY20uZG9jO1xuXG4gICAgaWYgKG9wLnVwZGF0ZWREaXNwbGF5KSBwb3N0VXBkYXRlRGlzcGxheShjbSwgb3AudXBkYXRlKTtcblxuICAgIC8vIEFib3J0IG1vdXNlIHdoZWVsIGRlbHRhIG1lYXN1cmVtZW50LCB3aGVuIHNjcm9sbGluZyBleHBsaWNpdGx5XG4gICAgaWYgKGRpc3BsYXkud2hlZWxTdGFydFggIT0gbnVsbCAmJiAob3Auc2Nyb2xsVG9wICE9IG51bGwgfHwgb3Auc2Nyb2xsTGVmdCAhPSBudWxsIHx8IG9wLnNjcm9sbFRvUG9zKSlcbiAgICAgIGRpc3BsYXkud2hlZWxTdGFydFggPSBkaXNwbGF5LndoZWVsU3RhcnRZID0gbnVsbDtcblxuICAgIC8vIFByb3BhZ2F0ZSB0aGUgc2Nyb2xsIHBvc2l0aW9uIHRvIHRoZSBhY3R1YWwgRE9NIHNjcm9sbGVyXG4gICAgaWYgKG9wLnNjcm9sbFRvcCAhPSBudWxsICYmIChkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcCAhPSBvcC5zY3JvbGxUb3AgfHwgb3AuZm9yY2VTY3JvbGwpKSB7XG4gICAgICBkb2Muc2Nyb2xsVG9wID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oZGlzcGxheS5zY3JvbGxlci5zY3JvbGxIZWlnaHQgLSBkaXNwbGF5LnNjcm9sbGVyLmNsaWVudEhlaWdodCwgb3Auc2Nyb2xsVG9wKSk7XG4gICAgICBkaXNwbGF5LnNjcm9sbGJhcnMuc2V0U2Nyb2xsVG9wKGRvYy5zY3JvbGxUb3ApO1xuICAgICAgZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3AgPSBkb2Muc2Nyb2xsVG9wO1xuICAgIH1cbiAgICBpZiAob3Auc2Nyb2xsTGVmdCAhPSBudWxsICYmIChkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbExlZnQgIT0gb3Auc2Nyb2xsTGVmdCB8fCBvcC5mb3JjZVNjcm9sbCkpIHtcbiAgICAgIGRvYy5zY3JvbGxMZWZ0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oZGlzcGxheS5zY3JvbGxlci5zY3JvbGxXaWR0aCAtIGRpc3BsYXlXaWR0aChjbSksIG9wLnNjcm9sbExlZnQpKTtcbiAgICAgIGRpc3BsYXkuc2Nyb2xsYmFycy5zZXRTY3JvbGxMZWZ0KGRvYy5zY3JvbGxMZWZ0KTtcbiAgICAgIGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsTGVmdCA9IGRvYy5zY3JvbGxMZWZ0O1xuICAgICAgYWxpZ25Ib3Jpem9udGFsbHkoY20pO1xuICAgIH1cbiAgICAvLyBJZiB3ZSBuZWVkIHRvIHNjcm9sbCBhIHNwZWNpZmljIHBvc2l0aW9uIGludG8gdmlldywgZG8gc28uXG4gICAgaWYgKG9wLnNjcm9sbFRvUG9zKSB7XG4gICAgICB2YXIgY29vcmRzID0gc2Nyb2xsUG9zSW50b1ZpZXcoY20sIGNsaXBQb3MoZG9jLCBvcC5zY3JvbGxUb1Bvcy5mcm9tKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGlwUG9zKGRvYywgb3Auc2Nyb2xsVG9Qb3MudG8pLCBvcC5zY3JvbGxUb1Bvcy5tYXJnaW4pO1xuICAgICAgaWYgKG9wLnNjcm9sbFRvUG9zLmlzQ3Vyc29yICYmIGNtLnN0YXRlLmZvY3VzZWQpIG1heWJlU2Nyb2xsV2luZG93KGNtLCBjb29yZHMpO1xuICAgIH1cblxuICAgIC8vIEZpcmUgZXZlbnRzIGZvciBtYXJrZXJzIHRoYXQgYXJlIGhpZGRlbi91bmlkZGVuIGJ5IGVkaXRpbmcgb3JcbiAgICAvLyB1bmRvaW5nXG4gICAgdmFyIGhpZGRlbiA9IG9wLm1heWJlSGlkZGVuTWFya2VycywgdW5oaWRkZW4gPSBvcC5tYXliZVVuaGlkZGVuTWFya2VycztcbiAgICBpZiAoaGlkZGVuKSBmb3IgKHZhciBpID0gMDsgaSA8IGhpZGRlbi5sZW5ndGg7ICsraSlcbiAgICAgIGlmICghaGlkZGVuW2ldLmxpbmVzLmxlbmd0aCkgc2lnbmFsKGhpZGRlbltpXSwgXCJoaWRlXCIpO1xuICAgIGlmICh1bmhpZGRlbikgZm9yICh2YXIgaSA9IDA7IGkgPCB1bmhpZGRlbi5sZW5ndGg7ICsraSlcbiAgICAgIGlmICh1bmhpZGRlbltpXS5saW5lcy5sZW5ndGgpIHNpZ25hbCh1bmhpZGRlbltpXSwgXCJ1bmhpZGVcIik7XG5cbiAgICBpZiAoZGlzcGxheS53cmFwcGVyLm9mZnNldEhlaWdodClcbiAgICAgIGRvYy5zY3JvbGxUb3AgPSBjbS5kaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcDtcblxuICAgIC8vIEZpcmUgY2hhbmdlIGV2ZW50cywgYW5kIGRlbGF5ZWQgZXZlbnQgaGFuZGxlcnNcbiAgICBpZiAob3AuY2hhbmdlT2JqcylcbiAgICAgIHNpZ25hbChjbSwgXCJjaGFuZ2VzXCIsIGNtLCBvcC5jaGFuZ2VPYmpzKTtcbiAgICBpZiAob3AudXBkYXRlKVxuICAgICAgb3AudXBkYXRlLmZpbmlzaCgpO1xuICB9XG5cbiAgLy8gUnVuIHRoZSBnaXZlbiBmdW5jdGlvbiBpbiBhbiBvcGVyYXRpb25cbiAgZnVuY3Rpb24gcnVuSW5PcChjbSwgZikge1xuICAgIGlmIChjbS5jdXJPcCkgcmV0dXJuIGYoKTtcbiAgICBzdGFydE9wZXJhdGlvbihjbSk7XG4gICAgdHJ5IHsgcmV0dXJuIGYoKTsgfVxuICAgIGZpbmFsbHkgeyBlbmRPcGVyYXRpb24oY20pOyB9XG4gIH1cbiAgLy8gV3JhcHMgYSBmdW5jdGlvbiBpbiBhbiBvcGVyYXRpb24uIFJldHVybnMgdGhlIHdyYXBwZWQgZnVuY3Rpb24uXG4gIGZ1bmN0aW9uIG9wZXJhdGlvbihjbSwgZikge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChjbS5jdXJPcCkgcmV0dXJuIGYuYXBwbHkoY20sIGFyZ3VtZW50cyk7XG4gICAgICBzdGFydE9wZXJhdGlvbihjbSk7XG4gICAgICB0cnkgeyByZXR1cm4gZi5hcHBseShjbSwgYXJndW1lbnRzKTsgfVxuICAgICAgZmluYWxseSB7IGVuZE9wZXJhdGlvbihjbSk7IH1cbiAgICB9O1xuICB9XG4gIC8vIFVzZWQgdG8gYWRkIG1ldGhvZHMgdG8gZWRpdG9yIGFuZCBkb2MgaW5zdGFuY2VzLCB3cmFwcGluZyB0aGVtIGluXG4gIC8vIG9wZXJhdGlvbnMuXG4gIGZ1bmN0aW9uIG1ldGhvZE9wKGYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5jdXJPcCkgcmV0dXJuIGYuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHN0YXJ0T3BlcmF0aW9uKHRoaXMpO1xuICAgICAgdHJ5IHsgcmV0dXJuIGYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfVxuICAgICAgZmluYWxseSB7IGVuZE9wZXJhdGlvbih0aGlzKTsgfVxuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gZG9jTWV0aG9kT3AoZikge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjbSA9IHRoaXMuY207XG4gICAgICBpZiAoIWNtIHx8IGNtLmN1ck9wKSByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgc3RhcnRPcGVyYXRpb24oY20pO1xuICAgICAgdHJ5IHsgcmV0dXJuIGYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfVxuICAgICAgZmluYWxseSB7IGVuZE9wZXJhdGlvbihjbSk7IH1cbiAgICB9O1xuICB9XG5cbiAgLy8gVklFVyBUUkFDS0lOR1xuXG4gIC8vIFRoZXNlIG9iamVjdHMgYXJlIHVzZWQgdG8gcmVwcmVzZW50IHRoZSB2aXNpYmxlIChjdXJyZW50bHkgZHJhd24pXG4gIC8vIHBhcnQgb2YgdGhlIGRvY3VtZW50LiBBIExpbmVWaWV3IG1heSBjb3JyZXNwb25kIHRvIG11bHRpcGxlXG4gIC8vIGxvZ2ljYWwgbGluZXMsIGlmIHRob3NlIGFyZSBjb25uZWN0ZWQgYnkgY29sbGFwc2VkIHJhbmdlcy5cbiAgZnVuY3Rpb24gTGluZVZpZXcoZG9jLCBsaW5lLCBsaW5lTikge1xuICAgIC8vIFRoZSBzdGFydGluZyBsaW5lXG4gICAgdGhpcy5saW5lID0gbGluZTtcbiAgICAvLyBDb250aW51aW5nIGxpbmVzLCBpZiBhbnlcbiAgICB0aGlzLnJlc3QgPSB2aXN1YWxMaW5lQ29udGludWVkKGxpbmUpO1xuICAgIC8vIE51bWJlciBvZiBsb2dpY2FsIGxpbmVzIGluIHRoaXMgdmlzdWFsIGxpbmVcbiAgICB0aGlzLnNpemUgPSB0aGlzLnJlc3QgPyBsaW5lTm8obHN0KHRoaXMucmVzdCkpIC0gbGluZU4gKyAxIDogMTtcbiAgICB0aGlzLm5vZGUgPSB0aGlzLnRleHQgPSBudWxsO1xuICAgIHRoaXMuaGlkZGVuID0gbGluZUlzSGlkZGVuKGRvYywgbGluZSk7XG4gIH1cblxuICAvLyBDcmVhdGUgYSByYW5nZSBvZiBMaW5lVmlldyBvYmplY3RzIGZvciB0aGUgZ2l2ZW4gbGluZXMuXG4gIGZ1bmN0aW9uIGJ1aWxkVmlld0FycmF5KGNtLCBmcm9tLCB0bykge1xuICAgIHZhciBhcnJheSA9IFtdLCBuZXh0UG9zO1xuICAgIGZvciAodmFyIHBvcyA9IGZyb207IHBvcyA8IHRvOyBwb3MgPSBuZXh0UG9zKSB7XG4gICAgICB2YXIgdmlldyA9IG5ldyBMaW5lVmlldyhjbS5kb2MsIGdldExpbmUoY20uZG9jLCBwb3MpLCBwb3MpO1xuICAgICAgbmV4dFBvcyA9IHBvcyArIHZpZXcuc2l6ZTtcbiAgICAgIGFycmF5LnB1c2godmlldyk7XG4gICAgfVxuICAgIHJldHVybiBhcnJheTtcbiAgfVxuXG4gIC8vIFVwZGF0ZXMgdGhlIGRpc3BsYXkudmlldyBkYXRhIHN0cnVjdHVyZSBmb3IgYSBnaXZlbiBjaGFuZ2UgdG8gdGhlXG4gIC8vIGRvY3VtZW50LiBGcm9tIGFuZCB0byBhcmUgaW4gcHJlLWNoYW5nZSBjb29yZGluYXRlcy4gTGVuZGlmZiBpc1xuICAvLyB0aGUgYW1vdW50IG9mIGxpbmVzIGFkZGVkIG9yIHN1YnRyYWN0ZWQgYnkgdGhlIGNoYW5nZS4gVGhpcyBpc1xuICAvLyB1c2VkIGZvciBjaGFuZ2VzIHRoYXQgc3BhbiBtdWx0aXBsZSBsaW5lcywgb3IgY2hhbmdlIHRoZSB3YXlcbiAgLy8gbGluZXMgYXJlIGRpdmlkZWQgaW50byB2aXN1YWwgbGluZXMuIHJlZ0xpbmVDaGFuZ2UgKGJlbG93KVxuICAvLyByZWdpc3RlcnMgc2luZ2xlLWxpbmUgY2hhbmdlcy5cbiAgZnVuY3Rpb24gcmVnQ2hhbmdlKGNtLCBmcm9tLCB0bywgbGVuZGlmZikge1xuICAgIGlmIChmcm9tID09IG51bGwpIGZyb20gPSBjbS5kb2MuZmlyc3Q7XG4gICAgaWYgKHRvID09IG51bGwpIHRvID0gY20uZG9jLmZpcnN0ICsgY20uZG9jLnNpemU7XG4gICAgaWYgKCFsZW5kaWZmKSBsZW5kaWZmID0gMDtcblxuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICBpZiAobGVuZGlmZiAmJiB0byA8IGRpc3BsYXkudmlld1RvICYmXG4gICAgICAgIChkaXNwbGF5LnVwZGF0ZUxpbmVOdW1iZXJzID09IG51bGwgfHwgZGlzcGxheS51cGRhdGVMaW5lTnVtYmVycyA+IGZyb20pKVxuICAgICAgZGlzcGxheS51cGRhdGVMaW5lTnVtYmVycyA9IGZyb207XG5cbiAgICBjbS5jdXJPcC52aWV3Q2hhbmdlZCA9IHRydWU7XG5cbiAgICBpZiAoZnJvbSA+PSBkaXNwbGF5LnZpZXdUbykgeyAvLyBDaGFuZ2UgYWZ0ZXJcbiAgICAgIGlmIChzYXdDb2xsYXBzZWRTcGFucyAmJiB2aXN1YWxMaW5lTm8oY20uZG9jLCBmcm9tKSA8IGRpc3BsYXkudmlld1RvKVxuICAgICAgICByZXNldFZpZXcoY20pO1xuICAgIH0gZWxzZSBpZiAodG8gPD0gZGlzcGxheS52aWV3RnJvbSkgeyAvLyBDaGFuZ2UgYmVmb3JlXG4gICAgICBpZiAoc2F3Q29sbGFwc2VkU3BhbnMgJiYgdmlzdWFsTGluZUVuZE5vKGNtLmRvYywgdG8gKyBsZW5kaWZmKSA+IGRpc3BsYXkudmlld0Zyb20pIHtcbiAgICAgICAgcmVzZXRWaWV3KGNtKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpc3BsYXkudmlld0Zyb20gKz0gbGVuZGlmZjtcbiAgICAgICAgZGlzcGxheS52aWV3VG8gKz0gbGVuZGlmZjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGZyb20gPD0gZGlzcGxheS52aWV3RnJvbSAmJiB0byA+PSBkaXNwbGF5LnZpZXdUbykgeyAvLyBGdWxsIG92ZXJsYXBcbiAgICAgIHJlc2V0VmlldyhjbSk7XG4gICAgfSBlbHNlIGlmIChmcm9tIDw9IGRpc3BsYXkudmlld0Zyb20pIHsgLy8gVG9wIG92ZXJsYXBcbiAgICAgIHZhciBjdXQgPSB2aWV3Q3V0dGluZ1BvaW50KGNtLCB0bywgdG8gKyBsZW5kaWZmLCAxKTtcbiAgICAgIGlmIChjdXQpIHtcbiAgICAgICAgZGlzcGxheS52aWV3ID0gZGlzcGxheS52aWV3LnNsaWNlKGN1dC5pbmRleCk7XG4gICAgICAgIGRpc3BsYXkudmlld0Zyb20gPSBjdXQubGluZU47XG4gICAgICAgIGRpc3BsYXkudmlld1RvICs9IGxlbmRpZmY7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNldFZpZXcoY20pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodG8gPj0gZGlzcGxheS52aWV3VG8pIHsgLy8gQm90dG9tIG92ZXJsYXBcbiAgICAgIHZhciBjdXQgPSB2aWV3Q3V0dGluZ1BvaW50KGNtLCBmcm9tLCBmcm9tLCAtMSk7XG4gICAgICBpZiAoY3V0KSB7XG4gICAgICAgIGRpc3BsYXkudmlldyA9IGRpc3BsYXkudmlldy5zbGljZSgwLCBjdXQuaW5kZXgpO1xuICAgICAgICBkaXNwbGF5LnZpZXdUbyA9IGN1dC5saW5lTjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc2V0VmlldyhjbSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHsgLy8gR2FwIGluIHRoZSBtaWRkbGVcbiAgICAgIHZhciBjdXRUb3AgPSB2aWV3Q3V0dGluZ1BvaW50KGNtLCBmcm9tLCBmcm9tLCAtMSk7XG4gICAgICB2YXIgY3V0Qm90ID0gdmlld0N1dHRpbmdQb2ludChjbSwgdG8sIHRvICsgbGVuZGlmZiwgMSk7XG4gICAgICBpZiAoY3V0VG9wICYmIGN1dEJvdCkge1xuICAgICAgICBkaXNwbGF5LnZpZXcgPSBkaXNwbGF5LnZpZXcuc2xpY2UoMCwgY3V0VG9wLmluZGV4KVxuICAgICAgICAgIC5jb25jYXQoYnVpbGRWaWV3QXJyYXkoY20sIGN1dFRvcC5saW5lTiwgY3V0Qm90LmxpbmVOKSlcbiAgICAgICAgICAuY29uY2F0KGRpc3BsYXkudmlldy5zbGljZShjdXRCb3QuaW5kZXgpKTtcbiAgICAgICAgZGlzcGxheS52aWV3VG8gKz0gbGVuZGlmZjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc2V0VmlldyhjbSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGV4dCA9IGRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZDtcbiAgICBpZiAoZXh0KSB7XG4gICAgICBpZiAodG8gPCBleHQubGluZU4pXG4gICAgICAgIGV4dC5saW5lTiArPSBsZW5kaWZmO1xuICAgICAgZWxzZSBpZiAoZnJvbSA8IGV4dC5saW5lTiArIGV4dC5zaXplKVxuICAgICAgICBkaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8vIFJlZ2lzdGVyIGEgY2hhbmdlIHRvIGEgc2luZ2xlIGxpbmUuIFR5cGUgbXVzdCBiZSBvbmUgb2YgXCJ0ZXh0XCIsXG4gIC8vIFwiZ3V0dGVyXCIsIFwiY2xhc3NcIiwgXCJ3aWRnZXRcIlxuICBmdW5jdGlvbiByZWdMaW5lQ2hhbmdlKGNtLCBsaW5lLCB0eXBlKSB7XG4gICAgY20uY3VyT3Audmlld0NoYW5nZWQgPSB0cnVlO1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgZXh0ID0gY20uZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkO1xuICAgIGlmIChleHQgJiYgbGluZSA+PSBleHQubGluZU4gJiYgbGluZSA8IGV4dC5saW5lTiArIGV4dC5zaXplKVxuICAgICAgZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkID0gbnVsbDtcblxuICAgIGlmIChsaW5lIDwgZGlzcGxheS52aWV3RnJvbSB8fCBsaW5lID49IGRpc3BsYXkudmlld1RvKSByZXR1cm47XG4gICAgdmFyIGxpbmVWaWV3ID0gZGlzcGxheS52aWV3W2ZpbmRWaWV3SW5kZXgoY20sIGxpbmUpXTtcbiAgICBpZiAobGluZVZpZXcubm9kZSA9PSBudWxsKSByZXR1cm47XG4gICAgdmFyIGFyciA9IGxpbmVWaWV3LmNoYW5nZXMgfHwgKGxpbmVWaWV3LmNoYW5nZXMgPSBbXSk7XG4gICAgaWYgKGluZGV4T2YoYXJyLCB0eXBlKSA9PSAtMSkgYXJyLnB1c2godHlwZSk7XG4gIH1cblxuICAvLyBDbGVhciB0aGUgdmlldy5cbiAgZnVuY3Rpb24gcmVzZXRWaWV3KGNtKSB7XG4gICAgY20uZGlzcGxheS52aWV3RnJvbSA9IGNtLmRpc3BsYXkudmlld1RvID0gY20uZG9jLmZpcnN0O1xuICAgIGNtLmRpc3BsYXkudmlldyA9IFtdO1xuICAgIGNtLmRpc3BsYXkudmlld09mZnNldCA9IDA7XG4gIH1cblxuICAvLyBGaW5kIHRoZSB2aWV3IGVsZW1lbnQgY29ycmVzcG9uZGluZyB0byBhIGdpdmVuIGxpbmUuIFJldHVybiBudWxsXG4gIC8vIHdoZW4gdGhlIGxpbmUgaXNuJ3QgdmlzaWJsZS5cbiAgZnVuY3Rpb24gZmluZFZpZXdJbmRleChjbSwgbikge1xuICAgIGlmIChuID49IGNtLmRpc3BsYXkudmlld1RvKSByZXR1cm4gbnVsbDtcbiAgICBuIC09IGNtLmRpc3BsYXkudmlld0Zyb207XG4gICAgaWYgKG4gPCAwKSByZXR1cm4gbnVsbDtcbiAgICB2YXIgdmlldyA9IGNtLmRpc3BsYXkudmlldztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZpZXcubGVuZ3RoOyBpKyspIHtcbiAgICAgIG4gLT0gdmlld1tpXS5zaXplO1xuICAgICAgaWYgKG4gPCAwKSByZXR1cm4gaTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB2aWV3Q3V0dGluZ1BvaW50KGNtLCBvbGROLCBuZXdOLCBkaXIpIHtcbiAgICB2YXIgaW5kZXggPSBmaW5kVmlld0luZGV4KGNtLCBvbGROKSwgZGlmZiwgdmlldyA9IGNtLmRpc3BsYXkudmlldztcbiAgICBpZiAoIXNhd0NvbGxhcHNlZFNwYW5zIHx8IG5ld04gPT0gY20uZG9jLmZpcnN0ICsgY20uZG9jLnNpemUpXG4gICAgICByZXR1cm4ge2luZGV4OiBpbmRleCwgbGluZU46IG5ld059O1xuICAgIGZvciAodmFyIGkgPSAwLCBuID0gY20uZGlzcGxheS52aWV3RnJvbTsgaSA8IGluZGV4OyBpKyspXG4gICAgICBuICs9IHZpZXdbaV0uc2l6ZTtcbiAgICBpZiAobiAhPSBvbGROKSB7XG4gICAgICBpZiAoZGlyID4gMCkge1xuICAgICAgICBpZiAoaW5kZXggPT0gdmlldy5sZW5ndGggLSAxKSByZXR1cm4gbnVsbDtcbiAgICAgICAgZGlmZiA9IChuICsgdmlld1tpbmRleF0uc2l6ZSkgLSBvbGROO1xuICAgICAgICBpbmRleCsrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGlmZiA9IG4gLSBvbGROO1xuICAgICAgfVxuICAgICAgb2xkTiArPSBkaWZmOyBuZXdOICs9IGRpZmY7XG4gICAgfVxuICAgIHdoaWxlICh2aXN1YWxMaW5lTm8oY20uZG9jLCBuZXdOKSAhPSBuZXdOKSB7XG4gICAgICBpZiAoaW5kZXggPT0gKGRpciA8IDAgPyAwIDogdmlldy5sZW5ndGggLSAxKSkgcmV0dXJuIG51bGw7XG4gICAgICBuZXdOICs9IGRpciAqIHZpZXdbaW5kZXggLSAoZGlyIDwgMCA/IDEgOiAwKV0uc2l6ZTtcbiAgICAgIGluZGV4ICs9IGRpcjtcbiAgICB9XG4gICAgcmV0dXJuIHtpbmRleDogaW5kZXgsIGxpbmVOOiBuZXdOfTtcbiAgfVxuXG4gIC8vIEZvcmNlIHRoZSB2aWV3IHRvIGNvdmVyIGEgZ2l2ZW4gcmFuZ2UsIGFkZGluZyBlbXB0eSB2aWV3IGVsZW1lbnRcbiAgLy8gb3IgY2xpcHBpbmcgb2ZmIGV4aXN0aW5nIG9uZXMgYXMgbmVlZGVkLlxuICBmdW5jdGlvbiBhZGp1c3RWaWV3KGNtLCBmcm9tLCB0bykge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgdmlldyA9IGRpc3BsYXkudmlldztcbiAgICBpZiAodmlldy5sZW5ndGggPT0gMCB8fCBmcm9tID49IGRpc3BsYXkudmlld1RvIHx8IHRvIDw9IGRpc3BsYXkudmlld0Zyb20pIHtcbiAgICAgIGRpc3BsYXkudmlldyA9IGJ1aWxkVmlld0FycmF5KGNtLCBmcm9tLCB0byk7XG4gICAgICBkaXNwbGF5LnZpZXdGcm9tID0gZnJvbTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGRpc3BsYXkudmlld0Zyb20gPiBmcm9tKVxuICAgICAgICBkaXNwbGF5LnZpZXcgPSBidWlsZFZpZXdBcnJheShjbSwgZnJvbSwgZGlzcGxheS52aWV3RnJvbSkuY29uY2F0KGRpc3BsYXkudmlldyk7XG4gICAgICBlbHNlIGlmIChkaXNwbGF5LnZpZXdGcm9tIDwgZnJvbSlcbiAgICAgICAgZGlzcGxheS52aWV3ID0gZGlzcGxheS52aWV3LnNsaWNlKGZpbmRWaWV3SW5kZXgoY20sIGZyb20pKTtcbiAgICAgIGRpc3BsYXkudmlld0Zyb20gPSBmcm9tO1xuICAgICAgaWYgKGRpc3BsYXkudmlld1RvIDwgdG8pXG4gICAgICAgIGRpc3BsYXkudmlldyA9IGRpc3BsYXkudmlldy5jb25jYXQoYnVpbGRWaWV3QXJyYXkoY20sIGRpc3BsYXkudmlld1RvLCB0bykpO1xuICAgICAgZWxzZSBpZiAoZGlzcGxheS52aWV3VG8gPiB0bylcbiAgICAgICAgZGlzcGxheS52aWV3ID0gZGlzcGxheS52aWV3LnNsaWNlKDAsIGZpbmRWaWV3SW5kZXgoY20sIHRvKSk7XG4gICAgfVxuICAgIGRpc3BsYXkudmlld1RvID0gdG87XG4gIH1cblxuICAvLyBDb3VudCB0aGUgbnVtYmVyIG9mIGxpbmVzIGluIHRoZSB2aWV3IHdob3NlIERPTSByZXByZXNlbnRhdGlvbiBpc1xuICAvLyBvdXQgb2YgZGF0ZSAob3Igbm9uZXhpc3RlbnQpLlxuICBmdW5jdGlvbiBjb3VudERpcnR5VmlldyhjbSkge1xuICAgIHZhciB2aWV3ID0gY20uZGlzcGxheS52aWV3LCBkaXJ0eSA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aWV3Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbGluZVZpZXcgPSB2aWV3W2ldO1xuICAgICAgaWYgKCFsaW5lVmlldy5oaWRkZW4gJiYgKCFsaW5lVmlldy5ub2RlIHx8IGxpbmVWaWV3LmNoYW5nZXMpKSArK2RpcnR5O1xuICAgIH1cbiAgICByZXR1cm4gZGlydHk7XG4gIH1cblxuICAvLyBFVkVOVCBIQU5ETEVSU1xuXG4gIC8vIEF0dGFjaCB0aGUgbmVjZXNzYXJ5IGV2ZW50IGhhbmRsZXJzIHdoZW4gaW5pdGlhbGl6aW5nIHRoZSBlZGl0b3JcbiAgZnVuY3Rpb24gcmVnaXN0ZXJFdmVudEhhbmRsZXJzKGNtKSB7XG4gICAgdmFyIGQgPSBjbS5kaXNwbGF5O1xuICAgIG9uKGQuc2Nyb2xsZXIsIFwibW91c2Vkb3duXCIsIG9wZXJhdGlvbihjbSwgb25Nb3VzZURvd24pKTtcbiAgICAvLyBPbGRlciBJRSdzIHdpbGwgbm90IGZpcmUgYSBzZWNvbmQgbW91c2Vkb3duIGZvciBhIGRvdWJsZSBjbGlja1xuICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgMTEpXG4gICAgICBvbihkLnNjcm9sbGVyLCBcImRibGNsaWNrXCIsIG9wZXJhdGlvbihjbSwgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUpKSByZXR1cm47XG4gICAgICAgIHZhciBwb3MgPSBwb3NGcm9tTW91c2UoY20sIGUpO1xuICAgICAgICBpZiAoIXBvcyB8fCBjbGlja0luR3V0dGVyKGNtLCBlKSB8fCBldmVudEluV2lkZ2V0KGNtLmRpc3BsYXksIGUpKSByZXR1cm47XG4gICAgICAgIGVfcHJldmVudERlZmF1bHQoZSk7XG4gICAgICAgIHZhciB3b3JkID0gY20uZmluZFdvcmRBdChwb3MpO1xuICAgICAgICBleHRlbmRTZWxlY3Rpb24oY20uZG9jLCB3b3JkLmFuY2hvciwgd29yZC5oZWFkKTtcbiAgICAgIH0pKTtcbiAgICBlbHNlXG4gICAgICBvbihkLnNjcm9sbGVyLCBcImRibGNsaWNrXCIsIGZ1bmN0aW9uKGUpIHsgc2lnbmFsRE9NRXZlbnQoY20sIGUpIHx8IGVfcHJldmVudERlZmF1bHQoZSk7IH0pO1xuICAgIC8vIFNvbWUgYnJvd3NlcnMgZmlyZSBjb250ZXh0bWVudSAqYWZ0ZXIqIG9wZW5pbmcgdGhlIG1lbnUsIGF0XG4gICAgLy8gd2hpY2ggcG9pbnQgd2UgY2FuJ3QgbWVzcyB3aXRoIGl0IGFueW1vcmUuIENvbnRleHQgbWVudSBpc1xuICAgIC8vIGhhbmRsZWQgaW4gb25Nb3VzZURvd24gZm9yIHRoZXNlIGJyb3dzZXJzLlxuICAgIGlmICghY2FwdHVyZVJpZ2h0Q2xpY2spIG9uKGQuc2Nyb2xsZXIsIFwiY29udGV4dG1lbnVcIiwgZnVuY3Rpb24oZSkge29uQ29udGV4dE1lbnUoY20sIGUpO30pO1xuXG4gICAgLy8gVXNlZCB0byBzdXBwcmVzcyBtb3VzZSBldmVudCBoYW5kbGluZyB3aGVuIGEgdG91Y2ggaGFwcGVuc1xuICAgIHZhciB0b3VjaEZpbmlzaGVkLCBwcmV2VG91Y2ggPSB7ZW5kOiAwfTtcbiAgICBmdW5jdGlvbiBmaW5pc2hUb3VjaCgpIHtcbiAgICAgIGlmIChkLmFjdGl2ZVRvdWNoKSB7XG4gICAgICAgIHRvdWNoRmluaXNoZWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge2QuYWN0aXZlVG91Y2ggPSBudWxsO30sIDEwMDApO1xuICAgICAgICBwcmV2VG91Y2ggPSBkLmFjdGl2ZVRvdWNoO1xuICAgICAgICBwcmV2VG91Y2guZW5kID0gK25ldyBEYXRlO1xuICAgICAgfVxuICAgIH07XG4gICAgZnVuY3Rpb24gaXNNb3VzZUxpa2VUb3VjaEV2ZW50KGUpIHtcbiAgICAgIGlmIChlLnRvdWNoZXMubGVuZ3RoICE9IDEpIHJldHVybiBmYWxzZTtcbiAgICAgIHZhciB0b3VjaCA9IGUudG91Y2hlc1swXTtcbiAgICAgIHJldHVybiB0b3VjaC5yYWRpdXNYIDw9IDEgJiYgdG91Y2gucmFkaXVzWSA8PSAxO1xuICAgIH1cbiAgICBmdW5jdGlvbiBmYXJBd2F5KHRvdWNoLCBvdGhlcikge1xuICAgICAgaWYgKG90aGVyLmxlZnQgPT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gICAgICB2YXIgZHggPSBvdGhlci5sZWZ0IC0gdG91Y2gubGVmdCwgZHkgPSBvdGhlci50b3AgLSB0b3VjaC50b3A7XG4gICAgICByZXR1cm4gZHggKiBkeCArIGR5ICogZHkgPiAyMCAqIDIwO1xuICAgIH1cbiAgICBvbihkLnNjcm9sbGVyLCBcInRvdWNoc3RhcnRcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKCFpc01vdXNlTGlrZVRvdWNoRXZlbnQoZSkpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRvdWNoRmluaXNoZWQpO1xuICAgICAgICB2YXIgbm93ID0gK25ldyBEYXRlO1xuICAgICAgICBkLmFjdGl2ZVRvdWNoID0ge3N0YXJ0OiBub3csIG1vdmVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2OiBub3cgLSBwcmV2VG91Y2guZW5kIDw9IDMwMCA/IHByZXZUb3VjaCA6IG51bGx9O1xuICAgICAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgZC5hY3RpdmVUb3VjaC5sZWZ0ID0gZS50b3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgICAgIGQuYWN0aXZlVG91Y2gudG9wID0gZS50b3VjaGVzWzBdLnBhZ2VZO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgb24oZC5zY3JvbGxlciwgXCJ0b3VjaG1vdmVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoZC5hY3RpdmVUb3VjaCkgZC5hY3RpdmVUb3VjaC5tb3ZlZCA9IHRydWU7XG4gICAgfSk7XG4gICAgb24oZC5zY3JvbGxlciwgXCJ0b3VjaGVuZFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgdG91Y2ggPSBkLmFjdGl2ZVRvdWNoO1xuICAgICAgaWYgKHRvdWNoICYmICFldmVudEluV2lkZ2V0KGQsIGUpICYmIHRvdWNoLmxlZnQgIT0gbnVsbCAmJlxuICAgICAgICAgICF0b3VjaC5tb3ZlZCAmJiBuZXcgRGF0ZSAtIHRvdWNoLnN0YXJ0IDwgMzAwKSB7XG4gICAgICAgIHZhciBwb3MgPSBjbS5jb29yZHNDaGFyKGQuYWN0aXZlVG91Y2gsIFwicGFnZVwiKSwgcmFuZ2U7XG4gICAgICAgIGlmICghdG91Y2gucHJldiB8fCBmYXJBd2F5KHRvdWNoLCB0b3VjaC5wcmV2KSkgLy8gU2luZ2xlIHRhcFxuICAgICAgICAgIHJhbmdlID0gbmV3IFJhbmdlKHBvcywgcG9zKTtcbiAgICAgICAgZWxzZSBpZiAoIXRvdWNoLnByZXYucHJldiB8fCBmYXJBd2F5KHRvdWNoLCB0b3VjaC5wcmV2LnByZXYpKSAvLyBEb3VibGUgdGFwXG4gICAgICAgICAgcmFuZ2UgPSBjbS5maW5kV29yZEF0KHBvcyk7XG4gICAgICAgIGVsc2UgLy8gVHJpcGxlIHRhcFxuICAgICAgICAgIHJhbmdlID0gbmV3IFJhbmdlKFBvcyhwb3MubGluZSwgMCksIGNsaXBQb3MoY20uZG9jLCBQb3MocG9zLmxpbmUgKyAxLCAwKSkpO1xuICAgICAgICBjbS5zZXRTZWxlY3Rpb24ocmFuZ2UuYW5jaG9yLCByYW5nZS5oZWFkKTtcbiAgICAgICAgY20uZm9jdXMoKTtcbiAgICAgICAgZV9wcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgIH1cbiAgICAgIGZpbmlzaFRvdWNoKCk7XG4gICAgfSk7XG4gICAgb24oZC5zY3JvbGxlciwgXCJ0b3VjaGNhbmNlbFwiLCBmaW5pc2hUb3VjaCk7XG5cbiAgICAvLyBTeW5jIHNjcm9sbGluZyBiZXR3ZWVuIGZha2Ugc2Nyb2xsYmFycyBhbmQgcmVhbCBzY3JvbGxhYmxlXG4gICAgLy8gYXJlYSwgZW5zdXJlIHZpZXdwb3J0IGlzIHVwZGF0ZWQgd2hlbiBzY3JvbGxpbmcuXG4gICAgb24oZC5zY3JvbGxlciwgXCJzY3JvbGxcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoZC5zY3JvbGxlci5jbGllbnRIZWlnaHQpIHtcbiAgICAgICAgc2V0U2Nyb2xsVG9wKGNtLCBkLnNjcm9sbGVyLnNjcm9sbFRvcCk7XG4gICAgICAgIHNldFNjcm9sbExlZnQoY20sIGQuc2Nyb2xsZXIuc2Nyb2xsTGVmdCwgdHJ1ZSk7XG4gICAgICAgIHNpZ25hbChjbSwgXCJzY3JvbGxcIiwgY20pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gTGlzdGVuIHRvIHdoZWVsIGV2ZW50cyBpbiBvcmRlciB0byB0cnkgYW5kIHVwZGF0ZSB0aGUgdmlld3BvcnQgb24gdGltZS5cbiAgICBvbihkLnNjcm9sbGVyLCBcIm1vdXNld2hlZWxcIiwgZnVuY3Rpb24oZSl7b25TY3JvbGxXaGVlbChjbSwgZSk7fSk7XG4gICAgb24oZC5zY3JvbGxlciwgXCJET01Nb3VzZVNjcm9sbFwiLCBmdW5jdGlvbihlKXtvblNjcm9sbFdoZWVsKGNtLCBlKTt9KTtcblxuICAgIC8vIFByZXZlbnQgd3JhcHBlciBmcm9tIGV2ZXIgc2Nyb2xsaW5nXG4gICAgb24oZC53cmFwcGVyLCBcInNjcm9sbFwiLCBmdW5jdGlvbigpIHsgZC53cmFwcGVyLnNjcm9sbFRvcCA9IGQud3JhcHBlci5zY3JvbGxMZWZ0ID0gMDsgfSk7XG5cbiAgICBkLmRyYWdGdW5jdGlvbnMgPSB7XG4gICAgICBlbnRlcjogZnVuY3Rpb24oZSkge2lmICghc2lnbmFsRE9NRXZlbnQoY20sIGUpKSBlX3N0b3AoZSk7fSxcbiAgICAgIG92ZXI6IGZ1bmN0aW9uKGUpIHtpZiAoIXNpZ25hbERPTUV2ZW50KGNtLCBlKSkgeyBvbkRyYWdPdmVyKGNtLCBlKTsgZV9zdG9wKGUpOyB9fSxcbiAgICAgIHN0YXJ0OiBmdW5jdGlvbihlKXtvbkRyYWdTdGFydChjbSwgZSk7fSxcbiAgICAgIGRyb3A6IG9wZXJhdGlvbihjbSwgb25Ecm9wKSxcbiAgICAgIGxlYXZlOiBmdW5jdGlvbigpIHtjbGVhckRyYWdDdXJzb3IoY20pO31cbiAgICB9O1xuXG4gICAgdmFyIGlucCA9IGQuaW5wdXQuZ2V0RmllbGQoKTtcbiAgICBvbihpbnAsIFwia2V5dXBcIiwgZnVuY3Rpb24oZSkgeyBvbktleVVwLmNhbGwoY20sIGUpOyB9KTtcbiAgICBvbihpbnAsIFwia2V5ZG93blwiLCBvcGVyYXRpb24oY20sIG9uS2V5RG93bikpO1xuICAgIG9uKGlucCwgXCJrZXlwcmVzc1wiLCBvcGVyYXRpb24oY20sIG9uS2V5UHJlc3MpKTtcbiAgICBvbihpbnAsIFwiZm9jdXNcIiwgYmluZChvbkZvY3VzLCBjbSkpO1xuICAgIG9uKGlucCwgXCJibHVyXCIsIGJpbmQob25CbHVyLCBjbSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZHJhZ0Ryb3BDaGFuZ2VkKGNtLCB2YWx1ZSwgb2xkKSB7XG4gICAgdmFyIHdhc09uID0gb2xkICYmIG9sZCAhPSBDb2RlTWlycm9yLkluaXQ7XG4gICAgaWYgKCF2YWx1ZSAhPSAhd2FzT24pIHtcbiAgICAgIHZhciBmdW5jcyA9IGNtLmRpc3BsYXkuZHJhZ0Z1bmN0aW9ucztcbiAgICAgIHZhciB0b2dnbGUgPSB2YWx1ZSA/IG9uIDogb2ZmO1xuICAgICAgdG9nZ2xlKGNtLmRpc3BsYXkuc2Nyb2xsZXIsIFwiZHJhZ3N0YXJ0XCIsIGZ1bmNzLnN0YXJ0KTtcbiAgICAgIHRvZ2dsZShjbS5kaXNwbGF5LnNjcm9sbGVyLCBcImRyYWdlbnRlclwiLCBmdW5jcy5lbnRlcik7XG4gICAgICB0b2dnbGUoY20uZGlzcGxheS5zY3JvbGxlciwgXCJkcmFnb3ZlclwiLCBmdW5jcy5vdmVyKTtcbiAgICAgIHRvZ2dsZShjbS5kaXNwbGF5LnNjcm9sbGVyLCBcImRyYWdsZWF2ZVwiLCBmdW5jcy5sZWF2ZSk7XG4gICAgICB0b2dnbGUoY20uZGlzcGxheS5zY3JvbGxlciwgXCJkcm9wXCIsIGZ1bmNzLmRyb3ApO1xuICAgIH1cbiAgfVxuXG4gIC8vIENhbGxlZCB3aGVuIHRoZSB3aW5kb3cgcmVzaXplc1xuICBmdW5jdGlvbiBvblJlc2l6ZShjbSkge1xuICAgIHZhciBkID0gY20uZGlzcGxheTtcbiAgICBpZiAoZC5sYXN0V3JhcEhlaWdodCA9PSBkLndyYXBwZXIuY2xpZW50SGVpZ2h0ICYmIGQubGFzdFdyYXBXaWR0aCA9PSBkLndyYXBwZXIuY2xpZW50V2lkdGgpXG4gICAgICByZXR1cm47XG4gICAgLy8gTWlnaHQgYmUgYSB0ZXh0IHNjYWxpbmcgb3BlcmF0aW9uLCBjbGVhciBzaXplIGNhY2hlcy5cbiAgICBkLmNhY2hlZENoYXJXaWR0aCA9IGQuY2FjaGVkVGV4dEhlaWdodCA9IGQuY2FjaGVkUGFkZGluZ0ggPSBudWxsO1xuICAgIGQuc2Nyb2xsYmFyc0NsaXBwZWQgPSBmYWxzZTtcbiAgICBjbS5zZXRTaXplKCk7XG4gIH1cblxuICAvLyBNT1VTRSBFVkVOVFNcblxuICAvLyBSZXR1cm4gdHJ1ZSB3aGVuIHRoZSBnaXZlbiBtb3VzZSBldmVudCBoYXBwZW5lZCBpbiBhIHdpZGdldFxuICBmdW5jdGlvbiBldmVudEluV2lkZ2V0KGRpc3BsYXksIGUpIHtcbiAgICBmb3IgKHZhciBuID0gZV90YXJnZXQoZSk7IG4gIT0gZGlzcGxheS53cmFwcGVyOyBuID0gbi5wYXJlbnROb2RlKSB7XG4gICAgICBpZiAoIW4gfHwgKG4ubm9kZVR5cGUgPT0gMSAmJiBuLmdldEF0dHJpYnV0ZShcImNtLWlnbm9yZS1ldmVudHNcIikgPT0gXCJ0cnVlXCIpIHx8XG4gICAgICAgICAgKG4ucGFyZW50Tm9kZSA9PSBkaXNwbGF5LnNpemVyICYmIG4gIT0gZGlzcGxheS5tb3ZlcikpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8vIEdpdmVuIGEgbW91c2UgZXZlbnQsIGZpbmQgdGhlIGNvcnJlc3BvbmRpbmcgcG9zaXRpb24uIElmIGxpYmVyYWxcbiAgLy8gaXMgZmFsc2UsIGl0IGNoZWNrcyB3aGV0aGVyIGEgZ3V0dGVyIG9yIHNjcm9sbGJhciB3YXMgY2xpY2tlZCxcbiAgLy8gYW5kIHJldHVybnMgbnVsbCBpZiBpdCB3YXMuIGZvclJlY3QgaXMgdXNlZCBieSByZWN0YW5ndWxhclxuICAvLyBzZWxlY3Rpb25zLCBhbmQgdHJpZXMgdG8gZXN0aW1hdGUgYSBjaGFyYWN0ZXIgcG9zaXRpb24gZXZlbiBmb3JcbiAgLy8gY29vcmRpbmF0ZXMgYmV5b25kIHRoZSByaWdodCBvZiB0aGUgdGV4dC5cbiAgZnVuY3Rpb24gcG9zRnJvbU1vdXNlKGNtLCBlLCBsaWJlcmFsLCBmb3JSZWN0KSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIGlmICghbGliZXJhbCAmJiBlX3RhcmdldChlKS5nZXRBdHRyaWJ1dGUoXCJjbS1ub3QtY29udGVudFwiKSA9PSBcInRydWVcIikgcmV0dXJuIG51bGw7XG5cbiAgICB2YXIgeCwgeSwgc3BhY2UgPSBkaXNwbGF5LmxpbmVTcGFjZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAvLyBGYWlscyB1bnByZWRpY3RhYmx5IG9uIElFWzY3XSB3aGVuIG1vdXNlIGlzIGRyYWdnZWQgYXJvdW5kIHF1aWNrbHkuXG4gICAgdHJ5IHsgeCA9IGUuY2xpZW50WCAtIHNwYWNlLmxlZnQ7IHkgPSBlLmNsaWVudFkgLSBzcGFjZS50b3A7IH1cbiAgICBjYXRjaCAoZSkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHZhciBjb29yZHMgPSBjb29yZHNDaGFyKGNtLCB4LCB5KSwgbGluZTtcbiAgICBpZiAoZm9yUmVjdCAmJiBjb29yZHMueFJlbCA9PSAxICYmIChsaW5lID0gZ2V0TGluZShjbS5kb2MsIGNvb3Jkcy5saW5lKS50ZXh0KS5sZW5ndGggPT0gY29vcmRzLmNoKSB7XG4gICAgICB2YXIgY29sRGlmZiA9IGNvdW50Q29sdW1uKGxpbmUsIGxpbmUubGVuZ3RoLCBjbS5vcHRpb25zLnRhYlNpemUpIC0gbGluZS5sZW5ndGg7XG4gICAgICBjb29yZHMgPSBQb3MoY29vcmRzLmxpbmUsIE1hdGgubWF4KDAsIE1hdGgucm91bmQoKHggLSBwYWRkaW5nSChjbS5kaXNwbGF5KS5sZWZ0KSAvIGNoYXJXaWR0aChjbS5kaXNwbGF5KSkgLSBjb2xEaWZmKSk7XG4gICAgfVxuICAgIHJldHVybiBjb29yZHM7XG4gIH1cblxuICAvLyBBIG1vdXNlIGRvd24gY2FuIGJlIGEgc2luZ2xlIGNsaWNrLCBkb3VibGUgY2xpY2ssIHRyaXBsZSBjbGljayxcbiAgLy8gc3RhcnQgb2Ygc2VsZWN0aW9uIGRyYWcsIHN0YXJ0IG9mIHRleHQgZHJhZywgbmV3IGN1cnNvclxuICAvLyAoY3RybC1jbGljayksIHJlY3RhbmdsZSBkcmFnIChhbHQtZHJhZyksIG9yIHh3aW5cbiAgLy8gbWlkZGxlLWNsaWNrLXBhc3RlLiBPciBpdCBtaWdodCBiZSBhIGNsaWNrIG9uIHNvbWV0aGluZyB3ZSBzaG91bGRcbiAgLy8gbm90IGludGVyZmVyZSB3aXRoLCBzdWNoIGFzIGEgc2Nyb2xsYmFyIG9yIHdpZGdldC5cbiAgZnVuY3Rpb24gb25Nb3VzZURvd24oZSkge1xuICAgIHZhciBjbSA9IHRoaXMsIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIGlmIChkaXNwbGF5LmFjdGl2ZVRvdWNoICYmIGRpc3BsYXkuaW5wdXQuc3VwcG9ydHNUb3VjaCgpIHx8IHNpZ25hbERPTUV2ZW50KGNtLCBlKSkgcmV0dXJuO1xuICAgIGRpc3BsYXkuc2hpZnQgPSBlLnNoaWZ0S2V5O1xuXG4gICAgaWYgKGV2ZW50SW5XaWRnZXQoZGlzcGxheSwgZSkpIHtcbiAgICAgIGlmICghd2Via2l0KSB7XG4gICAgICAgIC8vIEJyaWVmbHkgdHVybiBvZmYgZHJhZ2dhYmlsaXR5LCB0byBhbGxvdyB3aWRnZXRzIHRvIGRvXG4gICAgICAgIC8vIG5vcm1hbCBkcmFnZ2luZyB0aGluZ3MuXG4gICAgICAgIGRpc3BsYXkuc2Nyb2xsZXIuZHJhZ2dhYmxlID0gZmFsc2U7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtkaXNwbGF5LnNjcm9sbGVyLmRyYWdnYWJsZSA9IHRydWU7fSwgMTAwKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGNsaWNrSW5HdXR0ZXIoY20sIGUpKSByZXR1cm47XG4gICAgdmFyIHN0YXJ0ID0gcG9zRnJvbU1vdXNlKGNtLCBlKTtcbiAgICB3aW5kb3cuZm9jdXMoKTtcblxuICAgIHN3aXRjaCAoZV9idXR0b24oZSkpIHtcbiAgICBjYXNlIDE6XG4gICAgICAvLyAjMzI2MTogbWFrZSBzdXJlLCB0aGF0IHdlJ3JlIG5vdCBzdGFydGluZyBhIHNlY29uZCBzZWxlY3Rpb25cbiAgICAgIGlmIChjbS5zdGF0ZS5zZWxlY3RpbmdUZXh0KVxuICAgICAgICBjbS5zdGF0ZS5zZWxlY3RpbmdUZXh0KGUpO1xuICAgICAgZWxzZSBpZiAoc3RhcnQpXG4gICAgICAgIGxlZnRCdXR0b25Eb3duKGNtLCBlLCBzdGFydCk7XG4gICAgICBlbHNlIGlmIChlX3RhcmdldChlKSA9PSBkaXNwbGF5LnNjcm9sbGVyKVxuICAgICAgICBlX3ByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAyOlxuICAgICAgaWYgKHdlYmtpdCkgY20uc3RhdGUubGFzdE1pZGRsZURvd24gPSArbmV3IERhdGU7XG4gICAgICBpZiAoc3RhcnQpIGV4dGVuZFNlbGVjdGlvbihjbS5kb2MsIHN0YXJ0KTtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7ZGlzcGxheS5pbnB1dC5mb2N1cygpO30sIDIwKTtcbiAgICAgIGVfcHJldmVudERlZmF1bHQoZSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM6XG4gICAgICBpZiAoY2FwdHVyZVJpZ2h0Q2xpY2spIG9uQ29udGV4dE1lbnUoY20sIGUpO1xuICAgICAgZWxzZSBkZWxheUJsdXJFdmVudChjbSk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICB2YXIgbGFzdENsaWNrLCBsYXN0RG91YmxlQ2xpY2s7XG4gIGZ1bmN0aW9uIGxlZnRCdXR0b25Eb3duKGNtLCBlLCBzdGFydCkge1xuICAgIGlmIChpZSkgc2V0VGltZW91dChiaW5kKGVuc3VyZUZvY3VzLCBjbSksIDApO1xuICAgIGVsc2UgY20uY3VyT3AuZm9jdXMgPSBhY3RpdmVFbHQoKTtcblxuICAgIHZhciBub3cgPSArbmV3IERhdGUsIHR5cGU7XG4gICAgaWYgKGxhc3REb3VibGVDbGljayAmJiBsYXN0RG91YmxlQ2xpY2sudGltZSA+IG5vdyAtIDQwMCAmJiBjbXAobGFzdERvdWJsZUNsaWNrLnBvcywgc3RhcnQpID09IDApIHtcbiAgICAgIHR5cGUgPSBcInRyaXBsZVwiO1xuICAgIH0gZWxzZSBpZiAobGFzdENsaWNrICYmIGxhc3RDbGljay50aW1lID4gbm93IC0gNDAwICYmIGNtcChsYXN0Q2xpY2sucG9zLCBzdGFydCkgPT0gMCkge1xuICAgICAgdHlwZSA9IFwiZG91YmxlXCI7XG4gICAgICBsYXN0RG91YmxlQ2xpY2sgPSB7dGltZTogbm93LCBwb3M6IHN0YXJ0fTtcbiAgICB9IGVsc2Uge1xuICAgICAgdHlwZSA9IFwic2luZ2xlXCI7XG4gICAgICBsYXN0Q2xpY2sgPSB7dGltZTogbm93LCBwb3M6IHN0YXJ0fTtcbiAgICB9XG5cbiAgICB2YXIgc2VsID0gY20uZG9jLnNlbCwgbW9kaWZpZXIgPSBtYWMgPyBlLm1ldGFLZXkgOiBlLmN0cmxLZXksIGNvbnRhaW5lZDtcbiAgICBpZiAoY20ub3B0aW9ucy5kcmFnRHJvcCAmJiBkcmFnQW5kRHJvcCAmJiAhaXNSZWFkT25seShjbSkgJiZcbiAgICAgICAgdHlwZSA9PSBcInNpbmdsZVwiICYmIChjb250YWluZWQgPSBzZWwuY29udGFpbnMoc3RhcnQpKSA+IC0xICYmXG4gICAgICAgIChjbXAoKGNvbnRhaW5lZCA9IHNlbC5yYW5nZXNbY29udGFpbmVkXSkuZnJvbSgpLCBzdGFydCkgPCAwIHx8IHN0YXJ0LnhSZWwgPiAwKSAmJlxuICAgICAgICAoY21wKGNvbnRhaW5lZC50bygpLCBzdGFydCkgPiAwIHx8IHN0YXJ0LnhSZWwgPCAwKSlcbiAgICAgIGxlZnRCdXR0b25TdGFydERyYWcoY20sIGUsIHN0YXJ0LCBtb2RpZmllcik7XG4gICAgZWxzZVxuICAgICAgbGVmdEJ1dHRvblNlbGVjdChjbSwgZSwgc3RhcnQsIHR5cGUsIG1vZGlmaWVyKTtcbiAgfVxuXG4gIC8vIFN0YXJ0IGEgdGV4dCBkcmFnLiBXaGVuIGl0IGVuZHMsIHNlZSBpZiBhbnkgZHJhZ2dpbmcgYWN0dWFsbHlcbiAgLy8gaGFwcGVuLCBhbmQgdHJlYXQgYXMgYSBjbGljayBpZiBpdCBkaWRuJ3QuXG4gIGZ1bmN0aW9uIGxlZnRCdXR0b25TdGFydERyYWcoY20sIGUsIHN0YXJ0LCBtb2RpZmllcikge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgc3RhcnRUaW1lID0gK25ldyBEYXRlO1xuICAgIHZhciBkcmFnRW5kID0gb3BlcmF0aW9uKGNtLCBmdW5jdGlvbihlMikge1xuICAgICAgaWYgKHdlYmtpdCkgZGlzcGxheS5zY3JvbGxlci5kcmFnZ2FibGUgPSBmYWxzZTtcbiAgICAgIGNtLnN0YXRlLmRyYWdnaW5nVGV4dCA9IGZhbHNlO1xuICAgICAgb2ZmKGRvY3VtZW50LCBcIm1vdXNldXBcIiwgZHJhZ0VuZCk7XG4gICAgICBvZmYoZGlzcGxheS5zY3JvbGxlciwgXCJkcm9wXCIsIGRyYWdFbmQpO1xuICAgICAgaWYgKE1hdGguYWJzKGUuY2xpZW50WCAtIGUyLmNsaWVudFgpICsgTWF0aC5hYnMoZS5jbGllbnRZIC0gZTIuY2xpZW50WSkgPCAxMCkge1xuICAgICAgICBlX3ByZXZlbnREZWZhdWx0KGUyKTtcbiAgICAgICAgaWYgKCFtb2RpZmllciAmJiArbmV3IERhdGUgLSAyMDAgPCBzdGFydFRpbWUpXG4gICAgICAgICAgZXh0ZW5kU2VsZWN0aW9uKGNtLmRvYywgc3RhcnQpO1xuICAgICAgICAvLyBXb3JrIGFyb3VuZCB1bmV4cGxhaW5hYmxlIGZvY3VzIHByb2JsZW0gaW4gSUU5ICgjMjEyNykgYW5kIENocm9tZSAoIzMwODEpXG4gICAgICAgIGlmICh3ZWJraXQgfHwgaWUgJiYgaWVfdmVyc2lvbiA9PSA5KVxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7ZG9jdW1lbnQuYm9keS5mb2N1cygpOyBkaXNwbGF5LmlucHV0LmZvY3VzKCk7fSwgMjApO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgZGlzcGxheS5pbnB1dC5mb2N1cygpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIC8vIExldCB0aGUgZHJhZyBoYW5kbGVyIGhhbmRsZSB0aGlzLlxuICAgIGlmICh3ZWJraXQpIGRpc3BsYXkuc2Nyb2xsZXIuZHJhZ2dhYmxlID0gdHJ1ZTtcbiAgICBjbS5zdGF0ZS5kcmFnZ2luZ1RleHQgPSBkcmFnRW5kO1xuICAgIC8vIElFJ3MgYXBwcm9hY2ggdG8gZHJhZ2dhYmxlXG4gICAgaWYgKGRpc3BsYXkuc2Nyb2xsZXIuZHJhZ0Ryb3ApIGRpc3BsYXkuc2Nyb2xsZXIuZHJhZ0Ryb3AoKTtcbiAgICBvbihkb2N1bWVudCwgXCJtb3VzZXVwXCIsIGRyYWdFbmQpO1xuICAgIG9uKGRpc3BsYXkuc2Nyb2xsZXIsIFwiZHJvcFwiLCBkcmFnRW5kKTtcbiAgfVxuXG4gIC8vIE5vcm1hbCBzZWxlY3Rpb24sIGFzIG9wcG9zZWQgdG8gdGV4dCBkcmFnZ2luZy5cbiAgZnVuY3Rpb24gbGVmdEJ1dHRvblNlbGVjdChjbSwgZSwgc3RhcnQsIHR5cGUsIGFkZE5ldykge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgZG9jID0gY20uZG9jO1xuICAgIGVfcHJldmVudERlZmF1bHQoZSk7XG5cbiAgICB2YXIgb3VyUmFuZ2UsIG91ckluZGV4LCBzdGFydFNlbCA9IGRvYy5zZWwsIHJhbmdlcyA9IHN0YXJ0U2VsLnJhbmdlcztcbiAgICBpZiAoYWRkTmV3ICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICBvdXJJbmRleCA9IGRvYy5zZWwuY29udGFpbnMoc3RhcnQpO1xuICAgICAgaWYgKG91ckluZGV4ID4gLTEpXG4gICAgICAgIG91clJhbmdlID0gcmFuZ2VzW291ckluZGV4XTtcbiAgICAgIGVsc2VcbiAgICAgICAgb3VyUmFuZ2UgPSBuZXcgUmFuZ2Uoc3RhcnQsIHN0YXJ0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3VyUmFuZ2UgPSBkb2Muc2VsLnByaW1hcnkoKTtcbiAgICAgIG91ckluZGV4ID0gZG9jLnNlbC5wcmltSW5kZXg7XG4gICAgfVxuXG4gICAgaWYgKGUuYWx0S2V5KSB7XG4gICAgICB0eXBlID0gXCJyZWN0XCI7XG4gICAgICBpZiAoIWFkZE5ldykgb3VyUmFuZ2UgPSBuZXcgUmFuZ2Uoc3RhcnQsIHN0YXJ0KTtcbiAgICAgIHN0YXJ0ID0gcG9zRnJvbU1vdXNlKGNtLCBlLCB0cnVlLCB0cnVlKTtcbiAgICAgIG91ckluZGV4ID0gLTE7XG4gICAgfSBlbHNlIGlmICh0eXBlID09IFwiZG91YmxlXCIpIHtcbiAgICAgIHZhciB3b3JkID0gY20uZmluZFdvcmRBdChzdGFydCk7XG4gICAgICBpZiAoY20uZGlzcGxheS5zaGlmdCB8fCBkb2MuZXh0ZW5kKVxuICAgICAgICBvdXJSYW5nZSA9IGV4dGVuZFJhbmdlKGRvYywgb3VyUmFuZ2UsIHdvcmQuYW5jaG9yLCB3b3JkLmhlYWQpO1xuICAgICAgZWxzZVxuICAgICAgICBvdXJSYW5nZSA9IHdvcmQ7XG4gICAgfSBlbHNlIGlmICh0eXBlID09IFwidHJpcGxlXCIpIHtcbiAgICAgIHZhciBsaW5lID0gbmV3IFJhbmdlKFBvcyhzdGFydC5saW5lLCAwKSwgY2xpcFBvcyhkb2MsIFBvcyhzdGFydC5saW5lICsgMSwgMCkpKTtcbiAgICAgIGlmIChjbS5kaXNwbGF5LnNoaWZ0IHx8IGRvYy5leHRlbmQpXG4gICAgICAgIG91clJhbmdlID0gZXh0ZW5kUmFuZ2UoZG9jLCBvdXJSYW5nZSwgbGluZS5hbmNob3IsIGxpbmUuaGVhZCk7XG4gICAgICBlbHNlXG4gICAgICAgIG91clJhbmdlID0gbGluZTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3VyUmFuZ2UgPSBleHRlbmRSYW5nZShkb2MsIG91clJhbmdlLCBzdGFydCk7XG4gICAgfVxuXG4gICAgaWYgKCFhZGROZXcpIHtcbiAgICAgIG91ckluZGV4ID0gMDtcbiAgICAgIHNldFNlbGVjdGlvbihkb2MsIG5ldyBTZWxlY3Rpb24oW291clJhbmdlXSwgMCksIHNlbF9tb3VzZSk7XG4gICAgICBzdGFydFNlbCA9IGRvYy5zZWw7XG4gICAgfSBlbHNlIGlmIChvdXJJbmRleCA9PSAtMSkge1xuICAgICAgb3VySW5kZXggPSByYW5nZXMubGVuZ3RoO1xuICAgICAgc2V0U2VsZWN0aW9uKGRvYywgbm9ybWFsaXplU2VsZWN0aW9uKHJhbmdlcy5jb25jYXQoW291clJhbmdlXSksIG91ckluZGV4KSxcbiAgICAgICAgICAgICAgICAgICB7c2Nyb2xsOiBmYWxzZSwgb3JpZ2luOiBcIiptb3VzZVwifSk7XG4gICAgfSBlbHNlIGlmIChyYW5nZXMubGVuZ3RoID4gMSAmJiByYW5nZXNbb3VySW5kZXhdLmVtcHR5KCkgJiYgdHlwZSA9PSBcInNpbmdsZVwiICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICBzZXRTZWxlY3Rpb24oZG9jLCBub3JtYWxpemVTZWxlY3Rpb24ocmFuZ2VzLnNsaWNlKDAsIG91ckluZGV4KS5jb25jYXQocmFuZ2VzLnNsaWNlKG91ckluZGV4ICsgMSkpLCAwKSxcbiAgICAgICAgICAgICAgICAgICB7c2Nyb2xsOiBmYWxzZSwgb3JpZ2luOiBcIiptb3VzZVwifSk7XG4gICAgICBzdGFydFNlbCA9IGRvYy5zZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcGxhY2VPbmVTZWxlY3Rpb24oZG9jLCBvdXJJbmRleCwgb3VyUmFuZ2UsIHNlbF9tb3VzZSk7XG4gICAgfVxuXG4gICAgdmFyIGxhc3RQb3MgPSBzdGFydDtcbiAgICBmdW5jdGlvbiBleHRlbmRUbyhwb3MpIHtcbiAgICAgIGlmIChjbXAobGFzdFBvcywgcG9zKSA9PSAwKSByZXR1cm47XG4gICAgICBsYXN0UG9zID0gcG9zO1xuXG4gICAgICBpZiAodHlwZSA9PSBcInJlY3RcIikge1xuICAgICAgICB2YXIgcmFuZ2VzID0gW10sIHRhYlNpemUgPSBjbS5vcHRpb25zLnRhYlNpemU7XG4gICAgICAgIHZhciBzdGFydENvbCA9IGNvdW50Q29sdW1uKGdldExpbmUoZG9jLCBzdGFydC5saW5lKS50ZXh0LCBzdGFydC5jaCwgdGFiU2l6ZSk7XG4gICAgICAgIHZhciBwb3NDb2wgPSBjb3VudENvbHVtbihnZXRMaW5lKGRvYywgcG9zLmxpbmUpLnRleHQsIHBvcy5jaCwgdGFiU2l6ZSk7XG4gICAgICAgIHZhciBsZWZ0ID0gTWF0aC5taW4oc3RhcnRDb2wsIHBvc0NvbCksIHJpZ2h0ID0gTWF0aC5tYXgoc3RhcnRDb2wsIHBvc0NvbCk7XG4gICAgICAgIGZvciAodmFyIGxpbmUgPSBNYXRoLm1pbihzdGFydC5saW5lLCBwb3MubGluZSksIGVuZCA9IE1hdGgubWluKGNtLmxhc3RMaW5lKCksIE1hdGgubWF4KHN0YXJ0LmxpbmUsIHBvcy5saW5lKSk7XG4gICAgICAgICAgICAgbGluZSA8PSBlbmQ7IGxpbmUrKykge1xuICAgICAgICAgIHZhciB0ZXh0ID0gZ2V0TGluZShkb2MsIGxpbmUpLnRleHQsIGxlZnRQb3MgPSBmaW5kQ29sdW1uKHRleHQsIGxlZnQsIHRhYlNpemUpO1xuICAgICAgICAgIGlmIChsZWZ0ID09IHJpZ2h0KVxuICAgICAgICAgICAgcmFuZ2VzLnB1c2gobmV3IFJhbmdlKFBvcyhsaW5lLCBsZWZ0UG9zKSwgUG9zKGxpbmUsIGxlZnRQb3MpKSk7XG4gICAgICAgICAgZWxzZSBpZiAodGV4dC5sZW5ndGggPiBsZWZ0UG9zKVxuICAgICAgICAgICAgcmFuZ2VzLnB1c2gobmV3IFJhbmdlKFBvcyhsaW5lLCBsZWZ0UG9zKSwgUG9zKGxpbmUsIGZpbmRDb2x1bW4odGV4dCwgcmlnaHQsIHRhYlNpemUpKSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmFuZ2VzLmxlbmd0aCkgcmFuZ2VzLnB1c2gobmV3IFJhbmdlKHN0YXJ0LCBzdGFydCkpO1xuICAgICAgICBzZXRTZWxlY3Rpb24oZG9jLCBub3JtYWxpemVTZWxlY3Rpb24oc3RhcnRTZWwucmFuZ2VzLnNsaWNlKDAsIG91ckluZGV4KS5jb25jYXQocmFuZ2VzKSwgb3VySW5kZXgpLFxuICAgICAgICAgICAgICAgICAgICAge29yaWdpbjogXCIqbW91c2VcIiwgc2Nyb2xsOiBmYWxzZX0pO1xuICAgICAgICBjbS5zY3JvbGxJbnRvVmlldyhwb3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG9sZFJhbmdlID0gb3VyUmFuZ2U7XG4gICAgICAgIHZhciBhbmNob3IgPSBvbGRSYW5nZS5hbmNob3IsIGhlYWQgPSBwb3M7XG4gICAgICAgIGlmICh0eXBlICE9IFwic2luZ2xlXCIpIHtcbiAgICAgICAgICBpZiAodHlwZSA9PSBcImRvdWJsZVwiKVxuICAgICAgICAgICAgdmFyIHJhbmdlID0gY20uZmluZFdvcmRBdChwb3MpO1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHZhciByYW5nZSA9IG5ldyBSYW5nZShQb3MocG9zLmxpbmUsIDApLCBjbGlwUG9zKGRvYywgUG9zKHBvcy5saW5lICsgMSwgMCkpKTtcbiAgICAgICAgICBpZiAoY21wKHJhbmdlLmFuY2hvciwgYW5jaG9yKSA+IDApIHtcbiAgICAgICAgICAgIGhlYWQgPSByYW5nZS5oZWFkO1xuICAgICAgICAgICAgYW5jaG9yID0gbWluUG9zKG9sZFJhbmdlLmZyb20oKSwgcmFuZ2UuYW5jaG9yKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaGVhZCA9IHJhbmdlLmFuY2hvcjtcbiAgICAgICAgICAgIGFuY2hvciA9IG1heFBvcyhvbGRSYW5nZS50bygpLCByYW5nZS5oZWFkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJhbmdlcyA9IHN0YXJ0U2VsLnJhbmdlcy5zbGljZSgwKTtcbiAgICAgICAgcmFuZ2VzW291ckluZGV4XSA9IG5ldyBSYW5nZShjbGlwUG9zKGRvYywgYW5jaG9yKSwgaGVhZCk7XG4gICAgICAgIHNldFNlbGVjdGlvbihkb2MsIG5vcm1hbGl6ZVNlbGVjdGlvbihyYW5nZXMsIG91ckluZGV4KSwgc2VsX21vdXNlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZWRpdG9yU2l6ZSA9IGRpc3BsYXkud3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAvLyBVc2VkIHRvIGVuc3VyZSB0aW1lb3V0IHJlLXRyaWVzIGRvbid0IGZpcmUgd2hlbiBhbm90aGVyIGV4dGVuZFxuICAgIC8vIGhhcHBlbmVkIGluIHRoZSBtZWFudGltZSAoY2xlYXJUaW1lb3V0IGlzbid0IHJlbGlhYmxlIC0tIGF0XG4gICAgLy8gbGVhc3Qgb24gQ2hyb21lLCB0aGUgdGltZW91dHMgc3RpbGwgaGFwcGVuIGV2ZW4gd2hlbiBjbGVhcmVkLFxuICAgIC8vIGlmIHRoZSBjbGVhciBoYXBwZW5zIGFmdGVyIHRoZWlyIHNjaGVkdWxlZCBmaXJpbmcgdGltZSkuXG4gICAgdmFyIGNvdW50ZXIgPSAwO1xuXG4gICAgZnVuY3Rpb24gZXh0ZW5kKGUpIHtcbiAgICAgIHZhciBjdXJDb3VudCA9ICsrY291bnRlcjtcbiAgICAgIHZhciBjdXIgPSBwb3NGcm9tTW91c2UoY20sIGUsIHRydWUsIHR5cGUgPT0gXCJyZWN0XCIpO1xuICAgICAgaWYgKCFjdXIpIHJldHVybjtcbiAgICAgIGlmIChjbXAoY3VyLCBsYXN0UG9zKSAhPSAwKSB7XG4gICAgICAgIGNtLmN1ck9wLmZvY3VzID0gYWN0aXZlRWx0KCk7XG4gICAgICAgIGV4dGVuZFRvKGN1cik7XG4gICAgICAgIHZhciB2aXNpYmxlID0gdmlzaWJsZUxpbmVzKGRpc3BsYXksIGRvYyk7XG4gICAgICAgIGlmIChjdXIubGluZSA+PSB2aXNpYmxlLnRvIHx8IGN1ci5saW5lIDwgdmlzaWJsZS5mcm9tKVxuICAgICAgICAgIHNldFRpbWVvdXQob3BlcmF0aW9uKGNtLCBmdW5jdGlvbigpe2lmIChjb3VudGVyID09IGN1ckNvdW50KSBleHRlbmQoZSk7fSksIDE1MCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgb3V0c2lkZSA9IGUuY2xpZW50WSA8IGVkaXRvclNpemUudG9wID8gLTIwIDogZS5jbGllbnRZID4gZWRpdG9yU2l6ZS5ib3R0b20gPyAyMCA6IDA7XG4gICAgICAgIGlmIChvdXRzaWRlKSBzZXRUaW1lb3V0KG9wZXJhdGlvbihjbSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKGNvdW50ZXIgIT0gY3VyQ291bnQpIHJldHVybjtcbiAgICAgICAgICBkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcCArPSBvdXRzaWRlO1xuICAgICAgICAgIGV4dGVuZChlKTtcbiAgICAgICAgfSksIDUwKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkb25lKGUpIHtcbiAgICAgIGNtLnN0YXRlLnNlbGVjdGluZ1RleHQgPSBmYWxzZTtcbiAgICAgIGNvdW50ZXIgPSBJbmZpbml0eTtcbiAgICAgIGVfcHJldmVudERlZmF1bHQoZSk7XG4gICAgICBkaXNwbGF5LmlucHV0LmZvY3VzKCk7XG4gICAgICBvZmYoZG9jdW1lbnQsIFwibW91c2Vtb3ZlXCIsIG1vdmUpO1xuICAgICAgb2ZmKGRvY3VtZW50LCBcIm1vdXNldXBcIiwgdXApO1xuICAgICAgZG9jLmhpc3RvcnkubGFzdFNlbE9yaWdpbiA9IG51bGw7XG4gICAgfVxuXG4gICAgdmFyIG1vdmUgPSBvcGVyYXRpb24oY20sIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmICghZV9idXR0b24oZSkpIGRvbmUoZSk7XG4gICAgICBlbHNlIGV4dGVuZChlKTtcbiAgICB9KTtcbiAgICB2YXIgdXAgPSBvcGVyYXRpb24oY20sIGRvbmUpO1xuICAgIGNtLnN0YXRlLnNlbGVjdGluZ1RleHQgPSB1cDtcbiAgICBvbihkb2N1bWVudCwgXCJtb3VzZW1vdmVcIiwgbW92ZSk7XG4gICAgb24oZG9jdW1lbnQsIFwibW91c2V1cFwiLCB1cCk7XG4gIH1cblxuICAvLyBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gZXZlbnQgaGFwcGVuZWQgaW4gdGhlIGd1dHRlciwgYW5kIGZpcmVzIHRoZVxuICAvLyBoYW5kbGVycyBmb3IgdGhlIGNvcnJlc3BvbmRpbmcgZXZlbnQuXG4gIGZ1bmN0aW9uIGd1dHRlckV2ZW50KGNtLCBlLCB0eXBlLCBwcmV2ZW50LCBzaWduYWxmbikge1xuICAgIHRyeSB7IHZhciBtWCA9IGUuY2xpZW50WCwgbVkgPSBlLmNsaWVudFk7IH1cbiAgICBjYXRjaChlKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIGlmIChtWCA+PSBNYXRoLmZsb29yKGNtLmRpc3BsYXkuZ3V0dGVycy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodCkpIHJldHVybiBmYWxzZTtcbiAgICBpZiAocHJldmVudCkgZV9wcmV2ZW50RGVmYXVsdChlKTtcblxuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICB2YXIgbGluZUJveCA9IGRpc3BsYXkubGluZURpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgIGlmIChtWSA+IGxpbmVCb3guYm90dG9tIHx8ICFoYXNIYW5kbGVyKGNtLCB0eXBlKSkgcmV0dXJuIGVfZGVmYXVsdFByZXZlbnRlZChlKTtcbiAgICBtWSAtPSBsaW5lQm94LnRvcCAtIGRpc3BsYXkudmlld09mZnNldDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY20ub3B0aW9ucy5ndXR0ZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgZyA9IGRpc3BsYXkuZ3V0dGVycy5jaGlsZE5vZGVzW2ldO1xuICAgICAgaWYgKGcgJiYgZy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodCA+PSBtWCkge1xuICAgICAgICB2YXIgbGluZSA9IGxpbmVBdEhlaWdodChjbS5kb2MsIG1ZKTtcbiAgICAgICAgdmFyIGd1dHRlciA9IGNtLm9wdGlvbnMuZ3V0dGVyc1tpXTtcbiAgICAgICAgc2lnbmFsZm4oY20sIHR5cGUsIGNtLCBsaW5lLCBndXR0ZXIsIGUpO1xuICAgICAgICByZXR1cm4gZV9kZWZhdWx0UHJldmVudGVkKGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNsaWNrSW5HdXR0ZXIoY20sIGUpIHtcbiAgICByZXR1cm4gZ3V0dGVyRXZlbnQoY20sIGUsIFwiZ3V0dGVyQ2xpY2tcIiwgdHJ1ZSwgc2lnbmFsTGF0ZXIpO1xuICB9XG5cbiAgLy8gS2x1ZGdlIHRvIHdvcmsgYXJvdW5kIHN0cmFuZ2UgSUUgYmVoYXZpb3Igd2hlcmUgaXQnbGwgc29tZXRpbWVzXG4gIC8vIHJlLWZpcmUgYSBzZXJpZXMgb2YgZHJhZy1yZWxhdGVkIGV2ZW50cyByaWdodCBhZnRlciB0aGUgZHJvcCAoIzE1NTEpXG4gIHZhciBsYXN0RHJvcCA9IDA7XG5cbiAgZnVuY3Rpb24gb25Ecm9wKGUpIHtcbiAgICB2YXIgY20gPSB0aGlzO1xuICAgIGNsZWFyRHJhZ0N1cnNvcihjbSk7XG4gICAgaWYgKHNpZ25hbERPTUV2ZW50KGNtLCBlKSB8fCBldmVudEluV2lkZ2V0KGNtLmRpc3BsYXksIGUpKVxuICAgICAgcmV0dXJuO1xuICAgIGVfcHJldmVudERlZmF1bHQoZSk7XG4gICAgaWYgKGllKSBsYXN0RHJvcCA9ICtuZXcgRGF0ZTtcbiAgICB2YXIgcG9zID0gcG9zRnJvbU1vdXNlKGNtLCBlLCB0cnVlKSwgZmlsZXMgPSBlLmRhdGFUcmFuc2Zlci5maWxlcztcbiAgICBpZiAoIXBvcyB8fCBpc1JlYWRPbmx5KGNtKSkgcmV0dXJuO1xuICAgIC8vIE1pZ2h0IGJlIGEgZmlsZSBkcm9wLCBpbiB3aGljaCBjYXNlIHdlIHNpbXBseSBleHRyYWN0IHRoZSB0ZXh0XG4gICAgLy8gYW5kIGluc2VydCBpdC5cbiAgICBpZiAoZmlsZXMgJiYgZmlsZXMubGVuZ3RoICYmIHdpbmRvdy5GaWxlUmVhZGVyICYmIHdpbmRvdy5GaWxlKSB7XG4gICAgICB2YXIgbiA9IGZpbGVzLmxlbmd0aCwgdGV4dCA9IEFycmF5KG4pLCByZWFkID0gMDtcbiAgICAgIHZhciBsb2FkRmlsZSA9IGZ1bmN0aW9uKGZpbGUsIGkpIHtcbiAgICAgICAgaWYgKGNtLm9wdGlvbnMuYWxsb3dEcm9wRmlsZVR5cGVzICYmXG4gICAgICAgICAgICBpbmRleE9mKGNtLm9wdGlvbnMuYWxsb3dEcm9wRmlsZVR5cGVzLCBmaWxlLnR5cGUpID09IC0xKVxuICAgICAgICAgIHJldHVybjtcblxuICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXI7XG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSBvcGVyYXRpb24oY20sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBjb250ZW50ID0gcmVhZGVyLnJlc3VsdDtcbiAgICAgICAgICBpZiAoL1tcXHgwMC1cXHgwOFxceDBlLVxceDFmXXsyfS8udGVzdChjb250ZW50KSkgY29udGVudCA9IFwiXCI7XG4gICAgICAgICAgdGV4dFtpXSA9IGNvbnRlbnQ7XG4gICAgICAgICAgaWYgKCsrcmVhZCA9PSBuKSB7XG4gICAgICAgICAgICBwb3MgPSBjbGlwUG9zKGNtLmRvYywgcG9zKTtcbiAgICAgICAgICAgIHZhciBjaGFuZ2UgPSB7ZnJvbTogcG9zLCB0bzogcG9zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBjbS5kb2Muc3BsaXRMaW5lcyh0ZXh0LmpvaW4oY20uZG9jLmxpbmVTZXBhcmF0b3IoKSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46IFwicGFzdGVcIn07XG4gICAgICAgICAgICBtYWtlQ2hhbmdlKGNtLmRvYywgY2hhbmdlKTtcbiAgICAgICAgICAgIHNldFNlbGVjdGlvblJlcGxhY2VIaXN0b3J5KGNtLmRvYywgc2ltcGxlU2VsZWN0aW9uKHBvcywgY2hhbmdlRW5kKGNoYW5nZSkpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTtcbiAgICAgIH07XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47ICsraSkgbG9hZEZpbGUoZmlsZXNbaV0sIGkpO1xuICAgIH0gZWxzZSB7IC8vIE5vcm1hbCBkcm9wXG4gICAgICAvLyBEb24ndCBkbyBhIHJlcGxhY2UgaWYgdGhlIGRyb3AgaGFwcGVuZWQgaW5zaWRlIG9mIHRoZSBzZWxlY3RlZCB0ZXh0LlxuICAgICAgaWYgKGNtLnN0YXRlLmRyYWdnaW5nVGV4dCAmJiBjbS5kb2Muc2VsLmNvbnRhaW5zKHBvcykgPiAtMSkge1xuICAgICAgICBjbS5zdGF0ZS5kcmFnZ2luZ1RleHQoZSk7XG4gICAgICAgIC8vIEVuc3VyZSB0aGUgZWRpdG9yIGlzIHJlLWZvY3VzZWRcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtjbS5kaXNwbGF5LmlucHV0LmZvY3VzKCk7fSwgMjApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgdGV4dCA9IGUuZGF0YVRyYW5zZmVyLmdldERhdGEoXCJUZXh0XCIpO1xuICAgICAgICBpZiAodGV4dCkge1xuICAgICAgICAgIGlmIChjbS5zdGF0ZS5kcmFnZ2luZ1RleHQgJiYgIShtYWMgPyBlLmFsdEtleSA6IGUuY3RybEtleSkpXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBjbS5saXN0U2VsZWN0aW9ucygpO1xuICAgICAgICAgIHNldFNlbGVjdGlvbk5vVW5kbyhjbS5kb2MsIHNpbXBsZVNlbGVjdGlvbihwb3MsIHBvcykpO1xuICAgICAgICAgIGlmIChzZWxlY3RlZCkgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxlY3RlZC5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgIHJlcGxhY2VSYW5nZShjbS5kb2MsIFwiXCIsIHNlbGVjdGVkW2ldLmFuY2hvciwgc2VsZWN0ZWRbaV0uaGVhZCwgXCJkcmFnXCIpO1xuICAgICAgICAgIGNtLnJlcGxhY2VTZWxlY3Rpb24odGV4dCwgXCJhcm91bmRcIiwgXCJwYXN0ZVwiKTtcbiAgICAgICAgICBjbS5kaXNwbGF5LmlucHV0LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNhdGNoKGUpe31cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbkRyYWdTdGFydChjbSwgZSkge1xuICAgIGlmIChpZSAmJiAoIWNtLnN0YXRlLmRyYWdnaW5nVGV4dCB8fCArbmV3IERhdGUgLSBsYXN0RHJvcCA8IDEwMCkpIHsgZV9zdG9wKGUpOyByZXR1cm47IH1cbiAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUpIHx8IGV2ZW50SW5XaWRnZXQoY20uZGlzcGxheSwgZSkpIHJldHVybjtcblxuICAgIGUuZGF0YVRyYW5zZmVyLnNldERhdGEoXCJUZXh0XCIsIGNtLmdldFNlbGVjdGlvbigpKTtcblxuICAgIC8vIFVzZSBkdW1teSBpbWFnZSBpbnN0ZWFkIG9mIGRlZmF1bHQgYnJvd3NlcnMgaW1hZ2UuXG4gICAgLy8gUmVjZW50IFNhZmFyaSAofjYuMC4yKSBoYXZlIGEgdGVuZGVuY3kgdG8gc2VnZmF1bHQgd2hlbiB0aGlzIGhhcHBlbnMsIHNvIHdlIGRvbid0IGRvIGl0IHRoZXJlLlxuICAgIGlmIChlLmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UgJiYgIXNhZmFyaSkge1xuICAgICAgdmFyIGltZyA9IGVsdChcImltZ1wiLCBudWxsLCBudWxsLCBcInBvc2l0aW9uOiBmaXhlZDsgbGVmdDogMDsgdG9wOiAwO1wiKTtcbiAgICAgIGltZy5zcmMgPSBcImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBQUFBQUNINUJBRUtBQUVBTEFBQUFBQUJBQUVBQUFJQ1RBRUFPdz09XCI7XG4gICAgICBpZiAocHJlc3RvKSB7XG4gICAgICAgIGltZy53aWR0aCA9IGltZy5oZWlnaHQgPSAxO1xuICAgICAgICBjbS5kaXNwbGF5LndyYXBwZXIuYXBwZW5kQ2hpbGQoaW1nKTtcbiAgICAgICAgLy8gRm9yY2UgYSByZWxheW91dCwgb3IgT3BlcmEgd29uJ3QgdXNlIG91ciBpbWFnZSBmb3Igc29tZSBvYnNjdXJlIHJlYXNvblxuICAgICAgICBpbWcuX3RvcCA9IGltZy5vZmZzZXRUb3A7XG4gICAgICB9XG4gICAgICBlLmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UoaW1nLCAwLCAwKTtcbiAgICAgIGlmIChwcmVzdG8pIGltZy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGltZyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25EcmFnT3ZlcihjbSwgZSkge1xuICAgIHZhciBwb3MgPSBwb3NGcm9tTW91c2UoY20sIGUpO1xuICAgIGlmICghcG9zKSByZXR1cm47XG4gICAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgZHJhd1NlbGVjdGlvbkN1cnNvcihjbSwgcG9zLCBmcmFnKTtcbiAgICBpZiAoIWNtLmRpc3BsYXkuZHJhZ0N1cnNvcikge1xuICAgICAgY20uZGlzcGxheS5kcmFnQ3Vyc29yID0gZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1jdXJzb3JzIENvZGVNaXJyb3ItZHJhZ2N1cnNvcnNcIik7XG4gICAgICBjbS5kaXNwbGF5LmxpbmVTcGFjZS5pbnNlcnRCZWZvcmUoY20uZGlzcGxheS5kcmFnQ3Vyc29yLCBjbS5kaXNwbGF5LmN1cnNvckRpdik7XG4gICAgfVxuICAgIHJlbW92ZUNoaWxkcmVuQW5kQWRkKGNtLmRpc3BsYXkuZHJhZ0N1cnNvciwgZnJhZyk7XG4gIH1cblxuICBmdW5jdGlvbiBjbGVhckRyYWdDdXJzb3IoY20pIHtcbiAgICBpZiAoY20uZGlzcGxheS5kcmFnQ3Vyc29yKSB7XG4gICAgICBjbS5kaXNwbGF5LmxpbmVTcGFjZS5yZW1vdmVDaGlsZChjbS5kaXNwbGF5LmRyYWdDdXJzb3IpO1xuICAgICAgY20uZGlzcGxheS5kcmFnQ3Vyc29yID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvLyBTQ1JPTEwgRVZFTlRTXG5cbiAgLy8gU3luYyB0aGUgc2Nyb2xsYWJsZSBhcmVhIGFuZCBzY3JvbGxiYXJzLCBlbnN1cmUgdGhlIHZpZXdwb3J0XG4gIC8vIGNvdmVycyB0aGUgdmlzaWJsZSBhcmVhLlxuICBmdW5jdGlvbiBzZXRTY3JvbGxUb3AoY20sIHZhbCkge1xuICAgIGlmIChNYXRoLmFicyhjbS5kb2Muc2Nyb2xsVG9wIC0gdmFsKSA8IDIpIHJldHVybjtcbiAgICBjbS5kb2Muc2Nyb2xsVG9wID0gdmFsO1xuICAgIGlmICghZ2Vja28pIHVwZGF0ZURpc3BsYXlTaW1wbGUoY20sIHt0b3A6IHZhbH0pO1xuICAgIGlmIChjbS5kaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcCAhPSB2YWwpIGNtLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wID0gdmFsO1xuICAgIGNtLmRpc3BsYXkuc2Nyb2xsYmFycy5zZXRTY3JvbGxUb3AodmFsKTtcbiAgICBpZiAoZ2Vja28pIHVwZGF0ZURpc3BsYXlTaW1wbGUoY20pO1xuICAgIHN0YXJ0V29ya2VyKGNtLCAxMDApO1xuICB9XG4gIC8vIFN5bmMgc2Nyb2xsZXIgYW5kIHNjcm9sbGJhciwgZW5zdXJlIHRoZSBndXR0ZXIgZWxlbWVudHMgYXJlXG4gIC8vIGFsaWduZWQuXG4gIGZ1bmN0aW9uIHNldFNjcm9sbExlZnQoY20sIHZhbCwgaXNTY3JvbGxlcikge1xuICAgIGlmIChpc1Njcm9sbGVyID8gdmFsID09IGNtLmRvYy5zY3JvbGxMZWZ0IDogTWF0aC5hYnMoY20uZG9jLnNjcm9sbExlZnQgLSB2YWwpIDwgMikgcmV0dXJuO1xuICAgIHZhbCA9IE1hdGgubWluKHZhbCwgY20uZGlzcGxheS5zY3JvbGxlci5zY3JvbGxXaWR0aCAtIGNtLmRpc3BsYXkuc2Nyb2xsZXIuY2xpZW50V2lkdGgpO1xuICAgIGNtLmRvYy5zY3JvbGxMZWZ0ID0gdmFsO1xuICAgIGFsaWduSG9yaXpvbnRhbGx5KGNtKTtcbiAgICBpZiAoY20uZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0ICE9IHZhbCkgY20uZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0ID0gdmFsO1xuICAgIGNtLmRpc3BsYXkuc2Nyb2xsYmFycy5zZXRTY3JvbGxMZWZ0KHZhbCk7XG4gIH1cblxuICAvLyBTaW5jZSB0aGUgZGVsdGEgdmFsdWVzIHJlcG9ydGVkIG9uIG1vdXNlIHdoZWVsIGV2ZW50cyBhcmVcbiAgLy8gdW5zdGFuZGFyZGl6ZWQgYmV0d2VlbiBicm93c2VycyBhbmQgZXZlbiBicm93c2VyIHZlcnNpb25zLCBhbmRcbiAgLy8gZ2VuZXJhbGx5IGhvcnJpYmx5IHVucHJlZGljdGFibGUsIHRoaXMgY29kZSBzdGFydHMgYnkgbWVhc3VyaW5nXG4gIC8vIHRoZSBzY3JvbGwgZWZmZWN0IHRoYXQgdGhlIGZpcnN0IGZldyBtb3VzZSB3aGVlbCBldmVudHMgaGF2ZSxcbiAgLy8gYW5kLCBmcm9tIHRoYXQsIGRldGVjdHMgdGhlIHdheSBpdCBjYW4gY29udmVydCBkZWx0YXMgdG8gcGl4ZWxcbiAgLy8gb2Zmc2V0cyBhZnRlcndhcmRzLlxuICAvL1xuICAvLyBUaGUgcmVhc29uIHdlIHdhbnQgdG8ga25vdyB0aGUgYW1vdW50IGEgd2hlZWwgZXZlbnQgd2lsbCBzY3JvbGxcbiAgLy8gaXMgdGhhdCBpdCBnaXZlcyB1cyBhIGNoYW5jZSB0byB1cGRhdGUgdGhlIGRpc3BsYXkgYmVmb3JlIHRoZVxuICAvLyBhY3R1YWwgc2Nyb2xsaW5nIGhhcHBlbnMsIHJlZHVjaW5nIGZsaWNrZXJpbmcuXG5cbiAgdmFyIHdoZWVsU2FtcGxlcyA9IDAsIHdoZWVsUGl4ZWxzUGVyVW5pdCA9IG51bGw7XG4gIC8vIEZpbGwgaW4gYSBicm93c2VyLWRldGVjdGVkIHN0YXJ0aW5nIHZhbHVlIG9uIGJyb3dzZXJzIHdoZXJlIHdlXG4gIC8vIGtub3cgb25lLiBUaGVzZSBkb24ndCBoYXZlIHRvIGJlIGFjY3VyYXRlIC0tIHRoZSByZXN1bHQgb2YgdGhlbVxuICAvLyBiZWluZyB3cm9uZyB3b3VsZCBqdXN0IGJlIGEgc2xpZ2h0IGZsaWNrZXIgb24gdGhlIGZpcnN0IHdoZWVsXG4gIC8vIHNjcm9sbCAoaWYgaXQgaXMgbGFyZ2UgZW5vdWdoKS5cbiAgaWYgKGllKSB3aGVlbFBpeGVsc1BlclVuaXQgPSAtLjUzO1xuICBlbHNlIGlmIChnZWNrbykgd2hlZWxQaXhlbHNQZXJVbml0ID0gMTU7XG4gIGVsc2UgaWYgKGNocm9tZSkgd2hlZWxQaXhlbHNQZXJVbml0ID0gLS43O1xuICBlbHNlIGlmIChzYWZhcmkpIHdoZWVsUGl4ZWxzUGVyVW5pdCA9IC0xLzM7XG5cbiAgdmFyIHdoZWVsRXZlbnREZWx0YSA9IGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgZHggPSBlLndoZWVsRGVsdGFYLCBkeSA9IGUud2hlZWxEZWx0YVk7XG4gICAgaWYgKGR4ID09IG51bGwgJiYgZS5kZXRhaWwgJiYgZS5heGlzID09IGUuSE9SSVpPTlRBTF9BWElTKSBkeCA9IGUuZGV0YWlsO1xuICAgIGlmIChkeSA9PSBudWxsICYmIGUuZGV0YWlsICYmIGUuYXhpcyA9PSBlLlZFUlRJQ0FMX0FYSVMpIGR5ID0gZS5kZXRhaWw7XG4gICAgZWxzZSBpZiAoZHkgPT0gbnVsbCkgZHkgPSBlLndoZWVsRGVsdGE7XG4gICAgcmV0dXJuIHt4OiBkeCwgeTogZHl9O1xuICB9O1xuICBDb2RlTWlycm9yLndoZWVsRXZlbnRQaXhlbHMgPSBmdW5jdGlvbihlKSB7XG4gICAgdmFyIGRlbHRhID0gd2hlZWxFdmVudERlbHRhKGUpO1xuICAgIGRlbHRhLnggKj0gd2hlZWxQaXhlbHNQZXJVbml0O1xuICAgIGRlbHRhLnkgKj0gd2hlZWxQaXhlbHNQZXJVbml0O1xuICAgIHJldHVybiBkZWx0YTtcbiAgfTtcblxuICBmdW5jdGlvbiBvblNjcm9sbFdoZWVsKGNtLCBlKSB7XG4gICAgdmFyIGRlbHRhID0gd2hlZWxFdmVudERlbHRhKGUpLCBkeCA9IGRlbHRhLngsIGR5ID0gZGVsdGEueTtcblxuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgc2Nyb2xsID0gZGlzcGxheS5zY3JvbGxlcjtcbiAgICAvLyBRdWl0IGlmIHRoZXJlJ3Mgbm90aGluZyB0byBzY3JvbGwgaGVyZVxuICAgIHZhciBjYW5TY3JvbGxYID0gc2Nyb2xsLnNjcm9sbFdpZHRoID4gc2Nyb2xsLmNsaWVudFdpZHRoO1xuICAgIHZhciBjYW5TY3JvbGxZID0gc2Nyb2xsLnNjcm9sbEhlaWdodCA+IHNjcm9sbC5jbGllbnRIZWlnaHQ7XG4gICAgaWYgKCEoZHggJiYgY2FuU2Nyb2xsWCB8fCBkeSAmJiBjYW5TY3JvbGxZKSkgcmV0dXJuO1xuXG4gICAgLy8gV2Via2l0IGJyb3dzZXJzIG9uIE9TIFggYWJvcnQgbW9tZW50dW0gc2Nyb2xscyB3aGVuIHRoZSB0YXJnZXRcbiAgICAvLyBvZiB0aGUgc2Nyb2xsIGV2ZW50IGlzIHJlbW92ZWQgZnJvbSB0aGUgc2Nyb2xsYWJsZSBlbGVtZW50LlxuICAgIC8vIFRoaXMgaGFjayAoc2VlIHJlbGF0ZWQgY29kZSBpbiBwYXRjaERpc3BsYXkpIG1ha2VzIHN1cmUgdGhlXG4gICAgLy8gZWxlbWVudCBpcyBrZXB0IGFyb3VuZC5cbiAgICBpZiAoZHkgJiYgbWFjICYmIHdlYmtpdCkge1xuICAgICAgb3V0ZXI6IGZvciAodmFyIGN1ciA9IGUudGFyZ2V0LCB2aWV3ID0gZGlzcGxheS52aWV3OyBjdXIgIT0gc2Nyb2xsOyBjdXIgPSBjdXIucGFyZW50Tm9kZSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZpZXcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAodmlld1tpXS5ub2RlID09IGN1cikge1xuICAgICAgICAgICAgY20uZGlzcGxheS5jdXJyZW50V2hlZWxUYXJnZXQgPSBjdXI7XG4gICAgICAgICAgICBicmVhayBvdXRlcjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBPbiBzb21lIGJyb3dzZXJzLCBob3Jpem9udGFsIHNjcm9sbGluZyB3aWxsIGNhdXNlIHJlZHJhd3MgdG9cbiAgICAvLyBoYXBwZW4gYmVmb3JlIHRoZSBndXR0ZXIgaGFzIGJlZW4gcmVhbGlnbmVkLCBjYXVzaW5nIGl0IHRvXG4gICAgLy8gd3JpZ2dsZSBhcm91bmQgaW4gYSBtb3N0IHVuc2VlbWx5IHdheS4gV2hlbiB3ZSBoYXZlIGFuXG4gICAgLy8gZXN0aW1hdGVkIHBpeGVscy9kZWx0YSB2YWx1ZSwgd2UganVzdCBoYW5kbGUgaG9yaXpvbnRhbFxuICAgIC8vIHNjcm9sbGluZyBlbnRpcmVseSBoZXJlLiBJdCdsbCBiZSBzbGlnaHRseSBvZmYgZnJvbSBuYXRpdmUsIGJ1dFxuICAgIC8vIGJldHRlciB0aGFuIGdsaXRjaGluZyBvdXQuXG4gICAgaWYgKGR4ICYmICFnZWNrbyAmJiAhcHJlc3RvICYmIHdoZWVsUGl4ZWxzUGVyVW5pdCAhPSBudWxsKSB7XG4gICAgICBpZiAoZHkgJiYgY2FuU2Nyb2xsWSlcbiAgICAgICAgc2V0U2Nyb2xsVG9wKGNtLCBNYXRoLm1heCgwLCBNYXRoLm1pbihzY3JvbGwuc2Nyb2xsVG9wICsgZHkgKiB3aGVlbFBpeGVsc1BlclVuaXQsIHNjcm9sbC5zY3JvbGxIZWlnaHQgLSBzY3JvbGwuY2xpZW50SGVpZ2h0KSkpO1xuICAgICAgc2V0U2Nyb2xsTGVmdChjbSwgTWF0aC5tYXgoMCwgTWF0aC5taW4oc2Nyb2xsLnNjcm9sbExlZnQgKyBkeCAqIHdoZWVsUGl4ZWxzUGVyVW5pdCwgc2Nyb2xsLnNjcm9sbFdpZHRoIC0gc2Nyb2xsLmNsaWVudFdpZHRoKSkpO1xuICAgICAgLy8gT25seSBwcmV2ZW50IGRlZmF1bHQgc2Nyb2xsaW5nIGlmIHZlcnRpY2FsIHNjcm9sbGluZyBpc1xuICAgICAgLy8gYWN0dWFsbHkgcG9zc2libGUuIE90aGVyd2lzZSwgaXQgY2F1c2VzIHZlcnRpY2FsIHNjcm9sbFxuICAgICAgLy8gaml0dGVyIG9uIE9TWCB0cmFja3BhZHMgd2hlbiBkZWx0YVggaXMgc21hbGwgYW5kIGRlbHRhWVxuICAgICAgLy8gaXMgbGFyZ2UgKGlzc3VlICMzNTc5KVxuICAgICAgaWYgKCFkeSB8fCAoZHkgJiYgY2FuU2Nyb2xsWSkpXG4gICAgICAgIGVfcHJldmVudERlZmF1bHQoZSk7XG4gICAgICBkaXNwbGF5LndoZWVsU3RhcnRYID0gbnVsbDsgLy8gQWJvcnQgbWVhc3VyZW1lbnQsIGlmIGluIHByb2dyZXNzXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gJ1Byb2plY3QnIHRoZSB2aXNpYmxlIHZpZXdwb3J0IHRvIGNvdmVyIHRoZSBhcmVhIHRoYXQgaXMgYmVpbmdcbiAgICAvLyBzY3JvbGxlZCBpbnRvIHZpZXcgKGlmIHdlIGtub3cgZW5vdWdoIHRvIGVzdGltYXRlIGl0KS5cbiAgICBpZiAoZHkgJiYgd2hlZWxQaXhlbHNQZXJVbml0ICE9IG51bGwpIHtcbiAgICAgIHZhciBwaXhlbHMgPSBkeSAqIHdoZWVsUGl4ZWxzUGVyVW5pdDtcbiAgICAgIHZhciB0b3AgPSBjbS5kb2Muc2Nyb2xsVG9wLCBib3QgPSB0b3AgKyBkaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0O1xuICAgICAgaWYgKHBpeGVscyA8IDApIHRvcCA9IE1hdGgubWF4KDAsIHRvcCArIHBpeGVscyAtIDUwKTtcbiAgICAgIGVsc2UgYm90ID0gTWF0aC5taW4oY20uZG9jLmhlaWdodCwgYm90ICsgcGl4ZWxzICsgNTApO1xuICAgICAgdXBkYXRlRGlzcGxheVNpbXBsZShjbSwge3RvcDogdG9wLCBib3R0b206IGJvdH0pO1xuICAgIH1cblxuICAgIGlmICh3aGVlbFNhbXBsZXMgPCAyMCkge1xuICAgICAgaWYgKGRpc3BsYXkud2hlZWxTdGFydFggPT0gbnVsbCkge1xuICAgICAgICBkaXNwbGF5LndoZWVsU3RhcnRYID0gc2Nyb2xsLnNjcm9sbExlZnQ7IGRpc3BsYXkud2hlZWxTdGFydFkgPSBzY3JvbGwuc2Nyb2xsVG9wO1xuICAgICAgICBkaXNwbGF5LndoZWVsRFggPSBkeDsgZGlzcGxheS53aGVlbERZID0gZHk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKGRpc3BsYXkud2hlZWxTdGFydFggPT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICAgIHZhciBtb3ZlZFggPSBzY3JvbGwuc2Nyb2xsTGVmdCAtIGRpc3BsYXkud2hlZWxTdGFydFg7XG4gICAgICAgICAgdmFyIG1vdmVkWSA9IHNjcm9sbC5zY3JvbGxUb3AgLSBkaXNwbGF5LndoZWVsU3RhcnRZO1xuICAgICAgICAgIHZhciBzYW1wbGUgPSAobW92ZWRZICYmIGRpc3BsYXkud2hlZWxEWSAmJiBtb3ZlZFkgLyBkaXNwbGF5LndoZWVsRFkpIHx8XG4gICAgICAgICAgICAobW92ZWRYICYmIGRpc3BsYXkud2hlZWxEWCAmJiBtb3ZlZFggLyBkaXNwbGF5LndoZWVsRFgpO1xuICAgICAgICAgIGRpc3BsYXkud2hlZWxTdGFydFggPSBkaXNwbGF5LndoZWVsU3RhcnRZID0gbnVsbDtcbiAgICAgICAgICBpZiAoIXNhbXBsZSkgcmV0dXJuO1xuICAgICAgICAgIHdoZWVsUGl4ZWxzUGVyVW5pdCA9ICh3aGVlbFBpeGVsc1BlclVuaXQgKiB3aGVlbFNhbXBsZXMgKyBzYW1wbGUpIC8gKHdoZWVsU2FtcGxlcyArIDEpO1xuICAgICAgICAgICsrd2hlZWxTYW1wbGVzO1xuICAgICAgICB9LCAyMDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGlzcGxheS53aGVlbERYICs9IGR4OyBkaXNwbGF5LndoZWVsRFkgKz0gZHk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gS0VZIEVWRU5UU1xuXG4gIC8vIFJ1biBhIGhhbmRsZXIgdGhhdCB3YXMgYm91bmQgdG8gYSBrZXkuXG4gIGZ1bmN0aW9uIGRvSGFuZGxlQmluZGluZyhjbSwgYm91bmQsIGRyb3BTaGlmdCkge1xuICAgIGlmICh0eXBlb2YgYm91bmQgPT0gXCJzdHJpbmdcIikge1xuICAgICAgYm91bmQgPSBjb21tYW5kc1tib3VuZF07XG4gICAgICBpZiAoIWJvdW5kKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIEVuc3VyZSBwcmV2aW91cyBpbnB1dCBoYXMgYmVlbiByZWFkLCBzbyB0aGF0IHRoZSBoYW5kbGVyIHNlZXMgYVxuICAgIC8vIGNvbnNpc3RlbnQgdmlldyBvZiB0aGUgZG9jdW1lbnRcbiAgICBjbS5kaXNwbGF5LmlucHV0LmVuc3VyZVBvbGxlZCgpO1xuICAgIHZhciBwcmV2U2hpZnQgPSBjbS5kaXNwbGF5LnNoaWZ0LCBkb25lID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChpc1JlYWRPbmx5KGNtKSkgY20uc3RhdGUuc3VwcHJlc3NFZGl0cyA9IHRydWU7XG4gICAgICBpZiAoZHJvcFNoaWZ0KSBjbS5kaXNwbGF5LnNoaWZ0ID0gZmFsc2U7XG4gICAgICBkb25lID0gYm91bmQoY20pICE9IFBhc3M7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGNtLmRpc3BsYXkuc2hpZnQgPSBwcmV2U2hpZnQ7XG4gICAgICBjbS5zdGF0ZS5zdXBwcmVzc0VkaXRzID0gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBkb25lO1xuICB9XG5cbiAgZnVuY3Rpb24gbG9va3VwS2V5Rm9yRWRpdG9yKGNtLCBuYW1lLCBoYW5kbGUpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNtLnN0YXRlLmtleU1hcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciByZXN1bHQgPSBsb29rdXBLZXkobmFtZSwgY20uc3RhdGUua2V5TWFwc1tpXSwgaGFuZGxlLCBjbSk7XG4gICAgICBpZiAocmVzdWx0KSByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICByZXR1cm4gKGNtLm9wdGlvbnMuZXh0cmFLZXlzICYmIGxvb2t1cEtleShuYW1lLCBjbS5vcHRpb25zLmV4dHJhS2V5cywgaGFuZGxlLCBjbSkpXG4gICAgICB8fCBsb29rdXBLZXkobmFtZSwgY20ub3B0aW9ucy5rZXlNYXAsIGhhbmRsZSwgY20pO1xuICB9XG5cbiAgdmFyIHN0b3BTZXEgPSBuZXcgRGVsYXllZDtcbiAgZnVuY3Rpb24gZGlzcGF0Y2hLZXkoY20sIG5hbWUsIGUsIGhhbmRsZSkge1xuICAgIHZhciBzZXEgPSBjbS5zdGF0ZS5rZXlTZXE7XG4gICAgaWYgKHNlcSkge1xuICAgICAgaWYgKGlzTW9kaWZpZXJLZXkobmFtZSkpIHJldHVybiBcImhhbmRsZWRcIjtcbiAgICAgIHN0b3BTZXEuc2V0KDUwLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGNtLnN0YXRlLmtleVNlcSA9PSBzZXEpIHtcbiAgICAgICAgICBjbS5zdGF0ZS5rZXlTZXEgPSBudWxsO1xuICAgICAgICAgIGNtLmRpc3BsYXkuaW5wdXQucmVzZXQoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBuYW1lID0gc2VxICsgXCIgXCIgKyBuYW1lO1xuICAgIH1cbiAgICB2YXIgcmVzdWx0ID0gbG9va3VwS2V5Rm9yRWRpdG9yKGNtLCBuYW1lLCBoYW5kbGUpO1xuXG4gICAgaWYgKHJlc3VsdCA9PSBcIm11bHRpXCIpXG4gICAgICBjbS5zdGF0ZS5rZXlTZXEgPSBuYW1lO1xuICAgIGlmIChyZXN1bHQgPT0gXCJoYW5kbGVkXCIpXG4gICAgICBzaWduYWxMYXRlcihjbSwgXCJrZXlIYW5kbGVkXCIsIGNtLCBuYW1lLCBlKTtcblxuICAgIGlmIChyZXN1bHQgPT0gXCJoYW5kbGVkXCIgfHwgcmVzdWx0ID09IFwibXVsdGlcIikge1xuICAgICAgZV9wcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgIHJlc3RhcnRCbGluayhjbSk7XG4gICAgfVxuXG4gICAgaWYgKHNlcSAmJiAhcmVzdWx0ICYmIC9cXCckLy50ZXN0KG5hbWUpKSB7XG4gICAgICBlX3ByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiAhIXJlc3VsdDtcbiAgfVxuXG4gIC8vIEhhbmRsZSBhIGtleSBmcm9tIHRoZSBrZXlkb3duIGV2ZW50LlxuICBmdW5jdGlvbiBoYW5kbGVLZXlCaW5kaW5nKGNtLCBlKSB7XG4gICAgdmFyIG5hbWUgPSBrZXlOYW1lKGUsIHRydWUpO1xuICAgIGlmICghbmFtZSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgaWYgKGUuc2hpZnRLZXkgJiYgIWNtLnN0YXRlLmtleVNlcSkge1xuICAgICAgLy8gRmlyc3QgdHJ5IHRvIHJlc29sdmUgZnVsbCBuYW1lIChpbmNsdWRpbmcgJ1NoaWZ0LScpLiBGYWlsaW5nXG4gICAgICAvLyB0aGF0LCBzZWUgaWYgdGhlcmUgaXMgYSBjdXJzb3ItbW90aW9uIGNvbW1hbmQgKHN0YXJ0aW5nIHdpdGhcbiAgICAgIC8vICdnbycpIGJvdW5kIHRvIHRoZSBrZXluYW1lIHdpdGhvdXQgJ1NoaWZ0LScuXG4gICAgICByZXR1cm4gZGlzcGF0Y2hLZXkoY20sIFwiU2hpZnQtXCIgKyBuYW1lLCBlLCBmdW5jdGlvbihiKSB7cmV0dXJuIGRvSGFuZGxlQmluZGluZyhjbSwgYiwgdHJ1ZSk7fSlcbiAgICAgICAgICB8fCBkaXNwYXRjaEtleShjbSwgbmFtZSwgZSwgZnVuY3Rpb24oYikge1xuICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBiID09IFwic3RyaW5nXCIgPyAvXmdvW0EtWl0vLnRlc3QoYikgOiBiLm1vdGlvbilcbiAgICAgICAgICAgICAgICAgcmV0dXJuIGRvSGFuZGxlQmluZGluZyhjbSwgYik7XG4gICAgICAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBkaXNwYXRjaEtleShjbSwgbmFtZSwgZSwgZnVuY3Rpb24oYikgeyByZXR1cm4gZG9IYW5kbGVCaW5kaW5nKGNtLCBiKTsgfSk7XG4gICAgfVxuICB9XG5cbiAgLy8gSGFuZGxlIGEga2V5IGZyb20gdGhlIGtleXByZXNzIGV2ZW50XG4gIGZ1bmN0aW9uIGhhbmRsZUNoYXJCaW5kaW5nKGNtLCBlLCBjaCkge1xuICAgIHJldHVybiBkaXNwYXRjaEtleShjbSwgXCInXCIgKyBjaCArIFwiJ1wiLCBlLFxuICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihiKSB7IHJldHVybiBkb0hhbmRsZUJpbmRpbmcoY20sIGIsIHRydWUpOyB9KTtcbiAgfVxuXG4gIHZhciBsYXN0U3RvcHBlZEtleSA9IG51bGw7XG4gIGZ1bmN0aW9uIG9uS2V5RG93bihlKSB7XG4gICAgdmFyIGNtID0gdGhpcztcbiAgICBjbS5jdXJPcC5mb2N1cyA9IGFjdGl2ZUVsdCgpO1xuICAgIGlmIChzaWduYWxET01FdmVudChjbSwgZSkpIHJldHVybjtcbiAgICAvLyBJRSBkb2VzIHN0cmFuZ2UgdGhpbmdzIHdpdGggZXNjYXBlLlxuICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgMTEgJiYgZS5rZXlDb2RlID09IDI3KSBlLnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgdmFyIGNvZGUgPSBlLmtleUNvZGU7XG4gICAgY20uZGlzcGxheS5zaGlmdCA9IGNvZGUgPT0gMTYgfHwgZS5zaGlmdEtleTtcbiAgICB2YXIgaGFuZGxlZCA9IGhhbmRsZUtleUJpbmRpbmcoY20sIGUpO1xuICAgIGlmIChwcmVzdG8pIHtcbiAgICAgIGxhc3RTdG9wcGVkS2V5ID0gaGFuZGxlZCA/IGNvZGUgOiBudWxsO1xuICAgICAgLy8gT3BlcmEgaGFzIG5vIGN1dCBldmVudC4uLiB3ZSB0cnkgdG8gYXQgbGVhc3QgY2F0Y2ggdGhlIGtleSBjb21ib1xuICAgICAgaWYgKCFoYW5kbGVkICYmIGNvZGUgPT0gODggJiYgIWhhc0NvcHlFdmVudCAmJiAobWFjID8gZS5tZXRhS2V5IDogZS5jdHJsS2V5KSlcbiAgICAgICAgY20ucmVwbGFjZVNlbGVjdGlvbihcIlwiLCBudWxsLCBcImN1dFwiKTtcbiAgICB9XG5cbiAgICAvLyBUdXJuIG1vdXNlIGludG8gY3Jvc3NoYWlyIHdoZW4gQWx0IGlzIGhlbGQgb24gTWFjLlxuICAgIGlmIChjb2RlID09IDE4ICYmICEvXFxiQ29kZU1pcnJvci1jcm9zc2hhaXJcXGIvLnRlc3QoY20uZGlzcGxheS5saW5lRGl2LmNsYXNzTmFtZSkpXG4gICAgICBzaG93Q3Jvc3NIYWlyKGNtKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3dDcm9zc0hhaXIoY20pIHtcbiAgICB2YXIgbGluZURpdiA9IGNtLmRpc3BsYXkubGluZURpdjtcbiAgICBhZGRDbGFzcyhsaW5lRGl2LCBcIkNvZGVNaXJyb3ItY3Jvc3NoYWlyXCIpO1xuXG4gICAgZnVuY3Rpb24gdXAoZSkge1xuICAgICAgaWYgKGUua2V5Q29kZSA9PSAxOCB8fCAhZS5hbHRLZXkpIHtcbiAgICAgICAgcm1DbGFzcyhsaW5lRGl2LCBcIkNvZGVNaXJyb3ItY3Jvc3NoYWlyXCIpO1xuICAgICAgICBvZmYoZG9jdW1lbnQsIFwia2V5dXBcIiwgdXApO1xuICAgICAgICBvZmYoZG9jdW1lbnQsIFwibW91c2VvdmVyXCIsIHVwKTtcbiAgICAgIH1cbiAgICB9XG4gICAgb24oZG9jdW1lbnQsIFwia2V5dXBcIiwgdXApO1xuICAgIG9uKGRvY3VtZW50LCBcIm1vdXNlb3ZlclwiLCB1cCk7XG4gIH1cblxuICBmdW5jdGlvbiBvbktleVVwKGUpIHtcbiAgICBpZiAoZS5rZXlDb2RlID09IDE2KSB0aGlzLmRvYy5zZWwuc2hpZnQgPSBmYWxzZTtcbiAgICBzaWduYWxET01FdmVudCh0aGlzLCBlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uS2V5UHJlc3MoZSkge1xuICAgIHZhciBjbSA9IHRoaXM7XG4gICAgaWYgKGV2ZW50SW5XaWRnZXQoY20uZGlzcGxheSwgZSkgfHwgc2lnbmFsRE9NRXZlbnQoY20sIGUpIHx8IGUuY3RybEtleSAmJiAhZS5hbHRLZXkgfHwgbWFjICYmIGUubWV0YUtleSkgcmV0dXJuO1xuICAgIHZhciBrZXlDb2RlID0gZS5rZXlDb2RlLCBjaGFyQ29kZSA9IGUuY2hhckNvZGU7XG4gICAgaWYgKHByZXN0byAmJiBrZXlDb2RlID09IGxhc3RTdG9wcGVkS2V5KSB7bGFzdFN0b3BwZWRLZXkgPSBudWxsOyBlX3ByZXZlbnREZWZhdWx0KGUpOyByZXR1cm47fVxuICAgIGlmICgocHJlc3RvICYmICghZS53aGljaCB8fCBlLndoaWNoIDwgMTApKSAmJiBoYW5kbGVLZXlCaW5kaW5nKGNtLCBlKSkgcmV0dXJuO1xuICAgIHZhciBjaCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUgPT0gbnVsbCA/IGtleUNvZGUgOiBjaGFyQ29kZSk7XG4gICAgaWYgKGhhbmRsZUNoYXJCaW5kaW5nKGNtLCBlLCBjaCkpIHJldHVybjtcbiAgICBjbS5kaXNwbGF5LmlucHV0Lm9uS2V5UHJlc3MoZSk7XG4gIH1cblxuICAvLyBGT0NVUy9CTFVSIEVWRU5UU1xuXG4gIGZ1bmN0aW9uIGRlbGF5Qmx1ckV2ZW50KGNtKSB7XG4gICAgY20uc3RhdGUuZGVsYXlpbmdCbHVyRXZlbnQgPSB0cnVlO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoY20uc3RhdGUuZGVsYXlpbmdCbHVyRXZlbnQpIHtcbiAgICAgICAgY20uc3RhdGUuZGVsYXlpbmdCbHVyRXZlbnQgPSBmYWxzZTtcbiAgICAgICAgb25CbHVyKGNtKTtcbiAgICAgIH1cbiAgICB9LCAxMDApO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Gb2N1cyhjbSkge1xuICAgIGlmIChjbS5zdGF0ZS5kZWxheWluZ0JsdXJFdmVudCkgY20uc3RhdGUuZGVsYXlpbmdCbHVyRXZlbnQgPSBmYWxzZTtcblxuICAgIGlmIChjbS5vcHRpb25zLnJlYWRPbmx5ID09IFwibm9jdXJzb3JcIikgcmV0dXJuO1xuICAgIGlmICghY20uc3RhdGUuZm9jdXNlZCkge1xuICAgICAgc2lnbmFsKGNtLCBcImZvY3VzXCIsIGNtKTtcbiAgICAgIGNtLnN0YXRlLmZvY3VzZWQgPSB0cnVlO1xuICAgICAgYWRkQ2xhc3MoY20uZGlzcGxheS53cmFwcGVyLCBcIkNvZGVNaXJyb3ItZm9jdXNlZFwiKTtcbiAgICAgIC8vIFRoaXMgdGVzdCBwcmV2ZW50cyB0aGlzIGZyb20gZmlyaW5nIHdoZW4gYSBjb250ZXh0XG4gICAgICAvLyBtZW51IGlzIGNsb3NlZCAoc2luY2UgdGhlIGlucHV0IHJlc2V0IHdvdWxkIGtpbGwgdGhlXG4gICAgICAvLyBzZWxlY3QtYWxsIGRldGVjdGlvbiBoYWNrKVxuICAgICAgaWYgKCFjbS5jdXJPcCAmJiBjbS5kaXNwbGF5LnNlbEZvckNvbnRleHRNZW51ICE9IGNtLmRvYy5zZWwpIHtcbiAgICAgICAgY20uZGlzcGxheS5pbnB1dC5yZXNldCgpO1xuICAgICAgICBpZiAod2Via2l0KSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBjbS5kaXNwbGF5LmlucHV0LnJlc2V0KHRydWUpOyB9LCAyMCk7IC8vIElzc3VlICMxNzMwXG4gICAgICB9XG4gICAgICBjbS5kaXNwbGF5LmlucHV0LnJlY2VpdmVkRm9jdXMoKTtcbiAgICB9XG4gICAgcmVzdGFydEJsaW5rKGNtKTtcbiAgfVxuICBmdW5jdGlvbiBvbkJsdXIoY20pIHtcbiAgICBpZiAoY20uc3RhdGUuZGVsYXlpbmdCbHVyRXZlbnQpIHJldHVybjtcblxuICAgIGlmIChjbS5zdGF0ZS5mb2N1c2VkKSB7XG4gICAgICBzaWduYWwoY20sIFwiYmx1clwiLCBjbSk7XG4gICAgICBjbS5zdGF0ZS5mb2N1c2VkID0gZmFsc2U7XG4gICAgICBybUNsYXNzKGNtLmRpc3BsYXkud3JhcHBlciwgXCJDb2RlTWlycm9yLWZvY3VzZWRcIik7XG4gICAgfVxuICAgIGNsZWFySW50ZXJ2YWwoY20uZGlzcGxheS5ibGlua2VyKTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge2lmICghY20uc3RhdGUuZm9jdXNlZCkgY20uZGlzcGxheS5zaGlmdCA9IGZhbHNlO30sIDE1MCk7XG4gIH1cblxuICAvLyBDT05URVhUIE1FTlUgSEFORExJTkdcblxuICAvLyBUbyBtYWtlIHRoZSBjb250ZXh0IG1lbnUgd29yaywgd2UgbmVlZCB0byBicmllZmx5IHVuaGlkZSB0aGVcbiAgLy8gdGV4dGFyZWEgKG1ha2luZyBpdCBhcyB1bm9idHJ1c2l2ZSBhcyBwb3NzaWJsZSkgdG8gbGV0IHRoZVxuICAvLyByaWdodC1jbGljayB0YWtlIGVmZmVjdCBvbiBpdC5cbiAgZnVuY3Rpb24gb25Db250ZXh0TWVudShjbSwgZSkge1xuICAgIGlmIChldmVudEluV2lkZ2V0KGNtLmRpc3BsYXksIGUpIHx8IGNvbnRleHRNZW51SW5HdXR0ZXIoY20sIGUpKSByZXR1cm47XG4gICAgaWYgKHNpZ25hbERPTUV2ZW50KGNtLCBlLCBcImNvbnRleHRtZW51XCIpKSByZXR1cm47XG4gICAgY20uZGlzcGxheS5pbnB1dC5vbkNvbnRleHRNZW51KGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gY29udGV4dE1lbnVJbkd1dHRlcihjbSwgZSkge1xuICAgIGlmICghaGFzSGFuZGxlcihjbSwgXCJndXR0ZXJDb250ZXh0TWVudVwiKSkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiBndXR0ZXJFdmVudChjbSwgZSwgXCJndXR0ZXJDb250ZXh0TWVudVwiLCBmYWxzZSwgc2lnbmFsKTtcbiAgfVxuXG4gIC8vIFVQREFUSU5HXG5cbiAgLy8gQ29tcHV0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIGVuZCBvZiBhIGNoYW5nZSAoaXRzICd0bycgcHJvcGVydHlcbiAgLy8gcmVmZXJzIHRvIHRoZSBwcmUtY2hhbmdlIGVuZCkuXG4gIHZhciBjaGFuZ2VFbmQgPSBDb2RlTWlycm9yLmNoYW5nZUVuZCA9IGZ1bmN0aW9uKGNoYW5nZSkge1xuICAgIGlmICghY2hhbmdlLnRleHQpIHJldHVybiBjaGFuZ2UudG87XG4gICAgcmV0dXJuIFBvcyhjaGFuZ2UuZnJvbS5saW5lICsgY2hhbmdlLnRleHQubGVuZ3RoIC0gMSxcbiAgICAgICAgICAgICAgIGxzdChjaGFuZ2UudGV4dCkubGVuZ3RoICsgKGNoYW5nZS50ZXh0Lmxlbmd0aCA9PSAxID8gY2hhbmdlLmZyb20uY2ggOiAwKSk7XG4gIH07XG5cbiAgLy8gQWRqdXN0IGEgcG9zaXRpb24gdG8gcmVmZXIgdG8gdGhlIHBvc3QtY2hhbmdlIHBvc2l0aW9uIG9mIHRoZVxuICAvLyBzYW1lIHRleHQsIG9yIHRoZSBlbmQgb2YgdGhlIGNoYW5nZSBpZiB0aGUgY2hhbmdlIGNvdmVycyBpdC5cbiAgZnVuY3Rpb24gYWRqdXN0Rm9yQ2hhbmdlKHBvcywgY2hhbmdlKSB7XG4gICAgaWYgKGNtcChwb3MsIGNoYW5nZS5mcm9tKSA8IDApIHJldHVybiBwb3M7XG4gICAgaWYgKGNtcChwb3MsIGNoYW5nZS50bykgPD0gMCkgcmV0dXJuIGNoYW5nZUVuZChjaGFuZ2UpO1xuXG4gICAgdmFyIGxpbmUgPSBwb3MubGluZSArIGNoYW5nZS50ZXh0Lmxlbmd0aCAtIChjaGFuZ2UudG8ubGluZSAtIGNoYW5nZS5mcm9tLmxpbmUpIC0gMSwgY2ggPSBwb3MuY2g7XG4gICAgaWYgKHBvcy5saW5lID09IGNoYW5nZS50by5saW5lKSBjaCArPSBjaGFuZ2VFbmQoY2hhbmdlKS5jaCAtIGNoYW5nZS50by5jaDtcbiAgICByZXR1cm4gUG9zKGxpbmUsIGNoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbXB1dGVTZWxBZnRlckNoYW5nZShkb2MsIGNoYW5nZSkge1xuICAgIHZhciBvdXQgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5zZWwucmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcmFuZ2UgPSBkb2Muc2VsLnJhbmdlc1tpXTtcbiAgICAgIG91dC5wdXNoKG5ldyBSYW5nZShhZGp1c3RGb3JDaGFuZ2UocmFuZ2UuYW5jaG9yLCBjaGFuZ2UpLFxuICAgICAgICAgICAgICAgICAgICAgICAgIGFkanVzdEZvckNoYW5nZShyYW5nZS5oZWFkLCBjaGFuZ2UpKSk7XG4gICAgfVxuICAgIHJldHVybiBub3JtYWxpemVTZWxlY3Rpb24ob3V0LCBkb2Muc2VsLnByaW1JbmRleCk7XG4gIH1cblxuICBmdW5jdGlvbiBvZmZzZXRQb3MocG9zLCBvbGQsIG53KSB7XG4gICAgaWYgKHBvcy5saW5lID09IG9sZC5saW5lKVxuICAgICAgcmV0dXJuIFBvcyhudy5saW5lLCBwb3MuY2ggLSBvbGQuY2ggKyBudy5jaCk7XG4gICAgZWxzZVxuICAgICAgcmV0dXJuIFBvcyhudy5saW5lICsgKHBvcy5saW5lIC0gb2xkLmxpbmUpLCBwb3MuY2gpO1xuICB9XG5cbiAgLy8gVXNlZCBieSByZXBsYWNlU2VsZWN0aW9ucyB0byBhbGxvdyBtb3ZpbmcgdGhlIHNlbGVjdGlvbiB0byB0aGVcbiAgLy8gc3RhcnQgb3IgYXJvdW5kIHRoZSByZXBsYWNlZCB0ZXN0LiBIaW50IG1heSBiZSBcInN0YXJ0XCIgb3IgXCJhcm91bmRcIi5cbiAgZnVuY3Rpb24gY29tcHV0ZVJlcGxhY2VkU2VsKGRvYywgY2hhbmdlcywgaGludCkge1xuICAgIHZhciBvdXQgPSBbXTtcbiAgICB2YXIgb2xkUHJldiA9IFBvcyhkb2MuZmlyc3QsIDApLCBuZXdQcmV2ID0gb2xkUHJldjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjaGFuZ2UgPSBjaGFuZ2VzW2ldO1xuICAgICAgdmFyIGZyb20gPSBvZmZzZXRQb3MoY2hhbmdlLmZyb20sIG9sZFByZXYsIG5ld1ByZXYpO1xuICAgICAgdmFyIHRvID0gb2Zmc2V0UG9zKGNoYW5nZUVuZChjaGFuZ2UpLCBvbGRQcmV2LCBuZXdQcmV2KTtcbiAgICAgIG9sZFByZXYgPSBjaGFuZ2UudG87XG4gICAgICBuZXdQcmV2ID0gdG87XG4gICAgICBpZiAoaGludCA9PSBcImFyb3VuZFwiKSB7XG4gICAgICAgIHZhciByYW5nZSA9IGRvYy5zZWwucmFuZ2VzW2ldLCBpbnYgPSBjbXAocmFuZ2UuaGVhZCwgcmFuZ2UuYW5jaG9yKSA8IDA7XG4gICAgICAgIG91dFtpXSA9IG5ldyBSYW5nZShpbnYgPyB0byA6IGZyb20sIGludiA/IGZyb20gOiB0byk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvdXRbaV0gPSBuZXcgUmFuZ2UoZnJvbSwgZnJvbSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgU2VsZWN0aW9uKG91dCwgZG9jLnNlbC5wcmltSW5kZXgpO1xuICB9XG5cbiAgLy8gQWxsb3cgXCJiZWZvcmVDaGFuZ2VcIiBldmVudCBoYW5kbGVycyB0byBpbmZsdWVuY2UgYSBjaGFuZ2VcbiAgZnVuY3Rpb24gZmlsdGVyQ2hhbmdlKGRvYywgY2hhbmdlLCB1cGRhdGUpIHtcbiAgICB2YXIgb2JqID0ge1xuICAgICAgY2FuY2VsZWQ6IGZhbHNlLFxuICAgICAgZnJvbTogY2hhbmdlLmZyb20sXG4gICAgICB0bzogY2hhbmdlLnRvLFxuICAgICAgdGV4dDogY2hhbmdlLnRleHQsXG4gICAgICBvcmlnaW46IGNoYW5nZS5vcmlnaW4sXG4gICAgICBjYW5jZWw6IGZ1bmN0aW9uKCkgeyB0aGlzLmNhbmNlbGVkID0gdHJ1ZTsgfVxuICAgIH07XG4gICAgaWYgKHVwZGF0ZSkgb2JqLnVwZGF0ZSA9IGZ1bmN0aW9uKGZyb20sIHRvLCB0ZXh0LCBvcmlnaW4pIHtcbiAgICAgIGlmIChmcm9tKSB0aGlzLmZyb20gPSBjbGlwUG9zKGRvYywgZnJvbSk7XG4gICAgICBpZiAodG8pIHRoaXMudG8gPSBjbGlwUG9zKGRvYywgdG8pO1xuICAgICAgaWYgKHRleHQpIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgICBpZiAob3JpZ2luICE9PSB1bmRlZmluZWQpIHRoaXMub3JpZ2luID0gb3JpZ2luO1xuICAgIH07XG4gICAgc2lnbmFsKGRvYywgXCJiZWZvcmVDaGFuZ2VcIiwgZG9jLCBvYmopO1xuICAgIGlmIChkb2MuY20pIHNpZ25hbChkb2MuY20sIFwiYmVmb3JlQ2hhbmdlXCIsIGRvYy5jbSwgb2JqKTtcblxuICAgIGlmIChvYmouY2FuY2VsZWQpIHJldHVybiBudWxsO1xuICAgIHJldHVybiB7ZnJvbTogb2JqLmZyb20sIHRvOiBvYmoudG8sIHRleHQ6IG9iai50ZXh0LCBvcmlnaW46IG9iai5vcmlnaW59O1xuICB9XG5cbiAgLy8gQXBwbHkgYSBjaGFuZ2UgdG8gYSBkb2N1bWVudCwgYW5kIGFkZCBpdCB0byB0aGUgZG9jdW1lbnQnc1xuICAvLyBoaXN0b3J5LCBhbmQgcHJvcGFnYXRpbmcgaXQgdG8gYWxsIGxpbmtlZCBkb2N1bWVudHMuXG4gIGZ1bmN0aW9uIG1ha2VDaGFuZ2UoZG9jLCBjaGFuZ2UsIGlnbm9yZVJlYWRPbmx5KSB7XG4gICAgaWYgKGRvYy5jbSkge1xuICAgICAgaWYgKCFkb2MuY20uY3VyT3ApIHJldHVybiBvcGVyYXRpb24oZG9jLmNtLCBtYWtlQ2hhbmdlKShkb2MsIGNoYW5nZSwgaWdub3JlUmVhZE9ubHkpO1xuICAgICAgaWYgKGRvYy5jbS5zdGF0ZS5zdXBwcmVzc0VkaXRzKSByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGhhc0hhbmRsZXIoZG9jLCBcImJlZm9yZUNoYW5nZVwiKSB8fCBkb2MuY20gJiYgaGFzSGFuZGxlcihkb2MuY20sIFwiYmVmb3JlQ2hhbmdlXCIpKSB7XG4gICAgICBjaGFuZ2UgPSBmaWx0ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UsIHRydWUpO1xuICAgICAgaWYgKCFjaGFuZ2UpIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBQb3NzaWJseSBzcGxpdCBvciBzdXBwcmVzcyB0aGUgdXBkYXRlIGJhc2VkIG9uIHRoZSBwcmVzZW5jZVxuICAgIC8vIG9mIHJlYWQtb25seSBzcGFucyBpbiBpdHMgcmFuZ2UuXG4gICAgdmFyIHNwbGl0ID0gc2F3UmVhZE9ubHlTcGFucyAmJiAhaWdub3JlUmVhZE9ubHkgJiYgcmVtb3ZlUmVhZE9ubHlSYW5nZXMoZG9jLCBjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKTtcbiAgICBpZiAoc3BsaXQpIHtcbiAgICAgIGZvciAodmFyIGkgPSBzcGxpdC5sZW5ndGggLSAxOyBpID49IDA7IC0taSlcbiAgICAgICAgbWFrZUNoYW5nZUlubmVyKGRvYywge2Zyb206IHNwbGl0W2ldLmZyb20sIHRvOiBzcGxpdFtpXS50bywgdGV4dDogaSA/IFtcIlwiXSA6IGNoYW5nZS50ZXh0fSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1ha2VDaGFuZ2VJbm5lcihkb2MsIGNoYW5nZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbWFrZUNoYW5nZUlubmVyKGRvYywgY2hhbmdlKSB7XG4gICAgaWYgKGNoYW5nZS50ZXh0Lmxlbmd0aCA9PSAxICYmIGNoYW5nZS50ZXh0WzBdID09IFwiXCIgJiYgY21wKGNoYW5nZS5mcm9tLCBjaGFuZ2UudG8pID09IDApIHJldHVybjtcbiAgICB2YXIgc2VsQWZ0ZXIgPSBjb21wdXRlU2VsQWZ0ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpO1xuICAgIGFkZENoYW5nZVRvSGlzdG9yeShkb2MsIGNoYW5nZSwgc2VsQWZ0ZXIsIGRvYy5jbSA/IGRvYy5jbS5jdXJPcC5pZCA6IE5hTik7XG5cbiAgICBtYWtlQ2hhbmdlU2luZ2xlRG9jKGRvYywgY2hhbmdlLCBzZWxBZnRlciwgc3RyZXRjaFNwYW5zT3ZlckNoYW5nZShkb2MsIGNoYW5nZSkpO1xuICAgIHZhciByZWJhc2VkID0gW107XG5cbiAgICBsaW5rZWREb2NzKGRvYywgZnVuY3Rpb24oZG9jLCBzaGFyZWRIaXN0KSB7XG4gICAgICBpZiAoIXNoYXJlZEhpc3QgJiYgaW5kZXhPZihyZWJhc2VkLCBkb2MuaGlzdG9yeSkgPT0gLTEpIHtcbiAgICAgICAgcmViYXNlSGlzdChkb2MuaGlzdG9yeSwgY2hhbmdlKTtcbiAgICAgICAgcmViYXNlZC5wdXNoKGRvYy5oaXN0b3J5KTtcbiAgICAgIH1cbiAgICAgIG1ha2VDaGFuZ2VTaW5nbGVEb2MoZG9jLCBjaGFuZ2UsIG51bGwsIHN0cmV0Y2hTcGFuc092ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFJldmVydCBhIGNoYW5nZSBzdG9yZWQgaW4gYSBkb2N1bWVudCdzIGhpc3RvcnkuXG4gIGZ1bmN0aW9uIG1ha2VDaGFuZ2VGcm9tSGlzdG9yeShkb2MsIHR5cGUsIGFsbG93U2VsZWN0aW9uT25seSkge1xuICAgIGlmIChkb2MuY20gJiYgZG9jLmNtLnN0YXRlLnN1cHByZXNzRWRpdHMpIHJldHVybjtcblxuICAgIHZhciBoaXN0ID0gZG9jLmhpc3RvcnksIGV2ZW50LCBzZWxBZnRlciA9IGRvYy5zZWw7XG4gICAgdmFyIHNvdXJjZSA9IHR5cGUgPT0gXCJ1bmRvXCIgPyBoaXN0LmRvbmUgOiBoaXN0LnVuZG9uZSwgZGVzdCA9IHR5cGUgPT0gXCJ1bmRvXCIgPyBoaXN0LnVuZG9uZSA6IGhpc3QuZG9uZTtcblxuICAgIC8vIFZlcmlmeSB0aGF0IHRoZXJlIGlzIGEgdXNlYWJsZSBldmVudCAoc28gdGhhdCBjdHJsLXogd29uJ3RcbiAgICAvLyBuZWVkbGVzc2x5IGNsZWFyIHNlbGVjdGlvbiBldmVudHMpXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzb3VyY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgIGV2ZW50ID0gc291cmNlW2ldO1xuICAgICAgaWYgKGFsbG93U2VsZWN0aW9uT25seSA/IGV2ZW50LnJhbmdlcyAmJiAhZXZlbnQuZXF1YWxzKGRvYy5zZWwpIDogIWV2ZW50LnJhbmdlcylcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlmIChpID09IHNvdXJjZS5sZW5ndGgpIHJldHVybjtcbiAgICBoaXN0Lmxhc3RPcmlnaW4gPSBoaXN0Lmxhc3RTZWxPcmlnaW4gPSBudWxsO1xuXG4gICAgZm9yICg7Oykge1xuICAgICAgZXZlbnQgPSBzb3VyY2UucG9wKCk7XG4gICAgICBpZiAoZXZlbnQucmFuZ2VzKSB7XG4gICAgICAgIHB1c2hTZWxlY3Rpb25Ub0hpc3RvcnkoZXZlbnQsIGRlc3QpO1xuICAgICAgICBpZiAoYWxsb3dTZWxlY3Rpb25Pbmx5ICYmICFldmVudC5lcXVhbHMoZG9jLnNlbCkpIHtcbiAgICAgICAgICBzZXRTZWxlY3Rpb24oZG9jLCBldmVudCwge2NsZWFyUmVkbzogZmFsc2V9KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2VsQWZ0ZXIgPSBldmVudDtcbiAgICAgIH1cbiAgICAgIGVsc2UgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gQnVpbGQgdXAgYSByZXZlcnNlIGNoYW5nZSBvYmplY3QgdG8gYWRkIHRvIHRoZSBvcHBvc2l0ZSBoaXN0b3J5XG4gICAgLy8gc3RhY2sgKHJlZG8gd2hlbiB1bmRvaW5nLCBhbmQgdmljZSB2ZXJzYSkuXG4gICAgdmFyIGFudGlDaGFuZ2VzID0gW107XG4gICAgcHVzaFNlbGVjdGlvblRvSGlzdG9yeShzZWxBZnRlciwgZGVzdCk7XG4gICAgZGVzdC5wdXNoKHtjaGFuZ2VzOiBhbnRpQ2hhbmdlcywgZ2VuZXJhdGlvbjogaGlzdC5nZW5lcmF0aW9ufSk7XG4gICAgaGlzdC5nZW5lcmF0aW9uID0gZXZlbnQuZ2VuZXJhdGlvbiB8fCArK2hpc3QubWF4R2VuZXJhdGlvbjtcblxuICAgIHZhciBmaWx0ZXIgPSBoYXNIYW5kbGVyKGRvYywgXCJiZWZvcmVDaGFuZ2VcIikgfHwgZG9jLmNtICYmIGhhc0hhbmRsZXIoZG9jLmNtLCBcImJlZm9yZUNoYW5nZVwiKTtcblxuICAgIGZvciAodmFyIGkgPSBldmVudC5jaGFuZ2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICB2YXIgY2hhbmdlID0gZXZlbnQuY2hhbmdlc1tpXTtcbiAgICAgIGNoYW5nZS5vcmlnaW4gPSB0eXBlO1xuICAgICAgaWYgKGZpbHRlciAmJiAhZmlsdGVyQ2hhbmdlKGRvYywgY2hhbmdlLCBmYWxzZSkpIHtcbiAgICAgICAgc291cmNlLmxlbmd0aCA9IDA7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgYW50aUNoYW5nZXMucHVzaChoaXN0b3J5Q2hhbmdlRnJvbUNoYW5nZShkb2MsIGNoYW5nZSkpO1xuXG4gICAgICB2YXIgYWZ0ZXIgPSBpID8gY29tcHV0ZVNlbEFmdGVyQ2hhbmdlKGRvYywgY2hhbmdlKSA6IGxzdChzb3VyY2UpO1xuICAgICAgbWFrZUNoYW5nZVNpbmdsZURvYyhkb2MsIGNoYW5nZSwgYWZ0ZXIsIG1lcmdlT2xkU3BhbnMoZG9jLCBjaGFuZ2UpKTtcbiAgICAgIGlmICghaSAmJiBkb2MuY20pIGRvYy5jbS5zY3JvbGxJbnRvVmlldyh7ZnJvbTogY2hhbmdlLmZyb20sIHRvOiBjaGFuZ2VFbmQoY2hhbmdlKX0pO1xuICAgICAgdmFyIHJlYmFzZWQgPSBbXTtcblxuICAgICAgLy8gUHJvcGFnYXRlIHRvIHRoZSBsaW5rZWQgZG9jdW1lbnRzXG4gICAgICBsaW5rZWREb2NzKGRvYywgZnVuY3Rpb24oZG9jLCBzaGFyZWRIaXN0KSB7XG4gICAgICAgIGlmICghc2hhcmVkSGlzdCAmJiBpbmRleE9mKHJlYmFzZWQsIGRvYy5oaXN0b3J5KSA9PSAtMSkge1xuICAgICAgICAgIHJlYmFzZUhpc3QoZG9jLmhpc3RvcnksIGNoYW5nZSk7XG4gICAgICAgICAgcmViYXNlZC5wdXNoKGRvYy5oaXN0b3J5KTtcbiAgICAgICAgfVxuICAgICAgICBtYWtlQ2hhbmdlU2luZ2xlRG9jKGRvYywgY2hhbmdlLCBudWxsLCBtZXJnZU9sZFNwYW5zKGRvYywgY2hhbmdlKSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBTdWItdmlld3MgbmVlZCB0aGVpciBsaW5lIG51bWJlcnMgc2hpZnRlZCB3aGVuIHRleHQgaXMgYWRkZWRcbiAgLy8gYWJvdmUgb3IgYmVsb3cgdGhlbSBpbiB0aGUgcGFyZW50IGRvY3VtZW50LlxuICBmdW5jdGlvbiBzaGlmdERvYyhkb2MsIGRpc3RhbmNlKSB7XG4gICAgaWYgKGRpc3RhbmNlID09IDApIHJldHVybjtcbiAgICBkb2MuZmlyc3QgKz0gZGlzdGFuY2U7XG4gICAgZG9jLnNlbCA9IG5ldyBTZWxlY3Rpb24obWFwKGRvYy5zZWwucmFuZ2VzLCBmdW5jdGlvbihyYW5nZSkge1xuICAgICAgcmV0dXJuIG5ldyBSYW5nZShQb3MocmFuZ2UuYW5jaG9yLmxpbmUgKyBkaXN0YW5jZSwgcmFuZ2UuYW5jaG9yLmNoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgUG9zKHJhbmdlLmhlYWQubGluZSArIGRpc3RhbmNlLCByYW5nZS5oZWFkLmNoKSk7XG4gICAgfSksIGRvYy5zZWwucHJpbUluZGV4KTtcbiAgICBpZiAoZG9jLmNtKSB7XG4gICAgICByZWdDaGFuZ2UoZG9jLmNtLCBkb2MuZmlyc3QsIGRvYy5maXJzdCAtIGRpc3RhbmNlLCBkaXN0YW5jZSk7XG4gICAgICBmb3IgKHZhciBkID0gZG9jLmNtLmRpc3BsYXksIGwgPSBkLnZpZXdGcm9tOyBsIDwgZC52aWV3VG87IGwrKylcbiAgICAgICAgcmVnTGluZUNoYW5nZShkb2MuY20sIGwsIFwiZ3V0dGVyXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8vIE1vcmUgbG93ZXItbGV2ZWwgY2hhbmdlIGZ1bmN0aW9uLCBoYW5kbGluZyBvbmx5IGEgc2luZ2xlIGRvY3VtZW50XG4gIC8vIChub3QgbGlua2VkIG9uZXMpLlxuICBmdW5jdGlvbiBtYWtlQ2hhbmdlU2luZ2xlRG9jKGRvYywgY2hhbmdlLCBzZWxBZnRlciwgc3BhbnMpIHtcbiAgICBpZiAoZG9jLmNtICYmICFkb2MuY20uY3VyT3ApXG4gICAgICByZXR1cm4gb3BlcmF0aW9uKGRvYy5jbSwgbWFrZUNoYW5nZVNpbmdsZURvYykoZG9jLCBjaGFuZ2UsIHNlbEFmdGVyLCBzcGFucyk7XG5cbiAgICBpZiAoY2hhbmdlLnRvLmxpbmUgPCBkb2MuZmlyc3QpIHtcbiAgICAgIHNoaWZ0RG9jKGRvYywgY2hhbmdlLnRleHQubGVuZ3RoIC0gMSAtIChjaGFuZ2UudG8ubGluZSAtIGNoYW5nZS5mcm9tLmxpbmUpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGNoYW5nZS5mcm9tLmxpbmUgPiBkb2MubGFzdExpbmUoKSkgcmV0dXJuO1xuXG4gICAgLy8gQ2xpcCB0aGUgY2hhbmdlIHRvIHRoZSBzaXplIG9mIHRoaXMgZG9jXG4gICAgaWYgKGNoYW5nZS5mcm9tLmxpbmUgPCBkb2MuZmlyc3QpIHtcbiAgICAgIHZhciBzaGlmdCA9IGNoYW5nZS50ZXh0Lmxlbmd0aCAtIDEgLSAoZG9jLmZpcnN0IC0gY2hhbmdlLmZyb20ubGluZSk7XG4gICAgICBzaGlmdERvYyhkb2MsIHNoaWZ0KTtcbiAgICAgIGNoYW5nZSA9IHtmcm9tOiBQb3MoZG9jLmZpcnN0LCAwKSwgdG86IFBvcyhjaGFuZ2UudG8ubGluZSArIHNoaWZ0LCBjaGFuZ2UudG8uY2gpLFxuICAgICAgICAgICAgICAgIHRleHQ6IFtsc3QoY2hhbmdlLnRleHQpXSwgb3JpZ2luOiBjaGFuZ2Uub3JpZ2lufTtcbiAgICB9XG4gICAgdmFyIGxhc3QgPSBkb2MubGFzdExpbmUoKTtcbiAgICBpZiAoY2hhbmdlLnRvLmxpbmUgPiBsYXN0KSB7XG4gICAgICBjaGFuZ2UgPSB7ZnJvbTogY2hhbmdlLmZyb20sIHRvOiBQb3MobGFzdCwgZ2V0TGluZShkb2MsIGxhc3QpLnRleHQubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICB0ZXh0OiBbY2hhbmdlLnRleHRbMF1dLCBvcmlnaW46IGNoYW5nZS5vcmlnaW59O1xuICAgIH1cblxuICAgIGNoYW5nZS5yZW1vdmVkID0gZ2V0QmV0d2Vlbihkb2MsIGNoYW5nZS5mcm9tLCBjaGFuZ2UudG8pO1xuXG4gICAgaWYgKCFzZWxBZnRlcikgc2VsQWZ0ZXIgPSBjb21wdXRlU2VsQWZ0ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpO1xuICAgIGlmIChkb2MuY20pIG1ha2VDaGFuZ2VTaW5nbGVEb2NJbkVkaXRvcihkb2MuY20sIGNoYW5nZSwgc3BhbnMpO1xuICAgIGVsc2UgdXBkYXRlRG9jKGRvYywgY2hhbmdlLCBzcGFucyk7XG4gICAgc2V0U2VsZWN0aW9uTm9VbmRvKGRvYywgc2VsQWZ0ZXIsIHNlbF9kb250U2Nyb2xsKTtcbiAgfVxuXG4gIC8vIEhhbmRsZSB0aGUgaW50ZXJhY3Rpb24gb2YgYSBjaGFuZ2UgdG8gYSBkb2N1bWVudCB3aXRoIHRoZSBlZGl0b3JcbiAgLy8gdGhhdCB0aGlzIGRvY3VtZW50IGlzIHBhcnQgb2YuXG4gIGZ1bmN0aW9uIG1ha2VDaGFuZ2VTaW5nbGVEb2NJbkVkaXRvcihjbSwgY2hhbmdlLCBzcGFucykge1xuICAgIHZhciBkb2MgPSBjbS5kb2MsIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBmcm9tID0gY2hhbmdlLmZyb20sIHRvID0gY2hhbmdlLnRvO1xuXG4gICAgdmFyIHJlY29tcHV0ZU1heExlbmd0aCA9IGZhbHNlLCBjaGVja1dpZHRoU3RhcnQgPSBmcm9tLmxpbmU7XG4gICAgaWYgKCFjbS5vcHRpb25zLmxpbmVXcmFwcGluZykge1xuICAgICAgY2hlY2tXaWR0aFN0YXJ0ID0gbGluZU5vKHZpc3VhbExpbmUoZ2V0TGluZShkb2MsIGZyb20ubGluZSkpKTtcbiAgICAgIGRvYy5pdGVyKGNoZWNrV2lkdGhTdGFydCwgdG8ubGluZSArIDEsIGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgaWYgKGxpbmUgPT0gZGlzcGxheS5tYXhMaW5lKSB7XG4gICAgICAgICAgcmVjb21wdXRlTWF4TGVuZ3RoID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGRvYy5zZWwuY29udGFpbnMoY2hhbmdlLmZyb20sIGNoYW5nZS50bykgPiAtMSlcbiAgICAgIHNpZ25hbEN1cnNvckFjdGl2aXR5KGNtKTtcblxuICAgIHVwZGF0ZURvYyhkb2MsIGNoYW5nZSwgc3BhbnMsIGVzdGltYXRlSGVpZ2h0KGNtKSk7XG5cbiAgICBpZiAoIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7XG4gICAgICBkb2MuaXRlcihjaGVja1dpZHRoU3RhcnQsIGZyb20ubGluZSArIGNoYW5nZS50ZXh0Lmxlbmd0aCwgZnVuY3Rpb24obGluZSkge1xuICAgICAgICB2YXIgbGVuID0gbGluZUxlbmd0aChsaW5lKTtcbiAgICAgICAgaWYgKGxlbiA+IGRpc3BsYXkubWF4TGluZUxlbmd0aCkge1xuICAgICAgICAgIGRpc3BsYXkubWF4TGluZSA9IGxpbmU7XG4gICAgICAgICAgZGlzcGxheS5tYXhMaW5lTGVuZ3RoID0gbGVuO1xuICAgICAgICAgIGRpc3BsYXkubWF4TGluZUNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgIHJlY29tcHV0ZU1heExlbmd0aCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChyZWNvbXB1dGVNYXhMZW5ndGgpIGNtLmN1ck9wLnVwZGF0ZU1heExpbmUgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIEFkanVzdCBmcm9udGllciwgc2NoZWR1bGUgd29ya2VyXG4gICAgZG9jLmZyb250aWVyID0gTWF0aC5taW4oZG9jLmZyb250aWVyLCBmcm9tLmxpbmUpO1xuICAgIHN0YXJ0V29ya2VyKGNtLCA0MDApO1xuXG4gICAgdmFyIGxlbmRpZmYgPSBjaGFuZ2UudGV4dC5sZW5ndGggLSAodG8ubGluZSAtIGZyb20ubGluZSkgLSAxO1xuICAgIC8vIFJlbWVtYmVyIHRoYXQgdGhlc2UgbGluZXMgY2hhbmdlZCwgZm9yIHVwZGF0aW5nIHRoZSBkaXNwbGF5XG4gICAgaWYgKGNoYW5nZS5mdWxsKVxuICAgICAgcmVnQ2hhbmdlKGNtKTtcbiAgICBlbHNlIGlmIChmcm9tLmxpbmUgPT0gdG8ubGluZSAmJiBjaGFuZ2UudGV4dC5sZW5ndGggPT0gMSAmJiAhaXNXaG9sZUxpbmVVcGRhdGUoY20uZG9jLCBjaGFuZ2UpKVxuICAgICAgcmVnTGluZUNoYW5nZShjbSwgZnJvbS5saW5lLCBcInRleHRcIik7XG4gICAgZWxzZVxuICAgICAgcmVnQ2hhbmdlKGNtLCBmcm9tLmxpbmUsIHRvLmxpbmUgKyAxLCBsZW5kaWZmKTtcblxuICAgIHZhciBjaGFuZ2VzSGFuZGxlciA9IGhhc0hhbmRsZXIoY20sIFwiY2hhbmdlc1wiKSwgY2hhbmdlSGFuZGxlciA9IGhhc0hhbmRsZXIoY20sIFwiY2hhbmdlXCIpO1xuICAgIGlmIChjaGFuZ2VIYW5kbGVyIHx8IGNoYW5nZXNIYW5kbGVyKSB7XG4gICAgICB2YXIgb2JqID0ge1xuICAgICAgICBmcm9tOiBmcm9tLCB0bzogdG8sXG4gICAgICAgIHRleHQ6IGNoYW5nZS50ZXh0LFxuICAgICAgICByZW1vdmVkOiBjaGFuZ2UucmVtb3ZlZCxcbiAgICAgICAgb3JpZ2luOiBjaGFuZ2Uub3JpZ2luXG4gICAgICB9O1xuICAgICAgaWYgKGNoYW5nZUhhbmRsZXIpIHNpZ25hbExhdGVyKGNtLCBcImNoYW5nZVwiLCBjbSwgb2JqKTtcbiAgICAgIGlmIChjaGFuZ2VzSGFuZGxlcikgKGNtLmN1ck9wLmNoYW5nZU9ianMgfHwgKGNtLmN1ck9wLmNoYW5nZU9ianMgPSBbXSkpLnB1c2gob2JqKTtcbiAgICB9XG4gICAgY20uZGlzcGxheS5zZWxGb3JDb250ZXh0TWVudSA9IG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiByZXBsYWNlUmFuZ2UoZG9jLCBjb2RlLCBmcm9tLCB0bywgb3JpZ2luKSB7XG4gICAgaWYgKCF0bykgdG8gPSBmcm9tO1xuICAgIGlmIChjbXAodG8sIGZyb20pIDwgMCkgeyB2YXIgdG1wID0gdG87IHRvID0gZnJvbTsgZnJvbSA9IHRtcDsgfVxuICAgIGlmICh0eXBlb2YgY29kZSA9PSBcInN0cmluZ1wiKSBjb2RlID0gZG9jLnNwbGl0TGluZXMoY29kZSk7XG4gICAgbWFrZUNoYW5nZShkb2MsIHtmcm9tOiBmcm9tLCB0bzogdG8sIHRleHQ6IGNvZGUsIG9yaWdpbjogb3JpZ2lufSk7XG4gIH1cblxuICAvLyBTQ1JPTExJTkcgVEhJTkdTIElOVE8gVklFV1xuXG4gIC8vIElmIGFuIGVkaXRvciBzaXRzIG9uIHRoZSB0b3Agb3IgYm90dG9tIG9mIHRoZSB3aW5kb3csIHBhcnRpYWxseVxuICAvLyBzY3JvbGxlZCBvdXQgb2YgdmlldywgdGhpcyBlbnN1cmVzIHRoYXQgdGhlIGN1cnNvciBpcyB2aXNpYmxlLlxuICBmdW5jdGlvbiBtYXliZVNjcm9sbFdpbmRvdyhjbSwgY29vcmRzKSB7XG4gICAgaWYgKHNpZ25hbERPTUV2ZW50KGNtLCBcInNjcm9sbEN1cnNvckludG9WaWV3XCIpKSByZXR1cm47XG5cbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIGJveCA9IGRpc3BsYXkuc2l6ZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGRvU2Nyb2xsID0gbnVsbDtcbiAgICBpZiAoY29vcmRzLnRvcCArIGJveC50b3AgPCAwKSBkb1Njcm9sbCA9IHRydWU7XG4gICAgZWxzZSBpZiAoY29vcmRzLmJvdHRvbSArIGJveC50b3AgPiAod2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpKSBkb1Njcm9sbCA9IGZhbHNlO1xuICAgIGlmIChkb1Njcm9sbCAhPSBudWxsICYmICFwaGFudG9tKSB7XG4gICAgICB2YXIgc2Nyb2xsTm9kZSA9IGVsdChcImRpdlwiLCBcIlxcdTIwMGJcIiwgbnVsbCwgXCJwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNvb3Jkcy50b3AgLSBkaXNwbGF5LnZpZXdPZmZzZXQgLSBwYWRkaW5nVG9wKGNtLmRpc3BsYXkpKSArIFwicHg7IGhlaWdodDogXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNvb3Jkcy5ib3R0b20gLSBjb29yZHMudG9wICsgc2Nyb2xsR2FwKGNtKSArIGRpc3BsYXkuYmFySGVpZ2h0KSArIFwicHg7IGxlZnQ6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvb3Jkcy5sZWZ0ICsgXCJweDsgd2lkdGg6IDJweDtcIik7XG4gICAgICBjbS5kaXNwbGF5LmxpbmVTcGFjZS5hcHBlbmRDaGlsZChzY3JvbGxOb2RlKTtcbiAgICAgIHNjcm9sbE5vZGUuc2Nyb2xsSW50b1ZpZXcoZG9TY3JvbGwpO1xuICAgICAgY20uZGlzcGxheS5saW5lU3BhY2UucmVtb3ZlQ2hpbGQoc2Nyb2xsTm9kZSk7XG4gICAgfVxuICB9XG5cbiAgLy8gU2Nyb2xsIGEgZ2l2ZW4gcG9zaXRpb24gaW50byB2aWV3IChpbW1lZGlhdGVseSksIHZlcmlmeWluZyB0aGF0XG4gIC8vIGl0IGFjdHVhbGx5IGJlY2FtZSB2aXNpYmxlIChhcyBsaW5lIGhlaWdodHMgYXJlIGFjY3VyYXRlbHlcbiAgLy8gbWVhc3VyZWQsIHRoZSBwb3NpdGlvbiBvZiBzb21ldGhpbmcgbWF5ICdkcmlmdCcgZHVyaW5nIGRyYXdpbmcpLlxuICBmdW5jdGlvbiBzY3JvbGxQb3NJbnRvVmlldyhjbSwgcG9zLCBlbmQsIG1hcmdpbikge1xuICAgIGlmIChtYXJnaW4gPT0gbnVsbCkgbWFyZ2luID0gMDtcbiAgICBmb3IgKHZhciBsaW1pdCA9IDA7IGxpbWl0IDwgNTsgbGltaXQrKykge1xuICAgICAgdmFyIGNoYW5nZWQgPSBmYWxzZSwgY29vcmRzID0gY3Vyc29yQ29vcmRzKGNtLCBwb3MpO1xuICAgICAgdmFyIGVuZENvb3JkcyA9ICFlbmQgfHwgZW5kID09IHBvcyA/IGNvb3JkcyA6IGN1cnNvckNvb3JkcyhjbSwgZW5kKTtcbiAgICAgIHZhciBzY3JvbGxQb3MgPSBjYWxjdWxhdGVTY3JvbGxQb3MoY20sIE1hdGgubWluKGNvb3Jkcy5sZWZ0LCBlbmRDb29yZHMubGVmdCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKGNvb3Jkcy50b3AsIGVuZENvb3Jkcy50b3ApIC0gbWFyZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heChjb29yZHMubGVmdCwgZW5kQ29vcmRzLmxlZnQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heChjb29yZHMuYm90dG9tLCBlbmRDb29yZHMuYm90dG9tKSArIG1hcmdpbik7XG4gICAgICB2YXIgc3RhcnRUb3AgPSBjbS5kb2Muc2Nyb2xsVG9wLCBzdGFydExlZnQgPSBjbS5kb2Muc2Nyb2xsTGVmdDtcbiAgICAgIGlmIChzY3JvbGxQb3Muc2Nyb2xsVG9wICE9IG51bGwpIHtcbiAgICAgICAgc2V0U2Nyb2xsVG9wKGNtLCBzY3JvbGxQb3Muc2Nyb2xsVG9wKTtcbiAgICAgICAgaWYgKE1hdGguYWJzKGNtLmRvYy5zY3JvbGxUb3AgLSBzdGFydFRvcCkgPiAxKSBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChzY3JvbGxQb3Muc2Nyb2xsTGVmdCAhPSBudWxsKSB7XG4gICAgICAgIHNldFNjcm9sbExlZnQoY20sIHNjcm9sbFBvcy5zY3JvbGxMZWZ0KTtcbiAgICAgICAgaWYgKE1hdGguYWJzKGNtLmRvYy5zY3JvbGxMZWZ0IC0gc3RhcnRMZWZ0KSA+IDEpIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKCFjaGFuZ2VkKSBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIGNvb3JkcztcbiAgfVxuXG4gIC8vIFNjcm9sbCBhIGdpdmVuIHNldCBvZiBjb29yZGluYXRlcyBpbnRvIHZpZXcgKGltbWVkaWF0ZWx5KS5cbiAgZnVuY3Rpb24gc2Nyb2xsSW50b1ZpZXcoY20sIHgxLCB5MSwgeDIsIHkyKSB7XG4gICAgdmFyIHNjcm9sbFBvcyA9IGNhbGN1bGF0ZVNjcm9sbFBvcyhjbSwgeDEsIHkxLCB4MiwgeTIpO1xuICAgIGlmIChzY3JvbGxQb3Muc2Nyb2xsVG9wICE9IG51bGwpIHNldFNjcm9sbFRvcChjbSwgc2Nyb2xsUG9zLnNjcm9sbFRvcCk7XG4gICAgaWYgKHNjcm9sbFBvcy5zY3JvbGxMZWZ0ICE9IG51bGwpIHNldFNjcm9sbExlZnQoY20sIHNjcm9sbFBvcy5zY3JvbGxMZWZ0KTtcbiAgfVxuXG4gIC8vIENhbGN1bGF0ZSBhIG5ldyBzY3JvbGwgcG9zaXRpb24gbmVlZGVkIHRvIHNjcm9sbCB0aGUgZ2l2ZW5cbiAgLy8gcmVjdGFuZ2xlIGludG8gdmlldy4gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBzY3JvbGxUb3AgYW5kXG4gIC8vIHNjcm9sbExlZnQgcHJvcGVydGllcy4gV2hlbiB0aGVzZSBhcmUgdW5kZWZpbmVkLCB0aGVcbiAgLy8gdmVydGljYWwvaG9yaXpvbnRhbCBwb3NpdGlvbiBkb2VzIG5vdCBuZWVkIHRvIGJlIGFkanVzdGVkLlxuICBmdW5jdGlvbiBjYWxjdWxhdGVTY3JvbGxQb3MoY20sIHgxLCB5MSwgeDIsIHkyKSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBzbmFwTWFyZ2luID0gdGV4dEhlaWdodChjbS5kaXNwbGF5KTtcbiAgICBpZiAoeTEgPCAwKSB5MSA9IDA7XG4gICAgdmFyIHNjcmVlbnRvcCA9IGNtLmN1ck9wICYmIGNtLmN1ck9wLnNjcm9sbFRvcCAhPSBudWxsID8gY20uY3VyT3Auc2Nyb2xsVG9wIDogZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3A7XG4gICAgdmFyIHNjcmVlbiA9IGRpc3BsYXlIZWlnaHQoY20pLCByZXN1bHQgPSB7fTtcbiAgICBpZiAoeTIgLSB5MSA+IHNjcmVlbikgeTIgPSB5MSArIHNjcmVlbjtcbiAgICB2YXIgZG9jQm90dG9tID0gY20uZG9jLmhlaWdodCArIHBhZGRpbmdWZXJ0KGRpc3BsYXkpO1xuICAgIHZhciBhdFRvcCA9IHkxIDwgc25hcE1hcmdpbiwgYXRCb3R0b20gPSB5MiA+IGRvY0JvdHRvbSAtIHNuYXBNYXJnaW47XG4gICAgaWYgKHkxIDwgc2NyZWVudG9wKSB7XG4gICAgICByZXN1bHQuc2Nyb2xsVG9wID0gYXRUb3AgPyAwIDogeTE7XG4gICAgfSBlbHNlIGlmICh5MiA+IHNjcmVlbnRvcCArIHNjcmVlbikge1xuICAgICAgdmFyIG5ld1RvcCA9IE1hdGgubWluKHkxLCAoYXRCb3R0b20gPyBkb2NCb3R0b20gOiB5MikgLSBzY3JlZW4pO1xuICAgICAgaWYgKG5ld1RvcCAhPSBzY3JlZW50b3ApIHJlc3VsdC5zY3JvbGxUb3AgPSBuZXdUb3A7XG4gICAgfVxuXG4gICAgdmFyIHNjcmVlbmxlZnQgPSBjbS5jdXJPcCAmJiBjbS5jdXJPcC5zY3JvbGxMZWZ0ICE9IG51bGwgPyBjbS5jdXJPcC5zY3JvbGxMZWZ0IDogZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0O1xuICAgIHZhciBzY3JlZW53ID0gZGlzcGxheVdpZHRoKGNtKSAtIChjbS5vcHRpb25zLmZpeGVkR3V0dGVyID8gZGlzcGxheS5ndXR0ZXJzLm9mZnNldFdpZHRoIDogMCk7XG4gICAgdmFyIHRvb1dpZGUgPSB4MiAtIHgxID4gc2NyZWVudztcbiAgICBpZiAodG9vV2lkZSkgeDIgPSB4MSArIHNjcmVlbnc7XG4gICAgaWYgKHgxIDwgMTApXG4gICAgICByZXN1bHQuc2Nyb2xsTGVmdCA9IDA7XG4gICAgZWxzZSBpZiAoeDEgPCBzY3JlZW5sZWZ0KVxuICAgICAgcmVzdWx0LnNjcm9sbExlZnQgPSBNYXRoLm1heCgwLCB4MSAtICh0b29XaWRlID8gMCA6IDEwKSk7XG4gICAgZWxzZSBpZiAoeDIgPiBzY3JlZW53ICsgc2NyZWVubGVmdCAtIDMpXG4gICAgICByZXN1bHQuc2Nyb2xsTGVmdCA9IHgyICsgKHRvb1dpZGUgPyAwIDogMTApIC0gc2NyZWVudztcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gU3RvcmUgYSByZWxhdGl2ZSBhZGp1c3RtZW50IHRvIHRoZSBzY3JvbGwgcG9zaXRpb24gaW4gdGhlIGN1cnJlbnRcbiAgLy8gb3BlcmF0aW9uICh0byBiZSBhcHBsaWVkIHdoZW4gdGhlIG9wZXJhdGlvbiBmaW5pc2hlcykuXG4gIGZ1bmN0aW9uIGFkZFRvU2Nyb2xsUG9zKGNtLCBsZWZ0LCB0b3ApIHtcbiAgICBpZiAobGVmdCAhPSBudWxsIHx8IHRvcCAhPSBudWxsKSByZXNvbHZlU2Nyb2xsVG9Qb3MoY20pO1xuICAgIGlmIChsZWZ0ICE9IG51bGwpXG4gICAgICBjbS5jdXJPcC5zY3JvbGxMZWZ0ID0gKGNtLmN1ck9wLnNjcm9sbExlZnQgPT0gbnVsbCA/IGNtLmRvYy5zY3JvbGxMZWZ0IDogY20uY3VyT3Auc2Nyb2xsTGVmdCkgKyBsZWZ0O1xuICAgIGlmICh0b3AgIT0gbnVsbClcbiAgICAgIGNtLmN1ck9wLnNjcm9sbFRvcCA9IChjbS5jdXJPcC5zY3JvbGxUb3AgPT0gbnVsbCA/IGNtLmRvYy5zY3JvbGxUb3AgOiBjbS5jdXJPcC5zY3JvbGxUb3ApICsgdG9wO1xuICB9XG5cbiAgLy8gTWFrZSBzdXJlIHRoYXQgYXQgdGhlIGVuZCBvZiB0aGUgb3BlcmF0aW9uIHRoZSBjdXJyZW50IGN1cnNvciBpc1xuICAvLyBzaG93bi5cbiAgZnVuY3Rpb24gZW5zdXJlQ3Vyc29yVmlzaWJsZShjbSkge1xuICAgIHJlc29sdmVTY3JvbGxUb1BvcyhjbSk7XG4gICAgdmFyIGN1ciA9IGNtLmdldEN1cnNvcigpLCBmcm9tID0gY3VyLCB0byA9IGN1cjtcbiAgICBpZiAoIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7XG4gICAgICBmcm9tID0gY3VyLmNoID8gUG9zKGN1ci5saW5lLCBjdXIuY2ggLSAxKSA6IGN1cjtcbiAgICAgIHRvID0gUG9zKGN1ci5saW5lLCBjdXIuY2ggKyAxKTtcbiAgICB9XG4gICAgY20uY3VyT3Auc2Nyb2xsVG9Qb3MgPSB7ZnJvbTogZnJvbSwgdG86IHRvLCBtYXJnaW46IGNtLm9wdGlvbnMuY3Vyc29yU2Nyb2xsTWFyZ2luLCBpc0N1cnNvcjogdHJ1ZX07XG4gIH1cblxuICAvLyBXaGVuIGFuIG9wZXJhdGlvbiBoYXMgaXRzIHNjcm9sbFRvUG9zIHByb3BlcnR5IHNldCwgYW5kIGFub3RoZXJcbiAgLy8gc2Nyb2xsIGFjdGlvbiBpcyBhcHBsaWVkIGJlZm9yZSB0aGUgZW5kIG9mIHRoZSBvcGVyYXRpb24sIHRoaXNcbiAgLy8gJ3NpbXVsYXRlcycgc2Nyb2xsaW5nIHRoYXQgcG9zaXRpb24gaW50byB2aWV3IGluIGEgY2hlYXAgd2F5LCBzb1xuICAvLyB0aGF0IHRoZSBlZmZlY3Qgb2YgaW50ZXJtZWRpYXRlIHNjcm9sbCBjb21tYW5kcyBpcyBub3QgaWdub3JlZC5cbiAgZnVuY3Rpb24gcmVzb2x2ZVNjcm9sbFRvUG9zKGNtKSB7XG4gICAgdmFyIHJhbmdlID0gY20uY3VyT3Auc2Nyb2xsVG9Qb3M7XG4gICAgaWYgKHJhbmdlKSB7XG4gICAgICBjbS5jdXJPcC5zY3JvbGxUb1BvcyA9IG51bGw7XG4gICAgICB2YXIgZnJvbSA9IGVzdGltYXRlQ29vcmRzKGNtLCByYW5nZS5mcm9tKSwgdG8gPSBlc3RpbWF0ZUNvb3JkcyhjbSwgcmFuZ2UudG8pO1xuICAgICAgdmFyIHNQb3MgPSBjYWxjdWxhdGVTY3JvbGxQb3MoY20sIE1hdGgubWluKGZyb20ubGVmdCwgdG8ubGVmdCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1pbihmcm9tLnRvcCwgdG8udG9wKSAtIHJhbmdlLm1hcmdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KGZyb20ucmlnaHQsIHRvLnJpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KGZyb20uYm90dG9tLCB0by5ib3R0b20pICsgcmFuZ2UubWFyZ2luKTtcbiAgICAgIGNtLnNjcm9sbFRvKHNQb3Muc2Nyb2xsTGVmdCwgc1Bvcy5zY3JvbGxUb3ApO1xuICAgIH1cbiAgfVxuXG4gIC8vIEFQSSBVVElMSVRJRVNcblxuICAvLyBJbmRlbnQgdGhlIGdpdmVuIGxpbmUuIFRoZSBob3cgcGFyYW1ldGVyIGNhbiBiZSBcInNtYXJ0XCIsXG4gIC8vIFwiYWRkXCIvbnVsbCwgXCJzdWJ0cmFjdFwiLCBvciBcInByZXZcIi4gV2hlbiBhZ2dyZXNzaXZlIGlzIGZhbHNlXG4gIC8vICh0eXBpY2FsbHkgc2V0IHRvIHRydWUgZm9yIGZvcmNlZCBzaW5nbGUtbGluZSBpbmRlbnRzKSwgZW1wdHlcbiAgLy8gbGluZXMgYXJlIG5vdCBpbmRlbnRlZCwgYW5kIHBsYWNlcyB3aGVyZSB0aGUgbW9kZSByZXR1cm5zIFBhc3NcbiAgLy8gYXJlIGxlZnQgYWxvbmUuXG4gIGZ1bmN0aW9uIGluZGVudExpbmUoY20sIG4sIGhvdywgYWdncmVzc2l2ZSkge1xuICAgIHZhciBkb2MgPSBjbS5kb2MsIHN0YXRlO1xuICAgIGlmIChob3cgPT0gbnVsbCkgaG93ID0gXCJhZGRcIjtcbiAgICBpZiAoaG93ID09IFwic21hcnRcIikge1xuICAgICAgLy8gRmFsbCBiYWNrIHRvIFwicHJldlwiIHdoZW4gdGhlIG1vZGUgZG9lc24ndCBoYXZlIGFuIGluZGVudGF0aW9uXG4gICAgICAvLyBtZXRob2QuXG4gICAgICBpZiAoIWRvYy5tb2RlLmluZGVudCkgaG93ID0gXCJwcmV2XCI7XG4gICAgICBlbHNlIHN0YXRlID0gZ2V0U3RhdGVCZWZvcmUoY20sIG4pO1xuICAgIH1cblxuICAgIHZhciB0YWJTaXplID0gY20ub3B0aW9ucy50YWJTaXplO1xuICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIG4pLCBjdXJTcGFjZSA9IGNvdW50Q29sdW1uKGxpbmUudGV4dCwgbnVsbCwgdGFiU2l6ZSk7XG4gICAgaWYgKGxpbmUuc3RhdGVBZnRlcikgbGluZS5zdGF0ZUFmdGVyID0gbnVsbDtcbiAgICB2YXIgY3VyU3BhY2VTdHJpbmcgPSBsaW5lLnRleHQubWF0Y2goL15cXHMqLylbMF0sIGluZGVudGF0aW9uO1xuICAgIGlmICghYWdncmVzc2l2ZSAmJiAhL1xcUy8udGVzdChsaW5lLnRleHQpKSB7XG4gICAgICBpbmRlbnRhdGlvbiA9IDA7XG4gICAgICBob3cgPSBcIm5vdFwiO1xuICAgIH0gZWxzZSBpZiAoaG93ID09IFwic21hcnRcIikge1xuICAgICAgaW5kZW50YXRpb24gPSBkb2MubW9kZS5pbmRlbnQoc3RhdGUsIGxpbmUudGV4dC5zbGljZShjdXJTcGFjZVN0cmluZy5sZW5ndGgpLCBsaW5lLnRleHQpO1xuICAgICAgaWYgKGluZGVudGF0aW9uID09IFBhc3MgfHwgaW5kZW50YXRpb24gPiAxNTApIHtcbiAgICAgICAgaWYgKCFhZ2dyZXNzaXZlKSByZXR1cm47XG4gICAgICAgIGhvdyA9IFwicHJldlwiO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaG93ID09IFwicHJldlwiKSB7XG4gICAgICBpZiAobiA+IGRvYy5maXJzdCkgaW5kZW50YXRpb24gPSBjb3VudENvbHVtbihnZXRMaW5lKGRvYywgbi0xKS50ZXh0LCBudWxsLCB0YWJTaXplKTtcbiAgICAgIGVsc2UgaW5kZW50YXRpb24gPSAwO1xuICAgIH0gZWxzZSBpZiAoaG93ID09IFwiYWRkXCIpIHtcbiAgICAgIGluZGVudGF0aW9uID0gY3VyU3BhY2UgKyBjbS5vcHRpb25zLmluZGVudFVuaXQ7XG4gICAgfSBlbHNlIGlmIChob3cgPT0gXCJzdWJ0cmFjdFwiKSB7XG4gICAgICBpbmRlbnRhdGlvbiA9IGN1clNwYWNlIC0gY20ub3B0aW9ucy5pbmRlbnRVbml0O1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGhvdyA9PSBcIm51bWJlclwiKSB7XG4gICAgICBpbmRlbnRhdGlvbiA9IGN1clNwYWNlICsgaG93O1xuICAgIH1cbiAgICBpbmRlbnRhdGlvbiA9IE1hdGgubWF4KDAsIGluZGVudGF0aW9uKTtcblxuICAgIHZhciBpbmRlbnRTdHJpbmcgPSBcIlwiLCBwb3MgPSAwO1xuICAgIGlmIChjbS5vcHRpb25zLmluZGVudFdpdGhUYWJzKVxuICAgICAgZm9yICh2YXIgaSA9IE1hdGguZmxvb3IoaW5kZW50YXRpb24gLyB0YWJTaXplKTsgaTsgLS1pKSB7cG9zICs9IHRhYlNpemU7IGluZGVudFN0cmluZyArPSBcIlxcdFwiO31cbiAgICBpZiAocG9zIDwgaW5kZW50YXRpb24pIGluZGVudFN0cmluZyArPSBzcGFjZVN0cihpbmRlbnRhdGlvbiAtIHBvcyk7XG5cbiAgICBpZiAoaW5kZW50U3RyaW5nICE9IGN1clNwYWNlU3RyaW5nKSB7XG4gICAgICByZXBsYWNlUmFuZ2UoZG9jLCBpbmRlbnRTdHJpbmcsIFBvcyhuLCAwKSwgUG9zKG4sIGN1clNwYWNlU3RyaW5nLmxlbmd0aCksIFwiK2lucHV0XCIpO1xuICAgICAgbGluZS5zdGF0ZUFmdGVyID0gbnVsbDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBFbnN1cmUgdGhhdCwgaWYgdGhlIGN1cnNvciB3YXMgaW4gdGhlIHdoaXRlc3BhY2UgYXQgdGhlIHN0YXJ0XG4gICAgICAvLyBvZiB0aGUgbGluZSwgaXQgaXMgbW92ZWQgdG8gdGhlIGVuZCBvZiB0aGF0IHNwYWNlLlxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkb2Muc2VsLnJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcmFuZ2UgPSBkb2Muc2VsLnJhbmdlc1tpXTtcbiAgICAgICAgaWYgKHJhbmdlLmhlYWQubGluZSA9PSBuICYmIHJhbmdlLmhlYWQuY2ggPCBjdXJTcGFjZVN0cmluZy5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIgcG9zID0gUG9zKG4sIGN1clNwYWNlU3RyaW5nLmxlbmd0aCk7XG4gICAgICAgICAgcmVwbGFjZU9uZVNlbGVjdGlvbihkb2MsIGksIG5ldyBSYW5nZShwb3MsIHBvcykpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gVXRpbGl0eSBmb3IgYXBwbHlpbmcgYSBjaGFuZ2UgdG8gYSBsaW5lIGJ5IGhhbmRsZSBvciBudW1iZXIsXG4gIC8vIHJldHVybmluZyB0aGUgbnVtYmVyIGFuZCBvcHRpb25hbGx5IHJlZ2lzdGVyaW5nIHRoZSBsaW5lIGFzXG4gIC8vIGNoYW5nZWQuXG4gIGZ1bmN0aW9uIGNoYW5nZUxpbmUoZG9jLCBoYW5kbGUsIGNoYW5nZVR5cGUsIG9wKSB7XG4gICAgdmFyIG5vID0gaGFuZGxlLCBsaW5lID0gaGFuZGxlO1xuICAgIGlmICh0eXBlb2YgaGFuZGxlID09IFwibnVtYmVyXCIpIGxpbmUgPSBnZXRMaW5lKGRvYywgY2xpcExpbmUoZG9jLCBoYW5kbGUpKTtcbiAgICBlbHNlIG5vID0gbGluZU5vKGhhbmRsZSk7XG4gICAgaWYgKG5vID09IG51bGwpIHJldHVybiBudWxsO1xuICAgIGlmIChvcChsaW5lLCBubykgJiYgZG9jLmNtKSByZWdMaW5lQ2hhbmdlKGRvYy5jbSwgbm8sIGNoYW5nZVR5cGUpO1xuICAgIHJldHVybiBsaW5lO1xuICB9XG5cbiAgLy8gSGVscGVyIGZvciBkZWxldGluZyB0ZXh0IG5lYXIgdGhlIHNlbGVjdGlvbihzKSwgdXNlZCB0byBpbXBsZW1lbnRcbiAgLy8gYmFja3NwYWNlLCBkZWxldGUsIGFuZCBzaW1pbGFyIGZ1bmN0aW9uYWxpdHkuXG4gIGZ1bmN0aW9uIGRlbGV0ZU5lYXJTZWxlY3Rpb24oY20sIGNvbXB1dGUpIHtcbiAgICB2YXIgcmFuZ2VzID0gY20uZG9jLnNlbC5yYW5nZXMsIGtpbGwgPSBbXTtcbiAgICAvLyBCdWlsZCB1cCBhIHNldCBvZiByYW5nZXMgdG8ga2lsbCBmaXJzdCwgbWVyZ2luZyBvdmVybGFwcGluZ1xuICAgIC8vIHJhbmdlcy5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHRvS2lsbCA9IGNvbXB1dGUocmFuZ2VzW2ldKTtcbiAgICAgIHdoaWxlIChraWxsLmxlbmd0aCAmJiBjbXAodG9LaWxsLmZyb20sIGxzdChraWxsKS50bykgPD0gMCkge1xuICAgICAgICB2YXIgcmVwbGFjZWQgPSBraWxsLnBvcCgpO1xuICAgICAgICBpZiAoY21wKHJlcGxhY2VkLmZyb20sIHRvS2lsbC5mcm9tKSA8IDApIHtcbiAgICAgICAgICB0b0tpbGwuZnJvbSA9IHJlcGxhY2VkLmZyb207XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGtpbGwucHVzaCh0b0tpbGwpO1xuICAgIH1cbiAgICAvLyBOZXh0LCByZW1vdmUgdGhvc2UgYWN0dWFsIHJhbmdlcy5cbiAgICBydW5Jbk9wKGNtLCBmdW5jdGlvbigpIHtcbiAgICAgIGZvciAodmFyIGkgPSBraWxsLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxuICAgICAgICByZXBsYWNlUmFuZ2UoY20uZG9jLCBcIlwiLCBraWxsW2ldLmZyb20sIGtpbGxbaV0udG8sIFwiK2RlbGV0ZVwiKTtcbiAgICAgIGVuc3VyZUN1cnNvclZpc2libGUoY20pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gVXNlZCBmb3IgaG9yaXpvbnRhbCByZWxhdGl2ZSBtb3Rpb24uIERpciBpcyAtMSBvciAxIChsZWZ0IG9yXG4gIC8vIHJpZ2h0KSwgdW5pdCBjYW4gYmUgXCJjaGFyXCIsIFwiY29sdW1uXCIgKGxpa2UgY2hhciwgYnV0IGRvZXNuJ3RcbiAgLy8gY3Jvc3MgbGluZSBib3VuZGFyaWVzKSwgXCJ3b3JkXCIgKGFjcm9zcyBuZXh0IHdvcmQpLCBvciBcImdyb3VwXCIgKHRvXG4gIC8vIHRoZSBzdGFydCBvZiBuZXh0IGdyb3VwIG9mIHdvcmQgb3Igbm9uLXdvcmQtbm9uLXdoaXRlc3BhY2VcbiAgLy8gY2hhcnMpLiBUaGUgdmlzdWFsbHkgcGFyYW0gY29udHJvbHMgd2hldGhlciwgaW4gcmlnaHQtdG8tbGVmdFxuICAvLyB0ZXh0LCBkaXJlY3Rpb24gMSBtZWFucyB0byBtb3ZlIHRvd2FyZHMgdGhlIG5leHQgaW5kZXggaW4gdGhlXG4gIC8vIHN0cmluZywgb3IgdG93YXJkcyB0aGUgY2hhcmFjdGVyIHRvIHRoZSByaWdodCBvZiB0aGUgY3VycmVudFxuICAvLyBwb3NpdGlvbi4gVGhlIHJlc3VsdGluZyBwb3NpdGlvbiB3aWxsIGhhdmUgYSBoaXRTaWRlPXRydWVcbiAgLy8gcHJvcGVydHkgaWYgaXQgcmVhY2hlZCB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudC5cbiAgZnVuY3Rpb24gZmluZFBvc0goZG9jLCBwb3MsIGRpciwgdW5pdCwgdmlzdWFsbHkpIHtcbiAgICB2YXIgbGluZSA9IHBvcy5saW5lLCBjaCA9IHBvcy5jaCwgb3JpZ0RpciA9IGRpcjtcbiAgICB2YXIgbGluZU9iaiA9IGdldExpbmUoZG9jLCBsaW5lKTtcbiAgICB2YXIgcG9zc2libGUgPSB0cnVlO1xuICAgIGZ1bmN0aW9uIGZpbmROZXh0TGluZSgpIHtcbiAgICAgIHZhciBsID0gbGluZSArIGRpcjtcbiAgICAgIGlmIChsIDwgZG9jLmZpcnN0IHx8IGwgPj0gZG9jLmZpcnN0ICsgZG9jLnNpemUpIHJldHVybiAocG9zc2libGUgPSBmYWxzZSk7XG4gICAgICBsaW5lID0gbDtcbiAgICAgIHJldHVybiBsaW5lT2JqID0gZ2V0TGluZShkb2MsIGwpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtb3ZlT25jZShib3VuZFRvTGluZSkge1xuICAgICAgdmFyIG5leHQgPSAodmlzdWFsbHkgPyBtb3ZlVmlzdWFsbHkgOiBtb3ZlTG9naWNhbGx5KShsaW5lT2JqLCBjaCwgZGlyLCB0cnVlKTtcbiAgICAgIGlmIChuZXh0ID09IG51bGwpIHtcbiAgICAgICAgaWYgKCFib3VuZFRvTGluZSAmJiBmaW5kTmV4dExpbmUoKSkge1xuICAgICAgICAgIGlmICh2aXN1YWxseSkgY2ggPSAoZGlyIDwgMCA/IGxpbmVSaWdodCA6IGxpbmVMZWZ0KShsaW5lT2JqKTtcbiAgICAgICAgICBlbHNlIGNoID0gZGlyIDwgMCA/IGxpbmVPYmoudGV4dC5sZW5ndGggOiAwO1xuICAgICAgICB9IGVsc2UgcmV0dXJuIChwb3NzaWJsZSA9IGZhbHNlKTtcbiAgICAgIH0gZWxzZSBjaCA9IG5leHQ7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAodW5pdCA9PSBcImNoYXJcIikgbW92ZU9uY2UoKTtcbiAgICBlbHNlIGlmICh1bml0ID09IFwiY29sdW1uXCIpIG1vdmVPbmNlKHRydWUpO1xuICAgIGVsc2UgaWYgKHVuaXQgPT0gXCJ3b3JkXCIgfHwgdW5pdCA9PSBcImdyb3VwXCIpIHtcbiAgICAgIHZhciBzYXdUeXBlID0gbnVsbCwgZ3JvdXAgPSB1bml0ID09IFwiZ3JvdXBcIjtcbiAgICAgIHZhciBoZWxwZXIgPSBkb2MuY20gJiYgZG9jLmNtLmdldEhlbHBlcihwb3MsIFwid29yZENoYXJzXCIpO1xuICAgICAgZm9yICh2YXIgZmlyc3QgPSB0cnVlOzsgZmlyc3QgPSBmYWxzZSkge1xuICAgICAgICBpZiAoZGlyIDwgMCAmJiAhbW92ZU9uY2UoIWZpcnN0KSkgYnJlYWs7XG4gICAgICAgIHZhciBjdXIgPSBsaW5lT2JqLnRleHQuY2hhckF0KGNoKSB8fCBcIlxcblwiO1xuICAgICAgICB2YXIgdHlwZSA9IGlzV29yZENoYXIoY3VyLCBoZWxwZXIpID8gXCJ3XCJcbiAgICAgICAgICA6IGdyb3VwICYmIGN1ciA9PSBcIlxcblwiID8gXCJuXCJcbiAgICAgICAgICA6ICFncm91cCB8fCAvXFxzLy50ZXN0KGN1cikgPyBudWxsXG4gICAgICAgICAgOiBcInBcIjtcbiAgICAgICAgaWYgKGdyb3VwICYmICFmaXJzdCAmJiAhdHlwZSkgdHlwZSA9IFwic1wiO1xuICAgICAgICBpZiAoc2F3VHlwZSAmJiBzYXdUeXBlICE9IHR5cGUpIHtcbiAgICAgICAgICBpZiAoZGlyIDwgMCkge2RpciA9IDE7IG1vdmVPbmNlKCk7fVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGUpIHNhd1R5cGUgPSB0eXBlO1xuICAgICAgICBpZiAoZGlyID4gMCAmJiAhbW92ZU9uY2UoIWZpcnN0KSkgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciByZXN1bHQgPSBza2lwQXRvbWljKGRvYywgUG9zKGxpbmUsIGNoKSwgb3JpZ0RpciwgdHJ1ZSk7XG4gICAgaWYgKCFwb3NzaWJsZSkgcmVzdWx0LmhpdFNpZGUgPSB0cnVlO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyBGb3IgcmVsYXRpdmUgdmVydGljYWwgbW92ZW1lbnQuIERpciBtYXkgYmUgLTEgb3IgMS4gVW5pdCBjYW4gYmVcbiAgLy8gXCJwYWdlXCIgb3IgXCJsaW5lXCIuIFRoZSByZXN1bHRpbmcgcG9zaXRpb24gd2lsbCBoYXZlIGEgaGl0U2lkZT10cnVlXG4gIC8vIHByb3BlcnR5IGlmIGl0IHJlYWNoZWQgdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnQuXG4gIGZ1bmN0aW9uIGZpbmRQb3NWKGNtLCBwb3MsIGRpciwgdW5pdCkge1xuICAgIHZhciBkb2MgPSBjbS5kb2MsIHggPSBwb3MubGVmdCwgeTtcbiAgICBpZiAodW5pdCA9PSBcInBhZ2VcIikge1xuICAgICAgdmFyIHBhZ2VTaXplID0gTWF0aC5taW4oY20uZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodCwgd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpO1xuICAgICAgeSA9IHBvcy50b3AgKyBkaXIgKiAocGFnZVNpemUgLSAoZGlyIDwgMCA/IDEuNSA6IC41KSAqIHRleHRIZWlnaHQoY20uZGlzcGxheSkpO1xuICAgIH0gZWxzZSBpZiAodW5pdCA9PSBcImxpbmVcIikge1xuICAgICAgeSA9IGRpciA+IDAgPyBwb3MuYm90dG9tICsgMyA6IHBvcy50b3AgLSAzO1xuICAgIH1cbiAgICBmb3IgKDs7KSB7XG4gICAgICB2YXIgdGFyZ2V0ID0gY29vcmRzQ2hhcihjbSwgeCwgeSk7XG4gICAgICBpZiAoIXRhcmdldC5vdXRzaWRlKSBicmVhaztcbiAgICAgIGlmIChkaXIgPCAwID8geSA8PSAwIDogeSA+PSBkb2MuaGVpZ2h0KSB7IHRhcmdldC5oaXRTaWRlID0gdHJ1ZTsgYnJlYWs7IH1cbiAgICAgIHkgKz0gZGlyICogNTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuXG4gIC8vIEVESVRPUiBNRVRIT0RTXG5cbiAgLy8gVGhlIHB1YmxpY2x5IHZpc2libGUgQVBJLiBOb3RlIHRoYXQgbWV0aG9kT3AoZikgbWVhbnNcbiAgLy8gJ3dyYXAgZiBpbiBhbiBvcGVyYXRpb24sIHBlcmZvcm1lZCBvbiBpdHMgYHRoaXNgIHBhcmFtZXRlcicuXG5cbiAgLy8gVGhpcyBpcyBub3QgdGhlIGNvbXBsZXRlIHNldCBvZiBlZGl0b3IgbWV0aG9kcy4gTW9zdCBvZiB0aGVcbiAgLy8gbWV0aG9kcyBkZWZpbmVkIG9uIHRoZSBEb2MgdHlwZSBhcmUgYWxzbyBpbmplY3RlZCBpbnRvXG4gIC8vIENvZGVNaXJyb3IucHJvdG90eXBlLCBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgYW5kXG4gIC8vIGNvbnZlbmllbmNlLlxuXG4gIENvZGVNaXJyb3IucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBDb2RlTWlycm9yLFxuICAgIGZvY3VzOiBmdW5jdGlvbigpe3dpbmRvdy5mb2N1cygpOyB0aGlzLmRpc3BsYXkuaW5wdXQuZm9jdXMoKTt9LFxuXG4gICAgc2V0T3B0aW9uOiBmdW5jdGlvbihvcHRpb24sIHZhbHVlKSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucywgb2xkID0gb3B0aW9uc1tvcHRpb25dO1xuICAgICAgaWYgKG9wdGlvbnNbb3B0aW9uXSA9PSB2YWx1ZSAmJiBvcHRpb24gIT0gXCJtb2RlXCIpIHJldHVybjtcbiAgICAgIG9wdGlvbnNbb3B0aW9uXSA9IHZhbHVlO1xuICAgICAgaWYgKG9wdGlvbkhhbmRsZXJzLmhhc093blByb3BlcnR5KG9wdGlvbikpXG4gICAgICAgIG9wZXJhdGlvbih0aGlzLCBvcHRpb25IYW5kbGVyc1tvcHRpb25dKSh0aGlzLCB2YWx1ZSwgb2xkKTtcbiAgICB9LFxuXG4gICAgZ2V0T3B0aW9uOiBmdW5jdGlvbihvcHRpb24pIHtyZXR1cm4gdGhpcy5vcHRpb25zW29wdGlvbl07fSxcbiAgICBnZXREb2M6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLmRvYzt9LFxuXG4gICAgYWRkS2V5TWFwOiBmdW5jdGlvbihtYXAsIGJvdHRvbSkge1xuICAgICAgdGhpcy5zdGF0ZS5rZXlNYXBzW2JvdHRvbSA/IFwicHVzaFwiIDogXCJ1bnNoaWZ0XCJdKGdldEtleU1hcChtYXApKTtcbiAgICB9LFxuICAgIHJlbW92ZUtleU1hcDogZnVuY3Rpb24obWFwKSB7XG4gICAgICB2YXIgbWFwcyA9IHRoaXMuc3RhdGUua2V5TWFwcztcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFwcy5sZW5ndGg7ICsraSlcbiAgICAgICAgaWYgKG1hcHNbaV0gPT0gbWFwIHx8IG1hcHNbaV0ubmFtZSA9PSBtYXApIHtcbiAgICAgICAgICBtYXBzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBhZGRPdmVybGF5OiBtZXRob2RPcChmdW5jdGlvbihzcGVjLCBvcHRpb25zKSB7XG4gICAgICB2YXIgbW9kZSA9IHNwZWMudG9rZW4gPyBzcGVjIDogQ29kZU1pcnJvci5nZXRNb2RlKHRoaXMub3B0aW9ucywgc3BlYyk7XG4gICAgICBpZiAobW9kZS5zdGFydFN0YXRlKSB0aHJvdyBuZXcgRXJyb3IoXCJPdmVybGF5cyBtYXkgbm90IGJlIHN0YXRlZnVsLlwiKTtcbiAgICAgIHRoaXMuc3RhdGUub3ZlcmxheXMucHVzaCh7bW9kZTogbW9kZSwgbW9kZVNwZWM6IHNwZWMsIG9wYXF1ZTogb3B0aW9ucyAmJiBvcHRpb25zLm9wYXF1ZX0pO1xuICAgICAgdGhpcy5zdGF0ZS5tb2RlR2VuKys7XG4gICAgICByZWdDaGFuZ2UodGhpcyk7XG4gICAgfSksXG4gICAgcmVtb3ZlT3ZlcmxheTogbWV0aG9kT3AoZnVuY3Rpb24oc3BlYykge1xuICAgICAgdmFyIG92ZXJsYXlzID0gdGhpcy5zdGF0ZS5vdmVybGF5cztcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3ZlcmxheXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGN1ciA9IG92ZXJsYXlzW2ldLm1vZGVTcGVjO1xuICAgICAgICBpZiAoY3VyID09IHNwZWMgfHwgdHlwZW9mIHNwZWMgPT0gXCJzdHJpbmdcIiAmJiBjdXIubmFtZSA9PSBzcGVjKSB7XG4gICAgICAgICAgb3ZlcmxheXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgIHRoaXMuc3RhdGUubW9kZUdlbisrO1xuICAgICAgICAgIHJlZ0NoYW5nZSh0aGlzKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSxcblxuICAgIGluZGVudExpbmU6IG1ldGhvZE9wKGZ1bmN0aW9uKG4sIGRpciwgYWdncmVzc2l2ZSkge1xuICAgICAgaWYgKHR5cGVvZiBkaXIgIT0gXCJzdHJpbmdcIiAmJiB0eXBlb2YgZGlyICE9IFwibnVtYmVyXCIpIHtcbiAgICAgICAgaWYgKGRpciA9PSBudWxsKSBkaXIgPSB0aGlzLm9wdGlvbnMuc21hcnRJbmRlbnQgPyBcInNtYXJ0XCIgOiBcInByZXZcIjtcbiAgICAgICAgZWxzZSBkaXIgPSBkaXIgPyBcImFkZFwiIDogXCJzdWJ0cmFjdFwiO1xuICAgICAgfVxuICAgICAgaWYgKGlzTGluZSh0aGlzLmRvYywgbikpIGluZGVudExpbmUodGhpcywgbiwgZGlyLCBhZ2dyZXNzaXZlKTtcbiAgICB9KSxcbiAgICBpbmRlbnRTZWxlY3Rpb246IG1ldGhvZE9wKGZ1bmN0aW9uKGhvdykge1xuICAgICAgdmFyIHJhbmdlcyA9IHRoaXMuZG9jLnNlbC5yYW5nZXMsIGVuZCA9IC0xO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHJhbmdlID0gcmFuZ2VzW2ldO1xuICAgICAgICBpZiAoIXJhbmdlLmVtcHR5KCkpIHtcbiAgICAgICAgICB2YXIgZnJvbSA9IHJhbmdlLmZyb20oKSwgdG8gPSByYW5nZS50bygpO1xuICAgICAgICAgIHZhciBzdGFydCA9IE1hdGgubWF4KGVuZCwgZnJvbS5saW5lKTtcbiAgICAgICAgICBlbmQgPSBNYXRoLm1pbih0aGlzLmxhc3RMaW5lKCksIHRvLmxpbmUgLSAodG8uY2ggPyAwIDogMSkpICsgMTtcbiAgICAgICAgICBmb3IgKHZhciBqID0gc3RhcnQ7IGogPCBlbmQ7ICsrailcbiAgICAgICAgICAgIGluZGVudExpbmUodGhpcywgaiwgaG93KTtcbiAgICAgICAgICB2YXIgbmV3UmFuZ2VzID0gdGhpcy5kb2Muc2VsLnJhbmdlcztcbiAgICAgICAgICBpZiAoZnJvbS5jaCA9PSAwICYmIHJhbmdlcy5sZW5ndGggPT0gbmV3UmFuZ2VzLmxlbmd0aCAmJiBuZXdSYW5nZXNbaV0uZnJvbSgpLmNoID4gMClcbiAgICAgICAgICAgIHJlcGxhY2VPbmVTZWxlY3Rpb24odGhpcy5kb2MsIGksIG5ldyBSYW5nZShmcm9tLCBuZXdSYW5nZXNbaV0udG8oKSksIHNlbF9kb250U2Nyb2xsKTtcbiAgICAgICAgfSBlbHNlIGlmIChyYW5nZS5oZWFkLmxpbmUgPiBlbmQpIHtcbiAgICAgICAgICBpbmRlbnRMaW5lKHRoaXMsIHJhbmdlLmhlYWQubGluZSwgaG93LCB0cnVlKTtcbiAgICAgICAgICBlbmQgPSByYW5nZS5oZWFkLmxpbmU7XG4gICAgICAgICAgaWYgKGkgPT0gdGhpcy5kb2Muc2VsLnByaW1JbmRleCkgZW5zdXJlQ3Vyc29yVmlzaWJsZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pLFxuXG4gICAgLy8gRmV0Y2ggdGhlIHBhcnNlciB0b2tlbiBmb3IgYSBnaXZlbiBjaGFyYWN0ZXIuIFVzZWZ1bCBmb3IgaGFja3NcbiAgICAvLyB0aGF0IHdhbnQgdG8gaW5zcGVjdCB0aGUgbW9kZSBzdGF0ZSAoc2F5LCBmb3IgY29tcGxldGlvbikuXG4gICAgZ2V0VG9rZW5BdDogZnVuY3Rpb24ocG9zLCBwcmVjaXNlKSB7XG4gICAgICByZXR1cm4gdGFrZVRva2VuKHRoaXMsIHBvcywgcHJlY2lzZSk7XG4gICAgfSxcblxuICAgIGdldExpbmVUb2tlbnM6IGZ1bmN0aW9uKGxpbmUsIHByZWNpc2UpIHtcbiAgICAgIHJldHVybiB0YWtlVG9rZW4odGhpcywgUG9zKGxpbmUpLCBwcmVjaXNlLCB0cnVlKTtcbiAgICB9LFxuXG4gICAgZ2V0VG9rZW5UeXBlQXQ6IGZ1bmN0aW9uKHBvcykge1xuICAgICAgcG9zID0gY2xpcFBvcyh0aGlzLmRvYywgcG9zKTtcbiAgICAgIHZhciBzdHlsZXMgPSBnZXRMaW5lU3R5bGVzKHRoaXMsIGdldExpbmUodGhpcy5kb2MsIHBvcy5saW5lKSk7XG4gICAgICB2YXIgYmVmb3JlID0gMCwgYWZ0ZXIgPSAoc3R5bGVzLmxlbmd0aCAtIDEpIC8gMiwgY2ggPSBwb3MuY2g7XG4gICAgICB2YXIgdHlwZTtcbiAgICAgIGlmIChjaCA9PSAwKSB0eXBlID0gc3R5bGVzWzJdO1xuICAgICAgZWxzZSBmb3IgKDs7KSB7XG4gICAgICAgIHZhciBtaWQgPSAoYmVmb3JlICsgYWZ0ZXIpID4+IDE7XG4gICAgICAgIGlmICgobWlkID8gc3R5bGVzW21pZCAqIDIgLSAxXSA6IDApID49IGNoKSBhZnRlciA9IG1pZDtcbiAgICAgICAgZWxzZSBpZiAoc3R5bGVzW21pZCAqIDIgKyAxXSA8IGNoKSBiZWZvcmUgPSBtaWQgKyAxO1xuICAgICAgICBlbHNlIHsgdHlwZSA9IHN0eWxlc1ttaWQgKiAyICsgMl07IGJyZWFrOyB9XG4gICAgICB9XG4gICAgICB2YXIgY3V0ID0gdHlwZSA/IHR5cGUuaW5kZXhPZihcImNtLW92ZXJsYXkgXCIpIDogLTE7XG4gICAgICByZXR1cm4gY3V0IDwgMCA/IHR5cGUgOiBjdXQgPT0gMCA/IG51bGwgOiB0eXBlLnNsaWNlKDAsIGN1dCAtIDEpO1xuICAgIH0sXG5cbiAgICBnZXRNb2RlQXQ6IGZ1bmN0aW9uKHBvcykge1xuICAgICAgdmFyIG1vZGUgPSB0aGlzLmRvYy5tb2RlO1xuICAgICAgaWYgKCFtb2RlLmlubmVyTW9kZSkgcmV0dXJuIG1vZGU7XG4gICAgICByZXR1cm4gQ29kZU1pcnJvci5pbm5lck1vZGUobW9kZSwgdGhpcy5nZXRUb2tlbkF0KHBvcykuc3RhdGUpLm1vZGU7XG4gICAgfSxcblxuICAgIGdldEhlbHBlcjogZnVuY3Rpb24ocG9zLCB0eXBlKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRIZWxwZXJzKHBvcywgdHlwZSlbMF07XG4gICAgfSxcblxuICAgIGdldEhlbHBlcnM6IGZ1bmN0aW9uKHBvcywgdHlwZSkge1xuICAgICAgdmFyIGZvdW5kID0gW107XG4gICAgICBpZiAoIWhlbHBlcnMuaGFzT3duUHJvcGVydHkodHlwZSkpIHJldHVybiBmb3VuZDtcbiAgICAgIHZhciBoZWxwID0gaGVscGVyc1t0eXBlXSwgbW9kZSA9IHRoaXMuZ2V0TW9kZUF0KHBvcyk7XG4gICAgICBpZiAodHlwZW9mIG1vZGVbdHlwZV0gPT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpZiAoaGVscFttb2RlW3R5cGVdXSkgZm91bmQucHVzaChoZWxwW21vZGVbdHlwZV1dKTtcbiAgICAgIH0gZWxzZSBpZiAobW9kZVt0eXBlXSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vZGVbdHlwZV0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgdmFsID0gaGVscFttb2RlW3R5cGVdW2ldXTtcbiAgICAgICAgICBpZiAodmFsKSBmb3VuZC5wdXNoKHZhbCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobW9kZS5oZWxwZXJUeXBlICYmIGhlbHBbbW9kZS5oZWxwZXJUeXBlXSkge1xuICAgICAgICBmb3VuZC5wdXNoKGhlbHBbbW9kZS5oZWxwZXJUeXBlXSk7XG4gICAgICB9IGVsc2UgaWYgKGhlbHBbbW9kZS5uYW1lXSkge1xuICAgICAgICBmb3VuZC5wdXNoKGhlbHBbbW9kZS5uYW1lXSk7XG4gICAgICB9XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhlbHAuX2dsb2JhbC5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgY3VyID0gaGVscC5fZ2xvYmFsW2ldO1xuICAgICAgICBpZiAoY3VyLnByZWQobW9kZSwgdGhpcykgJiYgaW5kZXhPZihmb3VuZCwgY3VyLnZhbCkgPT0gLTEpXG4gICAgICAgICAgZm91bmQucHVzaChjdXIudmFsKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmb3VuZDtcbiAgICB9LFxuXG4gICAgZ2V0U3RhdGVBZnRlcjogZnVuY3Rpb24obGluZSwgcHJlY2lzZSkge1xuICAgICAgdmFyIGRvYyA9IHRoaXMuZG9jO1xuICAgICAgbGluZSA9IGNsaXBMaW5lKGRvYywgbGluZSA9PSBudWxsID8gZG9jLmZpcnN0ICsgZG9jLnNpemUgLSAxOiBsaW5lKTtcbiAgICAgIHJldHVybiBnZXRTdGF0ZUJlZm9yZSh0aGlzLCBsaW5lICsgMSwgcHJlY2lzZSk7XG4gICAgfSxcblxuICAgIGN1cnNvckNvb3JkczogZnVuY3Rpb24oc3RhcnQsIG1vZGUpIHtcbiAgICAgIHZhciBwb3MsIHJhbmdlID0gdGhpcy5kb2Muc2VsLnByaW1hcnkoKTtcbiAgICAgIGlmIChzdGFydCA9PSBudWxsKSBwb3MgPSByYW5nZS5oZWFkO1xuICAgICAgZWxzZSBpZiAodHlwZW9mIHN0YXJ0ID09IFwib2JqZWN0XCIpIHBvcyA9IGNsaXBQb3ModGhpcy5kb2MsIHN0YXJ0KTtcbiAgICAgIGVsc2UgcG9zID0gc3RhcnQgPyByYW5nZS5mcm9tKCkgOiByYW5nZS50bygpO1xuICAgICAgcmV0dXJuIGN1cnNvckNvb3Jkcyh0aGlzLCBwb3MsIG1vZGUgfHwgXCJwYWdlXCIpO1xuICAgIH0sXG5cbiAgICBjaGFyQ29vcmRzOiBmdW5jdGlvbihwb3MsIG1vZGUpIHtcbiAgICAgIHJldHVybiBjaGFyQ29vcmRzKHRoaXMsIGNsaXBQb3ModGhpcy5kb2MsIHBvcyksIG1vZGUgfHwgXCJwYWdlXCIpO1xuICAgIH0sXG5cbiAgICBjb29yZHNDaGFyOiBmdW5jdGlvbihjb29yZHMsIG1vZGUpIHtcbiAgICAgIGNvb3JkcyA9IGZyb21Db29yZFN5c3RlbSh0aGlzLCBjb29yZHMsIG1vZGUgfHwgXCJwYWdlXCIpO1xuICAgICAgcmV0dXJuIGNvb3Jkc0NoYXIodGhpcywgY29vcmRzLmxlZnQsIGNvb3Jkcy50b3ApO1xuICAgIH0sXG5cbiAgICBsaW5lQXRIZWlnaHQ6IGZ1bmN0aW9uKGhlaWdodCwgbW9kZSkge1xuICAgICAgaGVpZ2h0ID0gZnJvbUNvb3JkU3lzdGVtKHRoaXMsIHt0b3A6IGhlaWdodCwgbGVmdDogMH0sIG1vZGUgfHwgXCJwYWdlXCIpLnRvcDtcbiAgICAgIHJldHVybiBsaW5lQXRIZWlnaHQodGhpcy5kb2MsIGhlaWdodCArIHRoaXMuZGlzcGxheS52aWV3T2Zmc2V0KTtcbiAgICB9LFxuICAgIGhlaWdodEF0TGluZTogZnVuY3Rpb24obGluZSwgbW9kZSkge1xuICAgICAgdmFyIGVuZCA9IGZhbHNlLCBsaW5lT2JqO1xuICAgICAgaWYgKHR5cGVvZiBsaW5lID09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgdmFyIGxhc3QgPSB0aGlzLmRvYy5maXJzdCArIHRoaXMuZG9jLnNpemUgLSAxO1xuICAgICAgICBpZiAobGluZSA8IHRoaXMuZG9jLmZpcnN0KSBsaW5lID0gdGhpcy5kb2MuZmlyc3Q7XG4gICAgICAgIGVsc2UgaWYgKGxpbmUgPiBsYXN0KSB7IGxpbmUgPSBsYXN0OyBlbmQgPSB0cnVlOyB9XG4gICAgICAgIGxpbmVPYmogPSBnZXRMaW5lKHRoaXMuZG9jLCBsaW5lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpbmVPYmogPSBsaW5lO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGludG9Db29yZFN5c3RlbSh0aGlzLCBsaW5lT2JqLCB7dG9wOiAwLCBsZWZ0OiAwfSwgbW9kZSB8fCBcInBhZ2VcIikudG9wICtcbiAgICAgICAgKGVuZCA/IHRoaXMuZG9jLmhlaWdodCAtIGhlaWdodEF0TGluZShsaW5lT2JqKSA6IDApO1xuICAgIH0sXG5cbiAgICBkZWZhdWx0VGV4dEhlaWdodDogZnVuY3Rpb24oKSB7IHJldHVybiB0ZXh0SGVpZ2h0KHRoaXMuZGlzcGxheSk7IH0sXG4gICAgZGVmYXVsdENoYXJXaWR0aDogZnVuY3Rpb24oKSB7IHJldHVybiBjaGFyV2lkdGgodGhpcy5kaXNwbGF5KTsgfSxcblxuICAgIHNldEd1dHRlck1hcmtlcjogbWV0aG9kT3AoZnVuY3Rpb24obGluZSwgZ3V0dGVySUQsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gY2hhbmdlTGluZSh0aGlzLmRvYywgbGluZSwgXCJndXR0ZXJcIiwgZnVuY3Rpb24obGluZSkge1xuICAgICAgICB2YXIgbWFya2VycyA9IGxpbmUuZ3V0dGVyTWFya2VycyB8fCAobGluZS5ndXR0ZXJNYXJrZXJzID0ge30pO1xuICAgICAgICBtYXJrZXJzW2d1dHRlcklEXSA9IHZhbHVlO1xuICAgICAgICBpZiAoIXZhbHVlICYmIGlzRW1wdHkobWFya2VycykpIGxpbmUuZ3V0dGVyTWFya2VycyA9IG51bGw7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG4gICAgfSksXG5cbiAgICBjbGVhckd1dHRlcjogbWV0aG9kT3AoZnVuY3Rpb24oZ3V0dGVySUQpIHtcbiAgICAgIHZhciBjbSA9IHRoaXMsIGRvYyA9IGNtLmRvYywgaSA9IGRvYy5maXJzdDtcbiAgICAgIGRvYy5pdGVyKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgaWYgKGxpbmUuZ3V0dGVyTWFya2VycyAmJiBsaW5lLmd1dHRlck1hcmtlcnNbZ3V0dGVySURdKSB7XG4gICAgICAgICAgbGluZS5ndXR0ZXJNYXJrZXJzW2d1dHRlcklEXSA9IG51bGw7XG4gICAgICAgICAgcmVnTGluZUNoYW5nZShjbSwgaSwgXCJndXR0ZXJcIik7XG4gICAgICAgICAgaWYgKGlzRW1wdHkobGluZS5ndXR0ZXJNYXJrZXJzKSkgbGluZS5ndXR0ZXJNYXJrZXJzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICArK2k7XG4gICAgICB9KTtcbiAgICB9KSxcblxuICAgIGxpbmVJbmZvOiBmdW5jdGlvbihsaW5lKSB7XG4gICAgICBpZiAodHlwZW9mIGxpbmUgPT0gXCJudW1iZXJcIikge1xuICAgICAgICBpZiAoIWlzTGluZSh0aGlzLmRvYywgbGluZSkpIHJldHVybiBudWxsO1xuICAgICAgICB2YXIgbiA9IGxpbmU7XG4gICAgICAgIGxpbmUgPSBnZXRMaW5lKHRoaXMuZG9jLCBsaW5lKTtcbiAgICAgICAgaWYgKCFsaW5lKSByZXR1cm4gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBuID0gbGluZU5vKGxpbmUpO1xuICAgICAgICBpZiAobiA9PSBudWxsKSByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7bGluZTogbiwgaGFuZGxlOiBsaW5lLCB0ZXh0OiBsaW5lLnRleHQsIGd1dHRlck1hcmtlcnM6IGxpbmUuZ3V0dGVyTWFya2VycyxcbiAgICAgICAgICAgICAgdGV4dENsYXNzOiBsaW5lLnRleHRDbGFzcywgYmdDbGFzczogbGluZS5iZ0NsYXNzLCB3cmFwQ2xhc3M6IGxpbmUud3JhcENsYXNzLFxuICAgICAgICAgICAgICB3aWRnZXRzOiBsaW5lLndpZGdldHN9O1xuICAgIH0sXG5cbiAgICBnZXRWaWV3cG9ydDogZnVuY3Rpb24oKSB7IHJldHVybiB7ZnJvbTogdGhpcy5kaXNwbGF5LnZpZXdGcm9tLCB0bzogdGhpcy5kaXNwbGF5LnZpZXdUb307fSxcblxuICAgIGFkZFdpZGdldDogZnVuY3Rpb24ocG9zLCBub2RlLCBzY3JvbGwsIHZlcnQsIGhvcml6KSB7XG4gICAgICB2YXIgZGlzcGxheSA9IHRoaXMuZGlzcGxheTtcbiAgICAgIHBvcyA9IGN1cnNvckNvb3Jkcyh0aGlzLCBjbGlwUG9zKHRoaXMuZG9jLCBwb3MpKTtcbiAgICAgIHZhciB0b3AgPSBwb3MuYm90dG9tLCBsZWZ0ID0gcG9zLmxlZnQ7XG4gICAgICBub2RlLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoXCJjbS1pZ25vcmUtZXZlbnRzXCIsIFwidHJ1ZVwiKTtcbiAgICAgIHRoaXMuZGlzcGxheS5pbnB1dC5zZXRVbmVkaXRhYmxlKG5vZGUpO1xuICAgICAgZGlzcGxheS5zaXplci5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgIGlmICh2ZXJ0ID09IFwib3ZlclwiKSB7XG4gICAgICAgIHRvcCA9IHBvcy50b3A7XG4gICAgICB9IGVsc2UgaWYgKHZlcnQgPT0gXCJhYm92ZVwiIHx8IHZlcnQgPT0gXCJuZWFyXCIpIHtcbiAgICAgICAgdmFyIHZzcGFjZSA9IE1hdGgubWF4KGRpc3BsYXkud3JhcHBlci5jbGllbnRIZWlnaHQsIHRoaXMuZG9jLmhlaWdodCksXG4gICAgICAgIGhzcGFjZSA9IE1hdGgubWF4KGRpc3BsYXkuc2l6ZXIuY2xpZW50V2lkdGgsIGRpc3BsYXkubGluZVNwYWNlLmNsaWVudFdpZHRoKTtcbiAgICAgICAgLy8gRGVmYXVsdCB0byBwb3NpdGlvbmluZyBhYm92ZSAoaWYgc3BlY2lmaWVkIGFuZCBwb3NzaWJsZSk7IG90aGVyd2lzZSBkZWZhdWx0IHRvIHBvc2l0aW9uaW5nIGJlbG93XG4gICAgICAgIGlmICgodmVydCA9PSAnYWJvdmUnIHx8IHBvcy5ib3R0b20gKyBub2RlLm9mZnNldEhlaWdodCA+IHZzcGFjZSkgJiYgcG9zLnRvcCA+IG5vZGUub2Zmc2V0SGVpZ2h0KVxuICAgICAgICAgIHRvcCA9IHBvcy50b3AgLSBub2RlLm9mZnNldEhlaWdodDtcbiAgICAgICAgZWxzZSBpZiAocG9zLmJvdHRvbSArIG5vZGUub2Zmc2V0SGVpZ2h0IDw9IHZzcGFjZSlcbiAgICAgICAgICB0b3AgPSBwb3MuYm90dG9tO1xuICAgICAgICBpZiAobGVmdCArIG5vZGUub2Zmc2V0V2lkdGggPiBoc3BhY2UpXG4gICAgICAgICAgbGVmdCA9IGhzcGFjZSAtIG5vZGUub2Zmc2V0V2lkdGg7XG4gICAgICB9XG4gICAgICBub2RlLnN0eWxlLnRvcCA9IHRvcCArIFwicHhcIjtcbiAgICAgIG5vZGUuc3R5bGUubGVmdCA9IG5vZGUuc3R5bGUucmlnaHQgPSBcIlwiO1xuICAgICAgaWYgKGhvcml6ID09IFwicmlnaHRcIikge1xuICAgICAgICBsZWZ0ID0gZGlzcGxheS5zaXplci5jbGllbnRXaWR0aCAtIG5vZGUub2Zmc2V0V2lkdGg7XG4gICAgICAgIG5vZGUuc3R5bGUucmlnaHQgPSBcIjBweFwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGhvcml6ID09IFwibGVmdFwiKSBsZWZ0ID0gMDtcbiAgICAgICAgZWxzZSBpZiAoaG9yaXogPT0gXCJtaWRkbGVcIikgbGVmdCA9IChkaXNwbGF5LnNpemVyLmNsaWVudFdpZHRoIC0gbm9kZS5vZmZzZXRXaWR0aCkgLyAyO1xuICAgICAgICBub2RlLnN0eWxlLmxlZnQgPSBsZWZ0ICsgXCJweFwiO1xuICAgICAgfVxuICAgICAgaWYgKHNjcm9sbClcbiAgICAgICAgc2Nyb2xsSW50b1ZpZXcodGhpcywgbGVmdCwgdG9wLCBsZWZ0ICsgbm9kZS5vZmZzZXRXaWR0aCwgdG9wICsgbm9kZS5vZmZzZXRIZWlnaHQpO1xuICAgIH0sXG5cbiAgICB0cmlnZ2VyT25LZXlEb3duOiBtZXRob2RPcChvbktleURvd24pLFxuICAgIHRyaWdnZXJPbktleVByZXNzOiBtZXRob2RPcChvbktleVByZXNzKSxcbiAgICB0cmlnZ2VyT25LZXlVcDogb25LZXlVcCxcblxuICAgIGV4ZWNDb21tYW5kOiBmdW5jdGlvbihjbWQpIHtcbiAgICAgIGlmIChjb21tYW5kcy5oYXNPd25Qcm9wZXJ0eShjbWQpKVxuICAgICAgICByZXR1cm4gY29tbWFuZHNbY21kXS5jYWxsKG51bGwsIHRoaXMpO1xuICAgIH0sXG5cbiAgICB0cmlnZ2VyRWxlY3RyaWM6IG1ldGhvZE9wKGZ1bmN0aW9uKHRleHQpIHsgdHJpZ2dlckVsZWN0cmljKHRoaXMsIHRleHQpOyB9KSxcblxuICAgIGZpbmRQb3NIOiBmdW5jdGlvbihmcm9tLCBhbW91bnQsIHVuaXQsIHZpc3VhbGx5KSB7XG4gICAgICB2YXIgZGlyID0gMTtcbiAgICAgIGlmIChhbW91bnQgPCAwKSB7IGRpciA9IC0xOyBhbW91bnQgPSAtYW1vdW50OyB9XG4gICAgICBmb3IgKHZhciBpID0gMCwgY3VyID0gY2xpcFBvcyh0aGlzLmRvYywgZnJvbSk7IGkgPCBhbW91bnQ7ICsraSkge1xuICAgICAgICBjdXIgPSBmaW5kUG9zSCh0aGlzLmRvYywgY3VyLCBkaXIsIHVuaXQsIHZpc3VhbGx5KTtcbiAgICAgICAgaWYgKGN1ci5oaXRTaWRlKSBicmVhaztcbiAgICAgIH1cbiAgICAgIHJldHVybiBjdXI7XG4gICAgfSxcblxuICAgIG1vdmVIOiBtZXRob2RPcChmdW5jdGlvbihkaXIsIHVuaXQpIHtcbiAgICAgIHZhciBjbSA9IHRoaXM7XG4gICAgICBjbS5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24ocmFuZ2UpIHtcbiAgICAgICAgaWYgKGNtLmRpc3BsYXkuc2hpZnQgfHwgY20uZG9jLmV4dGVuZCB8fCByYW5nZS5lbXB0eSgpKVxuICAgICAgICAgIHJldHVybiBmaW5kUG9zSChjbS5kb2MsIHJhbmdlLmhlYWQsIGRpciwgdW5pdCwgY20ub3B0aW9ucy5ydGxNb3ZlVmlzdWFsbHkpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgcmV0dXJuIGRpciA8IDAgPyByYW5nZS5mcm9tKCkgOiByYW5nZS50bygpO1xuICAgICAgfSwgc2VsX21vdmUpO1xuICAgIH0pLFxuXG4gICAgZGVsZXRlSDogbWV0aG9kT3AoZnVuY3Rpb24oZGlyLCB1bml0KSB7XG4gICAgICB2YXIgc2VsID0gdGhpcy5kb2Muc2VsLCBkb2MgPSB0aGlzLmRvYztcbiAgICAgIGlmIChzZWwuc29tZXRoaW5nU2VsZWN0ZWQoKSlcbiAgICAgICAgZG9jLnJlcGxhY2VTZWxlY3Rpb24oXCJcIiwgbnVsbCwgXCIrZGVsZXRlXCIpO1xuICAgICAgZWxzZVxuICAgICAgICBkZWxldGVOZWFyU2VsZWN0aW9uKHRoaXMsIGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgICAgdmFyIG90aGVyID0gZmluZFBvc0goZG9jLCByYW5nZS5oZWFkLCBkaXIsIHVuaXQsIGZhbHNlKTtcbiAgICAgICAgICByZXR1cm4gZGlyIDwgMCA/IHtmcm9tOiBvdGhlciwgdG86IHJhbmdlLmhlYWR9IDoge2Zyb206IHJhbmdlLmhlYWQsIHRvOiBvdGhlcn07XG4gICAgICAgIH0pO1xuICAgIH0pLFxuXG4gICAgZmluZFBvc1Y6IGZ1bmN0aW9uKGZyb20sIGFtb3VudCwgdW5pdCwgZ29hbENvbHVtbikge1xuICAgICAgdmFyIGRpciA9IDEsIHggPSBnb2FsQ29sdW1uO1xuICAgICAgaWYgKGFtb3VudCA8IDApIHsgZGlyID0gLTE7IGFtb3VudCA9IC1hbW91bnQ7IH1cbiAgICAgIGZvciAodmFyIGkgPSAwLCBjdXIgPSBjbGlwUG9zKHRoaXMuZG9jLCBmcm9tKTsgaSA8IGFtb3VudDsgKytpKSB7XG4gICAgICAgIHZhciBjb29yZHMgPSBjdXJzb3JDb29yZHModGhpcywgY3VyLCBcImRpdlwiKTtcbiAgICAgICAgaWYgKHggPT0gbnVsbCkgeCA9IGNvb3Jkcy5sZWZ0O1xuICAgICAgICBlbHNlIGNvb3Jkcy5sZWZ0ID0geDtcbiAgICAgICAgY3VyID0gZmluZFBvc1YodGhpcywgY29vcmRzLCBkaXIsIHVuaXQpO1xuICAgICAgICBpZiAoY3VyLmhpdFNpZGUpIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGN1cjtcbiAgICB9LFxuXG4gICAgbW92ZVY6IG1ldGhvZE9wKGZ1bmN0aW9uKGRpciwgdW5pdCkge1xuICAgICAgdmFyIGNtID0gdGhpcywgZG9jID0gdGhpcy5kb2MsIGdvYWxzID0gW107XG4gICAgICB2YXIgY29sbGFwc2UgPSAhY20uZGlzcGxheS5zaGlmdCAmJiAhZG9jLmV4dGVuZCAmJiBkb2Muc2VsLnNvbWV0aGluZ1NlbGVjdGVkKCk7XG4gICAgICBkb2MuZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgIGlmIChjb2xsYXBzZSlcbiAgICAgICAgICByZXR1cm4gZGlyIDwgMCA/IHJhbmdlLmZyb20oKSA6IHJhbmdlLnRvKCk7XG4gICAgICAgIHZhciBoZWFkUG9zID0gY3Vyc29yQ29vcmRzKGNtLCByYW5nZS5oZWFkLCBcImRpdlwiKTtcbiAgICAgICAgaWYgKHJhbmdlLmdvYWxDb2x1bW4gIT0gbnVsbCkgaGVhZFBvcy5sZWZ0ID0gcmFuZ2UuZ29hbENvbHVtbjtcbiAgICAgICAgZ29hbHMucHVzaChoZWFkUG9zLmxlZnQpO1xuICAgICAgICB2YXIgcG9zID0gZmluZFBvc1YoY20sIGhlYWRQb3MsIGRpciwgdW5pdCk7XG4gICAgICAgIGlmICh1bml0ID09IFwicGFnZVwiICYmIHJhbmdlID09IGRvYy5zZWwucHJpbWFyeSgpKVxuICAgICAgICAgIGFkZFRvU2Nyb2xsUG9zKGNtLCBudWxsLCBjaGFyQ29vcmRzKGNtLCBwb3MsIFwiZGl2XCIpLnRvcCAtIGhlYWRQb3MudG9wKTtcbiAgICAgICAgcmV0dXJuIHBvcztcbiAgICAgIH0sIHNlbF9tb3ZlKTtcbiAgICAgIGlmIChnb2Fscy5sZW5ndGgpIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLnNlbC5yYW5nZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIGRvYy5zZWwucmFuZ2VzW2ldLmdvYWxDb2x1bW4gPSBnb2Fsc1tpXTtcbiAgICB9KSxcblxuICAgIC8vIEZpbmQgdGhlIHdvcmQgYXQgdGhlIGdpdmVuIHBvc2l0aW9uIChhcyByZXR1cm5lZCBieSBjb29yZHNDaGFyKS5cbiAgICBmaW5kV29yZEF0OiBmdW5jdGlvbihwb3MpIHtcbiAgICAgIHZhciBkb2MgPSB0aGlzLmRvYywgbGluZSA9IGdldExpbmUoZG9jLCBwb3MubGluZSkudGV4dDtcbiAgICAgIHZhciBzdGFydCA9IHBvcy5jaCwgZW5kID0gcG9zLmNoO1xuICAgICAgaWYgKGxpbmUpIHtcbiAgICAgICAgdmFyIGhlbHBlciA9IHRoaXMuZ2V0SGVscGVyKHBvcywgXCJ3b3JkQ2hhcnNcIik7XG4gICAgICAgIGlmICgocG9zLnhSZWwgPCAwIHx8IGVuZCA9PSBsaW5lLmxlbmd0aCkgJiYgc3RhcnQpIC0tc3RhcnQ7IGVsc2UgKytlbmQ7XG4gICAgICAgIHZhciBzdGFydENoYXIgPSBsaW5lLmNoYXJBdChzdGFydCk7XG4gICAgICAgIHZhciBjaGVjayA9IGlzV29yZENoYXIoc3RhcnRDaGFyLCBoZWxwZXIpXG4gICAgICAgICAgPyBmdW5jdGlvbihjaCkgeyByZXR1cm4gaXNXb3JkQ2hhcihjaCwgaGVscGVyKTsgfVxuICAgICAgICAgIDogL1xccy8udGVzdChzdGFydENoYXIpID8gZnVuY3Rpb24oY2gpIHtyZXR1cm4gL1xccy8udGVzdChjaCk7fVxuICAgICAgICAgIDogZnVuY3Rpb24oY2gpIHtyZXR1cm4gIS9cXHMvLnRlc3QoY2gpICYmICFpc1dvcmRDaGFyKGNoKTt9O1xuICAgICAgICB3aGlsZSAoc3RhcnQgPiAwICYmIGNoZWNrKGxpbmUuY2hhckF0KHN0YXJ0IC0gMSkpKSAtLXN0YXJ0O1xuICAgICAgICB3aGlsZSAoZW5kIDwgbGluZS5sZW5ndGggJiYgY2hlY2sobGluZS5jaGFyQXQoZW5kKSkpICsrZW5kO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBSYW5nZShQb3MocG9zLmxpbmUsIHN0YXJ0KSwgUG9zKHBvcy5saW5lLCBlbmQpKTtcbiAgICB9LFxuXG4gICAgdG9nZ2xlT3ZlcndyaXRlOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgdmFsdWUgPT0gdGhpcy5zdGF0ZS5vdmVyd3JpdGUpIHJldHVybjtcbiAgICAgIGlmICh0aGlzLnN0YXRlLm92ZXJ3cml0ZSA9ICF0aGlzLnN0YXRlLm92ZXJ3cml0ZSlcbiAgICAgICAgYWRkQ2xhc3ModGhpcy5kaXNwbGF5LmN1cnNvckRpdiwgXCJDb2RlTWlycm9yLW92ZXJ3cml0ZVwiKTtcbiAgICAgIGVsc2VcbiAgICAgICAgcm1DbGFzcyh0aGlzLmRpc3BsYXkuY3Vyc29yRGl2LCBcIkNvZGVNaXJyb3Itb3ZlcndyaXRlXCIpO1xuXG4gICAgICBzaWduYWwodGhpcywgXCJvdmVyd3JpdGVUb2dnbGVcIiwgdGhpcywgdGhpcy5zdGF0ZS5vdmVyd3JpdGUpO1xuICAgIH0sXG4gICAgaGFzRm9jdXM6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5kaXNwbGF5LmlucHV0LmdldEZpZWxkKCkgPT0gYWN0aXZlRWx0KCk7IH0sXG5cbiAgICBzY3JvbGxUbzogbWV0aG9kT3AoZnVuY3Rpb24oeCwgeSkge1xuICAgICAgaWYgKHggIT0gbnVsbCB8fCB5ICE9IG51bGwpIHJlc29sdmVTY3JvbGxUb1Bvcyh0aGlzKTtcbiAgICAgIGlmICh4ICE9IG51bGwpIHRoaXMuY3VyT3Auc2Nyb2xsTGVmdCA9IHg7XG4gICAgICBpZiAoeSAhPSBudWxsKSB0aGlzLmN1ck9wLnNjcm9sbFRvcCA9IHk7XG4gICAgfSksXG4gICAgZ2V0U2Nyb2xsSW5mbzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2Nyb2xsZXIgPSB0aGlzLmRpc3BsYXkuc2Nyb2xsZXI7XG4gICAgICByZXR1cm4ge2xlZnQ6IHNjcm9sbGVyLnNjcm9sbExlZnQsIHRvcDogc2Nyb2xsZXIuc2Nyb2xsVG9wLFxuICAgICAgICAgICAgICBoZWlnaHQ6IHNjcm9sbGVyLnNjcm9sbEhlaWdodCAtIHNjcm9sbEdhcCh0aGlzKSAtIHRoaXMuZGlzcGxheS5iYXJIZWlnaHQsXG4gICAgICAgICAgICAgIHdpZHRoOiBzY3JvbGxlci5zY3JvbGxXaWR0aCAtIHNjcm9sbEdhcCh0aGlzKSAtIHRoaXMuZGlzcGxheS5iYXJXaWR0aCxcbiAgICAgICAgICAgICAgY2xpZW50SGVpZ2h0OiBkaXNwbGF5SGVpZ2h0KHRoaXMpLCBjbGllbnRXaWR0aDogZGlzcGxheVdpZHRoKHRoaXMpfTtcbiAgICB9LFxuXG4gICAgc2Nyb2xsSW50b1ZpZXc6IG1ldGhvZE9wKGZ1bmN0aW9uKHJhbmdlLCBtYXJnaW4pIHtcbiAgICAgIGlmIChyYW5nZSA9PSBudWxsKSB7XG4gICAgICAgIHJhbmdlID0ge2Zyb206IHRoaXMuZG9jLnNlbC5wcmltYXJ5KCkuaGVhZCwgdG86IG51bGx9O1xuICAgICAgICBpZiAobWFyZ2luID09IG51bGwpIG1hcmdpbiA9IHRoaXMub3B0aW9ucy5jdXJzb3JTY3JvbGxNYXJnaW47XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiByYW5nZSA9PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHJhbmdlID0ge2Zyb206IFBvcyhyYW5nZSwgMCksIHRvOiBudWxsfTtcbiAgICAgIH0gZWxzZSBpZiAocmFuZ2UuZnJvbSA9PSBudWxsKSB7XG4gICAgICAgIHJhbmdlID0ge2Zyb206IHJhbmdlLCB0bzogbnVsbH07XG4gICAgICB9XG4gICAgICBpZiAoIXJhbmdlLnRvKSByYW5nZS50byA9IHJhbmdlLmZyb207XG4gICAgICByYW5nZS5tYXJnaW4gPSBtYXJnaW4gfHwgMDtcblxuICAgICAgaWYgKHJhbmdlLmZyb20ubGluZSAhPSBudWxsKSB7XG4gICAgICAgIHJlc29sdmVTY3JvbGxUb1Bvcyh0aGlzKTtcbiAgICAgICAgdGhpcy5jdXJPcC5zY3JvbGxUb1BvcyA9IHJhbmdlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHNQb3MgPSBjYWxjdWxhdGVTY3JvbGxQb3ModGhpcywgTWF0aC5taW4ocmFuZ2UuZnJvbS5sZWZ0LCByYW5nZS50by5sZWZ0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4ocmFuZ2UuZnJvbS50b3AsIHJhbmdlLnRvLnRvcCkgLSByYW5nZS5tYXJnaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KHJhbmdlLmZyb20ucmlnaHQsIHJhbmdlLnRvLnJpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgocmFuZ2UuZnJvbS5ib3R0b20sIHJhbmdlLnRvLmJvdHRvbSkgKyByYW5nZS5tYXJnaW4pO1xuICAgICAgICB0aGlzLnNjcm9sbFRvKHNQb3Muc2Nyb2xsTGVmdCwgc1Bvcy5zY3JvbGxUb3ApO1xuICAgICAgfVxuICAgIH0pLFxuXG4gICAgc2V0U2l6ZTogbWV0aG9kT3AoZnVuY3Rpb24od2lkdGgsIGhlaWdodCkge1xuICAgICAgdmFyIGNtID0gdGhpcztcbiAgICAgIGZ1bmN0aW9uIGludGVycHJldCh2YWwpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWwgPT0gXCJudW1iZXJcIiB8fCAvXlxcZCskLy50ZXN0KFN0cmluZyh2YWwpKSA/IHZhbCArIFwicHhcIiA6IHZhbDtcbiAgICAgIH1cbiAgICAgIGlmICh3aWR0aCAhPSBudWxsKSBjbS5kaXNwbGF5LndyYXBwZXIuc3R5bGUud2lkdGggPSBpbnRlcnByZXQod2lkdGgpO1xuICAgICAgaWYgKGhlaWdodCAhPSBudWxsKSBjbS5kaXNwbGF5LndyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gaW50ZXJwcmV0KGhlaWdodCk7XG4gICAgICBpZiAoY20ub3B0aW9ucy5saW5lV3JhcHBpbmcpIGNsZWFyTGluZU1lYXN1cmVtZW50Q2FjaGUodGhpcyk7XG4gICAgICB2YXIgbGluZU5vID0gY20uZGlzcGxheS52aWV3RnJvbTtcbiAgICAgIGNtLmRvYy5pdGVyKGxpbmVObywgY20uZGlzcGxheS52aWV3VG8sIGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgaWYgKGxpbmUud2lkZ2V0cykgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lLndpZGdldHMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgaWYgKGxpbmUud2lkZ2V0c1tpXS5ub0hTY3JvbGwpIHsgcmVnTGluZUNoYW5nZShjbSwgbGluZU5vLCBcIndpZGdldFwiKTsgYnJlYWs7IH1cbiAgICAgICAgKytsaW5lTm87XG4gICAgICB9KTtcbiAgICAgIGNtLmN1ck9wLmZvcmNlVXBkYXRlID0gdHJ1ZTtcbiAgICAgIHNpZ25hbChjbSwgXCJyZWZyZXNoXCIsIHRoaXMpO1xuICAgIH0pLFxuXG4gICAgb3BlcmF0aW9uOiBmdW5jdGlvbihmKXtyZXR1cm4gcnVuSW5PcCh0aGlzLCBmKTt9LFxuXG4gICAgcmVmcmVzaDogbWV0aG9kT3AoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgb2xkSGVpZ2h0ID0gdGhpcy5kaXNwbGF5LmNhY2hlZFRleHRIZWlnaHQ7XG4gICAgICByZWdDaGFuZ2UodGhpcyk7XG4gICAgICB0aGlzLmN1ck9wLmZvcmNlVXBkYXRlID0gdHJ1ZTtcbiAgICAgIGNsZWFyQ2FjaGVzKHRoaXMpO1xuICAgICAgdGhpcy5zY3JvbGxUbyh0aGlzLmRvYy5zY3JvbGxMZWZ0LCB0aGlzLmRvYy5zY3JvbGxUb3ApO1xuICAgICAgdXBkYXRlR3V0dGVyU3BhY2UodGhpcyk7XG4gICAgICBpZiAob2xkSGVpZ2h0ID09IG51bGwgfHwgTWF0aC5hYnMob2xkSGVpZ2h0IC0gdGV4dEhlaWdodCh0aGlzLmRpc3BsYXkpKSA+IC41KVxuICAgICAgICBlc3RpbWF0ZUxpbmVIZWlnaHRzKHRoaXMpO1xuICAgICAgc2lnbmFsKHRoaXMsIFwicmVmcmVzaFwiLCB0aGlzKTtcbiAgICB9KSxcblxuICAgIHN3YXBEb2M6IG1ldGhvZE9wKGZ1bmN0aW9uKGRvYykge1xuICAgICAgdmFyIG9sZCA9IHRoaXMuZG9jO1xuICAgICAgb2xkLmNtID0gbnVsbDtcbiAgICAgIGF0dGFjaERvYyh0aGlzLCBkb2MpO1xuICAgICAgY2xlYXJDYWNoZXModGhpcyk7XG4gICAgICB0aGlzLmRpc3BsYXkuaW5wdXQucmVzZXQoKTtcbiAgICAgIHRoaXMuc2Nyb2xsVG8oZG9jLnNjcm9sbExlZnQsIGRvYy5zY3JvbGxUb3ApO1xuICAgICAgdGhpcy5jdXJPcC5mb3JjZVNjcm9sbCA9IHRydWU7XG4gICAgICBzaWduYWxMYXRlcih0aGlzLCBcInN3YXBEb2NcIiwgdGhpcywgb2xkKTtcbiAgICAgIHJldHVybiBvbGQ7XG4gICAgfSksXG5cbiAgICBnZXRJbnB1dEZpZWxkOiBmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc3BsYXkuaW5wdXQuZ2V0RmllbGQoKTt9LFxuICAgIGdldFdyYXBwZXJFbGVtZW50OiBmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc3BsYXkud3JhcHBlcjt9LFxuICAgIGdldFNjcm9sbGVyRWxlbWVudDogZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNwbGF5LnNjcm9sbGVyO30sXG4gICAgZ2V0R3V0dGVyRWxlbWVudDogZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNwbGF5Lmd1dHRlcnM7fVxuICB9O1xuICBldmVudE1peGluKENvZGVNaXJyb3IpO1xuXG4gIC8vIE9QVElPTiBERUZBVUxUU1xuXG4gIC8vIFRoZSBkZWZhdWx0IGNvbmZpZ3VyYXRpb24gb3B0aW9ucy5cbiAgdmFyIGRlZmF1bHRzID0gQ29kZU1pcnJvci5kZWZhdWx0cyA9IHt9O1xuICAvLyBGdW5jdGlvbnMgdG8gcnVuIHdoZW4gb3B0aW9ucyBhcmUgY2hhbmdlZC5cbiAgdmFyIG9wdGlvbkhhbmRsZXJzID0gQ29kZU1pcnJvci5vcHRpb25IYW5kbGVycyA9IHt9O1xuXG4gIGZ1bmN0aW9uIG9wdGlvbihuYW1lLCBkZWZsdCwgaGFuZGxlLCBub3RPbkluaXQpIHtcbiAgICBDb2RlTWlycm9yLmRlZmF1bHRzW25hbWVdID0gZGVmbHQ7XG4gICAgaWYgKGhhbmRsZSkgb3B0aW9uSGFuZGxlcnNbbmFtZV0gPVxuICAgICAgbm90T25Jbml0ID8gZnVuY3Rpb24oY20sIHZhbCwgb2xkKSB7aWYgKG9sZCAhPSBJbml0KSBoYW5kbGUoY20sIHZhbCwgb2xkKTt9IDogaGFuZGxlO1xuICB9XG5cbiAgLy8gUGFzc2VkIHRvIG9wdGlvbiBoYW5kbGVycyB3aGVuIHRoZXJlIGlzIG5vIG9sZCB2YWx1ZS5cbiAgdmFyIEluaXQgPSBDb2RlTWlycm9yLkluaXQgPSB7dG9TdHJpbmc6IGZ1bmN0aW9uKCl7cmV0dXJuIFwiQ29kZU1pcnJvci5Jbml0XCI7fX07XG5cbiAgLy8gVGhlc2UgdHdvIGFyZSwgb24gaW5pdCwgY2FsbGVkIGZyb20gdGhlIGNvbnN0cnVjdG9yIGJlY2F1c2UgdGhleVxuICAvLyBoYXZlIHRvIGJlIGluaXRpYWxpemVkIGJlZm9yZSB0aGUgZWRpdG9yIGNhbiBzdGFydCBhdCBhbGwuXG4gIG9wdGlvbihcInZhbHVlXCIsIFwiXCIsIGZ1bmN0aW9uKGNtLCB2YWwpIHtcbiAgICBjbS5zZXRWYWx1ZSh2YWwpO1xuICB9LCB0cnVlKTtcbiAgb3B0aW9uKFwibW9kZVwiLCBudWxsLCBmdW5jdGlvbihjbSwgdmFsKSB7XG4gICAgY20uZG9jLm1vZGVPcHRpb24gPSB2YWw7XG4gICAgbG9hZE1vZGUoY20pO1xuICB9LCB0cnVlKTtcblxuICBvcHRpb24oXCJpbmRlbnRVbml0XCIsIDIsIGxvYWRNb2RlLCB0cnVlKTtcbiAgb3B0aW9uKFwiaW5kZW50V2l0aFRhYnNcIiwgZmFsc2UpO1xuICBvcHRpb24oXCJzbWFydEluZGVudFwiLCB0cnVlKTtcbiAgb3B0aW9uKFwidGFiU2l6ZVwiLCA0LCBmdW5jdGlvbihjbSkge1xuICAgIHJlc2V0TW9kZVN0YXRlKGNtKTtcbiAgICBjbGVhckNhY2hlcyhjbSk7XG4gICAgcmVnQ2hhbmdlKGNtKTtcbiAgfSwgdHJ1ZSk7XG4gIG9wdGlvbihcImxpbmVTZXBhcmF0b3JcIiwgbnVsbCwgZnVuY3Rpb24oY20sIHZhbCkge1xuICAgIGNtLmRvYy5saW5lU2VwID0gdmFsO1xuICAgIGlmICghdmFsKSByZXR1cm47XG4gICAgdmFyIG5ld0JyZWFrcyA9IFtdLCBsaW5lTm8gPSBjbS5kb2MuZmlyc3Q7XG4gICAgY20uZG9jLml0ZXIoZnVuY3Rpb24obGluZSkge1xuICAgICAgZm9yICh2YXIgcG9zID0gMDs7KSB7XG4gICAgICAgIHZhciBmb3VuZCA9IGxpbmUudGV4dC5pbmRleE9mKHZhbCwgcG9zKTtcbiAgICAgICAgaWYgKGZvdW5kID09IC0xKSBicmVhaztcbiAgICAgICAgcG9zID0gZm91bmQgKyB2YWwubGVuZ3RoO1xuICAgICAgICBuZXdCcmVha3MucHVzaChQb3MobGluZU5vLCBmb3VuZCkpO1xuICAgICAgfVxuICAgICAgbGluZU5vKys7XG4gICAgfSk7XG4gICAgZm9yICh2YXIgaSA9IG5ld0JyZWFrcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcbiAgICAgIHJlcGxhY2VSYW5nZShjbS5kb2MsIHZhbCwgbmV3QnJlYWtzW2ldLCBQb3MobmV3QnJlYWtzW2ldLmxpbmUsIG5ld0JyZWFrc1tpXS5jaCArIHZhbC5sZW5ndGgpKVxuICB9KTtcbiAgb3B0aW9uKFwic3BlY2lhbENoYXJzXCIsIC9bXFx0XFx1MDAwMC1cXHUwMDE5XFx1MDBhZFxcdTIwMGItXFx1MjAwZlxcdTIwMjhcXHUyMDI5XFx1ZmVmZl0vZywgZnVuY3Rpb24oY20sIHZhbCwgb2xkKSB7XG4gICAgY20uc3RhdGUuc3BlY2lhbENoYXJzID0gbmV3IFJlZ0V4cCh2YWwuc291cmNlICsgKHZhbC50ZXN0KFwiXFx0XCIpID8gXCJcIiA6IFwifFxcdFwiKSwgXCJnXCIpO1xuICAgIGlmIChvbGQgIT0gQ29kZU1pcnJvci5Jbml0KSBjbS5yZWZyZXNoKCk7XG4gIH0pO1xuICBvcHRpb24oXCJzcGVjaWFsQ2hhclBsYWNlaG9sZGVyXCIsIGRlZmF1bHRTcGVjaWFsQ2hhclBsYWNlaG9sZGVyLCBmdW5jdGlvbihjbSkge2NtLnJlZnJlc2goKTt9LCB0cnVlKTtcbiAgb3B0aW9uKFwiZWxlY3RyaWNDaGFyc1wiLCB0cnVlKTtcbiAgb3B0aW9uKFwiaW5wdXRTdHlsZVwiLCBtb2JpbGUgPyBcImNvbnRlbnRlZGl0YWJsZVwiIDogXCJ0ZXh0YXJlYVwiLCBmdW5jdGlvbigpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnB1dFN0eWxlIGNhbiBub3QgKHlldCkgYmUgY2hhbmdlZCBpbiBhIHJ1bm5pbmcgZWRpdG9yXCIpOyAvLyBGSVhNRVxuICB9LCB0cnVlKTtcbiAgb3B0aW9uKFwicnRsTW92ZVZpc3VhbGx5XCIsICF3aW5kb3dzKTtcbiAgb3B0aW9uKFwid2hvbGVMaW5lVXBkYXRlQmVmb3JlXCIsIHRydWUpO1xuXG4gIG9wdGlvbihcInRoZW1lXCIsIFwiZGVmYXVsdFwiLCBmdW5jdGlvbihjbSkge1xuICAgIHRoZW1lQ2hhbmdlZChjbSk7XG4gICAgZ3V0dGVyc0NoYW5nZWQoY20pO1xuICB9LCB0cnVlKTtcbiAgb3B0aW9uKFwia2V5TWFwXCIsIFwiZGVmYXVsdFwiLCBmdW5jdGlvbihjbSwgdmFsLCBvbGQpIHtcbiAgICB2YXIgbmV4dCA9IGdldEtleU1hcCh2YWwpO1xuICAgIHZhciBwcmV2ID0gb2xkICE9IENvZGVNaXJyb3IuSW5pdCAmJiBnZXRLZXlNYXAob2xkKTtcbiAgICBpZiAocHJldiAmJiBwcmV2LmRldGFjaCkgcHJldi5kZXRhY2goY20sIG5leHQpO1xuICAgIGlmIChuZXh0LmF0dGFjaCkgbmV4dC5hdHRhY2goY20sIHByZXYgfHwgbnVsbCk7XG4gIH0pO1xuICBvcHRpb24oXCJleHRyYUtleXNcIiwgbnVsbCk7XG5cbiAgb3B0aW9uKFwibGluZVdyYXBwaW5nXCIsIGZhbHNlLCB3cmFwcGluZ0NoYW5nZWQsIHRydWUpO1xuICBvcHRpb24oXCJndXR0ZXJzXCIsIFtdLCBmdW5jdGlvbihjbSkge1xuICAgIHNldEd1dHRlcnNGb3JMaW5lTnVtYmVycyhjbS5vcHRpb25zKTtcbiAgICBndXR0ZXJzQ2hhbmdlZChjbSk7XG4gIH0sIHRydWUpO1xuICBvcHRpb24oXCJmaXhlZEd1dHRlclwiLCB0cnVlLCBmdW5jdGlvbihjbSwgdmFsKSB7XG4gICAgY20uZGlzcGxheS5ndXR0ZXJzLnN0eWxlLmxlZnQgPSB2YWwgPyBjb21wZW5zYXRlRm9ySFNjcm9sbChjbS5kaXNwbGF5KSArIFwicHhcIiA6IFwiMFwiO1xuICAgIGNtLnJlZnJlc2goKTtcbiAgfSwgdHJ1ZSk7XG4gIG9wdGlvbihcImNvdmVyR3V0dGVyTmV4dFRvU2Nyb2xsYmFyXCIsIGZhbHNlLCBmdW5jdGlvbihjbSkge3VwZGF0ZVNjcm9sbGJhcnMoY20pO30sIHRydWUpO1xuICBvcHRpb24oXCJzY3JvbGxiYXJTdHlsZVwiLCBcIm5hdGl2ZVwiLCBmdW5jdGlvbihjbSkge1xuICAgIGluaXRTY3JvbGxiYXJzKGNtKTtcbiAgICB1cGRhdGVTY3JvbGxiYXJzKGNtKTtcbiAgICBjbS5kaXNwbGF5LnNjcm9sbGJhcnMuc2V0U2Nyb2xsVG9wKGNtLmRvYy5zY3JvbGxUb3ApO1xuICAgIGNtLmRpc3BsYXkuc2Nyb2xsYmFycy5zZXRTY3JvbGxMZWZ0KGNtLmRvYy5zY3JvbGxMZWZ0KTtcbiAgfSwgdHJ1ZSk7XG4gIG9wdGlvbihcImxpbmVOdW1iZXJzXCIsIGZhbHNlLCBmdW5jdGlvbihjbSkge1xuICAgIHNldEd1dHRlcnNGb3JMaW5lTnVtYmVycyhjbS5vcHRpb25zKTtcbiAgICBndXR0ZXJzQ2hhbmdlZChjbSk7XG4gIH0sIHRydWUpO1xuICBvcHRpb24oXCJmaXJzdExpbmVOdW1iZXJcIiwgMSwgZ3V0dGVyc0NoYW5nZWQsIHRydWUpO1xuICBvcHRpb24oXCJsaW5lTnVtYmVyRm9ybWF0dGVyXCIsIGZ1bmN0aW9uKGludGVnZXIpIHtyZXR1cm4gaW50ZWdlcjt9LCBndXR0ZXJzQ2hhbmdlZCwgdHJ1ZSk7XG4gIG9wdGlvbihcInNob3dDdXJzb3JXaGVuU2VsZWN0aW5nXCIsIGZhbHNlLCB1cGRhdGVTZWxlY3Rpb24sIHRydWUpO1xuXG4gIG9wdGlvbihcInJlc2V0U2VsZWN0aW9uT25Db250ZXh0TWVudVwiLCB0cnVlKTtcbiAgb3B0aW9uKFwibGluZVdpc2VDb3B5Q3V0XCIsIHRydWUpO1xuXG4gIG9wdGlvbihcInJlYWRPbmx5XCIsIGZhbHNlLCBmdW5jdGlvbihjbSwgdmFsKSB7XG4gICAgaWYgKHZhbCA9PSBcIm5vY3Vyc29yXCIpIHtcbiAgICAgIG9uQmx1cihjbSk7XG4gICAgICBjbS5kaXNwbGF5LmlucHV0LmJsdXIoKTtcbiAgICAgIGNtLmRpc3BsYXkuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjbS5kaXNwbGF5LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICAgIGNtLmRpc3BsYXkuaW5wdXQucmVhZE9ubHlDaGFuZ2VkKHZhbClcbiAgfSk7XG4gIG9wdGlvbihcImRpc2FibGVJbnB1dFwiLCBmYWxzZSwgZnVuY3Rpb24oY20sIHZhbCkge2lmICghdmFsKSBjbS5kaXNwbGF5LmlucHV0LnJlc2V0KCk7fSwgdHJ1ZSk7XG4gIG9wdGlvbihcImRyYWdEcm9wXCIsIHRydWUsIGRyYWdEcm9wQ2hhbmdlZCk7XG4gIG9wdGlvbihcImFsbG93RHJvcEZpbGVUeXBlc1wiLCBudWxsKTtcblxuICBvcHRpb24oXCJjdXJzb3JCbGlua1JhdGVcIiwgNTMwKTtcbiAgb3B0aW9uKFwiY3Vyc29yU2Nyb2xsTWFyZ2luXCIsIDApO1xuICBvcHRpb24oXCJjdXJzb3JIZWlnaHRcIiwgMSwgdXBkYXRlU2VsZWN0aW9uLCB0cnVlKTtcbiAgb3B0aW9uKFwic2luZ2xlQ3Vyc29ySGVpZ2h0UGVyTGluZVwiLCB0cnVlLCB1cGRhdGVTZWxlY3Rpb24sIHRydWUpO1xuICBvcHRpb24oXCJ3b3JrVGltZVwiLCAxMDApO1xuICBvcHRpb24oXCJ3b3JrRGVsYXlcIiwgMTAwKTtcbiAgb3B0aW9uKFwiZmxhdHRlblNwYW5zXCIsIHRydWUsIHJlc2V0TW9kZVN0YXRlLCB0cnVlKTtcbiAgb3B0aW9uKFwiYWRkTW9kZUNsYXNzXCIsIGZhbHNlLCByZXNldE1vZGVTdGF0ZSwgdHJ1ZSk7XG4gIG9wdGlvbihcInBvbGxJbnRlcnZhbFwiLCAxMDApO1xuICBvcHRpb24oXCJ1bmRvRGVwdGhcIiwgMjAwLCBmdW5jdGlvbihjbSwgdmFsKXtjbS5kb2MuaGlzdG9yeS51bmRvRGVwdGggPSB2YWw7fSk7XG4gIG9wdGlvbihcImhpc3RvcnlFdmVudERlbGF5XCIsIDEyNTApO1xuICBvcHRpb24oXCJ2aWV3cG9ydE1hcmdpblwiLCAxMCwgZnVuY3Rpb24oY20pe2NtLnJlZnJlc2goKTt9LCB0cnVlKTtcbiAgb3B0aW9uKFwibWF4SGlnaGxpZ2h0TGVuZ3RoXCIsIDEwMDAwLCByZXNldE1vZGVTdGF0ZSwgdHJ1ZSk7XG4gIG9wdGlvbihcIm1vdmVJbnB1dFdpdGhDdXJzb3JcIiwgdHJ1ZSwgZnVuY3Rpb24oY20sIHZhbCkge1xuICAgIGlmICghdmFsKSBjbS5kaXNwbGF5LmlucHV0LnJlc2V0UG9zaXRpb24oKTtcbiAgfSk7XG5cbiAgb3B0aW9uKFwidGFiaW5kZXhcIiwgbnVsbCwgZnVuY3Rpb24oY20sIHZhbCkge1xuICAgIGNtLmRpc3BsYXkuaW5wdXQuZ2V0RmllbGQoKS50YWJJbmRleCA9IHZhbCB8fCBcIlwiO1xuICB9KTtcbiAgb3B0aW9uKFwiYXV0b2ZvY3VzXCIsIG51bGwpO1xuXG4gIC8vIE1PREUgREVGSU5JVElPTiBBTkQgUVVFUllJTkdcblxuICAvLyBLbm93biBtb2RlcywgYnkgbmFtZSBhbmQgYnkgTUlNRVxuICB2YXIgbW9kZXMgPSBDb2RlTWlycm9yLm1vZGVzID0ge30sIG1pbWVNb2RlcyA9IENvZGVNaXJyb3IubWltZU1vZGVzID0ge307XG5cbiAgLy8gRXh0cmEgYXJndW1lbnRzIGFyZSBzdG9yZWQgYXMgdGhlIG1vZGUncyBkZXBlbmRlbmNpZXMsIHdoaWNoIGlzXG4gIC8vIHVzZWQgYnkgKGxlZ2FjeSkgbWVjaGFuaXNtcyBsaWtlIGxvYWRtb2RlLmpzIHRvIGF1dG9tYXRpY2FsbHlcbiAgLy8gbG9hZCBhIG1vZGUuIChQcmVmZXJyZWQgbWVjaGFuaXNtIGlzIHRoZSByZXF1aXJlL2RlZmluZSBjYWxscy4pXG4gIENvZGVNaXJyb3IuZGVmaW5lTW9kZSA9IGZ1bmN0aW9uKG5hbWUsIG1vZGUpIHtcbiAgICBpZiAoIUNvZGVNaXJyb3IuZGVmYXVsdHMubW9kZSAmJiBuYW1lICE9IFwibnVsbFwiKSBDb2RlTWlycm9yLmRlZmF1bHRzLm1vZGUgPSBuYW1lO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMilcbiAgICAgIG1vZGUuZGVwZW5kZW5jaWVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICBtb2Rlc1tuYW1lXSA9IG1vZGU7XG4gIH07XG5cbiAgQ29kZU1pcnJvci5kZWZpbmVNSU1FID0gZnVuY3Rpb24obWltZSwgc3BlYykge1xuICAgIG1pbWVNb2Rlc1ttaW1lXSA9IHNwZWM7XG4gIH07XG5cbiAgLy8gR2l2ZW4gYSBNSU1FIHR5cGUsIGEge25hbWUsIC4uLm9wdGlvbnN9IGNvbmZpZyBvYmplY3QsIG9yIGEgbmFtZVxuICAvLyBzdHJpbmcsIHJldHVybiBhIG1vZGUgY29uZmlnIG9iamVjdC5cbiAgQ29kZU1pcnJvci5yZXNvbHZlTW9kZSA9IGZ1bmN0aW9uKHNwZWMpIHtcbiAgICBpZiAodHlwZW9mIHNwZWMgPT0gXCJzdHJpbmdcIiAmJiBtaW1lTW9kZXMuaGFzT3duUHJvcGVydHkoc3BlYykpIHtcbiAgICAgIHNwZWMgPSBtaW1lTW9kZXNbc3BlY107XG4gICAgfSBlbHNlIGlmIChzcGVjICYmIHR5cGVvZiBzcGVjLm5hbWUgPT0gXCJzdHJpbmdcIiAmJiBtaW1lTW9kZXMuaGFzT3duUHJvcGVydHkoc3BlYy5uYW1lKSkge1xuICAgICAgdmFyIGZvdW5kID0gbWltZU1vZGVzW3NwZWMubmFtZV07XG4gICAgICBpZiAodHlwZW9mIGZvdW5kID09IFwic3RyaW5nXCIpIGZvdW5kID0ge25hbWU6IGZvdW5kfTtcbiAgICAgIHNwZWMgPSBjcmVhdGVPYmooZm91bmQsIHNwZWMpO1xuICAgICAgc3BlYy5uYW1lID0gZm91bmQubmFtZTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzcGVjID09IFwic3RyaW5nXCIgJiYgL15bXFx3XFwtXStcXC9bXFx3XFwtXStcXCt4bWwkLy50ZXN0KHNwZWMpKSB7XG4gICAgICByZXR1cm4gQ29kZU1pcnJvci5yZXNvbHZlTW9kZShcImFwcGxpY2F0aW9uL3htbFwiKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzcGVjID09IFwic3RyaW5nXCIpIHJldHVybiB7bmFtZTogc3BlY307XG4gICAgZWxzZSByZXR1cm4gc3BlYyB8fCB7bmFtZTogXCJudWxsXCJ9O1xuICB9O1xuXG4gIC8vIEdpdmVuIGEgbW9kZSBzcGVjIChhbnl0aGluZyB0aGF0IHJlc29sdmVNb2RlIGFjY2VwdHMpLCBmaW5kIGFuZFxuICAvLyBpbml0aWFsaXplIGFuIGFjdHVhbCBtb2RlIG9iamVjdC5cbiAgQ29kZU1pcnJvci5nZXRNb2RlID0gZnVuY3Rpb24ob3B0aW9ucywgc3BlYykge1xuICAgIHZhciBzcGVjID0gQ29kZU1pcnJvci5yZXNvbHZlTW9kZShzcGVjKTtcbiAgICB2YXIgbWZhY3RvcnkgPSBtb2Rlc1tzcGVjLm5hbWVdO1xuICAgIGlmICghbWZhY3RvcnkpIHJldHVybiBDb2RlTWlycm9yLmdldE1vZGUob3B0aW9ucywgXCJ0ZXh0L3BsYWluXCIpO1xuICAgIHZhciBtb2RlT2JqID0gbWZhY3Rvcnkob3B0aW9ucywgc3BlYyk7XG4gICAgaWYgKG1vZGVFeHRlbnNpb25zLmhhc093blByb3BlcnR5KHNwZWMubmFtZSkpIHtcbiAgICAgIHZhciBleHRzID0gbW9kZUV4dGVuc2lvbnNbc3BlYy5uYW1lXTtcbiAgICAgIGZvciAodmFyIHByb3AgaW4gZXh0cykge1xuICAgICAgICBpZiAoIWV4dHMuaGFzT3duUHJvcGVydHkocHJvcCkpIGNvbnRpbnVlO1xuICAgICAgICBpZiAobW9kZU9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgbW9kZU9ialtcIl9cIiArIHByb3BdID0gbW9kZU9ialtwcm9wXTtcbiAgICAgICAgbW9kZU9ialtwcm9wXSA9IGV4dHNbcHJvcF07XG4gICAgICB9XG4gICAgfVxuICAgIG1vZGVPYmoubmFtZSA9IHNwZWMubmFtZTtcbiAgICBpZiAoc3BlYy5oZWxwZXJUeXBlKSBtb2RlT2JqLmhlbHBlclR5cGUgPSBzcGVjLmhlbHBlclR5cGU7XG4gICAgaWYgKHNwZWMubW9kZVByb3BzKSBmb3IgKHZhciBwcm9wIGluIHNwZWMubW9kZVByb3BzKVxuICAgICAgbW9kZU9ialtwcm9wXSA9IHNwZWMubW9kZVByb3BzW3Byb3BdO1xuXG4gICAgcmV0dXJuIG1vZGVPYmo7XG4gIH07XG5cbiAgLy8gTWluaW1hbCBkZWZhdWx0IG1vZGUuXG4gIENvZGVNaXJyb3IuZGVmaW5lTW9kZShcIm51bGxcIiwgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHt0b2tlbjogZnVuY3Rpb24oc3RyZWFtKSB7c3RyZWFtLnNraXBUb0VuZCgpO319O1xuICB9KTtcbiAgQ29kZU1pcnJvci5kZWZpbmVNSU1FKFwidGV4dC9wbGFpblwiLCBcIm51bGxcIik7XG5cbiAgLy8gVGhpcyBjYW4gYmUgdXNlZCB0byBhdHRhY2ggcHJvcGVydGllcyB0byBtb2RlIG9iamVjdHMgZnJvbVxuICAvLyBvdXRzaWRlIHRoZSBhY3R1YWwgbW9kZSBkZWZpbml0aW9uLlxuICB2YXIgbW9kZUV4dGVuc2lvbnMgPSBDb2RlTWlycm9yLm1vZGVFeHRlbnNpb25zID0ge307XG4gIENvZGVNaXJyb3IuZXh0ZW5kTW9kZSA9IGZ1bmN0aW9uKG1vZGUsIHByb3BlcnRpZXMpIHtcbiAgICB2YXIgZXh0cyA9IG1vZGVFeHRlbnNpb25zLmhhc093blByb3BlcnR5KG1vZGUpID8gbW9kZUV4dGVuc2lvbnNbbW9kZV0gOiAobW9kZUV4dGVuc2lvbnNbbW9kZV0gPSB7fSk7XG4gICAgY29weU9iaihwcm9wZXJ0aWVzLCBleHRzKTtcbiAgfTtcblxuICAvLyBFWFRFTlNJT05TXG5cbiAgQ29kZU1pcnJvci5kZWZpbmVFeHRlbnNpb24gPSBmdW5jdGlvbihuYW1lLCBmdW5jKSB7XG4gICAgQ29kZU1pcnJvci5wcm90b3R5cGVbbmFtZV0gPSBmdW5jO1xuICB9O1xuICBDb2RlTWlycm9yLmRlZmluZURvY0V4dGVuc2lvbiA9IGZ1bmN0aW9uKG5hbWUsIGZ1bmMpIHtcbiAgICBEb2MucHJvdG90eXBlW25hbWVdID0gZnVuYztcbiAgfTtcbiAgQ29kZU1pcnJvci5kZWZpbmVPcHRpb24gPSBvcHRpb247XG5cbiAgdmFyIGluaXRIb29rcyA9IFtdO1xuICBDb2RlTWlycm9yLmRlZmluZUluaXRIb29rID0gZnVuY3Rpb24oZikge2luaXRIb29rcy5wdXNoKGYpO307XG5cbiAgdmFyIGhlbHBlcnMgPSBDb2RlTWlycm9yLmhlbHBlcnMgPSB7fTtcbiAgQ29kZU1pcnJvci5yZWdpc3RlckhlbHBlciA9IGZ1bmN0aW9uKHR5cGUsIG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKCFoZWxwZXJzLmhhc093blByb3BlcnR5KHR5cGUpKSBoZWxwZXJzW3R5cGVdID0gQ29kZU1pcnJvclt0eXBlXSA9IHtfZ2xvYmFsOiBbXX07XG4gICAgaGVscGVyc1t0eXBlXVtuYW1lXSA9IHZhbHVlO1xuICB9O1xuICBDb2RlTWlycm9yLnJlZ2lzdGVyR2xvYmFsSGVscGVyID0gZnVuY3Rpb24odHlwZSwgbmFtZSwgcHJlZGljYXRlLCB2YWx1ZSkge1xuICAgIENvZGVNaXJyb3IucmVnaXN0ZXJIZWxwZXIodHlwZSwgbmFtZSwgdmFsdWUpO1xuICAgIGhlbHBlcnNbdHlwZV0uX2dsb2JhbC5wdXNoKHtwcmVkOiBwcmVkaWNhdGUsIHZhbDogdmFsdWV9KTtcbiAgfTtcblxuICAvLyBNT0RFIFNUQVRFIEhBTkRMSU5HXG5cbiAgLy8gVXRpbGl0eSBmdW5jdGlvbnMgZm9yIHdvcmtpbmcgd2l0aCBzdGF0ZS4gRXhwb3J0ZWQgYmVjYXVzZSBuZXN0ZWRcbiAgLy8gbW9kZXMgbmVlZCB0byBkbyB0aGlzIGZvciB0aGVpciBpbm5lciBtb2Rlcy5cblxuICB2YXIgY29weVN0YXRlID0gQ29kZU1pcnJvci5jb3B5U3RhdGUgPSBmdW5jdGlvbihtb2RlLCBzdGF0ZSkge1xuICAgIGlmIChzdGF0ZSA9PT0gdHJ1ZSkgcmV0dXJuIHN0YXRlO1xuICAgIGlmIChtb2RlLmNvcHlTdGF0ZSkgcmV0dXJuIG1vZGUuY29weVN0YXRlKHN0YXRlKTtcbiAgICB2YXIgbnN0YXRlID0ge307XG4gICAgZm9yICh2YXIgbiBpbiBzdGF0ZSkge1xuICAgICAgdmFyIHZhbCA9IHN0YXRlW25dO1xuICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIEFycmF5KSB2YWwgPSB2YWwuY29uY2F0KFtdKTtcbiAgICAgIG5zdGF0ZVtuXSA9IHZhbDtcbiAgICB9XG4gICAgcmV0dXJuIG5zdGF0ZTtcbiAgfTtcblxuICB2YXIgc3RhcnRTdGF0ZSA9IENvZGVNaXJyb3Iuc3RhcnRTdGF0ZSA9IGZ1bmN0aW9uKG1vZGUsIGExLCBhMikge1xuICAgIHJldHVybiBtb2RlLnN0YXJ0U3RhdGUgPyBtb2RlLnN0YXJ0U3RhdGUoYTEsIGEyKSA6IHRydWU7XG4gIH07XG5cbiAgLy8gR2l2ZW4gYSBtb2RlIGFuZCBhIHN0YXRlIChmb3IgdGhhdCBtb2RlKSwgZmluZCB0aGUgaW5uZXIgbW9kZSBhbmRcbiAgLy8gc3RhdGUgYXQgdGhlIHBvc2l0aW9uIHRoYXQgdGhlIHN0YXRlIHJlZmVycyB0by5cbiAgQ29kZU1pcnJvci5pbm5lck1vZGUgPSBmdW5jdGlvbihtb2RlLCBzdGF0ZSkge1xuICAgIHdoaWxlIChtb2RlLmlubmVyTW9kZSkge1xuICAgICAgdmFyIGluZm8gPSBtb2RlLmlubmVyTW9kZShzdGF0ZSk7XG4gICAgICBpZiAoIWluZm8gfHwgaW5mby5tb2RlID09IG1vZGUpIGJyZWFrO1xuICAgICAgc3RhdGUgPSBpbmZvLnN0YXRlO1xuICAgICAgbW9kZSA9IGluZm8ubW9kZTtcbiAgICB9XG4gICAgcmV0dXJuIGluZm8gfHwge21vZGU6IG1vZGUsIHN0YXRlOiBzdGF0ZX07XG4gIH07XG5cbiAgLy8gU1RBTkRBUkQgQ09NTUFORFNcblxuICAvLyBDb21tYW5kcyBhcmUgcGFyYW1ldGVyLWxlc3MgYWN0aW9ucyB0aGF0IGNhbiBiZSBwZXJmb3JtZWQgb24gYW5cbiAgLy8gZWRpdG9yLCBtb3N0bHkgdXNlZCBmb3Iga2V5YmluZGluZ3MuXG4gIHZhciBjb21tYW5kcyA9IENvZGVNaXJyb3IuY29tbWFuZHMgPSB7XG4gICAgc2VsZWN0QWxsOiBmdW5jdGlvbihjbSkge2NtLnNldFNlbGVjdGlvbihQb3MoY20uZmlyc3RMaW5lKCksIDApLCBQb3MoY20ubGFzdExpbmUoKSksIHNlbF9kb250U2Nyb2xsKTt9LFxuICAgIHNpbmdsZVNlbGVjdGlvbjogZnVuY3Rpb24oY20pIHtcbiAgICAgIGNtLnNldFNlbGVjdGlvbihjbS5nZXRDdXJzb3IoXCJhbmNob3JcIiksIGNtLmdldEN1cnNvcihcImhlYWRcIiksIHNlbF9kb250U2Nyb2xsKTtcbiAgICB9LFxuICAgIGtpbGxMaW5lOiBmdW5jdGlvbihjbSkge1xuICAgICAgZGVsZXRlTmVhclNlbGVjdGlvbihjbSwgZnVuY3Rpb24ocmFuZ2UpIHtcbiAgICAgICAgaWYgKHJhbmdlLmVtcHR5KCkpIHtcbiAgICAgICAgICB2YXIgbGVuID0gZ2V0TGluZShjbS5kb2MsIHJhbmdlLmhlYWQubGluZSkudGV4dC5sZW5ndGg7XG4gICAgICAgICAgaWYgKHJhbmdlLmhlYWQuY2ggPT0gbGVuICYmIHJhbmdlLmhlYWQubGluZSA8IGNtLmxhc3RMaW5lKCkpXG4gICAgICAgICAgICByZXR1cm4ge2Zyb206IHJhbmdlLmhlYWQsIHRvOiBQb3MocmFuZ2UuaGVhZC5saW5lICsgMSwgMCl9O1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiB7ZnJvbTogcmFuZ2UuaGVhZCwgdG86IFBvcyhyYW5nZS5oZWFkLmxpbmUsIGxlbil9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB7ZnJvbTogcmFuZ2UuZnJvbSgpLCB0bzogcmFuZ2UudG8oKX07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVsZXRlTGluZTogZnVuY3Rpb24oY20pIHtcbiAgICAgIGRlbGV0ZU5lYXJTZWxlY3Rpb24oY20sIGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgIHJldHVybiB7ZnJvbTogUG9zKHJhbmdlLmZyb20oKS5saW5lLCAwKSxcbiAgICAgICAgICAgICAgICB0bzogY2xpcFBvcyhjbS5kb2MsIFBvcyhyYW5nZS50bygpLmxpbmUgKyAxLCAwKSl9O1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWxMaW5lTGVmdDogZnVuY3Rpb24oY20pIHtcbiAgICAgIGRlbGV0ZU5lYXJTZWxlY3Rpb24oY20sIGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgIHJldHVybiB7ZnJvbTogUG9zKHJhbmdlLmZyb20oKS5saW5lLCAwKSwgdG86IHJhbmdlLmZyb20oKX07XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlbFdyYXBwZWRMaW5lTGVmdDogZnVuY3Rpb24oY20pIHtcbiAgICAgIGRlbGV0ZU5lYXJTZWxlY3Rpb24oY20sIGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgIHZhciB0b3AgPSBjbS5jaGFyQ29vcmRzKHJhbmdlLmhlYWQsIFwiZGl2XCIpLnRvcCArIDU7XG4gICAgICAgIHZhciBsZWZ0UG9zID0gY20uY29vcmRzQ2hhcih7bGVmdDogMCwgdG9wOiB0b3B9LCBcImRpdlwiKTtcbiAgICAgICAgcmV0dXJuIHtmcm9tOiBsZWZ0UG9zLCB0bzogcmFuZ2UuZnJvbSgpfTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVsV3JhcHBlZExpbmVSaWdodDogZnVuY3Rpb24oY20pIHtcbiAgICAgIGRlbGV0ZU5lYXJTZWxlY3Rpb24oY20sIGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgIHZhciB0b3AgPSBjbS5jaGFyQ29vcmRzKHJhbmdlLmhlYWQsIFwiZGl2XCIpLnRvcCArIDU7XG4gICAgICAgIHZhciByaWdodFBvcyA9IGNtLmNvb3Jkc0NoYXIoe2xlZnQ6IGNtLmRpc3BsYXkubGluZURpdi5vZmZzZXRXaWR0aCArIDEwMCwgdG9wOiB0b3B9LCBcImRpdlwiKTtcbiAgICAgICAgcmV0dXJuIHtmcm9tOiByYW5nZS5mcm9tKCksIHRvOiByaWdodFBvcyB9O1xuICAgICAgfSk7XG4gICAgfSxcbiAgICB1bmRvOiBmdW5jdGlvbihjbSkge2NtLnVuZG8oKTt9LFxuICAgIHJlZG86IGZ1bmN0aW9uKGNtKSB7Y20ucmVkbygpO30sXG4gICAgdW5kb1NlbGVjdGlvbjogZnVuY3Rpb24oY20pIHtjbS51bmRvU2VsZWN0aW9uKCk7fSxcbiAgICByZWRvU2VsZWN0aW9uOiBmdW5jdGlvbihjbSkge2NtLnJlZG9TZWxlY3Rpb24oKTt9LFxuICAgIGdvRG9jU3RhcnQ6IGZ1bmN0aW9uKGNtKSB7Y20uZXh0ZW5kU2VsZWN0aW9uKFBvcyhjbS5maXJzdExpbmUoKSwgMCkpO30sXG4gICAgZ29Eb2NFbmQ6IGZ1bmN0aW9uKGNtKSB7Y20uZXh0ZW5kU2VsZWN0aW9uKFBvcyhjbS5sYXN0TGluZSgpKSk7fSxcbiAgICBnb0xpbmVTdGFydDogZnVuY3Rpb24oY20pIHtcbiAgICAgIGNtLmV4dGVuZFNlbGVjdGlvbnNCeShmdW5jdGlvbihyYW5nZSkgeyByZXR1cm4gbGluZVN0YXJ0KGNtLCByYW5nZS5oZWFkLmxpbmUpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtvcmlnaW46IFwiK21vdmVcIiwgYmlhczogMX0pO1xuICAgIH0sXG4gICAgZ29MaW5lU3RhcnRTbWFydDogZnVuY3Rpb24oY20pIHtcbiAgICAgIGNtLmV4dGVuZFNlbGVjdGlvbnNCeShmdW5jdGlvbihyYW5nZSkge1xuICAgICAgICByZXR1cm4gbGluZVN0YXJ0U21hcnQoY20sIHJhbmdlLmhlYWQpO1xuICAgICAgfSwge29yaWdpbjogXCIrbW92ZVwiLCBiaWFzOiAxfSk7XG4gICAgfSxcbiAgICBnb0xpbmVFbmQ6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBjbS5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24ocmFuZ2UpIHsgcmV0dXJuIGxpbmVFbmQoY20sIHJhbmdlLmhlYWQubGluZSk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge29yaWdpbjogXCIrbW92ZVwiLCBiaWFzOiAtMX0pO1xuICAgIH0sXG4gICAgZ29MaW5lUmlnaHQ6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBjbS5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24ocmFuZ2UpIHtcbiAgICAgICAgdmFyIHRvcCA9IGNtLmNoYXJDb29yZHMocmFuZ2UuaGVhZCwgXCJkaXZcIikudG9wICsgNTtcbiAgICAgICAgcmV0dXJuIGNtLmNvb3Jkc0NoYXIoe2xlZnQ6IGNtLmRpc3BsYXkubGluZURpdi5vZmZzZXRXaWR0aCArIDEwMCwgdG9wOiB0b3B9LCBcImRpdlwiKTtcbiAgICAgIH0sIHNlbF9tb3ZlKTtcbiAgICB9LFxuICAgIGdvTGluZUxlZnQ6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBjbS5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24ocmFuZ2UpIHtcbiAgICAgICAgdmFyIHRvcCA9IGNtLmNoYXJDb29yZHMocmFuZ2UuaGVhZCwgXCJkaXZcIikudG9wICsgNTtcbiAgICAgICAgcmV0dXJuIGNtLmNvb3Jkc0NoYXIoe2xlZnQ6IDAsIHRvcDogdG9wfSwgXCJkaXZcIik7XG4gICAgICB9LCBzZWxfbW92ZSk7XG4gICAgfSxcbiAgICBnb0xpbmVMZWZ0U21hcnQ6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBjbS5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24ocmFuZ2UpIHtcbiAgICAgICAgdmFyIHRvcCA9IGNtLmNoYXJDb29yZHMocmFuZ2UuaGVhZCwgXCJkaXZcIikudG9wICsgNTtcbiAgICAgICAgdmFyIHBvcyA9IGNtLmNvb3Jkc0NoYXIoe2xlZnQ6IDAsIHRvcDogdG9wfSwgXCJkaXZcIik7XG4gICAgICAgIGlmIChwb3MuY2ggPCBjbS5nZXRMaW5lKHBvcy5saW5lKS5zZWFyY2goL1xcUy8pKSByZXR1cm4gbGluZVN0YXJ0U21hcnQoY20sIHJhbmdlLmhlYWQpO1xuICAgICAgICByZXR1cm4gcG9zO1xuICAgICAgfSwgc2VsX21vdmUpO1xuICAgIH0sXG4gICAgZ29MaW5lVXA6IGZ1bmN0aW9uKGNtKSB7Y20ubW92ZVYoLTEsIFwibGluZVwiKTt9LFxuICAgIGdvTGluZURvd246IGZ1bmN0aW9uKGNtKSB7Y20ubW92ZVYoMSwgXCJsaW5lXCIpO30sXG4gICAgZ29QYWdlVXA6IGZ1bmN0aW9uKGNtKSB7Y20ubW92ZVYoLTEsIFwicGFnZVwiKTt9LFxuICAgIGdvUGFnZURvd246IGZ1bmN0aW9uKGNtKSB7Y20ubW92ZVYoMSwgXCJwYWdlXCIpO30sXG4gICAgZ29DaGFyTGVmdDogZnVuY3Rpb24oY20pIHtjbS5tb3ZlSCgtMSwgXCJjaGFyXCIpO30sXG4gICAgZ29DaGFyUmlnaHQ6IGZ1bmN0aW9uKGNtKSB7Y20ubW92ZUgoMSwgXCJjaGFyXCIpO30sXG4gICAgZ29Db2x1bW5MZWZ0OiBmdW5jdGlvbihjbSkge2NtLm1vdmVIKC0xLCBcImNvbHVtblwiKTt9LFxuICAgIGdvQ29sdW1uUmlnaHQ6IGZ1bmN0aW9uKGNtKSB7Y20ubW92ZUgoMSwgXCJjb2x1bW5cIik7fSxcbiAgICBnb1dvcmRMZWZ0OiBmdW5jdGlvbihjbSkge2NtLm1vdmVIKC0xLCBcIndvcmRcIik7fSxcbiAgICBnb0dyb3VwUmlnaHQ6IGZ1bmN0aW9uKGNtKSB7Y20ubW92ZUgoMSwgXCJncm91cFwiKTt9LFxuICAgIGdvR3JvdXBMZWZ0OiBmdW5jdGlvbihjbSkge2NtLm1vdmVIKC0xLCBcImdyb3VwXCIpO30sXG4gICAgZ29Xb3JkUmlnaHQ6IGZ1bmN0aW9uKGNtKSB7Y20ubW92ZUgoMSwgXCJ3b3JkXCIpO30sXG4gICAgZGVsQ2hhckJlZm9yZTogZnVuY3Rpb24oY20pIHtjbS5kZWxldGVIKC0xLCBcImNoYXJcIik7fSxcbiAgICBkZWxDaGFyQWZ0ZXI6IGZ1bmN0aW9uKGNtKSB7Y20uZGVsZXRlSCgxLCBcImNoYXJcIik7fSxcbiAgICBkZWxXb3JkQmVmb3JlOiBmdW5jdGlvbihjbSkge2NtLmRlbGV0ZUgoLTEsIFwid29yZFwiKTt9LFxuICAgIGRlbFdvcmRBZnRlcjogZnVuY3Rpb24oY20pIHtjbS5kZWxldGVIKDEsIFwid29yZFwiKTt9LFxuICAgIGRlbEdyb3VwQmVmb3JlOiBmdW5jdGlvbihjbSkge2NtLmRlbGV0ZUgoLTEsIFwiZ3JvdXBcIik7fSxcbiAgICBkZWxHcm91cEFmdGVyOiBmdW5jdGlvbihjbSkge2NtLmRlbGV0ZUgoMSwgXCJncm91cFwiKTt9LFxuICAgIGluZGVudEF1dG86IGZ1bmN0aW9uKGNtKSB7Y20uaW5kZW50U2VsZWN0aW9uKFwic21hcnRcIik7fSxcbiAgICBpbmRlbnRNb3JlOiBmdW5jdGlvbihjbSkge2NtLmluZGVudFNlbGVjdGlvbihcImFkZFwiKTt9LFxuICAgIGluZGVudExlc3M6IGZ1bmN0aW9uKGNtKSB7Y20uaW5kZW50U2VsZWN0aW9uKFwic3VidHJhY3RcIik7fSxcbiAgICBpbnNlcnRUYWI6IGZ1bmN0aW9uKGNtKSB7Y20ucmVwbGFjZVNlbGVjdGlvbihcIlxcdFwiKTt9LFxuICAgIGluc2VydFNvZnRUYWI6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICB2YXIgc3BhY2VzID0gW10sIHJhbmdlcyA9IGNtLmxpc3RTZWxlY3Rpb25zKCksIHRhYlNpemUgPSBjbS5vcHRpb25zLnRhYlNpemU7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcG9zID0gcmFuZ2VzW2ldLmZyb20oKTtcbiAgICAgICAgdmFyIGNvbCA9IGNvdW50Q29sdW1uKGNtLmdldExpbmUocG9zLmxpbmUpLCBwb3MuY2gsIHRhYlNpemUpO1xuICAgICAgICBzcGFjZXMucHVzaChuZXcgQXJyYXkodGFiU2l6ZSAtIGNvbCAlIHRhYlNpemUgKyAxKS5qb2luKFwiIFwiKSk7XG4gICAgICB9XG4gICAgICBjbS5yZXBsYWNlU2VsZWN0aW9ucyhzcGFjZXMpO1xuICAgIH0sXG4gICAgZGVmYXVsdFRhYjogZnVuY3Rpb24oY20pIHtcbiAgICAgIGlmIChjbS5zb21ldGhpbmdTZWxlY3RlZCgpKSBjbS5pbmRlbnRTZWxlY3Rpb24oXCJhZGRcIik7XG4gICAgICBlbHNlIGNtLmV4ZWNDb21tYW5kKFwiaW5zZXJ0VGFiXCIpO1xuICAgIH0sXG4gICAgdHJhbnNwb3NlQ2hhcnM6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBydW5Jbk9wKGNtLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHJhbmdlcyA9IGNtLmxpc3RTZWxlY3Rpb25zKCksIG5ld1NlbCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBjdXIgPSByYW5nZXNbaV0uaGVhZCwgbGluZSA9IGdldExpbmUoY20uZG9jLCBjdXIubGluZSkudGV4dDtcbiAgICAgICAgICBpZiAobGluZSkge1xuICAgICAgICAgICAgaWYgKGN1ci5jaCA9PSBsaW5lLmxlbmd0aCkgY3VyID0gbmV3IFBvcyhjdXIubGluZSwgY3VyLmNoIC0gMSk7XG4gICAgICAgICAgICBpZiAoY3VyLmNoID4gMCkge1xuICAgICAgICAgICAgICBjdXIgPSBuZXcgUG9zKGN1ci5saW5lLCBjdXIuY2ggKyAxKTtcbiAgICAgICAgICAgICAgY20ucmVwbGFjZVJhbmdlKGxpbmUuY2hhckF0KGN1ci5jaCAtIDEpICsgbGluZS5jaGFyQXQoY3VyLmNoIC0gMiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3MoY3VyLmxpbmUsIGN1ci5jaCAtIDIpLCBjdXIsIFwiK3RyYW5zcG9zZVwiKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VyLmxpbmUgPiBjbS5kb2MuZmlyc3QpIHtcbiAgICAgICAgICAgICAgdmFyIHByZXYgPSBnZXRMaW5lKGNtLmRvYywgY3VyLmxpbmUgLSAxKS50ZXh0O1xuICAgICAgICAgICAgICBpZiAocHJldilcbiAgICAgICAgICAgICAgICBjbS5yZXBsYWNlUmFuZ2UobGluZS5jaGFyQXQoMCkgKyBjbS5kb2MubGluZVNlcGFyYXRvcigpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldi5jaGFyQXQocHJldi5sZW5ndGggLSAxKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9zKGN1ci5saW5lIC0gMSwgcHJldi5sZW5ndGggLSAxKSwgUG9zKGN1ci5saW5lLCAxKSwgXCIrdHJhbnNwb3NlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBuZXdTZWwucHVzaChuZXcgUmFuZ2UoY3VyLCBjdXIpKTtcbiAgICAgICAgfVxuICAgICAgICBjbS5zZXRTZWxlY3Rpb25zKG5ld1NlbCk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIG5ld2xpbmVBbmRJbmRlbnQ6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBydW5Jbk9wKGNtLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGxlbiA9IGNtLmxpc3RTZWxlY3Rpb25zKCkubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgdmFyIHJhbmdlID0gY20ubGlzdFNlbGVjdGlvbnMoKVtpXTtcbiAgICAgICAgICBjbS5yZXBsYWNlUmFuZ2UoY20uZG9jLmxpbmVTZXBhcmF0b3IoKSwgcmFuZ2UuYW5jaG9yLCByYW5nZS5oZWFkLCBcIitpbnB1dFwiKTtcbiAgICAgICAgICBjbS5pbmRlbnRMaW5lKHJhbmdlLmZyb20oKS5saW5lICsgMSwgbnVsbCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZW5zdXJlQ3Vyc29yVmlzaWJsZShjbSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHRvZ2dsZU92ZXJ3cml0ZTogZnVuY3Rpb24oY20pIHtjbS50b2dnbGVPdmVyd3JpdGUoKTt9XG4gIH07XG5cblxuICAvLyBTVEFOREFSRCBLRVlNQVBTXG5cbiAgdmFyIGtleU1hcCA9IENvZGVNaXJyb3Iua2V5TWFwID0ge307XG5cbiAga2V5TWFwLmJhc2ljID0ge1xuICAgIFwiTGVmdFwiOiBcImdvQ2hhckxlZnRcIiwgXCJSaWdodFwiOiBcImdvQ2hhclJpZ2h0XCIsIFwiVXBcIjogXCJnb0xpbmVVcFwiLCBcIkRvd25cIjogXCJnb0xpbmVEb3duXCIsXG4gICAgXCJFbmRcIjogXCJnb0xpbmVFbmRcIiwgXCJIb21lXCI6IFwiZ29MaW5lU3RhcnRTbWFydFwiLCBcIlBhZ2VVcFwiOiBcImdvUGFnZVVwXCIsIFwiUGFnZURvd25cIjogXCJnb1BhZ2VEb3duXCIsXG4gICAgXCJEZWxldGVcIjogXCJkZWxDaGFyQWZ0ZXJcIiwgXCJCYWNrc3BhY2VcIjogXCJkZWxDaGFyQmVmb3JlXCIsIFwiU2hpZnQtQmFja3NwYWNlXCI6IFwiZGVsQ2hhckJlZm9yZVwiLFxuICAgIFwiVGFiXCI6IFwiZGVmYXVsdFRhYlwiLCBcIlNoaWZ0LVRhYlwiOiBcImluZGVudEF1dG9cIixcbiAgICBcIkVudGVyXCI6IFwibmV3bGluZUFuZEluZGVudFwiLCBcIkluc2VydFwiOiBcInRvZ2dsZU92ZXJ3cml0ZVwiLFxuICAgIFwiRXNjXCI6IFwic2luZ2xlU2VsZWN0aW9uXCJcbiAgfTtcbiAgLy8gTm90ZSB0aGF0IHRoZSBzYXZlIGFuZCBmaW5kLXJlbGF0ZWQgY29tbWFuZHMgYXJlbid0IGRlZmluZWQgYnlcbiAgLy8gZGVmYXVsdC4gVXNlciBjb2RlIG9yIGFkZG9ucyBjYW4gZGVmaW5lIHRoZW0uIFVua25vd24gY29tbWFuZHNcbiAgLy8gYXJlIHNpbXBseSBpZ25vcmVkLlxuICBrZXlNYXAucGNEZWZhdWx0ID0ge1xuICAgIFwiQ3RybC1BXCI6IFwic2VsZWN0QWxsXCIsIFwiQ3RybC1EXCI6IFwiZGVsZXRlTGluZVwiLCBcIkN0cmwtWlwiOiBcInVuZG9cIiwgXCJTaGlmdC1DdHJsLVpcIjogXCJyZWRvXCIsIFwiQ3RybC1ZXCI6IFwicmVkb1wiLFxuICAgIFwiQ3RybC1Ib21lXCI6IFwiZ29Eb2NTdGFydFwiLCBcIkN0cmwtRW5kXCI6IFwiZ29Eb2NFbmRcIiwgXCJDdHJsLVVwXCI6IFwiZ29MaW5lVXBcIiwgXCJDdHJsLURvd25cIjogXCJnb0xpbmVEb3duXCIsXG4gICAgXCJDdHJsLUxlZnRcIjogXCJnb0dyb3VwTGVmdFwiLCBcIkN0cmwtUmlnaHRcIjogXCJnb0dyb3VwUmlnaHRcIiwgXCJBbHQtTGVmdFwiOiBcImdvTGluZVN0YXJ0XCIsIFwiQWx0LVJpZ2h0XCI6IFwiZ29MaW5lRW5kXCIsXG4gICAgXCJDdHJsLUJhY2tzcGFjZVwiOiBcImRlbEdyb3VwQmVmb3JlXCIsIFwiQ3RybC1EZWxldGVcIjogXCJkZWxHcm91cEFmdGVyXCIsIFwiQ3RybC1TXCI6IFwic2F2ZVwiLCBcIkN0cmwtRlwiOiBcImZpbmRcIixcbiAgICBcIkN0cmwtR1wiOiBcImZpbmROZXh0XCIsIFwiU2hpZnQtQ3RybC1HXCI6IFwiZmluZFByZXZcIiwgXCJTaGlmdC1DdHJsLUZcIjogXCJyZXBsYWNlXCIsIFwiU2hpZnQtQ3RybC1SXCI6IFwicmVwbGFjZUFsbFwiLFxuICAgIFwiQ3RybC1bXCI6IFwiaW5kZW50TGVzc1wiLCBcIkN0cmwtXVwiOiBcImluZGVudE1vcmVcIixcbiAgICBcIkN0cmwtVVwiOiBcInVuZG9TZWxlY3Rpb25cIiwgXCJTaGlmdC1DdHJsLVVcIjogXCJyZWRvU2VsZWN0aW9uXCIsIFwiQWx0LVVcIjogXCJyZWRvU2VsZWN0aW9uXCIsXG4gICAgZmFsbHRocm91Z2g6IFwiYmFzaWNcIlxuICB9O1xuICAvLyBWZXJ5IGJhc2ljIHJlYWRsaW5lL2VtYWNzLXN0eWxlIGJpbmRpbmdzLCB3aGljaCBhcmUgc3RhbmRhcmQgb24gTWFjLlxuICBrZXlNYXAuZW1hY3N5ID0ge1xuICAgIFwiQ3RybC1GXCI6IFwiZ29DaGFyUmlnaHRcIiwgXCJDdHJsLUJcIjogXCJnb0NoYXJMZWZ0XCIsIFwiQ3RybC1QXCI6IFwiZ29MaW5lVXBcIiwgXCJDdHJsLU5cIjogXCJnb0xpbmVEb3duXCIsXG4gICAgXCJBbHQtRlwiOiBcImdvV29yZFJpZ2h0XCIsIFwiQWx0LUJcIjogXCJnb1dvcmRMZWZ0XCIsIFwiQ3RybC1BXCI6IFwiZ29MaW5lU3RhcnRcIiwgXCJDdHJsLUVcIjogXCJnb0xpbmVFbmRcIixcbiAgICBcIkN0cmwtVlwiOiBcImdvUGFnZURvd25cIiwgXCJTaGlmdC1DdHJsLVZcIjogXCJnb1BhZ2VVcFwiLCBcIkN0cmwtRFwiOiBcImRlbENoYXJBZnRlclwiLCBcIkN0cmwtSFwiOiBcImRlbENoYXJCZWZvcmVcIixcbiAgICBcIkFsdC1EXCI6IFwiZGVsV29yZEFmdGVyXCIsIFwiQWx0LUJhY2tzcGFjZVwiOiBcImRlbFdvcmRCZWZvcmVcIiwgXCJDdHJsLUtcIjogXCJraWxsTGluZVwiLCBcIkN0cmwtVFwiOiBcInRyYW5zcG9zZUNoYXJzXCJcbiAgfTtcbiAga2V5TWFwLm1hY0RlZmF1bHQgPSB7XG4gICAgXCJDbWQtQVwiOiBcInNlbGVjdEFsbFwiLCBcIkNtZC1EXCI6IFwiZGVsZXRlTGluZVwiLCBcIkNtZC1aXCI6IFwidW5kb1wiLCBcIlNoaWZ0LUNtZC1aXCI6IFwicmVkb1wiLCBcIkNtZC1ZXCI6IFwicmVkb1wiLFxuICAgIFwiQ21kLUhvbWVcIjogXCJnb0RvY1N0YXJ0XCIsIFwiQ21kLVVwXCI6IFwiZ29Eb2NTdGFydFwiLCBcIkNtZC1FbmRcIjogXCJnb0RvY0VuZFwiLCBcIkNtZC1Eb3duXCI6IFwiZ29Eb2NFbmRcIiwgXCJBbHQtTGVmdFwiOiBcImdvR3JvdXBMZWZ0XCIsXG4gICAgXCJBbHQtUmlnaHRcIjogXCJnb0dyb3VwUmlnaHRcIiwgXCJDbWQtTGVmdFwiOiBcImdvTGluZUxlZnRcIiwgXCJDbWQtUmlnaHRcIjogXCJnb0xpbmVSaWdodFwiLCBcIkFsdC1CYWNrc3BhY2VcIjogXCJkZWxHcm91cEJlZm9yZVwiLFxuICAgIFwiQ3RybC1BbHQtQmFja3NwYWNlXCI6IFwiZGVsR3JvdXBBZnRlclwiLCBcIkFsdC1EZWxldGVcIjogXCJkZWxHcm91cEFmdGVyXCIsIFwiQ21kLVNcIjogXCJzYXZlXCIsIFwiQ21kLUZcIjogXCJmaW5kXCIsXG4gICAgXCJDbWQtR1wiOiBcImZpbmROZXh0XCIsIFwiU2hpZnQtQ21kLUdcIjogXCJmaW5kUHJldlwiLCBcIkNtZC1BbHQtRlwiOiBcInJlcGxhY2VcIiwgXCJTaGlmdC1DbWQtQWx0LUZcIjogXCJyZXBsYWNlQWxsXCIsXG4gICAgXCJDbWQtW1wiOiBcImluZGVudExlc3NcIiwgXCJDbWQtXVwiOiBcImluZGVudE1vcmVcIiwgXCJDbWQtQmFja3NwYWNlXCI6IFwiZGVsV3JhcHBlZExpbmVMZWZ0XCIsIFwiQ21kLURlbGV0ZVwiOiBcImRlbFdyYXBwZWRMaW5lUmlnaHRcIixcbiAgICBcIkNtZC1VXCI6IFwidW5kb1NlbGVjdGlvblwiLCBcIlNoaWZ0LUNtZC1VXCI6IFwicmVkb1NlbGVjdGlvblwiLCBcIkN0cmwtVXBcIjogXCJnb0RvY1N0YXJ0XCIsIFwiQ3RybC1Eb3duXCI6IFwiZ29Eb2NFbmRcIixcbiAgICBmYWxsdGhyb3VnaDogW1wiYmFzaWNcIiwgXCJlbWFjc3lcIl1cbiAgfTtcbiAga2V5TWFwW1wiZGVmYXVsdFwiXSA9IG1hYyA/IGtleU1hcC5tYWNEZWZhdWx0IDoga2V5TWFwLnBjRGVmYXVsdDtcblxuICAvLyBLRVlNQVAgRElTUEFUQ0hcblxuICBmdW5jdGlvbiBub3JtYWxpemVLZXlOYW1lKG5hbWUpIHtcbiAgICB2YXIgcGFydHMgPSBuYW1lLnNwbGl0KC8tKD8hJCkvKSwgbmFtZSA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xuICAgIHZhciBhbHQsIGN0cmwsIHNoaWZ0LCBjbWQ7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgIHZhciBtb2QgPSBwYXJ0c1tpXTtcbiAgICAgIGlmICgvXihjbWR8bWV0YXxtKSQvaS50ZXN0KG1vZCkpIGNtZCA9IHRydWU7XG4gICAgICBlbHNlIGlmICgvXmEobHQpPyQvaS50ZXN0KG1vZCkpIGFsdCA9IHRydWU7XG4gICAgICBlbHNlIGlmICgvXihjfGN0cmx8Y29udHJvbCkkL2kudGVzdChtb2QpKSBjdHJsID0gdHJ1ZTtcbiAgICAgIGVsc2UgaWYgKC9ecyhoaWZ0KSQvaS50ZXN0KG1vZCkpIHNoaWZ0ID0gdHJ1ZTtcbiAgICAgIGVsc2UgdGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIG1vZGlmaWVyIG5hbWU6IFwiICsgbW9kKTtcbiAgICB9XG4gICAgaWYgKGFsdCkgbmFtZSA9IFwiQWx0LVwiICsgbmFtZTtcbiAgICBpZiAoY3RybCkgbmFtZSA9IFwiQ3RybC1cIiArIG5hbWU7XG4gICAgaWYgKGNtZCkgbmFtZSA9IFwiQ21kLVwiICsgbmFtZTtcbiAgICBpZiAoc2hpZnQpIG5hbWUgPSBcIlNoaWZ0LVwiICsgbmFtZTtcbiAgICByZXR1cm4gbmFtZTtcbiAgfVxuXG4gIC8vIFRoaXMgaXMgYSBrbHVkZ2UgdG8ga2VlcCBrZXltYXBzIG1vc3RseSB3b3JraW5nIGFzIHJhdyBvYmplY3RzXG4gIC8vIChiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSkgd2hpbGUgYXQgdGhlIHNhbWUgdGltZSBzdXBwb3J0IGZlYXR1cmVzXG4gIC8vIGxpa2Ugbm9ybWFsaXphdGlvbiBhbmQgbXVsdGktc3Ryb2tlIGtleSBiaW5kaW5ncy4gSXQgY29tcGlsZXMgYVxuICAvLyBuZXcgbm9ybWFsaXplZCBrZXltYXAsIGFuZCB0aGVuIHVwZGF0ZXMgdGhlIG9sZCBvYmplY3QgdG8gcmVmbGVjdFxuICAvLyB0aGlzLlxuICBDb2RlTWlycm9yLm5vcm1hbGl6ZUtleU1hcCA9IGZ1bmN0aW9uKGtleW1hcCkge1xuICAgIHZhciBjb3B5ID0ge307XG4gICAgZm9yICh2YXIga2V5bmFtZSBpbiBrZXltYXApIGlmIChrZXltYXAuaGFzT3duUHJvcGVydHkoa2V5bmFtZSkpIHtcbiAgICAgIHZhciB2YWx1ZSA9IGtleW1hcFtrZXluYW1lXTtcbiAgICAgIGlmICgvXihuYW1lfGZhbGx0aHJvdWdofChkZXxhdCl0YWNoKSQvLnRlc3Qoa2V5bmFtZSkpIGNvbnRpbnVlO1xuICAgICAgaWYgKHZhbHVlID09IFwiLi4uXCIpIHsgZGVsZXRlIGtleW1hcFtrZXluYW1lXTsgY29udGludWU7IH1cblxuICAgICAgdmFyIGtleXMgPSBtYXAoa2V5bmFtZS5zcGxpdChcIiBcIiksIG5vcm1hbGl6ZUtleU5hbWUpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB2YWwsIG5hbWU7XG4gICAgICAgIGlmIChpID09IGtleXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIG5hbWUgPSBrZXlzLmpvaW4oXCIgXCIpO1xuICAgICAgICAgIHZhbCA9IHZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5hbWUgPSBrZXlzLnNsaWNlKDAsIGkgKyAxKS5qb2luKFwiIFwiKTtcbiAgICAgICAgICB2YWwgPSBcIi4uLlwiO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwcmV2ID0gY29weVtuYW1lXTtcbiAgICAgICAgaWYgKCFwcmV2KSBjb3B5W25hbWVdID0gdmFsO1xuICAgICAgICBlbHNlIGlmIChwcmV2ICE9IHZhbCkgdGhyb3cgbmV3IEVycm9yKFwiSW5jb25zaXN0ZW50IGJpbmRpbmdzIGZvciBcIiArIG5hbWUpO1xuICAgICAgfVxuICAgICAgZGVsZXRlIGtleW1hcFtrZXluYW1lXTtcbiAgICB9XG4gICAgZm9yICh2YXIgcHJvcCBpbiBjb3B5KSBrZXltYXBbcHJvcF0gPSBjb3B5W3Byb3BdO1xuICAgIHJldHVybiBrZXltYXA7XG4gIH07XG5cbiAgdmFyIGxvb2t1cEtleSA9IENvZGVNaXJyb3IubG9va3VwS2V5ID0gZnVuY3Rpb24oa2V5LCBtYXAsIGhhbmRsZSwgY29udGV4dCkge1xuICAgIG1hcCA9IGdldEtleU1hcChtYXApO1xuICAgIHZhciBmb3VuZCA9IG1hcC5jYWxsID8gbWFwLmNhbGwoa2V5LCBjb250ZXh0KSA6IG1hcFtrZXldO1xuICAgIGlmIChmb3VuZCA9PT0gZmFsc2UpIHJldHVybiBcIm5vdGhpbmdcIjtcbiAgICBpZiAoZm91bmQgPT09IFwiLi4uXCIpIHJldHVybiBcIm11bHRpXCI7XG4gICAgaWYgKGZvdW5kICE9IG51bGwgJiYgaGFuZGxlKGZvdW5kKSkgcmV0dXJuIFwiaGFuZGxlZFwiO1xuXG4gICAgaWYgKG1hcC5mYWxsdGhyb3VnaCkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtYXAuZmFsbHRocm91Z2gpICE9IFwiW29iamVjdCBBcnJheV1cIilcbiAgICAgICAgcmV0dXJuIGxvb2t1cEtleShrZXksIG1hcC5mYWxsdGhyb3VnaCwgaGFuZGxlLCBjb250ZXh0KTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFwLmZhbGx0aHJvdWdoLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBsb29rdXBLZXkoa2V5LCBtYXAuZmFsbHRocm91Z2hbaV0sIGhhbmRsZSwgY29udGV4dCk7XG4gICAgICAgIGlmIChyZXN1bHQpIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIE1vZGlmaWVyIGtleSBwcmVzc2VzIGRvbid0IGNvdW50IGFzICdyZWFsJyBrZXkgcHJlc3NlcyBmb3IgdGhlXG4gIC8vIHB1cnBvc2Ugb2Yga2V5bWFwIGZhbGx0aHJvdWdoLlxuICB2YXIgaXNNb2RpZmllcktleSA9IENvZGVNaXJyb3IuaXNNb2RpZmllcktleSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdmFyIG5hbWUgPSB0eXBlb2YgdmFsdWUgPT0gXCJzdHJpbmdcIiA/IHZhbHVlIDoga2V5TmFtZXNbdmFsdWUua2V5Q29kZV07XG4gICAgcmV0dXJuIG5hbWUgPT0gXCJDdHJsXCIgfHwgbmFtZSA9PSBcIkFsdFwiIHx8IG5hbWUgPT0gXCJTaGlmdFwiIHx8IG5hbWUgPT0gXCJNb2RcIjtcbiAgfTtcblxuICAvLyBMb29rIHVwIHRoZSBuYW1lIG9mIGEga2V5IGFzIGluZGljYXRlZCBieSBhbiBldmVudCBvYmplY3QuXG4gIHZhciBrZXlOYW1lID0gQ29kZU1pcnJvci5rZXlOYW1lID0gZnVuY3Rpb24oZXZlbnQsIG5vU2hpZnQpIHtcbiAgICBpZiAocHJlc3RvICYmIGV2ZW50LmtleUNvZGUgPT0gMzQgJiYgZXZlbnRbXCJjaGFyXCJdKSByZXR1cm4gZmFsc2U7XG4gICAgdmFyIGJhc2UgPSBrZXlOYW1lc1tldmVudC5rZXlDb2RlXSwgbmFtZSA9IGJhc2U7XG4gICAgaWYgKG5hbWUgPT0gbnVsbCB8fCBldmVudC5hbHRHcmFwaEtleSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChldmVudC5hbHRLZXkgJiYgYmFzZSAhPSBcIkFsdFwiKSBuYW1lID0gXCJBbHQtXCIgKyBuYW1lO1xuICAgIGlmICgoZmxpcEN0cmxDbWQgPyBldmVudC5tZXRhS2V5IDogZXZlbnQuY3RybEtleSkgJiYgYmFzZSAhPSBcIkN0cmxcIikgbmFtZSA9IFwiQ3RybC1cIiArIG5hbWU7XG4gICAgaWYgKChmbGlwQ3RybENtZCA/IGV2ZW50LmN0cmxLZXkgOiBldmVudC5tZXRhS2V5KSAmJiBiYXNlICE9IFwiQ21kXCIpIG5hbWUgPSBcIkNtZC1cIiArIG5hbWU7XG4gICAgaWYgKCFub1NoaWZ0ICYmIGV2ZW50LnNoaWZ0S2V5ICYmIGJhc2UgIT0gXCJTaGlmdFwiKSBuYW1lID0gXCJTaGlmdC1cIiArIG5hbWU7XG4gICAgcmV0dXJuIG5hbWU7XG4gIH07XG5cbiAgZnVuY3Rpb24gZ2V0S2V5TWFwKHZhbCkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsID09IFwic3RyaW5nXCIgPyBrZXlNYXBbdmFsXSA6IHZhbDtcbiAgfVxuXG4gIC8vIEZST01URVhUQVJFQVxuXG4gIENvZGVNaXJyb3IuZnJvbVRleHRBcmVhID0gZnVuY3Rpb24odGV4dGFyZWEsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyA/IGNvcHlPYmoob3B0aW9ucykgOiB7fTtcbiAgICBvcHRpb25zLnZhbHVlID0gdGV4dGFyZWEudmFsdWU7XG4gICAgaWYgKCFvcHRpb25zLnRhYmluZGV4ICYmIHRleHRhcmVhLnRhYkluZGV4KVxuICAgICAgb3B0aW9ucy50YWJpbmRleCA9IHRleHRhcmVhLnRhYkluZGV4O1xuICAgIGlmICghb3B0aW9ucy5wbGFjZWhvbGRlciAmJiB0ZXh0YXJlYS5wbGFjZWhvbGRlcilcbiAgICAgIG9wdGlvbnMucGxhY2Vob2xkZXIgPSB0ZXh0YXJlYS5wbGFjZWhvbGRlcjtcbiAgICAvLyBTZXQgYXV0b2ZvY3VzIHRvIHRydWUgaWYgdGhpcyB0ZXh0YXJlYSBpcyBmb2N1c2VkLCBvciBpZiBpdCBoYXNcbiAgICAvLyBhdXRvZm9jdXMgYW5kIG5vIG90aGVyIGVsZW1lbnQgaXMgZm9jdXNlZC5cbiAgICBpZiAob3B0aW9ucy5hdXRvZm9jdXMgPT0gbnVsbCkge1xuICAgICAgdmFyIGhhc0ZvY3VzID0gYWN0aXZlRWx0KCk7XG4gICAgICBvcHRpb25zLmF1dG9mb2N1cyA9IGhhc0ZvY3VzID09IHRleHRhcmVhIHx8XG4gICAgICAgIHRleHRhcmVhLmdldEF0dHJpYnV0ZShcImF1dG9mb2N1c1wiKSAhPSBudWxsICYmIGhhc0ZvY3VzID09IGRvY3VtZW50LmJvZHk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2F2ZSgpIHt0ZXh0YXJlYS52YWx1ZSA9IGNtLmdldFZhbHVlKCk7fVxuICAgIGlmICh0ZXh0YXJlYS5mb3JtKSB7XG4gICAgICBvbih0ZXh0YXJlYS5mb3JtLCBcInN1Ym1pdFwiLCBzYXZlKTtcbiAgICAgIC8vIERlcGxvcmFibGUgaGFjayB0byBtYWtlIHRoZSBzdWJtaXQgbWV0aG9kIGRvIHRoZSByaWdodCB0aGluZy5cbiAgICAgIGlmICghb3B0aW9ucy5sZWF2ZVN1Ym1pdE1ldGhvZEFsb25lKSB7XG4gICAgICAgIHZhciBmb3JtID0gdGV4dGFyZWEuZm9ybSwgcmVhbFN1Ym1pdCA9IGZvcm0uc3VibWl0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhciB3cmFwcGVkU3VibWl0ID0gZm9ybS5zdWJtaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNhdmUoKTtcbiAgICAgICAgICAgIGZvcm0uc3VibWl0ID0gcmVhbFN1Ym1pdDtcbiAgICAgICAgICAgIGZvcm0uc3VibWl0KCk7XG4gICAgICAgICAgICBmb3JtLnN1Ym1pdCA9IHdyYXBwZWRTdWJtaXQ7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaChlKSB7fVxuICAgICAgfVxuICAgIH1cblxuICAgIG9wdGlvbnMuZmluaXNoSW5pdCA9IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBjbS5zYXZlID0gc2F2ZTtcbiAgICAgIGNtLmdldFRleHRBcmVhID0gZnVuY3Rpb24oKSB7IHJldHVybiB0ZXh0YXJlYTsgfTtcbiAgICAgIGNtLnRvVGV4dEFyZWEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgY20udG9UZXh0QXJlYSA9IGlzTmFOOyAvLyBQcmV2ZW50IHRoaXMgZnJvbSBiZWluZyByYW4gdHdpY2VcbiAgICAgICAgc2F2ZSgpO1xuICAgICAgICB0ZXh0YXJlYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGNtLmdldFdyYXBwZXJFbGVtZW50KCkpO1xuICAgICAgICB0ZXh0YXJlYS5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgICAgICAgaWYgKHRleHRhcmVhLmZvcm0pIHtcbiAgICAgICAgICBvZmYodGV4dGFyZWEuZm9ybSwgXCJzdWJtaXRcIiwgc2F2ZSk7XG4gICAgICAgICAgaWYgKHR5cGVvZiB0ZXh0YXJlYS5mb3JtLnN1Ym1pdCA9PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgICAgICB0ZXh0YXJlYS5mb3JtLnN1Ym1pdCA9IHJlYWxTdWJtaXQ7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfTtcblxuICAgIHRleHRhcmVhLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB2YXIgY20gPSBDb2RlTWlycm9yKGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIHRleHRhcmVhLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUsIHRleHRhcmVhLm5leHRTaWJsaW5nKTtcbiAgICB9LCBvcHRpb25zKTtcbiAgICByZXR1cm4gY207XG4gIH07XG5cbiAgLy8gU1RSSU5HIFNUUkVBTVxuXG4gIC8vIEZlZCB0byB0aGUgbW9kZSBwYXJzZXJzLCBwcm92aWRlcyBoZWxwZXIgZnVuY3Rpb25zIHRvIG1ha2VcbiAgLy8gcGFyc2VycyBtb3JlIHN1Y2NpbmN0LlxuXG4gIHZhciBTdHJpbmdTdHJlYW0gPSBDb2RlTWlycm9yLlN0cmluZ1N0cmVhbSA9IGZ1bmN0aW9uKHN0cmluZywgdGFiU2l6ZSkge1xuICAgIHRoaXMucG9zID0gdGhpcy5zdGFydCA9IDA7XG4gICAgdGhpcy5zdHJpbmcgPSBzdHJpbmc7XG4gICAgdGhpcy50YWJTaXplID0gdGFiU2l6ZSB8fCA4O1xuICAgIHRoaXMubGFzdENvbHVtblBvcyA9IHRoaXMubGFzdENvbHVtblZhbHVlID0gMDtcbiAgICB0aGlzLmxpbmVTdGFydCA9IDA7XG4gIH07XG5cbiAgU3RyaW5nU3RyZWFtLnByb3RvdHlwZSA9IHtcbiAgICBlb2w6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLnBvcyA+PSB0aGlzLnN0cmluZy5sZW5ndGg7fSxcbiAgICBzb2w6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLnBvcyA9PSB0aGlzLmxpbmVTdGFydDt9LFxuICAgIHBlZWs6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLnN0cmluZy5jaGFyQXQodGhpcy5wb3MpIHx8IHVuZGVmaW5lZDt9LFxuICAgIG5leHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMucG9zIDwgdGhpcy5zdHJpbmcubGVuZ3RoKVxuICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKyspO1xuICAgIH0sXG4gICAgZWF0OiBmdW5jdGlvbihtYXRjaCkge1xuICAgICAgdmFyIGNoID0gdGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKTtcbiAgICAgIGlmICh0eXBlb2YgbWF0Y2ggPT0gXCJzdHJpbmdcIikgdmFyIG9rID0gY2ggPT0gbWF0Y2g7XG4gICAgICBlbHNlIHZhciBvayA9IGNoICYmIChtYXRjaC50ZXN0ID8gbWF0Y2gudGVzdChjaCkgOiBtYXRjaChjaCkpO1xuICAgICAgaWYgKG9rKSB7Kyt0aGlzLnBvczsgcmV0dXJuIGNoO31cbiAgICB9LFxuICAgIGVhdFdoaWxlOiBmdW5jdGlvbihtYXRjaCkge1xuICAgICAgdmFyIHN0YXJ0ID0gdGhpcy5wb3M7XG4gICAgICB3aGlsZSAodGhpcy5lYXQobWF0Y2gpKXt9XG4gICAgICByZXR1cm4gdGhpcy5wb3MgPiBzdGFydDtcbiAgICB9LFxuICAgIGVhdFNwYWNlOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzdGFydCA9IHRoaXMucG9zO1xuICAgICAgd2hpbGUgKC9bXFxzXFx1MDBhMF0vLnRlc3QodGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKSkpICsrdGhpcy5wb3M7XG4gICAgICByZXR1cm4gdGhpcy5wb3MgPiBzdGFydDtcbiAgICB9LFxuICAgIHNraXBUb0VuZDogZnVuY3Rpb24oKSB7dGhpcy5wb3MgPSB0aGlzLnN0cmluZy5sZW5ndGg7fSxcbiAgICBza2lwVG86IGZ1bmN0aW9uKGNoKSB7XG4gICAgICB2YXIgZm91bmQgPSB0aGlzLnN0cmluZy5pbmRleE9mKGNoLCB0aGlzLnBvcyk7XG4gICAgICBpZiAoZm91bmQgPiAtMSkge3RoaXMucG9zID0gZm91bmQ7IHJldHVybiB0cnVlO31cbiAgICB9LFxuICAgIGJhY2tVcDogZnVuY3Rpb24obikge3RoaXMucG9zIC09IG47fSxcbiAgICBjb2x1bW46IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMubGFzdENvbHVtblBvcyA8IHRoaXMuc3RhcnQpIHtcbiAgICAgICAgdGhpcy5sYXN0Q29sdW1uVmFsdWUgPSBjb3VudENvbHVtbih0aGlzLnN0cmluZywgdGhpcy5zdGFydCwgdGhpcy50YWJTaXplLCB0aGlzLmxhc3RDb2x1bW5Qb3MsIHRoaXMubGFzdENvbHVtblZhbHVlKTtcbiAgICAgICAgdGhpcy5sYXN0Q29sdW1uUG9zID0gdGhpcy5zdGFydDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmxhc3RDb2x1bW5WYWx1ZSAtICh0aGlzLmxpbmVTdGFydCA/IGNvdW50Q29sdW1uKHRoaXMuc3RyaW5nLCB0aGlzLmxpbmVTdGFydCwgdGhpcy50YWJTaXplKSA6IDApO1xuICAgIH0sXG4gICAgaW5kZW50YXRpb246IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGNvdW50Q29sdW1uKHRoaXMuc3RyaW5nLCBudWxsLCB0aGlzLnRhYlNpemUpIC1cbiAgICAgICAgKHRoaXMubGluZVN0YXJ0ID8gY291bnRDb2x1bW4odGhpcy5zdHJpbmcsIHRoaXMubGluZVN0YXJ0LCB0aGlzLnRhYlNpemUpIDogMCk7XG4gICAgfSxcbiAgICBtYXRjaDogZnVuY3Rpb24ocGF0dGVybiwgY29uc3VtZSwgY2FzZUluc2Vuc2l0aXZlKSB7XG4gICAgICBpZiAodHlwZW9mIHBhdHRlcm4gPT0gXCJzdHJpbmdcIikge1xuICAgICAgICB2YXIgY2FzZWQgPSBmdW5jdGlvbihzdHIpIHtyZXR1cm4gY2FzZUluc2Vuc2l0aXZlID8gc3RyLnRvTG93ZXJDYXNlKCkgOiBzdHI7fTtcbiAgICAgICAgdmFyIHN1YnN0ciA9IHRoaXMuc3RyaW5nLnN1YnN0cih0aGlzLnBvcywgcGF0dGVybi5sZW5ndGgpO1xuICAgICAgICBpZiAoY2FzZWQoc3Vic3RyKSA9PSBjYXNlZChwYXR0ZXJuKSkge1xuICAgICAgICAgIGlmIChjb25zdW1lICE9PSBmYWxzZSkgdGhpcy5wb3MgKz0gcGF0dGVybi5sZW5ndGg7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBtYXRjaCA9IHRoaXMuc3RyaW5nLnNsaWNlKHRoaXMucG9zKS5tYXRjaChwYXR0ZXJuKTtcbiAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoLmluZGV4ID4gMCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmIChtYXRjaCAmJiBjb25zdW1lICE9PSBmYWxzZSkgdGhpcy5wb3MgKz0gbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgICB9XG4gICAgfSxcbiAgICBjdXJyZW50OiBmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0cmluZy5zbGljZSh0aGlzLnN0YXJ0LCB0aGlzLnBvcyk7fSxcbiAgICBoaWRlRmlyc3RDaGFyczogZnVuY3Rpb24obiwgaW5uZXIpIHtcbiAgICAgIHRoaXMubGluZVN0YXJ0ICs9IG47XG4gICAgICB0cnkgeyByZXR1cm4gaW5uZXIoKTsgfVxuICAgICAgZmluYWxseSB7IHRoaXMubGluZVN0YXJ0IC09IG47IH1cbiAgICB9XG4gIH07XG5cbiAgLy8gVEVYVE1BUktFUlNcblxuICAvLyBDcmVhdGVkIHdpdGggbWFya1RleHQgYW5kIHNldEJvb2ttYXJrIG1ldGhvZHMuIEEgVGV4dE1hcmtlciBpcyBhXG4gIC8vIGhhbmRsZSB0aGF0IGNhbiBiZSB1c2VkIHRvIGNsZWFyIG9yIGZpbmQgYSBtYXJrZWQgcG9zaXRpb24gaW4gdGhlXG4gIC8vIGRvY3VtZW50LiBMaW5lIG9iamVjdHMgaG9sZCBhcnJheXMgKG1hcmtlZFNwYW5zKSBjb250YWluaW5nXG4gIC8vIHtmcm9tLCB0bywgbWFya2VyfSBvYmplY3QgcG9pbnRpbmcgdG8gc3VjaCBtYXJrZXIgb2JqZWN0cywgYW5kXG4gIC8vIGluZGljYXRpbmcgdGhhdCBzdWNoIGEgbWFya2VyIGlzIHByZXNlbnQgb24gdGhhdCBsaW5lLiBNdWx0aXBsZVxuICAvLyBsaW5lcyBtYXkgcG9pbnQgdG8gdGhlIHNhbWUgbWFya2VyIHdoZW4gaXQgc3BhbnMgYWNyb3NzIGxpbmVzLlxuICAvLyBUaGUgc3BhbnMgd2lsbCBoYXZlIG51bGwgZm9yIHRoZWlyIGZyb20vdG8gcHJvcGVydGllcyB3aGVuIHRoZVxuICAvLyBtYXJrZXIgY29udGludWVzIGJleW9uZCB0aGUgc3RhcnQvZW5kIG9mIHRoZSBsaW5lLiBNYXJrZXJzIGhhdmVcbiAgLy8gbGlua3MgYmFjayB0byB0aGUgbGluZXMgdGhleSBjdXJyZW50bHkgdG91Y2guXG5cbiAgdmFyIG5leHRNYXJrZXJJZCA9IDA7XG5cbiAgdmFyIFRleHRNYXJrZXIgPSBDb2RlTWlycm9yLlRleHRNYXJrZXIgPSBmdW5jdGlvbihkb2MsIHR5cGUpIHtcbiAgICB0aGlzLmxpbmVzID0gW107XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB0aGlzLmRvYyA9IGRvYztcbiAgICB0aGlzLmlkID0gKytuZXh0TWFya2VySWQ7XG4gIH07XG4gIGV2ZW50TWl4aW4oVGV4dE1hcmtlcik7XG5cbiAgLy8gQ2xlYXIgdGhlIG1hcmtlci5cbiAgVGV4dE1hcmtlci5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5leHBsaWNpdGx5Q2xlYXJlZCkgcmV0dXJuO1xuICAgIHZhciBjbSA9IHRoaXMuZG9jLmNtLCB3aXRoT3AgPSBjbSAmJiAhY20uY3VyT3A7XG4gICAgaWYgKHdpdGhPcCkgc3RhcnRPcGVyYXRpb24oY20pO1xuICAgIGlmIChoYXNIYW5kbGVyKHRoaXMsIFwiY2xlYXJcIikpIHtcbiAgICAgIHZhciBmb3VuZCA9IHRoaXMuZmluZCgpO1xuICAgICAgaWYgKGZvdW5kKSBzaWduYWxMYXRlcih0aGlzLCBcImNsZWFyXCIsIGZvdW5kLmZyb20sIGZvdW5kLnRvKTtcbiAgICB9XG4gICAgdmFyIG1pbiA9IG51bGwsIG1heCA9IG51bGw7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgbGluZSA9IHRoaXMubGluZXNbaV07XG4gICAgICB2YXIgc3BhbiA9IGdldE1hcmtlZFNwYW5Gb3IobGluZS5tYXJrZWRTcGFucywgdGhpcyk7XG4gICAgICBpZiAoY20gJiYgIXRoaXMuY29sbGFwc2VkKSByZWdMaW5lQ2hhbmdlKGNtLCBsaW5lTm8obGluZSksIFwidGV4dFwiKTtcbiAgICAgIGVsc2UgaWYgKGNtKSB7XG4gICAgICAgIGlmIChzcGFuLnRvICE9IG51bGwpIG1heCA9IGxpbmVObyhsaW5lKTtcbiAgICAgICAgaWYgKHNwYW4uZnJvbSAhPSBudWxsKSBtaW4gPSBsaW5lTm8obGluZSk7XG4gICAgICB9XG4gICAgICBsaW5lLm1hcmtlZFNwYW5zID0gcmVtb3ZlTWFya2VkU3BhbihsaW5lLm1hcmtlZFNwYW5zLCBzcGFuKTtcbiAgICAgIGlmIChzcGFuLmZyb20gPT0gbnVsbCAmJiB0aGlzLmNvbGxhcHNlZCAmJiAhbGluZUlzSGlkZGVuKHRoaXMuZG9jLCBsaW5lKSAmJiBjbSlcbiAgICAgICAgdXBkYXRlTGluZUhlaWdodChsaW5lLCB0ZXh0SGVpZ2h0KGNtLmRpc3BsYXkpKTtcbiAgICB9XG4gICAgaWYgKGNtICYmIHRoaXMuY29sbGFwc2VkICYmICFjbS5vcHRpb25zLmxpbmVXcmFwcGluZykgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgdmlzdWFsID0gdmlzdWFsTGluZSh0aGlzLmxpbmVzW2ldKSwgbGVuID0gbGluZUxlbmd0aCh2aXN1YWwpO1xuICAgICAgaWYgKGxlbiA+IGNtLmRpc3BsYXkubWF4TGluZUxlbmd0aCkge1xuICAgICAgICBjbS5kaXNwbGF5Lm1heExpbmUgPSB2aXN1YWw7XG4gICAgICAgIGNtLmRpc3BsYXkubWF4TGluZUxlbmd0aCA9IGxlbjtcbiAgICAgICAgY20uZGlzcGxheS5tYXhMaW5lQ2hhbmdlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1pbiAhPSBudWxsICYmIGNtICYmIHRoaXMuY29sbGFwc2VkKSByZWdDaGFuZ2UoY20sIG1pbiwgbWF4ICsgMSk7XG4gICAgdGhpcy5saW5lcy5sZW5ndGggPSAwO1xuICAgIHRoaXMuZXhwbGljaXRseUNsZWFyZWQgPSB0cnVlO1xuICAgIGlmICh0aGlzLmF0b21pYyAmJiB0aGlzLmRvYy5jYW50RWRpdCkge1xuICAgICAgdGhpcy5kb2MuY2FudEVkaXQgPSBmYWxzZTtcbiAgICAgIGlmIChjbSkgcmVDaGVja1NlbGVjdGlvbihjbS5kb2MpO1xuICAgIH1cbiAgICBpZiAoY20pIHNpZ25hbExhdGVyKGNtLCBcIm1hcmtlckNsZWFyZWRcIiwgY20sIHRoaXMpO1xuICAgIGlmICh3aXRoT3ApIGVuZE9wZXJhdGlvbihjbSk7XG4gICAgaWYgKHRoaXMucGFyZW50KSB0aGlzLnBhcmVudC5jbGVhcigpO1xuICB9O1xuXG4gIC8vIEZpbmQgdGhlIHBvc2l0aW9uIG9mIHRoZSBtYXJrZXIgaW4gdGhlIGRvY3VtZW50LiBSZXR1cm5zIGEge2Zyb20sXG4gIC8vIHRvfSBvYmplY3QgYnkgZGVmYXVsdC4gU2lkZSBjYW4gYmUgcGFzc2VkIHRvIGdldCBhIHNwZWNpZmljIHNpZGVcbiAgLy8gLS0gMCAoYm90aCksIC0xIChsZWZ0KSwgb3IgMSAocmlnaHQpLiBXaGVuIGxpbmVPYmogaXMgdHJ1ZSwgdGhlXG4gIC8vIFBvcyBvYmplY3RzIHJldHVybmVkIGNvbnRhaW4gYSBsaW5lIG9iamVjdCwgcmF0aGVyIHRoYW4gYSBsaW5lXG4gIC8vIG51bWJlciAodXNlZCB0byBwcmV2ZW50IGxvb2tpbmcgdXAgdGhlIHNhbWUgbGluZSB0d2ljZSkuXG4gIFRleHRNYXJrZXIucHJvdG90eXBlLmZpbmQgPSBmdW5jdGlvbihzaWRlLCBsaW5lT2JqKSB7XG4gICAgaWYgKHNpZGUgPT0gbnVsbCAmJiB0aGlzLnR5cGUgPT0gXCJib29rbWFya1wiKSBzaWRlID0gMTtcbiAgICB2YXIgZnJvbSwgdG87XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgbGluZSA9IHRoaXMubGluZXNbaV07XG4gICAgICB2YXIgc3BhbiA9IGdldE1hcmtlZFNwYW5Gb3IobGluZS5tYXJrZWRTcGFucywgdGhpcyk7XG4gICAgICBpZiAoc3Bhbi5mcm9tICE9IG51bGwpIHtcbiAgICAgICAgZnJvbSA9IFBvcyhsaW5lT2JqID8gbGluZSA6IGxpbmVObyhsaW5lKSwgc3Bhbi5mcm9tKTtcbiAgICAgICAgaWYgKHNpZGUgPT0gLTEpIHJldHVybiBmcm9tO1xuICAgICAgfVxuICAgICAgaWYgKHNwYW4udG8gIT0gbnVsbCkge1xuICAgICAgICB0byA9IFBvcyhsaW5lT2JqID8gbGluZSA6IGxpbmVObyhsaW5lKSwgc3Bhbi50byk7XG4gICAgICAgIGlmIChzaWRlID09IDEpIHJldHVybiB0bztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZyb20gJiYge2Zyb206IGZyb20sIHRvOiB0b307XG4gIH07XG5cbiAgLy8gU2lnbmFscyB0aGF0IHRoZSBtYXJrZXIncyB3aWRnZXQgY2hhbmdlZCwgYW5kIHN1cnJvdW5kaW5nIGxheW91dFxuICAvLyBzaG91bGQgYmUgcmVjb21wdXRlZC5cbiAgVGV4dE1hcmtlci5wcm90b3R5cGUuY2hhbmdlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBwb3MgPSB0aGlzLmZpbmQoLTEsIHRydWUpLCB3aWRnZXQgPSB0aGlzLCBjbSA9IHRoaXMuZG9jLmNtO1xuICAgIGlmICghcG9zIHx8ICFjbSkgcmV0dXJuO1xuICAgIHJ1bkluT3AoY20sIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGxpbmUgPSBwb3MubGluZSwgbGluZU4gPSBsaW5lTm8ocG9zLmxpbmUpO1xuICAgICAgdmFyIHZpZXcgPSBmaW5kVmlld0ZvckxpbmUoY20sIGxpbmVOKTtcbiAgICAgIGlmICh2aWV3KSB7XG4gICAgICAgIGNsZWFyTGluZU1lYXN1cmVtZW50Q2FjaGVGb3Iodmlldyk7XG4gICAgICAgIGNtLmN1ck9wLnNlbGVjdGlvbkNoYW5nZWQgPSBjbS5jdXJPcC5mb3JjZVVwZGF0ZSA9IHRydWU7XG4gICAgICB9XG4gICAgICBjbS5jdXJPcC51cGRhdGVNYXhMaW5lID0gdHJ1ZTtcbiAgICAgIGlmICghbGluZUlzSGlkZGVuKHdpZGdldC5kb2MsIGxpbmUpICYmIHdpZGdldC5oZWlnaHQgIT0gbnVsbCkge1xuICAgICAgICB2YXIgb2xkSGVpZ2h0ID0gd2lkZ2V0LmhlaWdodDtcbiAgICAgICAgd2lkZ2V0LmhlaWdodCA9IG51bGw7XG4gICAgICAgIHZhciBkSGVpZ2h0ID0gd2lkZ2V0SGVpZ2h0KHdpZGdldCkgLSBvbGRIZWlnaHQ7XG4gICAgICAgIGlmIChkSGVpZ2h0KVxuICAgICAgICAgIHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgbGluZS5oZWlnaHQgKyBkSGVpZ2h0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBUZXh0TWFya2VyLnByb3RvdHlwZS5hdHRhY2hMaW5lID0gZnVuY3Rpb24obGluZSkge1xuICAgIGlmICghdGhpcy5saW5lcy5sZW5ndGggJiYgdGhpcy5kb2MuY20pIHtcbiAgICAgIHZhciBvcCA9IHRoaXMuZG9jLmNtLmN1ck9wO1xuICAgICAgaWYgKCFvcC5tYXliZUhpZGRlbk1hcmtlcnMgfHwgaW5kZXhPZihvcC5tYXliZUhpZGRlbk1hcmtlcnMsIHRoaXMpID09IC0xKVxuICAgICAgICAob3AubWF5YmVVbmhpZGRlbk1hcmtlcnMgfHwgKG9wLm1heWJlVW5oaWRkZW5NYXJrZXJzID0gW10pKS5wdXNoKHRoaXMpO1xuICAgIH1cbiAgICB0aGlzLmxpbmVzLnB1c2gobGluZSk7XG4gIH07XG4gIFRleHRNYXJrZXIucHJvdG90eXBlLmRldGFjaExpbmUgPSBmdW5jdGlvbihsaW5lKSB7XG4gICAgdGhpcy5saW5lcy5zcGxpY2UoaW5kZXhPZih0aGlzLmxpbmVzLCBsaW5lKSwgMSk7XG4gICAgaWYgKCF0aGlzLmxpbmVzLmxlbmd0aCAmJiB0aGlzLmRvYy5jbSkge1xuICAgICAgdmFyIG9wID0gdGhpcy5kb2MuY20uY3VyT3A7XG4gICAgICAob3AubWF5YmVIaWRkZW5NYXJrZXJzIHx8IChvcC5tYXliZUhpZGRlbk1hcmtlcnMgPSBbXSkpLnB1c2godGhpcyk7XG4gICAgfVxuICB9O1xuXG4gIC8vIENvbGxhcHNlZCBtYXJrZXJzIGhhdmUgdW5pcXVlIGlkcywgaW4gb3JkZXIgdG8gYmUgYWJsZSB0byBvcmRlclxuICAvLyB0aGVtLCB3aGljaCBpcyBuZWVkZWQgZm9yIHVuaXF1ZWx5IGRldGVybWluaW5nIGFuIG91dGVyIG1hcmtlclxuICAvLyB3aGVuIHRoZXkgb3ZlcmxhcCAodGhleSBtYXkgbmVzdCwgYnV0IG5vdCBwYXJ0aWFsbHkgb3ZlcmxhcCkuXG4gIHZhciBuZXh0TWFya2VySWQgPSAwO1xuXG4gIC8vIENyZWF0ZSBhIG1hcmtlciwgd2lyZSBpdCB1cCB0byB0aGUgcmlnaHQgbGluZXMsIGFuZFxuICBmdW5jdGlvbiBtYXJrVGV4dChkb2MsIGZyb20sIHRvLCBvcHRpb25zLCB0eXBlKSB7XG4gICAgLy8gU2hhcmVkIG1hcmtlcnMgKGFjcm9zcyBsaW5rZWQgZG9jdW1lbnRzKSBhcmUgaGFuZGxlZCBzZXBhcmF0ZWx5XG4gICAgLy8gKG1hcmtUZXh0U2hhcmVkIHdpbGwgY2FsbCBvdXQgdG8gdGhpcyBhZ2Fpbiwgb25jZSBwZXJcbiAgICAvLyBkb2N1bWVudCkuXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5zaGFyZWQpIHJldHVybiBtYXJrVGV4dFNoYXJlZChkb2MsIGZyb20sIHRvLCBvcHRpb25zLCB0eXBlKTtcbiAgICAvLyBFbnN1cmUgd2UgYXJlIGluIGFuIG9wZXJhdGlvbi5cbiAgICBpZiAoZG9jLmNtICYmICFkb2MuY20uY3VyT3ApIHJldHVybiBvcGVyYXRpb24oZG9jLmNtLCBtYXJrVGV4dCkoZG9jLCBmcm9tLCB0bywgb3B0aW9ucywgdHlwZSk7XG5cbiAgICB2YXIgbWFya2VyID0gbmV3IFRleHRNYXJrZXIoZG9jLCB0eXBlKSwgZGlmZiA9IGNtcChmcm9tLCB0byk7XG4gICAgaWYgKG9wdGlvbnMpIGNvcHlPYmoob3B0aW9ucywgbWFya2VyLCBmYWxzZSk7XG4gICAgLy8gRG9uJ3QgY29ubmVjdCBlbXB0eSBtYXJrZXJzIHVubGVzcyBjbGVhcldoZW5FbXB0eSBpcyBmYWxzZVxuICAgIGlmIChkaWZmID4gMCB8fCBkaWZmID09IDAgJiYgbWFya2VyLmNsZWFyV2hlbkVtcHR5ICE9PSBmYWxzZSlcbiAgICAgIHJldHVybiBtYXJrZXI7XG4gICAgaWYgKG1hcmtlci5yZXBsYWNlZFdpdGgpIHtcbiAgICAgIC8vIFNob3dpbmcgdXAgYXMgYSB3aWRnZXQgaW1wbGllcyBjb2xsYXBzZWQgKHdpZGdldCByZXBsYWNlcyB0ZXh0KVxuICAgICAgbWFya2VyLmNvbGxhcHNlZCA9IHRydWU7XG4gICAgICBtYXJrZXIud2lkZ2V0Tm9kZSA9IGVsdChcInNwYW5cIiwgW21hcmtlci5yZXBsYWNlZFdpdGhdLCBcIkNvZGVNaXJyb3Itd2lkZ2V0XCIpO1xuICAgICAgaWYgKCFvcHRpb25zLmhhbmRsZU1vdXNlRXZlbnRzKSBtYXJrZXIud2lkZ2V0Tm9kZS5zZXRBdHRyaWJ1dGUoXCJjbS1pZ25vcmUtZXZlbnRzXCIsIFwidHJ1ZVwiKTtcbiAgICAgIGlmIChvcHRpb25zLmluc2VydExlZnQpIG1hcmtlci53aWRnZXROb2RlLmluc2VydExlZnQgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAobWFya2VyLmNvbGxhcHNlZCkge1xuICAgICAgaWYgKGNvbmZsaWN0aW5nQ29sbGFwc2VkUmFuZ2UoZG9jLCBmcm9tLmxpbmUsIGZyb20sIHRvLCBtYXJrZXIpIHx8XG4gICAgICAgICAgZnJvbS5saW5lICE9IHRvLmxpbmUgJiYgY29uZmxpY3RpbmdDb2xsYXBzZWRSYW5nZShkb2MsIHRvLmxpbmUsIGZyb20sIHRvLCBtYXJrZXIpKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnNlcnRpbmcgY29sbGFwc2VkIG1hcmtlciBwYXJ0aWFsbHkgb3ZlcmxhcHBpbmcgYW4gZXhpc3Rpbmcgb25lXCIpO1xuICAgICAgc2F3Q29sbGFwc2VkU3BhbnMgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChtYXJrZXIuYWRkVG9IaXN0b3J5KVxuICAgICAgYWRkQ2hhbmdlVG9IaXN0b3J5KGRvYywge2Zyb206IGZyb20sIHRvOiB0bywgb3JpZ2luOiBcIm1hcmtUZXh0XCJ9LCBkb2Muc2VsLCBOYU4pO1xuXG4gICAgdmFyIGN1ckxpbmUgPSBmcm9tLmxpbmUsIGNtID0gZG9jLmNtLCB1cGRhdGVNYXhMaW5lO1xuICAgIGRvYy5pdGVyKGN1ckxpbmUsIHRvLmxpbmUgKyAxLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgICBpZiAoY20gJiYgbWFya2VyLmNvbGxhcHNlZCAmJiAhY20ub3B0aW9ucy5saW5lV3JhcHBpbmcgJiYgdmlzdWFsTGluZShsaW5lKSA9PSBjbS5kaXNwbGF5Lm1heExpbmUpXG4gICAgICAgIHVwZGF0ZU1heExpbmUgPSB0cnVlO1xuICAgICAgaWYgKG1hcmtlci5jb2xsYXBzZWQgJiYgY3VyTGluZSAhPSBmcm9tLmxpbmUpIHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgMCk7XG4gICAgICBhZGRNYXJrZWRTcGFuKGxpbmUsIG5ldyBNYXJrZWRTcGFuKG1hcmtlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyTGluZSA9PSBmcm9tLmxpbmUgPyBmcm9tLmNoIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyTGluZSA9PSB0by5saW5lID8gdG8uY2ggOiBudWxsKSk7XG4gICAgICArK2N1ckxpbmU7XG4gICAgfSk7XG4gICAgLy8gbGluZUlzSGlkZGVuIGRlcGVuZHMgb24gdGhlIHByZXNlbmNlIG9mIHRoZSBzcGFucywgc28gbmVlZHMgYSBzZWNvbmQgcGFzc1xuICAgIGlmIChtYXJrZXIuY29sbGFwc2VkKSBkb2MuaXRlcihmcm9tLmxpbmUsIHRvLmxpbmUgKyAxLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgICBpZiAobGluZUlzSGlkZGVuKGRvYywgbGluZSkpIHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgMCk7XG4gICAgfSk7XG5cbiAgICBpZiAobWFya2VyLmNsZWFyT25FbnRlcikgb24obWFya2VyLCBcImJlZm9yZUN1cnNvckVudGVyXCIsIGZ1bmN0aW9uKCkgeyBtYXJrZXIuY2xlYXIoKTsgfSk7XG5cbiAgICBpZiAobWFya2VyLnJlYWRPbmx5KSB7XG4gICAgICBzYXdSZWFkT25seVNwYW5zID0gdHJ1ZTtcbiAgICAgIGlmIChkb2MuaGlzdG9yeS5kb25lLmxlbmd0aCB8fCBkb2MuaGlzdG9yeS51bmRvbmUubGVuZ3RoKVxuICAgICAgICBkb2MuY2xlYXJIaXN0b3J5KCk7XG4gICAgfVxuICAgIGlmIChtYXJrZXIuY29sbGFwc2VkKSB7XG4gICAgICBtYXJrZXIuaWQgPSArK25leHRNYXJrZXJJZDtcbiAgICAgIG1hcmtlci5hdG9taWMgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoY20pIHtcbiAgICAgIC8vIFN5bmMgZWRpdG9yIHN0YXRlXG4gICAgICBpZiAodXBkYXRlTWF4TGluZSkgY20uY3VyT3AudXBkYXRlTWF4TGluZSA9IHRydWU7XG4gICAgICBpZiAobWFya2VyLmNvbGxhcHNlZClcbiAgICAgICAgcmVnQ2hhbmdlKGNtLCBmcm9tLmxpbmUsIHRvLmxpbmUgKyAxKTtcbiAgICAgIGVsc2UgaWYgKG1hcmtlci5jbGFzc05hbWUgfHwgbWFya2VyLnRpdGxlIHx8IG1hcmtlci5zdGFydFN0eWxlIHx8IG1hcmtlci5lbmRTdHlsZSB8fCBtYXJrZXIuY3NzKVxuICAgICAgICBmb3IgKHZhciBpID0gZnJvbS5saW5lOyBpIDw9IHRvLmxpbmU7IGkrKykgcmVnTGluZUNoYW5nZShjbSwgaSwgXCJ0ZXh0XCIpO1xuICAgICAgaWYgKG1hcmtlci5hdG9taWMpIHJlQ2hlY2tTZWxlY3Rpb24oY20uZG9jKTtcbiAgICAgIHNpZ25hbExhdGVyKGNtLCBcIm1hcmtlckFkZGVkXCIsIGNtLCBtYXJrZXIpO1xuICAgIH1cbiAgICByZXR1cm4gbWFya2VyO1xuICB9XG5cbiAgLy8gU0hBUkVEIFRFWFRNQVJLRVJTXG5cbiAgLy8gQSBzaGFyZWQgbWFya2VyIHNwYW5zIG11bHRpcGxlIGxpbmtlZCBkb2N1bWVudHMuIEl0IGlzXG4gIC8vIGltcGxlbWVudGVkIGFzIGEgbWV0YS1tYXJrZXItb2JqZWN0IGNvbnRyb2xsaW5nIG11bHRpcGxlIG5vcm1hbFxuICAvLyBtYXJrZXJzLlxuICB2YXIgU2hhcmVkVGV4dE1hcmtlciA9IENvZGVNaXJyb3IuU2hhcmVkVGV4dE1hcmtlciA9IGZ1bmN0aW9uKG1hcmtlcnMsIHByaW1hcnkpIHtcbiAgICB0aGlzLm1hcmtlcnMgPSBtYXJrZXJzO1xuICAgIHRoaXMucHJpbWFyeSA9IHByaW1hcnk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrZXJzLmxlbmd0aDsgKytpKVxuICAgICAgbWFya2Vyc1tpXS5wYXJlbnQgPSB0aGlzO1xuICB9O1xuICBldmVudE1peGluKFNoYXJlZFRleHRNYXJrZXIpO1xuXG4gIFNoYXJlZFRleHRNYXJrZXIucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuZXhwbGljaXRseUNsZWFyZWQpIHJldHVybjtcbiAgICB0aGlzLmV4cGxpY2l0bHlDbGVhcmVkID0gdHJ1ZTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubWFya2Vycy5sZW5ndGg7ICsraSlcbiAgICAgIHRoaXMubWFya2Vyc1tpXS5jbGVhcigpO1xuICAgIHNpZ25hbExhdGVyKHRoaXMsIFwiY2xlYXJcIik7XG4gIH07XG4gIFNoYXJlZFRleHRNYXJrZXIucHJvdG90eXBlLmZpbmQgPSBmdW5jdGlvbihzaWRlLCBsaW5lT2JqKSB7XG4gICAgcmV0dXJuIHRoaXMucHJpbWFyeS5maW5kKHNpZGUsIGxpbmVPYmopO1xuICB9O1xuXG4gIGZ1bmN0aW9uIG1hcmtUZXh0U2hhcmVkKGRvYywgZnJvbSwgdG8sIG9wdGlvbnMsIHR5cGUpIHtcbiAgICBvcHRpb25zID0gY29weU9iaihvcHRpb25zKTtcbiAgICBvcHRpb25zLnNoYXJlZCA9IGZhbHNlO1xuICAgIHZhciBtYXJrZXJzID0gW21hcmtUZXh0KGRvYywgZnJvbSwgdG8sIG9wdGlvbnMsIHR5cGUpXSwgcHJpbWFyeSA9IG1hcmtlcnNbMF07XG4gICAgdmFyIHdpZGdldCA9IG9wdGlvbnMud2lkZ2V0Tm9kZTtcbiAgICBsaW5rZWREb2NzKGRvYywgZnVuY3Rpb24oZG9jKSB7XG4gICAgICBpZiAod2lkZ2V0KSBvcHRpb25zLndpZGdldE5vZGUgPSB3aWRnZXQuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgbWFya2Vycy5wdXNoKG1hcmtUZXh0KGRvYywgY2xpcFBvcyhkb2MsIGZyb20pLCBjbGlwUG9zKGRvYywgdG8pLCBvcHRpb25zLCB0eXBlKSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5saW5rZWQubGVuZ3RoOyArK2kpXG4gICAgICAgIGlmIChkb2MubGlua2VkW2ldLmlzUGFyZW50KSByZXR1cm47XG4gICAgICBwcmltYXJ5ID0gbHN0KG1hcmtlcnMpO1xuICAgIH0pO1xuICAgIHJldHVybiBuZXcgU2hhcmVkVGV4dE1hcmtlcihtYXJrZXJzLCBwcmltYXJ5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmRTaGFyZWRNYXJrZXJzKGRvYykge1xuICAgIHJldHVybiBkb2MuZmluZE1hcmtzKFBvcyhkb2MuZmlyc3QsIDApLCBkb2MuY2xpcFBvcyhQb3MoZG9jLmxhc3RMaW5lKCkpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihtKSB7IHJldHVybiBtLnBhcmVudDsgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBjb3B5U2hhcmVkTWFya2Vycyhkb2MsIG1hcmtlcnMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBtYXJrZXIgPSBtYXJrZXJzW2ldLCBwb3MgPSBtYXJrZXIuZmluZCgpO1xuICAgICAgdmFyIG1Gcm9tID0gZG9jLmNsaXBQb3MocG9zLmZyb20pLCBtVG8gPSBkb2MuY2xpcFBvcyhwb3MudG8pO1xuICAgICAgaWYgKGNtcChtRnJvbSwgbVRvKSkge1xuICAgICAgICB2YXIgc3ViTWFyayA9IG1hcmtUZXh0KGRvYywgbUZyb20sIG1UbywgbWFya2VyLnByaW1hcnksIG1hcmtlci5wcmltYXJ5LnR5cGUpO1xuICAgICAgICBtYXJrZXIubWFya2Vycy5wdXNoKHN1Yk1hcmspO1xuICAgICAgICBzdWJNYXJrLnBhcmVudCA9IG1hcmtlcjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkZXRhY2hTaGFyZWRNYXJrZXJzKG1hcmtlcnMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBtYXJrZXIgPSBtYXJrZXJzW2ldLCBsaW5rZWQgPSBbbWFya2VyLnByaW1hcnkuZG9jXTs7XG4gICAgICBsaW5rZWREb2NzKG1hcmtlci5wcmltYXJ5LmRvYywgZnVuY3Rpb24oZCkgeyBsaW5rZWQucHVzaChkKTsgfSk7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1hcmtlci5tYXJrZXJzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHZhciBzdWJNYXJrZXIgPSBtYXJrZXIubWFya2Vyc1tqXTtcbiAgICAgICAgaWYgKGluZGV4T2YobGlua2VkLCBzdWJNYXJrZXIuZG9jKSA9PSAtMSkge1xuICAgICAgICAgIHN1Yk1hcmtlci5wYXJlbnQgPSBudWxsO1xuICAgICAgICAgIG1hcmtlci5tYXJrZXJzLnNwbGljZShqLS0sIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gVEVYVE1BUktFUiBTUEFOU1xuXG4gIGZ1bmN0aW9uIE1hcmtlZFNwYW4obWFya2VyLCBmcm9tLCB0bykge1xuICAgIHRoaXMubWFya2VyID0gbWFya2VyO1xuICAgIHRoaXMuZnJvbSA9IGZyb207IHRoaXMudG8gPSB0bztcbiAgfVxuXG4gIC8vIFNlYXJjaCBhbiBhcnJheSBvZiBzcGFucyBmb3IgYSBzcGFuIG1hdGNoaW5nIHRoZSBnaXZlbiBtYXJrZXIuXG4gIGZ1bmN0aW9uIGdldE1hcmtlZFNwYW5Gb3Ioc3BhbnMsIG1hcmtlcikge1xuICAgIGlmIChzcGFucykgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHNwYW4gPSBzcGFuc1tpXTtcbiAgICAgIGlmIChzcGFuLm1hcmtlciA9PSBtYXJrZXIpIHJldHVybiBzcGFuO1xuICAgIH1cbiAgfVxuICAvLyBSZW1vdmUgYSBzcGFuIGZyb20gYW4gYXJyYXksIHJldHVybmluZyB1bmRlZmluZWQgaWYgbm8gc3BhbnMgYXJlXG4gIC8vIGxlZnQgKHdlIGRvbid0IHN0b3JlIGFycmF5cyBmb3IgbGluZXMgd2l0aG91dCBzcGFucykuXG4gIGZ1bmN0aW9uIHJlbW92ZU1hcmtlZFNwYW4oc3BhbnMsIHNwYW4pIHtcbiAgICBmb3IgKHZhciByLCBpID0gMDsgaSA8IHNwYW5zLmxlbmd0aDsgKytpKVxuICAgICAgaWYgKHNwYW5zW2ldICE9IHNwYW4pIChyIHx8IChyID0gW10pKS5wdXNoKHNwYW5zW2ldKTtcbiAgICByZXR1cm4gcjtcbiAgfVxuICAvLyBBZGQgYSBzcGFuIHRvIGEgbGluZS5cbiAgZnVuY3Rpb24gYWRkTWFya2VkU3BhbihsaW5lLCBzcGFuKSB7XG4gICAgbGluZS5tYXJrZWRTcGFucyA9IGxpbmUubWFya2VkU3BhbnMgPyBsaW5lLm1hcmtlZFNwYW5zLmNvbmNhdChbc3Bhbl0pIDogW3NwYW5dO1xuICAgIHNwYW4ubWFya2VyLmF0dGFjaExpbmUobGluZSk7XG4gIH1cblxuICAvLyBVc2VkIGZvciB0aGUgYWxnb3JpdGhtIHRoYXQgYWRqdXN0cyBtYXJrZXJzIGZvciBhIGNoYW5nZSBpbiB0aGVcbiAgLy8gZG9jdW1lbnQuIFRoZXNlIGZ1bmN0aW9ucyBjdXQgYW4gYXJyYXkgb2Ygc3BhbnMgYXQgYSBnaXZlblxuICAvLyBjaGFyYWN0ZXIgcG9zaXRpb24sIHJldHVybmluZyBhbiBhcnJheSBvZiByZW1haW5pbmcgY2h1bmtzIChvclxuICAvLyB1bmRlZmluZWQgaWYgbm90aGluZyByZW1haW5zKS5cbiAgZnVuY3Rpb24gbWFya2VkU3BhbnNCZWZvcmUob2xkLCBzdGFydENoLCBpc0luc2VydCkge1xuICAgIGlmIChvbGQpIGZvciAodmFyIGkgPSAwLCBudzsgaSA8IG9sZC5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHNwYW4gPSBvbGRbaV0sIG1hcmtlciA9IHNwYW4ubWFya2VyO1xuICAgICAgdmFyIHN0YXJ0c0JlZm9yZSA9IHNwYW4uZnJvbSA9PSBudWxsIHx8IChtYXJrZXIuaW5jbHVzaXZlTGVmdCA/IHNwYW4uZnJvbSA8PSBzdGFydENoIDogc3Bhbi5mcm9tIDwgc3RhcnRDaCk7XG4gICAgICBpZiAoc3RhcnRzQmVmb3JlIHx8IHNwYW4uZnJvbSA9PSBzdGFydENoICYmIG1hcmtlci50eXBlID09IFwiYm9va21hcmtcIiAmJiAoIWlzSW5zZXJ0IHx8ICFzcGFuLm1hcmtlci5pbnNlcnRMZWZ0KSkge1xuICAgICAgICB2YXIgZW5kc0FmdGVyID0gc3Bhbi50byA9PSBudWxsIHx8IChtYXJrZXIuaW5jbHVzaXZlUmlnaHQgPyBzcGFuLnRvID49IHN0YXJ0Q2ggOiBzcGFuLnRvID4gc3RhcnRDaCk7XG4gICAgICAgIChudyB8fCAobncgPSBbXSkpLnB1c2gobmV3IE1hcmtlZFNwYW4obWFya2VyLCBzcGFuLmZyb20sIGVuZHNBZnRlciA/IG51bGwgOiBzcGFuLnRvKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudztcbiAgfVxuICBmdW5jdGlvbiBtYXJrZWRTcGFuc0FmdGVyKG9sZCwgZW5kQ2gsIGlzSW5zZXJ0KSB7XG4gICAgaWYgKG9sZCkgZm9yICh2YXIgaSA9IDAsIG53OyBpIDwgb2xkLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgc3BhbiA9IG9sZFtpXSwgbWFya2VyID0gc3Bhbi5tYXJrZXI7XG4gICAgICB2YXIgZW5kc0FmdGVyID0gc3Bhbi50byA9PSBudWxsIHx8IChtYXJrZXIuaW5jbHVzaXZlUmlnaHQgPyBzcGFuLnRvID49IGVuZENoIDogc3Bhbi50byA+IGVuZENoKTtcbiAgICAgIGlmIChlbmRzQWZ0ZXIgfHwgc3Bhbi5mcm9tID09IGVuZENoICYmIG1hcmtlci50eXBlID09IFwiYm9va21hcmtcIiAmJiAoIWlzSW5zZXJ0IHx8IHNwYW4ubWFya2VyLmluc2VydExlZnQpKSB7XG4gICAgICAgIHZhciBzdGFydHNCZWZvcmUgPSBzcGFuLmZyb20gPT0gbnVsbCB8fCAobWFya2VyLmluY2x1c2l2ZUxlZnQgPyBzcGFuLmZyb20gPD0gZW5kQ2ggOiBzcGFuLmZyb20gPCBlbmRDaCk7XG4gICAgICAgIChudyB8fCAobncgPSBbXSkpLnB1c2gobmV3IE1hcmtlZFNwYW4obWFya2VyLCBzdGFydHNCZWZvcmUgPyBudWxsIDogc3Bhbi5mcm9tIC0gZW5kQ2gsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi50byA9PSBudWxsID8gbnVsbCA6IHNwYW4udG8gLSBlbmRDaCkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnc7XG4gIH1cblxuICAvLyBHaXZlbiBhIGNoYW5nZSBvYmplY3QsIGNvbXB1dGUgdGhlIG5ldyBzZXQgb2YgbWFya2VyIHNwYW5zIHRoYXRcbiAgLy8gY292ZXIgdGhlIGxpbmUgaW4gd2hpY2ggdGhlIGNoYW5nZSB0b29rIHBsYWNlLiBSZW1vdmVzIHNwYW5zXG4gIC8vIGVudGlyZWx5IHdpdGhpbiB0aGUgY2hhbmdlLCByZWNvbm5lY3RzIHNwYW5zIGJlbG9uZ2luZyB0byB0aGVcbiAgLy8gc2FtZSBtYXJrZXIgdGhhdCBhcHBlYXIgb24gYm90aCBzaWRlcyBvZiB0aGUgY2hhbmdlLCBhbmQgY3V0cyBvZmZcbiAgLy8gc3BhbnMgcGFydGlhbGx5IHdpdGhpbiB0aGUgY2hhbmdlLiBSZXR1cm5zIGFuIGFycmF5IG9mIHNwYW5cbiAgLy8gYXJyYXlzIHdpdGggb25lIGVsZW1lbnQgZm9yIGVhY2ggbGluZSBpbiAoYWZ0ZXIpIHRoZSBjaGFuZ2UuXG4gIGZ1bmN0aW9uIHN0cmV0Y2hTcGFuc092ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpIHtcbiAgICBpZiAoY2hhbmdlLmZ1bGwpIHJldHVybiBudWxsO1xuICAgIHZhciBvbGRGaXJzdCA9IGlzTGluZShkb2MsIGNoYW5nZS5mcm9tLmxpbmUpICYmIGdldExpbmUoZG9jLCBjaGFuZ2UuZnJvbS5saW5lKS5tYXJrZWRTcGFucztcbiAgICB2YXIgb2xkTGFzdCA9IGlzTGluZShkb2MsIGNoYW5nZS50by5saW5lKSAmJiBnZXRMaW5lKGRvYywgY2hhbmdlLnRvLmxpbmUpLm1hcmtlZFNwYW5zO1xuICAgIGlmICghb2xkRmlyc3QgJiYgIW9sZExhc3QpIHJldHVybiBudWxsO1xuXG4gICAgdmFyIHN0YXJ0Q2ggPSBjaGFuZ2UuZnJvbS5jaCwgZW5kQ2ggPSBjaGFuZ2UudG8uY2gsIGlzSW5zZXJ0ID0gY21wKGNoYW5nZS5mcm9tLCBjaGFuZ2UudG8pID09IDA7XG4gICAgLy8gR2V0IHRoZSBzcGFucyB0aGF0ICdzdGljayBvdXQnIG9uIGJvdGggc2lkZXNcbiAgICB2YXIgZmlyc3QgPSBtYXJrZWRTcGFuc0JlZm9yZShvbGRGaXJzdCwgc3RhcnRDaCwgaXNJbnNlcnQpO1xuICAgIHZhciBsYXN0ID0gbWFya2VkU3BhbnNBZnRlcihvbGRMYXN0LCBlbmRDaCwgaXNJbnNlcnQpO1xuXG4gICAgLy8gTmV4dCwgbWVyZ2UgdGhvc2UgdHdvIGVuZHNcbiAgICB2YXIgc2FtZUxpbmUgPSBjaGFuZ2UudGV4dC5sZW5ndGggPT0gMSwgb2Zmc2V0ID0gbHN0KGNoYW5nZS50ZXh0KS5sZW5ndGggKyAoc2FtZUxpbmUgPyBzdGFydENoIDogMCk7XG4gICAgaWYgKGZpcnN0KSB7XG4gICAgICAvLyBGaXggdXAgLnRvIHByb3BlcnRpZXMgb2YgZmlyc3RcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlyc3QubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHNwYW4gPSBmaXJzdFtpXTtcbiAgICAgICAgaWYgKHNwYW4udG8gPT0gbnVsbCkge1xuICAgICAgICAgIHZhciBmb3VuZCA9IGdldE1hcmtlZFNwYW5Gb3IobGFzdCwgc3Bhbi5tYXJrZXIpO1xuICAgICAgICAgIGlmICghZm91bmQpIHNwYW4udG8gPSBzdGFydENoO1xuICAgICAgICAgIGVsc2UgaWYgKHNhbWVMaW5lKSBzcGFuLnRvID0gZm91bmQudG8gPT0gbnVsbCA/IG51bGwgOiBmb3VuZC50byArIG9mZnNldDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAobGFzdCkge1xuICAgICAgLy8gRml4IHVwIC5mcm9tIGluIGxhc3QgKG9yIG1vdmUgdGhlbSBpbnRvIGZpcnN0IGluIGNhc2Ugb2Ygc2FtZUxpbmUpXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3QubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHNwYW4gPSBsYXN0W2ldO1xuICAgICAgICBpZiAoc3Bhbi50byAhPSBudWxsKSBzcGFuLnRvICs9IG9mZnNldDtcbiAgICAgICAgaWYgKHNwYW4uZnJvbSA9PSBudWxsKSB7XG4gICAgICAgICAgdmFyIGZvdW5kID0gZ2V0TWFya2VkU3BhbkZvcihmaXJzdCwgc3Bhbi5tYXJrZXIpO1xuICAgICAgICAgIGlmICghZm91bmQpIHtcbiAgICAgICAgICAgIHNwYW4uZnJvbSA9IG9mZnNldDtcbiAgICAgICAgICAgIGlmIChzYW1lTGluZSkgKGZpcnN0IHx8IChmaXJzdCA9IFtdKSkucHVzaChzcGFuKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3Bhbi5mcm9tICs9IG9mZnNldDtcbiAgICAgICAgICBpZiAoc2FtZUxpbmUpIChmaXJzdCB8fCAoZmlyc3QgPSBbXSkpLnB1c2goc3Bhbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gTWFrZSBzdXJlIHdlIGRpZG4ndCBjcmVhdGUgYW55IHplcm8tbGVuZ3RoIHNwYW5zXG4gICAgaWYgKGZpcnN0KSBmaXJzdCA9IGNsZWFyRW1wdHlTcGFucyhmaXJzdCk7XG4gICAgaWYgKGxhc3QgJiYgbGFzdCAhPSBmaXJzdCkgbGFzdCA9IGNsZWFyRW1wdHlTcGFucyhsYXN0KTtcblxuICAgIHZhciBuZXdNYXJrZXJzID0gW2ZpcnN0XTtcbiAgICBpZiAoIXNhbWVMaW5lKSB7XG4gICAgICAvLyBGaWxsIGdhcCB3aXRoIHdob2xlLWxpbmUtc3BhbnNcbiAgICAgIHZhciBnYXAgPSBjaGFuZ2UudGV4dC5sZW5ndGggLSAyLCBnYXBNYXJrZXJzO1xuICAgICAgaWYgKGdhcCA+IDAgJiYgZmlyc3QpXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlyc3QubGVuZ3RoOyArK2kpXG4gICAgICAgICAgaWYgKGZpcnN0W2ldLnRvID09IG51bGwpXG4gICAgICAgICAgICAoZ2FwTWFya2VycyB8fCAoZ2FwTWFya2VycyA9IFtdKSkucHVzaChuZXcgTWFya2VkU3BhbihmaXJzdFtpXS5tYXJrZXIsIG51bGwsIG51bGwpKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ2FwOyArK2kpXG4gICAgICAgIG5ld01hcmtlcnMucHVzaChnYXBNYXJrZXJzKTtcbiAgICAgIG5ld01hcmtlcnMucHVzaChsYXN0KTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld01hcmtlcnM7XG4gIH1cblxuICAvLyBSZW1vdmUgc3BhbnMgdGhhdCBhcmUgZW1wdHkgYW5kIGRvbid0IGhhdmUgYSBjbGVhcldoZW5FbXB0eVxuICAvLyBvcHRpb24gb2YgZmFsc2UuXG4gIGZ1bmN0aW9uIGNsZWFyRW1wdHlTcGFucyhzcGFucykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3BhbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBzcGFuID0gc3BhbnNbaV07XG4gICAgICBpZiAoc3Bhbi5mcm9tICE9IG51bGwgJiYgc3Bhbi5mcm9tID09IHNwYW4udG8gJiYgc3Bhbi5tYXJrZXIuY2xlYXJXaGVuRW1wdHkgIT09IGZhbHNlKVxuICAgICAgICBzcGFucy5zcGxpY2UoaS0tLCAxKTtcbiAgICB9XG4gICAgaWYgKCFzcGFucy5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBzcGFucztcbiAgfVxuXG4gIC8vIFVzZWQgZm9yIHVuL3JlLWRvaW5nIGNoYW5nZXMgZnJvbSB0aGUgaGlzdG9yeS4gQ29tYmluZXMgdGhlXG4gIC8vIHJlc3VsdCBvZiBjb21wdXRpbmcgdGhlIGV4aXN0aW5nIHNwYW5zIHdpdGggdGhlIHNldCBvZiBzcGFucyB0aGF0XG4gIC8vIGV4aXN0ZWQgaW4gdGhlIGhpc3RvcnkgKHNvIHRoYXQgZGVsZXRpbmcgYXJvdW5kIGEgc3BhbiBhbmQgdGhlblxuICAvLyB1bmRvaW5nIGJyaW5ncyBiYWNrIHRoZSBzcGFuKS5cbiAgZnVuY3Rpb24gbWVyZ2VPbGRTcGFucyhkb2MsIGNoYW5nZSkge1xuICAgIHZhciBvbGQgPSBnZXRPbGRTcGFucyhkb2MsIGNoYW5nZSk7XG4gICAgdmFyIHN0cmV0Y2hlZCA9IHN0cmV0Y2hTcGFuc092ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpO1xuICAgIGlmICghb2xkKSByZXR1cm4gc3RyZXRjaGVkO1xuICAgIGlmICghc3RyZXRjaGVkKSByZXR1cm4gb2xkO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvbGQubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBvbGRDdXIgPSBvbGRbaV0sIHN0cmV0Y2hDdXIgPSBzdHJldGNoZWRbaV07XG4gICAgICBpZiAob2xkQ3VyICYmIHN0cmV0Y2hDdXIpIHtcbiAgICAgICAgc3BhbnM6IGZvciAodmFyIGogPSAwOyBqIDwgc3RyZXRjaEN1ci5sZW5ndGg7ICsraikge1xuICAgICAgICAgIHZhciBzcGFuID0gc3RyZXRjaEN1cltqXTtcbiAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG9sZEN1ci5sZW5ndGg7ICsraylcbiAgICAgICAgICAgIGlmIChvbGRDdXJba10ubWFya2VyID09IHNwYW4ubWFya2VyKSBjb250aW51ZSBzcGFucztcbiAgICAgICAgICBvbGRDdXIucHVzaChzcGFuKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzdHJldGNoQ3VyKSB7XG4gICAgICAgIG9sZFtpXSA9IHN0cmV0Y2hDdXI7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvbGQ7XG4gIH1cblxuICAvLyBVc2VkIHRvICdjbGlwJyBvdXQgcmVhZE9ubHkgcmFuZ2VzIHdoZW4gbWFraW5nIGEgY2hhbmdlLlxuICBmdW5jdGlvbiByZW1vdmVSZWFkT25seVJhbmdlcyhkb2MsIGZyb20sIHRvKSB7XG4gICAgdmFyIG1hcmtlcnMgPSBudWxsO1xuICAgIGRvYy5pdGVyKGZyb20ubGluZSwgdG8ubGluZSArIDEsIGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIGlmIChsaW5lLm1hcmtlZFNwYW5zKSBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmUubWFya2VkU3BhbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIG1hcmsgPSBsaW5lLm1hcmtlZFNwYW5zW2ldLm1hcmtlcjtcbiAgICAgICAgaWYgKG1hcmsucmVhZE9ubHkgJiYgKCFtYXJrZXJzIHx8IGluZGV4T2YobWFya2VycywgbWFyaykgPT0gLTEpKVxuICAgICAgICAgIChtYXJrZXJzIHx8IChtYXJrZXJzID0gW10pKS5wdXNoKG1hcmspO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmICghbWFya2VycykgcmV0dXJuIG51bGw7XG4gICAgdmFyIHBhcnRzID0gW3tmcm9tOiBmcm9tLCB0bzogdG99XTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtlcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBtayA9IG1hcmtlcnNbaV0sIG0gPSBtay5maW5kKDApO1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwYXJ0cy5sZW5ndGg7ICsraikge1xuICAgICAgICB2YXIgcCA9IHBhcnRzW2pdO1xuICAgICAgICBpZiAoY21wKHAudG8sIG0uZnJvbSkgPCAwIHx8IGNtcChwLmZyb20sIG0udG8pID4gMCkgY29udGludWU7XG4gICAgICAgIHZhciBuZXdQYXJ0cyA9IFtqLCAxXSwgZGZyb20gPSBjbXAocC5mcm9tLCBtLmZyb20pLCBkdG8gPSBjbXAocC50bywgbS50byk7XG4gICAgICAgIGlmIChkZnJvbSA8IDAgfHwgIW1rLmluY2x1c2l2ZUxlZnQgJiYgIWRmcm9tKVxuICAgICAgICAgIG5ld1BhcnRzLnB1c2goe2Zyb206IHAuZnJvbSwgdG86IG0uZnJvbX0pO1xuICAgICAgICBpZiAoZHRvID4gMCB8fCAhbWsuaW5jbHVzaXZlUmlnaHQgJiYgIWR0bylcbiAgICAgICAgICBuZXdQYXJ0cy5wdXNoKHtmcm9tOiBtLnRvLCB0bzogcC50b30pO1xuICAgICAgICBwYXJ0cy5zcGxpY2UuYXBwbHkocGFydHMsIG5ld1BhcnRzKTtcbiAgICAgICAgaiArPSBuZXdQYXJ0cy5sZW5ndGggLSAxO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGFydHM7XG4gIH1cblxuICAvLyBDb25uZWN0IG9yIGRpc2Nvbm5lY3Qgc3BhbnMgZnJvbSBhIGxpbmUuXG4gIGZ1bmN0aW9uIGRldGFjaE1hcmtlZFNwYW5zKGxpbmUpIHtcbiAgICB2YXIgc3BhbnMgPSBsaW5lLm1hcmtlZFNwYW5zO1xuICAgIGlmICghc3BhbnMpIHJldHVybjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNwYW5zLmxlbmd0aDsgKytpKVxuICAgICAgc3BhbnNbaV0ubWFya2VyLmRldGFjaExpbmUobGluZSk7XG4gICAgbGluZS5tYXJrZWRTcGFucyA9IG51bGw7XG4gIH1cbiAgZnVuY3Rpb24gYXR0YWNoTWFya2VkU3BhbnMobGluZSwgc3BhbnMpIHtcbiAgICBpZiAoIXNwYW5zKSByZXR1cm47XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7ICsraSlcbiAgICAgIHNwYW5zW2ldLm1hcmtlci5hdHRhY2hMaW5lKGxpbmUpO1xuICAgIGxpbmUubWFya2VkU3BhbnMgPSBzcGFucztcbiAgfVxuXG4gIC8vIEhlbHBlcnMgdXNlZCB3aGVuIGNvbXB1dGluZyB3aGljaCBvdmVybGFwcGluZyBjb2xsYXBzZWQgc3BhblxuICAvLyBjb3VudHMgYXMgdGhlIGxhcmdlciBvbmUuXG4gIGZ1bmN0aW9uIGV4dHJhTGVmdChtYXJrZXIpIHsgcmV0dXJuIG1hcmtlci5pbmNsdXNpdmVMZWZ0ID8gLTEgOiAwOyB9XG4gIGZ1bmN0aW9uIGV4dHJhUmlnaHQobWFya2VyKSB7IHJldHVybiBtYXJrZXIuaW5jbHVzaXZlUmlnaHQgPyAxIDogMDsgfVxuXG4gIC8vIFJldHVybnMgYSBudW1iZXIgaW5kaWNhdGluZyB3aGljaCBvZiB0d28gb3ZlcmxhcHBpbmcgY29sbGFwc2VkXG4gIC8vIHNwYW5zIGlzIGxhcmdlciAoYW5kIHRodXMgaW5jbHVkZXMgdGhlIG90aGVyKS4gRmFsbHMgYmFjayB0b1xuICAvLyBjb21wYXJpbmcgaWRzIHdoZW4gdGhlIHNwYW5zIGNvdmVyIGV4YWN0bHkgdGhlIHNhbWUgcmFuZ2UuXG4gIGZ1bmN0aW9uIGNvbXBhcmVDb2xsYXBzZWRNYXJrZXJzKGEsIGIpIHtcbiAgICB2YXIgbGVuRGlmZiA9IGEubGluZXMubGVuZ3RoIC0gYi5saW5lcy5sZW5ndGg7XG4gICAgaWYgKGxlbkRpZmYgIT0gMCkgcmV0dXJuIGxlbkRpZmY7XG4gICAgdmFyIGFQb3MgPSBhLmZpbmQoKSwgYlBvcyA9IGIuZmluZCgpO1xuICAgIHZhciBmcm9tQ21wID0gY21wKGFQb3MuZnJvbSwgYlBvcy5mcm9tKSB8fCBleHRyYUxlZnQoYSkgLSBleHRyYUxlZnQoYik7XG4gICAgaWYgKGZyb21DbXApIHJldHVybiAtZnJvbUNtcDtcbiAgICB2YXIgdG9DbXAgPSBjbXAoYVBvcy50bywgYlBvcy50bykgfHwgZXh0cmFSaWdodChhKSAtIGV4dHJhUmlnaHQoYik7XG4gICAgaWYgKHRvQ21wKSByZXR1cm4gdG9DbXA7XG4gICAgcmV0dXJuIGIuaWQgLSBhLmlkO1xuICB9XG5cbiAgLy8gRmluZCBvdXQgd2hldGhlciBhIGxpbmUgZW5kcyBvciBzdGFydHMgaW4gYSBjb2xsYXBzZWQgc3Bhbi4gSWZcbiAgLy8gc28sIHJldHVybiB0aGUgbWFya2VyIGZvciB0aGF0IHNwYW4uXG4gIGZ1bmN0aW9uIGNvbGxhcHNlZFNwYW5BdFNpZGUobGluZSwgc3RhcnQpIHtcbiAgICB2YXIgc3BzID0gc2F3Q29sbGFwc2VkU3BhbnMgJiYgbGluZS5tYXJrZWRTcGFucywgZm91bmQ7XG4gICAgaWYgKHNwcykgZm9yICh2YXIgc3AsIGkgPSAwOyBpIDwgc3BzLmxlbmd0aDsgKytpKSB7XG4gICAgICBzcCA9IHNwc1tpXTtcbiAgICAgIGlmIChzcC5tYXJrZXIuY29sbGFwc2VkICYmIChzdGFydCA/IHNwLmZyb20gOiBzcC50bykgPT0gbnVsbCAmJlxuICAgICAgICAgICghZm91bmQgfHwgY29tcGFyZUNvbGxhcHNlZE1hcmtlcnMoZm91bmQsIHNwLm1hcmtlcikgPCAwKSlcbiAgICAgICAgZm91bmQgPSBzcC5tYXJrZXI7XG4gICAgfVxuICAgIHJldHVybiBmb3VuZDtcbiAgfVxuICBmdW5jdGlvbiBjb2xsYXBzZWRTcGFuQXRTdGFydChsaW5lKSB7IHJldHVybiBjb2xsYXBzZWRTcGFuQXRTaWRlKGxpbmUsIHRydWUpOyB9XG4gIGZ1bmN0aW9uIGNvbGxhcHNlZFNwYW5BdEVuZChsaW5lKSB7IHJldHVybiBjb2xsYXBzZWRTcGFuQXRTaWRlKGxpbmUsIGZhbHNlKTsgfVxuXG4gIC8vIFRlc3Qgd2hldGhlciB0aGVyZSBleGlzdHMgYSBjb2xsYXBzZWQgc3BhbiB0aGF0IHBhcnRpYWxseVxuICAvLyBvdmVybGFwcyAoY292ZXJzIHRoZSBzdGFydCBvciBlbmQsIGJ1dCBub3QgYm90aCkgb2YgYSBuZXcgc3Bhbi5cbiAgLy8gU3VjaCBvdmVybGFwIGlzIG5vdCBhbGxvd2VkLlxuICBmdW5jdGlvbiBjb25mbGljdGluZ0NvbGxhcHNlZFJhbmdlKGRvYywgbGluZU5vLCBmcm9tLCB0bywgbWFya2VyKSB7XG4gICAgdmFyIGxpbmUgPSBnZXRMaW5lKGRvYywgbGluZU5vKTtcbiAgICB2YXIgc3BzID0gc2F3Q29sbGFwc2VkU3BhbnMgJiYgbGluZS5tYXJrZWRTcGFucztcbiAgICBpZiAoc3BzKSBmb3IgKHZhciBpID0gMDsgaSA8IHNwcy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHNwID0gc3BzW2ldO1xuICAgICAgaWYgKCFzcC5tYXJrZXIuY29sbGFwc2VkKSBjb250aW51ZTtcbiAgICAgIHZhciBmb3VuZCA9IHNwLm1hcmtlci5maW5kKDApO1xuICAgICAgdmFyIGZyb21DbXAgPSBjbXAoZm91bmQuZnJvbSwgZnJvbSkgfHwgZXh0cmFMZWZ0KHNwLm1hcmtlcikgLSBleHRyYUxlZnQobWFya2VyKTtcbiAgICAgIHZhciB0b0NtcCA9IGNtcChmb3VuZC50bywgdG8pIHx8IGV4dHJhUmlnaHQoc3AubWFya2VyKSAtIGV4dHJhUmlnaHQobWFya2VyKTtcbiAgICAgIGlmIChmcm9tQ21wID49IDAgJiYgdG9DbXAgPD0gMCB8fCBmcm9tQ21wIDw9IDAgJiYgdG9DbXAgPj0gMCkgY29udGludWU7XG4gICAgICBpZiAoZnJvbUNtcCA8PSAwICYmIChjbXAoZm91bmQudG8sIGZyb20pID4gMCB8fCAoc3AubWFya2VyLmluY2x1c2l2ZVJpZ2h0ICYmIG1hcmtlci5pbmNsdXNpdmVMZWZ0KSkgfHxcbiAgICAgICAgICBmcm9tQ21wID49IDAgJiYgKGNtcChmb3VuZC5mcm9tLCB0bykgPCAwIHx8IChzcC5tYXJrZXIuaW5jbHVzaXZlTGVmdCAmJiBtYXJrZXIuaW5jbHVzaXZlUmlnaHQpKSlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgLy8gQSB2aXN1YWwgbGluZSBpcyBhIGxpbmUgYXMgZHJhd24gb24gdGhlIHNjcmVlbi4gRm9sZGluZywgZm9yXG4gIC8vIGV4YW1wbGUsIGNhbiBjYXVzZSBtdWx0aXBsZSBsb2dpY2FsIGxpbmVzIHRvIGFwcGVhciBvbiB0aGUgc2FtZVxuICAvLyB2aXN1YWwgbGluZS4gVGhpcyBmaW5kcyB0aGUgc3RhcnQgb2YgdGhlIHZpc3VhbCBsaW5lIHRoYXQgdGhlXG4gIC8vIGdpdmVuIGxpbmUgaXMgcGFydCBvZiAodXN1YWxseSB0aGF0IGlzIHRoZSBsaW5lIGl0c2VsZikuXG4gIGZ1bmN0aW9uIHZpc3VhbExpbmUobGluZSkge1xuICAgIHZhciBtZXJnZWQ7XG4gICAgd2hpbGUgKG1lcmdlZCA9IGNvbGxhcHNlZFNwYW5BdFN0YXJ0KGxpbmUpKVxuICAgICAgbGluZSA9IG1lcmdlZC5maW5kKC0xLCB0cnVlKS5saW5lO1xuICAgIHJldHVybiBsaW5lO1xuICB9XG5cbiAgLy8gUmV0dXJucyBhbiBhcnJheSBvZiBsb2dpY2FsIGxpbmVzIHRoYXQgY29udGludWUgdGhlIHZpc3VhbCBsaW5lXG4gIC8vIHN0YXJ0ZWQgYnkgdGhlIGFyZ3VtZW50LCBvciB1bmRlZmluZWQgaWYgdGhlcmUgYXJlIG5vIHN1Y2ggbGluZXMuXG4gIGZ1bmN0aW9uIHZpc3VhbExpbmVDb250aW51ZWQobGluZSkge1xuICAgIHZhciBtZXJnZWQsIGxpbmVzO1xuICAgIHdoaWxlIChtZXJnZWQgPSBjb2xsYXBzZWRTcGFuQXRFbmQobGluZSkpIHtcbiAgICAgIGxpbmUgPSBtZXJnZWQuZmluZCgxLCB0cnVlKS5saW5lO1xuICAgICAgKGxpbmVzIHx8IChsaW5lcyA9IFtdKSkucHVzaChsaW5lKTtcbiAgICB9XG4gICAgcmV0dXJuIGxpbmVzO1xuICB9XG5cbiAgLy8gR2V0IHRoZSBsaW5lIG51bWJlciBvZiB0aGUgc3RhcnQgb2YgdGhlIHZpc3VhbCBsaW5lIHRoYXQgdGhlXG4gIC8vIGdpdmVuIGxpbmUgbnVtYmVyIGlzIHBhcnQgb2YuXG4gIGZ1bmN0aW9uIHZpc3VhbExpbmVObyhkb2MsIGxpbmVOKSB7XG4gICAgdmFyIGxpbmUgPSBnZXRMaW5lKGRvYywgbGluZU4pLCB2aXMgPSB2aXN1YWxMaW5lKGxpbmUpO1xuICAgIGlmIChsaW5lID09IHZpcykgcmV0dXJuIGxpbmVOO1xuICAgIHJldHVybiBsaW5lTm8odmlzKTtcbiAgfVxuICAvLyBHZXQgdGhlIGxpbmUgbnVtYmVyIG9mIHRoZSBzdGFydCBvZiB0aGUgbmV4dCB2aXN1YWwgbGluZSBhZnRlclxuICAvLyB0aGUgZ2l2ZW4gbGluZS5cbiAgZnVuY3Rpb24gdmlzdWFsTGluZUVuZE5vKGRvYywgbGluZU4pIHtcbiAgICBpZiAobGluZU4gPiBkb2MubGFzdExpbmUoKSkgcmV0dXJuIGxpbmVOO1xuICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIGxpbmVOKSwgbWVyZ2VkO1xuICAgIGlmICghbGluZUlzSGlkZGVuKGRvYywgbGluZSkpIHJldHVybiBsaW5lTjtcbiAgICB3aGlsZSAobWVyZ2VkID0gY29sbGFwc2VkU3BhbkF0RW5kKGxpbmUpKVxuICAgICAgbGluZSA9IG1lcmdlZC5maW5kKDEsIHRydWUpLmxpbmU7XG4gICAgcmV0dXJuIGxpbmVObyhsaW5lKSArIDE7XG4gIH1cblxuICAvLyBDb21wdXRlIHdoZXRoZXIgYSBsaW5lIGlzIGhpZGRlbi4gTGluZXMgY291bnQgYXMgaGlkZGVuIHdoZW4gdGhleVxuICAvLyBhcmUgcGFydCBvZiBhIHZpc3VhbCBsaW5lIHRoYXQgc3RhcnRzIHdpdGggYW5vdGhlciBsaW5lLCBvciB3aGVuXG4gIC8vIHRoZXkgYXJlIGVudGlyZWx5IGNvdmVyZWQgYnkgY29sbGFwc2VkLCBub24td2lkZ2V0IHNwYW4uXG4gIGZ1bmN0aW9uIGxpbmVJc0hpZGRlbihkb2MsIGxpbmUpIHtcbiAgICB2YXIgc3BzID0gc2F3Q29sbGFwc2VkU3BhbnMgJiYgbGluZS5tYXJrZWRTcGFucztcbiAgICBpZiAoc3BzKSBmb3IgKHZhciBzcCwgaSA9IDA7IGkgPCBzcHMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHNwID0gc3BzW2ldO1xuICAgICAgaWYgKCFzcC5tYXJrZXIuY29sbGFwc2VkKSBjb250aW51ZTtcbiAgICAgIGlmIChzcC5mcm9tID09IG51bGwpIHJldHVybiB0cnVlO1xuICAgICAgaWYgKHNwLm1hcmtlci53aWRnZXROb2RlKSBjb250aW51ZTtcbiAgICAgIGlmIChzcC5mcm9tID09IDAgJiYgc3AubWFya2VyLmluY2x1c2l2ZUxlZnQgJiYgbGluZUlzSGlkZGVuSW5uZXIoZG9jLCBsaW5lLCBzcCkpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBsaW5lSXNIaWRkZW5Jbm5lcihkb2MsIGxpbmUsIHNwYW4pIHtcbiAgICBpZiAoc3Bhbi50byA9PSBudWxsKSB7XG4gICAgICB2YXIgZW5kID0gc3Bhbi5tYXJrZXIuZmluZCgxLCB0cnVlKTtcbiAgICAgIHJldHVybiBsaW5lSXNIaWRkZW5Jbm5lcihkb2MsIGVuZC5saW5lLCBnZXRNYXJrZWRTcGFuRm9yKGVuZC5saW5lLm1hcmtlZFNwYW5zLCBzcGFuLm1hcmtlcikpO1xuICAgIH1cbiAgICBpZiAoc3Bhbi5tYXJrZXIuaW5jbHVzaXZlUmlnaHQgJiYgc3Bhbi50byA9PSBsaW5lLnRleHQubGVuZ3RoKVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgZm9yICh2YXIgc3AsIGkgPSAwOyBpIDwgbGluZS5tYXJrZWRTcGFucy5sZW5ndGg7ICsraSkge1xuICAgICAgc3AgPSBsaW5lLm1hcmtlZFNwYW5zW2ldO1xuICAgICAgaWYgKHNwLm1hcmtlci5jb2xsYXBzZWQgJiYgIXNwLm1hcmtlci53aWRnZXROb2RlICYmIHNwLmZyb20gPT0gc3Bhbi50byAmJlxuICAgICAgICAgIChzcC50byA9PSBudWxsIHx8IHNwLnRvICE9IHNwYW4uZnJvbSkgJiZcbiAgICAgICAgICAoc3AubWFya2VyLmluY2x1c2l2ZUxlZnQgfHwgc3Bhbi5tYXJrZXIuaW5jbHVzaXZlUmlnaHQpICYmXG4gICAgICAgICAgbGluZUlzSGlkZGVuSW5uZXIoZG9jLCBsaW5lLCBzcCkpIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8vIExJTkUgV0lER0VUU1xuXG4gIC8vIExpbmUgd2lkZ2V0cyBhcmUgYmxvY2sgZWxlbWVudHMgZGlzcGxheWVkIGFib3ZlIG9yIGJlbG93IGEgbGluZS5cblxuICB2YXIgTGluZVdpZGdldCA9IENvZGVNaXJyb3IuTGluZVdpZGdldCA9IGZ1bmN0aW9uKGRvYywgbm9kZSwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zKSBmb3IgKHZhciBvcHQgaW4gb3B0aW9ucykgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkob3B0KSlcbiAgICAgIHRoaXNbb3B0XSA9IG9wdGlvbnNbb3B0XTtcbiAgICB0aGlzLmRvYyA9IGRvYztcbiAgICB0aGlzLm5vZGUgPSBub2RlO1xuICB9O1xuICBldmVudE1peGluKExpbmVXaWRnZXQpO1xuXG4gIGZ1bmN0aW9uIGFkanVzdFNjcm9sbFdoZW5BYm92ZVZpc2libGUoY20sIGxpbmUsIGRpZmYpIHtcbiAgICBpZiAoaGVpZ2h0QXRMaW5lKGxpbmUpIDwgKChjbS5jdXJPcCAmJiBjbS5jdXJPcC5zY3JvbGxUb3ApIHx8IGNtLmRvYy5zY3JvbGxUb3ApKVxuICAgICAgYWRkVG9TY3JvbGxQb3MoY20sIG51bGwsIGRpZmYpO1xuICB9XG5cbiAgTGluZVdpZGdldC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY20gPSB0aGlzLmRvYy5jbSwgd3MgPSB0aGlzLmxpbmUud2lkZ2V0cywgbGluZSA9IHRoaXMubGluZSwgbm8gPSBsaW5lTm8obGluZSk7XG4gICAgaWYgKG5vID09IG51bGwgfHwgIXdzKSByZXR1cm47XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3cy5sZW5ndGg7ICsraSkgaWYgKHdzW2ldID09IHRoaXMpIHdzLnNwbGljZShpLS0sIDEpO1xuICAgIGlmICghd3MubGVuZ3RoKSBsaW5lLndpZGdldHMgPSBudWxsO1xuICAgIHZhciBoZWlnaHQgPSB3aWRnZXRIZWlnaHQodGhpcyk7XG4gICAgdXBkYXRlTGluZUhlaWdodChsaW5lLCBNYXRoLm1heCgwLCBsaW5lLmhlaWdodCAtIGhlaWdodCkpO1xuICAgIGlmIChjbSkgcnVuSW5PcChjbSwgZnVuY3Rpb24oKSB7XG4gICAgICBhZGp1c3RTY3JvbGxXaGVuQWJvdmVWaXNpYmxlKGNtLCBsaW5lLCAtaGVpZ2h0KTtcbiAgICAgIHJlZ0xpbmVDaGFuZ2UoY20sIG5vLCBcIndpZGdldFwiKTtcbiAgICB9KTtcbiAgfTtcbiAgTGluZVdpZGdldC5wcm90b3R5cGUuY2hhbmdlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvbGRIID0gdGhpcy5oZWlnaHQsIGNtID0gdGhpcy5kb2MuY20sIGxpbmUgPSB0aGlzLmxpbmU7XG4gICAgdGhpcy5oZWlnaHQgPSBudWxsO1xuICAgIHZhciBkaWZmID0gd2lkZ2V0SGVpZ2h0KHRoaXMpIC0gb2xkSDtcbiAgICBpZiAoIWRpZmYpIHJldHVybjtcbiAgICB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIGxpbmUuaGVpZ2h0ICsgZGlmZik7XG4gICAgaWYgKGNtKSBydW5Jbk9wKGNtLCBmdW5jdGlvbigpIHtcbiAgICAgIGNtLmN1ck9wLmZvcmNlVXBkYXRlID0gdHJ1ZTtcbiAgICAgIGFkanVzdFNjcm9sbFdoZW5BYm92ZVZpc2libGUoY20sIGxpbmUsIGRpZmYpO1xuICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHdpZGdldEhlaWdodCh3aWRnZXQpIHtcbiAgICBpZiAod2lkZ2V0LmhlaWdodCAhPSBudWxsKSByZXR1cm4gd2lkZ2V0LmhlaWdodDtcbiAgICB2YXIgY20gPSB3aWRnZXQuZG9jLmNtO1xuICAgIGlmICghY20pIHJldHVybiAwO1xuICAgIGlmICghY29udGFpbnMoZG9jdW1lbnQuYm9keSwgd2lkZ2V0Lm5vZGUpKSB7XG4gICAgICB2YXIgcGFyZW50U3R5bGUgPSBcInBvc2l0aW9uOiByZWxhdGl2ZTtcIjtcbiAgICAgIGlmICh3aWRnZXQuY292ZXJHdXR0ZXIpXG4gICAgICAgIHBhcmVudFN0eWxlICs9IFwibWFyZ2luLWxlZnQ6IC1cIiArIGNtLmRpc3BsYXkuZ3V0dGVycy5vZmZzZXRXaWR0aCArIFwicHg7XCI7XG4gICAgICBpZiAod2lkZ2V0Lm5vSFNjcm9sbClcbiAgICAgICAgcGFyZW50U3R5bGUgKz0gXCJ3aWR0aDogXCIgKyBjbS5kaXNwbGF5LndyYXBwZXIuY2xpZW50V2lkdGggKyBcInB4O1wiO1xuICAgICAgcmVtb3ZlQ2hpbGRyZW5BbmRBZGQoY20uZGlzcGxheS5tZWFzdXJlLCBlbHQoXCJkaXZcIiwgW3dpZGdldC5ub2RlXSwgbnVsbCwgcGFyZW50U3R5bGUpKTtcbiAgICB9XG4gICAgcmV0dXJuIHdpZGdldC5oZWlnaHQgPSB3aWRnZXQubm9kZS5vZmZzZXRIZWlnaHQ7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRMaW5lV2lkZ2V0KGRvYywgaGFuZGxlLCBub2RlLCBvcHRpb25zKSB7XG4gICAgdmFyIHdpZGdldCA9IG5ldyBMaW5lV2lkZ2V0KGRvYywgbm9kZSwgb3B0aW9ucyk7XG4gICAgdmFyIGNtID0gZG9jLmNtO1xuICAgIGlmIChjbSAmJiB3aWRnZXQubm9IU2Nyb2xsKSBjbS5kaXNwbGF5LmFsaWduV2lkZ2V0cyA9IHRydWU7XG4gICAgY2hhbmdlTGluZShkb2MsIGhhbmRsZSwgXCJ3aWRnZXRcIiwgZnVuY3Rpb24obGluZSkge1xuICAgICAgdmFyIHdpZGdldHMgPSBsaW5lLndpZGdldHMgfHwgKGxpbmUud2lkZ2V0cyA9IFtdKTtcbiAgICAgIGlmICh3aWRnZXQuaW5zZXJ0QXQgPT0gbnVsbCkgd2lkZ2V0cy5wdXNoKHdpZGdldCk7XG4gICAgICBlbHNlIHdpZGdldHMuc3BsaWNlKE1hdGgubWluKHdpZGdldHMubGVuZ3RoIC0gMSwgTWF0aC5tYXgoMCwgd2lkZ2V0Lmluc2VydEF0KSksIDAsIHdpZGdldCk7XG4gICAgICB3aWRnZXQubGluZSA9IGxpbmU7XG4gICAgICBpZiAoY20gJiYgIWxpbmVJc0hpZGRlbihkb2MsIGxpbmUpKSB7XG4gICAgICAgIHZhciBhYm92ZVZpc2libGUgPSBoZWlnaHRBdExpbmUobGluZSkgPCBkb2Muc2Nyb2xsVG9wO1xuICAgICAgICB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIGxpbmUuaGVpZ2h0ICsgd2lkZ2V0SGVpZ2h0KHdpZGdldCkpO1xuICAgICAgICBpZiAoYWJvdmVWaXNpYmxlKSBhZGRUb1Njcm9sbFBvcyhjbSwgbnVsbCwgd2lkZ2V0LmhlaWdodCk7XG4gICAgICAgIGNtLmN1ck9wLmZvcmNlVXBkYXRlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuICAgIHJldHVybiB3aWRnZXQ7XG4gIH1cblxuICAvLyBMSU5FIERBVEEgU1RSVUNUVVJFXG5cbiAgLy8gTGluZSBvYmplY3RzLiBUaGVzZSBob2xkIHN0YXRlIHJlbGF0ZWQgdG8gYSBsaW5lLCBpbmNsdWRpbmdcbiAgLy8gaGlnaGxpZ2h0aW5nIGluZm8gKHRoZSBzdHlsZXMgYXJyYXkpLlxuICB2YXIgTGluZSA9IENvZGVNaXJyb3IuTGluZSA9IGZ1bmN0aW9uKHRleHQsIG1hcmtlZFNwYW5zLCBlc3RpbWF0ZUhlaWdodCkge1xuICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgYXR0YWNoTWFya2VkU3BhbnModGhpcywgbWFya2VkU3BhbnMpO1xuICAgIHRoaXMuaGVpZ2h0ID0gZXN0aW1hdGVIZWlnaHQgPyBlc3RpbWF0ZUhlaWdodCh0aGlzKSA6IDE7XG4gIH07XG4gIGV2ZW50TWl4aW4oTGluZSk7XG4gIExpbmUucHJvdG90eXBlLmxpbmVObyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gbGluZU5vKHRoaXMpOyB9O1xuXG4gIC8vIENoYW5nZSB0aGUgY29udGVudCAodGV4dCwgbWFya2Vycykgb2YgYSBsaW5lLiBBdXRvbWF0aWNhbGx5XG4gIC8vIGludmFsaWRhdGVzIGNhY2hlZCBpbmZvcm1hdGlvbiBhbmQgdHJpZXMgdG8gcmUtZXN0aW1hdGUgdGhlXG4gIC8vIGxpbmUncyBoZWlnaHQuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmUobGluZSwgdGV4dCwgbWFya2VkU3BhbnMsIGVzdGltYXRlSGVpZ2h0KSB7XG4gICAgbGluZS50ZXh0ID0gdGV4dDtcbiAgICBpZiAobGluZS5zdGF0ZUFmdGVyKSBsaW5lLnN0YXRlQWZ0ZXIgPSBudWxsO1xuICAgIGlmIChsaW5lLnN0eWxlcykgbGluZS5zdHlsZXMgPSBudWxsO1xuICAgIGlmIChsaW5lLm9yZGVyICE9IG51bGwpIGxpbmUub3JkZXIgPSBudWxsO1xuICAgIGRldGFjaE1hcmtlZFNwYW5zKGxpbmUpO1xuICAgIGF0dGFjaE1hcmtlZFNwYW5zKGxpbmUsIG1hcmtlZFNwYW5zKTtcbiAgICB2YXIgZXN0SGVpZ2h0ID0gZXN0aW1hdGVIZWlnaHQgPyBlc3RpbWF0ZUhlaWdodChsaW5lKSA6IDE7XG4gICAgaWYgKGVzdEhlaWdodCAhPSBsaW5lLmhlaWdodCkgdXBkYXRlTGluZUhlaWdodChsaW5lLCBlc3RIZWlnaHQpO1xuICB9XG5cbiAgLy8gRGV0YWNoIGEgbGluZSBmcm9tIHRoZSBkb2N1bWVudCB0cmVlIGFuZCBpdHMgbWFya2Vycy5cbiAgZnVuY3Rpb24gY2xlYW5VcExpbmUobGluZSkge1xuICAgIGxpbmUucGFyZW50ID0gbnVsbDtcbiAgICBkZXRhY2hNYXJrZWRTcGFucyhsaW5lKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV4dHJhY3RMaW5lQ2xhc3Nlcyh0eXBlLCBvdXRwdXQpIHtcbiAgICBpZiAodHlwZSkgZm9yICg7Oykge1xuICAgICAgdmFyIGxpbmVDbGFzcyA9IHR5cGUubWF0Y2goLyg/Ol58XFxzKylsaW5lLShiYWNrZ3JvdW5kLSk/KFxcUyspLyk7XG4gICAgICBpZiAoIWxpbmVDbGFzcykgYnJlYWs7XG4gICAgICB0eXBlID0gdHlwZS5zbGljZSgwLCBsaW5lQ2xhc3MuaW5kZXgpICsgdHlwZS5zbGljZShsaW5lQ2xhc3MuaW5kZXggKyBsaW5lQ2xhc3NbMF0ubGVuZ3RoKTtcbiAgICAgIHZhciBwcm9wID0gbGluZUNsYXNzWzFdID8gXCJiZ0NsYXNzXCIgOiBcInRleHRDbGFzc1wiO1xuICAgICAgaWYgKG91dHB1dFtwcm9wXSA9PSBudWxsKVxuICAgICAgICBvdXRwdXRbcHJvcF0gPSBsaW5lQ2xhc3NbMl07XG4gICAgICBlbHNlIGlmICghKG5ldyBSZWdFeHAoXCIoPzpefFxccylcIiArIGxpbmVDbGFzc1syXSArIFwiKD86JHxcXHMpXCIpKS50ZXN0KG91dHB1dFtwcm9wXSkpXG4gICAgICAgIG91dHB1dFtwcm9wXSArPSBcIiBcIiArIGxpbmVDbGFzc1syXTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGU7XG4gIH1cblxuICBmdW5jdGlvbiBjYWxsQmxhbmtMaW5lKG1vZGUsIHN0YXRlKSB7XG4gICAgaWYgKG1vZGUuYmxhbmtMaW5lKSByZXR1cm4gbW9kZS5ibGFua0xpbmUoc3RhdGUpO1xuICAgIGlmICghbW9kZS5pbm5lck1vZGUpIHJldHVybjtcbiAgICB2YXIgaW5uZXIgPSBDb2RlTWlycm9yLmlubmVyTW9kZShtb2RlLCBzdGF0ZSk7XG4gICAgaWYgKGlubmVyLm1vZGUuYmxhbmtMaW5lKSByZXR1cm4gaW5uZXIubW9kZS5ibGFua0xpbmUoaW5uZXIuc3RhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVhZFRva2VuKG1vZGUsIHN0cmVhbSwgc3RhdGUsIGlubmVyKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICBpZiAoaW5uZXIpIGlubmVyWzBdID0gQ29kZU1pcnJvci5pbm5lck1vZGUobW9kZSwgc3RhdGUpLm1vZGU7XG4gICAgICB2YXIgc3R5bGUgPSBtb2RlLnRva2VuKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgaWYgKHN0cmVhbS5wb3MgPiBzdHJlYW0uc3RhcnQpIHJldHVybiBzdHlsZTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTW9kZSBcIiArIG1vZGUubmFtZSArIFwiIGZhaWxlZCB0byBhZHZhbmNlIHN0cmVhbS5cIik7XG4gIH1cblxuICAvLyBVdGlsaXR5IGZvciBnZXRUb2tlbkF0IGFuZCBnZXRMaW5lVG9rZW5zXG4gIGZ1bmN0aW9uIHRha2VUb2tlbihjbSwgcG9zLCBwcmVjaXNlLCBhc0FycmF5KSB7XG4gICAgZnVuY3Rpb24gZ2V0T2JqKGNvcHkpIHtcbiAgICAgIHJldHVybiB7c3RhcnQ6IHN0cmVhbS5zdGFydCwgZW5kOiBzdHJlYW0ucG9zLFxuICAgICAgICAgICAgICBzdHJpbmc6IHN0cmVhbS5jdXJyZW50KCksXG4gICAgICAgICAgICAgIHR5cGU6IHN0eWxlIHx8IG51bGwsXG4gICAgICAgICAgICAgIHN0YXRlOiBjb3B5ID8gY29weVN0YXRlKGRvYy5tb2RlLCBzdGF0ZSkgOiBzdGF0ZX07XG4gICAgfVxuXG4gICAgdmFyIGRvYyA9IGNtLmRvYywgbW9kZSA9IGRvYy5tb2RlLCBzdHlsZTtcbiAgICBwb3MgPSBjbGlwUG9zKGRvYywgcG9zKTtcbiAgICB2YXIgbGluZSA9IGdldExpbmUoZG9jLCBwb3MubGluZSksIHN0YXRlID0gZ2V0U3RhdGVCZWZvcmUoY20sIHBvcy5saW5lLCBwcmVjaXNlKTtcbiAgICB2YXIgc3RyZWFtID0gbmV3IFN0cmluZ1N0cmVhbShsaW5lLnRleHQsIGNtLm9wdGlvbnMudGFiU2l6ZSksIHRva2VucztcbiAgICBpZiAoYXNBcnJheSkgdG9rZW5zID0gW107XG4gICAgd2hpbGUgKChhc0FycmF5IHx8IHN0cmVhbS5wb3MgPCBwb3MuY2gpICYmICFzdHJlYW0uZW9sKCkpIHtcbiAgICAgIHN0cmVhbS5zdGFydCA9IHN0cmVhbS5wb3M7XG4gICAgICBzdHlsZSA9IHJlYWRUb2tlbihtb2RlLCBzdHJlYW0sIHN0YXRlKTtcbiAgICAgIGlmIChhc0FycmF5KSB0b2tlbnMucHVzaChnZXRPYmoodHJ1ZSkpO1xuICAgIH1cbiAgICByZXR1cm4gYXNBcnJheSA/IHRva2VucyA6IGdldE9iaigpO1xuICB9XG5cbiAgLy8gUnVuIHRoZSBnaXZlbiBtb2RlJ3MgcGFyc2VyIG92ZXIgYSBsaW5lLCBjYWxsaW5nIGYgZm9yIGVhY2ggdG9rZW4uXG4gIGZ1bmN0aW9uIHJ1bk1vZGUoY20sIHRleHQsIG1vZGUsIHN0YXRlLCBmLCBsaW5lQ2xhc3NlcywgZm9yY2VUb0VuZCkge1xuICAgIHZhciBmbGF0dGVuU3BhbnMgPSBtb2RlLmZsYXR0ZW5TcGFucztcbiAgICBpZiAoZmxhdHRlblNwYW5zID09IG51bGwpIGZsYXR0ZW5TcGFucyA9IGNtLm9wdGlvbnMuZmxhdHRlblNwYW5zO1xuICAgIHZhciBjdXJTdGFydCA9IDAsIGN1clN0eWxlID0gbnVsbDtcbiAgICB2YXIgc3RyZWFtID0gbmV3IFN0cmluZ1N0cmVhbSh0ZXh0LCBjbS5vcHRpb25zLnRhYlNpemUpLCBzdHlsZTtcbiAgICB2YXIgaW5uZXIgPSBjbS5vcHRpb25zLmFkZE1vZGVDbGFzcyAmJiBbbnVsbF07XG4gICAgaWYgKHRleHQgPT0gXCJcIikgZXh0cmFjdExpbmVDbGFzc2VzKGNhbGxCbGFua0xpbmUobW9kZSwgc3RhdGUpLCBsaW5lQ2xhc3Nlcyk7XG4gICAgd2hpbGUgKCFzdHJlYW0uZW9sKCkpIHtcbiAgICAgIGlmIChzdHJlYW0ucG9zID4gY20ub3B0aW9ucy5tYXhIaWdobGlnaHRMZW5ndGgpIHtcbiAgICAgICAgZmxhdHRlblNwYW5zID0gZmFsc2U7XG4gICAgICAgIGlmIChmb3JjZVRvRW5kKSBwcm9jZXNzTGluZShjbSwgdGV4dCwgc3RhdGUsIHN0cmVhbS5wb3MpO1xuICAgICAgICBzdHJlYW0ucG9zID0gdGV4dC5sZW5ndGg7XG4gICAgICAgIHN0eWxlID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0eWxlID0gZXh0cmFjdExpbmVDbGFzc2VzKHJlYWRUb2tlbihtb2RlLCBzdHJlYW0sIHN0YXRlLCBpbm5lciksIGxpbmVDbGFzc2VzKTtcbiAgICAgIH1cbiAgICAgIGlmIChpbm5lcikge1xuICAgICAgICB2YXIgbU5hbWUgPSBpbm5lclswXS5uYW1lO1xuICAgICAgICBpZiAobU5hbWUpIHN0eWxlID0gXCJtLVwiICsgKHN0eWxlID8gbU5hbWUgKyBcIiBcIiArIHN0eWxlIDogbU5hbWUpO1xuICAgICAgfVxuICAgICAgaWYgKCFmbGF0dGVuU3BhbnMgfHwgY3VyU3R5bGUgIT0gc3R5bGUpIHtcbiAgICAgICAgd2hpbGUgKGN1clN0YXJ0IDwgc3RyZWFtLnN0YXJ0KSB7XG4gICAgICAgICAgY3VyU3RhcnQgPSBNYXRoLm1pbihzdHJlYW0uc3RhcnQsIGN1clN0YXJ0ICsgNTAwMDApO1xuICAgICAgICAgIGYoY3VyU3RhcnQsIGN1clN0eWxlKTtcbiAgICAgICAgfVxuICAgICAgICBjdXJTdHlsZSA9IHN0eWxlO1xuICAgICAgfVxuICAgICAgc3RyZWFtLnN0YXJ0ID0gc3RyZWFtLnBvcztcbiAgICB9XG4gICAgd2hpbGUgKGN1clN0YXJ0IDwgc3RyZWFtLnBvcykge1xuICAgICAgLy8gV2Via2l0IHNlZW1zIHRvIHJlZnVzZSB0byByZW5kZXIgdGV4dCBub2RlcyBsb25nZXIgdGhhbiA1NzQ0NCBjaGFyYWN0ZXJzXG4gICAgICB2YXIgcG9zID0gTWF0aC5taW4oc3RyZWFtLnBvcywgY3VyU3RhcnQgKyA1MDAwMCk7XG4gICAgICBmKHBvcywgY3VyU3R5bGUpO1xuICAgICAgY3VyU3RhcnQgPSBwb3M7XG4gICAgfVxuICB9XG5cbiAgLy8gQ29tcHV0ZSBhIHN0eWxlIGFycmF5IChhbiBhcnJheSBzdGFydGluZyB3aXRoIGEgbW9kZSBnZW5lcmF0aW9uXG4gIC8vIC0tIGZvciBpbnZhbGlkYXRpb24gLS0gZm9sbG93ZWQgYnkgcGFpcnMgb2YgZW5kIHBvc2l0aW9ucyBhbmRcbiAgLy8gc3R5bGUgc3RyaW5ncyksIHdoaWNoIGlzIHVzZWQgdG8gaGlnaGxpZ2h0IHRoZSB0b2tlbnMgb24gdGhlXG4gIC8vIGxpbmUuXG4gIGZ1bmN0aW9uIGhpZ2hsaWdodExpbmUoY20sIGxpbmUsIHN0YXRlLCBmb3JjZVRvRW5kKSB7XG4gICAgLy8gQSBzdHlsZXMgYXJyYXkgYWx3YXlzIHN0YXJ0cyB3aXRoIGEgbnVtYmVyIGlkZW50aWZ5aW5nIHRoZVxuICAgIC8vIG1vZGUvb3ZlcmxheXMgdGhhdCBpdCBpcyBiYXNlZCBvbiAoZm9yIGVhc3kgaW52YWxpZGF0aW9uKS5cbiAgICB2YXIgc3QgPSBbY20uc3RhdGUubW9kZUdlbl0sIGxpbmVDbGFzc2VzID0ge307XG4gICAgLy8gQ29tcHV0ZSB0aGUgYmFzZSBhcnJheSBvZiBzdHlsZXNcbiAgICBydW5Nb2RlKGNtLCBsaW5lLnRleHQsIGNtLmRvYy5tb2RlLCBzdGF0ZSwgZnVuY3Rpb24oZW5kLCBzdHlsZSkge1xuICAgICAgc3QucHVzaChlbmQsIHN0eWxlKTtcbiAgICB9LCBsaW5lQ2xhc3NlcywgZm9yY2VUb0VuZCk7XG5cbiAgICAvLyBSdW4gb3ZlcmxheXMsIGFkanVzdCBzdHlsZSBhcnJheS5cbiAgICBmb3IgKHZhciBvID0gMDsgbyA8IGNtLnN0YXRlLm92ZXJsYXlzLmxlbmd0aDsgKytvKSB7XG4gICAgICB2YXIgb3ZlcmxheSA9IGNtLnN0YXRlLm92ZXJsYXlzW29dLCBpID0gMSwgYXQgPSAwO1xuICAgICAgcnVuTW9kZShjbSwgbGluZS50ZXh0LCBvdmVybGF5Lm1vZGUsIHRydWUsIGZ1bmN0aW9uKGVuZCwgc3R5bGUpIHtcbiAgICAgICAgdmFyIHN0YXJ0ID0gaTtcbiAgICAgICAgLy8gRW5zdXJlIHRoZXJlJ3MgYSB0b2tlbiBlbmQgYXQgdGhlIGN1cnJlbnQgcG9zaXRpb24sIGFuZCB0aGF0IGkgcG9pbnRzIGF0IGl0XG4gICAgICAgIHdoaWxlIChhdCA8IGVuZCkge1xuICAgICAgICAgIHZhciBpX2VuZCA9IHN0W2ldO1xuICAgICAgICAgIGlmIChpX2VuZCA+IGVuZClcbiAgICAgICAgICAgIHN0LnNwbGljZShpLCAxLCBlbmQsIHN0W2krMV0sIGlfZW5kKTtcbiAgICAgICAgICBpICs9IDI7XG4gICAgICAgICAgYXQgPSBNYXRoLm1pbihlbmQsIGlfZW5kKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXN0eWxlKSByZXR1cm47XG4gICAgICAgIGlmIChvdmVybGF5Lm9wYXF1ZSkge1xuICAgICAgICAgIHN0LnNwbGljZShzdGFydCwgaSAtIHN0YXJ0LCBlbmQsIFwiY20tb3ZlcmxheSBcIiArIHN0eWxlKTtcbiAgICAgICAgICBpID0gc3RhcnQgKyAyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvciAoOyBzdGFydCA8IGk7IHN0YXJ0ICs9IDIpIHtcbiAgICAgICAgICAgIHZhciBjdXIgPSBzdFtzdGFydCsxXTtcbiAgICAgICAgICAgIHN0W3N0YXJ0KzFdID0gKGN1ciA/IGN1ciArIFwiIFwiIDogXCJcIikgKyBcImNtLW92ZXJsYXkgXCIgKyBzdHlsZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIGxpbmVDbGFzc2VzKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge3N0eWxlczogc3QsIGNsYXNzZXM6IGxpbmVDbGFzc2VzLmJnQ2xhc3MgfHwgbGluZUNsYXNzZXMudGV4dENsYXNzID8gbGluZUNsYXNzZXMgOiBudWxsfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldExpbmVTdHlsZXMoY20sIGxpbmUsIHVwZGF0ZUZyb250aWVyKSB7XG4gICAgaWYgKCFsaW5lLnN0eWxlcyB8fCBsaW5lLnN0eWxlc1swXSAhPSBjbS5zdGF0ZS5tb2RlR2VuKSB7XG4gICAgICB2YXIgc3RhdGUgPSBnZXRTdGF0ZUJlZm9yZShjbSwgbGluZU5vKGxpbmUpKTtcbiAgICAgIHZhciByZXN1bHQgPSBoaWdobGlnaHRMaW5lKGNtLCBsaW5lLCBsaW5lLnRleHQubGVuZ3RoID4gY20ub3B0aW9ucy5tYXhIaWdobGlnaHRMZW5ndGggPyBjb3B5U3RhdGUoY20uZG9jLm1vZGUsIHN0YXRlKSA6IHN0YXRlKTtcbiAgICAgIGxpbmUuc3RhdGVBZnRlciA9IHN0YXRlO1xuICAgICAgbGluZS5zdHlsZXMgPSByZXN1bHQuc3R5bGVzO1xuICAgICAgaWYgKHJlc3VsdC5jbGFzc2VzKSBsaW5lLnN0eWxlQ2xhc3NlcyA9IHJlc3VsdC5jbGFzc2VzO1xuICAgICAgZWxzZSBpZiAobGluZS5zdHlsZUNsYXNzZXMpIGxpbmUuc3R5bGVDbGFzc2VzID0gbnVsbDtcbiAgICAgIGlmICh1cGRhdGVGcm9udGllciA9PT0gY20uZG9jLmZyb250aWVyKSBjbS5kb2MuZnJvbnRpZXIrKztcbiAgICB9XG4gICAgcmV0dXJuIGxpbmUuc3R5bGVzO1xuICB9XG5cbiAgLy8gTGlnaHR3ZWlnaHQgZm9ybSBvZiBoaWdobGlnaHQgLS0gcHJvY2VlZCBvdmVyIHRoaXMgbGluZSBhbmRcbiAgLy8gdXBkYXRlIHN0YXRlLCBidXQgZG9uJ3Qgc2F2ZSBhIHN0eWxlIGFycmF5LiBVc2VkIGZvciBsaW5lcyB0aGF0XG4gIC8vIGFyZW4ndCBjdXJyZW50bHkgdmlzaWJsZS5cbiAgZnVuY3Rpb24gcHJvY2Vzc0xpbmUoY20sIHRleHQsIHN0YXRlLCBzdGFydEF0KSB7XG4gICAgdmFyIG1vZGUgPSBjbS5kb2MubW9kZTtcbiAgICB2YXIgc3RyZWFtID0gbmV3IFN0cmluZ1N0cmVhbSh0ZXh0LCBjbS5vcHRpb25zLnRhYlNpemUpO1xuICAgIHN0cmVhbS5zdGFydCA9IHN0cmVhbS5wb3MgPSBzdGFydEF0IHx8IDA7XG4gICAgaWYgKHRleHQgPT0gXCJcIikgY2FsbEJsYW5rTGluZShtb2RlLCBzdGF0ZSk7XG4gICAgd2hpbGUgKCFzdHJlYW0uZW9sKCkpIHtcbiAgICAgIHJlYWRUb2tlbihtb2RlLCBzdHJlYW0sIHN0YXRlKTtcbiAgICAgIHN0cmVhbS5zdGFydCA9IHN0cmVhbS5wb3M7XG4gICAgfVxuICB9XG5cbiAgLy8gQ29udmVydCBhIHN0eWxlIGFzIHJldHVybmVkIGJ5IGEgbW9kZSAoZWl0aGVyIG51bGwsIG9yIGEgc3RyaW5nXG4gIC8vIGNvbnRhaW5pbmcgb25lIG9yIG1vcmUgc3R5bGVzKSB0byBhIENTUyBzdHlsZS4gVGhpcyBpcyBjYWNoZWQsXG4gIC8vIGFuZCBhbHNvIGxvb2tzIGZvciBsaW5lLXdpZGUgc3R5bGVzLlxuICB2YXIgc3R5bGVUb0NsYXNzQ2FjaGUgPSB7fSwgc3R5bGVUb0NsYXNzQ2FjaGVXaXRoTW9kZSA9IHt9O1xuICBmdW5jdGlvbiBpbnRlcnByZXRUb2tlblN0eWxlKHN0eWxlLCBvcHRpb25zKSB7XG4gICAgaWYgKCFzdHlsZSB8fCAvXlxccyokLy50ZXN0KHN0eWxlKSkgcmV0dXJuIG51bGw7XG4gICAgdmFyIGNhY2hlID0gb3B0aW9ucy5hZGRNb2RlQ2xhc3MgPyBzdHlsZVRvQ2xhc3NDYWNoZVdpdGhNb2RlIDogc3R5bGVUb0NsYXNzQ2FjaGU7XG4gICAgcmV0dXJuIGNhY2hlW3N0eWxlXSB8fFxuICAgICAgKGNhY2hlW3N0eWxlXSA9IHN0eWxlLnJlcGxhY2UoL1xcUysvZywgXCJjbS0kJlwiKSk7XG4gIH1cblxuICAvLyBSZW5kZXIgdGhlIERPTSByZXByZXNlbnRhdGlvbiBvZiB0aGUgdGV4dCBvZiBhIGxpbmUuIEFsc28gYnVpbGRzXG4gIC8vIHVwIGEgJ2xpbmUgbWFwJywgd2hpY2ggcG9pbnRzIGF0IHRoZSBET00gbm9kZXMgdGhhdCByZXByZXNlbnRcbiAgLy8gc3BlY2lmaWMgc3RyZXRjaGVzIG9mIHRleHQsIGFuZCBpcyB1c2VkIGJ5IHRoZSBtZWFzdXJpbmcgY29kZS5cbiAgLy8gVGhlIHJldHVybmVkIG9iamVjdCBjb250YWlucyB0aGUgRE9NIG5vZGUsIHRoaXMgbWFwLCBhbmRcbiAgLy8gaW5mb3JtYXRpb24gYWJvdXQgbGluZS13aWRlIHN0eWxlcyB0aGF0IHdlcmUgc2V0IGJ5IHRoZSBtb2RlLlxuICBmdW5jdGlvbiBidWlsZExpbmVDb250ZW50KGNtLCBsaW5lVmlldykge1xuICAgIC8vIFRoZSBwYWRkaW5nLXJpZ2h0IGZvcmNlcyB0aGUgZWxlbWVudCB0byBoYXZlIGEgJ2JvcmRlcicsIHdoaWNoXG4gICAgLy8gaXMgbmVlZGVkIG9uIFdlYmtpdCB0byBiZSBhYmxlIHRvIGdldCBsaW5lLWxldmVsIGJvdW5kaW5nXG4gICAgLy8gcmVjdGFuZ2xlcyBmb3IgaXQgKGluIG1lYXN1cmVDaGFyKS5cbiAgICB2YXIgY29udGVudCA9IGVsdChcInNwYW5cIiwgbnVsbCwgbnVsbCwgd2Via2l0ID8gXCJwYWRkaW5nLXJpZ2h0OiAuMXB4XCIgOiBudWxsKTtcbiAgICB2YXIgYnVpbGRlciA9IHtwcmU6IGVsdChcInByZVwiLCBbY29udGVudF0sIFwiQ29kZU1pcnJvci1saW5lXCIpLCBjb250ZW50OiBjb250ZW50LFxuICAgICAgICAgICAgICAgICAgIGNvbDogMCwgcG9zOiAwLCBjbTogY20sXG4gICAgICAgICAgICAgICAgICAgc3BsaXRTcGFjZXM6IChpZSB8fCB3ZWJraXQpICYmIGNtLmdldE9wdGlvbihcImxpbmVXcmFwcGluZ1wiKX07XG4gICAgbGluZVZpZXcubWVhc3VyZSA9IHt9O1xuXG4gICAgLy8gSXRlcmF0ZSBvdmVyIHRoZSBsb2dpY2FsIGxpbmVzIHRoYXQgbWFrZSB1cCB0aGlzIHZpc3VhbCBsaW5lLlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IChsaW5lVmlldy5yZXN0ID8gbGluZVZpZXcucmVzdC5sZW5ndGggOiAwKTsgaSsrKSB7XG4gICAgICB2YXIgbGluZSA9IGkgPyBsaW5lVmlldy5yZXN0W2kgLSAxXSA6IGxpbmVWaWV3LmxpbmUsIG9yZGVyO1xuICAgICAgYnVpbGRlci5wb3MgPSAwO1xuICAgICAgYnVpbGRlci5hZGRUb2tlbiA9IGJ1aWxkVG9rZW47XG4gICAgICAvLyBPcHRpb25hbGx5IHdpcmUgaW4gc29tZSBoYWNrcyBpbnRvIHRoZSB0b2tlbi1yZW5kZXJpbmdcbiAgICAgIC8vIGFsZ29yaXRobSwgdG8gZGVhbCB3aXRoIGJyb3dzZXIgcXVpcmtzLlxuICAgICAgaWYgKGhhc0JhZEJpZGlSZWN0cyhjbS5kaXNwbGF5Lm1lYXN1cmUpICYmIChvcmRlciA9IGdldE9yZGVyKGxpbmUpKSlcbiAgICAgICAgYnVpbGRlci5hZGRUb2tlbiA9IGJ1aWxkVG9rZW5CYWRCaWRpKGJ1aWxkZXIuYWRkVG9rZW4sIG9yZGVyKTtcbiAgICAgIGJ1aWxkZXIubWFwID0gW107XG4gICAgICB2YXIgYWxsb3dGcm9udGllclVwZGF0ZSA9IGxpbmVWaWV3ICE9IGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZCAmJiBsaW5lTm8obGluZSk7XG4gICAgICBpbnNlcnRMaW5lQ29udGVudChsaW5lLCBidWlsZGVyLCBnZXRMaW5lU3R5bGVzKGNtLCBsaW5lLCBhbGxvd0Zyb250aWVyVXBkYXRlKSk7XG4gICAgICBpZiAobGluZS5zdHlsZUNsYXNzZXMpIHtcbiAgICAgICAgaWYgKGxpbmUuc3R5bGVDbGFzc2VzLmJnQ2xhc3MpXG4gICAgICAgICAgYnVpbGRlci5iZ0NsYXNzID0gam9pbkNsYXNzZXMobGluZS5zdHlsZUNsYXNzZXMuYmdDbGFzcywgYnVpbGRlci5iZ0NsYXNzIHx8IFwiXCIpO1xuICAgICAgICBpZiAobGluZS5zdHlsZUNsYXNzZXMudGV4dENsYXNzKVxuICAgICAgICAgIGJ1aWxkZXIudGV4dENsYXNzID0gam9pbkNsYXNzZXMobGluZS5zdHlsZUNsYXNzZXMudGV4dENsYXNzLCBidWlsZGVyLnRleHRDbGFzcyB8fCBcIlwiKTtcbiAgICAgIH1cblxuICAgICAgLy8gRW5zdXJlIGF0IGxlYXN0IGEgc2luZ2xlIG5vZGUgaXMgcHJlc2VudCwgZm9yIG1lYXN1cmluZy5cbiAgICAgIGlmIChidWlsZGVyLm1hcC5sZW5ndGggPT0gMClcbiAgICAgICAgYnVpbGRlci5tYXAucHVzaCgwLCAwLCBidWlsZGVyLmNvbnRlbnQuYXBwZW5kQ2hpbGQoemVyb1dpZHRoRWxlbWVudChjbS5kaXNwbGF5Lm1lYXN1cmUpKSk7XG5cbiAgICAgIC8vIFN0b3JlIHRoZSBtYXAgYW5kIGEgY2FjaGUgb2JqZWN0IGZvciB0aGUgY3VycmVudCBsb2dpY2FsIGxpbmVcbiAgICAgIGlmIChpID09IDApIHtcbiAgICAgICAgbGluZVZpZXcubWVhc3VyZS5tYXAgPSBidWlsZGVyLm1hcDtcbiAgICAgICAgbGluZVZpZXcubWVhc3VyZS5jYWNoZSA9IHt9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgKGxpbmVWaWV3Lm1lYXN1cmUubWFwcyB8fCAobGluZVZpZXcubWVhc3VyZS5tYXBzID0gW10pKS5wdXNoKGJ1aWxkZXIubWFwKTtcbiAgICAgICAgKGxpbmVWaWV3Lm1lYXN1cmUuY2FjaGVzIHx8IChsaW5lVmlldy5tZWFzdXJlLmNhY2hlcyA9IFtdKSkucHVzaCh7fSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2VlIGlzc3VlICMyOTAxXG4gICAgaWYgKHdlYmtpdCAmJiAvXFxiY20tdGFiXFxiLy50ZXN0KGJ1aWxkZXIuY29udGVudC5sYXN0Q2hpbGQuY2xhc3NOYW1lKSlcbiAgICAgIGJ1aWxkZXIuY29udGVudC5jbGFzc05hbWUgPSBcImNtLXRhYi13cmFwLWhhY2tcIjtcblxuICAgIHNpZ25hbChjbSwgXCJyZW5kZXJMaW5lXCIsIGNtLCBsaW5lVmlldy5saW5lLCBidWlsZGVyLnByZSk7XG4gICAgaWYgKGJ1aWxkZXIucHJlLmNsYXNzTmFtZSlcbiAgICAgIGJ1aWxkZXIudGV4dENsYXNzID0gam9pbkNsYXNzZXMoYnVpbGRlci5wcmUuY2xhc3NOYW1lLCBidWlsZGVyLnRleHRDbGFzcyB8fCBcIlwiKTtcblxuICAgIHJldHVybiBidWlsZGVyO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVmYXVsdFNwZWNpYWxDaGFyUGxhY2Vob2xkZXIoY2gpIHtcbiAgICB2YXIgdG9rZW4gPSBlbHQoXCJzcGFuXCIsIFwiXFx1MjAyMlwiLCBcImNtLWludmFsaWRjaGFyXCIpO1xuICAgIHRva2VuLnRpdGxlID0gXCJcXFxcdVwiICsgY2guY2hhckNvZGVBdCgwKS50b1N0cmluZygxNik7XG4gICAgdG9rZW4uc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCB0b2tlbi50aXRsZSk7XG4gICAgcmV0dXJuIHRva2VuO1xuICB9XG5cbiAgLy8gQnVpbGQgdXAgdGhlIERPTSByZXByZXNlbnRhdGlvbiBmb3IgYSBzaW5nbGUgdG9rZW4sIGFuZCBhZGQgaXQgdG9cbiAgLy8gdGhlIGxpbmUgbWFwLiBUYWtlcyBjYXJlIHRvIHJlbmRlciBzcGVjaWFsIGNoYXJhY3RlcnMgc2VwYXJhdGVseS5cbiAgZnVuY3Rpb24gYnVpbGRUb2tlbihidWlsZGVyLCB0ZXh0LCBzdHlsZSwgc3RhcnRTdHlsZSwgZW5kU3R5bGUsIHRpdGxlLCBjc3MpIHtcbiAgICBpZiAoIXRleHQpIHJldHVybjtcbiAgICB2YXIgZGlzcGxheVRleHQgPSBidWlsZGVyLnNwbGl0U3BhY2VzID8gdGV4dC5yZXBsYWNlKC8gezMsfS9nLCBzcGxpdFNwYWNlcykgOiB0ZXh0O1xuICAgIHZhciBzcGVjaWFsID0gYnVpbGRlci5jbS5zdGF0ZS5zcGVjaWFsQ2hhcnMsIG11c3RXcmFwID0gZmFsc2U7XG4gICAgaWYgKCFzcGVjaWFsLnRlc3QodGV4dCkpIHtcbiAgICAgIGJ1aWxkZXIuY29sICs9IHRleHQubGVuZ3RoO1xuICAgICAgdmFyIGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShkaXNwbGF5VGV4dCk7XG4gICAgICBidWlsZGVyLm1hcC5wdXNoKGJ1aWxkZXIucG9zLCBidWlsZGVyLnBvcyArIHRleHQubGVuZ3RoLCBjb250ZW50KTtcbiAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOSkgbXVzdFdyYXAgPSB0cnVlO1xuICAgICAgYnVpbGRlci5wb3MgKz0gdGV4dC5sZW5ndGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLCBwb3MgPSAwO1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgc3BlY2lhbC5sYXN0SW5kZXggPSBwb3M7XG4gICAgICAgIHZhciBtID0gc3BlY2lhbC5leGVjKHRleHQpO1xuICAgICAgICB2YXIgc2tpcHBlZCA9IG0gPyBtLmluZGV4IC0gcG9zIDogdGV4dC5sZW5ndGggLSBwb3M7XG4gICAgICAgIGlmIChza2lwcGVkKSB7XG4gICAgICAgICAgdmFyIHR4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGRpc3BsYXlUZXh0LnNsaWNlKHBvcywgcG9zICsgc2tpcHBlZCkpO1xuICAgICAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOSkgY29udGVudC5hcHBlbmRDaGlsZChlbHQoXCJzcGFuXCIsIFt0eHRdKSk7XG4gICAgICAgICAgZWxzZSBjb250ZW50LmFwcGVuZENoaWxkKHR4dCk7XG4gICAgICAgICAgYnVpbGRlci5tYXAucHVzaChidWlsZGVyLnBvcywgYnVpbGRlci5wb3MgKyBza2lwcGVkLCB0eHQpO1xuICAgICAgICAgIGJ1aWxkZXIuY29sICs9IHNraXBwZWQ7XG4gICAgICAgICAgYnVpbGRlci5wb3MgKz0gc2tpcHBlZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW0pIGJyZWFrO1xuICAgICAgICBwb3MgKz0gc2tpcHBlZCArIDE7XG4gICAgICAgIGlmIChtWzBdID09IFwiXFx0XCIpIHtcbiAgICAgICAgICB2YXIgdGFiU2l6ZSA9IGJ1aWxkZXIuY20ub3B0aW9ucy50YWJTaXplLCB0YWJXaWR0aCA9IHRhYlNpemUgLSBidWlsZGVyLmNvbCAlIHRhYlNpemU7XG4gICAgICAgICAgdmFyIHR4dCA9IGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWx0KFwic3BhblwiLCBzcGFjZVN0cih0YWJXaWR0aCksIFwiY20tdGFiXCIpKTtcbiAgICAgICAgICB0eHQuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcInByZXNlbnRhdGlvblwiKTtcbiAgICAgICAgICB0eHQuc2V0QXR0cmlidXRlKFwiY20tdGV4dFwiLCBcIlxcdFwiKTtcbiAgICAgICAgICBidWlsZGVyLmNvbCArPSB0YWJXaWR0aDtcbiAgICAgICAgfSBlbHNlIGlmIChtWzBdID09IFwiXFxyXCIgfHwgbVswXSA9PSBcIlxcblwiKSB7XG4gICAgICAgICAgdmFyIHR4dCA9IGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWx0KFwic3BhblwiLCBtWzBdID09IFwiXFxyXCIgPyBcIlxcdTI0MGRcIiA6IFwiXFx1MjQyNFwiLCBcImNtLWludmFsaWRjaGFyXCIpKTtcbiAgICAgICAgICB0eHQuc2V0QXR0cmlidXRlKFwiY20tdGV4dFwiLCBtWzBdKTtcbiAgICAgICAgICBidWlsZGVyLmNvbCArPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciB0eHQgPSBidWlsZGVyLmNtLm9wdGlvbnMuc3BlY2lhbENoYXJQbGFjZWhvbGRlcihtWzBdKTtcbiAgICAgICAgICB0eHQuc2V0QXR0cmlidXRlKFwiY20tdGV4dFwiLCBtWzBdKTtcbiAgICAgICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDkpIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWx0KFwic3BhblwiLCBbdHh0XSkpO1xuICAgICAgICAgIGVsc2UgY29udGVudC5hcHBlbmRDaGlsZCh0eHQpO1xuICAgICAgICAgIGJ1aWxkZXIuY29sICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgYnVpbGRlci5tYXAucHVzaChidWlsZGVyLnBvcywgYnVpbGRlci5wb3MgKyAxLCB0eHQpO1xuICAgICAgICBidWlsZGVyLnBvcysrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoc3R5bGUgfHwgc3RhcnRTdHlsZSB8fCBlbmRTdHlsZSB8fCBtdXN0V3JhcCB8fCBjc3MpIHtcbiAgICAgIHZhciBmdWxsU3R5bGUgPSBzdHlsZSB8fCBcIlwiO1xuICAgICAgaWYgKHN0YXJ0U3R5bGUpIGZ1bGxTdHlsZSArPSBzdGFydFN0eWxlO1xuICAgICAgaWYgKGVuZFN0eWxlKSBmdWxsU3R5bGUgKz0gZW5kU3R5bGU7XG4gICAgICB2YXIgdG9rZW4gPSBlbHQoXCJzcGFuXCIsIFtjb250ZW50XSwgZnVsbFN0eWxlLCBjc3MpO1xuICAgICAgaWYgKHRpdGxlKSB0b2tlbi50aXRsZSA9IHRpdGxlO1xuICAgICAgcmV0dXJuIGJ1aWxkZXIuY29udGVudC5hcHBlbmRDaGlsZCh0b2tlbik7XG4gICAgfVxuICAgIGJ1aWxkZXIuY29udGVudC5hcHBlbmRDaGlsZChjb250ZW50KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNwbGl0U3BhY2VzKG9sZCkge1xuICAgIHZhciBvdXQgPSBcIiBcIjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9sZC5sZW5ndGggLSAyOyArK2kpIG91dCArPSBpICUgMiA/IFwiIFwiIDogXCJcXHUwMGEwXCI7XG4gICAgb3V0ICs9IFwiIFwiO1xuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICAvLyBXb3JrIGFyb3VuZCBub25zZW5zZSBkaW1lbnNpb25zIGJlaW5nIHJlcG9ydGVkIGZvciBzdHJldGNoZXMgb2ZcbiAgLy8gcmlnaHQtdG8tbGVmdCB0ZXh0LlxuICBmdW5jdGlvbiBidWlsZFRva2VuQmFkQmlkaShpbm5lciwgb3JkZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYnVpbGRlciwgdGV4dCwgc3R5bGUsIHN0YXJ0U3R5bGUsIGVuZFN0eWxlLCB0aXRsZSwgY3NzKSB7XG4gICAgICBzdHlsZSA9IHN0eWxlID8gc3R5bGUgKyBcIiBjbS1mb3JjZS1ib3JkZXJcIiA6IFwiY20tZm9yY2UtYm9yZGVyXCI7XG4gICAgICB2YXIgc3RhcnQgPSBidWlsZGVyLnBvcywgZW5kID0gc3RhcnQgKyB0ZXh0Lmxlbmd0aDtcbiAgICAgIGZvciAoOzspIHtcbiAgICAgICAgLy8gRmluZCB0aGUgcGFydCB0aGF0IG92ZXJsYXBzIHdpdGggdGhlIHN0YXJ0IG9mIHRoaXMgdGV4dFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9yZGVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIHBhcnQgPSBvcmRlcltpXTtcbiAgICAgICAgICBpZiAocGFydC50byA+IHN0YXJ0ICYmIHBhcnQuZnJvbSA8PSBzdGFydCkgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnQudG8gPj0gZW5kKSByZXR1cm4gaW5uZXIoYnVpbGRlciwgdGV4dCwgc3R5bGUsIHN0YXJ0U3R5bGUsIGVuZFN0eWxlLCB0aXRsZSwgY3NzKTtcbiAgICAgICAgaW5uZXIoYnVpbGRlciwgdGV4dC5zbGljZSgwLCBwYXJ0LnRvIC0gc3RhcnQpLCBzdHlsZSwgc3RhcnRTdHlsZSwgbnVsbCwgdGl0bGUsIGNzcyk7XG4gICAgICAgIHN0YXJ0U3R5bGUgPSBudWxsO1xuICAgICAgICB0ZXh0ID0gdGV4dC5zbGljZShwYXJ0LnRvIC0gc3RhcnQpO1xuICAgICAgICBzdGFydCA9IHBhcnQudG87XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGJ1aWxkQ29sbGFwc2VkU3BhbihidWlsZGVyLCBzaXplLCBtYXJrZXIsIGlnbm9yZVdpZGdldCkge1xuICAgIHZhciB3aWRnZXQgPSAhaWdub3JlV2lkZ2V0ICYmIG1hcmtlci53aWRnZXROb2RlO1xuICAgIGlmICh3aWRnZXQpIGJ1aWxkZXIubWFwLnB1c2goYnVpbGRlci5wb3MsIGJ1aWxkZXIucG9zICsgc2l6ZSwgd2lkZ2V0KTtcbiAgICBpZiAoIWlnbm9yZVdpZGdldCAmJiBidWlsZGVyLmNtLmRpc3BsYXkuaW5wdXQubmVlZHNDb250ZW50QXR0cmlidXRlKSB7XG4gICAgICBpZiAoIXdpZGdldClcbiAgICAgICAgd2lkZ2V0ID0gYnVpbGRlci5jb250ZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpKTtcbiAgICAgIHdpZGdldC5zZXRBdHRyaWJ1dGUoXCJjbS1tYXJrZXJcIiwgbWFya2VyLmlkKTtcbiAgICB9XG4gICAgaWYgKHdpZGdldCkge1xuICAgICAgYnVpbGRlci5jbS5kaXNwbGF5LmlucHV0LnNldFVuZWRpdGFibGUod2lkZ2V0KTtcbiAgICAgIGJ1aWxkZXIuY29udGVudC5hcHBlbmRDaGlsZCh3aWRnZXQpO1xuICAgIH1cbiAgICBidWlsZGVyLnBvcyArPSBzaXplO1xuICB9XG5cbiAgLy8gT3V0cHV0cyBhIG51bWJlciBvZiBzcGFucyB0byBtYWtlIHVwIGEgbGluZSwgdGFraW5nIGhpZ2hsaWdodGluZ1xuICAvLyBhbmQgbWFya2VkIHRleHQgaW50byBhY2NvdW50LlxuICBmdW5jdGlvbiBpbnNlcnRMaW5lQ29udGVudChsaW5lLCBidWlsZGVyLCBzdHlsZXMpIHtcbiAgICB2YXIgc3BhbnMgPSBsaW5lLm1hcmtlZFNwYW5zLCBhbGxUZXh0ID0gbGluZS50ZXh0LCBhdCA9IDA7XG4gICAgaWYgKCFzcGFucykge1xuICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKz0yKVxuICAgICAgICBidWlsZGVyLmFkZFRva2VuKGJ1aWxkZXIsIGFsbFRleHQuc2xpY2UoYXQsIGF0ID0gc3R5bGVzW2ldKSwgaW50ZXJwcmV0VG9rZW5TdHlsZShzdHlsZXNbaSsxXSwgYnVpbGRlci5jbS5vcHRpb25zKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGxlbiA9IGFsbFRleHQubGVuZ3RoLCBwb3MgPSAwLCBpID0gMSwgdGV4dCA9IFwiXCIsIHN0eWxlLCBjc3M7XG4gICAgdmFyIG5leHRDaGFuZ2UgPSAwLCBzcGFuU3R5bGUsIHNwYW5FbmRTdHlsZSwgc3BhblN0YXJ0U3R5bGUsIHRpdGxlLCBjb2xsYXBzZWQ7XG4gICAgZm9yICg7Oykge1xuICAgICAgaWYgKG5leHRDaGFuZ2UgPT0gcG9zKSB7IC8vIFVwZGF0ZSBjdXJyZW50IG1hcmtlciBzZXRcbiAgICAgICAgc3BhblN0eWxlID0gc3BhbkVuZFN0eWxlID0gc3BhblN0YXJ0U3R5bGUgPSB0aXRsZSA9IGNzcyA9IFwiXCI7XG4gICAgICAgIGNvbGxhcHNlZCA9IG51bGw7IG5leHRDaGFuZ2UgPSBJbmZpbml0eTtcbiAgICAgICAgdmFyIGZvdW5kQm9va21hcmtzID0gW107XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3BhbnMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICB2YXIgc3AgPSBzcGFuc1tqXSwgbSA9IHNwLm1hcmtlcjtcbiAgICAgICAgICBpZiAobS50eXBlID09IFwiYm9va21hcmtcIiAmJiBzcC5mcm9tID09IHBvcyAmJiBtLndpZGdldE5vZGUpIHtcbiAgICAgICAgICAgIGZvdW5kQm9va21hcmtzLnB1c2gobSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChzcC5mcm9tIDw9IHBvcyAmJiAoc3AudG8gPT0gbnVsbCB8fCBzcC50byA+IHBvcyB8fCBtLmNvbGxhcHNlZCAmJiBzcC50byA9PSBwb3MgJiYgc3AuZnJvbSA9PSBwb3MpKSB7XG4gICAgICAgICAgICBpZiAoc3AudG8gIT0gbnVsbCAmJiBzcC50byAhPSBwb3MgJiYgbmV4dENoYW5nZSA+IHNwLnRvKSB7XG4gICAgICAgICAgICAgIG5leHRDaGFuZ2UgPSBzcC50bztcbiAgICAgICAgICAgICAgc3BhbkVuZFN0eWxlID0gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtLmNsYXNzTmFtZSkgc3BhblN0eWxlICs9IFwiIFwiICsgbS5jbGFzc05hbWU7XG4gICAgICAgICAgICBpZiAobS5jc3MpIGNzcyA9IG0uY3NzO1xuICAgICAgICAgICAgaWYgKG0uc3RhcnRTdHlsZSAmJiBzcC5mcm9tID09IHBvcykgc3BhblN0YXJ0U3R5bGUgKz0gXCIgXCIgKyBtLnN0YXJ0U3R5bGU7XG4gICAgICAgICAgICBpZiAobS5lbmRTdHlsZSAmJiBzcC50byA9PSBuZXh0Q2hhbmdlKSBzcGFuRW5kU3R5bGUgKz0gXCIgXCIgKyBtLmVuZFN0eWxlO1xuICAgICAgICAgICAgaWYgKG0udGl0bGUgJiYgIXRpdGxlKSB0aXRsZSA9IG0udGl0bGU7XG4gICAgICAgICAgICBpZiAobS5jb2xsYXBzZWQgJiYgKCFjb2xsYXBzZWQgfHwgY29tcGFyZUNvbGxhcHNlZE1hcmtlcnMoY29sbGFwc2VkLm1hcmtlciwgbSkgPCAwKSlcbiAgICAgICAgICAgICAgY29sbGFwc2VkID0gc3A7XG4gICAgICAgICAgfSBlbHNlIGlmIChzcC5mcm9tID4gcG9zICYmIG5leHRDaGFuZ2UgPiBzcC5mcm9tKSB7XG4gICAgICAgICAgICBuZXh0Q2hhbmdlID0gc3AuZnJvbTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbGxhcHNlZCAmJiAoY29sbGFwc2VkLmZyb20gfHwgMCkgPT0gcG9zKSB7XG4gICAgICAgICAgYnVpbGRDb2xsYXBzZWRTcGFuKGJ1aWxkZXIsIChjb2xsYXBzZWQudG8gPT0gbnVsbCA/IGxlbiArIDEgOiBjb2xsYXBzZWQudG8pIC0gcG9zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsYXBzZWQubWFya2VyLCBjb2xsYXBzZWQuZnJvbSA9PSBudWxsKTtcbiAgICAgICAgICBpZiAoY29sbGFwc2VkLnRvID09IG51bGwpIHJldHVybjtcbiAgICAgICAgICBpZiAoY29sbGFwc2VkLnRvID09IHBvcykgY29sbGFwc2VkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjb2xsYXBzZWQgJiYgZm91bmRCb29rbWFya3MubGVuZ3RoKSBmb3IgKHZhciBqID0gMDsgaiA8IGZvdW5kQm9va21hcmtzLmxlbmd0aDsgKytqKVxuICAgICAgICAgIGJ1aWxkQ29sbGFwc2VkU3BhbihidWlsZGVyLCAwLCBmb3VuZEJvb2ttYXJrc1tqXSk7XG4gICAgICB9XG4gICAgICBpZiAocG9zID49IGxlbikgYnJlYWs7XG5cbiAgICAgIHZhciB1cHRvID0gTWF0aC5taW4obGVuLCBuZXh0Q2hhbmdlKTtcbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGlmICh0ZXh0KSB7XG4gICAgICAgICAgdmFyIGVuZCA9IHBvcyArIHRleHQubGVuZ3RoO1xuICAgICAgICAgIGlmICghY29sbGFwc2VkKSB7XG4gICAgICAgICAgICB2YXIgdG9rZW5UZXh0ID0gZW5kID4gdXB0byA/IHRleHQuc2xpY2UoMCwgdXB0byAtIHBvcykgOiB0ZXh0O1xuICAgICAgICAgICAgYnVpbGRlci5hZGRUb2tlbihidWlsZGVyLCB0b2tlblRleHQsIHN0eWxlID8gc3R5bGUgKyBzcGFuU3R5bGUgOiBzcGFuU3R5bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW5TdGFydFN0eWxlLCBwb3MgKyB0b2tlblRleHQubGVuZ3RoID09IG5leHRDaGFuZ2UgPyBzcGFuRW5kU3R5bGUgOiBcIlwiLCB0aXRsZSwgY3NzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGVuZCA+PSB1cHRvKSB7dGV4dCA9IHRleHQuc2xpY2UodXB0byAtIHBvcyk7IHBvcyA9IHVwdG87IGJyZWFrO31cbiAgICAgICAgICBwb3MgPSBlbmQ7XG4gICAgICAgICAgc3BhblN0YXJ0U3R5bGUgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHRleHQgPSBhbGxUZXh0LnNsaWNlKGF0LCBhdCA9IHN0eWxlc1tpKytdKTtcbiAgICAgICAgc3R5bGUgPSBpbnRlcnByZXRUb2tlblN0eWxlKHN0eWxlc1tpKytdLCBidWlsZGVyLmNtLm9wdGlvbnMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIERPQ1VNRU5UIERBVEEgU1RSVUNUVVJFXG5cbiAgLy8gQnkgZGVmYXVsdCwgdXBkYXRlcyB0aGF0IHN0YXJ0IGFuZCBlbmQgYXQgdGhlIGJlZ2lubmluZyBvZiBhIGxpbmVcbiAgLy8gYXJlIHRyZWF0ZWQgc3BlY2lhbGx5LCBpbiBvcmRlciB0byBtYWtlIHRoZSBhc3NvY2lhdGlvbiBvZiBsaW5lXG4gIC8vIHdpZGdldHMgYW5kIG1hcmtlciBlbGVtZW50cyB3aXRoIHRoZSB0ZXh0IGJlaGF2ZSBtb3JlIGludHVpdGl2ZS5cbiAgZnVuY3Rpb24gaXNXaG9sZUxpbmVVcGRhdGUoZG9jLCBjaGFuZ2UpIHtcbiAgICByZXR1cm4gY2hhbmdlLmZyb20uY2ggPT0gMCAmJiBjaGFuZ2UudG8uY2ggPT0gMCAmJiBsc3QoY2hhbmdlLnRleHQpID09IFwiXCIgJiZcbiAgICAgICghZG9jLmNtIHx8IGRvYy5jbS5vcHRpb25zLndob2xlTGluZVVwZGF0ZUJlZm9yZSk7XG4gIH1cblxuICAvLyBQZXJmb3JtIGEgY2hhbmdlIG9uIHRoZSBkb2N1bWVudCBkYXRhIHN0cnVjdHVyZS5cbiAgZnVuY3Rpb24gdXBkYXRlRG9jKGRvYywgY2hhbmdlLCBtYXJrZWRTcGFucywgZXN0aW1hdGVIZWlnaHQpIHtcbiAgICBmdW5jdGlvbiBzcGFuc0ZvcihuKSB7cmV0dXJuIG1hcmtlZFNwYW5zID8gbWFya2VkU3BhbnNbbl0gOiBudWxsO31cbiAgICBmdW5jdGlvbiB1cGRhdGUobGluZSwgdGV4dCwgc3BhbnMpIHtcbiAgICAgIHVwZGF0ZUxpbmUobGluZSwgdGV4dCwgc3BhbnMsIGVzdGltYXRlSGVpZ2h0KTtcbiAgICAgIHNpZ25hbExhdGVyKGxpbmUsIFwiY2hhbmdlXCIsIGxpbmUsIGNoYW5nZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGxpbmVzRm9yKHN0YXJ0LCBlbmQpIHtcbiAgICAgIGZvciAodmFyIGkgPSBzdGFydCwgcmVzdWx0ID0gW107IGkgPCBlbmQ7ICsraSlcbiAgICAgICAgcmVzdWx0LnB1c2gobmV3IExpbmUodGV4dFtpXSwgc3BhbnNGb3IoaSksIGVzdGltYXRlSGVpZ2h0KSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHZhciBmcm9tID0gY2hhbmdlLmZyb20sIHRvID0gY2hhbmdlLnRvLCB0ZXh0ID0gY2hhbmdlLnRleHQ7XG4gICAgdmFyIGZpcnN0TGluZSA9IGdldExpbmUoZG9jLCBmcm9tLmxpbmUpLCBsYXN0TGluZSA9IGdldExpbmUoZG9jLCB0by5saW5lKTtcbiAgICB2YXIgbGFzdFRleHQgPSBsc3QodGV4dCksIGxhc3RTcGFucyA9IHNwYW5zRm9yKHRleHQubGVuZ3RoIC0gMSksIG5saW5lcyA9IHRvLmxpbmUgLSBmcm9tLmxpbmU7XG5cbiAgICAvLyBBZGp1c3QgdGhlIGxpbmUgc3RydWN0dXJlXG4gICAgaWYgKGNoYW5nZS5mdWxsKSB7XG4gICAgICBkb2MuaW5zZXJ0KDAsIGxpbmVzRm9yKDAsIHRleHQubGVuZ3RoKSk7XG4gICAgICBkb2MucmVtb3ZlKHRleHQubGVuZ3RoLCBkb2Muc2l6ZSAtIHRleHQubGVuZ3RoKTtcbiAgICB9IGVsc2UgaWYgKGlzV2hvbGVMaW5lVXBkYXRlKGRvYywgY2hhbmdlKSkge1xuICAgICAgLy8gVGhpcyBpcyBhIHdob2xlLWxpbmUgcmVwbGFjZS4gVHJlYXRlZCBzcGVjaWFsbHkgdG8gbWFrZVxuICAgICAgLy8gc3VyZSBsaW5lIG9iamVjdHMgbW92ZSB0aGUgd2F5IHRoZXkgYXJlIHN1cHBvc2VkIHRvLlxuICAgICAgdmFyIGFkZGVkID0gbGluZXNGb3IoMCwgdGV4dC5sZW5ndGggLSAxKTtcbiAgICAgIHVwZGF0ZShsYXN0TGluZSwgbGFzdExpbmUudGV4dCwgbGFzdFNwYW5zKTtcbiAgICAgIGlmIChubGluZXMpIGRvYy5yZW1vdmUoZnJvbS5saW5lLCBubGluZXMpO1xuICAgICAgaWYgKGFkZGVkLmxlbmd0aCkgZG9jLmluc2VydChmcm9tLmxpbmUsIGFkZGVkKTtcbiAgICB9IGVsc2UgaWYgKGZpcnN0TGluZSA9PSBsYXN0TGluZSkge1xuICAgICAgaWYgKHRleHQubGVuZ3RoID09IDEpIHtcbiAgICAgICAgdXBkYXRlKGZpcnN0TGluZSwgZmlyc3RMaW5lLnRleHQuc2xpY2UoMCwgZnJvbS5jaCkgKyBsYXN0VGV4dCArIGZpcnN0TGluZS50ZXh0LnNsaWNlKHRvLmNoKSwgbGFzdFNwYW5zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBhZGRlZCA9IGxpbmVzRm9yKDEsIHRleHQubGVuZ3RoIC0gMSk7XG4gICAgICAgIGFkZGVkLnB1c2gobmV3IExpbmUobGFzdFRleHQgKyBmaXJzdExpbmUudGV4dC5zbGljZSh0by5jaCksIGxhc3RTcGFucywgZXN0aW1hdGVIZWlnaHQpKTtcbiAgICAgICAgdXBkYXRlKGZpcnN0TGluZSwgZmlyc3RMaW5lLnRleHQuc2xpY2UoMCwgZnJvbS5jaCkgKyB0ZXh0WzBdLCBzcGFuc0ZvcigwKSk7XG4gICAgICAgIGRvYy5pbnNlcnQoZnJvbS5saW5lICsgMSwgYWRkZWQpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGV4dC5sZW5ndGggPT0gMSkge1xuICAgICAgdXBkYXRlKGZpcnN0TGluZSwgZmlyc3RMaW5lLnRleHQuc2xpY2UoMCwgZnJvbS5jaCkgKyB0ZXh0WzBdICsgbGFzdExpbmUudGV4dC5zbGljZSh0by5jaCksIHNwYW5zRm9yKDApKTtcbiAgICAgIGRvYy5yZW1vdmUoZnJvbS5saW5lICsgMSwgbmxpbmVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdXBkYXRlKGZpcnN0TGluZSwgZmlyc3RMaW5lLnRleHQuc2xpY2UoMCwgZnJvbS5jaCkgKyB0ZXh0WzBdLCBzcGFuc0ZvcigwKSk7XG4gICAgICB1cGRhdGUobGFzdExpbmUsIGxhc3RUZXh0ICsgbGFzdExpbmUudGV4dC5zbGljZSh0by5jaCksIGxhc3RTcGFucyk7XG4gICAgICB2YXIgYWRkZWQgPSBsaW5lc0ZvcigxLCB0ZXh0Lmxlbmd0aCAtIDEpO1xuICAgICAgaWYgKG5saW5lcyA+IDEpIGRvYy5yZW1vdmUoZnJvbS5saW5lICsgMSwgbmxpbmVzIC0gMSk7XG4gICAgICBkb2MuaW5zZXJ0KGZyb20ubGluZSArIDEsIGFkZGVkKTtcbiAgICB9XG5cbiAgICBzaWduYWxMYXRlcihkb2MsIFwiY2hhbmdlXCIsIGRvYywgY2hhbmdlKTtcbiAgfVxuXG4gIC8vIFRoZSBkb2N1bWVudCBpcyByZXByZXNlbnRlZCBhcyBhIEJUcmVlIGNvbnNpc3Rpbmcgb2YgbGVhdmVzLCB3aXRoXG4gIC8vIGNodW5rIG9mIGxpbmVzIGluIHRoZW0sIGFuZCBicmFuY2hlcywgd2l0aCB1cCB0byB0ZW4gbGVhdmVzIG9yXG4gIC8vIG90aGVyIGJyYW5jaCBub2RlcyBiZWxvdyB0aGVtLiBUaGUgdG9wIG5vZGUgaXMgYWx3YXlzIGEgYnJhbmNoXG4gIC8vIG5vZGUsIGFuZCBpcyB0aGUgZG9jdW1lbnQgb2JqZWN0IGl0c2VsZiAobWVhbmluZyBpdCBoYXNcbiAgLy8gYWRkaXRpb25hbCBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzKS5cbiAgLy9cbiAgLy8gQWxsIG5vZGVzIGhhdmUgcGFyZW50IGxpbmtzLiBUaGUgdHJlZSBpcyB1c2VkIGJvdGggdG8gZ28gZnJvbVxuICAvLyBsaW5lIG51bWJlcnMgdG8gbGluZSBvYmplY3RzLCBhbmQgdG8gZ28gZnJvbSBvYmplY3RzIHRvIG51bWJlcnMuXG4gIC8vIEl0IGFsc28gaW5kZXhlcyBieSBoZWlnaHQsIGFuZCBpcyB1c2VkIHRvIGNvbnZlcnQgYmV0d2VlbiBoZWlnaHRcbiAgLy8gYW5kIGxpbmUgb2JqZWN0LCBhbmQgdG8gZmluZCB0aGUgdG90YWwgaGVpZ2h0IG9mIHRoZSBkb2N1bWVudC5cbiAgLy9cbiAgLy8gU2VlIGFsc28gaHR0cDovL21hcmlqbmhhdmVyYmVrZS5ubC9ibG9nL2NvZGVtaXJyb3ItbGluZS10cmVlLmh0bWxcblxuICBmdW5jdGlvbiBMZWFmQ2h1bmsobGluZXMpIHtcbiAgICB0aGlzLmxpbmVzID0gbGluZXM7XG4gICAgdGhpcy5wYXJlbnQgPSBudWxsO1xuICAgIGZvciAodmFyIGkgPSAwLCBoZWlnaHQgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIGxpbmVzW2ldLnBhcmVudCA9IHRoaXM7XG4gICAgICBoZWlnaHQgKz0gbGluZXNbaV0uaGVpZ2h0O1xuICAgIH1cbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgfVxuXG4gIExlYWZDaHVuay5wcm90b3R5cGUgPSB7XG4gICAgY2h1bmtTaXplOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMubGluZXMubGVuZ3RoOyB9LFxuICAgIC8vIFJlbW92ZSB0aGUgbiBsaW5lcyBhdCBvZmZzZXQgJ2F0Jy5cbiAgICByZW1vdmVJbm5lcjogZnVuY3Rpb24oYXQsIG4pIHtcbiAgICAgIGZvciAodmFyIGkgPSBhdCwgZSA9IGF0ICsgbjsgaSA8IGU7ICsraSkge1xuICAgICAgICB2YXIgbGluZSA9IHRoaXMubGluZXNbaV07XG4gICAgICAgIHRoaXMuaGVpZ2h0IC09IGxpbmUuaGVpZ2h0O1xuICAgICAgICBjbGVhblVwTGluZShsaW5lKTtcbiAgICAgICAgc2lnbmFsTGF0ZXIobGluZSwgXCJkZWxldGVcIik7XG4gICAgICB9XG4gICAgICB0aGlzLmxpbmVzLnNwbGljZShhdCwgbik7XG4gICAgfSxcbiAgICAvLyBIZWxwZXIgdXNlZCB0byBjb2xsYXBzZSBhIHNtYWxsIGJyYW5jaCBpbnRvIGEgc2luZ2xlIGxlYWYuXG4gICAgY29sbGFwc2U6IGZ1bmN0aW9uKGxpbmVzKSB7XG4gICAgICBsaW5lcy5wdXNoLmFwcGx5KGxpbmVzLCB0aGlzLmxpbmVzKTtcbiAgICB9LFxuICAgIC8vIEluc2VydCB0aGUgZ2l2ZW4gYXJyYXkgb2YgbGluZXMgYXQgb2Zmc2V0ICdhdCcsIGNvdW50IHRoZW0gYXNcbiAgICAvLyBoYXZpbmcgdGhlIGdpdmVuIGhlaWdodC5cbiAgICBpbnNlcnRJbm5lcjogZnVuY3Rpb24oYXQsIGxpbmVzLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMuaGVpZ2h0ICs9IGhlaWdodDtcbiAgICAgIHRoaXMubGluZXMgPSB0aGlzLmxpbmVzLnNsaWNlKDAsIGF0KS5jb25jYXQobGluZXMpLmNvbmNhdCh0aGlzLmxpbmVzLnNsaWNlKGF0KSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgKytpKSBsaW5lc1tpXS5wYXJlbnQgPSB0aGlzO1xuICAgIH0sXG4gICAgLy8gVXNlZCB0byBpdGVyYXRlIG92ZXIgYSBwYXJ0IG9mIHRoZSB0cmVlLlxuICAgIGl0ZXJOOiBmdW5jdGlvbihhdCwgbiwgb3ApIHtcbiAgICAgIGZvciAodmFyIGUgPSBhdCArIG47IGF0IDwgZTsgKythdClcbiAgICAgICAgaWYgKG9wKHRoaXMubGluZXNbYXRdKSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIEJyYW5jaENodW5rKGNoaWxkcmVuKSB7XG4gICAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgIHZhciBzaXplID0gMCwgaGVpZ2h0ID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgY2ggPSBjaGlsZHJlbltpXTtcbiAgICAgIHNpemUgKz0gY2guY2h1bmtTaXplKCk7IGhlaWdodCArPSBjaC5oZWlnaHQ7XG4gICAgICBjaC5wYXJlbnQgPSB0aGlzO1xuICAgIH1cbiAgICB0aGlzLnNpemUgPSBzaXplO1xuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMucGFyZW50ID0gbnVsbDtcbiAgfVxuXG4gIEJyYW5jaENodW5rLnByb3RvdHlwZSA9IHtcbiAgICBjaHVua1NpemU6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5zaXplOyB9LFxuICAgIHJlbW92ZUlubmVyOiBmdW5jdGlvbihhdCwgbikge1xuICAgICAgdGhpcy5zaXplIC09IG47XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXSwgc3ogPSBjaGlsZC5jaHVua1NpemUoKTtcbiAgICAgICAgaWYgKGF0IDwgc3opIHtcbiAgICAgICAgICB2YXIgcm0gPSBNYXRoLm1pbihuLCBzeiAtIGF0KSwgb2xkSGVpZ2h0ID0gY2hpbGQuaGVpZ2h0O1xuICAgICAgICAgIGNoaWxkLnJlbW92ZUlubmVyKGF0LCBybSk7XG4gICAgICAgICAgdGhpcy5oZWlnaHQgLT0gb2xkSGVpZ2h0IC0gY2hpbGQuaGVpZ2h0O1xuICAgICAgICAgIGlmIChzeiA9PSBybSkgeyB0aGlzLmNoaWxkcmVuLnNwbGljZShpLS0sIDEpOyBjaGlsZC5wYXJlbnQgPSBudWxsOyB9XG4gICAgICAgICAgaWYgKChuIC09IHJtKSA9PSAwKSBicmVhaztcbiAgICAgICAgICBhdCA9IDA7XG4gICAgICAgIH0gZWxzZSBhdCAtPSBzejtcbiAgICAgIH1cbiAgICAgIC8vIElmIHRoZSByZXN1bHQgaXMgc21hbGxlciB0aGFuIDI1IGxpbmVzLCBlbnN1cmUgdGhhdCBpdCBpcyBhXG4gICAgICAvLyBzaW5nbGUgbGVhZiBub2RlLlxuICAgICAgaWYgKHRoaXMuc2l6ZSAtIG4gPCAyNSAmJlxuICAgICAgICAgICh0aGlzLmNoaWxkcmVuLmxlbmd0aCA+IDEgfHwgISh0aGlzLmNoaWxkcmVuWzBdIGluc3RhbmNlb2YgTGVhZkNodW5rKSkpIHtcbiAgICAgICAgdmFyIGxpbmVzID0gW107XG4gICAgICAgIHRoaXMuY29sbGFwc2UobGluZXMpO1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gW25ldyBMZWFmQ2h1bmsobGluZXMpXTtcbiAgICAgICAgdGhpcy5jaGlsZHJlblswXS5wYXJlbnQgPSB0aGlzO1xuICAgICAgfVxuICAgIH0sXG4gICAgY29sbGFwc2U6IGZ1bmN0aW9uKGxpbmVzKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHRoaXMuY2hpbGRyZW5baV0uY29sbGFwc2UobGluZXMpO1xuICAgIH0sXG4gICAgaW5zZXJ0SW5uZXI6IGZ1bmN0aW9uKGF0LCBsaW5lcywgaGVpZ2h0KSB7XG4gICAgICB0aGlzLnNpemUgKz0gbGluZXMubGVuZ3RoO1xuICAgICAgdGhpcy5oZWlnaHQgKz0gaGVpZ2h0O1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBjaGlsZCA9IHRoaXMuY2hpbGRyZW5baV0sIHN6ID0gY2hpbGQuY2h1bmtTaXplKCk7XG4gICAgICAgIGlmIChhdCA8PSBzeikge1xuICAgICAgICAgIGNoaWxkLmluc2VydElubmVyKGF0LCBsaW5lcywgaGVpZ2h0KTtcbiAgICAgICAgICBpZiAoY2hpbGQubGluZXMgJiYgY2hpbGQubGluZXMubGVuZ3RoID4gNTApIHtcbiAgICAgICAgICAgIHdoaWxlIChjaGlsZC5saW5lcy5sZW5ndGggPiA1MCkge1xuICAgICAgICAgICAgICB2YXIgc3BpbGxlZCA9IGNoaWxkLmxpbmVzLnNwbGljZShjaGlsZC5saW5lcy5sZW5ndGggLSAyNSwgMjUpO1xuICAgICAgICAgICAgICB2YXIgbmV3bGVhZiA9IG5ldyBMZWFmQ2h1bmsoc3BpbGxlZCk7XG4gICAgICAgICAgICAgIGNoaWxkLmhlaWdodCAtPSBuZXdsZWFmLmhlaWdodDtcbiAgICAgICAgICAgICAgdGhpcy5jaGlsZHJlbi5zcGxpY2UoaSArIDEsIDAsIG5ld2xlYWYpO1xuICAgICAgICAgICAgICBuZXdsZWFmLnBhcmVudCA9IHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1heWJlU3BpbGwoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgYXQgLT0gc3o7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBXaGVuIGEgbm9kZSBoYXMgZ3Jvd24sIGNoZWNrIHdoZXRoZXIgaXQgc2hvdWxkIGJlIHNwbGl0LlxuICAgIG1heWJlU3BpbGw6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuY2hpbGRyZW4ubGVuZ3RoIDw9IDEwKSByZXR1cm47XG4gICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgZG8ge1xuICAgICAgICB2YXIgc3BpbGxlZCA9IG1lLmNoaWxkcmVuLnNwbGljZShtZS5jaGlsZHJlbi5sZW5ndGggLSA1LCA1KTtcbiAgICAgICAgdmFyIHNpYmxpbmcgPSBuZXcgQnJhbmNoQ2h1bmsoc3BpbGxlZCk7XG4gICAgICAgIGlmICghbWUucGFyZW50KSB7IC8vIEJlY29tZSB0aGUgcGFyZW50IG5vZGVcbiAgICAgICAgICB2YXIgY29weSA9IG5ldyBCcmFuY2hDaHVuayhtZS5jaGlsZHJlbik7XG4gICAgICAgICAgY29weS5wYXJlbnQgPSBtZTtcbiAgICAgICAgICBtZS5jaGlsZHJlbiA9IFtjb3B5LCBzaWJsaW5nXTtcbiAgICAgICAgICBtZSA9IGNvcHk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWUuc2l6ZSAtPSBzaWJsaW5nLnNpemU7XG4gICAgICAgICAgbWUuaGVpZ2h0IC09IHNpYmxpbmcuaGVpZ2h0O1xuICAgICAgICAgIHZhciBteUluZGV4ID0gaW5kZXhPZihtZS5wYXJlbnQuY2hpbGRyZW4sIG1lKTtcbiAgICAgICAgICBtZS5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKG15SW5kZXggKyAxLCAwLCBzaWJsaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBzaWJsaW5nLnBhcmVudCA9IG1lLnBhcmVudDtcbiAgICAgIH0gd2hpbGUgKG1lLmNoaWxkcmVuLmxlbmd0aCA+IDEwKTtcbiAgICAgIG1lLnBhcmVudC5tYXliZVNwaWxsKCk7XG4gICAgfSxcbiAgICBpdGVyTjogZnVuY3Rpb24oYXQsIG4sIG9wKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXSwgc3ogPSBjaGlsZC5jaHVua1NpemUoKTtcbiAgICAgICAgaWYgKGF0IDwgc3opIHtcbiAgICAgICAgICB2YXIgdXNlZCA9IE1hdGgubWluKG4sIHN6IC0gYXQpO1xuICAgICAgICAgIGlmIChjaGlsZC5pdGVyTihhdCwgdXNlZCwgb3ApKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICBpZiAoKG4gLT0gdXNlZCkgPT0gMCkgYnJlYWs7XG4gICAgICAgICAgYXQgPSAwO1xuICAgICAgICB9IGVsc2UgYXQgLT0gc3o7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHZhciBuZXh0RG9jSWQgPSAwO1xuICB2YXIgRG9jID0gQ29kZU1pcnJvci5Eb2MgPSBmdW5jdGlvbih0ZXh0LCBtb2RlLCBmaXJzdExpbmUsIGxpbmVTZXApIHtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRG9jKSkgcmV0dXJuIG5ldyBEb2ModGV4dCwgbW9kZSwgZmlyc3RMaW5lLCBsaW5lU2VwKTtcbiAgICBpZiAoZmlyc3RMaW5lID09IG51bGwpIGZpcnN0TGluZSA9IDA7XG5cbiAgICBCcmFuY2hDaHVuay5jYWxsKHRoaXMsIFtuZXcgTGVhZkNodW5rKFtuZXcgTGluZShcIlwiLCBudWxsKV0pXSk7XG4gICAgdGhpcy5maXJzdCA9IGZpcnN0TGluZTtcbiAgICB0aGlzLnNjcm9sbFRvcCA9IHRoaXMuc2Nyb2xsTGVmdCA9IDA7XG4gICAgdGhpcy5jYW50RWRpdCA9IGZhbHNlO1xuICAgIHRoaXMuY2xlYW5HZW5lcmF0aW9uID0gMTtcbiAgICB0aGlzLmZyb250aWVyID0gZmlyc3RMaW5lO1xuICAgIHZhciBzdGFydCA9IFBvcyhmaXJzdExpbmUsIDApO1xuICAgIHRoaXMuc2VsID0gc2ltcGxlU2VsZWN0aW9uKHN0YXJ0KTtcbiAgICB0aGlzLmhpc3RvcnkgPSBuZXcgSGlzdG9yeShudWxsKTtcbiAgICB0aGlzLmlkID0gKytuZXh0RG9jSWQ7XG4gICAgdGhpcy5tb2RlT3B0aW9uID0gbW9kZTtcbiAgICB0aGlzLmxpbmVTZXAgPSBsaW5lU2VwO1xuXG4gICAgaWYgKHR5cGVvZiB0ZXh0ID09IFwic3RyaW5nXCIpIHRleHQgPSB0aGlzLnNwbGl0TGluZXModGV4dCk7XG4gICAgdXBkYXRlRG9jKHRoaXMsIHtmcm9tOiBzdGFydCwgdG86IHN0YXJ0LCB0ZXh0OiB0ZXh0fSk7XG4gICAgc2V0U2VsZWN0aW9uKHRoaXMsIHNpbXBsZVNlbGVjdGlvbihzdGFydCksIHNlbF9kb250U2Nyb2xsKTtcbiAgfTtcblxuICBEb2MucHJvdG90eXBlID0gY3JlYXRlT2JqKEJyYW5jaENodW5rLnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiBEb2MsXG4gICAgLy8gSXRlcmF0ZSBvdmVyIHRoZSBkb2N1bWVudC4gU3VwcG9ydHMgdHdvIGZvcm1zIC0tIHdpdGggb25seSBvbmVcbiAgICAvLyBhcmd1bWVudCwgaXQgY2FsbHMgdGhhdCBmb3IgZWFjaCBsaW5lIGluIHRoZSBkb2N1bWVudC4gV2l0aFxuICAgIC8vIHRocmVlLCBpdCBpdGVyYXRlcyBvdmVyIHRoZSByYW5nZSBnaXZlbiBieSB0aGUgZmlyc3QgdHdvICh3aXRoXG4gICAgLy8gdGhlIHNlY29uZCBiZWluZyBub24taW5jbHVzaXZlKS5cbiAgICBpdGVyOiBmdW5jdGlvbihmcm9tLCB0bywgb3ApIHtcbiAgICAgIGlmIChvcCkgdGhpcy5pdGVyTihmcm9tIC0gdGhpcy5maXJzdCwgdG8gLSBmcm9tLCBvcCk7XG4gICAgICBlbHNlIHRoaXMuaXRlck4odGhpcy5maXJzdCwgdGhpcy5maXJzdCArIHRoaXMuc2l6ZSwgZnJvbSk7XG4gICAgfSxcblxuICAgIC8vIE5vbi1wdWJsaWMgaW50ZXJmYWNlIGZvciBhZGRpbmcgYW5kIHJlbW92aW5nIGxpbmVzLlxuICAgIGluc2VydDogZnVuY3Rpb24oYXQsIGxpbmVzKSB7XG4gICAgICB2YXIgaGVpZ2h0ID0gMDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyArK2kpIGhlaWdodCArPSBsaW5lc1tpXS5oZWlnaHQ7XG4gICAgICB0aGlzLmluc2VydElubmVyKGF0IC0gdGhpcy5maXJzdCwgbGluZXMsIGhlaWdodCk7XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uKGF0LCBuKSB7IHRoaXMucmVtb3ZlSW5uZXIoYXQgLSB0aGlzLmZpcnN0LCBuKTsgfSxcblxuICAgIC8vIEZyb20gaGVyZSwgdGhlIG1ldGhvZHMgYXJlIHBhcnQgb2YgdGhlIHB1YmxpYyBpbnRlcmZhY2UuIE1vc3RcbiAgICAvLyBhcmUgYWxzbyBhdmFpbGFibGUgZnJvbSBDb2RlTWlycm9yIChlZGl0b3IpIGluc3RhbmNlcy5cblxuICAgIGdldFZhbHVlOiBmdW5jdGlvbihsaW5lU2VwKSB7XG4gICAgICB2YXIgbGluZXMgPSBnZXRMaW5lcyh0aGlzLCB0aGlzLmZpcnN0LCB0aGlzLmZpcnN0ICsgdGhpcy5zaXplKTtcbiAgICAgIGlmIChsaW5lU2VwID09PSBmYWxzZSkgcmV0dXJuIGxpbmVzO1xuICAgICAgcmV0dXJuIGxpbmVzLmpvaW4obGluZVNlcCB8fCB0aGlzLmxpbmVTZXBhcmF0b3IoKSk7XG4gICAgfSxcbiAgICBzZXRWYWx1ZTogZG9jTWV0aG9kT3AoZnVuY3Rpb24oY29kZSkge1xuICAgICAgdmFyIHRvcCA9IFBvcyh0aGlzLmZpcnN0LCAwKSwgbGFzdCA9IHRoaXMuZmlyc3QgKyB0aGlzLnNpemUgLSAxO1xuICAgICAgbWFrZUNoYW5nZSh0aGlzLCB7ZnJvbTogdG9wLCB0bzogUG9zKGxhc3QsIGdldExpbmUodGhpcywgbGFzdCkudGV4dC5sZW5ndGgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy5zcGxpdExpbmVzKGNvZGUpLCBvcmlnaW46IFwic2V0VmFsdWVcIiwgZnVsbDogdHJ1ZX0sIHRydWUpO1xuICAgICAgc2V0U2VsZWN0aW9uKHRoaXMsIHNpbXBsZVNlbGVjdGlvbih0b3ApKTtcbiAgICB9KSxcbiAgICByZXBsYWNlUmFuZ2U6IGZ1bmN0aW9uKGNvZGUsIGZyb20sIHRvLCBvcmlnaW4pIHtcbiAgICAgIGZyb20gPSBjbGlwUG9zKHRoaXMsIGZyb20pO1xuICAgICAgdG8gPSB0byA/IGNsaXBQb3ModGhpcywgdG8pIDogZnJvbTtcbiAgICAgIHJlcGxhY2VSYW5nZSh0aGlzLCBjb2RlLCBmcm9tLCB0bywgb3JpZ2luKTtcbiAgICB9LFxuICAgIGdldFJhbmdlOiBmdW5jdGlvbihmcm9tLCB0bywgbGluZVNlcCkge1xuICAgICAgdmFyIGxpbmVzID0gZ2V0QmV0d2Vlbih0aGlzLCBjbGlwUG9zKHRoaXMsIGZyb20pLCBjbGlwUG9zKHRoaXMsIHRvKSk7XG4gICAgICBpZiAobGluZVNlcCA9PT0gZmFsc2UpIHJldHVybiBsaW5lcztcbiAgICAgIHJldHVybiBsaW5lcy5qb2luKGxpbmVTZXAgfHwgdGhpcy5saW5lU2VwYXJhdG9yKCkpO1xuICAgIH0sXG5cbiAgICBnZXRMaW5lOiBmdW5jdGlvbihsaW5lKSB7dmFyIGwgPSB0aGlzLmdldExpbmVIYW5kbGUobGluZSk7IHJldHVybiBsICYmIGwudGV4dDt9LFxuXG4gICAgZ2V0TGluZUhhbmRsZTogZnVuY3Rpb24obGluZSkge2lmIChpc0xpbmUodGhpcywgbGluZSkpIHJldHVybiBnZXRMaW5lKHRoaXMsIGxpbmUpO30sXG4gICAgZ2V0TGluZU51bWJlcjogZnVuY3Rpb24obGluZSkge3JldHVybiBsaW5lTm8obGluZSk7fSxcblxuICAgIGdldExpbmVIYW5kbGVWaXN1YWxTdGFydDogZnVuY3Rpb24obGluZSkge1xuICAgICAgaWYgKHR5cGVvZiBsaW5lID09IFwibnVtYmVyXCIpIGxpbmUgPSBnZXRMaW5lKHRoaXMsIGxpbmUpO1xuICAgICAgcmV0dXJuIHZpc3VhbExpbmUobGluZSk7XG4gICAgfSxcblxuICAgIGxpbmVDb3VudDogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuc2l6ZTt9LFxuICAgIGZpcnN0TGluZTogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuZmlyc3Q7fSxcbiAgICBsYXN0TGluZTogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuZmlyc3QgKyB0aGlzLnNpemUgLSAxO30sXG5cbiAgICBjbGlwUG9zOiBmdW5jdGlvbihwb3MpIHtyZXR1cm4gY2xpcFBvcyh0aGlzLCBwb3MpO30sXG5cbiAgICBnZXRDdXJzb3I6IGZ1bmN0aW9uKHN0YXJ0KSB7XG4gICAgICB2YXIgcmFuZ2UgPSB0aGlzLnNlbC5wcmltYXJ5KCksIHBvcztcbiAgICAgIGlmIChzdGFydCA9PSBudWxsIHx8IHN0YXJ0ID09IFwiaGVhZFwiKSBwb3MgPSByYW5nZS5oZWFkO1xuICAgICAgZWxzZSBpZiAoc3RhcnQgPT0gXCJhbmNob3JcIikgcG9zID0gcmFuZ2UuYW5jaG9yO1xuICAgICAgZWxzZSBpZiAoc3RhcnQgPT0gXCJlbmRcIiB8fCBzdGFydCA9PSBcInRvXCIgfHwgc3RhcnQgPT09IGZhbHNlKSBwb3MgPSByYW5nZS50bygpO1xuICAgICAgZWxzZSBwb3MgPSByYW5nZS5mcm9tKCk7XG4gICAgICByZXR1cm4gcG9zO1xuICAgIH0sXG4gICAgbGlzdFNlbGVjdGlvbnM6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5zZWwucmFuZ2VzOyB9LFxuICAgIHNvbWV0aGluZ1NlbGVjdGVkOiBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5zZWwuc29tZXRoaW5nU2VsZWN0ZWQoKTt9LFxuXG4gICAgc2V0Q3Vyc29yOiBkb2NNZXRob2RPcChmdW5jdGlvbihsaW5lLCBjaCwgb3B0aW9ucykge1xuICAgICAgc2V0U2ltcGxlU2VsZWN0aW9uKHRoaXMsIGNsaXBQb3ModGhpcywgdHlwZW9mIGxpbmUgPT0gXCJudW1iZXJcIiA/IFBvcyhsaW5lLCBjaCB8fCAwKSA6IGxpbmUpLCBudWxsLCBvcHRpb25zKTtcbiAgICB9KSxcbiAgICBzZXRTZWxlY3Rpb246IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGFuY2hvciwgaGVhZCwgb3B0aW9ucykge1xuICAgICAgc2V0U2ltcGxlU2VsZWN0aW9uKHRoaXMsIGNsaXBQb3ModGhpcywgYW5jaG9yKSwgY2xpcFBvcyh0aGlzLCBoZWFkIHx8IGFuY2hvciksIG9wdGlvbnMpO1xuICAgIH0pLFxuICAgIGV4dGVuZFNlbGVjdGlvbjogZG9jTWV0aG9kT3AoZnVuY3Rpb24oaGVhZCwgb3RoZXIsIG9wdGlvbnMpIHtcbiAgICAgIGV4dGVuZFNlbGVjdGlvbih0aGlzLCBjbGlwUG9zKHRoaXMsIGhlYWQpLCBvdGhlciAmJiBjbGlwUG9zKHRoaXMsIG90aGVyKSwgb3B0aW9ucyk7XG4gICAgfSksXG4gICAgZXh0ZW5kU2VsZWN0aW9uczogZG9jTWV0aG9kT3AoZnVuY3Rpb24oaGVhZHMsIG9wdGlvbnMpIHtcbiAgICAgIGV4dGVuZFNlbGVjdGlvbnModGhpcywgY2xpcFBvc0FycmF5KHRoaXMsIGhlYWRzLCBvcHRpb25zKSk7XG4gICAgfSksXG4gICAgZXh0ZW5kU2VsZWN0aW9uc0J5OiBkb2NNZXRob2RPcChmdW5jdGlvbihmLCBvcHRpb25zKSB7XG4gICAgICBleHRlbmRTZWxlY3Rpb25zKHRoaXMsIG1hcCh0aGlzLnNlbC5yYW5nZXMsIGYpLCBvcHRpb25zKTtcbiAgICB9KSxcbiAgICBzZXRTZWxlY3Rpb25zOiBkb2NNZXRob2RPcChmdW5jdGlvbihyYW5nZXMsIHByaW1hcnksIG9wdGlvbnMpIHtcbiAgICAgIGlmICghcmFuZ2VzLmxlbmd0aCkgcmV0dXJuO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIG91dCA9IFtdOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKVxuICAgICAgICBvdXRbaV0gPSBuZXcgUmFuZ2UoY2xpcFBvcyh0aGlzLCByYW5nZXNbaV0uYW5jaG9yKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaXBQb3ModGhpcywgcmFuZ2VzW2ldLmhlYWQpKTtcbiAgICAgIGlmIChwcmltYXJ5ID09IG51bGwpIHByaW1hcnkgPSBNYXRoLm1pbihyYW5nZXMubGVuZ3RoIC0gMSwgdGhpcy5zZWwucHJpbUluZGV4KTtcbiAgICAgIHNldFNlbGVjdGlvbih0aGlzLCBub3JtYWxpemVTZWxlY3Rpb24ob3V0LCBwcmltYXJ5KSwgb3B0aW9ucyk7XG4gICAgfSksXG4gICAgYWRkU2VsZWN0aW9uOiBkb2NNZXRob2RPcChmdW5jdGlvbihhbmNob3IsIGhlYWQsIG9wdGlvbnMpIHtcbiAgICAgIHZhciByYW5nZXMgPSB0aGlzLnNlbC5yYW5nZXMuc2xpY2UoMCk7XG4gICAgICByYW5nZXMucHVzaChuZXcgUmFuZ2UoY2xpcFBvcyh0aGlzLCBhbmNob3IpLCBjbGlwUG9zKHRoaXMsIGhlYWQgfHwgYW5jaG9yKSkpO1xuICAgICAgc2V0U2VsZWN0aW9uKHRoaXMsIG5vcm1hbGl6ZVNlbGVjdGlvbihyYW5nZXMsIHJhbmdlcy5sZW5ndGggLSAxKSwgb3B0aW9ucyk7XG4gICAgfSksXG5cbiAgICBnZXRTZWxlY3Rpb246IGZ1bmN0aW9uKGxpbmVTZXApIHtcbiAgICAgIHZhciByYW5nZXMgPSB0aGlzLnNlbC5yYW5nZXMsIGxpbmVzO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHNlbCA9IGdldEJldHdlZW4odGhpcywgcmFuZ2VzW2ldLmZyb20oKSwgcmFuZ2VzW2ldLnRvKCkpO1xuICAgICAgICBsaW5lcyA9IGxpbmVzID8gbGluZXMuY29uY2F0KHNlbCkgOiBzZWw7XG4gICAgICB9XG4gICAgICBpZiAobGluZVNlcCA9PT0gZmFsc2UpIHJldHVybiBsaW5lcztcbiAgICAgIGVsc2UgcmV0dXJuIGxpbmVzLmpvaW4obGluZVNlcCB8fCB0aGlzLmxpbmVTZXBhcmF0b3IoKSk7XG4gICAgfSxcbiAgICBnZXRTZWxlY3Rpb25zOiBmdW5jdGlvbihsaW5lU2VwKSB7XG4gICAgICB2YXIgcGFydHMgPSBbXSwgcmFuZ2VzID0gdGhpcy5zZWwucmFuZ2VzO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHNlbCA9IGdldEJldHdlZW4odGhpcywgcmFuZ2VzW2ldLmZyb20oKSwgcmFuZ2VzW2ldLnRvKCkpO1xuICAgICAgICBpZiAobGluZVNlcCAhPT0gZmFsc2UpIHNlbCA9IHNlbC5qb2luKGxpbmVTZXAgfHwgdGhpcy5saW5lU2VwYXJhdG9yKCkpO1xuICAgICAgICBwYXJ0c1tpXSA9IHNlbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXJ0cztcbiAgICB9LFxuICAgIHJlcGxhY2VTZWxlY3Rpb246IGZ1bmN0aW9uKGNvZGUsIGNvbGxhcHNlLCBvcmlnaW4pIHtcbiAgICAgIHZhciBkdXAgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zZWwucmFuZ2VzLmxlbmd0aDsgaSsrKVxuICAgICAgICBkdXBbaV0gPSBjb2RlO1xuICAgICAgdGhpcy5yZXBsYWNlU2VsZWN0aW9ucyhkdXAsIGNvbGxhcHNlLCBvcmlnaW4gfHwgXCIraW5wdXRcIik7XG4gICAgfSxcbiAgICByZXBsYWNlU2VsZWN0aW9uczogZG9jTWV0aG9kT3AoZnVuY3Rpb24oY29kZSwgY29sbGFwc2UsIG9yaWdpbikge1xuICAgICAgdmFyIGNoYW5nZXMgPSBbXSwgc2VsID0gdGhpcy5zZWw7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbC5yYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHJhbmdlID0gc2VsLnJhbmdlc1tpXTtcbiAgICAgICAgY2hhbmdlc1tpXSA9IHtmcm9tOiByYW5nZS5mcm9tKCksIHRvOiByYW5nZS50bygpLCB0ZXh0OiB0aGlzLnNwbGl0TGluZXMoY29kZVtpXSksIG9yaWdpbjogb3JpZ2lufTtcbiAgICAgIH1cbiAgICAgIHZhciBuZXdTZWwgPSBjb2xsYXBzZSAmJiBjb2xsYXBzZSAhPSBcImVuZFwiICYmIGNvbXB1dGVSZXBsYWNlZFNlbCh0aGlzLCBjaGFuZ2VzLCBjb2xsYXBzZSk7XG4gICAgICBmb3IgKHZhciBpID0gY2hhbmdlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcbiAgICAgICAgbWFrZUNoYW5nZSh0aGlzLCBjaGFuZ2VzW2ldKTtcbiAgICAgIGlmIChuZXdTZWwpIHNldFNlbGVjdGlvblJlcGxhY2VIaXN0b3J5KHRoaXMsIG5ld1NlbCk7XG4gICAgICBlbHNlIGlmICh0aGlzLmNtKSBlbnN1cmVDdXJzb3JWaXNpYmxlKHRoaXMuY20pO1xuICAgIH0pLFxuICAgIHVuZG86IGRvY01ldGhvZE9wKGZ1bmN0aW9uKCkge21ha2VDaGFuZ2VGcm9tSGlzdG9yeSh0aGlzLCBcInVuZG9cIik7fSksXG4gICAgcmVkbzogZG9jTWV0aG9kT3AoZnVuY3Rpb24oKSB7bWFrZUNoYW5nZUZyb21IaXN0b3J5KHRoaXMsIFwicmVkb1wiKTt9KSxcbiAgICB1bmRvU2VsZWN0aW9uOiBkb2NNZXRob2RPcChmdW5jdGlvbigpIHttYWtlQ2hhbmdlRnJvbUhpc3RvcnkodGhpcywgXCJ1bmRvXCIsIHRydWUpO30pLFxuICAgIHJlZG9TZWxlY3Rpb246IGRvY01ldGhvZE9wKGZ1bmN0aW9uKCkge21ha2VDaGFuZ2VGcm9tSGlzdG9yeSh0aGlzLCBcInJlZG9cIiwgdHJ1ZSk7fSksXG5cbiAgICBzZXRFeHRlbmRpbmc6IGZ1bmN0aW9uKHZhbCkge3RoaXMuZXh0ZW5kID0gdmFsO30sXG4gICAgZ2V0RXh0ZW5kaW5nOiBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5leHRlbmQ7fSxcblxuICAgIGhpc3RvcnlTaXplOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBoaXN0ID0gdGhpcy5oaXN0b3J5LCBkb25lID0gMCwgdW5kb25lID0gMDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGlzdC5kb25lLmxlbmd0aDsgaSsrKSBpZiAoIWhpc3QuZG9uZVtpXS5yYW5nZXMpICsrZG9uZTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGlzdC51bmRvbmUubGVuZ3RoOyBpKyspIGlmICghaGlzdC51bmRvbmVbaV0ucmFuZ2VzKSArK3VuZG9uZTtcbiAgICAgIHJldHVybiB7dW5kbzogZG9uZSwgcmVkbzogdW5kb25lfTtcbiAgICB9LFxuICAgIGNsZWFySGlzdG9yeTogZnVuY3Rpb24oKSB7dGhpcy5oaXN0b3J5ID0gbmV3IEhpc3RvcnkodGhpcy5oaXN0b3J5Lm1heEdlbmVyYXRpb24pO30sXG5cbiAgICBtYXJrQ2xlYW46IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5jbGVhbkdlbmVyYXRpb24gPSB0aGlzLmNoYW5nZUdlbmVyYXRpb24odHJ1ZSk7XG4gICAgfSxcbiAgICBjaGFuZ2VHZW5lcmF0aW9uOiBmdW5jdGlvbihmb3JjZVNwbGl0KSB7XG4gICAgICBpZiAoZm9yY2VTcGxpdClcbiAgICAgICAgdGhpcy5oaXN0b3J5Lmxhc3RPcCA9IHRoaXMuaGlzdG9yeS5sYXN0U2VsT3AgPSB0aGlzLmhpc3RvcnkubGFzdE9yaWdpbiA9IG51bGw7XG4gICAgICByZXR1cm4gdGhpcy5oaXN0b3J5LmdlbmVyYXRpb247XG4gICAgfSxcbiAgICBpc0NsZWFuOiBmdW5jdGlvbiAoZ2VuKSB7XG4gICAgICByZXR1cm4gdGhpcy5oaXN0b3J5LmdlbmVyYXRpb24gPT0gKGdlbiB8fCB0aGlzLmNsZWFuR2VuZXJhdGlvbik7XG4gICAgfSxcblxuICAgIGdldEhpc3Rvcnk6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHtkb25lOiBjb3B5SGlzdG9yeUFycmF5KHRoaXMuaGlzdG9yeS5kb25lKSxcbiAgICAgICAgICAgICAgdW5kb25lOiBjb3B5SGlzdG9yeUFycmF5KHRoaXMuaGlzdG9yeS51bmRvbmUpfTtcbiAgICB9LFxuICAgIHNldEhpc3Rvcnk6IGZ1bmN0aW9uKGhpc3REYXRhKSB7XG4gICAgICB2YXIgaGlzdCA9IHRoaXMuaGlzdG9yeSA9IG5ldyBIaXN0b3J5KHRoaXMuaGlzdG9yeS5tYXhHZW5lcmF0aW9uKTtcbiAgICAgIGhpc3QuZG9uZSA9IGNvcHlIaXN0b3J5QXJyYXkoaGlzdERhdGEuZG9uZS5zbGljZSgwKSwgbnVsbCwgdHJ1ZSk7XG4gICAgICBoaXN0LnVuZG9uZSA9IGNvcHlIaXN0b3J5QXJyYXkoaGlzdERhdGEudW5kb25lLnNsaWNlKDApLCBudWxsLCB0cnVlKTtcbiAgICB9LFxuXG4gICAgYWRkTGluZUNsYXNzOiBkb2NNZXRob2RPcChmdW5jdGlvbihoYW5kbGUsIHdoZXJlLCBjbHMpIHtcbiAgICAgIHJldHVybiBjaGFuZ2VMaW5lKHRoaXMsIGhhbmRsZSwgd2hlcmUgPT0gXCJndXR0ZXJcIiA/IFwiZ3V0dGVyXCIgOiBcImNsYXNzXCIsIGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgdmFyIHByb3AgPSB3aGVyZSA9PSBcInRleHRcIiA/IFwidGV4dENsYXNzXCJcbiAgICAgICAgICAgICAgICAgOiB3aGVyZSA9PSBcImJhY2tncm91bmRcIiA/IFwiYmdDbGFzc1wiXG4gICAgICAgICAgICAgICAgIDogd2hlcmUgPT0gXCJndXR0ZXJcIiA/IFwiZ3V0dGVyQ2xhc3NcIiA6IFwid3JhcENsYXNzXCI7XG4gICAgICAgIGlmICghbGluZVtwcm9wXSkgbGluZVtwcm9wXSA9IGNscztcbiAgICAgICAgZWxzZSBpZiAoY2xhc3NUZXN0KGNscykudGVzdChsaW5lW3Byb3BdKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBlbHNlIGxpbmVbcHJvcF0gKz0gXCIgXCIgKyBjbHM7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG4gICAgfSksXG4gICAgcmVtb3ZlTGluZUNsYXNzOiBkb2NNZXRob2RPcChmdW5jdGlvbihoYW5kbGUsIHdoZXJlLCBjbHMpIHtcbiAgICAgIHJldHVybiBjaGFuZ2VMaW5lKHRoaXMsIGhhbmRsZSwgd2hlcmUgPT0gXCJndXR0ZXJcIiA/IFwiZ3V0dGVyXCIgOiBcImNsYXNzXCIsIGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgdmFyIHByb3AgPSB3aGVyZSA9PSBcInRleHRcIiA/IFwidGV4dENsYXNzXCJcbiAgICAgICAgICAgICAgICAgOiB3aGVyZSA9PSBcImJhY2tncm91bmRcIiA/IFwiYmdDbGFzc1wiXG4gICAgICAgICAgICAgICAgIDogd2hlcmUgPT0gXCJndXR0ZXJcIiA/IFwiZ3V0dGVyQ2xhc3NcIiA6IFwid3JhcENsYXNzXCI7XG4gICAgICAgIHZhciBjdXIgPSBsaW5lW3Byb3BdO1xuICAgICAgICBpZiAoIWN1cikgcmV0dXJuIGZhbHNlO1xuICAgICAgICBlbHNlIGlmIChjbHMgPT0gbnVsbCkgbGluZVtwcm9wXSA9IG51bGw7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHZhciBmb3VuZCA9IGN1ci5tYXRjaChjbGFzc1Rlc3QoY2xzKSk7XG4gICAgICAgICAgaWYgKCFmb3VuZCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIHZhciBlbmQgPSBmb3VuZC5pbmRleCArIGZvdW5kWzBdLmxlbmd0aDtcbiAgICAgICAgICBsaW5lW3Byb3BdID0gY3VyLnNsaWNlKDAsIGZvdW5kLmluZGV4KSArICghZm91bmQuaW5kZXggfHwgZW5kID09IGN1ci5sZW5ndGggPyBcIlwiIDogXCIgXCIpICsgY3VyLnNsaWNlKGVuZCkgfHwgbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pO1xuICAgIH0pLFxuXG4gICAgYWRkTGluZVdpZGdldDogZG9jTWV0aG9kT3AoZnVuY3Rpb24oaGFuZGxlLCBub2RlLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gYWRkTGluZVdpZGdldCh0aGlzLCBoYW5kbGUsIG5vZGUsIG9wdGlvbnMpO1xuICAgIH0pLFxuICAgIHJlbW92ZUxpbmVXaWRnZXQ6IGZ1bmN0aW9uKHdpZGdldCkgeyB3aWRnZXQuY2xlYXIoKTsgfSxcblxuICAgIG1hcmtUZXh0OiBmdW5jdGlvbihmcm9tLCB0bywgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIG1hcmtUZXh0KHRoaXMsIGNsaXBQb3ModGhpcywgZnJvbSksIGNsaXBQb3ModGhpcywgdG8pLCBvcHRpb25zLCBvcHRpb25zICYmIG9wdGlvbnMudHlwZSB8fCBcInJhbmdlXCIpO1xuICAgIH0sXG4gICAgc2V0Qm9va21hcms6IGZ1bmN0aW9uKHBvcywgb3B0aW9ucykge1xuICAgICAgdmFyIHJlYWxPcHRzID0ge3JlcGxhY2VkV2l0aDogb3B0aW9ucyAmJiAob3B0aW9ucy5ub2RlVHlwZSA9PSBudWxsID8gb3B0aW9ucy53aWRnZXQgOiBvcHRpb25zKSxcbiAgICAgICAgICAgICAgICAgICAgICBpbnNlcnRMZWZ0OiBvcHRpb25zICYmIG9wdGlvbnMuaW5zZXJ0TGVmdCxcbiAgICAgICAgICAgICAgICAgICAgICBjbGVhcldoZW5FbXB0eTogZmFsc2UsIHNoYXJlZDogb3B0aW9ucyAmJiBvcHRpb25zLnNoYXJlZCxcbiAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVNb3VzZUV2ZW50czogb3B0aW9ucyAmJiBvcHRpb25zLmhhbmRsZU1vdXNlRXZlbnRzfTtcbiAgICAgIHBvcyA9IGNsaXBQb3ModGhpcywgcG9zKTtcbiAgICAgIHJldHVybiBtYXJrVGV4dCh0aGlzLCBwb3MsIHBvcywgcmVhbE9wdHMsIFwiYm9va21hcmtcIik7XG4gICAgfSxcbiAgICBmaW5kTWFya3NBdDogZnVuY3Rpb24ocG9zKSB7XG4gICAgICBwb3MgPSBjbGlwUG9zKHRoaXMsIHBvcyk7XG4gICAgICB2YXIgbWFya2VycyA9IFtdLCBzcGFucyA9IGdldExpbmUodGhpcywgcG9zLmxpbmUpLm1hcmtlZFNwYW5zO1xuICAgICAgaWYgKHNwYW5zKSBmb3IgKHZhciBpID0gMDsgaSA8IHNwYW5zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBzcGFuID0gc3BhbnNbaV07XG4gICAgICAgIGlmICgoc3Bhbi5mcm9tID09IG51bGwgfHwgc3Bhbi5mcm9tIDw9IHBvcy5jaCkgJiZcbiAgICAgICAgICAgIChzcGFuLnRvID09IG51bGwgfHwgc3Bhbi50byA+PSBwb3MuY2gpKVxuICAgICAgICAgIG1hcmtlcnMucHVzaChzcGFuLm1hcmtlci5wYXJlbnQgfHwgc3Bhbi5tYXJrZXIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1hcmtlcnM7XG4gICAgfSxcbiAgICBmaW5kTWFya3M6IGZ1bmN0aW9uKGZyb20sIHRvLCBmaWx0ZXIpIHtcbiAgICAgIGZyb20gPSBjbGlwUG9zKHRoaXMsIGZyb20pOyB0byA9IGNsaXBQb3ModGhpcywgdG8pO1xuICAgICAgdmFyIGZvdW5kID0gW10sIGxpbmVObyA9IGZyb20ubGluZTtcbiAgICAgIHRoaXMuaXRlcihmcm9tLmxpbmUsIHRvLmxpbmUgKyAxLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgIHZhciBzcGFucyA9IGxpbmUubWFya2VkU3BhbnM7XG4gICAgICAgIGlmIChzcGFucykgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBzcGFuID0gc3BhbnNbaV07XG4gICAgICAgICAgaWYgKCEobGluZU5vID09IGZyb20ubGluZSAmJiBmcm9tLmNoID4gc3Bhbi50byB8fFxuICAgICAgICAgICAgICAgIHNwYW4uZnJvbSA9PSBudWxsICYmIGxpbmVObyAhPSBmcm9tLmxpbmV8fFxuICAgICAgICAgICAgICAgIGxpbmVObyA9PSB0by5saW5lICYmIHNwYW4uZnJvbSA+IHRvLmNoKSAmJlxuICAgICAgICAgICAgICAoIWZpbHRlciB8fCBmaWx0ZXIoc3Bhbi5tYXJrZXIpKSlcbiAgICAgICAgICAgIGZvdW5kLnB1c2goc3Bhbi5tYXJrZXIucGFyZW50IHx8IHNwYW4ubWFya2VyKTtcbiAgICAgICAgfVxuICAgICAgICArK2xpbmVObztcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZvdW5kO1xuICAgIH0sXG4gICAgZ2V0QWxsTWFya3M6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG1hcmtlcnMgPSBbXTtcbiAgICAgIHRoaXMuaXRlcihmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgIHZhciBzcHMgPSBsaW5lLm1hcmtlZFNwYW5zO1xuICAgICAgICBpZiAoc3BzKSBmb3IgKHZhciBpID0gMDsgaSA8IHNwcy5sZW5ndGg7ICsraSlcbiAgICAgICAgICBpZiAoc3BzW2ldLmZyb20gIT0gbnVsbCkgbWFya2Vycy5wdXNoKHNwc1tpXS5tYXJrZXIpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gbWFya2VycztcbiAgICB9LFxuXG4gICAgcG9zRnJvbUluZGV4OiBmdW5jdGlvbihvZmYpIHtcbiAgICAgIHZhciBjaCwgbGluZU5vID0gdGhpcy5maXJzdDtcbiAgICAgIHRoaXMuaXRlcihmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgIHZhciBzeiA9IGxpbmUudGV4dC5sZW5ndGggKyAxO1xuICAgICAgICBpZiAoc3ogPiBvZmYpIHsgY2ggPSBvZmY7IHJldHVybiB0cnVlOyB9XG4gICAgICAgIG9mZiAtPSBzejtcbiAgICAgICAgKytsaW5lTm87XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBjbGlwUG9zKHRoaXMsIFBvcyhsaW5lTm8sIGNoKSk7XG4gICAgfSxcbiAgICBpbmRleEZyb21Qb3M6IGZ1bmN0aW9uIChjb29yZHMpIHtcbiAgICAgIGNvb3JkcyA9IGNsaXBQb3ModGhpcywgY29vcmRzKTtcbiAgICAgIHZhciBpbmRleCA9IGNvb3Jkcy5jaDtcbiAgICAgIGlmIChjb29yZHMubGluZSA8IHRoaXMuZmlyc3QgfHwgY29vcmRzLmNoIDwgMCkgcmV0dXJuIDA7XG4gICAgICB0aGlzLml0ZXIodGhpcy5maXJzdCwgY29vcmRzLmxpbmUsIGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICAgIGluZGV4ICs9IGxpbmUudGV4dC5sZW5ndGggKyAxO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gaW5kZXg7XG4gICAgfSxcblxuICAgIGNvcHk6IGZ1bmN0aW9uKGNvcHlIaXN0b3J5KSB7XG4gICAgICB2YXIgZG9jID0gbmV3IERvYyhnZXRMaW5lcyh0aGlzLCB0aGlzLmZpcnN0LCB0aGlzLmZpcnN0ICsgdGhpcy5zaXplKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW9kZU9wdGlvbiwgdGhpcy5maXJzdCwgdGhpcy5saW5lU2VwKTtcbiAgICAgIGRvYy5zY3JvbGxUb3AgPSB0aGlzLnNjcm9sbFRvcDsgZG9jLnNjcm9sbExlZnQgPSB0aGlzLnNjcm9sbExlZnQ7XG4gICAgICBkb2Muc2VsID0gdGhpcy5zZWw7XG4gICAgICBkb2MuZXh0ZW5kID0gZmFsc2U7XG4gICAgICBpZiAoY29weUhpc3RvcnkpIHtcbiAgICAgICAgZG9jLmhpc3RvcnkudW5kb0RlcHRoID0gdGhpcy5oaXN0b3J5LnVuZG9EZXB0aDtcbiAgICAgICAgZG9jLnNldEhpc3RvcnkodGhpcy5nZXRIaXN0b3J5KCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRvYztcbiAgICB9LFxuXG4gICAgbGlua2VkRG9jOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBpZiAoIW9wdGlvbnMpIG9wdGlvbnMgPSB7fTtcbiAgICAgIHZhciBmcm9tID0gdGhpcy5maXJzdCwgdG8gPSB0aGlzLmZpcnN0ICsgdGhpcy5zaXplO1xuICAgICAgaWYgKG9wdGlvbnMuZnJvbSAhPSBudWxsICYmIG9wdGlvbnMuZnJvbSA+IGZyb20pIGZyb20gPSBvcHRpb25zLmZyb207XG4gICAgICBpZiAob3B0aW9ucy50byAhPSBudWxsICYmIG9wdGlvbnMudG8gPCB0bykgdG8gPSBvcHRpb25zLnRvO1xuICAgICAgdmFyIGNvcHkgPSBuZXcgRG9jKGdldExpbmVzKHRoaXMsIGZyb20sIHRvKSwgb3B0aW9ucy5tb2RlIHx8IHRoaXMubW9kZU9wdGlvbiwgZnJvbSwgdGhpcy5saW5lU2VwKTtcbiAgICAgIGlmIChvcHRpb25zLnNoYXJlZEhpc3QpIGNvcHkuaGlzdG9yeSA9IHRoaXMuaGlzdG9yeTtcbiAgICAgICh0aGlzLmxpbmtlZCB8fCAodGhpcy5saW5rZWQgPSBbXSkpLnB1c2goe2RvYzogY29weSwgc2hhcmVkSGlzdDogb3B0aW9ucy5zaGFyZWRIaXN0fSk7XG4gICAgICBjb3B5LmxpbmtlZCA9IFt7ZG9jOiB0aGlzLCBpc1BhcmVudDogdHJ1ZSwgc2hhcmVkSGlzdDogb3B0aW9ucy5zaGFyZWRIaXN0fV07XG4gICAgICBjb3B5U2hhcmVkTWFya2Vycyhjb3B5LCBmaW5kU2hhcmVkTWFya2Vycyh0aGlzKSk7XG4gICAgICByZXR1cm4gY29weTtcbiAgICB9LFxuICAgIHVubGlua0RvYzogZnVuY3Rpb24ob3RoZXIpIHtcbiAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIENvZGVNaXJyb3IpIG90aGVyID0gb3RoZXIuZG9jO1xuICAgICAgaWYgKHRoaXMubGlua2VkKSBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGlua2VkLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBsaW5rID0gdGhpcy5saW5rZWRbaV07XG4gICAgICAgIGlmIChsaW5rLmRvYyAhPSBvdGhlcikgY29udGludWU7XG4gICAgICAgIHRoaXMubGlua2VkLnNwbGljZShpLCAxKTtcbiAgICAgICAgb3RoZXIudW5saW5rRG9jKHRoaXMpO1xuICAgICAgICBkZXRhY2hTaGFyZWRNYXJrZXJzKGZpbmRTaGFyZWRNYXJrZXJzKHRoaXMpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvLyBJZiB0aGUgaGlzdG9yaWVzIHdlcmUgc2hhcmVkLCBzcGxpdCB0aGVtIGFnYWluXG4gICAgICBpZiAob3RoZXIuaGlzdG9yeSA9PSB0aGlzLmhpc3RvcnkpIHtcbiAgICAgICAgdmFyIHNwbGl0SWRzID0gW290aGVyLmlkXTtcbiAgICAgICAgbGlua2VkRG9jcyhvdGhlciwgZnVuY3Rpb24oZG9jKSB7c3BsaXRJZHMucHVzaChkb2MuaWQpO30sIHRydWUpO1xuICAgICAgICBvdGhlci5oaXN0b3J5ID0gbmV3IEhpc3RvcnkobnVsbCk7XG4gICAgICAgIG90aGVyLmhpc3RvcnkuZG9uZSA9IGNvcHlIaXN0b3J5QXJyYXkodGhpcy5oaXN0b3J5LmRvbmUsIHNwbGl0SWRzKTtcbiAgICAgICAgb3RoZXIuaGlzdG9yeS51bmRvbmUgPSBjb3B5SGlzdG9yeUFycmF5KHRoaXMuaGlzdG9yeS51bmRvbmUsIHNwbGl0SWRzKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGl0ZXJMaW5rZWREb2NzOiBmdW5jdGlvbihmKSB7bGlua2VkRG9jcyh0aGlzLCBmKTt9LFxuXG4gICAgZ2V0TW9kZTogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMubW9kZTt9LFxuICAgIGdldEVkaXRvcjogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuY207fSxcblxuICAgIHNwbGl0TGluZXM6IGZ1bmN0aW9uKHN0cikge1xuICAgICAgaWYgKHRoaXMubGluZVNlcCkgcmV0dXJuIHN0ci5zcGxpdCh0aGlzLmxpbmVTZXApO1xuICAgICAgcmV0dXJuIHNwbGl0TGluZXNBdXRvKHN0cik7XG4gICAgfSxcbiAgICBsaW5lU2VwYXJhdG9yOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMubGluZVNlcCB8fCBcIlxcblwiOyB9XG4gIH0pO1xuXG4gIC8vIFB1YmxpYyBhbGlhcy5cbiAgRG9jLnByb3RvdHlwZS5lYWNoTGluZSA9IERvYy5wcm90b3R5cGUuaXRlcjtcblxuICAvLyBTZXQgdXAgbWV0aG9kcyBvbiBDb2RlTWlycm9yJ3MgcHJvdG90eXBlIHRvIHJlZGlyZWN0IHRvIHRoZSBlZGl0b3IncyBkb2N1bWVudC5cbiAgdmFyIGRvbnREZWxlZ2F0ZSA9IFwiaXRlciBpbnNlcnQgcmVtb3ZlIGNvcHkgZ2V0RWRpdG9yIGNvbnN0cnVjdG9yXCIuc3BsaXQoXCIgXCIpO1xuICBmb3IgKHZhciBwcm9wIGluIERvYy5wcm90b3R5cGUpIGlmIChEb2MucHJvdG90eXBlLmhhc093blByb3BlcnR5KHByb3ApICYmIGluZGV4T2YoZG9udERlbGVnYXRlLCBwcm9wKSA8IDApXG4gICAgQ29kZU1pcnJvci5wcm90b3R5cGVbcHJvcF0gPSAoZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7cmV0dXJuIG1ldGhvZC5hcHBseSh0aGlzLmRvYywgYXJndW1lbnRzKTt9O1xuICAgIH0pKERvYy5wcm90b3R5cGVbcHJvcF0pO1xuXG4gIGV2ZW50TWl4aW4oRG9jKTtcblxuICAvLyBDYWxsIGYgZm9yIGFsbCBsaW5rZWQgZG9jdW1lbnRzLlxuICBmdW5jdGlvbiBsaW5rZWREb2NzKGRvYywgZiwgc2hhcmVkSGlzdE9ubHkpIHtcbiAgICBmdW5jdGlvbiBwcm9wYWdhdGUoZG9jLCBza2lwLCBzaGFyZWRIaXN0KSB7XG4gICAgICBpZiAoZG9jLmxpbmtlZCkgZm9yICh2YXIgaSA9IDA7IGkgPCBkb2MubGlua2VkLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciByZWwgPSBkb2MubGlua2VkW2ldO1xuICAgICAgICBpZiAocmVsLmRvYyA9PSBza2lwKSBjb250aW51ZTtcbiAgICAgICAgdmFyIHNoYXJlZCA9IHNoYXJlZEhpc3QgJiYgcmVsLnNoYXJlZEhpc3Q7XG4gICAgICAgIGlmIChzaGFyZWRIaXN0T25seSAmJiAhc2hhcmVkKSBjb250aW51ZTtcbiAgICAgICAgZihyZWwuZG9jLCBzaGFyZWQpO1xuICAgICAgICBwcm9wYWdhdGUocmVsLmRvYywgZG9jLCBzaGFyZWQpO1xuICAgICAgfVxuICAgIH1cbiAgICBwcm9wYWdhdGUoZG9jLCBudWxsLCB0cnVlKTtcbiAgfVxuXG4gIC8vIEF0dGFjaCBhIGRvY3VtZW50IHRvIGFuIGVkaXRvci5cbiAgZnVuY3Rpb24gYXR0YWNoRG9jKGNtLCBkb2MpIHtcbiAgICBpZiAoZG9jLmNtKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIGRvY3VtZW50IGlzIGFscmVhZHkgaW4gdXNlLlwiKTtcbiAgICBjbS5kb2MgPSBkb2M7XG4gICAgZG9jLmNtID0gY207XG4gICAgZXN0aW1hdGVMaW5lSGVpZ2h0cyhjbSk7XG4gICAgbG9hZE1vZGUoY20pO1xuICAgIGlmICghY20ub3B0aW9ucy5saW5lV3JhcHBpbmcpIGZpbmRNYXhMaW5lKGNtKTtcbiAgICBjbS5vcHRpb25zLm1vZGUgPSBkb2MubW9kZU9wdGlvbjtcbiAgICByZWdDaGFuZ2UoY20pO1xuICB9XG5cbiAgLy8gTElORSBVVElMSVRJRVNcblxuICAvLyBGaW5kIHRoZSBsaW5lIG9iamVjdCBjb3JyZXNwb25kaW5nIHRvIHRoZSBnaXZlbiBsaW5lIG51bWJlci5cbiAgZnVuY3Rpb24gZ2V0TGluZShkb2MsIG4pIHtcbiAgICBuIC09IGRvYy5maXJzdDtcbiAgICBpZiAobiA8IDAgfHwgbiA+PSBkb2Muc2l6ZSkgdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgaXMgbm8gbGluZSBcIiArIChuICsgZG9jLmZpcnN0KSArIFwiIGluIHRoZSBkb2N1bWVudC5cIik7XG4gICAgZm9yICh2YXIgY2h1bmsgPSBkb2M7ICFjaHVuay5saW5lczspIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOzsgKytpKSB7XG4gICAgICAgIHZhciBjaGlsZCA9IGNodW5rLmNoaWxkcmVuW2ldLCBzeiA9IGNoaWxkLmNodW5rU2l6ZSgpO1xuICAgICAgICBpZiAobiA8IHN6KSB7IGNodW5rID0gY2hpbGQ7IGJyZWFrOyB9XG4gICAgICAgIG4gLT0gc3o7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjaHVuay5saW5lc1tuXTtcbiAgfVxuXG4gIC8vIEdldCB0aGUgcGFydCBvZiBhIGRvY3VtZW50IGJldHdlZW4gdHdvIHBvc2l0aW9ucywgYXMgYW4gYXJyYXkgb2ZcbiAgLy8gc3RyaW5ncy5cbiAgZnVuY3Rpb24gZ2V0QmV0d2Vlbihkb2MsIHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgb3V0ID0gW10sIG4gPSBzdGFydC5saW5lO1xuICAgIGRvYy5pdGVyKHN0YXJ0LmxpbmUsIGVuZC5saW5lICsgMSwgZnVuY3Rpb24obGluZSkge1xuICAgICAgdmFyIHRleHQgPSBsaW5lLnRleHQ7XG4gICAgICBpZiAobiA9PSBlbmQubGluZSkgdGV4dCA9IHRleHQuc2xpY2UoMCwgZW5kLmNoKTtcbiAgICAgIGlmIChuID09IHN0YXJ0LmxpbmUpIHRleHQgPSB0ZXh0LnNsaWNlKHN0YXJ0LmNoKTtcbiAgICAgIG91dC5wdXNoKHRleHQpO1xuICAgICAgKytuO1xuICAgIH0pO1xuICAgIHJldHVybiBvdXQ7XG4gIH1cbiAgLy8gR2V0IHRoZSBsaW5lcyBiZXR3ZWVuIGZyb20gYW5kIHRvLCBhcyBhcnJheSBvZiBzdHJpbmdzLlxuICBmdW5jdGlvbiBnZXRMaW5lcyhkb2MsIGZyb20sIHRvKSB7XG4gICAgdmFyIG91dCA9IFtdO1xuICAgIGRvYy5pdGVyKGZyb20sIHRvLCBmdW5jdGlvbihsaW5lKSB7IG91dC5wdXNoKGxpbmUudGV4dCk7IH0pO1xuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICAvLyBVcGRhdGUgdGhlIGhlaWdodCBvZiBhIGxpbmUsIHByb3BhZ2F0aW5nIHRoZSBoZWlnaHQgY2hhbmdlXG4gIC8vIHVwd2FyZHMgdG8gcGFyZW50IG5vZGVzLlxuICBmdW5jdGlvbiB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIGhlaWdodCkge1xuICAgIHZhciBkaWZmID0gaGVpZ2h0IC0gbGluZS5oZWlnaHQ7XG4gICAgaWYgKGRpZmYpIGZvciAodmFyIG4gPSBsaW5lOyBuOyBuID0gbi5wYXJlbnQpIG4uaGVpZ2h0ICs9IGRpZmY7XG4gIH1cblxuICAvLyBHaXZlbiBhIGxpbmUgb2JqZWN0LCBmaW5kIGl0cyBsaW5lIG51bWJlciBieSB3YWxraW5nIHVwIHRocm91Z2hcbiAgLy8gaXRzIHBhcmVudCBsaW5rcy5cbiAgZnVuY3Rpb24gbGluZU5vKGxpbmUpIHtcbiAgICBpZiAobGluZS5wYXJlbnQgPT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gICAgdmFyIGN1ciA9IGxpbmUucGFyZW50LCBubyA9IGluZGV4T2YoY3VyLmxpbmVzLCBsaW5lKTtcbiAgICBmb3IgKHZhciBjaHVuayA9IGN1ci5wYXJlbnQ7IGNodW5rOyBjdXIgPSBjaHVuaywgY2h1bmsgPSBjaHVuay5wYXJlbnQpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOzsgKytpKSB7XG4gICAgICAgIGlmIChjaHVuay5jaGlsZHJlbltpXSA9PSBjdXIpIGJyZWFrO1xuICAgICAgICBubyArPSBjaHVuay5jaGlsZHJlbltpXS5jaHVua1NpemUoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vICsgY3VyLmZpcnN0O1xuICB9XG5cbiAgLy8gRmluZCB0aGUgbGluZSBhdCB0aGUgZ2l2ZW4gdmVydGljYWwgcG9zaXRpb24sIHVzaW5nIHRoZSBoZWlnaHRcbiAgLy8gaW5mb3JtYXRpb24gaW4gdGhlIGRvY3VtZW50IHRyZWUuXG4gIGZ1bmN0aW9uIGxpbmVBdEhlaWdodChjaHVuaywgaCkge1xuICAgIHZhciBuID0gY2h1bmsuZmlyc3Q7XG4gICAgb3V0ZXI6IGRvIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2h1bmsuY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGNoaWxkID0gY2h1bmsuY2hpbGRyZW5baV0sIGNoID0gY2hpbGQuaGVpZ2h0O1xuICAgICAgICBpZiAoaCA8IGNoKSB7IGNodW5rID0gY2hpbGQ7IGNvbnRpbnVlIG91dGVyOyB9XG4gICAgICAgIGggLT0gY2g7XG4gICAgICAgIG4gKz0gY2hpbGQuY2h1bmtTaXplKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbjtcbiAgICB9IHdoaWxlICghY2h1bmsubGluZXMpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2h1bmsubGluZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBsaW5lID0gY2h1bmsubGluZXNbaV0sIGxoID0gbGluZS5oZWlnaHQ7XG4gICAgICBpZiAoaCA8IGxoKSBicmVhaztcbiAgICAgIGggLT0gbGg7XG4gICAgfVxuICAgIHJldHVybiBuICsgaTtcbiAgfVxuXG5cbiAgLy8gRmluZCB0aGUgaGVpZ2h0IGFib3ZlIHRoZSBnaXZlbiBsaW5lLlxuICBmdW5jdGlvbiBoZWlnaHRBdExpbmUobGluZU9iaikge1xuICAgIGxpbmVPYmogPSB2aXN1YWxMaW5lKGxpbmVPYmopO1xuXG4gICAgdmFyIGggPSAwLCBjaHVuayA9IGxpbmVPYmoucGFyZW50O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2h1bmsubGluZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBsaW5lID0gY2h1bmsubGluZXNbaV07XG4gICAgICBpZiAobGluZSA9PSBsaW5lT2JqKSBicmVhaztcbiAgICAgIGVsc2UgaCArPSBsaW5lLmhlaWdodDtcbiAgICB9XG4gICAgZm9yICh2YXIgcCA9IGNodW5rLnBhcmVudDsgcDsgY2h1bmsgPSBwLCBwID0gY2h1bmsucGFyZW50KSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHAuY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGN1ciA9IHAuY2hpbGRyZW5baV07XG4gICAgICAgIGlmIChjdXIgPT0gY2h1bmspIGJyZWFrO1xuICAgICAgICBlbHNlIGggKz0gY3VyLmhlaWdodDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGg7XG4gIH1cblxuICAvLyBHZXQgdGhlIGJpZGkgb3JkZXJpbmcgZm9yIHRoZSBnaXZlbiBsaW5lIChhbmQgY2FjaGUgaXQpLiBSZXR1cm5zXG4gIC8vIGZhbHNlIGZvciBsaW5lcyB0aGF0IGFyZSBmdWxseSBsZWZ0LXRvLXJpZ2h0LCBhbmQgYW4gYXJyYXkgb2ZcbiAgLy8gQmlkaVNwYW4gb2JqZWN0cyBvdGhlcndpc2UuXG4gIGZ1bmN0aW9uIGdldE9yZGVyKGxpbmUpIHtcbiAgICB2YXIgb3JkZXIgPSBsaW5lLm9yZGVyO1xuICAgIGlmIChvcmRlciA9PSBudWxsKSBvcmRlciA9IGxpbmUub3JkZXIgPSBiaWRpT3JkZXJpbmcobGluZS50ZXh0KTtcbiAgICByZXR1cm4gb3JkZXI7XG4gIH1cblxuICAvLyBISVNUT1JZXG5cbiAgZnVuY3Rpb24gSGlzdG9yeShzdGFydEdlbikge1xuICAgIC8vIEFycmF5cyBvZiBjaGFuZ2UgZXZlbnRzIGFuZCBzZWxlY3Rpb25zLiBEb2luZyBzb21ldGhpbmcgYWRkcyBhblxuICAgIC8vIGV2ZW50IHRvIGRvbmUgYW5kIGNsZWFycyB1bmRvLiBVbmRvaW5nIG1vdmVzIGV2ZW50cyBmcm9tIGRvbmVcbiAgICAvLyB0byB1bmRvbmUsIHJlZG9pbmcgbW92ZXMgdGhlbSBpbiB0aGUgb3RoZXIgZGlyZWN0aW9uLlxuICAgIHRoaXMuZG9uZSA9IFtdOyB0aGlzLnVuZG9uZSA9IFtdO1xuICAgIHRoaXMudW5kb0RlcHRoID0gSW5maW5pdHk7XG4gICAgLy8gVXNlZCB0byB0cmFjayB3aGVuIGNoYW5nZXMgY2FuIGJlIG1lcmdlZCBpbnRvIGEgc2luZ2xlIHVuZG9cbiAgICAvLyBldmVudFxuICAgIHRoaXMubGFzdE1vZFRpbWUgPSB0aGlzLmxhc3RTZWxUaW1lID0gMDtcbiAgICB0aGlzLmxhc3RPcCA9IHRoaXMubGFzdFNlbE9wID0gbnVsbDtcbiAgICB0aGlzLmxhc3RPcmlnaW4gPSB0aGlzLmxhc3RTZWxPcmlnaW4gPSBudWxsO1xuICAgIC8vIFVzZWQgYnkgdGhlIGlzQ2xlYW4oKSBtZXRob2RcbiAgICB0aGlzLmdlbmVyYXRpb24gPSB0aGlzLm1heEdlbmVyYXRpb24gPSBzdGFydEdlbiB8fCAxO1xuICB9XG5cbiAgLy8gQ3JlYXRlIGEgaGlzdG9yeSBjaGFuZ2UgZXZlbnQgZnJvbSBhbiB1cGRhdGVEb2Mtc3R5bGUgY2hhbmdlXG4gIC8vIG9iamVjdC5cbiAgZnVuY3Rpb24gaGlzdG9yeUNoYW5nZUZyb21DaGFuZ2UoZG9jLCBjaGFuZ2UpIHtcbiAgICB2YXIgaGlzdENoYW5nZSA9IHtmcm9tOiBjb3B5UG9zKGNoYW5nZS5mcm9tKSwgdG86IGNoYW5nZUVuZChjaGFuZ2UpLCB0ZXh0OiBnZXRCZXR3ZWVuKGRvYywgY2hhbmdlLmZyb20sIGNoYW5nZS50byl9O1xuICAgIGF0dGFjaExvY2FsU3BhbnMoZG9jLCBoaXN0Q2hhbmdlLCBjaGFuZ2UuZnJvbS5saW5lLCBjaGFuZ2UudG8ubGluZSArIDEpO1xuICAgIGxpbmtlZERvY3MoZG9jLCBmdW5jdGlvbihkb2MpIHthdHRhY2hMb2NhbFNwYW5zKGRvYywgaGlzdENoYW5nZSwgY2hhbmdlLmZyb20ubGluZSwgY2hhbmdlLnRvLmxpbmUgKyAxKTt9LCB0cnVlKTtcbiAgICByZXR1cm4gaGlzdENoYW5nZTtcbiAgfVxuXG4gIC8vIFBvcCBhbGwgc2VsZWN0aW9uIGV2ZW50cyBvZmYgdGhlIGVuZCBvZiBhIGhpc3RvcnkgYXJyYXkuIFN0b3AgYXRcbiAgLy8gYSBjaGFuZ2UgZXZlbnQuXG4gIGZ1bmN0aW9uIGNsZWFyU2VsZWN0aW9uRXZlbnRzKGFycmF5KSB7XG4gICAgd2hpbGUgKGFycmF5Lmxlbmd0aCkge1xuICAgICAgdmFyIGxhc3QgPSBsc3QoYXJyYXkpO1xuICAgICAgaWYgKGxhc3QucmFuZ2VzKSBhcnJheS5wb3AoKTtcbiAgICAgIGVsc2UgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLy8gRmluZCB0aGUgdG9wIGNoYW5nZSBldmVudCBpbiB0aGUgaGlzdG9yeS4gUG9wIG9mZiBzZWxlY3Rpb25cbiAgLy8gZXZlbnRzIHRoYXQgYXJlIGluIHRoZSB3YXkuXG4gIGZ1bmN0aW9uIGxhc3RDaGFuZ2VFdmVudChoaXN0LCBmb3JjZSkge1xuICAgIGlmIChmb3JjZSkge1xuICAgICAgY2xlYXJTZWxlY3Rpb25FdmVudHMoaGlzdC5kb25lKTtcbiAgICAgIHJldHVybiBsc3QoaGlzdC5kb25lKTtcbiAgICB9IGVsc2UgaWYgKGhpc3QuZG9uZS5sZW5ndGggJiYgIWxzdChoaXN0LmRvbmUpLnJhbmdlcykge1xuICAgICAgcmV0dXJuIGxzdChoaXN0LmRvbmUpO1xuICAgIH0gZWxzZSBpZiAoaGlzdC5kb25lLmxlbmd0aCA+IDEgJiYgIWhpc3QuZG9uZVtoaXN0LmRvbmUubGVuZ3RoIC0gMl0ucmFuZ2VzKSB7XG4gICAgICBoaXN0LmRvbmUucG9wKCk7XG4gICAgICByZXR1cm4gbHN0KGhpc3QuZG9uZSk7XG4gICAgfVxuICB9XG5cbiAgLy8gUmVnaXN0ZXIgYSBjaGFuZ2UgaW4gdGhlIGhpc3RvcnkuIE1lcmdlcyBjaGFuZ2VzIHRoYXQgYXJlIHdpdGhpblxuICAvLyBhIHNpbmdsZSBvcGVyYXRpb24sIG9yZSBhcmUgY2xvc2UgdG9nZXRoZXIgd2l0aCBhbiBvcmlnaW4gdGhhdFxuICAvLyBhbGxvd3MgbWVyZ2luZyAoc3RhcnRpbmcgd2l0aCBcIitcIikgaW50byBhIHNpbmdsZSBldmVudC5cbiAgZnVuY3Rpb24gYWRkQ2hhbmdlVG9IaXN0b3J5KGRvYywgY2hhbmdlLCBzZWxBZnRlciwgb3BJZCkge1xuICAgIHZhciBoaXN0ID0gZG9jLmhpc3Rvcnk7XG4gICAgaGlzdC51bmRvbmUubGVuZ3RoID0gMDtcbiAgICB2YXIgdGltZSA9ICtuZXcgRGF0ZSwgY3VyO1xuXG4gICAgaWYgKChoaXN0Lmxhc3RPcCA9PSBvcElkIHx8XG4gICAgICAgICBoaXN0Lmxhc3RPcmlnaW4gPT0gY2hhbmdlLm9yaWdpbiAmJiBjaGFuZ2Uub3JpZ2luICYmXG4gICAgICAgICAoKGNoYW5nZS5vcmlnaW4uY2hhckF0KDApID09IFwiK1wiICYmIGRvYy5jbSAmJiBoaXN0Lmxhc3RNb2RUaW1lID4gdGltZSAtIGRvYy5jbS5vcHRpb25zLmhpc3RvcnlFdmVudERlbGF5KSB8fFxuICAgICAgICAgIGNoYW5nZS5vcmlnaW4uY2hhckF0KDApID09IFwiKlwiKSkgJiZcbiAgICAgICAgKGN1ciA9IGxhc3RDaGFuZ2VFdmVudChoaXN0LCBoaXN0Lmxhc3RPcCA9PSBvcElkKSkpIHtcbiAgICAgIC8vIE1lcmdlIHRoaXMgY2hhbmdlIGludG8gdGhlIGxhc3QgZXZlbnRcbiAgICAgIHZhciBsYXN0ID0gbHN0KGN1ci5jaGFuZ2VzKTtcbiAgICAgIGlmIChjbXAoY2hhbmdlLmZyb20sIGNoYW5nZS50bykgPT0gMCAmJiBjbXAoY2hhbmdlLmZyb20sIGxhc3QudG8pID09IDApIHtcbiAgICAgICAgLy8gT3B0aW1pemVkIGNhc2UgZm9yIHNpbXBsZSBpbnNlcnRpb24gLS0gZG9uJ3Qgd2FudCB0byBhZGRcbiAgICAgICAgLy8gbmV3IGNoYW5nZXNldHMgZm9yIGV2ZXJ5IGNoYXJhY3RlciB0eXBlZFxuICAgICAgICBsYXN0LnRvID0gY2hhbmdlRW5kKGNoYW5nZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBBZGQgbmV3IHN1Yi1ldmVudFxuICAgICAgICBjdXIuY2hhbmdlcy5wdXNoKGhpc3RvcnlDaGFuZ2VGcm9tQ2hhbmdlKGRvYywgY2hhbmdlKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENhbiBub3QgYmUgbWVyZ2VkLCBzdGFydCBhIG5ldyBldmVudC5cbiAgICAgIHZhciBiZWZvcmUgPSBsc3QoaGlzdC5kb25lKTtcbiAgICAgIGlmICghYmVmb3JlIHx8ICFiZWZvcmUucmFuZ2VzKVxuICAgICAgICBwdXNoU2VsZWN0aW9uVG9IaXN0b3J5KGRvYy5zZWwsIGhpc3QuZG9uZSk7XG4gICAgICBjdXIgPSB7Y2hhbmdlczogW2hpc3RvcnlDaGFuZ2VGcm9tQ2hhbmdlKGRvYywgY2hhbmdlKV0sXG4gICAgICAgICAgICAgZ2VuZXJhdGlvbjogaGlzdC5nZW5lcmF0aW9ufTtcbiAgICAgIGhpc3QuZG9uZS5wdXNoKGN1cik7XG4gICAgICB3aGlsZSAoaGlzdC5kb25lLmxlbmd0aCA+IGhpc3QudW5kb0RlcHRoKSB7XG4gICAgICAgIGhpc3QuZG9uZS5zaGlmdCgpO1xuICAgICAgICBpZiAoIWhpc3QuZG9uZVswXS5yYW5nZXMpIGhpc3QuZG9uZS5zaGlmdCgpO1xuICAgICAgfVxuICAgIH1cbiAgICBoaXN0LmRvbmUucHVzaChzZWxBZnRlcik7XG4gICAgaGlzdC5nZW5lcmF0aW9uID0gKytoaXN0Lm1heEdlbmVyYXRpb247XG4gICAgaGlzdC5sYXN0TW9kVGltZSA9IGhpc3QubGFzdFNlbFRpbWUgPSB0aW1lO1xuICAgIGhpc3QubGFzdE9wID0gaGlzdC5sYXN0U2VsT3AgPSBvcElkO1xuICAgIGhpc3QubGFzdE9yaWdpbiA9IGhpc3QubGFzdFNlbE9yaWdpbiA9IGNoYW5nZS5vcmlnaW47XG5cbiAgICBpZiAoIWxhc3QpIHNpZ25hbChkb2MsIFwiaGlzdG9yeUFkZGVkXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2VsZWN0aW9uRXZlbnRDYW5CZU1lcmdlZChkb2MsIG9yaWdpbiwgcHJldiwgc2VsKSB7XG4gICAgdmFyIGNoID0gb3JpZ2luLmNoYXJBdCgwKTtcbiAgICByZXR1cm4gY2ggPT0gXCIqXCIgfHxcbiAgICAgIGNoID09IFwiK1wiICYmXG4gICAgICBwcmV2LnJhbmdlcy5sZW5ndGggPT0gc2VsLnJhbmdlcy5sZW5ndGggJiZcbiAgICAgIHByZXYuc29tZXRoaW5nU2VsZWN0ZWQoKSA9PSBzZWwuc29tZXRoaW5nU2VsZWN0ZWQoKSAmJlxuICAgICAgbmV3IERhdGUgLSBkb2MuaGlzdG9yeS5sYXN0U2VsVGltZSA8PSAoZG9jLmNtID8gZG9jLmNtLm9wdGlvbnMuaGlzdG9yeUV2ZW50RGVsYXkgOiA1MDApO1xuICB9XG5cbiAgLy8gQ2FsbGVkIHdoZW5ldmVyIHRoZSBzZWxlY3Rpb24gY2hhbmdlcywgc2V0cyB0aGUgbmV3IHNlbGVjdGlvbiBhc1xuICAvLyB0aGUgcGVuZGluZyBzZWxlY3Rpb24gaW4gdGhlIGhpc3RvcnksIGFuZCBwdXNoZXMgdGhlIG9sZCBwZW5kaW5nXG4gIC8vIHNlbGVjdGlvbiBpbnRvIHRoZSAnZG9uZScgYXJyYXkgd2hlbiBpdCB3YXMgc2lnbmlmaWNhbnRseVxuICAvLyBkaWZmZXJlbnQgKGluIG51bWJlciBvZiBzZWxlY3RlZCByYW5nZXMsIGVtcHRpbmVzcywgb3IgdGltZSkuXG4gIGZ1bmN0aW9uIGFkZFNlbGVjdGlvblRvSGlzdG9yeShkb2MsIHNlbCwgb3BJZCwgb3B0aW9ucykge1xuICAgIHZhciBoaXN0ID0gZG9jLmhpc3RvcnksIG9yaWdpbiA9IG9wdGlvbnMgJiYgb3B0aW9ucy5vcmlnaW47XG5cbiAgICAvLyBBIG5ldyBldmVudCBpcyBzdGFydGVkIHdoZW4gdGhlIHByZXZpb3VzIG9yaWdpbiBkb2VzIG5vdCBtYXRjaFxuICAgIC8vIHRoZSBjdXJyZW50LCBvciB0aGUgb3JpZ2lucyBkb24ndCBhbGxvdyBtYXRjaGluZy4gT3JpZ2luc1xuICAgIC8vIHN0YXJ0aW5nIHdpdGggKiBhcmUgYWx3YXlzIG1lcmdlZCwgdGhvc2Ugc3RhcnRpbmcgd2l0aCArIGFyZVxuICAgIC8vIG1lcmdlZCB3aGVuIHNpbWlsYXIgYW5kIGNsb3NlIHRvZ2V0aGVyIGluIHRpbWUuXG4gICAgaWYgKG9wSWQgPT0gaGlzdC5sYXN0U2VsT3AgfHxcbiAgICAgICAgKG9yaWdpbiAmJiBoaXN0Lmxhc3RTZWxPcmlnaW4gPT0gb3JpZ2luICYmXG4gICAgICAgICAoaGlzdC5sYXN0TW9kVGltZSA9PSBoaXN0Lmxhc3RTZWxUaW1lICYmIGhpc3QubGFzdE9yaWdpbiA9PSBvcmlnaW4gfHxcbiAgICAgICAgICBzZWxlY3Rpb25FdmVudENhbkJlTWVyZ2VkKGRvYywgb3JpZ2luLCBsc3QoaGlzdC5kb25lKSwgc2VsKSkpKVxuICAgICAgaGlzdC5kb25lW2hpc3QuZG9uZS5sZW5ndGggLSAxXSA9IHNlbDtcbiAgICBlbHNlXG4gICAgICBwdXNoU2VsZWN0aW9uVG9IaXN0b3J5KHNlbCwgaGlzdC5kb25lKTtcblxuICAgIGhpc3QubGFzdFNlbFRpbWUgPSArbmV3IERhdGU7XG4gICAgaGlzdC5sYXN0U2VsT3JpZ2luID0gb3JpZ2luO1xuICAgIGhpc3QubGFzdFNlbE9wID0gb3BJZDtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmNsZWFyUmVkbyAhPT0gZmFsc2UpXG4gICAgICBjbGVhclNlbGVjdGlvbkV2ZW50cyhoaXN0LnVuZG9uZSk7XG4gIH1cblxuICBmdW5jdGlvbiBwdXNoU2VsZWN0aW9uVG9IaXN0b3J5KHNlbCwgZGVzdCkge1xuICAgIHZhciB0b3AgPSBsc3QoZGVzdCk7XG4gICAgaWYgKCEodG9wICYmIHRvcC5yYW5nZXMgJiYgdG9wLmVxdWFscyhzZWwpKSlcbiAgICAgIGRlc3QucHVzaChzZWwpO1xuICB9XG5cbiAgLy8gVXNlZCB0byBzdG9yZSBtYXJrZWQgc3BhbiBpbmZvcm1hdGlvbiBpbiB0aGUgaGlzdG9yeS5cbiAgZnVuY3Rpb24gYXR0YWNoTG9jYWxTcGFucyhkb2MsIGNoYW5nZSwgZnJvbSwgdG8pIHtcbiAgICB2YXIgZXhpc3RpbmcgPSBjaGFuZ2VbXCJzcGFuc19cIiArIGRvYy5pZF0sIG4gPSAwO1xuICAgIGRvYy5pdGVyKE1hdGgubWF4KGRvYy5maXJzdCwgZnJvbSksIE1hdGgubWluKGRvYy5maXJzdCArIGRvYy5zaXplLCB0byksIGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIGlmIChsaW5lLm1hcmtlZFNwYW5zKVxuICAgICAgICAoZXhpc3RpbmcgfHwgKGV4aXN0aW5nID0gY2hhbmdlW1wic3BhbnNfXCIgKyBkb2MuaWRdID0ge30pKVtuXSA9IGxpbmUubWFya2VkU3BhbnM7XG4gICAgICArK247XG4gICAgfSk7XG4gIH1cblxuICAvLyBXaGVuIHVuL3JlLWRvaW5nIHJlc3RvcmVzIHRleHQgY29udGFpbmluZyBtYXJrZWQgc3BhbnMsIHRob3NlXG4gIC8vIHRoYXQgaGF2ZSBiZWVuIGV4cGxpY2l0bHkgY2xlYXJlZCBzaG91bGQgbm90IGJlIHJlc3RvcmVkLlxuICBmdW5jdGlvbiByZW1vdmVDbGVhcmVkU3BhbnMoc3BhbnMpIHtcbiAgICBpZiAoIXNwYW5zKSByZXR1cm4gbnVsbDtcbiAgICBmb3IgKHZhciBpID0gMCwgb3V0OyBpIDwgc3BhbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgIGlmIChzcGFuc1tpXS5tYXJrZXIuZXhwbGljaXRseUNsZWFyZWQpIHsgaWYgKCFvdXQpIG91dCA9IHNwYW5zLnNsaWNlKDAsIGkpOyB9XG4gICAgICBlbHNlIGlmIChvdXQpIG91dC5wdXNoKHNwYW5zW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuICFvdXQgPyBzcGFucyA6IG91dC5sZW5ndGggPyBvdXQgOiBudWxsO1xuICB9XG5cbiAgLy8gUmV0cmlldmUgYW5kIGZpbHRlciB0aGUgb2xkIG1hcmtlZCBzcGFucyBzdG9yZWQgaW4gYSBjaGFuZ2UgZXZlbnQuXG4gIGZ1bmN0aW9uIGdldE9sZFNwYW5zKGRvYywgY2hhbmdlKSB7XG4gICAgdmFyIGZvdW5kID0gY2hhbmdlW1wic3BhbnNfXCIgKyBkb2MuaWRdO1xuICAgIGlmICghZm91bmQpIHJldHVybiBudWxsO1xuICAgIGZvciAodmFyIGkgPSAwLCBudyA9IFtdOyBpIDwgY2hhbmdlLnRleHQubGVuZ3RoOyArK2kpXG4gICAgICBudy5wdXNoKHJlbW92ZUNsZWFyZWRTcGFucyhmb3VuZFtpXSkpO1xuICAgIHJldHVybiBudztcbiAgfVxuXG4gIC8vIFVzZWQgYm90aCB0byBwcm92aWRlIGEgSlNPTi1zYWZlIG9iamVjdCBpbiAuZ2V0SGlzdG9yeSwgYW5kLCB3aGVuXG4gIC8vIGRldGFjaGluZyBhIGRvY3VtZW50LCB0byBzcGxpdCB0aGUgaGlzdG9yeSBpbiB0d29cbiAgZnVuY3Rpb24gY29weUhpc3RvcnlBcnJheShldmVudHMsIG5ld0dyb3VwLCBpbnN0YW50aWF0ZVNlbCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBjb3B5ID0gW107IGkgPCBldmVudHMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBldmVudCA9IGV2ZW50c1tpXTtcbiAgICAgIGlmIChldmVudC5yYW5nZXMpIHtcbiAgICAgICAgY29weS5wdXNoKGluc3RhbnRpYXRlU2VsID8gU2VsZWN0aW9uLnByb3RvdHlwZS5kZWVwQ29weS5jYWxsKGV2ZW50KSA6IGV2ZW50KTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgY2hhbmdlcyA9IGV2ZW50LmNoYW5nZXMsIG5ld0NoYW5nZXMgPSBbXTtcbiAgICAgIGNvcHkucHVzaCh7Y2hhbmdlczogbmV3Q2hhbmdlc30pO1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjaGFuZ2VzLmxlbmd0aDsgKytqKSB7XG4gICAgICAgIHZhciBjaGFuZ2UgPSBjaGFuZ2VzW2pdLCBtO1xuICAgICAgICBuZXdDaGFuZ2VzLnB1c2goe2Zyb206IGNoYW5nZS5mcm9tLCB0bzogY2hhbmdlLnRvLCB0ZXh0OiBjaGFuZ2UudGV4dH0pO1xuICAgICAgICBpZiAobmV3R3JvdXApIGZvciAodmFyIHByb3AgaW4gY2hhbmdlKSBpZiAobSA9IHByb3AubWF0Y2goL15zcGFuc18oXFxkKykkLykpIHtcbiAgICAgICAgICBpZiAoaW5kZXhPZihuZXdHcm91cCwgTnVtYmVyKG1bMV0pKSA+IC0xKSB7XG4gICAgICAgICAgICBsc3QobmV3Q2hhbmdlcylbcHJvcF0gPSBjaGFuZ2VbcHJvcF07XG4gICAgICAgICAgICBkZWxldGUgY2hhbmdlW3Byb3BdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29weTtcbiAgfVxuXG4gIC8vIFJlYmFzaW5nL3Jlc2V0dGluZyBoaXN0b3J5IHRvIGRlYWwgd2l0aCBleHRlcm5hbGx5LXNvdXJjZWQgY2hhbmdlc1xuXG4gIGZ1bmN0aW9uIHJlYmFzZUhpc3RTZWxTaW5nbGUocG9zLCBmcm9tLCB0bywgZGlmZikge1xuICAgIGlmICh0byA8IHBvcy5saW5lKSB7XG4gICAgICBwb3MubGluZSArPSBkaWZmO1xuICAgIH0gZWxzZSBpZiAoZnJvbSA8IHBvcy5saW5lKSB7XG4gICAgICBwb3MubGluZSA9IGZyb207XG4gICAgICBwb3MuY2ggPSAwO1xuICAgIH1cbiAgfVxuXG4gIC8vIFRyaWVzIHRvIHJlYmFzZSBhbiBhcnJheSBvZiBoaXN0b3J5IGV2ZW50cyBnaXZlbiBhIGNoYW5nZSBpbiB0aGVcbiAgLy8gZG9jdW1lbnQuIElmIHRoZSBjaGFuZ2UgdG91Y2hlcyB0aGUgc2FtZSBsaW5lcyBhcyB0aGUgZXZlbnQsIHRoZVxuICAvLyBldmVudCwgYW5kIGV2ZXJ5dGhpbmcgJ2JlaGluZCcgaXQsIGlzIGRpc2NhcmRlZC4gSWYgdGhlIGNoYW5nZSBpc1xuICAvLyBiZWZvcmUgdGhlIGV2ZW50LCB0aGUgZXZlbnQncyBwb3NpdGlvbnMgYXJlIHVwZGF0ZWQuIFVzZXMgYVxuICAvLyBjb3B5LW9uLXdyaXRlIHNjaGVtZSBmb3IgdGhlIHBvc2l0aW9ucywgdG8gYXZvaWQgaGF2aW5nIHRvXG4gIC8vIHJlYWxsb2NhdGUgdGhlbSBhbGwgb24gZXZlcnkgcmViYXNlLCBidXQgYWxzbyBhdm9pZCBwcm9ibGVtcyB3aXRoXG4gIC8vIHNoYXJlZCBwb3NpdGlvbiBvYmplY3RzIGJlaW5nIHVuc2FmZWx5IHVwZGF0ZWQuXG4gIGZ1bmN0aW9uIHJlYmFzZUhpc3RBcnJheShhcnJheSwgZnJvbSwgdG8sIGRpZmYpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgc3ViID0gYXJyYXlbaV0sIG9rID0gdHJ1ZTtcbiAgICAgIGlmIChzdWIucmFuZ2VzKSB7XG4gICAgICAgIGlmICghc3ViLmNvcGllZCkgeyBzdWIgPSBhcnJheVtpXSA9IHN1Yi5kZWVwQ29weSgpOyBzdWIuY29waWVkID0gdHJ1ZTsgfVxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHN1Yi5yYW5nZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICByZWJhc2VIaXN0U2VsU2luZ2xlKHN1Yi5yYW5nZXNbal0uYW5jaG9yLCBmcm9tLCB0bywgZGlmZik7XG4gICAgICAgICAgcmViYXNlSGlzdFNlbFNpbmdsZShzdWIucmFuZ2VzW2pdLmhlYWQsIGZyb20sIHRvLCBkaWZmKTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3ViLmNoYW5nZXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgdmFyIGN1ciA9IHN1Yi5jaGFuZ2VzW2pdO1xuICAgICAgICBpZiAodG8gPCBjdXIuZnJvbS5saW5lKSB7XG4gICAgICAgICAgY3VyLmZyb20gPSBQb3MoY3VyLmZyb20ubGluZSArIGRpZmYsIGN1ci5mcm9tLmNoKTtcbiAgICAgICAgICBjdXIudG8gPSBQb3MoY3VyLnRvLmxpbmUgKyBkaWZmLCBjdXIudG8uY2gpO1xuICAgICAgICB9IGVsc2UgaWYgKGZyb20gPD0gY3VyLnRvLmxpbmUpIHtcbiAgICAgICAgICBvayA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIW9rKSB7XG4gICAgICAgIGFycmF5LnNwbGljZSgwLCBpICsgMSk7XG4gICAgICAgIGkgPSAwO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYmFzZUhpc3QoaGlzdCwgY2hhbmdlKSB7XG4gICAgdmFyIGZyb20gPSBjaGFuZ2UuZnJvbS5saW5lLCB0byA9IGNoYW5nZS50by5saW5lLCBkaWZmID0gY2hhbmdlLnRleHQubGVuZ3RoIC0gKHRvIC0gZnJvbSkgLSAxO1xuICAgIHJlYmFzZUhpc3RBcnJheShoaXN0LmRvbmUsIGZyb20sIHRvLCBkaWZmKTtcbiAgICByZWJhc2VIaXN0QXJyYXkoaGlzdC51bmRvbmUsIGZyb20sIHRvLCBkaWZmKTtcbiAgfVxuXG4gIC8vIEVWRU5UIFVUSUxJVElFU1xuXG4gIC8vIER1ZSB0byB0aGUgZmFjdCB0aGF0IHdlIHN0aWxsIHN1cHBvcnQganVyYXNzaWMgSUUgdmVyc2lvbnMsIHNvbWVcbiAgLy8gY29tcGF0aWJpbGl0eSB3cmFwcGVycyBhcmUgbmVlZGVkLlxuXG4gIHZhciBlX3ByZXZlbnREZWZhdWx0ID0gQ29kZU1pcnJvci5lX3ByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24oZSkge1xuICAgIGlmIChlLnByZXZlbnREZWZhdWx0KSBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZWxzZSBlLnJldHVyblZhbHVlID0gZmFsc2U7XG4gIH07XG4gIHZhciBlX3N0b3BQcm9wYWdhdGlvbiA9IENvZGVNaXJyb3IuZV9zdG9wUHJvcGFnYXRpb24gPSBmdW5jdGlvbihlKSB7XG4gICAgaWYgKGUuc3RvcFByb3BhZ2F0aW9uKSBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGVsc2UgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xuICB9O1xuICBmdW5jdGlvbiBlX2RlZmF1bHRQcmV2ZW50ZWQoZSkge1xuICAgIHJldHVybiBlLmRlZmF1bHRQcmV2ZW50ZWQgIT0gbnVsbCA/IGUuZGVmYXVsdFByZXZlbnRlZCA6IGUucmV0dXJuVmFsdWUgPT0gZmFsc2U7XG4gIH1cbiAgdmFyIGVfc3RvcCA9IENvZGVNaXJyb3IuZV9zdG9wID0gZnVuY3Rpb24oZSkge2VfcHJldmVudERlZmF1bHQoZSk7IGVfc3RvcFByb3BhZ2F0aW9uKGUpO307XG5cbiAgZnVuY3Rpb24gZV90YXJnZXQoZSkge3JldHVybiBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7fVxuICBmdW5jdGlvbiBlX2J1dHRvbihlKSB7XG4gICAgdmFyIGIgPSBlLndoaWNoO1xuICAgIGlmIChiID09IG51bGwpIHtcbiAgICAgIGlmIChlLmJ1dHRvbiAmIDEpIGIgPSAxO1xuICAgICAgZWxzZSBpZiAoZS5idXR0b24gJiAyKSBiID0gMztcbiAgICAgIGVsc2UgaWYgKGUuYnV0dG9uICYgNCkgYiA9IDI7XG4gICAgfVxuICAgIGlmIChtYWMgJiYgZS5jdHJsS2V5ICYmIGIgPT0gMSkgYiA9IDM7XG4gICAgcmV0dXJuIGI7XG4gIH1cblxuICAvLyBFVkVOVCBIQU5ETElOR1xuXG4gIC8vIExpZ2h0d2VpZ2h0IGV2ZW50IGZyYW1ld29yay4gb24vb2ZmIGFsc28gd29yayBvbiBET00gbm9kZXMsXG4gIC8vIHJlZ2lzdGVyaW5nIG5hdGl2ZSBET00gaGFuZGxlcnMuXG5cbiAgdmFyIG9uID0gQ29kZU1pcnJvci5vbiA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUsIGYpIHtcbiAgICBpZiAoZW1pdHRlci5hZGRFdmVudExpc3RlbmVyKVxuICAgICAgZW1pdHRlci5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGYsIGZhbHNlKTtcbiAgICBlbHNlIGlmIChlbWl0dGVyLmF0dGFjaEV2ZW50KVxuICAgICAgZW1pdHRlci5hdHRhY2hFdmVudChcIm9uXCIgKyB0eXBlLCBmKTtcbiAgICBlbHNlIHtcbiAgICAgIHZhciBtYXAgPSBlbWl0dGVyLl9oYW5kbGVycyB8fCAoZW1pdHRlci5faGFuZGxlcnMgPSB7fSk7XG4gICAgICB2YXIgYXJyID0gbWFwW3R5cGVdIHx8IChtYXBbdHlwZV0gPSBbXSk7XG4gICAgICBhcnIucHVzaChmKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIG5vSGFuZGxlcnMgPSBbXVxuICBmdW5jdGlvbiBnZXRIYW5kbGVycyhlbWl0dGVyLCB0eXBlLCBjb3B5KSB7XG4gICAgdmFyIGFyciA9IGVtaXR0ZXIuX2hhbmRsZXJzICYmIGVtaXR0ZXIuX2hhbmRsZXJzW3R5cGVdXG4gICAgaWYgKGNvcHkpIHJldHVybiBhcnIgJiYgYXJyLmxlbmd0aCA+IDAgPyBhcnIuc2xpY2UoKSA6IG5vSGFuZGxlcnNcbiAgICBlbHNlIHJldHVybiBhcnIgfHwgbm9IYW5kbGVyc1xuICB9XG5cbiAgdmFyIG9mZiA9IENvZGVNaXJyb3Iub2ZmID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSwgZikge1xuICAgIGlmIChlbWl0dGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIpXG4gICAgICBlbWl0dGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgZiwgZmFsc2UpO1xuICAgIGVsc2UgaWYgKGVtaXR0ZXIuZGV0YWNoRXZlbnQpXG4gICAgICBlbWl0dGVyLmRldGFjaEV2ZW50KFwib25cIiArIHR5cGUsIGYpO1xuICAgIGVsc2Uge1xuICAgICAgdmFyIGhhbmRsZXJzID0gZ2V0SGFuZGxlcnMoZW1pdHRlciwgdHlwZSwgZmFsc2UpXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhhbmRsZXJzLmxlbmd0aDsgKytpKVxuICAgICAgICBpZiAoaGFuZGxlcnNbaV0gPT0gZikgeyBoYW5kbGVycy5zcGxpY2UoaSwgMSk7IGJyZWFrOyB9XG4gICAgfVxuICB9O1xuXG4gIHZhciBzaWduYWwgPSBDb2RlTWlycm9yLnNpZ25hbCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUgLyosIHZhbHVlcy4uLiovKSB7XG4gICAgdmFyIGhhbmRsZXJzID0gZ2V0SGFuZGxlcnMoZW1pdHRlciwgdHlwZSwgdHJ1ZSlcbiAgICBpZiAoIWhhbmRsZXJzLmxlbmd0aCkgcmV0dXJuO1xuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhhbmRsZXJzLmxlbmd0aDsgKytpKSBoYW5kbGVyc1tpXS5hcHBseShudWxsLCBhcmdzKTtcbiAgfTtcblxuICB2YXIgb3JwaGFuRGVsYXllZENhbGxiYWNrcyA9IG51bGw7XG5cbiAgLy8gT2Z0ZW4sIHdlIHdhbnQgdG8gc2lnbmFsIGV2ZW50cyBhdCBhIHBvaW50IHdoZXJlIHdlIGFyZSBpbiB0aGVcbiAgLy8gbWlkZGxlIG9mIHNvbWUgd29yaywgYnV0IGRvbid0IHdhbnQgdGhlIGhhbmRsZXIgdG8gc3RhcnQgY2FsbGluZ1xuICAvLyBvdGhlciBtZXRob2RzIG9uIHRoZSBlZGl0b3IsIHdoaWNoIG1pZ2h0IGJlIGluIGFuIGluY29uc2lzdGVudFxuICAvLyBzdGF0ZSBvciBzaW1wbHkgbm90IGV4cGVjdCBhbnkgb3RoZXIgZXZlbnRzIHRvIGhhcHBlbi5cbiAgLy8gc2lnbmFsTGF0ZXIgbG9va3Mgd2hldGhlciB0aGVyZSBhcmUgYW55IGhhbmRsZXJzLCBhbmQgc2NoZWR1bGVzXG4gIC8vIHRoZW0gdG8gYmUgZXhlY3V0ZWQgd2hlbiB0aGUgbGFzdCBvcGVyYXRpb24gZW5kcywgb3IsIGlmIG5vXG4gIC8vIG9wZXJhdGlvbiBpcyBhY3RpdmUsIHdoZW4gYSB0aW1lb3V0IGZpcmVzLlxuICBmdW5jdGlvbiBzaWduYWxMYXRlcihlbWl0dGVyLCB0eXBlIC8qLCB2YWx1ZXMuLi4qLykge1xuICAgIHZhciBhcnIgPSBnZXRIYW5kbGVycyhlbWl0dGVyLCB0eXBlLCBmYWxzZSlcbiAgICBpZiAoIWFyci5sZW5ndGgpIHJldHVybjtcbiAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMiksIGxpc3Q7XG4gICAgaWYgKG9wZXJhdGlvbkdyb3VwKSB7XG4gICAgICBsaXN0ID0gb3BlcmF0aW9uR3JvdXAuZGVsYXllZENhbGxiYWNrcztcbiAgICB9IGVsc2UgaWYgKG9ycGhhbkRlbGF5ZWRDYWxsYmFja3MpIHtcbiAgICAgIGxpc3QgPSBvcnBoYW5EZWxheWVkQ2FsbGJhY2tzO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaXN0ID0gb3JwaGFuRGVsYXllZENhbGxiYWNrcyA9IFtdO1xuICAgICAgc2V0VGltZW91dChmaXJlT3JwaGFuRGVsYXllZCwgMCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJuZChmKSB7cmV0dXJuIGZ1bmN0aW9uKCl7Zi5hcHBseShudWxsLCBhcmdzKTt9O307XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyArK2kpXG4gICAgICBsaXN0LnB1c2goYm5kKGFycltpXSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZmlyZU9ycGhhbkRlbGF5ZWQoKSB7XG4gICAgdmFyIGRlbGF5ZWQgPSBvcnBoYW5EZWxheWVkQ2FsbGJhY2tzO1xuICAgIG9ycGhhbkRlbGF5ZWRDYWxsYmFja3MgPSBudWxsO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGVsYXllZC5sZW5ndGg7ICsraSkgZGVsYXllZFtpXSgpO1xuICB9XG5cbiAgLy8gVGhlIERPTSBldmVudHMgdGhhdCBDb2RlTWlycm9yIGhhbmRsZXMgY2FuIGJlIG92ZXJyaWRkZW4gYnlcbiAgLy8gcmVnaXN0ZXJpbmcgYSAobm9uLURPTSkgaGFuZGxlciBvbiB0aGUgZWRpdG9yIGZvciB0aGUgZXZlbnQgbmFtZSxcbiAgLy8gYW5kIHByZXZlbnREZWZhdWx0LWluZyB0aGUgZXZlbnQgaW4gdGhhdCBoYW5kbGVyLlxuICBmdW5jdGlvbiBzaWduYWxET01FdmVudChjbSwgZSwgb3ZlcnJpZGUpIHtcbiAgICBpZiAodHlwZW9mIGUgPT0gXCJzdHJpbmdcIilcbiAgICAgIGUgPSB7dHlwZTogZSwgcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkgeyB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlOyB9fTtcbiAgICBzaWduYWwoY20sIG92ZXJyaWRlIHx8IGUudHlwZSwgY20sIGUpO1xuICAgIHJldHVybiBlX2RlZmF1bHRQcmV2ZW50ZWQoZSkgfHwgZS5jb2RlbWlycm9ySWdub3JlO1xuICB9XG5cbiAgZnVuY3Rpb24gc2lnbmFsQ3Vyc29yQWN0aXZpdHkoY20pIHtcbiAgICB2YXIgYXJyID0gY20uX2hhbmRsZXJzICYmIGNtLl9oYW5kbGVycy5jdXJzb3JBY3Rpdml0eTtcbiAgICBpZiAoIWFycikgcmV0dXJuO1xuICAgIHZhciBzZXQgPSBjbS5jdXJPcC5jdXJzb3JBY3Rpdml0eUhhbmRsZXJzIHx8IChjbS5jdXJPcC5jdXJzb3JBY3Rpdml0eUhhbmRsZXJzID0gW10pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKSBpZiAoaW5kZXhPZihzZXQsIGFycltpXSkgPT0gLTEpXG4gICAgICBzZXQucHVzaChhcnJbaV0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFzSGFuZGxlcihlbWl0dGVyLCB0eXBlKSB7XG4gICAgcmV0dXJuIGdldEhhbmRsZXJzKGVtaXR0ZXIsIHR5cGUpLmxlbmd0aCA+IDBcbiAgfVxuXG4gIC8vIEFkZCBvbiBhbmQgb2ZmIG1ldGhvZHMgdG8gYSBjb25zdHJ1Y3RvcidzIHByb3RvdHlwZSwgdG8gbWFrZVxuICAvLyByZWdpc3RlcmluZyBldmVudHMgb24gc3VjaCBvYmplY3RzIG1vcmUgY29udmVuaWVudC5cbiAgZnVuY3Rpb24gZXZlbnRNaXhpbihjdG9yKSB7XG4gICAgY3Rvci5wcm90b3R5cGUub24gPSBmdW5jdGlvbih0eXBlLCBmKSB7b24odGhpcywgdHlwZSwgZik7fTtcbiAgICBjdG9yLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbih0eXBlLCBmKSB7b2ZmKHRoaXMsIHR5cGUsIGYpO307XG4gIH1cblxuICAvLyBNSVNDIFVUSUxJVElFU1xuXG4gIC8vIE51bWJlciBvZiBwaXhlbHMgYWRkZWQgdG8gc2Nyb2xsZXIgYW5kIHNpemVyIHRvIGhpZGUgc2Nyb2xsYmFyXG4gIHZhciBzY3JvbGxlckdhcCA9IDMwO1xuXG4gIC8vIFJldHVybmVkIG9yIHRocm93biBieSB2YXJpb3VzIHByb3RvY29scyB0byBzaWduYWwgJ0knbSBub3RcbiAgLy8gaGFuZGxpbmcgdGhpcycuXG4gIHZhciBQYXNzID0gQ29kZU1pcnJvci5QYXNzID0ge3RvU3RyaW5nOiBmdW5jdGlvbigpe3JldHVybiBcIkNvZGVNaXJyb3IuUGFzc1wiO319O1xuXG4gIC8vIFJldXNlZCBvcHRpb24gb2JqZWN0cyBmb3Igc2V0U2VsZWN0aW9uICYgZnJpZW5kc1xuICB2YXIgc2VsX2RvbnRTY3JvbGwgPSB7c2Nyb2xsOiBmYWxzZX0sIHNlbF9tb3VzZSA9IHtvcmlnaW46IFwiKm1vdXNlXCJ9LCBzZWxfbW92ZSA9IHtvcmlnaW46IFwiK21vdmVcIn07XG5cbiAgZnVuY3Rpb24gRGVsYXllZCgpIHt0aGlzLmlkID0gbnVsbDt9XG4gIERlbGF5ZWQucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKG1zLCBmKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuaWQpO1xuICAgIHRoaXMuaWQgPSBzZXRUaW1lb3V0KGYsIG1zKTtcbiAgfTtcblxuICAvLyBDb3VudHMgdGhlIGNvbHVtbiBvZmZzZXQgaW4gYSBzdHJpbmcsIHRha2luZyB0YWJzIGludG8gYWNjb3VudC5cbiAgLy8gVXNlZCBtb3N0bHkgdG8gZmluZCBpbmRlbnRhdGlvbi5cbiAgdmFyIGNvdW50Q29sdW1uID0gQ29kZU1pcnJvci5jb3VudENvbHVtbiA9IGZ1bmN0aW9uKHN0cmluZywgZW5kLCB0YWJTaXplLCBzdGFydEluZGV4LCBzdGFydFZhbHVlKSB7XG4gICAgaWYgKGVuZCA9PSBudWxsKSB7XG4gICAgICBlbmQgPSBzdHJpbmcuc2VhcmNoKC9bXlxcc1xcdTAwYTBdLyk7XG4gICAgICBpZiAoZW5kID09IC0xKSBlbmQgPSBzdHJpbmcubGVuZ3RoO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gc3RhcnRJbmRleCB8fCAwLCBuID0gc3RhcnRWYWx1ZSB8fCAwOzspIHtcbiAgICAgIHZhciBuZXh0VGFiID0gc3RyaW5nLmluZGV4T2YoXCJcXHRcIiwgaSk7XG4gICAgICBpZiAobmV4dFRhYiA8IDAgfHwgbmV4dFRhYiA+PSBlbmQpXG4gICAgICAgIHJldHVybiBuICsgKGVuZCAtIGkpO1xuICAgICAgbiArPSBuZXh0VGFiIC0gaTtcbiAgICAgIG4gKz0gdGFiU2l6ZSAtIChuICUgdGFiU2l6ZSk7XG4gICAgICBpID0gbmV4dFRhYiArIDE7XG4gICAgfVxuICB9O1xuXG4gIC8vIFRoZSBpbnZlcnNlIG9mIGNvdW50Q29sdW1uIC0tIGZpbmQgdGhlIG9mZnNldCB0aGF0IGNvcnJlc3BvbmRzIHRvXG4gIC8vIGEgcGFydGljdWxhciBjb2x1bW4uXG4gIHZhciBmaW5kQ29sdW1uID0gQ29kZU1pcnJvci5maW5kQ29sdW1uID0gZnVuY3Rpb24oc3RyaW5nLCBnb2FsLCB0YWJTaXplKSB7XG4gICAgZm9yICh2YXIgcG9zID0gMCwgY29sID0gMDs7KSB7XG4gICAgICB2YXIgbmV4dFRhYiA9IHN0cmluZy5pbmRleE9mKFwiXFx0XCIsIHBvcyk7XG4gICAgICBpZiAobmV4dFRhYiA9PSAtMSkgbmV4dFRhYiA9IHN0cmluZy5sZW5ndGg7XG4gICAgICB2YXIgc2tpcHBlZCA9IG5leHRUYWIgLSBwb3M7XG4gICAgICBpZiAobmV4dFRhYiA9PSBzdHJpbmcubGVuZ3RoIHx8IGNvbCArIHNraXBwZWQgPj0gZ29hbClcbiAgICAgICAgcmV0dXJuIHBvcyArIE1hdGgubWluKHNraXBwZWQsIGdvYWwgLSBjb2wpO1xuICAgICAgY29sICs9IG5leHRUYWIgLSBwb3M7XG4gICAgICBjb2wgKz0gdGFiU2l6ZSAtIChjb2wgJSB0YWJTaXplKTtcbiAgICAgIHBvcyA9IG5leHRUYWIgKyAxO1xuICAgICAgaWYgKGNvbCA+PSBnb2FsKSByZXR1cm4gcG9zO1xuICAgIH1cbiAgfVxuXG4gIHZhciBzcGFjZVN0cnMgPSBbXCJcIl07XG4gIGZ1bmN0aW9uIHNwYWNlU3RyKG4pIHtcbiAgICB3aGlsZSAoc3BhY2VTdHJzLmxlbmd0aCA8PSBuKVxuICAgICAgc3BhY2VTdHJzLnB1c2gobHN0KHNwYWNlU3RycykgKyBcIiBcIik7XG4gICAgcmV0dXJuIHNwYWNlU3Ryc1tuXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxzdChhcnIpIHsgcmV0dXJuIGFyclthcnIubGVuZ3RoLTFdOyB9XG5cbiAgdmFyIHNlbGVjdElucHV0ID0gZnVuY3Rpb24obm9kZSkgeyBub2RlLnNlbGVjdCgpOyB9O1xuICBpZiAoaW9zKSAvLyBNb2JpbGUgU2FmYXJpIGFwcGFyZW50bHkgaGFzIGEgYnVnIHdoZXJlIHNlbGVjdCgpIGlzIGJyb2tlbi5cbiAgICBzZWxlY3RJbnB1dCA9IGZ1bmN0aW9uKG5vZGUpIHsgbm9kZS5zZWxlY3Rpb25TdGFydCA9IDA7IG5vZGUuc2VsZWN0aW9uRW5kID0gbm9kZS52YWx1ZS5sZW5ndGg7IH07XG4gIGVsc2UgaWYgKGllKSAvLyBTdXBwcmVzcyBteXN0ZXJpb3VzIElFMTAgZXJyb3JzXG4gICAgc2VsZWN0SW5wdXQgPSBmdW5jdGlvbihub2RlKSB7IHRyeSB7IG5vZGUuc2VsZWN0KCk7IH0gY2F0Y2goX2UpIHt9IH07XG5cbiAgZnVuY3Rpb24gaW5kZXhPZihhcnJheSwgZWx0KSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7ICsraSlcbiAgICAgIGlmIChhcnJheVtpXSA9PSBlbHQpIHJldHVybiBpO1xuICAgIHJldHVybiAtMTtcbiAgfVxuICBmdW5jdGlvbiBtYXAoYXJyYXksIGYpIHtcbiAgICB2YXIgb3V0ID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykgb3V0W2ldID0gZihhcnJheVtpXSwgaSk7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vdGhpbmcoKSB7fVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZU9iaihiYXNlLCBwcm9wcykge1xuICAgIHZhciBpbnN0O1xuICAgIGlmIChPYmplY3QuY3JlYXRlKSB7XG4gICAgICBpbnN0ID0gT2JqZWN0LmNyZWF0ZShiYXNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbm90aGluZy5wcm90b3R5cGUgPSBiYXNlO1xuICAgICAgaW5zdCA9IG5ldyBub3RoaW5nKCk7XG4gICAgfVxuICAgIGlmIChwcm9wcykgY29weU9iaihwcm9wcywgaW5zdCk7XG4gICAgcmV0dXJuIGluc3Q7XG4gIH07XG5cbiAgZnVuY3Rpb24gY29weU9iaihvYmosIHRhcmdldCwgb3ZlcndyaXRlKSB7XG4gICAgaWYgKCF0YXJnZXQpIHRhcmdldCA9IHt9O1xuICAgIGZvciAodmFyIHByb3AgaW4gb2JqKVxuICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSAmJiAob3ZlcndyaXRlICE9PSBmYWxzZSB8fCAhdGFyZ2V0Lmhhc093blByb3BlcnR5KHByb3ApKSlcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gb2JqW3Byb3BdO1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cblxuICBmdW5jdGlvbiBiaW5kKGYpIHtcbiAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGYuYXBwbHkobnVsbCwgYXJncyk7fTtcbiAgfVxuXG4gIHZhciBub25BU0NJSVNpbmdsZUNhc2VXb3JkQ2hhciA9IC9bXFx1MDBkZlxcdTA1ODdcXHUwNTkwLVxcdTA1ZjRcXHUwNjAwLVxcdTA2ZmZcXHUzMDQwLVxcdTMwOWZcXHUzMGEwLVxcdTMwZmZcXHUzNDAwLVxcdTRkYjVcXHU0ZTAwLVxcdTlmY2NcXHVhYzAwLVxcdWQ3YWZdLztcbiAgdmFyIGlzV29yZENoYXJCYXNpYyA9IENvZGVNaXJyb3IuaXNXb3JkQ2hhciA9IGZ1bmN0aW9uKGNoKSB7XG4gICAgcmV0dXJuIC9cXHcvLnRlc3QoY2gpIHx8IGNoID4gXCJcXHg4MFwiICYmXG4gICAgICAoY2gudG9VcHBlckNhc2UoKSAhPSBjaC50b0xvd2VyQ2FzZSgpIHx8IG5vbkFTQ0lJU2luZ2xlQ2FzZVdvcmRDaGFyLnRlc3QoY2gpKTtcbiAgfTtcbiAgZnVuY3Rpb24gaXNXb3JkQ2hhcihjaCwgaGVscGVyKSB7XG4gICAgaWYgKCFoZWxwZXIpIHJldHVybiBpc1dvcmRDaGFyQmFzaWMoY2gpO1xuICAgIGlmIChoZWxwZXIuc291cmNlLmluZGV4T2YoXCJcXFxcd1wiKSA+IC0xICYmIGlzV29yZENoYXJCYXNpYyhjaCkpIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBoZWxwZXIudGVzdChjaCk7XG4gIH1cblxuICBmdW5jdGlvbiBpc0VtcHR5KG9iaikge1xuICAgIGZvciAodmFyIG4gaW4gb2JqKSBpZiAob2JqLmhhc093blByb3BlcnR5KG4pICYmIG9ialtuXSkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gRXh0ZW5kaW5nIHVuaWNvZGUgY2hhcmFjdGVycy4gQSBzZXJpZXMgb2YgYSBub24tZXh0ZW5kaW5nIGNoYXIgK1xuICAvLyBhbnkgbnVtYmVyIG9mIGV4dGVuZGluZyBjaGFycyBpcyB0cmVhdGVkIGFzIGEgc2luZ2xlIHVuaXQgYXMgZmFyXG4gIC8vIGFzIGVkaXRpbmcgYW5kIG1lYXN1cmluZyBpcyBjb25jZXJuZWQuIFRoaXMgaXMgbm90IGZ1bGx5IGNvcnJlY3QsXG4gIC8vIHNpbmNlIHNvbWUgc2NyaXB0cy9mb250cy9icm93c2VycyBhbHNvIHRyZWF0IG90aGVyIGNvbmZpZ3VyYXRpb25zXG4gIC8vIG9mIGNvZGUgcG9pbnRzIGFzIGEgZ3JvdXAuXG4gIHZhciBleHRlbmRpbmdDaGFycyA9IC9bXFx1MDMwMC1cXHUwMzZmXFx1MDQ4My1cXHUwNDg5XFx1MDU5MS1cXHUwNWJkXFx1MDViZlxcdTA1YzFcXHUwNWMyXFx1MDVjNFxcdTA1YzVcXHUwNWM3XFx1MDYxMC1cXHUwNjFhXFx1MDY0Yi1cXHUwNjVlXFx1MDY3MFxcdTA2ZDYtXFx1MDZkY1xcdTA2ZGUtXFx1MDZlNFxcdTA2ZTdcXHUwNmU4XFx1MDZlYS1cXHUwNmVkXFx1MDcxMVxcdTA3MzAtXFx1MDc0YVxcdTA3YTYtXFx1MDdiMFxcdTA3ZWItXFx1MDdmM1xcdTA4MTYtXFx1MDgxOVxcdTA4MWItXFx1MDgyM1xcdTA4MjUtXFx1MDgyN1xcdTA4MjktXFx1MDgyZFxcdTA5MDAtXFx1MDkwMlxcdTA5M2NcXHUwOTQxLVxcdTA5NDhcXHUwOTRkXFx1MDk1MS1cXHUwOTU1XFx1MDk2MlxcdTA5NjNcXHUwOTgxXFx1MDliY1xcdTA5YmVcXHUwOWMxLVxcdTA5YzRcXHUwOWNkXFx1MDlkN1xcdTA5ZTJcXHUwOWUzXFx1MGEwMVxcdTBhMDJcXHUwYTNjXFx1MGE0MVxcdTBhNDJcXHUwYTQ3XFx1MGE0OFxcdTBhNGItXFx1MGE0ZFxcdTBhNTFcXHUwYTcwXFx1MGE3MVxcdTBhNzVcXHUwYTgxXFx1MGE4MlxcdTBhYmNcXHUwYWMxLVxcdTBhYzVcXHUwYWM3XFx1MGFjOFxcdTBhY2RcXHUwYWUyXFx1MGFlM1xcdTBiMDFcXHUwYjNjXFx1MGIzZVxcdTBiM2ZcXHUwYjQxLVxcdTBiNDRcXHUwYjRkXFx1MGI1NlxcdTBiNTdcXHUwYjYyXFx1MGI2M1xcdTBiODJcXHUwYmJlXFx1MGJjMFxcdTBiY2RcXHUwYmQ3XFx1MGMzZS1cXHUwYzQwXFx1MGM0Ni1cXHUwYzQ4XFx1MGM0YS1cXHUwYzRkXFx1MGM1NVxcdTBjNTZcXHUwYzYyXFx1MGM2M1xcdTBjYmNcXHUwY2JmXFx1MGNjMlxcdTBjYzZcXHUwY2NjXFx1MGNjZFxcdTBjZDVcXHUwY2Q2XFx1MGNlMlxcdTBjZTNcXHUwZDNlXFx1MGQ0MS1cXHUwZDQ0XFx1MGQ0ZFxcdTBkNTdcXHUwZDYyXFx1MGQ2M1xcdTBkY2FcXHUwZGNmXFx1MGRkMi1cXHUwZGQ0XFx1MGRkNlxcdTBkZGZcXHUwZTMxXFx1MGUzNC1cXHUwZTNhXFx1MGU0Ny1cXHUwZTRlXFx1MGViMVxcdTBlYjQtXFx1MGViOVxcdTBlYmJcXHUwZWJjXFx1MGVjOC1cXHUwZWNkXFx1MGYxOFxcdTBmMTlcXHUwZjM1XFx1MGYzN1xcdTBmMzlcXHUwZjcxLVxcdTBmN2VcXHUwZjgwLVxcdTBmODRcXHUwZjg2XFx1MGY4N1xcdTBmOTAtXFx1MGY5N1xcdTBmOTktXFx1MGZiY1xcdTBmYzZcXHUxMDJkLVxcdTEwMzBcXHUxMDMyLVxcdTEwMzdcXHUxMDM5XFx1MTAzYVxcdTEwM2RcXHUxMDNlXFx1MTA1OFxcdTEwNTlcXHUxMDVlLVxcdTEwNjBcXHUxMDcxLVxcdTEwNzRcXHUxMDgyXFx1MTA4NVxcdTEwODZcXHUxMDhkXFx1MTA5ZFxcdTEzNWZcXHUxNzEyLVxcdTE3MTRcXHUxNzMyLVxcdTE3MzRcXHUxNzUyXFx1MTc1M1xcdTE3NzJcXHUxNzczXFx1MTdiNy1cXHUxN2JkXFx1MTdjNlxcdTE3YzktXFx1MTdkM1xcdTE3ZGRcXHUxODBiLVxcdTE4MGRcXHUxOGE5XFx1MTkyMC1cXHUxOTIyXFx1MTkyN1xcdTE5MjhcXHUxOTMyXFx1MTkzOS1cXHUxOTNiXFx1MWExN1xcdTFhMThcXHUxYTU2XFx1MWE1OC1cXHUxYTVlXFx1MWE2MFxcdTFhNjJcXHUxYTY1LVxcdTFhNmNcXHUxYTczLVxcdTFhN2NcXHUxYTdmXFx1MWIwMC1cXHUxYjAzXFx1MWIzNFxcdTFiMzYtXFx1MWIzYVxcdTFiM2NcXHUxYjQyXFx1MWI2Yi1cXHUxYjczXFx1MWI4MFxcdTFiODFcXHUxYmEyLVxcdTFiYTVcXHUxYmE4XFx1MWJhOVxcdTFjMmMtXFx1MWMzM1xcdTFjMzZcXHUxYzM3XFx1MWNkMC1cXHUxY2QyXFx1MWNkNC1cXHUxY2UwXFx1MWNlMi1cXHUxY2U4XFx1MWNlZFxcdTFkYzAtXFx1MWRlNlxcdTFkZmQtXFx1MWRmZlxcdTIwMGNcXHUyMDBkXFx1MjBkMC1cXHUyMGYwXFx1MmNlZi1cXHUyY2YxXFx1MmRlMC1cXHUyZGZmXFx1MzAyYS1cXHUzMDJmXFx1MzA5OVxcdTMwOWFcXHVhNjZmLVxcdWE2NzJcXHVhNjdjXFx1YTY3ZFxcdWE2ZjBcXHVhNmYxXFx1YTgwMlxcdWE4MDZcXHVhODBiXFx1YTgyNVxcdWE4MjZcXHVhOGM0XFx1YThlMC1cXHVhOGYxXFx1YTkyNi1cXHVhOTJkXFx1YTk0Ny1cXHVhOTUxXFx1YTk4MC1cXHVhOTgyXFx1YTliM1xcdWE5YjYtXFx1YTliOVxcdWE5YmNcXHVhYTI5LVxcdWFhMmVcXHVhYTMxXFx1YWEzMlxcdWFhMzVcXHVhYTM2XFx1YWE0M1xcdWFhNGNcXHVhYWIwXFx1YWFiMi1cXHVhYWI0XFx1YWFiN1xcdWFhYjhcXHVhYWJlXFx1YWFiZlxcdWFhYzFcXHVhYmU1XFx1YWJlOFxcdWFiZWRcXHVkYzAwLVxcdWRmZmZcXHVmYjFlXFx1ZmUwMC1cXHVmZTBmXFx1ZmUyMC1cXHVmZTI2XFx1ZmY5ZVxcdWZmOWZdLztcbiAgZnVuY3Rpb24gaXNFeHRlbmRpbmdDaGFyKGNoKSB7IHJldHVybiBjaC5jaGFyQ29kZUF0KDApID49IDc2OCAmJiBleHRlbmRpbmdDaGFycy50ZXN0KGNoKTsgfVxuXG4gIC8vIERPTSBVVElMSVRJRVNcblxuICBmdW5jdGlvbiBlbHQodGFnLCBjb250ZW50LCBjbGFzc05hbWUsIHN0eWxlKSB7XG4gICAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG4gICAgaWYgKGNsYXNzTmFtZSkgZS5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgaWYgKHN0eWxlKSBlLnN0eWxlLmNzc1RleHQgPSBzdHlsZTtcbiAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT0gXCJzdHJpbmdcIikgZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjb250ZW50KSk7XG4gICAgZWxzZSBpZiAoY29udGVudCkgZm9yICh2YXIgaSA9IDA7IGkgPCBjb250ZW50Lmxlbmd0aDsgKytpKSBlLmFwcGVuZENoaWxkKGNvbnRlbnRbaV0pO1xuICAgIHJldHVybiBlO1xuICB9XG5cbiAgdmFyIHJhbmdlO1xuICBpZiAoZG9jdW1lbnQuY3JlYXRlUmFuZ2UpIHJhbmdlID0gZnVuY3Rpb24obm9kZSwgc3RhcnQsIGVuZCwgZW5kTm9kZSkge1xuICAgIHZhciByID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICByLnNldEVuZChlbmROb2RlIHx8IG5vZGUsIGVuZCk7XG4gICAgci5zZXRTdGFydChub2RlLCBzdGFydCk7XG4gICAgcmV0dXJuIHI7XG4gIH07XG4gIGVsc2UgcmFuZ2UgPSBmdW5jdGlvbihub2RlLCBzdGFydCwgZW5kKSB7XG4gICAgdmFyIHIgPSBkb2N1bWVudC5ib2R5LmNyZWF0ZVRleHRSYW5nZSgpO1xuICAgIHRyeSB7IHIubW92ZVRvRWxlbWVudFRleHQobm9kZS5wYXJlbnROb2RlKTsgfVxuICAgIGNhdGNoKGUpIHsgcmV0dXJuIHI7IH1cbiAgICByLmNvbGxhcHNlKHRydWUpO1xuICAgIHIubW92ZUVuZChcImNoYXJhY3RlclwiLCBlbmQpO1xuICAgIHIubW92ZVN0YXJ0KFwiY2hhcmFjdGVyXCIsIHN0YXJ0KTtcbiAgICByZXR1cm4gcjtcbiAgfTtcblxuICBmdW5jdGlvbiByZW1vdmVDaGlsZHJlbihlKSB7XG4gICAgZm9yICh2YXIgY291bnQgPSBlLmNoaWxkTm9kZXMubGVuZ3RoOyBjb3VudCA+IDA7IC0tY291bnQpXG4gICAgICBlLnJlbW92ZUNoaWxkKGUuZmlyc3RDaGlsZCk7XG4gICAgcmV0dXJuIGU7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVDaGlsZHJlbkFuZEFkZChwYXJlbnQsIGUpIHtcbiAgICByZXR1cm4gcmVtb3ZlQ2hpbGRyZW4ocGFyZW50KS5hcHBlbmRDaGlsZChlKTtcbiAgfVxuXG4gIHZhciBjb250YWlucyA9IENvZGVNaXJyb3IuY29udGFpbnMgPSBmdW5jdGlvbihwYXJlbnQsIGNoaWxkKSB7XG4gICAgaWYgKGNoaWxkLm5vZGVUeXBlID09IDMpIC8vIEFuZHJvaWQgYnJvd3NlciBhbHdheXMgcmV0dXJucyBmYWxzZSB3aGVuIGNoaWxkIGlzIGEgdGV4dG5vZGVcbiAgICAgIGNoaWxkID0gY2hpbGQucGFyZW50Tm9kZTtcbiAgICBpZiAocGFyZW50LmNvbnRhaW5zKVxuICAgICAgcmV0dXJuIHBhcmVudC5jb250YWlucyhjaGlsZCk7XG4gICAgZG8ge1xuICAgICAgaWYgKGNoaWxkLm5vZGVUeXBlID09IDExKSBjaGlsZCA9IGNoaWxkLmhvc3Q7XG4gICAgICBpZiAoY2hpbGQgPT0gcGFyZW50KSByZXR1cm4gdHJ1ZTtcbiAgICB9IHdoaWxlIChjaGlsZCA9IGNoaWxkLnBhcmVudE5vZGUpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGFjdGl2ZUVsdCgpIHtcbiAgICB2YXIgYWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgd2hpbGUgKGFjdGl2ZUVsZW1lbnQgJiYgYWN0aXZlRWxlbWVudC5yb290ICYmIGFjdGl2ZUVsZW1lbnQucm9vdC5hY3RpdmVFbGVtZW50KVxuICAgICAgYWN0aXZlRWxlbWVudCA9IGFjdGl2ZUVsZW1lbnQucm9vdC5hY3RpdmVFbGVtZW50O1xuICAgIHJldHVybiBhY3RpdmVFbGVtZW50O1xuICB9XG4gIC8vIE9sZGVyIHZlcnNpb25zIG9mIElFIHRocm93cyB1bnNwZWNpZmllZCBlcnJvciB3aGVuIHRvdWNoaW5nXG4gIC8vIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgaW4gc29tZSBjYXNlcyAoZHVyaW5nIGxvYWRpbmcsIGluIGlmcmFtZSlcbiAgaWYgKGllICYmIGllX3ZlcnNpb24gPCAxMSkgYWN0aXZlRWx0ID0gZnVuY3Rpb24oKSB7XG4gICAgdHJ5IHsgcmV0dXJuIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7IH1cbiAgICBjYXRjaChlKSB7IHJldHVybiBkb2N1bWVudC5ib2R5OyB9XG4gIH07XG5cbiAgZnVuY3Rpb24gY2xhc3NUZXN0KGNscykgeyByZXR1cm4gbmV3IFJlZ0V4cChcIihefFxcXFxzKVwiICsgY2xzICsgXCIoPzokfFxcXFxzKVxcXFxzKlwiKTsgfVxuICB2YXIgcm1DbGFzcyA9IENvZGVNaXJyb3Iucm1DbGFzcyA9IGZ1bmN0aW9uKG5vZGUsIGNscykge1xuICAgIHZhciBjdXJyZW50ID0gbm9kZS5jbGFzc05hbWU7XG4gICAgdmFyIG1hdGNoID0gY2xhc3NUZXN0KGNscykuZXhlYyhjdXJyZW50KTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIHZhciBhZnRlciA9IGN1cnJlbnQuc2xpY2UobWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGgpO1xuICAgICAgbm9kZS5jbGFzc05hbWUgPSBjdXJyZW50LnNsaWNlKDAsIG1hdGNoLmluZGV4KSArIChhZnRlciA/IG1hdGNoWzFdICsgYWZ0ZXIgOiBcIlwiKTtcbiAgICB9XG4gIH07XG4gIHZhciBhZGRDbGFzcyA9IENvZGVNaXJyb3IuYWRkQ2xhc3MgPSBmdW5jdGlvbihub2RlLCBjbHMpIHtcbiAgICB2YXIgY3VycmVudCA9IG5vZGUuY2xhc3NOYW1lO1xuICAgIGlmICghY2xhc3NUZXN0KGNscykudGVzdChjdXJyZW50KSkgbm9kZS5jbGFzc05hbWUgKz0gKGN1cnJlbnQgPyBcIiBcIiA6IFwiXCIpICsgY2xzO1xuICB9O1xuICBmdW5jdGlvbiBqb2luQ2xhc3NlcyhhLCBiKSB7XG4gICAgdmFyIGFzID0gYS5zcGxpdChcIiBcIik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcy5sZW5ndGg7IGkrKylcbiAgICAgIGlmIChhc1tpXSAmJiAhY2xhc3NUZXN0KGFzW2ldKS50ZXN0KGIpKSBiICs9IFwiIFwiICsgYXNbaV07XG4gICAgcmV0dXJuIGI7XG4gIH1cblxuICAvLyBXSU5ET1ctV0lERSBFVkVOVFNcblxuICAvLyBUaGVzZSBtdXN0IGJlIGhhbmRsZWQgY2FyZWZ1bGx5LCBiZWNhdXNlIG5haXZlbHkgcmVnaXN0ZXJpbmcgYVxuICAvLyBoYW5kbGVyIGZvciBlYWNoIGVkaXRvciB3aWxsIGNhdXNlIHRoZSBlZGl0b3JzIHRvIG5ldmVyIGJlXG4gIC8vIGdhcmJhZ2UgY29sbGVjdGVkLlxuXG4gIGZ1bmN0aW9uIGZvckVhY2hDb2RlTWlycm9yKGYpIHtcbiAgICBpZiAoIWRvY3VtZW50LmJvZHkuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSkgcmV0dXJuO1xuICAgIHZhciBieUNsYXNzID0gZG9jdW1lbnQuYm9keS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiQ29kZU1pcnJvclwiKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5Q2xhc3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjbSA9IGJ5Q2xhc3NbaV0uQ29kZU1pcnJvcjtcbiAgICAgIGlmIChjbSkgZihjbSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIGdsb2JhbHNSZWdpc3RlcmVkID0gZmFsc2U7XG4gIGZ1bmN0aW9uIGVuc3VyZUdsb2JhbEhhbmRsZXJzKCkge1xuICAgIGlmIChnbG9iYWxzUmVnaXN0ZXJlZCkgcmV0dXJuO1xuICAgIHJlZ2lzdGVyR2xvYmFsSGFuZGxlcnMoKTtcbiAgICBnbG9iYWxzUmVnaXN0ZXJlZCA9IHRydWU7XG4gIH1cbiAgZnVuY3Rpb24gcmVnaXN0ZXJHbG9iYWxIYW5kbGVycygpIHtcbiAgICAvLyBXaGVuIHRoZSB3aW5kb3cgcmVzaXplcywgd2UgbmVlZCB0byByZWZyZXNoIGFjdGl2ZSBlZGl0b3JzLlxuICAgIHZhciByZXNpemVUaW1lcjtcbiAgICBvbih3aW5kb3csIFwicmVzaXplXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHJlc2l6ZVRpbWVyID09IG51bGwpIHJlc2l6ZVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzaXplVGltZXIgPSBudWxsO1xuICAgICAgICBmb3JFYWNoQ29kZU1pcnJvcihvblJlc2l6ZSk7XG4gICAgICB9LCAxMDApO1xuICAgIH0pO1xuICAgIC8vIFdoZW4gdGhlIHdpbmRvdyBsb3NlcyBmb2N1cywgd2Ugd2FudCB0byBzaG93IHRoZSBlZGl0b3IgYXMgYmx1cnJlZFxuICAgIG9uKHdpbmRvdywgXCJibHVyXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgZm9yRWFjaENvZGVNaXJyb3Iob25CbHVyKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEZFQVRVUkUgREVURUNUSU9OXG5cbiAgLy8gRGV0ZWN0IGRyYWctYW5kLWRyb3BcbiAgdmFyIGRyYWdBbmREcm9wID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gVGhlcmUgaXMgKnNvbWUqIGtpbmQgb2YgZHJhZy1hbmQtZHJvcCBzdXBwb3J0IGluIElFNi04LCBidXQgSVxuICAgIC8vIGNvdWxkbid0IGdldCBpdCB0byB3b3JrIHlldC5cbiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDkpIHJldHVybiBmYWxzZTtcbiAgICB2YXIgZGl2ID0gZWx0KCdkaXYnKTtcbiAgICByZXR1cm4gXCJkcmFnZ2FibGVcIiBpbiBkaXYgfHwgXCJkcmFnRHJvcFwiIGluIGRpdjtcbiAgfSgpO1xuXG4gIHZhciB6d3NwU3VwcG9ydGVkO1xuICBmdW5jdGlvbiB6ZXJvV2lkdGhFbGVtZW50KG1lYXN1cmUpIHtcbiAgICBpZiAoendzcFN1cHBvcnRlZCA9PSBudWxsKSB7XG4gICAgICB2YXIgdGVzdCA9IGVsdChcInNwYW5cIiwgXCJcXHUyMDBiXCIpO1xuICAgICAgcmVtb3ZlQ2hpbGRyZW5BbmRBZGQobWVhc3VyZSwgZWx0KFwic3BhblwiLCBbdGVzdCwgZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJ4XCIpXSkpO1xuICAgICAgaWYgKG1lYXN1cmUuZmlyc3RDaGlsZC5vZmZzZXRIZWlnaHQgIT0gMClcbiAgICAgICAgendzcFN1cHBvcnRlZCA9IHRlc3Qub2Zmc2V0V2lkdGggPD0gMSAmJiB0ZXN0Lm9mZnNldEhlaWdodCA+IDIgJiYgIShpZSAmJiBpZV92ZXJzaW9uIDwgOCk7XG4gICAgfVxuICAgIHZhciBub2RlID0gendzcFN1cHBvcnRlZCA/IGVsdChcInNwYW5cIiwgXCJcXHUyMDBiXCIpIDpcbiAgICAgIGVsdChcInNwYW5cIiwgXCJcXHUwMGEwXCIsIG51bGwsIFwiZGlzcGxheTogaW5saW5lLWJsb2NrOyB3aWR0aDogMXB4OyBtYXJnaW4tcmlnaHQ6IC0xcHhcIik7XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGUoXCJjbS10ZXh0XCIsIFwiXCIpO1xuICAgIHJldHVybiBub2RlO1xuICB9XG5cbiAgLy8gRmVhdHVyZS1kZXRlY3QgSUUncyBjcnVtbXkgY2xpZW50IHJlY3QgcmVwb3J0aW5nIGZvciBiaWRpIHRleHRcbiAgdmFyIGJhZEJpZGlSZWN0cztcbiAgZnVuY3Rpb24gaGFzQmFkQmlkaVJlY3RzKG1lYXN1cmUpIHtcbiAgICBpZiAoYmFkQmlkaVJlY3RzICE9IG51bGwpIHJldHVybiBiYWRCaWRpUmVjdHM7XG4gICAgdmFyIHR4dCA9IHJlbW92ZUNoaWxkcmVuQW5kQWRkKG1lYXN1cmUsIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiQVxcdTA2MmVBXCIpKTtcbiAgICB2YXIgcjAgPSByYW5nZSh0eHQsIDAsIDEpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGlmICghcjAgfHwgcjAubGVmdCA9PSByMC5yaWdodCkgcmV0dXJuIGZhbHNlOyAvLyBTYWZhcmkgcmV0dXJucyBudWxsIGluIHNvbWUgY2FzZXMgKCMyNzgwKVxuICAgIHZhciByMSA9IHJhbmdlKHR4dCwgMSwgMikuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmV0dXJuIGJhZEJpZGlSZWN0cyA9IChyMS5yaWdodCAtIHIwLnJpZ2h0IDwgMyk7XG4gIH1cblxuICAvLyBTZWUgaWYgXCJcIi5zcGxpdCBpcyB0aGUgYnJva2VuIElFIHZlcnNpb24sIGlmIHNvLCBwcm92aWRlIGFuXG4gIC8vIGFsdGVybmF0aXZlIHdheSB0byBzcGxpdCBsaW5lcy5cbiAgdmFyIHNwbGl0TGluZXNBdXRvID0gQ29kZU1pcnJvci5zcGxpdExpbmVzID0gXCJcXG5cXG5iXCIuc3BsaXQoL1xcbi8pLmxlbmd0aCAhPSAzID8gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgdmFyIHBvcyA9IDAsIHJlc3VsdCA9IFtdLCBsID0gc3RyaW5nLmxlbmd0aDtcbiAgICB3aGlsZSAocG9zIDw9IGwpIHtcbiAgICAgIHZhciBubCA9IHN0cmluZy5pbmRleE9mKFwiXFxuXCIsIHBvcyk7XG4gICAgICBpZiAobmwgPT0gLTEpIG5sID0gc3RyaW5nLmxlbmd0aDtcbiAgICAgIHZhciBsaW5lID0gc3RyaW5nLnNsaWNlKHBvcywgc3RyaW5nLmNoYXJBdChubCAtIDEpID09IFwiXFxyXCIgPyBubCAtIDEgOiBubCk7XG4gICAgICB2YXIgcnQgPSBsaW5lLmluZGV4T2YoXCJcXHJcIik7XG4gICAgICBpZiAocnQgIT0gLTEpIHtcbiAgICAgICAgcmVzdWx0LnB1c2gobGluZS5zbGljZSgwLCBydCkpO1xuICAgICAgICBwb3MgKz0gcnQgKyAxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LnB1c2gobGluZSk7XG4gICAgICAgIHBvcyA9IG5sICsgMTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSA6IGZ1bmN0aW9uKHN0cmluZyl7cmV0dXJuIHN0cmluZy5zcGxpdCgvXFxyXFxuP3xcXG4vKTt9O1xuXG4gIHZhciBoYXNTZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uID8gZnVuY3Rpb24odGUpIHtcbiAgICB0cnkgeyByZXR1cm4gdGUuc2VsZWN0aW9uU3RhcnQgIT0gdGUuc2VsZWN0aW9uRW5kOyB9XG4gICAgY2F0Y2goZSkgeyByZXR1cm4gZmFsc2U7IH1cbiAgfSA6IGZ1bmN0aW9uKHRlKSB7XG4gICAgdHJ5IHt2YXIgcmFuZ2UgPSB0ZS5vd25lckRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO31cbiAgICBjYXRjaChlKSB7fVxuICAgIGlmICghcmFuZ2UgfHwgcmFuZ2UucGFyZW50RWxlbWVudCgpICE9IHRlKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHJhbmdlLmNvbXBhcmVFbmRQb2ludHMoXCJTdGFydFRvRW5kXCIsIHJhbmdlKSAhPSAwO1xuICB9O1xuXG4gIHZhciBoYXNDb3B5RXZlbnQgPSAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIGUgPSBlbHQoXCJkaXZcIik7XG4gICAgaWYgKFwib25jb3B5XCIgaW4gZSkgcmV0dXJuIHRydWU7XG4gICAgZS5zZXRBdHRyaWJ1dGUoXCJvbmNvcHlcIiwgXCJyZXR1cm47XCIpO1xuICAgIHJldHVybiB0eXBlb2YgZS5vbmNvcHkgPT0gXCJmdW5jdGlvblwiO1xuICB9KSgpO1xuXG4gIHZhciBiYWRab29tZWRSZWN0cyA9IG51bGw7XG4gIGZ1bmN0aW9uIGhhc0JhZFpvb21lZFJlY3RzKG1lYXN1cmUpIHtcbiAgICBpZiAoYmFkWm9vbWVkUmVjdHMgIT0gbnVsbCkgcmV0dXJuIGJhZFpvb21lZFJlY3RzO1xuICAgIHZhciBub2RlID0gcmVtb3ZlQ2hpbGRyZW5BbmRBZGQobWVhc3VyZSwgZWx0KFwic3BhblwiLCBcInhcIikpO1xuICAgIHZhciBub3JtYWwgPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHZhciBmcm9tUmFuZ2UgPSByYW5nZShub2RlLCAwLCAxKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4gYmFkWm9vbWVkUmVjdHMgPSBNYXRoLmFicyhub3JtYWwubGVmdCAtIGZyb21SYW5nZS5sZWZ0KSA+IDE7XG4gIH1cblxuICAvLyBLRVkgTkFNRVNcblxuICB2YXIga2V5TmFtZXMgPSBDb2RlTWlycm9yLmtleU5hbWVzID0ge1xuICAgIDM6IFwiRW50ZXJcIiwgODogXCJCYWNrc3BhY2VcIiwgOTogXCJUYWJcIiwgMTM6IFwiRW50ZXJcIiwgMTY6IFwiU2hpZnRcIiwgMTc6IFwiQ3RybFwiLCAxODogXCJBbHRcIixcbiAgICAxOTogXCJQYXVzZVwiLCAyMDogXCJDYXBzTG9ja1wiLCAyNzogXCJFc2NcIiwgMzI6IFwiU3BhY2VcIiwgMzM6IFwiUGFnZVVwXCIsIDM0OiBcIlBhZ2VEb3duXCIsIDM1OiBcIkVuZFwiLFxuICAgIDM2OiBcIkhvbWVcIiwgMzc6IFwiTGVmdFwiLCAzODogXCJVcFwiLCAzOTogXCJSaWdodFwiLCA0MDogXCJEb3duXCIsIDQ0OiBcIlByaW50U2NyblwiLCA0NTogXCJJbnNlcnRcIixcbiAgICA0NjogXCJEZWxldGVcIiwgNTk6IFwiO1wiLCA2MTogXCI9XCIsIDkxOiBcIk1vZFwiLCA5MjogXCJNb2RcIiwgOTM6IFwiTW9kXCIsXG4gICAgMTA2OiBcIipcIiwgMTA3OiBcIj1cIiwgMTA5OiBcIi1cIiwgMTEwOiBcIi5cIiwgMTExOiBcIi9cIiwgMTI3OiBcIkRlbGV0ZVwiLFxuICAgIDE3MzogXCItXCIsIDE4NjogXCI7XCIsIDE4NzogXCI9XCIsIDE4ODogXCIsXCIsIDE4OTogXCItXCIsIDE5MDogXCIuXCIsIDE5MTogXCIvXCIsIDE5MjogXCJgXCIsIDIxOTogXCJbXCIsIDIyMDogXCJcXFxcXCIsXG4gICAgMjIxOiBcIl1cIiwgMjIyOiBcIidcIiwgNjMyMzI6IFwiVXBcIiwgNjMyMzM6IFwiRG93blwiLCA2MzIzNDogXCJMZWZ0XCIsIDYzMjM1OiBcIlJpZ2h0XCIsIDYzMjcyOiBcIkRlbGV0ZVwiLFxuICAgIDYzMjczOiBcIkhvbWVcIiwgNjMyNzU6IFwiRW5kXCIsIDYzMjc2OiBcIlBhZ2VVcFwiLCA2MzI3NzogXCJQYWdlRG93blwiLCA2MzMwMjogXCJJbnNlcnRcIlxuICB9O1xuICAoZnVuY3Rpb24oKSB7XG4gICAgLy8gTnVtYmVyIGtleXNcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIGtleU5hbWVzW2kgKyA0OF0gPSBrZXlOYW1lc1tpICsgOTZdID0gU3RyaW5nKGkpO1xuICAgIC8vIEFscGhhYmV0aWMga2V5c1xuICAgIGZvciAodmFyIGkgPSA2NTsgaSA8PSA5MDsgaSsrKSBrZXlOYW1lc1tpXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoaSk7XG4gICAgLy8gRnVuY3Rpb24ga2V5c1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IDEyOyBpKyspIGtleU5hbWVzW2kgKyAxMTFdID0ga2V5TmFtZXNbaSArIDYzMjM1XSA9IFwiRlwiICsgaTtcbiAgfSkoKTtcblxuICAvLyBCSURJIEhFTFBFUlNcblxuICBmdW5jdGlvbiBpdGVyYXRlQmlkaVNlY3Rpb25zKG9yZGVyLCBmcm9tLCB0bywgZikge1xuICAgIGlmICghb3JkZXIpIHJldHVybiBmKGZyb20sIHRvLCBcImx0clwiKTtcbiAgICB2YXIgZm91bmQgPSBmYWxzZTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9yZGVyLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgcGFydCA9IG9yZGVyW2ldO1xuICAgICAgaWYgKHBhcnQuZnJvbSA8IHRvICYmIHBhcnQudG8gPiBmcm9tIHx8IGZyb20gPT0gdG8gJiYgcGFydC50byA9PSBmcm9tKSB7XG4gICAgICAgIGYoTWF0aC5tYXgocGFydC5mcm9tLCBmcm9tKSwgTWF0aC5taW4ocGFydC50bywgdG8pLCBwYXJ0LmxldmVsID09IDEgPyBcInJ0bFwiIDogXCJsdHJcIik7XG4gICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFmb3VuZCkgZihmcm9tLCB0bywgXCJsdHJcIik7XG4gIH1cblxuICBmdW5jdGlvbiBiaWRpTGVmdChwYXJ0KSB7IHJldHVybiBwYXJ0LmxldmVsICUgMiA/IHBhcnQudG8gOiBwYXJ0LmZyb207IH1cbiAgZnVuY3Rpb24gYmlkaVJpZ2h0KHBhcnQpIHsgcmV0dXJuIHBhcnQubGV2ZWwgJSAyID8gcGFydC5mcm9tIDogcGFydC50bzsgfVxuXG4gIGZ1bmN0aW9uIGxpbmVMZWZ0KGxpbmUpIHsgdmFyIG9yZGVyID0gZ2V0T3JkZXIobGluZSk7IHJldHVybiBvcmRlciA/IGJpZGlMZWZ0KG9yZGVyWzBdKSA6IDA7IH1cbiAgZnVuY3Rpb24gbGluZVJpZ2h0KGxpbmUpIHtcbiAgICB2YXIgb3JkZXIgPSBnZXRPcmRlcihsaW5lKTtcbiAgICBpZiAoIW9yZGVyKSByZXR1cm4gbGluZS50ZXh0Lmxlbmd0aDtcbiAgICByZXR1cm4gYmlkaVJpZ2h0KGxzdChvcmRlcikpO1xuICB9XG5cbiAgZnVuY3Rpb24gbGluZVN0YXJ0KGNtLCBsaW5lTikge1xuICAgIHZhciBsaW5lID0gZ2V0TGluZShjbS5kb2MsIGxpbmVOKTtcbiAgICB2YXIgdmlzdWFsID0gdmlzdWFsTGluZShsaW5lKTtcbiAgICBpZiAodmlzdWFsICE9IGxpbmUpIGxpbmVOID0gbGluZU5vKHZpc3VhbCk7XG4gICAgdmFyIG9yZGVyID0gZ2V0T3JkZXIodmlzdWFsKTtcbiAgICB2YXIgY2ggPSAhb3JkZXIgPyAwIDogb3JkZXJbMF0ubGV2ZWwgJSAyID8gbGluZVJpZ2h0KHZpc3VhbCkgOiBsaW5lTGVmdCh2aXN1YWwpO1xuICAgIHJldHVybiBQb3MobGluZU4sIGNoKTtcbiAgfVxuICBmdW5jdGlvbiBsaW5lRW5kKGNtLCBsaW5lTikge1xuICAgIHZhciBtZXJnZWQsIGxpbmUgPSBnZXRMaW5lKGNtLmRvYywgbGluZU4pO1xuICAgIHdoaWxlIChtZXJnZWQgPSBjb2xsYXBzZWRTcGFuQXRFbmQobGluZSkpIHtcbiAgICAgIGxpbmUgPSBtZXJnZWQuZmluZCgxLCB0cnVlKS5saW5lO1xuICAgICAgbGluZU4gPSBudWxsO1xuICAgIH1cbiAgICB2YXIgb3JkZXIgPSBnZXRPcmRlcihsaW5lKTtcbiAgICB2YXIgY2ggPSAhb3JkZXIgPyBsaW5lLnRleHQubGVuZ3RoIDogb3JkZXJbMF0ubGV2ZWwgJSAyID8gbGluZUxlZnQobGluZSkgOiBsaW5lUmlnaHQobGluZSk7XG4gICAgcmV0dXJuIFBvcyhsaW5lTiA9PSBudWxsID8gbGluZU5vKGxpbmUpIDogbGluZU4sIGNoKTtcbiAgfVxuICBmdW5jdGlvbiBsaW5lU3RhcnRTbWFydChjbSwgcG9zKSB7XG4gICAgdmFyIHN0YXJ0ID0gbGluZVN0YXJ0KGNtLCBwb3MubGluZSk7XG4gICAgdmFyIGxpbmUgPSBnZXRMaW5lKGNtLmRvYywgc3RhcnQubGluZSk7XG4gICAgdmFyIG9yZGVyID0gZ2V0T3JkZXIobGluZSk7XG4gICAgaWYgKCFvcmRlciB8fCBvcmRlclswXS5sZXZlbCA9PSAwKSB7XG4gICAgICB2YXIgZmlyc3ROb25XUyA9IE1hdGgubWF4KDAsIGxpbmUudGV4dC5zZWFyY2goL1xcUy8pKTtcbiAgICAgIHZhciBpbldTID0gcG9zLmxpbmUgPT0gc3RhcnQubGluZSAmJiBwb3MuY2ggPD0gZmlyc3ROb25XUyAmJiBwb3MuY2g7XG4gICAgICByZXR1cm4gUG9zKHN0YXJ0LmxpbmUsIGluV1MgPyAwIDogZmlyc3ROb25XUyk7XG4gICAgfVxuICAgIHJldHVybiBzdGFydDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbXBhcmVCaWRpTGV2ZWwob3JkZXIsIGEsIGIpIHtcbiAgICB2YXIgbGluZWRpciA9IG9yZGVyWzBdLmxldmVsO1xuICAgIGlmIChhID09IGxpbmVkaXIpIHJldHVybiB0cnVlO1xuICAgIGlmIChiID09IGxpbmVkaXIpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gYSA8IGI7XG4gIH1cbiAgdmFyIGJpZGlPdGhlcjtcbiAgZnVuY3Rpb24gZ2V0QmlkaVBhcnRBdChvcmRlciwgcG9zKSB7XG4gICAgYmlkaU90aGVyID0gbnVsbDtcbiAgICBmb3IgKHZhciBpID0gMCwgZm91bmQ7IGkgPCBvcmRlci5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGN1ciA9IG9yZGVyW2ldO1xuICAgICAgaWYgKGN1ci5mcm9tIDwgcG9zICYmIGN1ci50byA+IHBvcykgcmV0dXJuIGk7XG4gICAgICBpZiAoKGN1ci5mcm9tID09IHBvcyB8fCBjdXIudG8gPT0gcG9zKSkge1xuICAgICAgICBpZiAoZm91bmQgPT0gbnVsbCkge1xuICAgICAgICAgIGZvdW5kID0gaTtcbiAgICAgICAgfSBlbHNlIGlmIChjb21wYXJlQmlkaUxldmVsKG9yZGVyLCBjdXIubGV2ZWwsIG9yZGVyW2ZvdW5kXS5sZXZlbCkpIHtcbiAgICAgICAgICBpZiAoY3VyLmZyb20gIT0gY3VyLnRvKSBiaWRpT3RoZXIgPSBmb3VuZDtcbiAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoY3VyLmZyb20gIT0gY3VyLnRvKSBiaWRpT3RoZXIgPSBpO1xuICAgICAgICAgIHJldHVybiBmb3VuZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZm91bmQ7XG4gIH1cblxuICBmdW5jdGlvbiBtb3ZlSW5MaW5lKGxpbmUsIHBvcywgZGlyLCBieVVuaXQpIHtcbiAgICBpZiAoIWJ5VW5pdCkgcmV0dXJuIHBvcyArIGRpcjtcbiAgICBkbyBwb3MgKz0gZGlyO1xuICAgIHdoaWxlIChwb3MgPiAwICYmIGlzRXh0ZW5kaW5nQ2hhcihsaW5lLnRleHQuY2hhckF0KHBvcykpKTtcbiAgICByZXR1cm4gcG9zO1xuICB9XG5cbiAgLy8gVGhpcyBpcyBuZWVkZWQgaW4gb3JkZXIgdG8gbW92ZSAndmlzdWFsbHknIHRocm91Z2ggYmktZGlyZWN0aW9uYWxcbiAgLy8gdGV4dCAtLSBpLmUuLCBwcmVzc2luZyBsZWZ0IHNob3VsZCBtYWtlIHRoZSBjdXJzb3IgZ28gbGVmdCwgZXZlblxuICAvLyB3aGVuIGluIFJUTCB0ZXh0LiBUaGUgdHJpY2t5IHBhcnQgaXMgdGhlICdqdW1wcycsIHdoZXJlIFJUTCBhbmRcbiAgLy8gTFRSIHRleHQgdG91Y2ggZWFjaCBvdGhlci4gVGhpcyBvZnRlbiByZXF1aXJlcyB0aGUgY3Vyc29yIG9mZnNldFxuICAvLyB0byBtb3ZlIG1vcmUgdGhhbiBvbmUgdW5pdCwgaW4gb3JkZXIgdG8gdmlzdWFsbHkgbW92ZSBvbmUgdW5pdC5cbiAgZnVuY3Rpb24gbW92ZVZpc3VhbGx5KGxpbmUsIHN0YXJ0LCBkaXIsIGJ5VW5pdCkge1xuICAgIHZhciBiaWRpID0gZ2V0T3JkZXIobGluZSk7XG4gICAgaWYgKCFiaWRpKSByZXR1cm4gbW92ZUxvZ2ljYWxseShsaW5lLCBzdGFydCwgZGlyLCBieVVuaXQpO1xuICAgIHZhciBwb3MgPSBnZXRCaWRpUGFydEF0KGJpZGksIHN0YXJ0KSwgcGFydCA9IGJpZGlbcG9zXTtcbiAgICB2YXIgdGFyZ2V0ID0gbW92ZUluTGluZShsaW5lLCBzdGFydCwgcGFydC5sZXZlbCAlIDIgPyAtZGlyIDogZGlyLCBieVVuaXQpO1xuXG4gICAgZm9yICg7Oykge1xuICAgICAgaWYgKHRhcmdldCA+IHBhcnQuZnJvbSAmJiB0YXJnZXQgPCBwYXJ0LnRvKSByZXR1cm4gdGFyZ2V0O1xuICAgICAgaWYgKHRhcmdldCA9PSBwYXJ0LmZyb20gfHwgdGFyZ2V0ID09IHBhcnQudG8pIHtcbiAgICAgICAgaWYgKGdldEJpZGlQYXJ0QXQoYmlkaSwgdGFyZ2V0KSA9PSBwb3MpIHJldHVybiB0YXJnZXQ7XG4gICAgICAgIHBhcnQgPSBiaWRpW3BvcyArPSBkaXJdO1xuICAgICAgICByZXR1cm4gKGRpciA+IDApID09IHBhcnQubGV2ZWwgJSAyID8gcGFydC50byA6IHBhcnQuZnJvbTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnQgPSBiaWRpW3BvcyArPSBkaXJdO1xuICAgICAgICBpZiAoIXBhcnQpIHJldHVybiBudWxsO1xuICAgICAgICBpZiAoKGRpciA+IDApID09IHBhcnQubGV2ZWwgJSAyKVxuICAgICAgICAgIHRhcmdldCA9IG1vdmVJbkxpbmUobGluZSwgcGFydC50bywgLTEsIGJ5VW5pdCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICB0YXJnZXQgPSBtb3ZlSW5MaW5lKGxpbmUsIHBhcnQuZnJvbSwgMSwgYnlVbml0KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBtb3ZlTG9naWNhbGx5KGxpbmUsIHN0YXJ0LCBkaXIsIGJ5VW5pdCkge1xuICAgIHZhciB0YXJnZXQgPSBzdGFydCArIGRpcjtcbiAgICBpZiAoYnlVbml0KSB3aGlsZSAodGFyZ2V0ID4gMCAmJiBpc0V4dGVuZGluZ0NoYXIobGluZS50ZXh0LmNoYXJBdCh0YXJnZXQpKSkgdGFyZ2V0ICs9IGRpcjtcbiAgICByZXR1cm4gdGFyZ2V0IDwgMCB8fCB0YXJnZXQgPiBsaW5lLnRleHQubGVuZ3RoID8gbnVsbCA6IHRhcmdldDtcbiAgfVxuXG4gIC8vIEJpZGlyZWN0aW9uYWwgb3JkZXJpbmcgYWxnb3JpdGhtXG4gIC8vIFNlZSBodHRwOi8vdW5pY29kZS5vcmcvcmVwb3J0cy90cjkvdHI5LTEzLmh0bWwgZm9yIHRoZSBhbGdvcml0aG1cbiAgLy8gdGhhdCB0aGlzIChwYXJ0aWFsbHkpIGltcGxlbWVudHMuXG5cbiAgLy8gT25lLWNoYXIgY29kZXMgdXNlZCBmb3IgY2hhcmFjdGVyIHR5cGVzOlxuICAvLyBMIChMKTogICBMZWZ0LXRvLVJpZ2h0XG4gIC8vIFIgKFIpOiAgIFJpZ2h0LXRvLUxlZnRcbiAgLy8gciAoQUwpOiAgUmlnaHQtdG8tTGVmdCBBcmFiaWNcbiAgLy8gMSAoRU4pOiAgRXVyb3BlYW4gTnVtYmVyXG4gIC8vICsgKEVTKTogIEV1cm9wZWFuIE51bWJlciBTZXBhcmF0b3JcbiAgLy8gJSAoRVQpOiAgRXVyb3BlYW4gTnVtYmVyIFRlcm1pbmF0b3JcbiAgLy8gbiAoQU4pOiAgQXJhYmljIE51bWJlclxuICAvLyAsIChDUyk6ICBDb21tb24gTnVtYmVyIFNlcGFyYXRvclxuICAvLyBtIChOU00pOiBOb24tU3BhY2luZyBNYXJrXG4gIC8vIGIgKEJOKTogIEJvdW5kYXJ5IE5ldXRyYWxcbiAgLy8gcyAoQik6ICAgUGFyYWdyYXBoIFNlcGFyYXRvclxuICAvLyB0IChTKTogICBTZWdtZW50IFNlcGFyYXRvclxuICAvLyB3IChXUyk6ICBXaGl0ZXNwYWNlXG4gIC8vIE4gKE9OKTogIE90aGVyIE5ldXRyYWxzXG5cbiAgLy8gUmV0dXJucyBudWxsIGlmIGNoYXJhY3RlcnMgYXJlIG9yZGVyZWQgYXMgdGhleSBhcHBlYXJcbiAgLy8gKGxlZnQtdG8tcmlnaHQpLCBvciBhbiBhcnJheSBvZiBzZWN0aW9ucyAoe2Zyb20sIHRvLCBsZXZlbH1cbiAgLy8gb2JqZWN0cykgaW4gdGhlIG9yZGVyIGluIHdoaWNoIHRoZXkgb2NjdXIgdmlzdWFsbHkuXG4gIHZhciBiaWRpT3JkZXJpbmcgPSAoZnVuY3Rpb24oKSB7XG4gICAgLy8gQ2hhcmFjdGVyIHR5cGVzIGZvciBjb2RlcG9pbnRzIDAgdG8gMHhmZlxuICAgIHZhciBsb3dUeXBlcyA9IFwiYmJiYmJiYmJidHN0d3NiYmJiYmJiYmJiYmJiYnNzc3R3Tk4lJSVOTk5OTk4sTixOMTExMTExMTExMU5OTk5OTk5MTExMTExMTExMTExMTExMTExMTExMTExMTE5OTk5OTkxMTExMTExMTExMTExMTExMTExMTExMTExMTk5OTmJiYmJiYnNiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYixOJSUlJU5OTk5MTk5OTk4lJTExTkxOTk4xTE5OTk5OTExMTExMTExMTExMTExMTExMTExMTExOTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTE5cIjtcbiAgICAvLyBDaGFyYWN0ZXIgdHlwZXMgZm9yIGNvZGVwb2ludHMgMHg2MDAgdG8gMHg2ZmZcbiAgICB2YXIgYXJhYmljVHlwZXMgPSBcInJycnJycnJycnJycixyTk5tbW1tbW1ycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycm1tbW1tbW1tbW1tbW1tcnJycnJycm5ubm5ubm5ubm4lbm5ycnJtcnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJtbW1tbW1tbW1tbW1tbW1tbW1tTm1tbW1cIjtcbiAgICBmdW5jdGlvbiBjaGFyVHlwZShjb2RlKSB7XG4gICAgICBpZiAoY29kZSA8PSAweGY3KSByZXR1cm4gbG93VHlwZXMuY2hhckF0KGNvZGUpO1xuICAgICAgZWxzZSBpZiAoMHg1OTAgPD0gY29kZSAmJiBjb2RlIDw9IDB4NWY0KSByZXR1cm4gXCJSXCI7XG4gICAgICBlbHNlIGlmICgweDYwMCA8PSBjb2RlICYmIGNvZGUgPD0gMHg2ZWQpIHJldHVybiBhcmFiaWNUeXBlcy5jaGFyQXQoY29kZSAtIDB4NjAwKTtcbiAgICAgIGVsc2UgaWYgKDB4NmVlIDw9IGNvZGUgJiYgY29kZSA8PSAweDhhYykgcmV0dXJuIFwiclwiO1xuICAgICAgZWxzZSBpZiAoMHgyMDAwIDw9IGNvZGUgJiYgY29kZSA8PSAweDIwMGIpIHJldHVybiBcIndcIjtcbiAgICAgIGVsc2UgaWYgKGNvZGUgPT0gMHgyMDBjKSByZXR1cm4gXCJiXCI7XG4gICAgICBlbHNlIHJldHVybiBcIkxcIjtcbiAgICB9XG5cbiAgICB2YXIgYmlkaVJFID0gL1tcXHUwNTkwLVxcdTA1ZjRcXHUwNjAwLVxcdTA2ZmZcXHUwNzAwLVxcdTA4YWNdLztcbiAgICB2YXIgaXNOZXV0cmFsID0gL1tzdHdOXS8sIGlzU3Ryb25nID0gL1tMUnJdLywgY291bnRzQXNMZWZ0ID0gL1tMYjFuXS8sIGNvdW50c0FzTnVtID0gL1sxbl0vO1xuICAgIC8vIEJyb3dzZXJzIHNlZW0gdG8gYWx3YXlzIHRyZWF0IHRoZSBib3VuZGFyaWVzIG9mIGJsb2NrIGVsZW1lbnRzIGFzIGJlaW5nIEwuXG4gICAgdmFyIG91dGVyVHlwZSA9IFwiTFwiO1xuXG4gICAgZnVuY3Rpb24gQmlkaVNwYW4obGV2ZWwsIGZyb20sIHRvKSB7XG4gICAgICB0aGlzLmxldmVsID0gbGV2ZWw7XG4gICAgICB0aGlzLmZyb20gPSBmcm9tOyB0aGlzLnRvID0gdG87XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cikge1xuICAgICAgaWYgKCFiaWRpUkUudGVzdChzdHIpKSByZXR1cm4gZmFsc2U7XG4gICAgICB2YXIgbGVuID0gc3RyLmxlbmd0aCwgdHlwZXMgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCB0eXBlOyBpIDwgbGVuOyArK2kpXG4gICAgICAgIHR5cGVzLnB1c2godHlwZSA9IGNoYXJUeXBlKHN0ci5jaGFyQ29kZUF0KGkpKSk7XG5cbiAgICAgIC8vIFcxLiBFeGFtaW5lIGVhY2ggbm9uLXNwYWNpbmcgbWFyayAoTlNNKSBpbiB0aGUgbGV2ZWwgcnVuLCBhbmRcbiAgICAgIC8vIGNoYW5nZSB0aGUgdHlwZSBvZiB0aGUgTlNNIHRvIHRoZSB0eXBlIG9mIHRoZSBwcmV2aW91c1xuICAgICAgLy8gY2hhcmFjdGVyLiBJZiB0aGUgTlNNIGlzIGF0IHRoZSBzdGFydCBvZiB0aGUgbGV2ZWwgcnVuLCBpdCB3aWxsXG4gICAgICAvLyBnZXQgdGhlIHR5cGUgb2Ygc29yLlxuICAgICAgZm9yICh2YXIgaSA9IDAsIHByZXYgPSBvdXRlclR5cGU7IGkgPCBsZW47ICsraSkge1xuICAgICAgICB2YXIgdHlwZSA9IHR5cGVzW2ldO1xuICAgICAgICBpZiAodHlwZSA9PSBcIm1cIikgdHlwZXNbaV0gPSBwcmV2O1xuICAgICAgICBlbHNlIHByZXYgPSB0eXBlO1xuICAgICAgfVxuXG4gICAgICAvLyBXMi4gU2VhcmNoIGJhY2t3YXJkcyBmcm9tIGVhY2ggaW5zdGFuY2Ugb2YgYSBFdXJvcGVhbiBudW1iZXJcbiAgICAgIC8vIHVudGlsIHRoZSBmaXJzdCBzdHJvbmcgdHlwZSAoUiwgTCwgQUwsIG9yIHNvcikgaXMgZm91bmQuIElmIGFuXG4gICAgICAvLyBBTCBpcyBmb3VuZCwgY2hhbmdlIHRoZSB0eXBlIG9mIHRoZSBFdXJvcGVhbiBudW1iZXIgdG8gQXJhYmljXG4gICAgICAvLyBudW1iZXIuXG4gICAgICAvLyBXMy4gQ2hhbmdlIGFsbCBBTHMgdG8gUi5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBjdXIgPSBvdXRlclR5cGU7IGkgPCBsZW47ICsraSkge1xuICAgICAgICB2YXIgdHlwZSA9IHR5cGVzW2ldO1xuICAgICAgICBpZiAodHlwZSA9PSBcIjFcIiAmJiBjdXIgPT0gXCJyXCIpIHR5cGVzW2ldID0gXCJuXCI7XG4gICAgICAgIGVsc2UgaWYgKGlzU3Ryb25nLnRlc3QodHlwZSkpIHsgY3VyID0gdHlwZTsgaWYgKHR5cGUgPT0gXCJyXCIpIHR5cGVzW2ldID0gXCJSXCI7IH1cbiAgICAgIH1cblxuICAgICAgLy8gVzQuIEEgc2luZ2xlIEV1cm9wZWFuIHNlcGFyYXRvciBiZXR3ZWVuIHR3byBFdXJvcGVhbiBudW1iZXJzXG4gICAgICAvLyBjaGFuZ2VzIHRvIGEgRXVyb3BlYW4gbnVtYmVyLiBBIHNpbmdsZSBjb21tb24gc2VwYXJhdG9yIGJldHdlZW5cbiAgICAgIC8vIHR3byBudW1iZXJzIG9mIHRoZSBzYW1lIHR5cGUgY2hhbmdlcyB0byB0aGF0IHR5cGUuXG4gICAgICBmb3IgKHZhciBpID0gMSwgcHJldiA9IHR5cGVzWzBdOyBpIDwgbGVuIC0gMTsgKytpKSB7XG4gICAgICAgIHZhciB0eXBlID0gdHlwZXNbaV07XG4gICAgICAgIGlmICh0eXBlID09IFwiK1wiICYmIHByZXYgPT0gXCIxXCIgJiYgdHlwZXNbaSsxXSA9PSBcIjFcIikgdHlwZXNbaV0gPSBcIjFcIjtcbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PSBcIixcIiAmJiBwcmV2ID09IHR5cGVzW2krMV0gJiZcbiAgICAgICAgICAgICAgICAgKHByZXYgPT0gXCIxXCIgfHwgcHJldiA9PSBcIm5cIikpIHR5cGVzW2ldID0gcHJldjtcbiAgICAgICAgcHJldiA9IHR5cGU7XG4gICAgICB9XG5cbiAgICAgIC8vIFc1LiBBIHNlcXVlbmNlIG9mIEV1cm9wZWFuIHRlcm1pbmF0b3JzIGFkamFjZW50IHRvIEV1cm9wZWFuXG4gICAgICAvLyBudW1iZXJzIGNoYW5nZXMgdG8gYWxsIEV1cm9wZWFuIG51bWJlcnMuXG4gICAgICAvLyBXNi4gT3RoZXJ3aXNlLCBzZXBhcmF0b3JzIGFuZCB0ZXJtaW5hdG9ycyBjaGFuZ2UgdG8gT3RoZXJcbiAgICAgIC8vIE5ldXRyYWwuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHZhciB0eXBlID0gdHlwZXNbaV07XG4gICAgICAgIGlmICh0eXBlID09IFwiLFwiKSB0eXBlc1tpXSA9IFwiTlwiO1xuICAgICAgICBlbHNlIGlmICh0eXBlID09IFwiJVwiKSB7XG4gICAgICAgICAgZm9yICh2YXIgZW5kID0gaSArIDE7IGVuZCA8IGxlbiAmJiB0eXBlc1tlbmRdID09IFwiJVwiOyArK2VuZCkge31cbiAgICAgICAgICB2YXIgcmVwbGFjZSA9IChpICYmIHR5cGVzW2ktMV0gPT0gXCIhXCIpIHx8IChlbmQgPCBsZW4gJiYgdHlwZXNbZW5kXSA9PSBcIjFcIikgPyBcIjFcIiA6IFwiTlwiO1xuICAgICAgICAgIGZvciAodmFyIGogPSBpOyBqIDwgZW5kOyArK2opIHR5cGVzW2pdID0gcmVwbGFjZTtcbiAgICAgICAgICBpID0gZW5kIC0gMTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBXNy4gU2VhcmNoIGJhY2t3YXJkcyBmcm9tIGVhY2ggaW5zdGFuY2Ugb2YgYSBFdXJvcGVhbiBudW1iZXJcbiAgICAgIC8vIHVudGlsIHRoZSBmaXJzdCBzdHJvbmcgdHlwZSAoUiwgTCwgb3Igc29yKSBpcyBmb3VuZC4gSWYgYW4gTCBpc1xuICAgICAgLy8gZm91bmQsIHRoZW4gY2hhbmdlIHRoZSB0eXBlIG9mIHRoZSBFdXJvcGVhbiBudW1iZXIgdG8gTC5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBjdXIgPSBvdXRlclR5cGU7IGkgPCBsZW47ICsraSkge1xuICAgICAgICB2YXIgdHlwZSA9IHR5cGVzW2ldO1xuICAgICAgICBpZiAoY3VyID09IFwiTFwiICYmIHR5cGUgPT0gXCIxXCIpIHR5cGVzW2ldID0gXCJMXCI7XG4gICAgICAgIGVsc2UgaWYgKGlzU3Ryb25nLnRlc3QodHlwZSkpIGN1ciA9IHR5cGU7XG4gICAgICB9XG5cbiAgICAgIC8vIE4xLiBBIHNlcXVlbmNlIG9mIG5ldXRyYWxzIHRha2VzIHRoZSBkaXJlY3Rpb24gb2YgdGhlXG4gICAgICAvLyBzdXJyb3VuZGluZyBzdHJvbmcgdGV4dCBpZiB0aGUgdGV4dCBvbiBib3RoIHNpZGVzIGhhcyB0aGUgc2FtZVxuICAgICAgLy8gZGlyZWN0aW9uLiBFdXJvcGVhbiBhbmQgQXJhYmljIG51bWJlcnMgYWN0IGFzIGlmIHRoZXkgd2VyZSBSIGluXG4gICAgICAvLyB0ZXJtcyBvZiB0aGVpciBpbmZsdWVuY2Ugb24gbmV1dHJhbHMuIFN0YXJ0LW9mLWxldmVsLXJ1biAoc29yKVxuICAgICAgLy8gYW5kIGVuZC1vZi1sZXZlbC1ydW4gKGVvcikgYXJlIHVzZWQgYXQgbGV2ZWwgcnVuIGJvdW5kYXJpZXMuXG4gICAgICAvLyBOMi4gQW55IHJlbWFpbmluZyBuZXV0cmFscyB0YWtlIHRoZSBlbWJlZGRpbmcgZGlyZWN0aW9uLlxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICBpZiAoaXNOZXV0cmFsLnRlc3QodHlwZXNbaV0pKSB7XG4gICAgICAgICAgZm9yICh2YXIgZW5kID0gaSArIDE7IGVuZCA8IGxlbiAmJiBpc05ldXRyYWwudGVzdCh0eXBlc1tlbmRdKTsgKytlbmQpIHt9XG4gICAgICAgICAgdmFyIGJlZm9yZSA9IChpID8gdHlwZXNbaS0xXSA6IG91dGVyVHlwZSkgPT0gXCJMXCI7XG4gICAgICAgICAgdmFyIGFmdGVyID0gKGVuZCA8IGxlbiA/IHR5cGVzW2VuZF0gOiBvdXRlclR5cGUpID09IFwiTFwiO1xuICAgICAgICAgIHZhciByZXBsYWNlID0gYmVmb3JlIHx8IGFmdGVyID8gXCJMXCIgOiBcIlJcIjtcbiAgICAgICAgICBmb3IgKHZhciBqID0gaTsgaiA8IGVuZDsgKytqKSB0eXBlc1tqXSA9IHJlcGxhY2U7XG4gICAgICAgICAgaSA9IGVuZCAtIDE7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSGVyZSB3ZSBkZXBhcnQgZnJvbSB0aGUgZG9jdW1lbnRlZCBhbGdvcml0aG0sIGluIG9yZGVyIHRvIGF2b2lkXG4gICAgICAvLyBidWlsZGluZyB1cCBhbiBhY3R1YWwgbGV2ZWxzIGFycmF5LiBTaW5jZSB0aGVyZSBhcmUgb25seSB0aHJlZVxuICAgICAgLy8gbGV2ZWxzICgwLCAxLCAyKSBpbiBhbiBpbXBsZW1lbnRhdGlvbiB0aGF0IGRvZXNuJ3QgdGFrZVxuICAgICAgLy8gZXhwbGljaXQgZW1iZWRkaW5nIGludG8gYWNjb3VudCwgd2UgY2FuIGJ1aWxkIHVwIHRoZSBvcmRlciBvblxuICAgICAgLy8gdGhlIGZseSwgd2l0aG91dCBmb2xsb3dpbmcgdGhlIGxldmVsLWJhc2VkIGFsZ29yaXRobS5cbiAgICAgIHZhciBvcmRlciA9IFtdLCBtO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47KSB7XG4gICAgICAgIGlmIChjb3VudHNBc0xlZnQudGVzdCh0eXBlc1tpXSkpIHtcbiAgICAgICAgICB2YXIgc3RhcnQgPSBpO1xuICAgICAgICAgIGZvciAoKytpOyBpIDwgbGVuICYmIGNvdW50c0FzTGVmdC50ZXN0KHR5cGVzW2ldKTsgKytpKSB7fVxuICAgICAgICAgIG9yZGVyLnB1c2gobmV3IEJpZGlTcGFuKDAsIHN0YXJ0LCBpKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHBvcyA9IGksIGF0ID0gb3JkZXIubGVuZ3RoO1xuICAgICAgICAgIGZvciAoKytpOyBpIDwgbGVuICYmIHR5cGVzW2ldICE9IFwiTFwiOyArK2kpIHt9XG4gICAgICAgICAgZm9yICh2YXIgaiA9IHBvczsgaiA8IGk7KSB7XG4gICAgICAgICAgICBpZiAoY291bnRzQXNOdW0udGVzdCh0eXBlc1tqXSkpIHtcbiAgICAgICAgICAgICAgaWYgKHBvcyA8IGopIG9yZGVyLnNwbGljZShhdCwgMCwgbmV3IEJpZGlTcGFuKDEsIHBvcywgaikpO1xuICAgICAgICAgICAgICB2YXIgbnN0YXJ0ID0gajtcbiAgICAgICAgICAgICAgZm9yICgrK2o7IGogPCBpICYmIGNvdW50c0FzTnVtLnRlc3QodHlwZXNbal0pOyArK2opIHt9XG4gICAgICAgICAgICAgIG9yZGVyLnNwbGljZShhdCwgMCwgbmV3IEJpZGlTcGFuKDIsIG5zdGFydCwgaikpO1xuICAgICAgICAgICAgICBwb3MgPSBqO1xuICAgICAgICAgICAgfSBlbHNlICsrajtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHBvcyA8IGkpIG9yZGVyLnNwbGljZShhdCwgMCwgbmV3IEJpZGlTcGFuKDEsIHBvcywgaSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAob3JkZXJbMF0ubGV2ZWwgPT0gMSAmJiAobSA9IHN0ci5tYXRjaCgvXlxccysvKSkpIHtcbiAgICAgICAgb3JkZXJbMF0uZnJvbSA9IG1bMF0ubGVuZ3RoO1xuICAgICAgICBvcmRlci51bnNoaWZ0KG5ldyBCaWRpU3BhbigwLCAwLCBtWzBdLmxlbmd0aCkpO1xuICAgICAgfVxuICAgICAgaWYgKGxzdChvcmRlcikubGV2ZWwgPT0gMSAmJiAobSA9IHN0ci5tYXRjaCgvXFxzKyQvKSkpIHtcbiAgICAgICAgbHN0KG9yZGVyKS50byAtPSBtWzBdLmxlbmd0aDtcbiAgICAgICAgb3JkZXIucHVzaChuZXcgQmlkaVNwYW4oMCwgbGVuIC0gbVswXS5sZW5ndGgsIGxlbikpO1xuICAgICAgfVxuICAgICAgaWYgKG9yZGVyWzBdLmxldmVsID09IDIpXG4gICAgICAgIG9yZGVyLnVuc2hpZnQobmV3IEJpZGlTcGFuKDEsIG9yZGVyWzBdLnRvLCBvcmRlclswXS50bykpO1xuICAgICAgaWYgKG9yZGVyWzBdLmxldmVsICE9IGxzdChvcmRlcikubGV2ZWwpXG4gICAgICAgIG9yZGVyLnB1c2gobmV3IEJpZGlTcGFuKG9yZGVyWzBdLmxldmVsLCBsZW4sIGxlbikpO1xuXG4gICAgICByZXR1cm4gb3JkZXI7XG4gICAgfTtcbiAgfSkoKTtcblxuICAvLyBUSEUgRU5EXG5cbiAgQ29kZU1pcnJvci52ZXJzaW9uID0gXCI1LjguMFwiO1xuXG4gIHJldHVybiBDb2RlTWlycm9yO1xufSk7XG4iLCIvLyBDb2RlTWlycm9yLCBjb3B5cmlnaHQgKGMpIGJ5IE1hcmlqbiBIYXZlcmJla2UgYW5kIG90aGVyc1xuLy8gRGlzdHJpYnV0ZWQgdW5kZXIgYW4gTUlUIGxpY2Vuc2U6IGh0dHA6Ly9jb2RlbWlycm9yLm5ldC9MSUNFTlNFXG5cbihmdW5jdGlvbihtb2QpIHtcbiAgaWYgKHR5cGVvZiBleHBvcnRzID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSA9PSBcIm9iamVjdFwiKSAvLyBDb21tb25KU1xuICAgIG1vZChyZXF1aXJlKFwiLi4vLi4vbGliL2NvZGVtaXJyb3JcIikpO1xuICBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSAvLyBBTURcbiAgICBkZWZpbmUoW1wiLi4vLi4vbGliL2NvZGVtaXJyb3JcIl0sIG1vZCk7XG4gIGVsc2UgLy8gUGxhaW4gYnJvd3NlciBlbnZcbiAgICBtb2QoQ29kZU1pcnJvcik7XG59KShmdW5jdGlvbihDb2RlTWlycm9yKSB7XG5cInVzZSBzdHJpY3RcIjtcblxuQ29kZU1pcnJvci5kZWZpbmVNb2RlKFwiY2xpa2VcIiwgZnVuY3Rpb24oY29uZmlnLCBwYXJzZXJDb25maWcpIHtcbiAgdmFyIGluZGVudFVuaXQgPSBjb25maWcuaW5kZW50VW5pdCxcbiAgICAgIHN0YXRlbWVudEluZGVudFVuaXQgPSBwYXJzZXJDb25maWcuc3RhdGVtZW50SW5kZW50VW5pdCB8fCBpbmRlbnRVbml0LFxuICAgICAgZG9udEFsaWduQ2FsbHMgPSBwYXJzZXJDb25maWcuZG9udEFsaWduQ2FsbHMsXG4gICAgICBrZXl3b3JkcyA9IHBhcnNlckNvbmZpZy5rZXl3b3JkcyB8fCB7fSxcbiAgICAgIHR5cGVzID0gcGFyc2VyQ29uZmlnLnR5cGVzIHx8IHt9LFxuICAgICAgYnVpbHRpbiA9IHBhcnNlckNvbmZpZy5idWlsdGluIHx8IHt9LFxuICAgICAgYmxvY2tLZXl3b3JkcyA9IHBhcnNlckNvbmZpZy5ibG9ja0tleXdvcmRzIHx8IHt9LFxuICAgICAgZGVmS2V5d29yZHMgPSBwYXJzZXJDb25maWcuZGVmS2V5d29yZHMgfHwge30sXG4gICAgICBhdG9tcyA9IHBhcnNlckNvbmZpZy5hdG9tcyB8fCB7fSxcbiAgICAgIGhvb2tzID0gcGFyc2VyQ29uZmlnLmhvb2tzIHx8IHt9LFxuICAgICAgbXVsdGlMaW5lU3RyaW5ncyA9IHBhcnNlckNvbmZpZy5tdWx0aUxpbmVTdHJpbmdzLFxuICAgICAgaW5kZW50U3RhdGVtZW50cyA9IHBhcnNlckNvbmZpZy5pbmRlbnRTdGF0ZW1lbnRzICE9PSBmYWxzZSxcbiAgICAgIGluZGVudFN3aXRjaCA9IHBhcnNlckNvbmZpZy5pbmRlbnRTd2l0Y2ggIT09IGZhbHNlLFxuICAgICAgbmFtZXNwYWNlU2VwYXJhdG9yID0gcGFyc2VyQ29uZmlnLm5hbWVzcGFjZVNlcGFyYXRvcixcbiAgICAgIGlzUHVuY3R1YXRpb25DaGFyID0gcGFyc2VyQ29uZmlnLmlzUHVuY3R1YXRpb25DaGFyIHx8IC9bXFxbXFxde31cXChcXCksO1xcOlxcLl0vLFxuICAgICAgaXNOdW1iZXJDaGFyID0gcGFyc2VyQ29uZmlnLmlzTnVtYmVyQ2hhciB8fCAvXFxkLyxcbiAgICAgIGlzT3BlcmF0b3JDaGFyID0gcGFyc2VyQ29uZmlnLmlzT3BlcmF0b3JDaGFyIHx8IC9bK1xcLSomJT08PiE/fFxcL10vLFxuICAgICAgZW5kU3RhdGVtZW50ID0gcGFyc2VyQ29uZmlnLmVuZFN0YXRlbWVudCB8fCAvXls7OixdJC87XG5cbiAgdmFyIGN1clB1bmMsIGlzRGVmS2V5d29yZDtcblxuICBmdW5jdGlvbiB0b2tlbkJhc2Uoc3RyZWFtLCBzdGF0ZSkge1xuICAgIHZhciBjaCA9IHN0cmVhbS5uZXh0KCk7XG4gICAgaWYgKGhvb2tzW2NoXSkge1xuICAgICAgdmFyIHJlc3VsdCA9IGhvb2tzW2NoXShzdHJlYW0sIHN0YXRlKTtcbiAgICAgIGlmIChyZXN1bHQgIT09IGZhbHNlKSByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBpZiAoY2ggPT0gJ1wiJyB8fCBjaCA9PSBcIidcIikge1xuICAgICAgc3RhdGUudG9rZW5pemUgPSB0b2tlblN0cmluZyhjaCk7XG4gICAgICByZXR1cm4gc3RhdGUudG9rZW5pemUoc3RyZWFtLCBzdGF0ZSk7XG4gICAgfVxuICAgIGlmIChpc1B1bmN0dWF0aW9uQ2hhci50ZXN0KGNoKSkge1xuICAgICAgY3VyUHVuYyA9IGNoO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmIChpc051bWJlckNoYXIudGVzdChjaCkpIHtcbiAgICAgIHN0cmVhbS5lYXRXaGlsZSgvW1xcd1xcLl0vKTtcbiAgICAgIHJldHVybiBcIm51bWJlclwiO1xuICAgIH1cbiAgICBpZiAoY2ggPT0gXCIvXCIpIHtcbiAgICAgIGlmIChzdHJlYW0uZWF0KFwiKlwiKSkge1xuICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuQ29tbWVudDtcbiAgICAgICAgcmV0dXJuIHRva2VuQ29tbWVudChzdHJlYW0sIHN0YXRlKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdHJlYW0uZWF0KFwiL1wiKSkge1xuICAgICAgICBzdHJlYW0uc2tpcFRvRW5kKCk7XG4gICAgICAgIHJldHVybiBcImNvbW1lbnRcIjtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzT3BlcmF0b3JDaGFyLnRlc3QoY2gpKSB7XG4gICAgICBzdHJlYW0uZWF0V2hpbGUoaXNPcGVyYXRvckNoYXIpO1xuICAgICAgcmV0dXJuIFwib3BlcmF0b3JcIjtcbiAgICB9XG4gICAgc3RyZWFtLmVhdFdoaWxlKC9bXFx3XFwkX1xceGExLVxcdWZmZmZdLyk7XG4gICAgaWYgKG5hbWVzcGFjZVNlcGFyYXRvcikgd2hpbGUgKHN0cmVhbS5tYXRjaChuYW1lc3BhY2VTZXBhcmF0b3IpKVxuICAgICAgc3RyZWFtLmVhdFdoaWxlKC9bXFx3XFwkX1xceGExLVxcdWZmZmZdLyk7XG5cbiAgICB2YXIgY3VyID0gc3RyZWFtLmN1cnJlbnQoKTtcbiAgICBpZiAoY29udGFpbnMoa2V5d29yZHMsIGN1cikpIHtcbiAgICAgIGlmIChjb250YWlucyhibG9ja0tleXdvcmRzLCBjdXIpKSBjdXJQdW5jID0gXCJuZXdzdGF0ZW1lbnRcIjtcbiAgICAgIGlmIChjb250YWlucyhkZWZLZXl3b3JkcywgY3VyKSkgaXNEZWZLZXl3b3JkID0gdHJ1ZTtcbiAgICAgIHJldHVybiBcImtleXdvcmRcIjtcbiAgICB9XG4gICAgaWYgKGNvbnRhaW5zKHR5cGVzLCBjdXIpKSByZXR1cm4gXCJ2YXJpYWJsZS0zXCI7XG4gICAgaWYgKGNvbnRhaW5zKGJ1aWx0aW4sIGN1cikpIHtcbiAgICAgIGlmIChjb250YWlucyhibG9ja0tleXdvcmRzLCBjdXIpKSBjdXJQdW5jID0gXCJuZXdzdGF0ZW1lbnRcIjtcbiAgICAgIHJldHVybiBcImJ1aWx0aW5cIjtcbiAgICB9XG4gICAgaWYgKGNvbnRhaW5zKGF0b21zLCBjdXIpKSByZXR1cm4gXCJhdG9tXCI7XG4gICAgcmV0dXJuIFwidmFyaWFibGVcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRva2VuU3RyaW5nKHF1b3RlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIHZhciBlc2NhcGVkID0gZmFsc2UsIG5leHQsIGVuZCA9IGZhbHNlO1xuICAgICAgd2hpbGUgKChuZXh0ID0gc3RyZWFtLm5leHQoKSkgIT0gbnVsbCkge1xuICAgICAgICBpZiAobmV4dCA9PSBxdW90ZSAmJiAhZXNjYXBlZCkge2VuZCA9IHRydWU7IGJyZWFrO31cbiAgICAgICAgZXNjYXBlZCA9ICFlc2NhcGVkICYmIG5leHQgPT0gXCJcXFxcXCI7XG4gICAgICB9XG4gICAgICBpZiAoZW5kIHx8ICEoZXNjYXBlZCB8fCBtdWx0aUxpbmVTdHJpbmdzKSlcbiAgICAgICAgc3RhdGUudG9rZW5pemUgPSBudWxsO1xuICAgICAgcmV0dXJuIFwic3RyaW5nXCI7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRva2VuQ29tbWVudChzdHJlYW0sIHN0YXRlKSB7XG4gICAgdmFyIG1heWJlRW5kID0gZmFsc2UsIGNoO1xuICAgIHdoaWxlIChjaCA9IHN0cmVhbS5uZXh0KCkpIHtcbiAgICAgIGlmIChjaCA9PSBcIi9cIiAmJiBtYXliZUVuZCkge1xuICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IG51bGw7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgbWF5YmVFbmQgPSAoY2ggPT0gXCIqXCIpO1xuICAgIH1cbiAgICByZXR1cm4gXCJjb21tZW50XCI7XG4gIH1cblxuICBmdW5jdGlvbiBDb250ZXh0KGluZGVudGVkLCBjb2x1bW4sIHR5cGUsIGFsaWduLCBwcmV2KSB7XG4gICAgdGhpcy5pbmRlbnRlZCA9IGluZGVudGVkO1xuICAgIHRoaXMuY29sdW1uID0gY29sdW1uO1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy5hbGlnbiA9IGFsaWduO1xuICAgIHRoaXMucHJldiA9IHByZXY7XG4gIH1cbiAgZnVuY3Rpb24gaXNTdGF0ZW1lbnQodHlwZSkge1xuICAgIHJldHVybiB0eXBlID09IFwic3RhdGVtZW50XCIgfHwgdHlwZSA9PSBcInN3aXRjaHN0YXRlbWVudFwiIHx8IHR5cGUgPT0gXCJuYW1lc3BhY2VcIjtcbiAgfVxuICBmdW5jdGlvbiBwdXNoQ29udGV4dChzdGF0ZSwgY29sLCB0eXBlKSB7XG4gICAgdmFyIGluZGVudCA9IHN0YXRlLmluZGVudGVkO1xuICAgIGlmIChzdGF0ZS5jb250ZXh0ICYmIGlzU3RhdGVtZW50KHN0YXRlLmNvbnRleHQudHlwZSkgJiYgIWlzU3RhdGVtZW50KHR5cGUpKVxuICAgICAgaW5kZW50ID0gc3RhdGUuY29udGV4dC5pbmRlbnRlZDtcbiAgICByZXR1cm4gc3RhdGUuY29udGV4dCA9IG5ldyBDb250ZXh0KGluZGVudCwgY29sLCB0eXBlLCBudWxsLCBzdGF0ZS5jb250ZXh0KTtcbiAgfVxuICBmdW5jdGlvbiBwb3BDb250ZXh0KHN0YXRlKSB7XG4gICAgdmFyIHQgPSBzdGF0ZS5jb250ZXh0LnR5cGU7XG4gICAgaWYgKHQgPT0gXCIpXCIgfHwgdCA9PSBcIl1cIiB8fCB0ID09IFwifVwiKVxuICAgICAgc3RhdGUuaW5kZW50ZWQgPSBzdGF0ZS5jb250ZXh0LmluZGVudGVkO1xuICAgIHJldHVybiBzdGF0ZS5jb250ZXh0ID0gc3RhdGUuY29udGV4dC5wcmV2O1xuICB9XG5cbiAgZnVuY3Rpb24gdHlwZUJlZm9yZShzdHJlYW0sIHN0YXRlKSB7XG4gICAgaWYgKHN0YXRlLnByZXZUb2tlbiA9PSBcInZhcmlhYmxlXCIgfHwgc3RhdGUucHJldlRva2VuID09IFwidmFyaWFibGUtM1wiKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoL1xcUyg/OlteLSBdPnxbKlxcXV0pXFxzKiR8XFwqJC8udGVzdChzdHJlYW0uc3RyaW5nLnNsaWNlKDAsIHN0cmVhbS5zdGFydCkpKSByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzVG9wU2NvcGUoY29udGV4dCkge1xuICAgIGZvciAoOzspIHtcbiAgICAgIGlmICghY29udGV4dCB8fCBjb250ZXh0LnR5cGUgPT0gXCJ0b3BcIikgcmV0dXJuIHRydWU7XG4gICAgICBpZiAoY29udGV4dC50eXBlID09IFwifVwiICYmIGNvbnRleHQucHJldi50eXBlICE9IFwibmFtZXNwYWNlXCIpIHJldHVybiBmYWxzZTtcbiAgICAgIGNvbnRleHQgPSBjb250ZXh0LnByZXY7XG4gICAgfVxuICB9XG5cbiAgLy8gSW50ZXJmYWNlXG5cbiAgcmV0dXJuIHtcbiAgICBzdGFydFN0YXRlOiBmdW5jdGlvbihiYXNlY29sdW1uKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b2tlbml6ZTogbnVsbCxcbiAgICAgICAgY29udGV4dDogbmV3IENvbnRleHQoKGJhc2Vjb2x1bW4gfHwgMCkgLSBpbmRlbnRVbml0LCAwLCBcInRvcFwiLCBmYWxzZSksXG4gICAgICAgIGluZGVudGVkOiAwLFxuICAgICAgICBzdGFydE9mTGluZTogdHJ1ZSxcbiAgICAgICAgcHJldlRva2VuOiBudWxsXG4gICAgICB9O1xuICAgIH0sXG5cbiAgICB0b2tlbjogZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgdmFyIGN0eCA9IHN0YXRlLmNvbnRleHQ7XG4gICAgICBpZiAoc3RyZWFtLnNvbCgpKSB7XG4gICAgICAgIGlmIChjdHguYWxpZ24gPT0gbnVsbCkgY3R4LmFsaWduID0gZmFsc2U7XG4gICAgICAgIHN0YXRlLmluZGVudGVkID0gc3RyZWFtLmluZGVudGF0aW9uKCk7XG4gICAgICAgIHN0YXRlLnN0YXJ0T2ZMaW5lID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChzdHJlYW0uZWF0U3BhY2UoKSkgcmV0dXJuIG51bGw7XG4gICAgICBjdXJQdW5jID0gaXNEZWZLZXl3b3JkID0gbnVsbDtcbiAgICAgIHZhciBzdHlsZSA9IChzdGF0ZS50b2tlbml6ZSB8fCB0b2tlbkJhc2UpKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgaWYgKHN0eWxlID09IFwiY29tbWVudFwiIHx8IHN0eWxlID09IFwibWV0YVwiKSByZXR1cm4gc3R5bGU7XG4gICAgICBpZiAoY3R4LmFsaWduID09IG51bGwpIGN0eC5hbGlnbiA9IHRydWU7XG5cbiAgICAgIGlmIChlbmRTdGF0ZW1lbnQudGVzdChjdXJQdW5jKSkgd2hpbGUgKGlzU3RhdGVtZW50KHN0YXRlLmNvbnRleHQudHlwZSkpIHBvcENvbnRleHQoc3RhdGUpO1xuICAgICAgZWxzZSBpZiAoY3VyUHVuYyA9PSBcIntcIikgcHVzaENvbnRleHQoc3RhdGUsIHN0cmVhbS5jb2x1bW4oKSwgXCJ9XCIpO1xuICAgICAgZWxzZSBpZiAoY3VyUHVuYyA9PSBcIltcIikgcHVzaENvbnRleHQoc3RhdGUsIHN0cmVhbS5jb2x1bW4oKSwgXCJdXCIpO1xuICAgICAgZWxzZSBpZiAoY3VyUHVuYyA9PSBcIihcIikgcHVzaENvbnRleHQoc3RhdGUsIHN0cmVhbS5jb2x1bW4oKSwgXCIpXCIpO1xuICAgICAgZWxzZSBpZiAoY3VyUHVuYyA9PSBcIn1cIikge1xuICAgICAgICB3aGlsZSAoaXNTdGF0ZW1lbnQoY3R4LnR5cGUpKSBjdHggPSBwb3BDb250ZXh0KHN0YXRlKTtcbiAgICAgICAgaWYgKGN0eC50eXBlID09IFwifVwiKSBjdHggPSBwb3BDb250ZXh0KHN0YXRlKTtcbiAgICAgICAgd2hpbGUgKGlzU3RhdGVtZW50KGN0eC50eXBlKSkgY3R4ID0gcG9wQ29udGV4dChzdGF0ZSk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChjdXJQdW5jID09IGN0eC50eXBlKSBwb3BDb250ZXh0KHN0YXRlKTtcbiAgICAgIGVsc2UgaWYgKGluZGVudFN0YXRlbWVudHMgJiZcbiAgICAgICAgICAgICAgICgoKGN0eC50eXBlID09IFwifVwiIHx8IGN0eC50eXBlID09IFwidG9wXCIpICYmIGN1clB1bmMgIT0gXCI7XCIpIHx8XG4gICAgICAgICAgICAgICAgKGlzU3RhdGVtZW50KGN0eC50eXBlKSAmJiBjdXJQdW5jID09IFwibmV3c3RhdGVtZW50XCIpKSkge1xuICAgICAgICB2YXIgdHlwZSA9IFwic3RhdGVtZW50XCI7XG4gICAgICAgIGlmIChjdXJQdW5jID09IFwibmV3c3RhdGVtZW50XCIgJiYgaW5kZW50U3dpdGNoICYmIHN0cmVhbS5jdXJyZW50KCkgPT0gXCJzd2l0Y2hcIilcbiAgICAgICAgICB0eXBlID0gXCJzd2l0Y2hzdGF0ZW1lbnRcIjtcbiAgICAgICAgZWxzZSBpZiAoc3R5bGUgPT0gXCJrZXl3b3JkXCIgJiYgc3RyZWFtLmN1cnJlbnQoKSA9PSBcIm5hbWVzcGFjZVwiKVxuICAgICAgICAgIHR5cGUgPSBcIm5hbWVzcGFjZVwiO1xuICAgICAgICBwdXNoQ29udGV4dChzdGF0ZSwgc3RyZWFtLmNvbHVtbigpLCB0eXBlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0eWxlID09IFwidmFyaWFibGVcIiAmJlxuICAgICAgICAgICgoc3RhdGUucHJldlRva2VuID09IFwiZGVmXCIgfHxcbiAgICAgICAgICAgIChwYXJzZXJDb25maWcudHlwZUZpcnN0RGVmaW5pdGlvbnMgJiYgdHlwZUJlZm9yZShzdHJlYW0sIHN0YXRlKSAmJlxuICAgICAgICAgICAgIGlzVG9wU2NvcGUoc3RhdGUuY29udGV4dCkgJiYgc3RyZWFtLm1hdGNoKC9eXFxzKlxcKC8sIGZhbHNlKSkpKSlcbiAgICAgICAgc3R5bGUgPSBcImRlZlwiO1xuXG4gICAgICBpZiAoaG9va3MudG9rZW4pIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGhvb2tzLnRva2VuKHN0cmVhbSwgc3RhdGUsIHN0eWxlKTtcbiAgICAgICAgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSBzdHlsZSA9IHJlc3VsdDtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0eWxlID09IFwiZGVmXCIgJiYgcGFyc2VyQ29uZmlnLnN0eWxlRGVmcyA9PT0gZmFsc2UpIHN0eWxlID0gXCJ2YXJpYWJsZVwiO1xuXG4gICAgICBzdGF0ZS5zdGFydE9mTGluZSA9IGZhbHNlO1xuICAgICAgc3RhdGUucHJldlRva2VuID0gaXNEZWZLZXl3b3JkID8gXCJkZWZcIiA6IHN0eWxlIHx8IGN1clB1bmM7XG4gICAgICByZXR1cm4gc3R5bGU7XG4gICAgfSxcblxuICAgIGluZGVudDogZnVuY3Rpb24oc3RhdGUsIHRleHRBZnRlcikge1xuICAgICAgaWYgKHN0YXRlLnRva2VuaXplICE9IHRva2VuQmFzZSAmJiBzdGF0ZS50b2tlbml6ZSAhPSBudWxsKSByZXR1cm4gQ29kZU1pcnJvci5QYXNzO1xuICAgICAgdmFyIGN0eCA9IHN0YXRlLmNvbnRleHQsIGZpcnN0Q2hhciA9IHRleHRBZnRlciAmJiB0ZXh0QWZ0ZXIuY2hhckF0KDApO1xuICAgICAgaWYgKGlzU3RhdGVtZW50KGN0eC50eXBlKSAmJiBmaXJzdENoYXIgPT0gXCJ9XCIpIGN0eCA9IGN0eC5wcmV2O1xuICAgICAgaWYgKGhvb2tzLmluZGVudCkge1xuICAgICAgICB2YXIgaG9vayA9IGhvb2tzLmluZGVudChzdGF0ZSwgY3R4LCB0ZXh0QWZ0ZXIpO1xuICAgICAgICBpZiAodHlwZW9mIGhvb2sgPT0gXCJudW1iZXJcIikgcmV0dXJuIGhvb2tcbiAgICAgIH1cbiAgICAgIHZhciBjbG9zaW5nID0gZmlyc3RDaGFyID09IGN0eC50eXBlO1xuICAgICAgdmFyIHN3aXRjaEJsb2NrID0gY3R4LnByZXYgJiYgY3R4LnByZXYudHlwZSA9PSBcInN3aXRjaHN0YXRlbWVudFwiO1xuICAgICAgaWYgKGlzU3RhdGVtZW50KGN0eC50eXBlKSlcbiAgICAgICAgcmV0dXJuIGN0eC5pbmRlbnRlZCArIChmaXJzdENoYXIgPT0gXCJ7XCIgPyAwIDogc3RhdGVtZW50SW5kZW50VW5pdCk7XG4gICAgICBpZiAoY3R4LmFsaWduICYmICghZG9udEFsaWduQ2FsbHMgfHwgY3R4LnR5cGUgIT0gXCIpXCIpKVxuICAgICAgICByZXR1cm4gY3R4LmNvbHVtbiArIChjbG9zaW5nID8gMCA6IDEpO1xuICAgICAgaWYgKGN0eC50eXBlID09IFwiKVwiICYmICFjbG9zaW5nKVxuICAgICAgICByZXR1cm4gY3R4LmluZGVudGVkICsgc3RhdGVtZW50SW5kZW50VW5pdDtcblxuICAgICAgcmV0dXJuIGN0eC5pbmRlbnRlZCArIChjbG9zaW5nID8gMCA6IGluZGVudFVuaXQpICtcbiAgICAgICAgKCFjbG9zaW5nICYmIHN3aXRjaEJsb2NrICYmICEvXig/OmNhc2V8ZGVmYXVsdClcXGIvLnRlc3QodGV4dEFmdGVyKSA/IGluZGVudFVuaXQgOiAwKTtcbiAgICB9LFxuXG4gICAgZWxlY3RyaWNJbnB1dDogaW5kZW50U3dpdGNoID8gL15cXHMqKD86Y2FzZSAuKj86fGRlZmF1bHQ6fFxce1xcfT98XFx9KSQvIDogL15cXHMqW3t9XSQvLFxuICAgIGJsb2NrQ29tbWVudFN0YXJ0OiBcIi8qXCIsXG4gICAgYmxvY2tDb21tZW50RW5kOiBcIiovXCIsXG4gICAgbGluZUNvbW1lbnQ6IFwiLy9cIixcbiAgICBmb2xkOiBcImJyYWNlXCJcbiAgfTtcbn0pO1xuXG4gIGZ1bmN0aW9uIHdvcmRzKHN0cikge1xuICAgIHZhciBvYmogPSB7fSwgd29yZHMgPSBzdHIuc3BsaXQoXCIgXCIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd29yZHMubGVuZ3RoOyArK2kpIG9ialt3b3Jkc1tpXV0gPSB0cnVlO1xuICAgIHJldHVybiBvYmo7XG4gIH1cbiAgZnVuY3Rpb24gY29udGFpbnMod29yZHMsIHdvcmQpIHtcbiAgICBpZiAodHlwZW9mIHdvcmRzID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybiB3b3Jkcyh3b3JkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHdvcmRzLnByb3BlcnR5SXNFbnVtZXJhYmxlKHdvcmQpO1xuICAgIH1cbiAgfVxuICB2YXIgY0tleXdvcmRzID0gXCJhdXRvIGlmIGJyZWFrIGNhc2UgcmVnaXN0ZXIgY29udGludWUgcmV0dXJuIGRlZmF1bHQgZG8gc2l6ZW9mIFwiICtcbiAgICBcInN0YXRpYyBlbHNlIHN0cnVjdCBzd2l0Y2ggZXh0ZXJuIHR5cGVkZWYgZmxvYXQgdW5pb24gZm9yIFwiICtcbiAgICBcImdvdG8gd2hpbGUgZW51bSBjb25zdCB2b2xhdGlsZVwiO1xuICB2YXIgY1R5cGVzID0gXCJpbnQgbG9uZyBjaGFyIHNob3J0IGRvdWJsZSBmbG9hdCB1bnNpZ25lZCBzaWduZWQgdm9pZCBzaXplX3QgcHRyZGlmZl90XCI7XG5cbiAgZnVuY3Rpb24gY3BwSG9vayhzdHJlYW0sIHN0YXRlKSB7XG4gICAgaWYgKCFzdGF0ZS5zdGFydE9mTGluZSkgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAoOzspIHtcbiAgICAgIGlmIChzdHJlYW0uc2tpcFRvKFwiXFxcXFwiKSkge1xuICAgICAgICBzdHJlYW0ubmV4dCgpO1xuICAgICAgICBpZiAoc3RyZWFtLmVvbCgpKSB7XG4gICAgICAgICAgc3RhdGUudG9rZW5pemUgPSBjcHBIb29rO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdHJlYW0uc2tpcFRvRW5kKCk7XG4gICAgICAgIHN0YXRlLnRva2VuaXplID0gbnVsbDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBcIm1ldGFcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBvaW50ZXJIb29rKF9zdHJlYW0sIHN0YXRlKSB7XG4gICAgaWYgKHN0YXRlLnByZXZUb2tlbiA9PSBcInZhcmlhYmxlLTNcIikgcmV0dXJuIFwidmFyaWFibGUtM1wiO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNwcDE0TGl0ZXJhbChzdHJlYW0pIHtcbiAgICBzdHJlYW0uZWF0V2hpbGUoL1tcXHdcXC4nXS8pO1xuICAgIHJldHVybiBcIm51bWJlclwiO1xuICB9XG5cbiAgZnVuY3Rpb24gY3BwMTFTdHJpbmdIb29rKHN0cmVhbSwgc3RhdGUpIHtcbiAgICBzdHJlYW0uYmFja1VwKDEpO1xuICAgIC8vIFJhdyBzdHJpbmdzLlxuICAgIGlmIChzdHJlYW0ubWF0Y2goLyhSfHU4Unx1UnxVUnxMUikvKSkge1xuICAgICAgdmFyIG1hdGNoID0gc3RyZWFtLm1hdGNoKC9cIihbXlxcc1xcXFwoKV17MCwxNn0pXFwoLyk7XG4gICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHN0YXRlLmNwcDExUmF3U3RyaW5nRGVsaW0gPSBtYXRjaFsxXTtcbiAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5SYXdTdHJpbmc7XG4gICAgICByZXR1cm4gdG9rZW5SYXdTdHJpbmcoc3RyZWFtLCBzdGF0ZSk7XG4gICAgfVxuICAgIC8vIFVuaWNvZGUgc3RyaW5ncy9jaGFycy5cbiAgICBpZiAoc3RyZWFtLm1hdGNoKC8odTh8dXxVfEwpLykpIHtcbiAgICAgIGlmIChzdHJlYW0ubWF0Y2goL1tcIiddLywgLyogZWF0ICovIGZhbHNlKSkge1xuICAgICAgICByZXR1cm4gXCJzdHJpbmdcIjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gSWdub3JlIHRoaXMgaG9vay5cbiAgICBzdHJlYW0ubmV4dCgpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNwcExvb2tzTGlrZUNvbnN0cnVjdG9yKHdvcmQpIHtcbiAgICB2YXIgbGFzdFR3byA9IC8oXFx3Kyk6OihcXHcrKSQvLmV4ZWMod29yZCk7XG4gICAgcmV0dXJuIGxhc3RUd28gJiYgbGFzdFR3b1sxXSA9PSBsYXN0VHdvWzJdO1xuICB9XG5cbiAgLy8gQyMtc3R5bGUgc3RyaW5ncyB3aGVyZSBcIlwiIGVzY2FwZXMgYSBxdW90ZS5cbiAgZnVuY3Rpb24gdG9rZW5BdFN0cmluZyhzdHJlYW0sIHN0YXRlKSB7XG4gICAgdmFyIG5leHQ7XG4gICAgd2hpbGUgKChuZXh0ID0gc3RyZWFtLm5leHQoKSkgIT0gbnVsbCkge1xuICAgICAgaWYgKG5leHQgPT0gJ1wiJyAmJiAhc3RyZWFtLmVhdCgnXCInKSkge1xuICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IG51bGw7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gXCJzdHJpbmdcIjtcbiAgfVxuXG4gIC8vIEMrKzExIHJhdyBzdHJpbmcgbGl0ZXJhbCBpcyA8cHJlZml4PlwiPGRlbGltPiggYW55dGhpbmcgKTxkZWxpbT5cIiwgd2hlcmVcbiAgLy8gPGRlbGltPiBjYW4gYmUgYSBzdHJpbmcgdXAgdG8gMTYgY2hhcmFjdGVycyBsb25nLlxuICBmdW5jdGlvbiB0b2tlblJhd1N0cmluZyhzdHJlYW0sIHN0YXRlKSB7XG4gICAgLy8gRXNjYXBlIGNoYXJhY3RlcnMgdGhhdCBoYXZlIHNwZWNpYWwgcmVnZXggbWVhbmluZ3MuXG4gICAgdmFyIGRlbGltID0gc3RhdGUuY3BwMTFSYXdTdHJpbmdEZWxpbS5yZXBsYWNlKC9bXlxcd1xcc10vZywgJ1xcXFwkJicpO1xuICAgIHZhciBtYXRjaCA9IHN0cmVhbS5tYXRjaChuZXcgUmVnRXhwKFwiLio/XFxcXClcIiArIGRlbGltICsgJ1wiJykpO1xuICAgIGlmIChtYXRjaClcbiAgICAgIHN0YXRlLnRva2VuaXplID0gbnVsbDtcbiAgICBlbHNlXG4gICAgICBzdHJlYW0uc2tpcFRvRW5kKCk7XG4gICAgcmV0dXJuIFwic3RyaW5nXCI7XG4gIH1cblxuICBmdW5jdGlvbiBkZWYobWltZXMsIG1vZGUpIHtcbiAgICBpZiAodHlwZW9mIG1pbWVzID09IFwic3RyaW5nXCIpIG1pbWVzID0gW21pbWVzXTtcbiAgICB2YXIgd29yZHMgPSBbXTtcbiAgICBmdW5jdGlvbiBhZGQob2JqKSB7XG4gICAgICBpZiAob2JqKSBmb3IgKHZhciBwcm9wIGluIG9iaikgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSlcbiAgICAgICAgd29yZHMucHVzaChwcm9wKTtcbiAgICB9XG4gICAgYWRkKG1vZGUua2V5d29yZHMpO1xuICAgIGFkZChtb2RlLnR5cGVzKTtcbiAgICBhZGQobW9kZS5idWlsdGluKTtcbiAgICBhZGQobW9kZS5hdG9tcyk7XG4gICAgaWYgKHdvcmRzLmxlbmd0aCkge1xuICAgICAgbW9kZS5oZWxwZXJUeXBlID0gbWltZXNbMF07XG4gICAgICBDb2RlTWlycm9yLnJlZ2lzdGVySGVscGVyKFwiaGludFdvcmRzXCIsIG1pbWVzWzBdLCB3b3Jkcyk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtaW1lcy5sZW5ndGg7ICsraSlcbiAgICAgIENvZGVNaXJyb3IuZGVmaW5lTUlNRShtaW1lc1tpXSwgbW9kZSk7XG4gIH1cblxuICBkZWYoW1widGV4dC94LWNzcmNcIiwgXCJ0ZXh0L3gtY1wiLCBcInRleHQveC1jaGRyXCJdLCB7XG4gICAgbmFtZTogXCJjbGlrZVwiLFxuICAgIGtleXdvcmRzOiB3b3JkcyhjS2V5d29yZHMpLFxuICAgIHR5cGVzOiB3b3JkcyhjVHlwZXMgKyBcIiBib29sIF9Db21wbGV4IF9Cb29sIGZsb2F0X3QgZG91YmxlX3QgaW50cHRyX3QgaW50bWF4X3QgXCIgK1xuICAgICAgICAgICAgICAgICBcImludDhfdCBpbnQxNl90IGludDMyX3QgaW50NjRfdCB1aW50cHRyX3QgdWludG1heF90IHVpbnQ4X3QgdWludDE2X3QgXCIgK1xuICAgICAgICAgICAgICAgICBcInVpbnQzMl90IHVpbnQ2NF90XCIpLFxuICAgIGJsb2NrS2V5d29yZHM6IHdvcmRzKFwiY2FzZSBkbyBlbHNlIGZvciBpZiBzd2l0Y2ggd2hpbGUgc3RydWN0XCIpLFxuICAgIGRlZktleXdvcmRzOiB3b3JkcyhcInN0cnVjdFwiKSxcbiAgICB0eXBlRmlyc3REZWZpbml0aW9uczogdHJ1ZSxcbiAgICBhdG9tczogd29yZHMoXCJudWxsIHRydWUgZmFsc2VcIiksXG4gICAgaG9va3M6IHtcIiNcIjogY3BwSG9vaywgXCIqXCI6IHBvaW50ZXJIb29rfSxcbiAgICBtb2RlUHJvcHM6IHtmb2xkOiBbXCJicmFjZVwiLCBcImluY2x1ZGVcIl19XG4gIH0pO1xuXG4gIGRlZihbXCJ0ZXh0L3gtYysrc3JjXCIsIFwidGV4dC94LWMrK2hkclwiXSwge1xuICAgIG5hbWU6IFwiY2xpa2VcIixcbiAgICBrZXl3b3Jkczogd29yZHMoY0tleXdvcmRzICsgXCIgYXNtIGR5bmFtaWNfY2FzdCBuYW1lc3BhY2UgcmVpbnRlcnByZXRfY2FzdCB0cnkgZXhwbGljaXQgbmV3IFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJzdGF0aWNfY2FzdCB0eXBlaWQgY2F0Y2ggb3BlcmF0b3IgdGVtcGxhdGUgdHlwZW5hbWUgY2xhc3MgZnJpZW5kIHByaXZhdGUgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcInRoaXMgdXNpbmcgY29uc3RfY2FzdCBpbmxpbmUgcHVibGljIHRocm93IHZpcnR1YWwgZGVsZXRlIG11dGFibGUgcHJvdGVjdGVkIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJhbGlnbmFzIGFsaWdub2YgY29uc3RleHByIGRlY2x0eXBlIG51bGxwdHIgbm9leGNlcHQgdGhyZWFkX2xvY2FsIGZpbmFsIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJzdGF0aWNfYXNzZXJ0IG92ZXJyaWRlXCIpLFxuICAgIHR5cGVzOiB3b3JkcyhjVHlwZXMgKyBcIiBib29sIHdjaGFyX3RcIiksXG4gICAgYmxvY2tLZXl3b3Jkczogd29yZHMoXCJjYXRjaCBjbGFzcyBkbyBlbHNlIGZpbmFsbHkgZm9yIGlmIHN0cnVjdCBzd2l0Y2ggdHJ5IHdoaWxlXCIpLFxuICAgIGRlZktleXdvcmRzOiB3b3JkcyhcImNsYXNzIG5hbWVzcGFjZSBzdHJ1Y3QgZW51bSB1bmlvblwiKSxcbiAgICB0eXBlRmlyc3REZWZpbml0aW9uczogdHJ1ZSxcbiAgICBhdG9tczogd29yZHMoXCJ0cnVlIGZhbHNlIG51bGxcIiksXG4gICAgaG9va3M6IHtcbiAgICAgIFwiI1wiOiBjcHBIb29rLFxuICAgICAgXCIqXCI6IHBvaW50ZXJIb29rLFxuICAgICAgXCJ1XCI6IGNwcDExU3RyaW5nSG9vayxcbiAgICAgIFwiVVwiOiBjcHAxMVN0cmluZ0hvb2ssXG4gICAgICBcIkxcIjogY3BwMTFTdHJpbmdIb29rLFxuICAgICAgXCJSXCI6IGNwcDExU3RyaW5nSG9vayxcbiAgICAgIFwiMFwiOiBjcHAxNExpdGVyYWwsXG4gICAgICBcIjFcIjogY3BwMTRMaXRlcmFsLFxuICAgICAgXCIyXCI6IGNwcDE0TGl0ZXJhbCxcbiAgICAgIFwiM1wiOiBjcHAxNExpdGVyYWwsXG4gICAgICBcIjRcIjogY3BwMTRMaXRlcmFsLFxuICAgICAgXCI1XCI6IGNwcDE0TGl0ZXJhbCxcbiAgICAgIFwiNlwiOiBjcHAxNExpdGVyYWwsXG4gICAgICBcIjdcIjogY3BwMTRMaXRlcmFsLFxuICAgICAgXCI4XCI6IGNwcDE0TGl0ZXJhbCxcbiAgICAgIFwiOVwiOiBjcHAxNExpdGVyYWwsXG4gICAgICB0b2tlbjogZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSwgc3R5bGUpIHtcbiAgICAgICAgaWYgKHN0eWxlID09IFwidmFyaWFibGVcIiAmJiBzdHJlYW0ucGVlaygpID09IFwiKFwiICYmXG4gICAgICAgICAgICAoc3RhdGUucHJldlRva2VuID09IFwiO1wiIHx8IHN0YXRlLnByZXZUb2tlbiA9PSBudWxsIHx8XG4gICAgICAgICAgICAgc3RhdGUucHJldlRva2VuID09IFwifVwiKSAmJlxuICAgICAgICAgICAgY3BwTG9va3NMaWtlQ29uc3RydWN0b3Ioc3RyZWFtLmN1cnJlbnQoKSkpXG4gICAgICAgICAgcmV0dXJuIFwiZGVmXCI7XG4gICAgICB9XG4gICAgfSxcbiAgICBuYW1lc3BhY2VTZXBhcmF0b3I6IFwiOjpcIixcbiAgICBtb2RlUHJvcHM6IHtmb2xkOiBbXCJicmFjZVwiLCBcImluY2x1ZGVcIl19XG4gIH0pO1xuXG4gIGRlZihcInRleHQveC1qYXZhXCIsIHtcbiAgICBuYW1lOiBcImNsaWtlXCIsXG4gICAga2V5d29yZHM6IHdvcmRzKFwiYWJzdHJhY3QgYXNzZXJ0IGJyZWFrIGNhc2UgY2F0Y2ggY2xhc3MgY29uc3QgY29udGludWUgZGVmYXVsdCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiZG8gZWxzZSBlbnVtIGV4dGVuZHMgZmluYWwgZmluYWxseSBmbG9hdCBmb3IgZ290byBpZiBpbXBsZW1lbnRzIGltcG9ydCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiaW5zdGFuY2VvZiBpbnRlcmZhY2UgbmF0aXZlIG5ldyBwYWNrYWdlIHByaXZhdGUgcHJvdGVjdGVkIHB1YmxpYyBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwicmV0dXJuIHN0YXRpYyBzdHJpY3RmcCBzdXBlciBzd2l0Y2ggc3luY2hyb25pemVkIHRoaXMgdGhyb3cgdGhyb3dzIHRyYW5zaWVudCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwidHJ5IHZvbGF0aWxlIHdoaWxlXCIpLFxuICAgIHR5cGVzOiB3b3JkcyhcImJ5dGUgc2hvcnQgaW50IGxvbmcgZmxvYXQgZG91YmxlIGJvb2xlYW4gY2hhciB2b2lkIEJvb2xlYW4gQnl0ZSBDaGFyYWN0ZXIgRG91YmxlIEZsb2F0IFwiICtcbiAgICAgICAgICAgICAgICAgXCJJbnRlZ2VyIExvbmcgTnVtYmVyIE9iamVjdCBTaG9ydCBTdHJpbmcgU3RyaW5nQnVmZmVyIFN0cmluZ0J1aWxkZXIgVm9pZFwiKSxcbiAgICBibG9ja0tleXdvcmRzOiB3b3JkcyhcImNhdGNoIGNsYXNzIGRvIGVsc2UgZmluYWxseSBmb3IgaWYgc3dpdGNoIHRyeSB3aGlsZVwiKSxcbiAgICBkZWZLZXl3b3Jkczogd29yZHMoXCJjbGFzcyBpbnRlcmZhY2UgcGFja2FnZSBlbnVtXCIpLFxuICAgIHR5cGVGaXJzdERlZmluaXRpb25zOiB0cnVlLFxuICAgIGF0b21zOiB3b3JkcyhcInRydWUgZmFsc2UgbnVsbFwiKSxcbiAgICBlbmRTdGF0ZW1lbnQ6IC9eWzs6XSQvLFxuICAgIGhvb2tzOiB7XG4gICAgICBcIkBcIjogZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgICAgIHN0cmVhbS5lYXRXaGlsZSgvW1xcd1xcJF9dLyk7XG4gICAgICAgIHJldHVybiBcIm1ldGFcIjtcbiAgICAgIH1cbiAgICB9LFxuICAgIG1vZGVQcm9wczoge2ZvbGQ6IFtcImJyYWNlXCIsIFwiaW1wb3J0XCJdfVxuICB9KTtcblxuICBkZWYoXCJ0ZXh0L3gtY3NoYXJwXCIsIHtcbiAgICBuYW1lOiBcImNsaWtlXCIsXG4gICAga2V5d29yZHM6IHdvcmRzKFwiYWJzdHJhY3QgYXMgYXN5bmMgYXdhaXQgYmFzZSBicmVhayBjYXNlIGNhdGNoIGNoZWNrZWQgY2xhc3MgY29uc3QgY29udGludWVcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiIGRlZmF1bHQgZGVsZWdhdGUgZG8gZWxzZSBlbnVtIGV2ZW50IGV4cGxpY2l0IGV4dGVybiBmaW5hbGx5IGZpeGVkIGZvclwiICtcbiAgICAgICAgICAgICAgICAgICAgXCIgZm9yZWFjaCBnb3RvIGlmIGltcGxpY2l0IGluIGludGVyZmFjZSBpbnRlcm5hbCBpcyBsb2NrIG5hbWVzcGFjZSBuZXdcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiIG9wZXJhdG9yIG91dCBvdmVycmlkZSBwYXJhbXMgcHJpdmF0ZSBwcm90ZWN0ZWQgcHVibGljIHJlYWRvbmx5IHJlZiByZXR1cm4gc2VhbGVkXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIiBzaXplb2Ygc3RhY2thbGxvYyBzdGF0aWMgc3RydWN0IHN3aXRjaCB0aGlzIHRocm93IHRyeSB0eXBlb2YgdW5jaGVja2VkXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIiB1bnNhZmUgdXNpbmcgdmlydHVhbCB2b2lkIHZvbGF0aWxlIHdoaWxlIGFkZCBhbGlhcyBhc2NlbmRpbmcgZGVzY2VuZGluZyBkeW5hbWljIGZyb20gZ2V0XCIgK1xuICAgICAgICAgICAgICAgICAgICBcIiBnbG9iYWwgZ3JvdXAgaW50byBqb2luIGxldCBvcmRlcmJ5IHBhcnRpYWwgcmVtb3ZlIHNlbGVjdCBzZXQgdmFsdWUgdmFyIHlpZWxkXCIpLFxuICAgIHR5cGVzOiB3b3JkcyhcIkFjdGlvbiBCb29sZWFuIEJ5dGUgQ2hhciBEYXRlVGltZSBEYXRlVGltZU9mZnNldCBEZWNpbWFsIERvdWJsZSBGdW5jXCIgK1xuICAgICAgICAgICAgICAgICBcIiBHdWlkIEludDE2IEludDMyIEludDY0IE9iamVjdCBTQnl0ZSBTaW5nbGUgU3RyaW5nIFRhc2sgVGltZVNwYW4gVUludDE2IFVJbnQzMlwiICtcbiAgICAgICAgICAgICAgICAgXCIgVUludDY0IGJvb2wgYnl0ZSBjaGFyIGRlY2ltYWwgZG91YmxlIHNob3J0IGludCBsb25nIG9iamVjdFwiICArXG4gICAgICAgICAgICAgICAgIFwiIHNieXRlIGZsb2F0IHN0cmluZyB1c2hvcnQgdWludCB1bG9uZ1wiKSxcbiAgICBibG9ja0tleXdvcmRzOiB3b3JkcyhcImNhdGNoIGNsYXNzIGRvIGVsc2UgZmluYWxseSBmb3IgZm9yZWFjaCBpZiBzdHJ1Y3Qgc3dpdGNoIHRyeSB3aGlsZVwiKSxcbiAgICBkZWZLZXl3b3Jkczogd29yZHMoXCJjbGFzcyBpbnRlcmZhY2UgbmFtZXNwYWNlIHN0cnVjdCB2YXJcIiksXG4gICAgdHlwZUZpcnN0RGVmaW5pdGlvbnM6IHRydWUsXG4gICAgYXRvbXM6IHdvcmRzKFwidHJ1ZSBmYWxzZSBudWxsXCIpLFxuICAgIGhvb2tzOiB7XG4gICAgICBcIkBcIjogZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgICBpZiAoc3RyZWFtLmVhdCgnXCInKSkge1xuICAgICAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5BdFN0cmluZztcbiAgICAgICAgICByZXR1cm4gdG9rZW5BdFN0cmluZyhzdHJlYW0sIHN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICBzdHJlYW0uZWF0V2hpbGUoL1tcXHdcXCRfXS8pO1xuICAgICAgICByZXR1cm4gXCJtZXRhXCI7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBmdW5jdGlvbiB0b2tlblRyaXBsZVN0cmluZyhzdHJlYW0sIHN0YXRlKSB7XG4gICAgdmFyIGVzY2FwZWQgPSBmYWxzZTtcbiAgICB3aGlsZSAoIXN0cmVhbS5lb2woKSkge1xuICAgICAgaWYgKCFlc2NhcGVkICYmIHN0cmVhbS5tYXRjaCgnXCJcIlwiJykpIHtcbiAgICAgICAgc3RhdGUudG9rZW5pemUgPSBudWxsO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGVzY2FwZWQgPSBzdHJlYW0ubmV4dCgpID09IFwiXFxcXFwiICYmICFlc2NhcGVkO1xuICAgIH1cbiAgICByZXR1cm4gXCJzdHJpbmdcIjtcbiAgfVxuXG4gIGRlZihcInRleHQveC1zY2FsYVwiLCB7XG4gICAgbmFtZTogXCJjbGlrZVwiLFxuICAgIGtleXdvcmRzOiB3b3JkcyhcblxuICAgICAgLyogc2NhbGEgKi9cbiAgICAgIFwiYWJzdHJhY3QgY2FzZSBjYXRjaCBjbGFzcyBkZWYgZG8gZWxzZSBleHRlbmRzIGZpbmFsIGZpbmFsbHkgZm9yIGZvclNvbWUgaWYgXCIgK1xuICAgICAgXCJpbXBsaWNpdCBpbXBvcnQgbGF6eSBtYXRjaCBuZXcgbnVsbCBvYmplY3Qgb3ZlcnJpZGUgcGFja2FnZSBwcml2YXRlIHByb3RlY3RlZCByZXR1cm4gXCIgK1xuICAgICAgXCJzZWFsZWQgc3VwZXIgdGhpcyB0aHJvdyB0cmFpdCB0cnkgdHlwZSB2YWwgdmFyIHdoaWxlIHdpdGggeWllbGQgXyA6ID0gPT4gPC0gPDogXCIgK1xuICAgICAgXCI8JSA+OiAjIEAgXCIgK1xuXG4gICAgICAvKiBwYWNrYWdlIHNjYWxhICovXG4gICAgICBcImFzc2VydCBhc3N1bWUgcmVxdWlyZSBwcmludCBwcmludGxuIHByaW50ZiByZWFkTGluZSByZWFkQm9vbGVhbiByZWFkQnl0ZSByZWFkU2hvcnQgXCIgK1xuICAgICAgXCJyZWFkQ2hhciByZWFkSW50IHJlYWRMb25nIHJlYWRGbG9hdCByZWFkRG91YmxlIFwiICtcblxuICAgICAgXCI6OiAjOjogXCJcbiAgICApLFxuICAgIHR5cGVzOiB3b3JkcyhcbiAgICAgIFwiQW55VmFsIEFwcCBBcHBsaWNhdGlvbiBBcnJheSBCdWZmZXJlZEl0ZXJhdG9yIEJpZ0RlY2ltYWwgQmlnSW50IENoYXIgQ29uc29sZSBFaXRoZXIgXCIgK1xuICAgICAgXCJFbnVtZXJhdGlvbiBFcXVpdiBFcnJvciBFeGNlcHRpb24gRnJhY3Rpb25hbCBGdW5jdGlvbiBJbmRleGVkU2VxIEludGVncmFsIEl0ZXJhYmxlIFwiICtcbiAgICAgIFwiSXRlcmF0b3IgTGlzdCBNYXAgTnVtZXJpYyBOaWwgTm90TnVsbCBPcHRpb24gT3JkZXJlZCBPcmRlcmluZyBQYXJ0aWFsRnVuY3Rpb24gUGFydGlhbE9yZGVyaW5nIFwiICtcbiAgICAgIFwiUHJvZHVjdCBQcm94eSBSYW5nZSBSZXNwb25kZXIgU2VxIFNlcmlhbGl6YWJsZSBTZXQgU3BlY2lhbGl6YWJsZSBTdHJlYW0gU3RyaW5nQnVpbGRlciBcIiArXG4gICAgICBcIlN0cmluZ0NvbnRleHQgU3ltYm9sIFRocm93YWJsZSBUcmF2ZXJzYWJsZSBUcmF2ZXJzYWJsZU9uY2UgVHVwbGUgVW5pdCBWZWN0b3IgXCIgK1xuXG4gICAgICAvKiBwYWNrYWdlIGphdmEubGFuZyAqL1xuICAgICAgXCJCb29sZWFuIEJ5dGUgQ2hhcmFjdGVyIENoYXJTZXF1ZW5jZSBDbGFzcyBDbGFzc0xvYWRlciBDbG9uZWFibGUgQ29tcGFyYWJsZSBcIiArXG4gICAgICBcIkNvbXBpbGVyIERvdWJsZSBFeGNlcHRpb24gRmxvYXQgSW50ZWdlciBMb25nIE1hdGggTnVtYmVyIE9iamVjdCBQYWNrYWdlIFBhaXIgUHJvY2VzcyBcIiArXG4gICAgICBcIlJ1bnRpbWUgUnVubmFibGUgU2VjdXJpdHlNYW5hZ2VyIFNob3J0IFN0YWNrVHJhY2VFbGVtZW50IFN0cmljdE1hdGggU3RyaW5nIFwiICtcbiAgICAgIFwiU3RyaW5nQnVmZmVyIFN5c3RlbSBUaHJlYWQgVGhyZWFkR3JvdXAgVGhyZWFkTG9jYWwgVGhyb3dhYmxlIFRyaXBsZSBWb2lkXCJcbiAgICApLFxuICAgIG11bHRpTGluZVN0cmluZ3M6IHRydWUsXG4gICAgYmxvY2tLZXl3b3Jkczogd29yZHMoXCJjYXRjaCBjbGFzcyBkbyBlbHNlIGZpbmFsbHkgZm9yIGZvclNvbWUgaWYgbWF0Y2ggc3dpdGNoIHRyeSB3aGlsZVwiKSxcbiAgICBkZWZLZXl3b3Jkczogd29yZHMoXCJjbGFzcyBkZWYgb2JqZWN0IHBhY2thZ2UgdHJhaXQgdHlwZSB2YWwgdmFyXCIpLFxuICAgIGF0b21zOiB3b3JkcyhcInRydWUgZmFsc2UgbnVsbFwiKSxcbiAgICBpbmRlbnRTdGF0ZW1lbnRzOiBmYWxzZSxcbiAgICBpbmRlbnRTd2l0Y2g6IGZhbHNlLFxuICAgIGhvb2tzOiB7XG4gICAgICBcIkBcIjogZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgICAgIHN0cmVhbS5lYXRXaGlsZSgvW1xcd1xcJF9dLyk7XG4gICAgICAgIHJldHVybiBcIm1ldGFcIjtcbiAgICAgIH0sXG4gICAgICAnXCInOiBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7XG4gICAgICAgIGlmICghc3RyZWFtLm1hdGNoKCdcIlwiJykpIHJldHVybiBmYWxzZTtcbiAgICAgICAgc3RhdGUudG9rZW5pemUgPSB0b2tlblRyaXBsZVN0cmluZztcbiAgICAgICAgcmV0dXJuIHN0YXRlLnRva2VuaXplKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgfSxcbiAgICAgIFwiJ1wiOiBmdW5jdGlvbihzdHJlYW0pIHtcbiAgICAgICAgc3RyZWFtLmVhdFdoaWxlKC9bXFx3XFwkX1xceGExLVxcdWZmZmZdLyk7XG4gICAgICAgIHJldHVybiBcImF0b21cIjtcbiAgICAgIH1cbiAgICB9LFxuICAgIG1vZGVQcm9wczoge2Nsb3NlQnJhY2tldHM6IHt0cmlwbGVzOiAnXCInfX1cbiAgfSk7XG5cbiAgZGVmKFwidGV4dC94LWtvdGxpblwiLCB7XG4gICAgbmFtZTogXCJjbGlrZVwiLFxuICAgIGtleXdvcmRzOiB3b3JkcyhcbiAgICAgIC8qa2V5d29yZHMqL1xuICAgICAgXCJwYWNrYWdlIGFzIHR5cGVhbGlhcyBjbGFzcyBpbnRlcmZhY2UgdGhpcyBzdXBlciB2YWwgXCIgK1xuICAgICAgXCJ2YXIgZnVuIGZvciBpcyBpbiBUaGlzIHRocm93IHJldHVybiBcIiArXG4gICAgICBcImJyZWFrIGNvbnRpbnVlIG9iamVjdCBpZiBlbHNlIHdoaWxlIGRvIHRyeSB3aGVuICFpbiAhaXMgYXM/XCIgK1xuXG4gICAgICAvKnNvZnQga2V5d29yZHMqL1xuICAgICAgXCJmaWxlIGltcG9ydCB3aGVyZSBieSBnZXQgc2V0IGFic3RyYWN0IGVudW0gb3BlbiBpbm5lciBvdmVycmlkZSBwcml2YXRlIHB1YmxpYyBpbnRlcm5hbCBcIiArXG4gICAgICBcInByb3RlY3RlZCBjYXRjaCBmaW5hbGx5IG91dCBmaW5hbCB2YXJhcmcgcmVpZmllZCBkeW5hbWljIGNvbXBhbmlvbiBjb25zdHJ1Y3RvciBpbml0IFwiICtcbiAgICAgIFwic2VhbGVkIGZpZWxkIHByb3BlcnR5IHJlY2VpdmVyIHBhcmFtIHNwYXJhbSBsYXRlaW5pdCBkYXRhIGlubGluZSBub2lubGluZSB0YWlscmVjIFwiICtcbiAgICAgIFwiZXh0ZXJuYWwgYW5ub3RhdGlvbiBjcm9zc2lubGluZVwiXG4gICAgKSxcbiAgICB0eXBlczogd29yZHMoXG4gICAgICAvKiBwYWNrYWdlIGphdmEubGFuZyAqL1xuICAgICAgXCJCb29sZWFuIEJ5dGUgQ2hhcmFjdGVyIENoYXJTZXF1ZW5jZSBDbGFzcyBDbGFzc0xvYWRlciBDbG9uZWFibGUgQ29tcGFyYWJsZSBcIiArXG4gICAgICBcIkNvbXBpbGVyIERvdWJsZSBFeGNlcHRpb24gRmxvYXQgSW50ZWdlciBMb25nIE1hdGggTnVtYmVyIE9iamVjdCBQYWNrYWdlIFBhaXIgUHJvY2VzcyBcIiArXG4gICAgICBcIlJ1bnRpbWUgUnVubmFibGUgU2VjdXJpdHlNYW5hZ2VyIFNob3J0IFN0YWNrVHJhY2VFbGVtZW50IFN0cmljdE1hdGggU3RyaW5nIFwiICtcbiAgICAgIFwiU3RyaW5nQnVmZmVyIFN5c3RlbSBUaHJlYWQgVGhyZWFkR3JvdXAgVGhyZWFkTG9jYWwgVGhyb3dhYmxlIFRyaXBsZSBWb2lkXCJcbiAgICApLFxuICAgIG11bHRpTGluZVN0cmluZ3M6IHRydWUsXG4gICAgYmxvY2tLZXl3b3Jkczogd29yZHMoXCJjYXRjaCBjbGFzcyBkbyBlbHNlIGZpbmFsbHkgZm9yIGlmIHdoZXJlIHRyeSB3aGlsZSBlbnVtXCIpLFxuICAgIGRlZktleXdvcmRzOiB3b3JkcyhcImNsYXNzIHZhbCB2YXIgb2JqZWN0IHBhY2thZ2UgaW50ZXJmYWNlIGZ1blwiKSxcbiAgICBhdG9tczogd29yZHMoXCJ0cnVlIGZhbHNlIG51bGwgdGhpc1wiKSxcbiAgICBtb2RlUHJvcHM6IHtjbG9zZUJyYWNrZXRzOiB7dHJpcGxlczogJ1wiJ319XG4gIH0pO1xuXG4gIGRlZihbXCJ4LXNoYWRlci94LXZlcnRleFwiLCBcIngtc2hhZGVyL3gtZnJhZ21lbnRcIl0sIHtcbiAgICBuYW1lOiBcImNsaWtlXCIsXG4gICAga2V5d29yZHM6IHdvcmRzKFwic2FtcGxlcjFEIHNhbXBsZXIyRCBzYW1wbGVyM0Qgc2FtcGxlckN1YmUgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcInNhbXBsZXIxRFNoYWRvdyBzYW1wbGVyMkRTaGFkb3cgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcImNvbnN0IGF0dHJpYnV0ZSB1bmlmb3JtIHZhcnlpbmcgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcImJyZWFrIGNvbnRpbnVlIGRpc2NhcmQgcmV0dXJuIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJmb3Igd2hpbGUgZG8gaWYgZWxzZSBzdHJ1Y3QgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcImluIG91dCBpbm91dFwiKSxcbiAgICB0eXBlczogd29yZHMoXCJmbG9hdCBpbnQgYm9vbCB2b2lkIFwiICtcbiAgICAgICAgICAgICAgICAgXCJ2ZWMyIHZlYzMgdmVjNCBpdmVjMiBpdmVjMyBpdmVjNCBidmVjMiBidmVjMyBidmVjNCBcIiArXG4gICAgICAgICAgICAgICAgIFwibWF0MiBtYXQzIG1hdDRcIiksXG4gICAgYmxvY2tLZXl3b3Jkczogd29yZHMoXCJmb3Igd2hpbGUgZG8gaWYgZWxzZSBzdHJ1Y3RcIiksXG4gICAgYnVpbHRpbjogd29yZHMoXCJyYWRpYW5zIGRlZ3JlZXMgc2luIGNvcyB0YW4gYXNpbiBhY29zIGF0YW4gXCIgK1xuICAgICAgICAgICAgICAgICAgICBcInBvdyBleHAgbG9nIGV4cDIgc3FydCBpbnZlcnNlc3FydCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiYWJzIHNpZ24gZmxvb3IgY2VpbCBmcmFjdCBtb2QgbWluIG1heCBjbGFtcCBtaXggc3RlcCBzbW9vdGhzdGVwIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJsZW5ndGggZGlzdGFuY2UgZG90IGNyb3NzIG5vcm1hbGl6ZSBmdHJhbnNmb3JtIGZhY2Vmb3J3YXJkIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJyZWZsZWN0IHJlZnJhY3QgbWF0cml4Q29tcE11bHQgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcImxlc3NUaGFuIGxlc3NUaGFuRXF1YWwgZ3JlYXRlclRoYW4gZ3JlYXRlclRoYW5FcXVhbCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiZXF1YWwgbm90RXF1YWwgYW55IGFsbCBub3QgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcInRleHR1cmUxRCB0ZXh0dXJlMURQcm9qIHRleHR1cmUxRExvZCB0ZXh0dXJlMURQcm9qTG9kIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJ0ZXh0dXJlMkQgdGV4dHVyZTJEUHJvaiB0ZXh0dXJlMkRMb2QgdGV4dHVyZTJEUHJvakxvZCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwidGV4dHVyZTNEIHRleHR1cmUzRFByb2ogdGV4dHVyZTNETG9kIHRleHR1cmUzRFByb2pMb2QgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcInRleHR1cmVDdWJlIHRleHR1cmVDdWJlTG9kIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJzaGFkb3cxRCBzaGFkb3cyRCBzaGFkb3cxRFByb2ogc2hhZG93MkRQcm9qIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJzaGFkb3cxRExvZCBzaGFkb3cyRExvZCBzaGFkb3cxRFByb2pMb2Qgc2hhZG93MkRQcm9qTG9kIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJkRmR4IGRGZHkgZndpZHRoIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJub2lzZTEgbm9pc2UyIG5vaXNlMyBub2lzZTRcIiksXG4gICAgYXRvbXM6IHdvcmRzKFwidHJ1ZSBmYWxzZSBcIiArXG4gICAgICAgICAgICAgICAgXCJnbF9GcmFnQ29sb3IgZ2xfU2Vjb25kYXJ5Q29sb3IgZ2xfTm9ybWFsIGdsX1ZlcnRleCBcIiArXG4gICAgICAgICAgICAgICAgXCJnbF9NdWx0aVRleENvb3JkMCBnbF9NdWx0aVRleENvb3JkMSBnbF9NdWx0aVRleENvb3JkMiBnbF9NdWx0aVRleENvb3JkMyBcIiArXG4gICAgICAgICAgICAgICAgXCJnbF9NdWx0aVRleENvb3JkNCBnbF9NdWx0aVRleENvb3JkNSBnbF9NdWx0aVRleENvb3JkNiBnbF9NdWx0aVRleENvb3JkNyBcIiArXG4gICAgICAgICAgICAgICAgXCJnbF9Gb2dDb29yZCBnbF9Qb2ludENvb3JkIFwiICtcbiAgICAgICAgICAgICAgICBcImdsX1Bvc2l0aW9uIGdsX1BvaW50U2l6ZSBnbF9DbGlwVmVydGV4IFwiICtcbiAgICAgICAgICAgICAgICBcImdsX0Zyb250Q29sb3IgZ2xfQmFja0NvbG9yIGdsX0Zyb250U2Vjb25kYXJ5Q29sb3IgZ2xfQmFja1NlY29uZGFyeUNvbG9yIFwiICtcbiAgICAgICAgICAgICAgICBcImdsX1RleENvb3JkIGdsX0ZvZ0ZyYWdDb29yZCBcIiArXG4gICAgICAgICAgICAgICAgXCJnbF9GcmFnQ29vcmQgZ2xfRnJvbnRGYWNpbmcgXCIgK1xuICAgICAgICAgICAgICAgIFwiZ2xfRnJhZ0RhdGEgZ2xfRnJhZ0RlcHRoIFwiICtcbiAgICAgICAgICAgICAgICBcImdsX01vZGVsVmlld01hdHJpeCBnbF9Qcm9qZWN0aW9uTWF0cml4IGdsX01vZGVsVmlld1Byb2plY3Rpb25NYXRyaXggXCIgK1xuICAgICAgICAgICAgICAgIFwiZ2xfVGV4dHVyZU1hdHJpeCBnbF9Ob3JtYWxNYXRyaXggZ2xfTW9kZWxWaWV3TWF0cml4SW52ZXJzZSBcIiArXG4gICAgICAgICAgICAgICAgXCJnbF9Qcm9qZWN0aW9uTWF0cml4SW52ZXJzZSBnbF9Nb2RlbFZpZXdQcm9qZWN0aW9uTWF0cml4SW52ZXJzZSBcIiArXG4gICAgICAgICAgICAgICAgXCJnbF9UZXh1cmVNYXRyaXhUcmFuc3Bvc2UgZ2xfTW9kZWxWaWV3TWF0cml4SW52ZXJzZVRyYW5zcG9zZSBcIiArXG4gICAgICAgICAgICAgICAgXCJnbF9Qcm9qZWN0aW9uTWF0cml4SW52ZXJzZVRyYW5zcG9zZSBcIiArXG4gICAgICAgICAgICAgICAgXCJnbF9Nb2RlbFZpZXdQcm9qZWN0aW9uTWF0cml4SW52ZXJzZVRyYW5zcG9zZSBcIiArXG4gICAgICAgICAgICAgICAgXCJnbF9UZXh0dXJlTWF0cml4SW52ZXJzZVRyYW5zcG9zZSBcIiArXG4gICAgICAgICAgICAgICAgXCJnbF9Ob3JtYWxTY2FsZSBnbF9EZXB0aFJhbmdlIGdsX0NsaXBQbGFuZSBcIiArXG4gICAgICAgICAgICAgICAgXCJnbF9Qb2ludCBnbF9Gcm9udE1hdGVyaWFsIGdsX0JhY2tNYXRlcmlhbCBnbF9MaWdodFNvdXJjZSBnbF9MaWdodE1vZGVsIFwiICtcbiAgICAgICAgICAgICAgICBcImdsX0Zyb250TGlnaHRNb2RlbFByb2R1Y3QgZ2xfQmFja0xpZ2h0TW9kZWxQcm9kdWN0IFwiICtcbiAgICAgICAgICAgICAgICBcImdsX1RleHR1cmVDb2xvciBnbF9FeWVQbGFuZVMgZ2xfRXllUGxhbmVUIGdsX0V5ZVBsYW5lUiBnbF9FeWVQbGFuZVEgXCIgK1xuICAgICAgICAgICAgICAgIFwiZ2xfRm9nUGFyYW1ldGVycyBcIiArXG4gICAgICAgICAgICAgICAgXCJnbF9NYXhMaWdodHMgZ2xfTWF4Q2xpcFBsYW5lcyBnbF9NYXhUZXh0dXJlVW5pdHMgZ2xfTWF4VGV4dHVyZUNvb3JkcyBcIiArXG4gICAgICAgICAgICAgICAgXCJnbF9NYXhWZXJ0ZXhBdHRyaWJzIGdsX01heFZlcnRleFVuaWZvcm1Db21wb25lbnRzIGdsX01heFZhcnlpbmdGbG9hdHMgXCIgK1xuICAgICAgICAgICAgICAgIFwiZ2xfTWF4VmVydGV4VGV4dHVyZUltYWdlVW5pdHMgZ2xfTWF4VGV4dHVyZUltYWdlVW5pdHMgXCIgK1xuICAgICAgICAgICAgICAgIFwiZ2xfTWF4RnJhZ21lbnRVbmlmb3JtQ29tcG9uZW50cyBnbF9NYXhDb21iaW5lVGV4dHVyZUltYWdlVW5pdHMgXCIgK1xuICAgICAgICAgICAgICAgIFwiZ2xfTWF4RHJhd0J1ZmZlcnNcIiksXG4gICAgaW5kZW50U3dpdGNoOiBmYWxzZSxcbiAgICBob29rczoge1wiI1wiOiBjcHBIb29rfSxcbiAgICBtb2RlUHJvcHM6IHtmb2xkOiBbXCJicmFjZVwiLCBcImluY2x1ZGVcIl19XG4gIH0pO1xuXG4gIGRlZihcInRleHQveC1uZXNjXCIsIHtcbiAgICBuYW1lOiBcImNsaWtlXCIsXG4gICAga2V5d29yZHM6IHdvcmRzKGNLZXl3b3JkcyArIFwiYXMgYXRvbWljIGFzeW5jIGNhbGwgY29tbWFuZCBjb21wb25lbnQgY29tcG9uZW50cyBjb25maWd1cmF0aW9uIGV2ZW50IGdlbmVyaWMgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcImltcGxlbWVudGF0aW9uIGluY2x1ZGVzIGludGVyZmFjZSBtb2R1bGUgbmV3IG5vcmFjZSBueF9zdHJ1Y3QgbnhfdW5pb24gcG9zdCBwcm92aWRlcyBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwic2lnbmFsIHRhc2sgdXNlcyBhYnN0cmFjdCBleHRlbmRzXCIpLFxuICAgIHR5cGVzOiB3b3JkcyhjVHlwZXMpLFxuICAgIGJsb2NrS2V5d29yZHM6IHdvcmRzKFwiY2FzZSBkbyBlbHNlIGZvciBpZiBzd2l0Y2ggd2hpbGUgc3RydWN0XCIpLFxuICAgIGF0b21zOiB3b3JkcyhcIm51bGwgdHJ1ZSBmYWxzZVwiKSxcbiAgICBob29rczoge1wiI1wiOiBjcHBIb29rfSxcbiAgICBtb2RlUHJvcHM6IHtmb2xkOiBbXCJicmFjZVwiLCBcImluY2x1ZGVcIl19XG4gIH0pO1xuXG4gIGRlZihcInRleHQveC1vYmplY3RpdmVjXCIsIHtcbiAgICBuYW1lOiBcImNsaWtlXCIsXG4gICAga2V5d29yZHM6IHdvcmRzKGNLZXl3b3JkcyArIFwiaW5saW5lIHJlc3RyaWN0IF9Cb29sIF9Db21wbGV4IF9JbWFnaW5lcnkgQk9PTCBDbGFzcyBieWNvcHkgYnlyZWYgaWQgSU1QIGluIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJpbm91dCBuaWwgb25ld2F5IG91dCBQcm90b2NvbCBTRUwgc2VsZiBzdXBlciBhdG9taWMgbm9uYXRvbWljIHJldGFpbiBjb3B5IHJlYWR3cml0ZSByZWFkb25seVwiKSxcbiAgICB0eXBlczogd29yZHMoY1R5cGVzKSxcbiAgICBhdG9tczogd29yZHMoXCJZRVMgTk8gTlVMTCBOSUxMIE9OIE9GRiB0cnVlIGZhbHNlXCIpLFxuICAgIGhvb2tzOiB7XG4gICAgICBcIkBcIjogZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgICAgIHN0cmVhbS5lYXRXaGlsZSgvW1xcd1xcJF0vKTtcbiAgICAgICAgcmV0dXJuIFwia2V5d29yZFwiO1xuICAgICAgfSxcbiAgICAgIFwiI1wiOiBjcHBIb29rLFxuICAgICAgaW5kZW50OiBmdW5jdGlvbihfc3RhdGUsIGN0eCwgdGV4dEFmdGVyKSB7XG4gICAgICAgIGlmIChjdHgudHlwZSA9PSBcInN0YXRlbWVudFwiICYmIC9eQFxcdy8udGVzdCh0ZXh0QWZ0ZXIpKSByZXR1cm4gY3R4LmluZGVudGVkXG4gICAgICB9XG4gICAgfSxcbiAgICBtb2RlUHJvcHM6IHtmb2xkOiBcImJyYWNlXCJ9XG4gIH0pO1xuXG4gIGRlZihcInRleHQveC1zcXVpcnJlbFwiLCB7XG4gICAgbmFtZTogXCJjbGlrZVwiLFxuICAgIGtleXdvcmRzOiB3b3JkcyhcImJhc2UgYnJlYWsgY2xvbmUgY29udGludWUgY29uc3QgZGVmYXVsdCBkZWxldGUgZW51bSBleHRlbmRzIGZ1bmN0aW9uIGluIGNsYXNzXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIiBmb3JlYWNoIGxvY2FsIHJlc3VtZSByZXR1cm4gdGhpcyB0aHJvdyB0eXBlb2YgeWllbGQgY29uc3RydWN0b3IgaW5zdGFuY2VvZiBzdGF0aWNcIiksXG4gICAgdHlwZXM6IHdvcmRzKGNUeXBlcyksXG4gICAgYmxvY2tLZXl3b3Jkczogd29yZHMoXCJjYXNlIGNhdGNoIGNsYXNzIGVsc2UgZm9yIGZvcmVhY2ggaWYgc3dpdGNoIHRyeSB3aGlsZVwiKSxcbiAgICBkZWZLZXl3b3Jkczogd29yZHMoXCJmdW5jdGlvbiBsb2NhbCBjbGFzc1wiKSxcbiAgICB0eXBlRmlyc3REZWZpbml0aW9uczogdHJ1ZSxcbiAgICBhdG9tczogd29yZHMoXCJ0cnVlIGZhbHNlIG51bGxcIiksXG4gICAgaG9va3M6IHtcIiNcIjogY3BwSG9va30sXG4gICAgbW9kZVByb3BzOiB7Zm9sZDogW1wiYnJhY2VcIiwgXCJpbmNsdWRlXCJdfVxuICB9KTtcblxuICAvLyBDZXlsb24gU3RyaW5ncyBuZWVkIHRvIGRlYWwgd2l0aCBpbnRlcnBvbGF0aW9uXG4gIHZhciBzdHJpbmdUb2tlbml6ZXIgPSBudWxsO1xuICBmdW5jdGlvbiB0b2tlbkNleWxvblN0cmluZyh0eXBlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIHZhciBlc2NhcGVkID0gZmFsc2UsIG5leHQsIGVuZCA9IGZhbHNlO1xuICAgICAgd2hpbGUgKCFzdHJlYW0uZW9sKCkpIHtcbiAgICAgICAgaWYgKCFlc2NhcGVkICYmIHN0cmVhbS5tYXRjaCgnXCInKSAmJlxuICAgICAgICAgICAgICAodHlwZSA9PSBcInNpbmdsZVwiIHx8IHN0cmVhbS5tYXRjaCgnXCJcIicpKSkge1xuICAgICAgICAgIGVuZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFlc2NhcGVkICYmIHN0cmVhbS5tYXRjaCgnYGAnKSkge1xuICAgICAgICAgIHN0cmluZ1Rva2VuaXplciA9IHRva2VuQ2V5bG9uU3RyaW5nKHR5cGUpO1xuICAgICAgICAgIGVuZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgbmV4dCA9IHN0cmVhbS5uZXh0KCk7XG4gICAgICAgIGVzY2FwZWQgPSB0eXBlID09IFwic2luZ2xlXCIgJiYgIWVzY2FwZWQgJiYgbmV4dCA9PSBcIlxcXFxcIjtcbiAgICAgIH1cbiAgICAgIGlmIChlbmQpXG4gICAgICAgICAgc3RhdGUudG9rZW5pemUgPSBudWxsO1xuICAgICAgcmV0dXJuIFwic3RyaW5nXCI7XG4gICAgfVxuICB9XG5cbiAgZGVmKFwidGV4dC94LWNleWxvblwiLCB7XG4gICAgbmFtZTogXCJjbGlrZVwiLFxuICAgIGtleXdvcmRzOiB3b3JkcyhcImFic3RyYWN0cyBhbGlhcyBhc3NlbWJseSBhc3NlcnQgYXNzaWduIGJyZWFrIGNhc2UgY2F0Y2ggY2xhc3MgY29udGludWUgZHluYW1pYyBlbHNlXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIiBleGlzdHMgZXh0ZW5kcyBmaW5hbGx5IGZvciBmdW5jdGlvbiBnaXZlbiBpZiBpbXBvcnQgaW4gaW50ZXJmYWNlIGlzIGxldCBtb2R1bGUgbmV3XCIgK1xuICAgICAgICAgICAgICAgICAgICBcIiBub25lbXB0eSBvYmplY3Qgb2Ygb3V0IG91dGVyIHBhY2thZ2UgcmV0dXJuIHNhdGlzZmllcyBzdXBlciBzd2l0Y2ggdGhlbiB0aGlzIHRocm93XCIgK1xuICAgICAgICAgICAgICAgICAgICBcIiB0cnkgdmFsdWUgdm9pZCB3aGlsZVwiKSxcbiAgICB0eXBlczogZnVuY3Rpb24od29yZCkge1xuICAgICAgICAvLyBJbiBDZXlsb24gYWxsIGlkZW50aWZpZXJzIHRoYXQgc3RhcnQgd2l0aCBhbiB1cHBlcmNhc2UgYXJlIHR5cGVzXG4gICAgICAgIHZhciBmaXJzdCA9IHdvcmQuY2hhckF0KDApO1xuICAgICAgICByZXR1cm4gKGZpcnN0ID09PSBmaXJzdC50b1VwcGVyQ2FzZSgpICYmIGZpcnN0ICE9PSBmaXJzdC50b0xvd2VyQ2FzZSgpKTtcbiAgICB9LFxuICAgIGJsb2NrS2V5d29yZHM6IHdvcmRzKFwiY2FzZSBjYXRjaCBjbGFzcyBkeW5hbWljIGVsc2UgZmluYWxseSBmb3IgZnVuY3Rpb24gaWYgaW50ZXJmYWNlIG1vZHVsZSBuZXcgb2JqZWN0IHN3aXRjaCB0cnkgd2hpbGVcIiksXG4gICAgZGVmS2V5d29yZHM6IHdvcmRzKFwiY2xhc3MgZHluYW1pYyBmdW5jdGlvbiBpbnRlcmZhY2UgbW9kdWxlIG9iamVjdCBwYWNrYWdlIHZhbHVlXCIpLFxuICAgIGJ1aWx0aW46IHdvcmRzKFwiYWJzdHJhY3QgYWN0dWFsIGFsaWFzZWQgYW5ub3RhdGlvbiBieSBkZWZhdWx0IGRlcHJlY2F0ZWQgZG9jIGZpbmFsIGZvcm1hbCBsYXRlIGxpY2Vuc2VcIiArXG4gICAgICAgICAgICAgICAgICAgXCIgbmF0aXZlIG9wdGlvbmFsIHNlYWxlZCBzZWUgc2VyaWFsaXphYmxlIHNoYXJlZCBzdXBwcmVzc1dhcm5pbmdzIHRhZ2dlZCB0aHJvd3MgdmFyaWFibGVcIiksXG4gICAgaXNQdW5jdHVhdGlvbkNoYXI6IC9bXFxbXFxde31cXChcXCksO1xcOlxcLmBdLyxcbiAgICBpc09wZXJhdG9yQ2hhcjogL1srXFwtKiYlPTw+IT98Xn46XFwvXS8sXG4gICAgaXNOdW1iZXJDaGFyOiAvW1xcZCMkXS8sXG4gICAgbXVsdGlMaW5lU3RyaW5nczogdHJ1ZSxcbiAgICB0eXBlRmlyc3REZWZpbml0aW9uczogdHJ1ZSxcbiAgICBhdG9tczogd29yZHMoXCJ0cnVlIGZhbHNlIG51bGwgbGFyZ2VyIHNtYWxsZXIgZXF1YWwgZW1wdHkgZmluaXNoZWRcIiksXG4gICAgaW5kZW50U3dpdGNoOiBmYWxzZSxcbiAgICBzdHlsZURlZnM6IGZhbHNlLFxuICAgIGhvb2tzOiB7XG4gICAgICBcIkBcIjogZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgICAgIHN0cmVhbS5lYXRXaGlsZSgvW1xcd1xcJF9dLyk7XG4gICAgICAgIHJldHVybiBcIm1ldGFcIjtcbiAgICAgIH0sXG4gICAgICAnXCInOiBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7XG4gICAgICAgICAgc3RhdGUudG9rZW5pemUgPSB0b2tlbkNleWxvblN0cmluZyhzdHJlYW0ubWF0Y2goJ1wiXCInKSA/IFwidHJpcGxlXCIgOiBcInNpbmdsZVwiKTtcbiAgICAgICAgICByZXR1cm4gc3RhdGUudG9rZW5pemUoc3RyZWFtLCBzdGF0ZSk7XG4gICAgICAgIH0sXG4gICAgICAnYCc6IGZ1bmN0aW9uKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgICAgICBpZiAoIXN0cmluZ1Rva2VuaXplciB8fCAhc3RyZWFtLm1hdGNoKCdgJykpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IHN0cmluZ1Rva2VuaXplcjtcbiAgICAgICAgICBzdHJpbmdUb2tlbml6ZXIgPSBudWxsO1xuICAgICAgICAgIHJldHVybiBzdGF0ZS50b2tlbml6ZShzdHJlYW0sIHN0YXRlKTtcbiAgICAgICAgfSxcbiAgICAgIFwiJ1wiOiBmdW5jdGlvbihzdHJlYW0pIHtcbiAgICAgICAgc3RyZWFtLmVhdFdoaWxlKC9bXFx3XFwkX1xceGExLVxcdWZmZmZdLyk7XG4gICAgICAgIHJldHVybiBcImF0b21cIjtcbiAgICAgIH0sXG4gICAgICB0b2tlbjogZnVuY3Rpb24oX3N0cmVhbSwgc3RhdGUsIHN0eWxlKSB7XG4gICAgICAgICAgaWYgKChzdHlsZSA9PSBcInZhcmlhYmxlXCIgfHwgc3R5bGUgPT0gXCJ2YXJpYWJsZS0zXCIpICYmXG4gICAgICAgICAgICAgIHN0YXRlLnByZXZUb2tlbiA9PSBcIi5cIikge1xuICAgICAgICAgICAgcmV0dXJuIFwidmFyaWFibGUtMlwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgbW9kZVByb3BzOiB7XG4gICAgICAgIGZvbGQ6IFtcImJyYWNlXCIsIFwiaW1wb3J0XCJdLFxuICAgICAgICBjbG9zZUJyYWNrZXRzOiB7dHJpcGxlczogJ1wiJ31cbiAgICB9XG4gIH0pO1xuXG59KTtcbiIsInJlcXVpcmUoJy4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZScpO1xucmVxdWlyZSgnLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uL21vZHVsZXMvY29yZS5nZXQtaXRlcmF0b3InKTsiLCJyZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuYXNzaWduJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uLy4uL21vZHVsZXMvJC5jb3JlJykuT2JqZWN0LmFzc2lnbjsiLCJ2YXIgJCA9IHJlcXVpcmUoJy4uLy4uL21vZHVsZXMvJCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjcmVhdGUoUCwgRCl7XG4gIHJldHVybiAkLmNyZWF0ZShQLCBEKTtcbn07IiwidmFyICQgPSByZXF1aXJlKCcuLi8uLi9tb2R1bGVzLyQnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgZGVzYyl7XG4gIHJldHVybiAkLnNldERlc2MoaXQsIGtleSwgZGVzYyk7XG59OyIsInZhciAkID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy8kJyk7XG5yZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihpdCwga2V5KXtcbiAgcmV0dXJuICQuZ2V0RGVzYyhpdCwga2V5KTtcbn07IiwicmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmtleXMnKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy8kLmNvcmUnKS5PYmplY3Qua2V5czsiLCJyZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Quc2V0LXByb3RvdHlwZS1vZicpO1xubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLi8uLi9tb2R1bGVzLyQuY29yZScpLk9iamVjdC5zZXRQcm90b3R5cGVPZjsiLCJyZXF1aXJlKCcuLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nJyk7XG5yZXF1aXJlKCcuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3InKTtcbnJlcXVpcmUoJy4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZScpO1xucmVxdWlyZSgnLi4vbW9kdWxlcy9lczYucHJvbWlzZScpO1xubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLi9tb2R1bGVzLyQuY29yZScpLlByb21pc2U7IiwicmVxdWlyZSgnLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZycpO1xucmVxdWlyZSgnLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yJyk7XG5yZXF1aXJlKCcuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUnKTtcbnJlcXVpcmUoJy4uL21vZHVsZXMvZXM2LnNldCcpO1xucmVxdWlyZSgnLi4vbW9kdWxlcy9lczcuc2V0LnRvLWpzb24nKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi4vbW9kdWxlcy8kLmNvcmUnKS5TZXQ7IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIGlmKHR5cGVvZiBpdCAhPSAnZnVuY3Rpb24nKXRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGEgZnVuY3Rpb24hJyk7XG4gIHJldHVybiBpdDtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpeyAvKiBlbXB0eSAqLyB9OyIsInZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vJC5pcy1vYmplY3QnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICBpZighaXNPYmplY3QoaXQpKXRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGFuIG9iamVjdCEnKTtcbiAgcmV0dXJuIGl0O1xufTsiLCIvLyBnZXR0aW5nIHRhZyBmcm9tIDE5LjEuMy42IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcoKVxudmFyIGNvZiA9IHJlcXVpcmUoJy4vJC5jb2YnKVxuICAsIFRBRyA9IHJlcXVpcmUoJy4vJC53a3MnKSgndG9TdHJpbmdUYWcnKVxuICAvLyBFUzMgd3JvbmcgaGVyZVxuICAsIEFSRyA9IGNvZihmdW5jdGlvbigpeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpID09ICdBcmd1bWVudHMnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgdmFyIE8sIFQsIEI7XG4gIHJldHVybiBpdCA9PT0gdW5kZWZpbmVkID8gJ1VuZGVmaW5lZCcgOiBpdCA9PT0gbnVsbCA/ICdOdWxsJ1xuICAgIC8vIEBAdG9TdHJpbmdUYWcgY2FzZVxuICAgIDogdHlwZW9mIChUID0gKE8gPSBPYmplY3QoaXQpKVtUQUddKSA9PSAnc3RyaW5nJyA/IFRcbiAgICAvLyBidWlsdGluVGFnIGNhc2VcbiAgICA6IEFSRyA/IGNvZihPKVxuICAgIC8vIEVTMyBhcmd1bWVudHMgZmFsbGJhY2tcbiAgICA6IChCID0gY29mKE8pKSA9PSAnT2JqZWN0JyAmJiB0eXBlb2YgTy5jYWxsZWUgPT0gJ2Z1bmN0aW9uJyA/ICdBcmd1bWVudHMnIDogQjtcbn07IiwidmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbChpdCkuc2xpY2UoOCwgLTEpO1xufTsiLCIndXNlIHN0cmljdCc7XG52YXIgJCAgICAgICAgICAgID0gcmVxdWlyZSgnLi8kJylcbiAgLCBoaWRlICAgICAgICAgPSByZXF1aXJlKCcuLyQuaGlkZScpXG4gICwgcmVkZWZpbmVBbGwgID0gcmVxdWlyZSgnLi8kLnJlZGVmaW5lLWFsbCcpXG4gICwgY3R4ICAgICAgICAgID0gcmVxdWlyZSgnLi8kLmN0eCcpXG4gICwgc3RyaWN0TmV3ICAgID0gcmVxdWlyZSgnLi8kLnN0cmljdC1uZXcnKVxuICAsIGRlZmluZWQgICAgICA9IHJlcXVpcmUoJy4vJC5kZWZpbmVkJylcbiAgLCBmb3JPZiAgICAgICAgPSByZXF1aXJlKCcuLyQuZm9yLW9mJylcbiAgLCAkaXRlckRlZmluZSAgPSByZXF1aXJlKCcuLyQuaXRlci1kZWZpbmUnKVxuICAsIHN0ZXAgICAgICAgICA9IHJlcXVpcmUoJy4vJC5pdGVyLXN0ZXAnKVxuICAsIElEICAgICAgICAgICA9IHJlcXVpcmUoJy4vJC51aWQnKSgnaWQnKVxuICAsICRoYXMgICAgICAgICA9IHJlcXVpcmUoJy4vJC5oYXMnKVxuICAsIGlzT2JqZWN0ICAgICA9IHJlcXVpcmUoJy4vJC5pcy1vYmplY3QnKVxuICAsIHNldFNwZWNpZXMgICA9IHJlcXVpcmUoJy4vJC5zZXQtc3BlY2llcycpXG4gICwgREVTQ1JJUFRPUlMgID0gcmVxdWlyZSgnLi8kLmRlc2NyaXB0b3JzJylcbiAgLCBpc0V4dGVuc2libGUgPSBPYmplY3QuaXNFeHRlbnNpYmxlIHx8IGlzT2JqZWN0XG4gICwgU0laRSAgICAgICAgID0gREVTQ1JJUFRPUlMgPyAnX3MnIDogJ3NpemUnXG4gICwgaWQgICAgICAgICAgID0gMDtcblxudmFyIGZhc3RLZXkgPSBmdW5jdGlvbihpdCwgY3JlYXRlKXtcbiAgLy8gcmV0dXJuIHByaW1pdGl2ZSB3aXRoIHByZWZpeFxuICBpZighaXNPYmplY3QoaXQpKXJldHVybiB0eXBlb2YgaXQgPT0gJ3N5bWJvbCcgPyBpdCA6ICh0eXBlb2YgaXQgPT0gJ3N0cmluZycgPyAnUycgOiAnUCcpICsgaXQ7XG4gIGlmKCEkaGFzKGl0LCBJRCkpe1xuICAgIC8vIGNhbid0IHNldCBpZCB0byBmcm96ZW4gb2JqZWN0XG4gICAgaWYoIWlzRXh0ZW5zaWJsZShpdCkpcmV0dXJuICdGJztcbiAgICAvLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBpZFxuICAgIGlmKCFjcmVhdGUpcmV0dXJuICdFJztcbiAgICAvLyBhZGQgbWlzc2luZyBvYmplY3QgaWRcbiAgICBoaWRlKGl0LCBJRCwgKytpZCk7XG4gIC8vIHJldHVybiBvYmplY3QgaWQgd2l0aCBwcmVmaXhcbiAgfSByZXR1cm4gJ08nICsgaXRbSURdO1xufTtcblxudmFyIGdldEVudHJ5ID0gZnVuY3Rpb24odGhhdCwga2V5KXtcbiAgLy8gZmFzdCBjYXNlXG4gIHZhciBpbmRleCA9IGZhc3RLZXkoa2V5KSwgZW50cnk7XG4gIGlmKGluZGV4ICE9PSAnRicpcmV0dXJuIHRoYXQuX2lbaW5kZXhdO1xuICAvLyBmcm96ZW4gb2JqZWN0IGNhc2VcbiAgZm9yKGVudHJ5ID0gdGhhdC5fZjsgZW50cnk7IGVudHJ5ID0gZW50cnkubil7XG4gICAgaWYoZW50cnkuayA9PSBrZXkpcmV0dXJuIGVudHJ5O1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZ2V0Q29uc3RydWN0b3I6IGZ1bmN0aW9uKHdyYXBwZXIsIE5BTUUsIElTX01BUCwgQURERVIpe1xuICAgIHZhciBDID0gd3JhcHBlcihmdW5jdGlvbih0aGF0LCBpdGVyYWJsZSl7XG4gICAgICBzdHJpY3ROZXcodGhhdCwgQywgTkFNRSk7XG4gICAgICB0aGF0Ll9pID0gJC5jcmVhdGUobnVsbCk7IC8vIGluZGV4XG4gICAgICB0aGF0Ll9mID0gdW5kZWZpbmVkOyAgICAgIC8vIGZpcnN0IGVudHJ5XG4gICAgICB0aGF0Ll9sID0gdW5kZWZpbmVkOyAgICAgIC8vIGxhc3QgZW50cnlcbiAgICAgIHRoYXRbU0laRV0gPSAwOyAgICAgICAgICAgLy8gc2l6ZVxuICAgICAgaWYoaXRlcmFibGUgIT0gdW5kZWZpbmVkKWZvck9mKGl0ZXJhYmxlLCBJU19NQVAsIHRoYXRbQURERVJdLCB0aGF0KTtcbiAgICB9KTtcbiAgICByZWRlZmluZUFsbChDLnByb3RvdHlwZSwge1xuICAgICAgLy8gMjMuMS4zLjEgTWFwLnByb3RvdHlwZS5jbGVhcigpXG4gICAgICAvLyAyMy4yLjMuMiBTZXQucHJvdG90eXBlLmNsZWFyKClcbiAgICAgIGNsZWFyOiBmdW5jdGlvbiBjbGVhcigpe1xuICAgICAgICBmb3IodmFyIHRoYXQgPSB0aGlzLCBkYXRhID0gdGhhdC5faSwgZW50cnkgPSB0aGF0Ll9mOyBlbnRyeTsgZW50cnkgPSBlbnRyeS5uKXtcbiAgICAgICAgICBlbnRyeS5yID0gdHJ1ZTtcbiAgICAgICAgICBpZihlbnRyeS5wKWVudHJ5LnAgPSBlbnRyeS5wLm4gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgZGVsZXRlIGRhdGFbZW50cnkuaV07XG4gICAgICAgIH1cbiAgICAgICAgdGhhdC5fZiA9IHRoYXQuX2wgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoYXRbU0laRV0gPSAwO1xuICAgICAgfSxcbiAgICAgIC8vIDIzLjEuMy4zIE1hcC5wcm90b3R5cGUuZGVsZXRlKGtleSlcbiAgICAgIC8vIDIzLjIuMy40IFNldC5wcm90b3R5cGUuZGVsZXRlKHZhbHVlKVxuICAgICAgJ2RlbGV0ZSc6IGZ1bmN0aW9uKGtleSl7XG4gICAgICAgIHZhciB0aGF0ICA9IHRoaXNcbiAgICAgICAgICAsIGVudHJ5ID0gZ2V0RW50cnkodGhhdCwga2V5KTtcbiAgICAgICAgaWYoZW50cnkpe1xuICAgICAgICAgIHZhciBuZXh0ID0gZW50cnkublxuICAgICAgICAgICAgLCBwcmV2ID0gZW50cnkucDtcbiAgICAgICAgICBkZWxldGUgdGhhdC5faVtlbnRyeS5pXTtcbiAgICAgICAgICBlbnRyeS5yID0gdHJ1ZTtcbiAgICAgICAgICBpZihwcmV2KXByZXYubiA9IG5leHQ7XG4gICAgICAgICAgaWYobmV4dCluZXh0LnAgPSBwcmV2O1xuICAgICAgICAgIGlmKHRoYXQuX2YgPT0gZW50cnkpdGhhdC5fZiA9IG5leHQ7XG4gICAgICAgICAgaWYodGhhdC5fbCA9PSBlbnRyeSl0aGF0Ll9sID0gcHJldjtcbiAgICAgICAgICB0aGF0W1NJWkVdLS07XG4gICAgICAgIH0gcmV0dXJuICEhZW50cnk7XG4gICAgICB9LFxuICAgICAgLy8gMjMuMi4zLjYgU2V0LnByb3RvdHlwZS5mb3JFYWNoKGNhbGxiYWNrZm4sIHRoaXNBcmcgPSB1bmRlZmluZWQpXG4gICAgICAvLyAyMy4xLjMuNSBNYXAucHJvdG90eXBlLmZvckVhY2goY2FsbGJhY2tmbiwgdGhpc0FyZyA9IHVuZGVmaW5lZClcbiAgICAgIGZvckVhY2g6IGZ1bmN0aW9uIGZvckVhY2goY2FsbGJhY2tmbiAvKiwgdGhhdCA9IHVuZGVmaW5lZCAqLyl7XG4gICAgICAgIHZhciBmID0gY3R4KGNhbGxiYWNrZm4sIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkLCAzKVxuICAgICAgICAgICwgZW50cnk7XG4gICAgICAgIHdoaWxlKGVudHJ5ID0gZW50cnkgPyBlbnRyeS5uIDogdGhpcy5fZil7XG4gICAgICAgICAgZihlbnRyeS52LCBlbnRyeS5rLCB0aGlzKTtcbiAgICAgICAgICAvLyByZXZlcnQgdG8gdGhlIGxhc3QgZXhpc3RpbmcgZW50cnlcbiAgICAgICAgICB3aGlsZShlbnRyeSAmJiBlbnRyeS5yKWVudHJ5ID0gZW50cnkucDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8vIDIzLjEuMy43IE1hcC5wcm90b3R5cGUuaGFzKGtleSlcbiAgICAgIC8vIDIzLjIuMy43IFNldC5wcm90b3R5cGUuaGFzKHZhbHVlKVxuICAgICAgaGFzOiBmdW5jdGlvbiBoYXMoa2V5KXtcbiAgICAgICAgcmV0dXJuICEhZ2V0RW50cnkodGhpcywga2V5KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZihERVNDUklQVE9SUykkLnNldERlc2MoQy5wcm90b3R5cGUsICdzaXplJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpe1xuICAgICAgICByZXR1cm4gZGVmaW5lZCh0aGlzW1NJWkVdKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gQztcbiAgfSxcbiAgZGVmOiBmdW5jdGlvbih0aGF0LCBrZXksIHZhbHVlKXtcbiAgICB2YXIgZW50cnkgPSBnZXRFbnRyeSh0aGF0LCBrZXkpXG4gICAgICAsIHByZXYsIGluZGV4O1xuICAgIC8vIGNoYW5nZSBleGlzdGluZyBlbnRyeVxuICAgIGlmKGVudHJ5KXtcbiAgICAgIGVudHJ5LnYgPSB2YWx1ZTtcbiAgICAvLyBjcmVhdGUgbmV3IGVudHJ5XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoYXQuX2wgPSBlbnRyeSA9IHtcbiAgICAgICAgaTogaW5kZXggPSBmYXN0S2V5KGtleSwgdHJ1ZSksIC8vIDwtIGluZGV4XG4gICAgICAgIGs6IGtleSwgICAgICAgICAgICAgICAgICAgICAgICAvLyA8LSBrZXlcbiAgICAgICAgdjogdmFsdWUsICAgICAgICAgICAgICAgICAgICAgIC8vIDwtIHZhbHVlXG4gICAgICAgIHA6IHByZXYgPSB0aGF0Ll9sLCAgICAgICAgICAgICAvLyA8LSBwcmV2aW91cyBlbnRyeVxuICAgICAgICBuOiB1bmRlZmluZWQsICAgICAgICAgICAgICAgICAgLy8gPC0gbmV4dCBlbnRyeVxuICAgICAgICByOiBmYWxzZSAgICAgICAgICAgICAgICAgICAgICAgLy8gPC0gcmVtb3ZlZFxuICAgICAgfTtcbiAgICAgIGlmKCF0aGF0Ll9mKXRoYXQuX2YgPSBlbnRyeTtcbiAgICAgIGlmKHByZXYpcHJldi5uID0gZW50cnk7XG4gICAgICB0aGF0W1NJWkVdKys7XG4gICAgICAvLyBhZGQgdG8gaW5kZXhcbiAgICAgIGlmKGluZGV4ICE9PSAnRicpdGhhdC5faVtpbmRleF0gPSBlbnRyeTtcbiAgICB9IHJldHVybiB0aGF0O1xuICB9LFxuICBnZXRFbnRyeTogZ2V0RW50cnksXG4gIHNldFN0cm9uZzogZnVuY3Rpb24oQywgTkFNRSwgSVNfTUFQKXtcbiAgICAvLyBhZGQgLmtleXMsIC52YWx1ZXMsIC5lbnRyaWVzLCBbQEBpdGVyYXRvcl1cbiAgICAvLyAyMy4xLjMuNCwgMjMuMS4zLjgsIDIzLjEuMy4xMSwgMjMuMS4zLjEyLCAyMy4yLjMuNSwgMjMuMi4zLjgsIDIzLjIuMy4xMCwgMjMuMi4zLjExXG4gICAgJGl0ZXJEZWZpbmUoQywgTkFNRSwgZnVuY3Rpb24oaXRlcmF0ZWQsIGtpbmQpe1xuICAgICAgdGhpcy5fdCA9IGl0ZXJhdGVkOyAgLy8gdGFyZ2V0XG4gICAgICB0aGlzLl9rID0ga2luZDsgICAgICAvLyBraW5kXG4gICAgICB0aGlzLl9sID0gdW5kZWZpbmVkOyAvLyBwcmV2aW91c1xuICAgIH0sIGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgdGhhdCAgPSB0aGlzXG4gICAgICAgICwga2luZCAgPSB0aGF0Ll9rXG4gICAgICAgICwgZW50cnkgPSB0aGF0Ll9sO1xuICAgICAgLy8gcmV2ZXJ0IHRvIHRoZSBsYXN0IGV4aXN0aW5nIGVudHJ5XG4gICAgICB3aGlsZShlbnRyeSAmJiBlbnRyeS5yKWVudHJ5ID0gZW50cnkucDtcbiAgICAgIC8vIGdldCBuZXh0IGVudHJ5XG4gICAgICBpZighdGhhdC5fdCB8fCAhKHRoYXQuX2wgPSBlbnRyeSA9IGVudHJ5ID8gZW50cnkubiA6IHRoYXQuX3QuX2YpKXtcbiAgICAgICAgLy8gb3IgZmluaXNoIHRoZSBpdGVyYXRpb25cbiAgICAgICAgdGhhdC5fdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIHN0ZXAoMSk7XG4gICAgICB9XG4gICAgICAvLyByZXR1cm4gc3RlcCBieSBraW5kXG4gICAgICBpZihraW5kID09ICdrZXlzJyAgKXJldHVybiBzdGVwKDAsIGVudHJ5LmspO1xuICAgICAgaWYoa2luZCA9PSAndmFsdWVzJylyZXR1cm4gc3RlcCgwLCBlbnRyeS52KTtcbiAgICAgIHJldHVybiBzdGVwKDAsIFtlbnRyeS5rLCBlbnRyeS52XSk7XG4gICAgfSwgSVNfTUFQID8gJ2VudHJpZXMnIDogJ3ZhbHVlcycgLCAhSVNfTUFQLCB0cnVlKTtcblxuICAgIC8vIGFkZCBbQEBzcGVjaWVzXSwgMjMuMS4yLjIsIDIzLjIuMi4yXG4gICAgc2V0U3BlY2llcyhOQU1FKTtcbiAgfVxufTsiLCIvLyBodHRwczovL2dpdGh1Yi5jb20vRGF2aWRCcnVhbnQvTWFwLVNldC5wcm90b3R5cGUudG9KU09OXG52YXIgZm9yT2YgICA9IHJlcXVpcmUoJy4vJC5mb3Itb2YnKVxuICAsIGNsYXNzb2YgPSByZXF1aXJlKCcuLyQuY2xhc3NvZicpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihOQU1FKXtcbiAgcmV0dXJuIGZ1bmN0aW9uIHRvSlNPTigpe1xuICAgIGlmKGNsYXNzb2YodGhpcykgIT0gTkFNRSl0aHJvdyBUeXBlRXJyb3IoTkFNRSArIFwiI3RvSlNPTiBpc24ndCBnZW5lcmljXCIpO1xuICAgIHZhciBhcnIgPSBbXTtcbiAgICBmb3JPZih0aGlzLCBmYWxzZSwgYXJyLnB1c2gsIGFycik7XG4gICAgcmV0dXJuIGFycjtcbiAgfTtcbn07IiwiJ3VzZSBzdHJpY3QnO1xudmFyICQgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi8kJylcbiAgLCBnbG9iYWwgICAgICAgICA9IHJlcXVpcmUoJy4vJC5nbG9iYWwnKVxuICAsICRleHBvcnQgICAgICAgID0gcmVxdWlyZSgnLi8kLmV4cG9ydCcpXG4gICwgZmFpbHMgICAgICAgICAgPSByZXF1aXJlKCcuLyQuZmFpbHMnKVxuICAsIGhpZGUgICAgICAgICAgID0gcmVxdWlyZSgnLi8kLmhpZGUnKVxuICAsIHJlZGVmaW5lQWxsICAgID0gcmVxdWlyZSgnLi8kLnJlZGVmaW5lLWFsbCcpXG4gICwgZm9yT2YgICAgICAgICAgPSByZXF1aXJlKCcuLyQuZm9yLW9mJylcbiAgLCBzdHJpY3ROZXcgICAgICA9IHJlcXVpcmUoJy4vJC5zdHJpY3QtbmV3JylcbiAgLCBpc09iamVjdCAgICAgICA9IHJlcXVpcmUoJy4vJC5pcy1vYmplY3QnKVxuICAsIHNldFRvU3RyaW5nVGFnID0gcmVxdWlyZSgnLi8kLnNldC10by1zdHJpbmctdGFnJylcbiAgLCBERVNDUklQVE9SUyAgICA9IHJlcXVpcmUoJy4vJC5kZXNjcmlwdG9ycycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKE5BTUUsIHdyYXBwZXIsIG1ldGhvZHMsIGNvbW1vbiwgSVNfTUFQLCBJU19XRUFLKXtcbiAgdmFyIEJhc2UgID0gZ2xvYmFsW05BTUVdXG4gICAgLCBDICAgICA9IEJhc2VcbiAgICAsIEFEREVSID0gSVNfTUFQID8gJ3NldCcgOiAnYWRkJ1xuICAgICwgcHJvdG8gPSBDICYmIEMucHJvdG90eXBlXG4gICAgLCBPICAgICA9IHt9O1xuICBpZighREVTQ1JJUFRPUlMgfHwgdHlwZW9mIEMgIT0gJ2Z1bmN0aW9uJyB8fCAhKElTX1dFQUsgfHwgcHJvdG8uZm9yRWFjaCAmJiAhZmFpbHMoZnVuY3Rpb24oKXtcbiAgICBuZXcgQygpLmVudHJpZXMoKS5uZXh0KCk7XG4gIH0pKSl7XG4gICAgLy8gY3JlYXRlIGNvbGxlY3Rpb24gY29uc3RydWN0b3JcbiAgICBDID0gY29tbW9uLmdldENvbnN0cnVjdG9yKHdyYXBwZXIsIE5BTUUsIElTX01BUCwgQURERVIpO1xuICAgIHJlZGVmaW5lQWxsKEMucHJvdG90eXBlLCBtZXRob2RzKTtcbiAgfSBlbHNlIHtcbiAgICBDID0gd3JhcHBlcihmdW5jdGlvbih0YXJnZXQsIGl0ZXJhYmxlKXtcbiAgICAgIHN0cmljdE5ldyh0YXJnZXQsIEMsIE5BTUUpO1xuICAgICAgdGFyZ2V0Ll9jID0gbmV3IEJhc2U7XG4gICAgICBpZihpdGVyYWJsZSAhPSB1bmRlZmluZWQpZm9yT2YoaXRlcmFibGUsIElTX01BUCwgdGFyZ2V0W0FEREVSXSwgdGFyZ2V0KTtcbiAgICB9KTtcbiAgICAkLmVhY2guY2FsbCgnYWRkLGNsZWFyLGRlbGV0ZSxmb3JFYWNoLGdldCxoYXMsc2V0LGtleXMsdmFsdWVzLGVudHJpZXMnLnNwbGl0KCcsJyksZnVuY3Rpb24oS0VZKXtcbiAgICAgIHZhciBJU19BRERFUiA9IEtFWSA9PSAnYWRkJyB8fCBLRVkgPT0gJ3NldCc7XG4gICAgICBpZihLRVkgaW4gcHJvdG8gJiYgIShJU19XRUFLICYmIEtFWSA9PSAnY2xlYXInKSloaWRlKEMucHJvdG90eXBlLCBLRVksIGZ1bmN0aW9uKGEsIGIpe1xuICAgICAgICBpZighSVNfQURERVIgJiYgSVNfV0VBSyAmJiAhaXNPYmplY3QoYSkpcmV0dXJuIEtFWSA9PSAnZ2V0JyA/IHVuZGVmaW5lZCA6IGZhbHNlO1xuICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5fY1tLRVldKGEgPT09IDAgPyAwIDogYSwgYik7XG4gICAgICAgIHJldHVybiBJU19BRERFUiA/IHRoaXMgOiByZXN1bHQ7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBpZignc2l6ZScgaW4gcHJvdG8pJC5zZXREZXNjKEMucHJvdG90eXBlLCAnc2l6ZScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Muc2l6ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHNldFRvU3RyaW5nVGFnKEMsIE5BTUUpO1xuXG4gIE9bTkFNRV0gPSBDO1xuICAkZXhwb3J0KCRleHBvcnQuRyArICRleHBvcnQuVyArICRleHBvcnQuRiwgTyk7XG5cbiAgaWYoIUlTX1dFQUspY29tbW9uLnNldFN0cm9uZyhDLCBOQU1FLCBJU19NQVApO1xuXG4gIHJldHVybiBDO1xufTsiLCJ2YXIgY29yZSA9IG1vZHVsZS5leHBvcnRzID0ge3ZlcnNpb246ICcxLjIuNid9O1xuaWYodHlwZW9mIF9fZSA9PSAnbnVtYmVyJylfX2UgPSBjb3JlOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmIiwiLy8gb3B0aW9uYWwgLyBzaW1wbGUgY29udGV4dCBiaW5kaW5nXG52YXIgYUZ1bmN0aW9uID0gcmVxdWlyZSgnLi8kLmEtZnVuY3Rpb24nKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZm4sIHRoYXQsIGxlbmd0aCl7XG4gIGFGdW5jdGlvbihmbik7XG4gIGlmKHRoYXQgPT09IHVuZGVmaW5lZClyZXR1cm4gZm47XG4gIHN3aXRjaChsZW5ndGgpe1xuICAgIGNhc2UgMTogcmV0dXJuIGZ1bmN0aW9uKGEpe1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSk7XG4gICAgfTtcbiAgICBjYXNlIDI6IHJldHVybiBmdW5jdGlvbihhLCBiKXtcbiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEsIGIpO1xuICAgIH07XG4gICAgY2FzZSAzOiByZXR1cm4gZnVuY3Rpb24oYSwgYiwgYyl7XG4gICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiLCBjKTtcbiAgICB9O1xuICB9XG4gIHJldHVybiBmdW5jdGlvbigvKiAuLi5hcmdzICovKXtcbiAgICByZXR1cm4gZm4uYXBwbHkodGhhdCwgYXJndW1lbnRzKTtcbiAgfTtcbn07IiwiLy8gNy4yLjEgUmVxdWlyZU9iamVjdENvZXJjaWJsZShhcmd1bWVudClcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICBpZihpdCA9PSB1bmRlZmluZWQpdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gIFwiICsgaXQpO1xuICByZXR1cm4gaXQ7XG59OyIsIi8vIFRoYW5rJ3MgSUU4IGZvciBoaXMgZnVubnkgZGVmaW5lUHJvcGVydHlcbm1vZHVsZS5leHBvcnRzID0gIXJlcXVpcmUoJy4vJC5mYWlscycpKGZ1bmN0aW9uKCl7XG4gIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdhJywge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuIDc7IH19KS5hICE9IDc7XG59KTsiLCJ2YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuLyQuaXMtb2JqZWN0JylcbiAgLCBkb2N1bWVudCA9IHJlcXVpcmUoJy4vJC5nbG9iYWwnKS5kb2N1bWVudFxuICAvLyBpbiBvbGQgSUUgdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgaXMgJ29iamVjdCdcbiAgLCBpcyA9IGlzT2JqZWN0KGRvY3VtZW50KSAmJiBpc09iamVjdChkb2N1bWVudC5jcmVhdGVFbGVtZW50KTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gaXMgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGl0KSA6IHt9O1xufTsiLCJ2YXIgZ2xvYmFsICAgID0gcmVxdWlyZSgnLi8kLmdsb2JhbCcpXG4gICwgY29yZSAgICAgID0gcmVxdWlyZSgnLi8kLmNvcmUnKVxuICAsIGN0eCAgICAgICA9IHJlcXVpcmUoJy4vJC5jdHgnKVxuICAsIFBST1RPVFlQRSA9ICdwcm90b3R5cGUnO1xuXG52YXIgJGV4cG9ydCA9IGZ1bmN0aW9uKHR5cGUsIG5hbWUsIHNvdXJjZSl7XG4gIHZhciBJU19GT1JDRUQgPSB0eXBlICYgJGV4cG9ydC5GXG4gICAgLCBJU19HTE9CQUwgPSB0eXBlICYgJGV4cG9ydC5HXG4gICAgLCBJU19TVEFUSUMgPSB0eXBlICYgJGV4cG9ydC5TXG4gICAgLCBJU19QUk9UTyAgPSB0eXBlICYgJGV4cG9ydC5QXG4gICAgLCBJU19CSU5EICAgPSB0eXBlICYgJGV4cG9ydC5CXG4gICAgLCBJU19XUkFQICAgPSB0eXBlICYgJGV4cG9ydC5XXG4gICAgLCBleHBvcnRzICAgPSBJU19HTE9CQUwgPyBjb3JlIDogY29yZVtuYW1lXSB8fCAoY29yZVtuYW1lXSA9IHt9KVxuICAgICwgdGFyZ2V0ICAgID0gSVNfR0xPQkFMID8gZ2xvYmFsIDogSVNfU1RBVElDID8gZ2xvYmFsW25hbWVdIDogKGdsb2JhbFtuYW1lXSB8fCB7fSlbUFJPVE9UWVBFXVxuICAgICwga2V5LCBvd24sIG91dDtcbiAgaWYoSVNfR0xPQkFMKXNvdXJjZSA9IG5hbWU7XG4gIGZvcihrZXkgaW4gc291cmNlKXtcbiAgICAvLyBjb250YWlucyBpbiBuYXRpdmVcbiAgICBvd24gPSAhSVNfRk9SQ0VEICYmIHRhcmdldCAmJiBrZXkgaW4gdGFyZ2V0O1xuICAgIGlmKG93biAmJiBrZXkgaW4gZXhwb3J0cyljb250aW51ZTtcbiAgICAvLyBleHBvcnQgbmF0aXZlIG9yIHBhc3NlZFxuICAgIG91dCA9IG93biA/IHRhcmdldFtrZXldIDogc291cmNlW2tleV07XG4gICAgLy8gcHJldmVudCBnbG9iYWwgcG9sbHV0aW9uIGZvciBuYW1lc3BhY2VzXG4gICAgZXhwb3J0c1trZXldID0gSVNfR0xPQkFMICYmIHR5cGVvZiB0YXJnZXRba2V5XSAhPSAnZnVuY3Rpb24nID8gc291cmNlW2tleV1cbiAgICAvLyBiaW5kIHRpbWVycyB0byBnbG9iYWwgZm9yIGNhbGwgZnJvbSBleHBvcnQgY29udGV4dFxuICAgIDogSVNfQklORCAmJiBvd24gPyBjdHgob3V0LCBnbG9iYWwpXG4gICAgLy8gd3JhcCBnbG9iYWwgY29uc3RydWN0b3JzIGZvciBwcmV2ZW50IGNoYW5nZSB0aGVtIGluIGxpYnJhcnlcbiAgICA6IElTX1dSQVAgJiYgdGFyZ2V0W2tleV0gPT0gb3V0ID8gKGZ1bmN0aW9uKEMpe1xuICAgICAgdmFyIEYgPSBmdW5jdGlvbihwYXJhbSl7XG4gICAgICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgQyA/IG5ldyBDKHBhcmFtKSA6IEMocGFyYW0pO1xuICAgICAgfTtcbiAgICAgIEZbUFJPVE9UWVBFXSA9IENbUFJPVE9UWVBFXTtcbiAgICAgIHJldHVybiBGO1xuICAgIC8vIG1ha2Ugc3RhdGljIHZlcnNpb25zIGZvciBwcm90b3R5cGUgbWV0aG9kc1xuICAgIH0pKG91dCkgOiBJU19QUk9UTyAmJiB0eXBlb2Ygb3V0ID09ICdmdW5jdGlvbicgPyBjdHgoRnVuY3Rpb24uY2FsbCwgb3V0KSA6IG91dDtcbiAgICBpZihJU19QUk9UTykoZXhwb3J0c1tQUk9UT1RZUEVdIHx8IChleHBvcnRzW1BST1RPVFlQRV0gPSB7fSkpW2tleV0gPSBvdXQ7XG4gIH1cbn07XG4vLyB0eXBlIGJpdG1hcFxuJGV4cG9ydC5GID0gMTsgIC8vIGZvcmNlZFxuJGV4cG9ydC5HID0gMjsgIC8vIGdsb2JhbFxuJGV4cG9ydC5TID0gNDsgIC8vIHN0YXRpY1xuJGV4cG9ydC5QID0gODsgIC8vIHByb3RvXG4kZXhwb3J0LkIgPSAxNjsgLy8gYmluZFxuJGV4cG9ydC5XID0gMzI7IC8vIHdyYXBcbm1vZHVsZS5leHBvcnRzID0gJGV4cG9ydDsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGV4ZWMpe1xuICB0cnkge1xuICAgIHJldHVybiAhIWV4ZWMoKTtcbiAgfSBjYXRjaChlKXtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTsiLCJ2YXIgY3R4ICAgICAgICAgPSByZXF1aXJlKCcuLyQuY3R4JylcbiAgLCBjYWxsICAgICAgICA9IHJlcXVpcmUoJy4vJC5pdGVyLWNhbGwnKVxuICAsIGlzQXJyYXlJdGVyID0gcmVxdWlyZSgnLi8kLmlzLWFycmF5LWl0ZXInKVxuICAsIGFuT2JqZWN0ICAgID0gcmVxdWlyZSgnLi8kLmFuLW9iamVjdCcpXG4gICwgdG9MZW5ndGggICAgPSByZXF1aXJlKCcuLyQudG8tbGVuZ3RoJylcbiAgLCBnZXRJdGVyRm4gICA9IHJlcXVpcmUoJy4vY29yZS5nZXQtaXRlcmF0b3ItbWV0aG9kJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0ZXJhYmxlLCBlbnRyaWVzLCBmbiwgdGhhdCl7XG4gIHZhciBpdGVyRm4gPSBnZXRJdGVyRm4oaXRlcmFibGUpXG4gICAgLCBmICAgICAgPSBjdHgoZm4sIHRoYXQsIGVudHJpZXMgPyAyIDogMSlcbiAgICAsIGluZGV4ICA9IDBcbiAgICAsIGxlbmd0aCwgc3RlcCwgaXRlcmF0b3I7XG4gIGlmKHR5cGVvZiBpdGVyRm4gIT0gJ2Z1bmN0aW9uJyl0aHJvdyBUeXBlRXJyb3IoaXRlcmFibGUgKyAnIGlzIG5vdCBpdGVyYWJsZSEnKTtcbiAgLy8gZmFzdCBjYXNlIGZvciBhcnJheXMgd2l0aCBkZWZhdWx0IGl0ZXJhdG9yXG4gIGlmKGlzQXJyYXlJdGVyKGl0ZXJGbikpZm9yKGxlbmd0aCA9IHRvTGVuZ3RoKGl0ZXJhYmxlLmxlbmd0aCk7IGxlbmd0aCA+IGluZGV4OyBpbmRleCsrKXtcbiAgICBlbnRyaWVzID8gZihhbk9iamVjdChzdGVwID0gaXRlcmFibGVbaW5kZXhdKVswXSwgc3RlcFsxXSkgOiBmKGl0ZXJhYmxlW2luZGV4XSk7XG4gIH0gZWxzZSBmb3IoaXRlcmF0b3IgPSBpdGVyRm4uY2FsbChpdGVyYWJsZSk7ICEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZTsgKXtcbiAgICBjYWxsKGl0ZXJhdG9yLCBmLCBzdGVwLnZhbHVlLCBlbnRyaWVzKTtcbiAgfVxufTsiLCIvLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODYjaXNzdWVjb21tZW50LTExNTc1OTAyOFxudmFyIGdsb2JhbCA9IG1vZHVsZS5leHBvcnRzID0gdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuTWF0aCA9PSBNYXRoXG4gID8gd2luZG93IDogdHlwZW9mIHNlbGYgIT0gJ3VuZGVmaW5lZCcgJiYgc2VsZi5NYXRoID09IE1hdGggPyBzZWxmIDogRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbmlmKHR5cGVvZiBfX2cgPT0gJ251bWJlcicpX19nID0gZ2xvYmFsOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmIiwidmFyIGhhc093blByb3BlcnR5ID0ge30uaGFzT3duUHJvcGVydHk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCBrZXkpe1xuICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChpdCwga2V5KTtcbn07IiwidmFyICQgICAgICAgICAgPSByZXF1aXJlKCcuLyQnKVxuICAsIGNyZWF0ZURlc2MgPSByZXF1aXJlKCcuLyQucHJvcGVydHktZGVzYycpO1xubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLyQuZGVzY3JpcHRvcnMnKSA/IGZ1bmN0aW9uKG9iamVjdCwga2V5LCB2YWx1ZSl7XG4gIHJldHVybiAkLnNldERlc2Mob2JqZWN0LCBrZXksIGNyZWF0ZURlc2MoMSwgdmFsdWUpKTtcbn0gOiBmdW5jdGlvbihvYmplY3QsIGtleSwgdmFsdWUpe1xuICBvYmplY3Rba2V5XSA9IHZhbHVlO1xuICByZXR1cm4gb2JqZWN0O1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vJC5nbG9iYWwnKS5kb2N1bWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7IiwiLy8gZmFzdCBhcHBseSwgaHR0cDovL2pzcGVyZi5sbmtpdC5jb20vZmFzdC1hcHBseS81XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZuLCBhcmdzLCB0aGF0KXtcbiAgdmFyIHVuID0gdGhhdCA9PT0gdW5kZWZpbmVkO1xuICBzd2l0Y2goYXJncy5sZW5ndGgpe1xuICAgIGNhc2UgMDogcmV0dXJuIHVuID8gZm4oKVxuICAgICAgICAgICAgICAgICAgICAgIDogZm4uY2FsbCh0aGF0KTtcbiAgICBjYXNlIDE6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0pXG4gICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0pO1xuICAgIGNhc2UgMjogcmV0dXJuIHVuID8gZm4oYXJnc1swXSwgYXJnc1sxXSlcbiAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgY2FzZSAzOiByZXR1cm4gdW4gPyBmbihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKVxuICAgICAgICAgICAgICAgICAgICAgIDogZm4uY2FsbCh0aGF0LCBhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICBjYXNlIDQ6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pXG4gICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pO1xuICB9IHJldHVybiAgICAgICAgICAgICAgZm4uYXBwbHkodGhhdCwgYXJncyk7XG59OyIsIi8vIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgYW5kIG5vbi1lbnVtZXJhYmxlIG9sZCBWOCBzdHJpbmdzXG52YXIgY29mID0gcmVxdWlyZSgnLi8kLmNvZicpO1xubW9kdWxlLmV4cG9ydHMgPSBPYmplY3QoJ3onKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKSA/IE9iamVjdCA6IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIGNvZihpdCkgPT0gJ1N0cmluZycgPyBpdC5zcGxpdCgnJykgOiBPYmplY3QoaXQpO1xufTsiLCIvLyBjaGVjayBvbiBkZWZhdWx0IEFycmF5IGl0ZXJhdG9yXG52YXIgSXRlcmF0b3JzICA9IHJlcXVpcmUoJy4vJC5pdGVyYXRvcnMnKVxuICAsIElURVJBVE9SICAgPSByZXF1aXJlKCcuLyQud2tzJykoJ2l0ZXJhdG9yJylcbiAgLCBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIGl0ICE9PSB1bmRlZmluZWQgJiYgKEl0ZXJhdG9ycy5BcnJheSA9PT0gaXQgfHwgQXJyYXlQcm90b1tJVEVSQVRPUl0gPT09IGl0KTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIHJldHVybiB0eXBlb2YgaXQgPT09ICdvYmplY3QnID8gaXQgIT09IG51bGwgOiB0eXBlb2YgaXQgPT09ICdmdW5jdGlvbic7XG59OyIsIi8vIGNhbGwgc29tZXRoaW5nIG9uIGl0ZXJhdG9yIHN0ZXAgd2l0aCBzYWZlIGNsb3Npbmcgb24gZXJyb3JcbnZhciBhbk9iamVjdCA9IHJlcXVpcmUoJy4vJC5hbi1vYmplY3QnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXRlcmF0b3IsIGZuLCB2YWx1ZSwgZW50cmllcyl7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGVudHJpZXMgPyBmbihhbk9iamVjdCh2YWx1ZSlbMF0sIHZhbHVlWzFdKSA6IGZuKHZhbHVlKTtcbiAgLy8gNy40LjYgSXRlcmF0b3JDbG9zZShpdGVyYXRvciwgY29tcGxldGlvbilcbiAgfSBjYXRjaChlKXtcbiAgICB2YXIgcmV0ID0gaXRlcmF0b3JbJ3JldHVybiddO1xuICAgIGlmKHJldCAhPT0gdW5kZWZpbmVkKWFuT2JqZWN0KHJldC5jYWxsKGl0ZXJhdG9yKSk7XG4gICAgdGhyb3cgZTtcbiAgfVxufTsiLCIndXNlIHN0cmljdCc7XG52YXIgJCAgICAgICAgICAgICAgPSByZXF1aXJlKCcuLyQnKVxuICAsIGRlc2NyaXB0b3IgICAgID0gcmVxdWlyZSgnLi8kLnByb3BlcnR5LWRlc2MnKVxuICAsIHNldFRvU3RyaW5nVGFnID0gcmVxdWlyZSgnLi8kLnNldC10by1zdHJpbmctdGFnJylcbiAgLCBJdGVyYXRvclByb3RvdHlwZSA9IHt9O1xuXG4vLyAyNS4xLjIuMS4xICVJdGVyYXRvclByb3RvdHlwZSVbQEBpdGVyYXRvcl0oKVxucmVxdWlyZSgnLi8kLmhpZGUnKShJdGVyYXRvclByb3RvdHlwZSwgcmVxdWlyZSgnLi8kLndrcycpKCdpdGVyYXRvcicpLCBmdW5jdGlvbigpeyByZXR1cm4gdGhpczsgfSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oQ29uc3RydWN0b3IsIE5BTUUsIG5leHQpe1xuICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSAkLmNyZWF0ZShJdGVyYXRvclByb3RvdHlwZSwge25leHQ6IGRlc2NyaXB0b3IoMSwgbmV4dCl9KTtcbiAgc2V0VG9TdHJpbmdUYWcoQ29uc3RydWN0b3IsIE5BTUUgKyAnIEl0ZXJhdG9yJyk7XG59OyIsIid1c2Ugc3RyaWN0JztcbnZhciBMSUJSQVJZICAgICAgICA9IHJlcXVpcmUoJy4vJC5saWJyYXJ5JylcbiAgLCAkZXhwb3J0ICAgICAgICA9IHJlcXVpcmUoJy4vJC5leHBvcnQnKVxuICAsIHJlZGVmaW5lICAgICAgID0gcmVxdWlyZSgnLi8kLnJlZGVmaW5lJylcbiAgLCBoaWRlICAgICAgICAgICA9IHJlcXVpcmUoJy4vJC5oaWRlJylcbiAgLCBoYXMgICAgICAgICAgICA9IHJlcXVpcmUoJy4vJC5oYXMnKVxuICAsIEl0ZXJhdG9ycyAgICAgID0gcmVxdWlyZSgnLi8kLml0ZXJhdG9ycycpXG4gICwgJGl0ZXJDcmVhdGUgICAgPSByZXF1aXJlKCcuLyQuaXRlci1jcmVhdGUnKVxuICAsIHNldFRvU3RyaW5nVGFnID0gcmVxdWlyZSgnLi8kLnNldC10by1zdHJpbmctdGFnJylcbiAgLCBnZXRQcm90byAgICAgICA9IHJlcXVpcmUoJy4vJCcpLmdldFByb3RvXG4gICwgSVRFUkFUT1IgICAgICAgPSByZXF1aXJlKCcuLyQud2tzJykoJ2l0ZXJhdG9yJylcbiAgLCBCVUdHWSAgICAgICAgICA9ICEoW10ua2V5cyAmJiAnbmV4dCcgaW4gW10ua2V5cygpKSAvLyBTYWZhcmkgaGFzIGJ1Z2d5IGl0ZXJhdG9ycyB3L28gYG5leHRgXG4gICwgRkZfSVRFUkFUT1IgICAgPSAnQEBpdGVyYXRvcidcbiAgLCBLRVlTICAgICAgICAgICA9ICdrZXlzJ1xuICAsIFZBTFVFUyAgICAgICAgID0gJ3ZhbHVlcyc7XG5cbnZhciByZXR1cm5UaGlzID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oQmFzZSwgTkFNRSwgQ29uc3RydWN0b3IsIG5leHQsIERFRkFVTFQsIElTX1NFVCwgRk9SQ0VEKXtcbiAgJGl0ZXJDcmVhdGUoQ29uc3RydWN0b3IsIE5BTUUsIG5leHQpO1xuICB2YXIgZ2V0TWV0aG9kID0gZnVuY3Rpb24oa2luZCl7XG4gICAgaWYoIUJVR0dZICYmIGtpbmQgaW4gcHJvdG8pcmV0dXJuIHByb3RvW2tpbmRdO1xuICAgIHN3aXRjaChraW5kKXtcbiAgICAgIGNhc2UgS0VZUzogcmV0dXJuIGZ1bmN0aW9uIGtleXMoKXsgcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0aGlzLCBraW5kKTsgfTtcbiAgICAgIGNhc2UgVkFMVUVTOiByZXR1cm4gZnVuY3Rpb24gdmFsdWVzKCl7IHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7IH07XG4gICAgfSByZXR1cm4gZnVuY3Rpb24gZW50cmllcygpeyByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOyB9O1xuICB9O1xuICB2YXIgVEFHICAgICAgICA9IE5BTUUgKyAnIEl0ZXJhdG9yJ1xuICAgICwgREVGX1ZBTFVFUyA9IERFRkFVTFQgPT0gVkFMVUVTXG4gICAgLCBWQUxVRVNfQlVHID0gZmFsc2VcbiAgICAsIHByb3RvICAgICAgPSBCYXNlLnByb3RvdHlwZVxuICAgICwgJG5hdGl2ZSAgICA9IHByb3RvW0lURVJBVE9SXSB8fCBwcm90b1tGRl9JVEVSQVRPUl0gfHwgREVGQVVMVCAmJiBwcm90b1tERUZBVUxUXVxuICAgICwgJGRlZmF1bHQgICA9ICRuYXRpdmUgfHwgZ2V0TWV0aG9kKERFRkFVTFQpXG4gICAgLCBtZXRob2RzLCBrZXk7XG4gIC8vIEZpeCBuYXRpdmVcbiAgaWYoJG5hdGl2ZSl7XG4gICAgdmFyIEl0ZXJhdG9yUHJvdG90eXBlID0gZ2V0UHJvdG8oJGRlZmF1bHQuY2FsbChuZXcgQmFzZSkpO1xuICAgIC8vIFNldCBAQHRvU3RyaW5nVGFnIHRvIG5hdGl2ZSBpdGVyYXRvcnNcbiAgICBzZXRUb1N0cmluZ1RhZyhJdGVyYXRvclByb3RvdHlwZSwgVEFHLCB0cnVlKTtcbiAgICAvLyBGRiBmaXhcbiAgICBpZighTElCUkFSWSAmJiBoYXMocHJvdG8sIEZGX0lURVJBVE9SKSloaWRlKEl0ZXJhdG9yUHJvdG90eXBlLCBJVEVSQVRPUiwgcmV0dXJuVGhpcyk7XG4gICAgLy8gZml4IEFycmF5I3t2YWx1ZXMsIEBAaXRlcmF0b3J9Lm5hbWUgaW4gVjggLyBGRlxuICAgIGlmKERFRl9WQUxVRVMgJiYgJG5hdGl2ZS5uYW1lICE9PSBWQUxVRVMpe1xuICAgICAgVkFMVUVTX0JVRyA9IHRydWU7XG4gICAgICAkZGVmYXVsdCA9IGZ1bmN0aW9uIHZhbHVlcygpeyByZXR1cm4gJG5hdGl2ZS5jYWxsKHRoaXMpOyB9O1xuICAgIH1cbiAgfVxuICAvLyBEZWZpbmUgaXRlcmF0b3JcbiAgaWYoKCFMSUJSQVJZIHx8IEZPUkNFRCkgJiYgKEJVR0dZIHx8IFZBTFVFU19CVUcgfHwgIXByb3RvW0lURVJBVE9SXSkpe1xuICAgIGhpZGUocHJvdG8sIElURVJBVE9SLCAkZGVmYXVsdCk7XG4gIH1cbiAgLy8gUGx1ZyBmb3IgbGlicmFyeVxuICBJdGVyYXRvcnNbTkFNRV0gPSAkZGVmYXVsdDtcbiAgSXRlcmF0b3JzW1RBR10gID0gcmV0dXJuVGhpcztcbiAgaWYoREVGQVVMVCl7XG4gICAgbWV0aG9kcyA9IHtcbiAgICAgIHZhbHVlczogIERFRl9WQUxVRVMgID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoVkFMVUVTKSxcbiAgICAgIGtleXM6ICAgIElTX1NFVCAgICAgID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoS0VZUyksXG4gICAgICBlbnRyaWVzOiAhREVGX1ZBTFVFUyA/ICRkZWZhdWx0IDogZ2V0TWV0aG9kKCdlbnRyaWVzJylcbiAgICB9O1xuICAgIGlmKEZPUkNFRClmb3Ioa2V5IGluIG1ldGhvZHMpe1xuICAgICAgaWYoIShrZXkgaW4gcHJvdG8pKXJlZGVmaW5lKHByb3RvLCBrZXksIG1ldGhvZHNba2V5XSk7XG4gICAgfSBlbHNlICRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogKEJVR0dZIHx8IFZBTFVFU19CVUcpLCBOQU1FLCBtZXRob2RzKTtcbiAgfVxuICByZXR1cm4gbWV0aG9kcztcbn07IiwidmFyIElURVJBVE9SICAgICA9IHJlcXVpcmUoJy4vJC53a3MnKSgnaXRlcmF0b3InKVxuICAsIFNBRkVfQ0xPU0lORyA9IGZhbHNlO1xuXG50cnkge1xuICB2YXIgcml0ZXIgPSBbN11bSVRFUkFUT1JdKCk7XG4gIHJpdGVyWydyZXR1cm4nXSA9IGZ1bmN0aW9uKCl7IFNBRkVfQ0xPU0lORyA9IHRydWU7IH07XG4gIEFycmF5LmZyb20ocml0ZXIsIGZ1bmN0aW9uKCl7IHRocm93IDI7IH0pO1xufSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGV4ZWMsIHNraXBDbG9zaW5nKXtcbiAgaWYoIXNraXBDbG9zaW5nICYmICFTQUZFX0NMT1NJTkcpcmV0dXJuIGZhbHNlO1xuICB2YXIgc2FmZSA9IGZhbHNlO1xuICB0cnkge1xuICAgIHZhciBhcnIgID0gWzddXG4gICAgICAsIGl0ZXIgPSBhcnJbSVRFUkFUT1JdKCk7XG4gICAgaXRlci5uZXh0ID0gZnVuY3Rpb24oKXsgcmV0dXJuIHtkb25lOiBzYWZlID0gdHJ1ZX07IH07XG4gICAgYXJyW0lURVJBVE9SXSA9IGZ1bmN0aW9uKCl7IHJldHVybiBpdGVyOyB9O1xuICAgIGV4ZWMoYXJyKTtcbiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfVxuICByZXR1cm4gc2FmZTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihkb25lLCB2YWx1ZSl7XG4gIHJldHVybiB7dmFsdWU6IHZhbHVlLCBkb25lOiAhIWRvbmV9O1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IHt9OyIsInZhciAkT2JqZWN0ID0gT2JqZWN0O1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyZWF0ZTogICAgICRPYmplY3QuY3JlYXRlLFxuICBnZXRQcm90bzogICAkT2JqZWN0LmdldFByb3RvdHlwZU9mLFxuICBpc0VudW06ICAgICB7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxcbiAgZ2V0RGVzYzogICAgJE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsXG4gIHNldERlc2M6ICAgICRPYmplY3QuZGVmaW5lUHJvcGVydHksXG4gIHNldERlc2NzOiAgICRPYmplY3QuZGVmaW5lUHJvcGVydGllcyxcbiAgZ2V0S2V5czogICAgJE9iamVjdC5rZXlzLFxuICBnZXROYW1lczogICAkT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMsXG4gIGdldFN5bWJvbHM6ICRPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzLFxuICBlYWNoOiAgICAgICBbXS5mb3JFYWNoXG59OyIsIm1vZHVsZS5leHBvcnRzID0gdHJ1ZTsiLCJ2YXIgZ2xvYmFsICAgID0gcmVxdWlyZSgnLi8kLmdsb2JhbCcpXG4gICwgbWFjcm90YXNrID0gcmVxdWlyZSgnLi8kLnRhc2snKS5zZXRcbiAgLCBPYnNlcnZlciAgPSBnbG9iYWwuTXV0YXRpb25PYnNlcnZlciB8fCBnbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlclxuICAsIHByb2Nlc3MgICA9IGdsb2JhbC5wcm9jZXNzXG4gICwgUHJvbWlzZSAgID0gZ2xvYmFsLlByb21pc2VcbiAgLCBpc05vZGUgICAgPSByZXF1aXJlKCcuLyQuY29mJykocHJvY2VzcykgPT0gJ3Byb2Nlc3MnXG4gICwgaGVhZCwgbGFzdCwgbm90aWZ5O1xuXG52YXIgZmx1c2ggPSBmdW5jdGlvbigpe1xuICB2YXIgcGFyZW50LCBkb21haW4sIGZuO1xuICBpZihpc05vZGUgJiYgKHBhcmVudCA9IHByb2Nlc3MuZG9tYWluKSl7XG4gICAgcHJvY2Vzcy5kb21haW4gPSBudWxsO1xuICAgIHBhcmVudC5leGl0KCk7XG4gIH1cbiAgd2hpbGUoaGVhZCl7XG4gICAgZG9tYWluID0gaGVhZC5kb21haW47XG4gICAgZm4gICAgID0gaGVhZC5mbjtcbiAgICBpZihkb21haW4pZG9tYWluLmVudGVyKCk7XG4gICAgZm4oKTsgLy8gPC0gY3VycmVudGx5IHdlIHVzZSBpdCBvbmx5IGZvciBQcm9taXNlIC0gdHJ5IC8gY2F0Y2ggbm90IHJlcXVpcmVkXG4gICAgaWYoZG9tYWluKWRvbWFpbi5leGl0KCk7XG4gICAgaGVhZCA9IGhlYWQubmV4dDtcbiAgfSBsYXN0ID0gdW5kZWZpbmVkO1xuICBpZihwYXJlbnQpcGFyZW50LmVudGVyKCk7XG59O1xuXG4vLyBOb2RlLmpzXG5pZihpc05vZGUpe1xuICBub3RpZnkgPSBmdW5jdGlvbigpe1xuICAgIHByb2Nlc3MubmV4dFRpY2soZmx1c2gpO1xuICB9O1xuLy8gYnJvd3NlcnMgd2l0aCBNdXRhdGlvbk9ic2VydmVyXG59IGVsc2UgaWYoT2JzZXJ2ZXIpe1xuICB2YXIgdG9nZ2xlID0gMVxuICAgICwgbm9kZSAgID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xuICBuZXcgT2JzZXJ2ZXIoZmx1c2gpLm9ic2VydmUobm9kZSwge2NoYXJhY3RlckRhdGE6IHRydWV9KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXdcbiAgbm90aWZ5ID0gZnVuY3Rpb24oKXtcbiAgICBub2RlLmRhdGEgPSB0b2dnbGUgPSAtdG9nZ2xlO1xuICB9O1xuLy8gZW52aXJvbm1lbnRzIHdpdGggbWF5YmUgbm9uLWNvbXBsZXRlbHkgY29ycmVjdCwgYnV0IGV4aXN0ZW50IFByb21pc2Vcbn0gZWxzZSBpZihQcm9taXNlICYmIFByb21pc2UucmVzb2x2ZSl7XG4gIG5vdGlmeSA9IGZ1bmN0aW9uKCl7XG4gICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmbHVzaCk7XG4gIH07XG4vLyBmb3Igb3RoZXIgZW52aXJvbm1lbnRzIC0gbWFjcm90YXNrIGJhc2VkIG9uOlxuLy8gLSBzZXRJbW1lZGlhdGVcbi8vIC0gTWVzc2FnZUNoYW5uZWxcbi8vIC0gd2luZG93LnBvc3RNZXNzYWdcbi8vIC0gb25yZWFkeXN0YXRlY2hhbmdlXG4vLyAtIHNldFRpbWVvdXRcbn0gZWxzZSB7XG4gIG5vdGlmeSA9IGZ1bmN0aW9uKCl7XG4gICAgLy8gc3RyYW5nZSBJRSArIHdlYnBhY2sgZGV2IHNlcnZlciBidWcgLSB1c2UgLmNhbGwoZ2xvYmFsKVxuICAgIG1hY3JvdGFzay5jYWxsKGdsb2JhbCwgZmx1c2gpO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGFzYXAoZm4pe1xuICB2YXIgdGFzayA9IHtmbjogZm4sIG5leHQ6IHVuZGVmaW5lZCwgZG9tYWluOiBpc05vZGUgJiYgcHJvY2Vzcy5kb21haW59O1xuICBpZihsYXN0KWxhc3QubmV4dCA9IHRhc2s7XG4gIGlmKCFoZWFkKXtcbiAgICBoZWFkID0gdGFzaztcbiAgICBub3RpZnkoKTtcbiAgfSBsYXN0ID0gdGFzaztcbn07IiwiLy8gMTkuMS4yLjEgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSwgLi4uKVxudmFyICQgICAgICAgID0gcmVxdWlyZSgnLi8kJylcbiAgLCB0b09iamVjdCA9IHJlcXVpcmUoJy4vJC50by1vYmplY3QnKVxuICAsIElPYmplY3QgID0gcmVxdWlyZSgnLi8kLmlvYmplY3QnKTtcblxuLy8gc2hvdWxkIHdvcmsgd2l0aCBzeW1ib2xzIGFuZCBzaG91bGQgaGF2ZSBkZXRlcm1pbmlzdGljIHByb3BlcnR5IG9yZGVyIChWOCBidWcpXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vJC5mYWlscycpKGZ1bmN0aW9uKCl7XG4gIHZhciBhID0gT2JqZWN0LmFzc2lnblxuICAgICwgQSA9IHt9XG4gICAgLCBCID0ge31cbiAgICAsIFMgPSBTeW1ib2woKVxuICAgICwgSyA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdCc7XG4gIEFbU10gPSA3O1xuICBLLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uKGspeyBCW2tdID0gazsgfSk7XG4gIHJldHVybiBhKHt9LCBBKVtTXSAhPSA3IHx8IE9iamVjdC5rZXlzKGEoe30sIEIpKS5qb2luKCcnKSAhPSBLO1xufSkgPyBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0LCBzb3VyY2UpeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gIHZhciBUICAgICA9IHRvT2JqZWN0KHRhcmdldClcbiAgICAsICQkICAgID0gYXJndW1lbnRzXG4gICAgLCAkJGxlbiA9ICQkLmxlbmd0aFxuICAgICwgaW5kZXggPSAxXG4gICAgLCBnZXRLZXlzICAgID0gJC5nZXRLZXlzXG4gICAgLCBnZXRTeW1ib2xzID0gJC5nZXRTeW1ib2xzXG4gICAgLCBpc0VudW0gICAgID0gJC5pc0VudW07XG4gIHdoaWxlKCQkbGVuID4gaW5kZXgpe1xuICAgIHZhciBTICAgICAgPSBJT2JqZWN0KCQkW2luZGV4KytdKVxuICAgICAgLCBrZXlzICAgPSBnZXRTeW1ib2xzID8gZ2V0S2V5cyhTKS5jb25jYXQoZ2V0U3ltYm9scyhTKSkgOiBnZXRLZXlzKFMpXG4gICAgICAsIGxlbmd0aCA9IGtleXMubGVuZ3RoXG4gICAgICAsIGogICAgICA9IDBcbiAgICAgICwga2V5O1xuICAgIHdoaWxlKGxlbmd0aCA+IGopaWYoaXNFbnVtLmNhbGwoUywga2V5ID0ga2V5c1tqKytdKSlUW2tleV0gPSBTW2tleV07XG4gIH1cbiAgcmV0dXJuIFQ7XG59IDogT2JqZWN0LmFzc2lnbjsiLCIvLyBtb3N0IE9iamVjdCBtZXRob2RzIGJ5IEVTNiBzaG91bGQgYWNjZXB0IHByaW1pdGl2ZXNcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi8kLmV4cG9ydCcpXG4gICwgY29yZSAgICA9IHJlcXVpcmUoJy4vJC5jb3JlJylcbiAgLCBmYWlscyAgID0gcmVxdWlyZSgnLi8kLmZhaWxzJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKEtFWSwgZXhlYyl7XG4gIHZhciBmbiAgPSAoY29yZS5PYmplY3QgfHwge30pW0tFWV0gfHwgT2JqZWN0W0tFWV1cbiAgICAsIGV4cCA9IHt9O1xuICBleHBbS0VZXSA9IGV4ZWMoZm4pO1xuICAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqIGZhaWxzKGZ1bmN0aW9uKCl7IGZuKDEpOyB9KSwgJ09iamVjdCcsIGV4cCk7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYml0bWFwLCB2YWx1ZSl7XG4gIHJldHVybiB7XG4gICAgZW51bWVyYWJsZSAgOiAhKGJpdG1hcCAmIDEpLFxuICAgIGNvbmZpZ3VyYWJsZTogIShiaXRtYXAgJiAyKSxcbiAgICB3cml0YWJsZSAgICA6ICEoYml0bWFwICYgNCksXG4gICAgdmFsdWUgICAgICAgOiB2YWx1ZVxuICB9O1xufTsiLCJ2YXIgcmVkZWZpbmUgPSByZXF1aXJlKCcuLyQucmVkZWZpbmUnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odGFyZ2V0LCBzcmMpe1xuICBmb3IodmFyIGtleSBpbiBzcmMpcmVkZWZpbmUodGFyZ2V0LCBrZXksIHNyY1trZXldKTtcbiAgcmV0dXJuIHRhcmdldDtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLyQuaGlkZScpOyIsIi8vIDcuMi45IFNhbWVWYWx1ZSh4LCB5KVxubW9kdWxlLmV4cG9ydHMgPSBPYmplY3QuaXMgfHwgZnVuY3Rpb24gaXMoeCwgeSl7XG4gIHJldHVybiB4ID09PSB5ID8geCAhPT0gMCB8fCAxIC8geCA9PT0gMSAvIHkgOiB4ICE9IHggJiYgeSAhPSB5O1xufTsiLCIvLyBXb3JrcyB3aXRoIF9fcHJvdG9fXyBvbmx5LiBPbGQgdjggY2FuJ3Qgd29yayB3aXRoIG51bGwgcHJvdG8gb2JqZWN0cy5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG52YXIgZ2V0RGVzYyAgPSByZXF1aXJlKCcuLyQnKS5nZXREZXNjXG4gICwgaXNPYmplY3QgPSByZXF1aXJlKCcuLyQuaXMtb2JqZWN0JylcbiAgLCBhbk9iamVjdCA9IHJlcXVpcmUoJy4vJC5hbi1vYmplY3QnKTtcbnZhciBjaGVjayA9IGZ1bmN0aW9uKE8sIHByb3RvKXtcbiAgYW5PYmplY3QoTyk7XG4gIGlmKCFpc09iamVjdChwcm90bykgJiYgcHJvdG8gIT09IG51bGwpdGhyb3cgVHlwZUVycm9yKHByb3RvICsgXCI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhXCIpO1xufTtcbm1vZHVsZS5leHBvcnRzID0ge1xuICBzZXQ6IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCAoJ19fcHJvdG9fXycgaW4ge30gPyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgZnVuY3Rpb24odGVzdCwgYnVnZ3ksIHNldCl7XG4gICAgICB0cnkge1xuICAgICAgICBzZXQgPSByZXF1aXJlKCcuLyQuY3R4JykoRnVuY3Rpb24uY2FsbCwgZ2V0RGVzYyhPYmplY3QucHJvdG90eXBlLCAnX19wcm90b19fJykuc2V0LCAyKTtcbiAgICAgICAgc2V0KHRlc3QsIFtdKTtcbiAgICAgICAgYnVnZ3kgPSAhKHRlc3QgaW5zdGFuY2VvZiBBcnJheSk7XG4gICAgICB9IGNhdGNoKGUpeyBidWdneSA9IHRydWU7IH1cbiAgICAgIHJldHVybiBmdW5jdGlvbiBzZXRQcm90b3R5cGVPZihPLCBwcm90byl7XG4gICAgICAgIGNoZWNrKE8sIHByb3RvKTtcbiAgICAgICAgaWYoYnVnZ3kpTy5fX3Byb3RvX18gPSBwcm90bztcbiAgICAgICAgZWxzZSBzZXQoTywgcHJvdG8pO1xuICAgICAgICByZXR1cm4gTztcbiAgICAgIH07XG4gICAgfSh7fSwgZmFsc2UpIDogdW5kZWZpbmVkKSxcbiAgY2hlY2s6IGNoZWNrXG59OyIsIid1c2Ugc3RyaWN0JztcbnZhciBjb3JlICAgICAgICA9IHJlcXVpcmUoJy4vJC5jb3JlJylcbiAgLCAkICAgICAgICAgICA9IHJlcXVpcmUoJy4vJCcpXG4gICwgREVTQ1JJUFRPUlMgPSByZXF1aXJlKCcuLyQuZGVzY3JpcHRvcnMnKVxuICAsIFNQRUNJRVMgICAgID0gcmVxdWlyZSgnLi8kLndrcycpKCdzcGVjaWVzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oS0VZKXtcbiAgdmFyIEMgPSBjb3JlW0tFWV07XG4gIGlmKERFU0NSSVBUT1JTICYmIEMgJiYgIUNbU1BFQ0lFU10pJC5zZXREZXNjKEMsIFNQRUNJRVMsIHtcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbigpeyByZXR1cm4gdGhpczsgfVxuICB9KTtcbn07IiwidmFyIGRlZiA9IHJlcXVpcmUoJy4vJCcpLnNldERlc2NcbiAgLCBoYXMgPSByZXF1aXJlKCcuLyQuaGFzJylcbiAgLCBUQUcgPSByZXF1aXJlKCcuLyQud2tzJykoJ3RvU3RyaW5nVGFnJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIHRhZywgc3RhdCl7XG4gIGlmKGl0ICYmICFoYXMoaXQgPSBzdGF0ID8gaXQgOiBpdC5wcm90b3R5cGUsIFRBRykpZGVmKGl0LCBUQUcsIHtjb25maWd1cmFibGU6IHRydWUsIHZhbHVlOiB0YWd9KTtcbn07IiwidmFyIGdsb2JhbCA9IHJlcXVpcmUoJy4vJC5nbG9iYWwnKVxuICAsIFNIQVJFRCA9ICdfX2NvcmUtanNfc2hhcmVkX18nXG4gICwgc3RvcmUgID0gZ2xvYmFsW1NIQVJFRF0gfHwgKGdsb2JhbFtTSEFSRURdID0ge30pO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihrZXkpe1xuICByZXR1cm4gc3RvcmVba2V5XSB8fCAoc3RvcmVba2V5XSA9IHt9KTtcbn07IiwiLy8gNy4zLjIwIFNwZWNpZXNDb25zdHJ1Y3RvcihPLCBkZWZhdWx0Q29uc3RydWN0b3IpXG52YXIgYW5PYmplY3QgID0gcmVxdWlyZSgnLi8kLmFuLW9iamVjdCcpXG4gICwgYUZ1bmN0aW9uID0gcmVxdWlyZSgnLi8kLmEtZnVuY3Rpb24nKVxuICAsIFNQRUNJRVMgICA9IHJlcXVpcmUoJy4vJC53a3MnKSgnc3BlY2llcycpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihPLCBEKXtcbiAgdmFyIEMgPSBhbk9iamVjdChPKS5jb25zdHJ1Y3RvciwgUztcbiAgcmV0dXJuIEMgPT09IHVuZGVmaW5lZCB8fCAoUyA9IGFuT2JqZWN0KEMpW1NQRUNJRVNdKSA9PSB1bmRlZmluZWQgPyBEIDogYUZ1bmN0aW9uKFMpO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCBDb25zdHJ1Y3RvciwgbmFtZSl7XG4gIGlmKCEoaXQgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpdGhyb3cgVHlwZUVycm9yKG5hbWUgKyBcIjogdXNlIHRoZSAnbmV3JyBvcGVyYXRvciFcIik7XG4gIHJldHVybiBpdDtcbn07IiwidmFyIHRvSW50ZWdlciA9IHJlcXVpcmUoJy4vJC50by1pbnRlZ2VyJylcbiAgLCBkZWZpbmVkICAgPSByZXF1aXJlKCcuLyQuZGVmaW5lZCcpO1xuLy8gdHJ1ZSAgLT4gU3RyaW5nI2F0XG4vLyBmYWxzZSAtPiBTdHJpbmcjY29kZVBvaW50QXRcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oVE9fU1RSSU5HKXtcbiAgcmV0dXJuIGZ1bmN0aW9uKHRoYXQsIHBvcyl7XG4gICAgdmFyIHMgPSBTdHJpbmcoZGVmaW5lZCh0aGF0KSlcbiAgICAgICwgaSA9IHRvSW50ZWdlcihwb3MpXG4gICAgICAsIGwgPSBzLmxlbmd0aFxuICAgICAgLCBhLCBiO1xuICAgIGlmKGkgPCAwIHx8IGkgPj0gbClyZXR1cm4gVE9fU1RSSU5HID8gJycgOiB1bmRlZmluZWQ7XG4gICAgYSA9IHMuY2hhckNvZGVBdChpKTtcbiAgICByZXR1cm4gYSA8IDB4ZDgwMCB8fCBhID4gMHhkYmZmIHx8IGkgKyAxID09PSBsIHx8IChiID0gcy5jaGFyQ29kZUF0KGkgKyAxKSkgPCAweGRjMDAgfHwgYiA+IDB4ZGZmZlxuICAgICAgPyBUT19TVFJJTkcgPyBzLmNoYXJBdChpKSA6IGFcbiAgICAgIDogVE9fU1RSSU5HID8gcy5zbGljZShpLCBpICsgMikgOiAoYSAtIDB4ZDgwMCA8PCAxMCkgKyAoYiAtIDB4ZGMwMCkgKyAweDEwMDAwO1xuICB9O1xufTsiLCJ2YXIgY3R4ICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi8kLmN0eCcpXG4gICwgaW52b2tlICAgICAgICAgICAgID0gcmVxdWlyZSgnLi8kLmludm9rZScpXG4gICwgaHRtbCAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi8kLmh0bWwnKVxuICAsIGNlbCAgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vJC5kb20tY3JlYXRlJylcbiAgLCBnbG9iYWwgICAgICAgICAgICAgPSByZXF1aXJlKCcuLyQuZ2xvYmFsJylcbiAgLCBwcm9jZXNzICAgICAgICAgICAgPSBnbG9iYWwucHJvY2Vzc1xuICAsIHNldFRhc2sgICAgICAgICAgICA9IGdsb2JhbC5zZXRJbW1lZGlhdGVcbiAgLCBjbGVhclRhc2sgICAgICAgICAgPSBnbG9iYWwuY2xlYXJJbW1lZGlhdGVcbiAgLCBNZXNzYWdlQ2hhbm5lbCAgICAgPSBnbG9iYWwuTWVzc2FnZUNoYW5uZWxcbiAgLCBjb3VudGVyICAgICAgICAgICAgPSAwXG4gICwgcXVldWUgICAgICAgICAgICAgID0ge31cbiAgLCBPTlJFQURZU1RBVEVDSEFOR0UgPSAnb25yZWFkeXN0YXRlY2hhbmdlJ1xuICAsIGRlZmVyLCBjaGFubmVsLCBwb3J0O1xudmFyIHJ1biA9IGZ1bmN0aW9uKCl7XG4gIHZhciBpZCA9ICt0aGlzO1xuICBpZihxdWV1ZS5oYXNPd25Qcm9wZXJ0eShpZCkpe1xuICAgIHZhciBmbiA9IHF1ZXVlW2lkXTtcbiAgICBkZWxldGUgcXVldWVbaWRdO1xuICAgIGZuKCk7XG4gIH1cbn07XG52YXIgbGlzdG5lciA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgcnVuLmNhbGwoZXZlbnQuZGF0YSk7XG59O1xuLy8gTm9kZS5qcyAwLjkrICYgSUUxMCsgaGFzIHNldEltbWVkaWF0ZSwgb3RoZXJ3aXNlOlxuaWYoIXNldFRhc2sgfHwgIWNsZWFyVGFzayl7XG4gIHNldFRhc2sgPSBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoZm4pe1xuICAgIHZhciBhcmdzID0gW10sIGkgPSAxO1xuICAgIHdoaWxlKGFyZ3VtZW50cy5sZW5ndGggPiBpKWFyZ3MucHVzaChhcmd1bWVudHNbaSsrXSk7XG4gICAgcXVldWVbKytjb3VudGVyXSA9IGZ1bmN0aW9uKCl7XG4gICAgICBpbnZva2UodHlwZW9mIGZuID09ICdmdW5jdGlvbicgPyBmbiA6IEZ1bmN0aW9uKGZuKSwgYXJncyk7XG4gICAgfTtcbiAgICBkZWZlcihjb3VudGVyKTtcbiAgICByZXR1cm4gY291bnRlcjtcbiAgfTtcbiAgY2xlYXJUYXNrID0gZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaWQpe1xuICAgIGRlbGV0ZSBxdWV1ZVtpZF07XG4gIH07XG4gIC8vIE5vZGUuanMgMC44LVxuICBpZihyZXF1aXJlKCcuLyQuY29mJykocHJvY2VzcykgPT0gJ3Byb2Nlc3MnKXtcbiAgICBkZWZlciA9IGZ1bmN0aW9uKGlkKXtcbiAgICAgIHByb2Nlc3MubmV4dFRpY2soY3R4KHJ1biwgaWQsIDEpKTtcbiAgICB9O1xuICAvLyBCcm93c2VycyB3aXRoIE1lc3NhZ2VDaGFubmVsLCBpbmNsdWRlcyBXZWJXb3JrZXJzXG4gIH0gZWxzZSBpZihNZXNzYWdlQ2hhbm5lbCl7XG4gICAgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbDtcbiAgICBwb3J0ICAgID0gY2hhbm5lbC5wb3J0MjtcbiAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGxpc3RuZXI7XG4gICAgZGVmZXIgPSBjdHgocG9ydC5wb3N0TWVzc2FnZSwgcG9ydCwgMSk7XG4gIC8vIEJyb3dzZXJzIHdpdGggcG9zdE1lc3NhZ2UsIHNraXAgV2ViV29ya2Vyc1xuICAvLyBJRTggaGFzIHBvc3RNZXNzYWdlLCBidXQgaXQncyBzeW5jICYgdHlwZW9mIGl0cyBwb3N0TWVzc2FnZSBpcyAnb2JqZWN0J1xuICB9IGVsc2UgaWYoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIgJiYgdHlwZW9mIHBvc3RNZXNzYWdlID09ICdmdW5jdGlvbicgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKXtcbiAgICBkZWZlciA9IGZ1bmN0aW9uKGlkKXtcbiAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShpZCArICcnLCAnKicpO1xuICAgIH07XG4gICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsaXN0bmVyLCBmYWxzZSk7XG4gIC8vIElFOC1cbiAgfSBlbHNlIGlmKE9OUkVBRFlTVEFURUNIQU5HRSBpbiBjZWwoJ3NjcmlwdCcpKXtcbiAgICBkZWZlciA9IGZ1bmN0aW9uKGlkKXtcbiAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoY2VsKCdzY3JpcHQnKSlbT05SRUFEWVNUQVRFQ0hBTkdFXSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQodGhpcyk7XG4gICAgICAgIHJ1bi5jYWxsKGlkKTtcbiAgICAgIH07XG4gICAgfTtcbiAgLy8gUmVzdCBvbGQgYnJvd3NlcnNcbiAgfSBlbHNlIHtcbiAgICBkZWZlciA9IGZ1bmN0aW9uKGlkKXtcbiAgICAgIHNldFRpbWVvdXQoY3R4KHJ1biwgaWQsIDEpLCAwKTtcbiAgICB9O1xuICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgc2V0OiAgIHNldFRhc2ssXG4gIGNsZWFyOiBjbGVhclRhc2tcbn07IiwiLy8gNy4xLjQgVG9JbnRlZ2VyXG52YXIgY2VpbCAgPSBNYXRoLmNlaWxcbiAgLCBmbG9vciA9IE1hdGguZmxvb3I7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIGlzTmFOKGl0ID0gK2l0KSA/IDAgOiAoaXQgPiAwID8gZmxvb3IgOiBjZWlsKShpdCk7XG59OyIsIi8vIHRvIGluZGV4ZWQgb2JqZWN0LCB0b09iamVjdCB3aXRoIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgc3RyaW5nc1xudmFyIElPYmplY3QgPSByZXF1aXJlKCcuLyQuaW9iamVjdCcpXG4gICwgZGVmaW5lZCA9IHJlcXVpcmUoJy4vJC5kZWZpbmVkJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIElPYmplY3QoZGVmaW5lZChpdCkpO1xufTsiLCIvLyA3LjEuMTUgVG9MZW5ndGhcbnZhciB0b0ludGVnZXIgPSByZXF1aXJlKCcuLyQudG8taW50ZWdlcicpXG4gICwgbWluICAgICAgID0gTWF0aC5taW47XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIGl0ID4gMCA/IG1pbih0b0ludGVnZXIoaXQpLCAweDFmZmZmZmZmZmZmZmZmKSA6IDA7IC8vIHBvdygyLCA1MykgLSAxID09IDkwMDcxOTkyNTQ3NDA5OTFcbn07IiwiLy8gNy4xLjEzIFRvT2JqZWN0KGFyZ3VtZW50KVxudmFyIGRlZmluZWQgPSByZXF1aXJlKCcuLyQuZGVmaW5lZCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIHJldHVybiBPYmplY3QoZGVmaW5lZChpdCkpO1xufTsiLCJ2YXIgaWQgPSAwXG4gICwgcHggPSBNYXRoLnJhbmRvbSgpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihrZXkpe1xuICByZXR1cm4gJ1N5bWJvbCgnLmNvbmNhdChrZXkgPT09IHVuZGVmaW5lZCA/ICcnIDoga2V5LCAnKV8nLCAoKytpZCArIHB4KS50b1N0cmluZygzNikpO1xufTsiLCJ2YXIgc3RvcmUgID0gcmVxdWlyZSgnLi8kLnNoYXJlZCcpKCd3a3MnKVxuICAsIHVpZCAgICA9IHJlcXVpcmUoJy4vJC51aWQnKVxuICAsIFN5bWJvbCA9IHJlcXVpcmUoJy4vJC5nbG9iYWwnKS5TeW1ib2w7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG5hbWUpe1xuICByZXR1cm4gc3RvcmVbbmFtZV0gfHwgKHN0b3JlW25hbWVdID1cbiAgICBTeW1ib2wgJiYgU3ltYm9sW25hbWVdIHx8IChTeW1ib2wgfHwgdWlkKSgnU3ltYm9sLicgKyBuYW1lKSk7XG59OyIsInZhciBjbGFzc29mICAgPSByZXF1aXJlKCcuLyQuY2xhc3NvZicpXG4gICwgSVRFUkFUT1IgID0gcmVxdWlyZSgnLi8kLndrcycpKCdpdGVyYXRvcicpXG4gICwgSXRlcmF0b3JzID0gcmVxdWlyZSgnLi8kLml0ZXJhdG9ycycpO1xubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLyQuY29yZScpLmdldEl0ZXJhdG9yTWV0aG9kID0gZnVuY3Rpb24oaXQpe1xuICBpZihpdCAhPSB1bmRlZmluZWQpcmV0dXJuIGl0W0lURVJBVE9SXVxuICAgIHx8IGl0WydAQGl0ZXJhdG9yJ11cbiAgICB8fCBJdGVyYXRvcnNbY2xhc3NvZihpdCldO1xufTsiLCJ2YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuLyQuYW4tb2JqZWN0JylcbiAgLCBnZXQgICAgICA9IHJlcXVpcmUoJy4vY29yZS5nZXQtaXRlcmF0b3ItbWV0aG9kJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vJC5jb3JlJykuZ2V0SXRlcmF0b3IgPSBmdW5jdGlvbihpdCl7XG4gIHZhciBpdGVyRm4gPSBnZXQoaXQpO1xuICBpZih0eXBlb2YgaXRlckZuICE9ICdmdW5jdGlvbicpdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgaXRlcmFibGUhJyk7XG4gIHJldHVybiBhbk9iamVjdChpdGVyRm4uY2FsbChpdCkpO1xufTsiLCIndXNlIHN0cmljdCc7XG52YXIgYWRkVG9VbnNjb3BhYmxlcyA9IHJlcXVpcmUoJy4vJC5hZGQtdG8tdW5zY29wYWJsZXMnKVxuICAsIHN0ZXAgICAgICAgICAgICAgPSByZXF1aXJlKCcuLyQuaXRlci1zdGVwJylcbiAgLCBJdGVyYXRvcnMgICAgICAgID0gcmVxdWlyZSgnLi8kLml0ZXJhdG9ycycpXG4gICwgdG9JT2JqZWN0ICAgICAgICA9IHJlcXVpcmUoJy4vJC50by1pb2JqZWN0Jyk7XG5cbi8vIDIyLjEuMy40IEFycmF5LnByb3RvdHlwZS5lbnRyaWVzKClcbi8vIDIyLjEuMy4xMyBBcnJheS5wcm90b3R5cGUua2V5cygpXG4vLyAyMi4xLjMuMjkgQXJyYXkucHJvdG90eXBlLnZhbHVlcygpXG4vLyAyMi4xLjMuMzAgQXJyYXkucHJvdG90eXBlW0BAaXRlcmF0b3JdKClcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi8kLml0ZXItZGVmaW5lJykoQXJyYXksICdBcnJheScsIGZ1bmN0aW9uKGl0ZXJhdGVkLCBraW5kKXtcbiAgdGhpcy5fdCA9IHRvSU9iamVjdChpdGVyYXRlZCk7IC8vIHRhcmdldFxuICB0aGlzLl9pID0gMDsgICAgICAgICAgICAgICAgICAgLy8gbmV4dCBpbmRleFxuICB0aGlzLl9rID0ga2luZDsgICAgICAgICAgICAgICAgLy8ga2luZFxuLy8gMjIuMS41LjIuMSAlQXJyYXlJdGVyYXRvclByb3RvdHlwZSUubmV4dCgpXG59LCBmdW5jdGlvbigpe1xuICB2YXIgTyAgICAgPSB0aGlzLl90XG4gICAgLCBraW5kICA9IHRoaXMuX2tcbiAgICAsIGluZGV4ID0gdGhpcy5faSsrO1xuICBpZighTyB8fCBpbmRleCA+PSBPLmxlbmd0aCl7XG4gICAgdGhpcy5fdCA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gc3RlcCgxKTtcbiAgfVxuICBpZihraW5kID09ICdrZXlzJyAgKXJldHVybiBzdGVwKDAsIGluZGV4KTtcbiAgaWYoa2luZCA9PSAndmFsdWVzJylyZXR1cm4gc3RlcCgwLCBPW2luZGV4XSk7XG4gIHJldHVybiBzdGVwKDAsIFtpbmRleCwgT1tpbmRleF1dKTtcbn0sICd2YWx1ZXMnKTtcblxuLy8gYXJndW1lbnRzTGlzdFtAQGl0ZXJhdG9yXSBpcyAlQXJyYXlQcm90b192YWx1ZXMlICg5LjQuNC42LCA5LjQuNC43KVxuSXRlcmF0b3JzLkFyZ3VtZW50cyA9IEl0ZXJhdG9ycy5BcnJheTtcblxuYWRkVG9VbnNjb3BhYmxlcygna2V5cycpO1xuYWRkVG9VbnNjb3BhYmxlcygndmFsdWVzJyk7XG5hZGRUb1Vuc2NvcGFibGVzKCdlbnRyaWVzJyk7IiwiLy8gMTkuMS4zLjEgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSlcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi8kLmV4cG9ydCcpO1xuXG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiwgJ09iamVjdCcsIHthc3NpZ246IHJlcXVpcmUoJy4vJC5vYmplY3QtYXNzaWduJyl9KTsiLCIvLyAxOS4xLjIuNiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApXG52YXIgdG9JT2JqZWN0ID0gcmVxdWlyZSgnLi8kLnRvLWlvYmplY3QnKTtcblxucmVxdWlyZSgnLi8kLm9iamVjdC1zYXAnKSgnZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yJywgZnVuY3Rpb24oJGdldE93blByb3BlcnR5RGVzY3JpcHRvcil7XG4gIHJldHVybiBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaXQsIGtleSl7XG4gICAgcmV0dXJuICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodG9JT2JqZWN0KGl0KSwga2V5KTtcbiAgfTtcbn0pOyIsIi8vIDE5LjEuMi4xNCBPYmplY3Qua2V5cyhPKVxudmFyIHRvT2JqZWN0ID0gcmVxdWlyZSgnLi8kLnRvLW9iamVjdCcpO1xuXG5yZXF1aXJlKCcuLyQub2JqZWN0LXNhcCcpKCdrZXlzJywgZnVuY3Rpb24oJGtleXMpe1xuICByZXR1cm4gZnVuY3Rpb24ga2V5cyhpdCl7XG4gICAgcmV0dXJuICRrZXlzKHRvT2JqZWN0KGl0KSk7XG4gIH07XG59KTsiLCIvLyAxOS4xLjMuMTkgT2JqZWN0LnNldFByb3RvdHlwZU9mKE8sIHByb3RvKVxudmFyICRleHBvcnQgPSByZXF1aXJlKCcuLyQuZXhwb3J0Jyk7XG4kZXhwb3J0KCRleHBvcnQuUywgJ09iamVjdCcsIHtzZXRQcm90b3R5cGVPZjogcmVxdWlyZSgnLi8kLnNldC1wcm90bycpLnNldH0pOyIsbnVsbCwiJ3VzZSBzdHJpY3QnO1xudmFyICQgICAgICAgICAgPSByZXF1aXJlKCcuLyQnKVxuICAsIExJQlJBUlkgICAgPSByZXF1aXJlKCcuLyQubGlicmFyeScpXG4gICwgZ2xvYmFsICAgICA9IHJlcXVpcmUoJy4vJC5nbG9iYWwnKVxuICAsIGN0eCAgICAgICAgPSByZXF1aXJlKCcuLyQuY3R4JylcbiAgLCBjbGFzc29mICAgID0gcmVxdWlyZSgnLi8kLmNsYXNzb2YnKVxuICAsICRleHBvcnQgICAgPSByZXF1aXJlKCcuLyQuZXhwb3J0JylcbiAgLCBpc09iamVjdCAgID0gcmVxdWlyZSgnLi8kLmlzLW9iamVjdCcpXG4gICwgYW5PYmplY3QgICA9IHJlcXVpcmUoJy4vJC5hbi1vYmplY3QnKVxuICAsIGFGdW5jdGlvbiAgPSByZXF1aXJlKCcuLyQuYS1mdW5jdGlvbicpXG4gICwgc3RyaWN0TmV3ICA9IHJlcXVpcmUoJy4vJC5zdHJpY3QtbmV3JylcbiAgLCBmb3JPZiAgICAgID0gcmVxdWlyZSgnLi8kLmZvci1vZicpXG4gICwgc2V0UHJvdG8gICA9IHJlcXVpcmUoJy4vJC5zZXQtcHJvdG8nKS5zZXRcbiAgLCBzYW1lICAgICAgID0gcmVxdWlyZSgnLi8kLnNhbWUtdmFsdWUnKVxuICAsIFNQRUNJRVMgICAgPSByZXF1aXJlKCcuLyQud2tzJykoJ3NwZWNpZXMnKVxuICAsIHNwZWNpZXNDb25zdHJ1Y3RvciA9IHJlcXVpcmUoJy4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yJylcbiAgLCBhc2FwICAgICAgID0gcmVxdWlyZSgnLi8kLm1pY3JvdGFzaycpXG4gICwgUFJPTUlTRSAgICA9ICdQcm9taXNlJ1xuICAsIHByb2Nlc3MgICAgPSBnbG9iYWwucHJvY2Vzc1xuICAsIGlzTm9kZSAgICAgPSBjbGFzc29mKHByb2Nlc3MpID09ICdwcm9jZXNzJ1xuICAsIFAgICAgICAgICAgPSBnbG9iYWxbUFJPTUlTRV1cbiAgLCBlbXB0eSAgICAgID0gZnVuY3Rpb24oKXsgLyogZW1wdHkgKi8gfVxuICAsIFdyYXBwZXI7XG5cbnZhciB0ZXN0UmVzb2x2ZSA9IGZ1bmN0aW9uKHN1Yil7XG4gIHZhciB0ZXN0ID0gbmV3IFAoZW1wdHkpLCBwcm9taXNlO1xuICBpZihzdWIpdGVzdC5jb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKGV4ZWMpe1xuICAgIGV4ZWMoZW1wdHksIGVtcHR5KTtcbiAgfTtcbiAgKHByb21pc2UgPSBQLnJlc29sdmUodGVzdCkpWydjYXRjaCddKGVtcHR5KTtcbiAgcmV0dXJuIHByb21pc2UgPT09IHRlc3Q7XG59O1xuXG52YXIgVVNFX05BVElWRSA9IGZ1bmN0aW9uKCl7XG4gIHZhciB3b3JrcyA9IGZhbHNlO1xuICBmdW5jdGlvbiBQMih4KXtcbiAgICB2YXIgc2VsZiA9IG5ldyBQKHgpO1xuICAgIHNldFByb3RvKHNlbGYsIFAyLnByb3RvdHlwZSk7XG4gICAgcmV0dXJuIHNlbGY7XG4gIH1cbiAgdHJ5IHtcbiAgICB3b3JrcyA9IFAgJiYgUC5yZXNvbHZlICYmIHRlc3RSZXNvbHZlKCk7XG4gICAgc2V0UHJvdG8oUDIsIFApO1xuICAgIFAyLnByb3RvdHlwZSA9ICQuY3JlYXRlKFAucHJvdG90eXBlLCB7Y29uc3RydWN0b3I6IHt2YWx1ZTogUDJ9fSk7XG4gICAgLy8gYWN0dWFsIEZpcmVmb3ggaGFzIGJyb2tlbiBzdWJjbGFzcyBzdXBwb3J0LCB0ZXN0IHRoYXRcbiAgICBpZighKFAyLnJlc29sdmUoNSkudGhlbihmdW5jdGlvbigpe30pIGluc3RhbmNlb2YgUDIpKXtcbiAgICAgIHdvcmtzID0gZmFsc2U7XG4gICAgfVxuICAgIC8vIGFjdHVhbCBWOCBidWcsIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD00MTYyXG4gICAgaWYod29ya3MgJiYgcmVxdWlyZSgnLi8kLmRlc2NyaXB0b3JzJykpe1xuICAgICAgdmFyIHRoZW5hYmxlVGhlbkdvdHRlbiA9IGZhbHNlO1xuICAgICAgUC5yZXNvbHZlKCQuc2V0RGVzYyh7fSwgJ3RoZW4nLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKXsgdGhlbmFibGVUaGVuR290dGVuID0gdHJ1ZTsgfVxuICAgICAgfSkpO1xuICAgICAgd29ya3MgPSB0aGVuYWJsZVRoZW5Hb3R0ZW47XG4gICAgfVxuICB9IGNhdGNoKGUpeyB3b3JrcyA9IGZhbHNlOyB9XG4gIHJldHVybiB3b3Jrcztcbn0oKTtcblxuLy8gaGVscGVyc1xudmFyIHNhbWVDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKGEsIGIpe1xuICAvLyBsaWJyYXJ5IHdyYXBwZXIgc3BlY2lhbCBjYXNlXG4gIGlmKExJQlJBUlkgJiYgYSA9PT0gUCAmJiBiID09PSBXcmFwcGVyKXJldHVybiB0cnVlO1xuICByZXR1cm4gc2FtZShhLCBiKTtcbn07XG52YXIgZ2V0Q29uc3RydWN0b3IgPSBmdW5jdGlvbihDKXtcbiAgdmFyIFMgPSBhbk9iamVjdChDKVtTUEVDSUVTXTtcbiAgcmV0dXJuIFMgIT0gdW5kZWZpbmVkID8gUyA6IEM7XG59O1xudmFyIGlzVGhlbmFibGUgPSBmdW5jdGlvbihpdCl7XG4gIHZhciB0aGVuO1xuICByZXR1cm4gaXNPYmplY3QoaXQpICYmIHR5cGVvZiAodGhlbiA9IGl0LnRoZW4pID09ICdmdW5jdGlvbicgPyB0aGVuIDogZmFsc2U7XG59O1xudmFyIFByb21pc2VDYXBhYmlsaXR5ID0gZnVuY3Rpb24oQyl7XG4gIHZhciByZXNvbHZlLCByZWplY3Q7XG4gIHRoaXMucHJvbWlzZSA9IG5ldyBDKGZ1bmN0aW9uKCQkcmVzb2x2ZSwgJCRyZWplY3Qpe1xuICAgIGlmKHJlc29sdmUgIT09IHVuZGVmaW5lZCB8fCByZWplY3QgIT09IHVuZGVmaW5lZCl0aHJvdyBUeXBlRXJyb3IoJ0JhZCBQcm9taXNlIGNvbnN0cnVjdG9yJyk7XG4gICAgcmVzb2x2ZSA9ICQkcmVzb2x2ZTtcbiAgICByZWplY3QgID0gJCRyZWplY3Q7XG4gIH0pO1xuICB0aGlzLnJlc29sdmUgPSBhRnVuY3Rpb24ocmVzb2x2ZSksXG4gIHRoaXMucmVqZWN0ICA9IGFGdW5jdGlvbihyZWplY3QpXG59O1xudmFyIHBlcmZvcm0gPSBmdW5jdGlvbihleGVjKXtcbiAgdHJ5IHtcbiAgICBleGVjKCk7XG4gIH0gY2F0Y2goZSl7XG4gICAgcmV0dXJuIHtlcnJvcjogZX07XG4gIH1cbn07XG52YXIgbm90aWZ5ID0gZnVuY3Rpb24ocmVjb3JkLCBpc1JlamVjdCl7XG4gIGlmKHJlY29yZC5uKXJldHVybjtcbiAgcmVjb3JkLm4gPSB0cnVlO1xuICB2YXIgY2hhaW4gPSByZWNvcmQuYztcbiAgYXNhcChmdW5jdGlvbigpe1xuICAgIHZhciB2YWx1ZSA9IHJlY29yZC52XG4gICAgICAsIG9rICAgID0gcmVjb3JkLnMgPT0gMVxuICAgICAgLCBpICAgICA9IDA7XG4gICAgdmFyIHJ1biA9IGZ1bmN0aW9uKHJlYWN0aW9uKXtcbiAgICAgIHZhciBoYW5kbGVyID0gb2sgPyByZWFjdGlvbi5vayA6IHJlYWN0aW9uLmZhaWxcbiAgICAgICAgLCByZXNvbHZlID0gcmVhY3Rpb24ucmVzb2x2ZVxuICAgICAgICAsIHJlamVjdCAgPSByZWFjdGlvbi5yZWplY3RcbiAgICAgICAgLCByZXN1bHQsIHRoZW47XG4gICAgICB0cnkge1xuICAgICAgICBpZihoYW5kbGVyKXtcbiAgICAgICAgICBpZighb2spcmVjb3JkLmggPSB0cnVlO1xuICAgICAgICAgIHJlc3VsdCA9IGhhbmRsZXIgPT09IHRydWUgPyB2YWx1ZSA6IGhhbmRsZXIodmFsdWUpO1xuICAgICAgICAgIGlmKHJlc3VsdCA9PT0gcmVhY3Rpb24ucHJvbWlzZSl7XG4gICAgICAgICAgICByZWplY3QoVHlwZUVycm9yKCdQcm9taXNlLWNoYWluIGN5Y2xlJykpO1xuICAgICAgICAgIH0gZWxzZSBpZih0aGVuID0gaXNUaGVuYWJsZShyZXN1bHQpKXtcbiAgICAgICAgICAgIHRoZW4uY2FsbChyZXN1bHQsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSBlbHNlIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSBlbHNlIHJlamVjdCh2YWx1ZSk7XG4gICAgICB9IGNhdGNoKGUpe1xuICAgICAgICByZWplY3QoZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB3aGlsZShjaGFpbi5sZW5ndGggPiBpKXJ1bihjaGFpbltpKytdKTsgLy8gdmFyaWFibGUgbGVuZ3RoIC0gY2FuJ3QgdXNlIGZvckVhY2hcbiAgICBjaGFpbi5sZW5ndGggPSAwO1xuICAgIHJlY29yZC5uID0gZmFsc2U7XG4gICAgaWYoaXNSZWplY3Qpc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgdmFyIHByb21pc2UgPSByZWNvcmQucFxuICAgICAgICAsIGhhbmRsZXIsIGNvbnNvbGU7XG4gICAgICBpZihpc1VuaGFuZGxlZChwcm9taXNlKSl7XG4gICAgICAgIGlmKGlzTm9kZSl7XG4gICAgICAgICAgcHJvY2Vzcy5lbWl0KCd1bmhhbmRsZWRSZWplY3Rpb24nLCB2YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgIH0gZWxzZSBpZihoYW5kbGVyID0gZ2xvYmFsLm9udW5oYW5kbGVkcmVqZWN0aW9uKXtcbiAgICAgICAgICBoYW5kbGVyKHtwcm9taXNlOiBwcm9taXNlLCByZWFzb246IHZhbHVlfSk7XG4gICAgICAgIH0gZWxzZSBpZigoY29uc29sZSA9IGdsb2JhbC5jb25zb2xlKSAmJiBjb25zb2xlLmVycm9yKXtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb24nLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gcmVjb3JkLmEgPSB1bmRlZmluZWQ7XG4gICAgfSwgMSk7XG4gIH0pO1xufTtcbnZhciBpc1VuaGFuZGxlZCA9IGZ1bmN0aW9uKHByb21pc2Upe1xuICB2YXIgcmVjb3JkID0gcHJvbWlzZS5fZFxuICAgICwgY2hhaW4gID0gcmVjb3JkLmEgfHwgcmVjb3JkLmNcbiAgICAsIGkgICAgICA9IDBcbiAgICAsIHJlYWN0aW9uO1xuICBpZihyZWNvcmQuaClyZXR1cm4gZmFsc2U7XG4gIHdoaWxlKGNoYWluLmxlbmd0aCA+IGkpe1xuICAgIHJlYWN0aW9uID0gY2hhaW5baSsrXTtcbiAgICBpZihyZWFjdGlvbi5mYWlsIHx8ICFpc1VuaGFuZGxlZChyZWFjdGlvbi5wcm9taXNlKSlyZXR1cm4gZmFsc2U7XG4gIH0gcmV0dXJuIHRydWU7XG59O1xudmFyICRyZWplY3QgPSBmdW5jdGlvbih2YWx1ZSl7XG4gIHZhciByZWNvcmQgPSB0aGlzO1xuICBpZihyZWNvcmQuZClyZXR1cm47XG4gIHJlY29yZC5kID0gdHJ1ZTtcbiAgcmVjb3JkID0gcmVjb3JkLnIgfHwgcmVjb3JkOyAvLyB1bndyYXBcbiAgcmVjb3JkLnYgPSB2YWx1ZTtcbiAgcmVjb3JkLnMgPSAyO1xuICByZWNvcmQuYSA9IHJlY29yZC5jLnNsaWNlKCk7XG4gIG5vdGlmeShyZWNvcmQsIHRydWUpO1xufTtcbnZhciAkcmVzb2x2ZSA9IGZ1bmN0aW9uKHZhbHVlKXtcbiAgdmFyIHJlY29yZCA9IHRoaXNcbiAgICAsIHRoZW47XG4gIGlmKHJlY29yZC5kKXJldHVybjtcbiAgcmVjb3JkLmQgPSB0cnVlO1xuICByZWNvcmQgPSByZWNvcmQuciB8fCByZWNvcmQ7IC8vIHVud3JhcFxuICB0cnkge1xuICAgIGlmKHJlY29yZC5wID09PSB2YWx1ZSl0aHJvdyBUeXBlRXJyb3IoXCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZlwiKTtcbiAgICBpZih0aGVuID0gaXNUaGVuYWJsZSh2YWx1ZSkpe1xuICAgICAgYXNhcChmdW5jdGlvbigpe1xuICAgICAgICB2YXIgd3JhcHBlciA9IHtyOiByZWNvcmQsIGQ6IGZhbHNlfTsgLy8gd3JhcFxuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoZW4uY2FsbCh2YWx1ZSwgY3R4KCRyZXNvbHZlLCB3cmFwcGVyLCAxKSwgY3R4KCRyZWplY3QsIHdyYXBwZXIsIDEpKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAkcmVqZWN0LmNhbGwod3JhcHBlciwgZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZWNvcmQudiA9IHZhbHVlO1xuICAgICAgcmVjb3JkLnMgPSAxO1xuICAgICAgbm90aWZ5KHJlY29yZCwgZmFsc2UpO1xuICAgIH1cbiAgfSBjYXRjaChlKXtcbiAgICAkcmVqZWN0LmNhbGwoe3I6IHJlY29yZCwgZDogZmFsc2V9LCBlKTsgLy8gd3JhcFxuICB9XG59O1xuXG4vLyBjb25zdHJ1Y3RvciBwb2x5ZmlsbFxuaWYoIVVTRV9OQVRJVkUpe1xuICAvLyAyNS40LjMuMSBQcm9taXNlKGV4ZWN1dG9yKVxuICBQID0gZnVuY3Rpb24gUHJvbWlzZShleGVjdXRvcil7XG4gICAgYUZ1bmN0aW9uKGV4ZWN1dG9yKTtcbiAgICB2YXIgcmVjb3JkID0gdGhpcy5fZCA9IHtcbiAgICAgIHA6IHN0cmljdE5ldyh0aGlzLCBQLCBQUk9NSVNFKSwgICAgICAgICAvLyA8LSBwcm9taXNlXG4gICAgICBjOiBbXSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPC0gYXdhaXRpbmcgcmVhY3Rpb25zXG4gICAgICBhOiB1bmRlZmluZWQsICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPC0gY2hlY2tlZCBpbiBpc1VuaGFuZGxlZCByZWFjdGlvbnNcbiAgICAgIHM6IDAsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA8LSBzdGF0ZVxuICAgICAgZDogZmFsc2UsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDwtIGRvbmVcbiAgICAgIHY6IHVuZGVmaW5lZCwgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA8LSB2YWx1ZVxuICAgICAgaDogZmFsc2UsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDwtIGhhbmRsZWQgcmVqZWN0aW9uXG4gICAgICBuOiBmYWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPC0gbm90aWZ5XG4gICAgfTtcbiAgICB0cnkge1xuICAgICAgZXhlY3V0b3IoY3R4KCRyZXNvbHZlLCByZWNvcmQsIDEpLCBjdHgoJHJlamVjdCwgcmVjb3JkLCAxKSk7XG4gICAgfSBjYXRjaChlcnIpe1xuICAgICAgJHJlamVjdC5jYWxsKHJlY29yZCwgZXJyKTtcbiAgICB9XG4gIH07XG4gIHJlcXVpcmUoJy4vJC5yZWRlZmluZS1hbGwnKShQLnByb3RvdHlwZSwge1xuICAgIC8vIDI1LjQuNS4zIFByb21pc2UucHJvdG90eXBlLnRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpXG4gICAgdGhlbjogZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCl7XG4gICAgICB2YXIgcmVhY3Rpb24gPSBuZXcgUHJvbWlzZUNhcGFiaWxpdHkoc3BlY2llc0NvbnN0cnVjdG9yKHRoaXMsIFApKVxuICAgICAgICAsIHByb21pc2UgID0gcmVhY3Rpb24ucHJvbWlzZVxuICAgICAgICAsIHJlY29yZCAgID0gdGhpcy5fZDtcbiAgICAgIHJlYWN0aW9uLm9rICAgPSB0eXBlb2Ygb25GdWxmaWxsZWQgPT0gJ2Z1bmN0aW9uJyA/IG9uRnVsZmlsbGVkIDogdHJ1ZTtcbiAgICAgIHJlYWN0aW9uLmZhaWwgPSB0eXBlb2Ygb25SZWplY3RlZCA9PSAnZnVuY3Rpb24nICYmIG9uUmVqZWN0ZWQ7XG4gICAgICByZWNvcmQuYy5wdXNoKHJlYWN0aW9uKTtcbiAgICAgIGlmKHJlY29yZC5hKXJlY29yZC5hLnB1c2gocmVhY3Rpb24pO1xuICAgICAgaWYocmVjb3JkLnMpbm90aWZ5KHJlY29yZCwgZmFsc2UpO1xuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfSxcbiAgICAvLyAyNS40LjUuMSBQcm9taXNlLnByb3RvdHlwZS5jYXRjaChvblJlamVjdGVkKVxuICAgICdjYXRjaCc6IGZ1bmN0aW9uKG9uUmVqZWN0ZWQpe1xuICAgICAgcmV0dXJuIHRoaXMudGhlbih1bmRlZmluZWQsIG9uUmVqZWN0ZWQpO1xuICAgIH1cbiAgfSk7XG59XG5cbiRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5XICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIHtQcm9taXNlOiBQfSk7XG5yZXF1aXJlKCcuLyQuc2V0LXRvLXN0cmluZy10YWcnKShQLCBQUk9NSVNFKTtcbnJlcXVpcmUoJy4vJC5zZXQtc3BlY2llcycpKFBST01JU0UpO1xuV3JhcHBlciA9IHJlcXVpcmUoJy4vJC5jb3JlJylbUFJPTUlTRV07XG5cbi8vIHN0YXRpY3NcbiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIFBST01JU0UsIHtcbiAgLy8gMjUuNC40LjUgUHJvbWlzZS5yZWplY3QocilcbiAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3Qocil7XG4gICAgdmFyIGNhcGFiaWxpdHkgPSBuZXcgUHJvbWlzZUNhcGFiaWxpdHkodGhpcylcbiAgICAgICwgJCRyZWplY3QgICA9IGNhcGFiaWxpdHkucmVqZWN0O1xuICAgICQkcmVqZWN0KHIpO1xuICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7XG4gIH1cbn0pO1xuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAoIVVTRV9OQVRJVkUgfHwgdGVzdFJlc29sdmUodHJ1ZSkpLCBQUk9NSVNFLCB7XG4gIC8vIDI1LjQuNC42IFByb21pc2UucmVzb2x2ZSh4KVxuICByZXNvbHZlOiBmdW5jdGlvbiByZXNvbHZlKHgpe1xuICAgIC8vIGluc3RhbmNlb2YgaW5zdGVhZCBvZiBpbnRlcm5hbCBzbG90IGNoZWNrIGJlY2F1c2Ugd2Ugc2hvdWxkIGZpeCBpdCB3aXRob3V0IHJlcGxhY2VtZW50IG5hdGl2ZSBQcm9taXNlIGNvcmVcbiAgICBpZih4IGluc3RhbmNlb2YgUCAmJiBzYW1lQ29uc3RydWN0b3IoeC5jb25zdHJ1Y3RvciwgdGhpcykpcmV0dXJuIHg7XG4gICAgdmFyIGNhcGFiaWxpdHkgPSBuZXcgUHJvbWlzZUNhcGFiaWxpdHkodGhpcylcbiAgICAgICwgJCRyZXNvbHZlICA9IGNhcGFiaWxpdHkucmVzb2x2ZTtcbiAgICAkJHJlc29sdmUoeCk7XG4gICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxufSk7XG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICEoVVNFX05BVElWRSAmJiByZXF1aXJlKCcuLyQuaXRlci1kZXRlY3QnKShmdW5jdGlvbihpdGVyKXtcbiAgUC5hbGwoaXRlcilbJ2NhdGNoJ10oZnVuY3Rpb24oKXt9KTtcbn0pKSwgUFJPTUlTRSwge1xuICAvLyAyNS40LjQuMSBQcm9taXNlLmFsbChpdGVyYWJsZSlcbiAgYWxsOiBmdW5jdGlvbiBhbGwoaXRlcmFibGUpe1xuICAgIHZhciBDICAgICAgICAgID0gZ2V0Q29uc3RydWN0b3IodGhpcylcbiAgICAgICwgY2FwYWJpbGl0eSA9IG5ldyBQcm9taXNlQ2FwYWJpbGl0eShDKVxuICAgICAgLCByZXNvbHZlICAgID0gY2FwYWJpbGl0eS5yZXNvbHZlXG4gICAgICAsIHJlamVjdCAgICAgPSBjYXBhYmlsaXR5LnJlamVjdFxuICAgICAgLCB2YWx1ZXMgICAgID0gW107XG4gICAgdmFyIGFicnVwdCA9IHBlcmZvcm0oZnVuY3Rpb24oKXtcbiAgICAgIGZvck9mKGl0ZXJhYmxlLCBmYWxzZSwgdmFsdWVzLnB1c2gsIHZhbHVlcyk7XG4gICAgICB2YXIgcmVtYWluaW5nID0gdmFsdWVzLmxlbmd0aFxuICAgICAgICAsIHJlc3VsdHMgICA9IEFycmF5KHJlbWFpbmluZyk7XG4gICAgICBpZihyZW1haW5pbmcpJC5lYWNoLmNhbGwodmFsdWVzLCBmdW5jdGlvbihwcm9taXNlLCBpbmRleCl7XG4gICAgICAgIHZhciBhbHJlYWR5Q2FsbGVkID0gZmFsc2U7XG4gICAgICAgIEMucmVzb2x2ZShwcm9taXNlKS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICBpZihhbHJlYWR5Q2FsbGVkKXJldHVybjtcbiAgICAgICAgICBhbHJlYWR5Q2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICByZXN1bHRzW2luZGV4XSA9IHZhbHVlO1xuICAgICAgICAgIC0tcmVtYWluaW5nIHx8IHJlc29sdmUocmVzdWx0cyk7XG4gICAgICAgIH0sIHJlamVjdCk7XG4gICAgICB9KTtcbiAgICAgIGVsc2UgcmVzb2x2ZShyZXN1bHRzKTtcbiAgICB9KTtcbiAgICBpZihhYnJ1cHQpcmVqZWN0KGFicnVwdC5lcnJvcik7XG4gICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTtcbiAgfSxcbiAgLy8gMjUuNC40LjQgUHJvbWlzZS5yYWNlKGl0ZXJhYmxlKVxuICByYWNlOiBmdW5jdGlvbiByYWNlKGl0ZXJhYmxlKXtcbiAgICB2YXIgQyAgICAgICAgICA9IGdldENvbnN0cnVjdG9yKHRoaXMpXG4gICAgICAsIGNhcGFiaWxpdHkgPSBuZXcgUHJvbWlzZUNhcGFiaWxpdHkoQylcbiAgICAgICwgcmVqZWN0ICAgICA9IGNhcGFiaWxpdHkucmVqZWN0O1xuICAgIHZhciBhYnJ1cHQgPSBwZXJmb3JtKGZ1bmN0aW9uKCl7XG4gICAgICBmb3JPZihpdGVyYWJsZSwgZmFsc2UsIGZ1bmN0aW9uKHByb21pc2Upe1xuICAgICAgICBDLnJlc29sdmUocHJvbWlzZSkudGhlbihjYXBhYmlsaXR5LnJlc29sdmUsIHJlamVjdCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBpZihhYnJ1cHQpcmVqZWN0KGFicnVwdC5lcnJvcik7XG4gICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxufSk7IiwiJ3VzZSBzdHJpY3QnO1xudmFyIHN0cm9uZyA9IHJlcXVpcmUoJy4vJC5jb2xsZWN0aW9uLXN0cm9uZycpO1xuXG4vLyAyMy4yIFNldCBPYmplY3RzXG5yZXF1aXJlKCcuLyQuY29sbGVjdGlvbicpKCdTZXQnLCBmdW5jdGlvbihnZXQpe1xuICByZXR1cm4gZnVuY3Rpb24gU2V0KCl7IHJldHVybiBnZXQodGhpcywgYXJndW1lbnRzLmxlbmd0aCA+IDAgPyBhcmd1bWVudHNbMF0gOiB1bmRlZmluZWQpOyB9O1xufSwge1xuICAvLyAyMy4yLjMuMSBTZXQucHJvdG90eXBlLmFkZCh2YWx1ZSlcbiAgYWRkOiBmdW5jdGlvbiBhZGQodmFsdWUpe1xuICAgIHJldHVybiBzdHJvbmcuZGVmKHRoaXMsIHZhbHVlID0gdmFsdWUgPT09IDAgPyAwIDogdmFsdWUsIHZhbHVlKTtcbiAgfVxufSwgc3Ryb25nKTsiLCIndXNlIHN0cmljdCc7XG52YXIgJGF0ICA9IHJlcXVpcmUoJy4vJC5zdHJpbmctYXQnKSh0cnVlKTtcblxuLy8gMjEuMS4zLjI3IFN0cmluZy5wcm90b3R5cGVbQEBpdGVyYXRvcl0oKVxucmVxdWlyZSgnLi8kLml0ZXItZGVmaW5lJykoU3RyaW5nLCAnU3RyaW5nJywgZnVuY3Rpb24oaXRlcmF0ZWQpe1xuICB0aGlzLl90ID0gU3RyaW5nKGl0ZXJhdGVkKTsgLy8gdGFyZ2V0XG4gIHRoaXMuX2kgPSAwOyAgICAgICAgICAgICAgICAvLyBuZXh0IGluZGV4XG4vLyAyMS4xLjUuMi4xICVTdHJpbmdJdGVyYXRvclByb3RvdHlwZSUubmV4dCgpXG59LCBmdW5jdGlvbigpe1xuICB2YXIgTyAgICAgPSB0aGlzLl90XG4gICAgLCBpbmRleCA9IHRoaXMuX2lcbiAgICAsIHBvaW50O1xuICBpZihpbmRleCA+PSBPLmxlbmd0aClyZXR1cm4ge3ZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWV9O1xuICBwb2ludCA9ICRhdChPLCBpbmRleCk7XG4gIHRoaXMuX2kgKz0gcG9pbnQubGVuZ3RoO1xuICByZXR1cm4ge3ZhbHVlOiBwb2ludCwgZG9uZTogZmFsc2V9O1xufSk7IiwiLy8gaHR0cHM6Ly9naXRodWIuY29tL0RhdmlkQnJ1YW50L01hcC1TZXQucHJvdG90eXBlLnRvSlNPTlxudmFyICRleHBvcnQgID0gcmVxdWlyZSgnLi8kLmV4cG9ydCcpO1xuXG4kZXhwb3J0KCRleHBvcnQuUCwgJ1NldCcsIHt0b0pTT046IHJlcXVpcmUoJy4vJC5jb2xsZWN0aW9uLXRvLWpzb24nKSgnU2V0Jyl9KTsiLCJyZXF1aXJlKCcuL2VzNi5hcnJheS5pdGVyYXRvcicpO1xudmFyIEl0ZXJhdG9ycyA9IHJlcXVpcmUoJy4vJC5pdGVyYXRvcnMnKTtcbkl0ZXJhdG9ycy5Ob2RlTGlzdCA9IEl0ZXJhdG9ycy5IVE1MQ29sbGVjdGlvbiA9IEl0ZXJhdG9ycy5BcnJheTsiLCI7KGZ1bmN0aW9uKHJvb3QpIHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYSBuZXcgY3Jvc3Mgc3RvcmFnZSBjbGllbnQgZ2l2ZW4gdGhlIHVybCB0byBhIGh1Yi4gQnkgZGVmYXVsdCxcbiAgICogYW4gaWZyYW1lIGlzIGNyZWF0ZWQgd2l0aGluIHRoZSBkb2N1bWVudCBib2R5IHRoYXQgcG9pbnRzIHRvIHRoZSB1cmwuIEl0XG4gICAqIGFsc28gYWNjZXB0cyBhbiBvcHRpb25zIG9iamVjdCwgd2hpY2ggbWF5IGluY2x1ZGUgYSB0aW1lb3V0LCBmcmFtZUlkLCBhbmRcbiAgICogcHJvbWlzZS4gVGhlIHRpbWVvdXQsIGluIG1pbGxpc2Vjb25kcywgaXMgYXBwbGllZCB0byBlYWNoIHJlcXVlc3QgYW5kXG4gICAqIGRlZmF1bHRzIHRvIDUwMDBtcy4gVGhlIG9wdGlvbnMgb2JqZWN0IG1heSBhbHNvIGluY2x1ZGUgYSBmcmFtZUlkLFxuICAgKiBpZGVudGlmeWluZyBhbiBleGlzdGluZyBmcmFtZSBvbiB3aGljaCB0byBpbnN0YWxsIGl0cyBsaXN0ZW5lcnMuIElmIHRoZVxuICAgKiBwcm9taXNlIGtleSBpcyBzdXBwbGllZCB0aGUgY29uc3RydWN0b3IgZm9yIGEgUHJvbWlzZSwgdGhhdCBQcm9taXNlIGxpYnJhcnlcbiAgICogd2lsbCBiZSB1c2VkIGluc3RlYWQgb2YgdGhlIGRlZmF1bHQgd2luZG93LlByb21pc2UuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBzdG9yYWdlID0gbmV3IENyb3NzU3RvcmFnZUNsaWVudCgnaHR0cHM6Ly9zdG9yZS5leGFtcGxlLmNvbS9odWIuaHRtbCcpO1xuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgc3RvcmFnZSA9IG5ldyBDcm9zc1N0b3JhZ2VDbGllbnQoJ2h0dHBzOi8vc3RvcmUuZXhhbXBsZS5jb20vaHViLmh0bWwnLCB7XG4gICAqICAgdGltZW91dDogNTAwMCxcbiAgICogICBmcmFtZUlkOiAnc3RvcmFnZUZyYW1lJ1xuICAgKiB9KTtcbiAgICpcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgICAgVGhlIHVybCB0byBhIGNyb3NzIHN0b3JhZ2UgaHViXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0c10gQW4gb3B0aW9uYWwgb2JqZWN0IGNvbnRhaW5pbmcgYWRkaXRpb25hbCBvcHRpb25zLFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGluZyB0aW1lb3V0LCBmcmFtZUlkLCBhbmQgcHJvbWlzZVxuICAgKlxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gICBfaWQgICAgICAgIEEgVVVJRCB2NCBpZFxuICAgKiBAcHJvcGVydHkge2Z1bmN0aW9ufSBfcHJvbWlzZSAgIFRoZSBQcm9taXNlIG9iamVjdCB0byB1c2VcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9ICAgX2ZyYW1lSWQgICBUaGUgaWQgb2YgdGhlIGlGcmFtZSBwb2ludGluZyB0byB0aGUgaHViIHVybFxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gICBfb3JpZ2luICAgIFRoZSBodWIncyBvcmlnaW5cbiAgICogQHByb3BlcnR5IHtvYmplY3R9ICAgX3JlcXVlc3RzICBNYXBwaW5nIG9mIHJlcXVlc3QgaWRzIHRvIGNhbGxiYWNrc1xuICAgKiBAcHJvcGVydHkge2Jvb2x9ICAgICBfY29ubmVjdGVkIFdoZXRoZXIgb3Igbm90IGl0IGhhcyBjb25uZWN0ZWRcbiAgICogQHByb3BlcnR5IHtib29sfSAgICAgX2Nsb3NlZCAgICBXaGV0aGVyIG9yIG5vdCB0aGUgY2xpZW50IGhhcyBjbG9zZWRcbiAgICogQHByb3BlcnR5IHtpbnR9ICAgICAgX2NvdW50ICAgICBOdW1iZXIgb2YgcmVxdWVzdHMgc2VudFxuICAgKiBAcHJvcGVydHkge2Z1bmN0aW9ufSBfbGlzdGVuZXIgIFRoZSBsaXN0ZW5lciBhZGRlZCB0byB0aGUgd2luZG93XG4gICAqIEBwcm9wZXJ0eSB7V2luZG93fSAgIF9odWIgICAgICAgVGhlIGh1YiB3aW5kb3dcbiAgICovXG4gIGZ1bmN0aW9uIENyb3NzU3RvcmFnZUNsaWVudCh1cmwsIG9wdHMpIHtcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcblxuICAgIHRoaXMuX2lkICAgICAgICA9IENyb3NzU3RvcmFnZUNsaWVudC5fZ2VuZXJhdGVVVUlEKCk7XG4gICAgdGhpcy5fcHJvbWlzZSAgID0gb3B0cy5wcm9taXNlIHx8IFByb21pc2U7XG4gICAgdGhpcy5fZnJhbWVJZCAgID0gb3B0cy5mcmFtZUlkIHx8ICdDcm9zc1N0b3JhZ2VDbGllbnQtJyArIHRoaXMuX2lkO1xuICAgIHRoaXMuX29yaWdpbiAgICA9IENyb3NzU3RvcmFnZUNsaWVudC5fZ2V0T3JpZ2luKHVybCk7XG4gICAgdGhpcy5fcmVxdWVzdHMgID0ge307XG4gICAgdGhpcy5fY29ubmVjdGVkID0gZmFsc2U7XG4gICAgdGhpcy5fY2xvc2VkICAgID0gZmFsc2U7XG4gICAgdGhpcy5fY291bnQgICAgID0gMDtcbiAgICB0aGlzLl90aW1lb3V0ICAgPSBvcHRzLnRpbWVvdXQgfHwgNTAwMDtcbiAgICB0aGlzLl9saXN0ZW5lciAgPSBudWxsO1xuXG4gICAgdGhpcy5faW5zdGFsbExpc3RlbmVyKCk7XG5cbiAgICB2YXIgZnJhbWU7XG4gICAgaWYgKG9wdHMuZnJhbWVJZCkge1xuICAgICAgZnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvcHRzLmZyYW1lSWQpO1xuICAgIH1cblxuICAgIC8vIElmIHVzaW5nIGEgcGFzc2VkIGlmcmFtZSwgcG9sbCB0aGUgaHViIGZvciBhIHJlYWR5IG1lc3NhZ2VcbiAgICBpZiAoZnJhbWUpIHtcbiAgICAgIHRoaXMuX3BvbGwoKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgdGhlIGZyYW1lIGlmIG5vdCBmb3VuZCBvciBzcGVjaWZpZWRcbiAgICBmcmFtZSA9IGZyYW1lIHx8IHRoaXMuX2NyZWF0ZUZyYW1lKHVybCk7XG4gICAgdGhpcy5faHViID0gZnJhbWUuY29udGVudFdpbmRvdztcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgc3R5bGVzIHRvIGJlIGFwcGxpZWQgdG8gdGhlIGdlbmVyYXRlZCBpRnJhbWUuIERlZmluZXMgYSBzZXQgb2YgcHJvcGVydGllc1xuICAgKiB0aGF0IGhpZGUgdGhlIGVsZW1lbnQgYnkgcG9zaXRpb25pbmcgaXQgb3V0c2lkZSBvZiB0aGUgdmlzaWJsZSBhcmVhLCBhbmRcbiAgICogYnkgbW9kaWZ5aW5nIGl0cyBkaXNwbGF5LlxuICAgKlxuICAgKiBAbWVtYmVyIHtPYmplY3R9XG4gICAqL1xuICBDcm9zc1N0b3JhZ2VDbGllbnQuZnJhbWVTdHlsZSA9IHtcbiAgICBkaXNwbGF5OiAgJ25vbmUnLFxuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIHRvcDogICAgICAnLTk5OXB4JyxcbiAgICBsZWZ0OiAgICAgJy05OTlweCdcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgb3JpZ2luIG9mIGFuIHVybCwgd2l0aCBjcm9zcyBicm93c2VyIHN1cHBvcnQuIEFjY29tbW9kYXRlc1xuICAgKiB0aGUgbGFjayBvZiBsb2NhdGlvbi5vcmlnaW4gaW4gSUUsIGFzIHdlbGwgYXMgdGhlIGRpc2NyZXBhbmNpZXMgaW4gdGhlXG4gICAqIGluY2x1c2lvbiBvZiB0aGUgcG9ydCB3aGVuIHVzaW5nIHRoZSBkZWZhdWx0IHBvcnQgZm9yIGEgcHJvdG9jb2wsIGUuZy5cbiAgICogNDQzIG92ZXIgaHR0cHMuIERlZmF1bHRzIHRvIHRoZSBvcmlnaW4gb2Ygd2luZG93LmxvY2F0aW9uIGlmIHBhc3NlZCBhXG4gICAqIHJlbGF0aXZlIHBhdGguXG4gICAqXG4gICAqIEBwYXJhbSAgIHtzdHJpbmd9IHVybCBUaGUgdXJsIHRvIGEgY3Jvc3Mgc3RvcmFnZSBodWJcbiAgICogQHJldHVybnMge3N0cmluZ30gVGhlIG9yaWdpbiBvZiB0aGUgdXJsXG4gICAqL1xuICBDcm9zc1N0b3JhZ2VDbGllbnQuX2dldE9yaWdpbiA9IGZ1bmN0aW9uKHVybCkge1xuICAgIHZhciB1cmksIHByb3RvY29sLCBvcmlnaW47XG5cbiAgICB1cmkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgdXJpLmhyZWYgPSB1cmw7XG5cbiAgICBpZiAoIXVyaS5ob3N0KSB7XG4gICAgICB1cmkgPSB3aW5kb3cubG9jYXRpb247XG4gICAgfVxuXG4gICAgaWYgKCF1cmkucHJvdG9jb2wgfHwgdXJpLnByb3RvY29sID09PSAnOicpIHtcbiAgICAgIHByb3RvY29sID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm90b2NvbCA9IHVyaS5wcm90b2NvbDtcbiAgICB9XG5cbiAgICBvcmlnaW4gPSBwcm90b2NvbCArICcvLycgKyB1cmkuaG9zdDtcbiAgICBvcmlnaW4gPSBvcmlnaW4ucmVwbGFjZSgvOjgwJHw6NDQzJC8sICcnKTtcblxuICAgIHJldHVybiBvcmlnaW47XG4gIH07XG5cbiAgLyoqXG4gICAqIFVVSUQgdjQgZ2VuZXJhdGlvbiwgdGFrZW4gZnJvbTogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy9cbiAgICogMTA1MDM0L2hvdy10by1jcmVhdGUtYS1ndWlkLXV1aWQtaW4tamF2YXNjcmlwdC8yMTE3NTIzIzIxMTc1MjNcbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ30gQSBVVUlEIHY0IHN0cmluZ1xuICAgKi9cbiAgQ3Jvc3NTdG9yYWdlQ2xpZW50Ll9nZW5lcmF0ZVVVSUQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbihjKSB7XG4gICAgICB2YXIgciA9IE1hdGgucmFuZG9tKCkgKiAxNnwwLCB2ID0gYyA9PSAneCcgPyByIDogKHImMHgzfDB4OCk7XG5cbiAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hlbiBhIGNvbm5lY3Rpb24gaGFzIGJlZW4gZXN0YWJsaXNoZWRcbiAgICogd2l0aCB0aGUgY3Jvc3Mgc3RvcmFnZSBodWIuIEl0cyB1c2UgaXMgcmVxdWlyZWQgdG8gYXZvaWQgc2VuZGluZyBhbnlcbiAgICogcmVxdWVzdHMgcHJpb3IgdG8gaW5pdGlhbGl6YXRpb24gYmVpbmcgY29tcGxldGUuXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCBvbiBjb25uZWN0XG4gICAqL1xuICBDcm9zc1N0b3JhZ2VDbGllbnQucHJvdG90eXBlLm9uQ29ubmVjdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjbGllbnQgPSB0aGlzO1xuXG4gICAgaWYgKHRoaXMuX2Nvbm5lY3RlZCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Byb21pc2UucmVzb2x2ZSgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fY2xvc2VkKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdDcm9zc1N0b3JhZ2VDbGllbnQgaGFzIGNsb3NlZCcpKTtcbiAgICB9XG5cbiAgICAvLyBRdWV1ZSBjb25uZWN0IHJlcXVlc3RzIGZvciBjbGllbnQgcmUtdXNlXG4gICAgaWYgKCF0aGlzLl9yZXF1ZXN0cy5jb25uZWN0KSB7XG4gICAgICB0aGlzLl9yZXF1ZXN0cy5jb25uZWN0ID0gW107XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyB0aGlzLl9wcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QobmV3IEVycm9yKCdDcm9zc1N0b3JhZ2VDbGllbnQgY291bGQgbm90IGNvbm5lY3QnKSk7XG4gICAgICB9LCBjbGllbnQuX3RpbWVvdXQpO1xuXG4gICAgICBjbGllbnQuX3JlcXVlc3RzLmNvbm5lY3QucHVzaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICBpZiAoZXJyKSByZXR1cm4gcmVqZWN0KGVycik7XG5cbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHMgYSBrZXkgdG8gdGhlIHNwZWNpZmllZCB2YWx1ZS4gUmV0dXJucyBhIHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgb25cbiAgICogc3VjY2Vzcywgb3IgcmVqZWN0ZWQgaWYgYW55IGVycm9ycyBzZXR0aW5nIHRoZSBrZXkgb2NjdXJyZWQsIG9yIHRoZSByZXF1ZXN0XG4gICAqIHRpbWVkIG91dC5cbiAgICpcbiAgICogQHBhcmFtICAge3N0cmluZ30gIGtleSAgIFRoZSBrZXkgdG8gc2V0XG4gICAqIEBwYXJhbSAgIHsqfSAgICAgICB2YWx1ZSBUaGUgdmFsdWUgdG8gYXNzaWduXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBBIHByb21pc2UgdGhhdCBpcyBzZXR0bGVkIG9uIGh1YiByZXNwb25zZSBvciB0aW1lb3V0XG4gICAqL1xuICBDcm9zc1N0b3JhZ2VDbGllbnQucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgnc2V0Jywge1xuICAgICAga2V5OiAgIGtleSxcbiAgICAgIHZhbHVlOiB2YWx1ZVxuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBY2NlcHRzIG9uZSBvciBtb3JlIGtleXMgZm9yIHdoaWNoIHRvIHJldHJpZXZlIHRoZWlyIHZhbHVlcy4gUmV0dXJucyBhXG4gICAqIHByb21pc2UgdGhhdCBpcyBzZXR0bGVkIG9uIGh1YiByZXNwb25zZSBvciB0aW1lb3V0LiBPbiBzdWNjZXNzLCBpdCBpc1xuICAgKiBmdWxmaWxsZWQgd2l0aCB0aGUgdmFsdWUgb2YgdGhlIGtleSBpZiBvbmx5IHBhc3NlZCBhIHNpbmdsZSBhcmd1bWVudC5cbiAgICogT3RoZXJ3aXNlIGl0J3MgcmVzb2x2ZWQgd2l0aCBhbiBhcnJheSBvZiB2YWx1ZXMuIE9uIGZhaWx1cmUsIGl0IGlzIHJlamVjdGVkXG4gICAqIHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgZXJyb3IgbWVzc2FnZS5cbiAgICpcbiAgICogQHBhcmFtICAgey4uLnN0cmluZ30ga2V5IFRoZSBrZXkgdG8gcmV0cmlldmVcbiAgICogQHJldHVybnMge1Byb21pc2V9ICAgQSBwcm9taXNlIHRoYXQgaXMgc2V0dGxlZCBvbiBodWIgcmVzcG9uc2Ugb3IgdGltZW91dFxuICAgKi9cbiAgQ3Jvc3NTdG9yYWdlQ2xpZW50LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihrZXkpIHtcbiAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgnZ2V0Jywge2tleXM6IGFyZ3N9KTtcbiAgfTtcblxuICAvKipcbiAgICogQWNjZXB0cyBvbmUgb3IgbW9yZSBrZXlzIGZvciBkZWxldGlvbi4gUmV0dXJucyBhIHByb21pc2UgdGhhdCBpcyBzZXR0bGVkIG9uXG4gICAqIGh1YiByZXNwb25zZSBvciB0aW1lb3V0LlxuICAgKlxuICAgKiBAcGFyYW0gICB7Li4uc3RyaW5nfSBrZXkgVGhlIGtleSB0byBkZWxldGVcbiAgICogQHJldHVybnMge1Byb21pc2V9ICAgQSBwcm9taXNlIHRoYXQgaXMgc2V0dGxlZCBvbiBodWIgcmVzcG9uc2Ugb3IgdGltZW91dFxuICAgKi9cbiAgQ3Jvc3NTdG9yYWdlQ2xpZW50LnByb3RvdHlwZS5kZWwgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdCgnZGVsJywge2tleXM6IGFyZ3N9KTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCwgd2hlbiByZXNvbHZlZCwgaW5kaWNhdGVzIHRoYXQgYWxsIGxvY2FsU3RvcmFnZVxuICAgKiBkYXRhIGhhcyBiZWVuIGNsZWFyZWQuXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBBIHByb21pc2UgdGhhdCBpcyBzZXR0bGVkIG9uIGh1YiByZXNwb25zZSBvciB0aW1lb3V0XG4gICAqL1xuICBDcm9zc1N0b3JhZ2VDbGllbnQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoJ2NsZWFyJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQsIHdoZW4gcmVzb2x2ZWQsIHBhc3NlcyBhbiBhcnJheSBvZiBhbGwga2V5c1xuICAgKiBjdXJyZW50bHkgaW4gc3RvcmFnZS5cbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2V9IEEgcHJvbWlzZSB0aGF0IGlzIHNldHRsZWQgb24gaHViIHJlc3BvbnNlIG9yIHRpbWVvdXRcbiAgICovXG4gIENyb3NzU3RvcmFnZUNsaWVudC5wcm90b3R5cGUuZ2V0S2V5cyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KCdnZXRLZXlzJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgdGhlIGlmcmFtZSBhbmQgc2V0cyB0aGUgY29ubmVjdGVkIHN0YXRlIHRvIGZhbHNlLiBUaGUgY2xpZW50IGNhblxuICAgKiBubyBsb25nZXIgYmUgdXNlZCBhZnRlciBiZWluZyBpbnZva2VkLlxuICAgKi9cbiAgQ3Jvc3NTdG9yYWdlQ2xpZW50LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuX2ZyYW1lSWQpO1xuICAgIGlmIChmcmFtZSkge1xuICAgICAgZnJhbWUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChmcmFtZSk7XG4gICAgfVxuXG4gICAgLy8gU3VwcG9ydCBJRTggd2l0aCBkZXRhY2hFdmVudFxuICAgIGlmICh3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcikge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLl9saXN0ZW5lciwgZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aW5kb3cuZGV0YWNoRXZlbnQoJ29ubWVzc2FnZScsIHRoaXMuX2xpc3RlbmVyKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9jbG9zZWQgPSB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbnN0YWxscyB0aGUgbmVjZXNzYXJ5IGxpc3RlbmVyIGZvciB0aGUgd2luZG93IG1lc3NhZ2UgZXZlbnQuIFdoZW4gYSBtZXNzYWdlXG4gICAqIGlzIHJlY2VpdmVkLCB0aGUgY2xpZW50J3MgX2Nvbm5lY3RlZCBzdGF0dXMgaXMgY2hhbmdlZCB0byB0cnVlLCBhbmQgdGhlXG4gICAqIG9uQ29ubmVjdCBwcm9taXNlIGlzIGZ1bGZpbGxlZC4gR2l2ZW4gYSByZXNwb25zZSBtZXNzYWdlLCB0aGUgY2FsbGJhY2tcbiAgICogY29ycmVzcG9uZGluZyB0byBpdHMgcmVxdWVzdCBpcyBpbnZva2VkLiBJZiByZXNwb25zZS5lcnJvciBob2xkcyBhIHRydXRoeVxuICAgKiB2YWx1ZSwgdGhlIHByb21pc2UgYXNzb2NpYXRlZCB3aXRoIHRoZSBvcmlnaW5hbCByZXF1ZXN0IGlzIHJlamVjdGVkIHdpdGhcbiAgICogdGhlIGVycm9yLiBPdGhlcndpc2UgdGhlIHByb21pc2UgaXMgZnVsZmlsbGVkIGFuZCBwYXNzZWQgcmVzcG9uc2UucmVzdWx0LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgQ3Jvc3NTdG9yYWdlQ2xpZW50LnByb3RvdHlwZS5faW5zdGFsbExpc3RlbmVyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNsaWVudCA9IHRoaXM7XG5cbiAgICB0aGlzLl9saXN0ZW5lciA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgIHZhciBpLCBvcmlnaW4sIGVycm9yLCByZXNwb25zZTtcblxuICAgICAgLy8gSWdub3JlIGludmFsaWQgbWVzc2FnZXMgb3IgdGhvc2UgYWZ0ZXIgdGhlIGNsaWVudCBoYXMgY2xvc2VkXG4gICAgICBpZiAoY2xpZW50Ll9jbG9zZWQgfHwgIW1lc3NhZ2UuZGF0YSB8fCB0eXBlb2YgbWVzc2FnZS5kYXRhICE9PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIHBvc3RNZXNzYWdlIHJldHVybnMgdGhlIHN0cmluZyBcIm51bGxcIiBhcyB0aGUgb3JpZ2luIGZvciBcImZpbGU6Ly9cIlxuICAgICAgb3JpZ2luID0gKG1lc3NhZ2Uub3JpZ2luID09PSAnbnVsbCcpID8gJ2ZpbGU6Ly8nIDogbWVzc2FnZS5vcmlnaW47XG5cbiAgICAgIC8vIElnbm9yZSBtZXNzYWdlcyBub3QgZnJvbSB0aGUgY29ycmVjdCBvcmlnaW5cbiAgICAgIGlmIChvcmlnaW4gIT09IGNsaWVudC5fb3JpZ2luKSByZXR1cm47XG5cbiAgICAgIC8vIExvY2FsU3RvcmFnZSBpc24ndCBhdmFpbGFibGUgaW4gdGhlIGh1YlxuICAgICAgaWYgKG1lc3NhZ2UuZGF0YSA9PT0gJ2Nyb3NzLXN0b3JhZ2U6dW5hdmFpbGFibGUnKSB7XG4gICAgICAgIGlmICghY2xpZW50Ll9jbG9zZWQpIGNsaWVudC5jbG9zZSgpO1xuICAgICAgICBpZiAoIWNsaWVudC5fcmVxdWVzdHMuY29ubmVjdCkgcmV0dXJuO1xuXG4gICAgICAgIGVycm9yID0gbmV3IEVycm9yKCdDbG9zaW5nIGNsaWVudC4gQ291bGQgbm90IGFjY2VzcyBsb2NhbFN0b3JhZ2UgaW4gaHViLicpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY2xpZW50Ll9yZXF1ZXN0cy5jb25uZWN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY2xpZW50Ll9yZXF1ZXN0cy5jb25uZWN0W2ldKGVycm9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gSGFuZGxlIGluaXRpYWwgY29ubmVjdGlvblxuICAgICAgaWYgKG1lc3NhZ2UuZGF0YS5pbmRleE9mKCdjcm9zcy1zdG9yYWdlOicpICE9PSAtMSAmJiAhY2xpZW50Ll9jb25uZWN0ZWQpIHtcbiAgICAgICAgY2xpZW50Ll9jb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICBpZiAoIWNsaWVudC5fcmVxdWVzdHMuY29ubmVjdCkgcmV0dXJuO1xuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBjbGllbnQuX3JlcXVlc3RzLmNvbm5lY3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjbGllbnQuX3JlcXVlc3RzLmNvbm5lY3RbaV0oZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSBjbGllbnQuX3JlcXVlc3RzLmNvbm5lY3Q7XG4gICAgICB9XG5cbiAgICAgIGlmIChtZXNzYWdlLmRhdGEgPT09ICdjcm9zcy1zdG9yYWdlOnJlYWR5JykgcmV0dXJuO1xuXG4gICAgICAvLyBBbGwgb3RoZXIgbWVzc2FnZXNcbiAgICAgIHRyeSB7XG4gICAgICAgIHJlc3BvbnNlID0gSlNPTi5wYXJzZShtZXNzYWdlLmRhdGEpO1xuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFyZXNwb25zZS5pZCkgcmV0dXJuO1xuXG4gICAgICBpZiAoY2xpZW50Ll9yZXF1ZXN0c1tyZXNwb25zZS5pZF0pIHtcbiAgICAgICAgY2xpZW50Ll9yZXF1ZXN0c1tyZXNwb25zZS5pZF0ocmVzcG9uc2UuZXJyb3IsIHJlc3BvbnNlLnJlc3VsdCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIFN1cHBvcnQgSUU4IHdpdGggYXR0YWNoRXZlbnRcbiAgICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgdGhpcy5fbGlzdGVuZXIsIGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgd2luZG93LmF0dGFjaEV2ZW50KCdvbm1lc3NhZ2UnLCB0aGlzLl9saXN0ZW5lcik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gYSBmcmFtZSBpZCB3YXMgcGFzc2VkIHRvIHRoZSBjbGllbnQsIHJhdGhlciB0aGFuIGFsbG93aW5nXG4gICAqIHRoZSBjbGllbnQgdG8gY3JlYXRlIGl0cyBvd24gaWZyYW1lLiBQb2xscyB0aGUgaHViIGZvciBhIHJlYWR5IGV2ZW50IHRvXG4gICAqIGVzdGFibGlzaCBhIGNvbm5lY3RlZCBzdGF0ZS5cbiAgICovXG4gIENyb3NzU3RvcmFnZUNsaWVudC5wcm90b3R5cGUuX3BvbGwgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY2xpZW50LCBpbnRlcnZhbCwgdGFyZ2V0T3JpZ2luO1xuXG4gICAgY2xpZW50ID0gdGhpcztcblxuICAgIC8vIHBvc3RNZXNzYWdlIHJlcXVpcmVzIHRoYXQgdGhlIHRhcmdldCBvcmlnaW4gYmUgc2V0IHRvIFwiKlwiIGZvciBcImZpbGU6Ly9cIlxuICAgIHRhcmdldE9yaWdpbiA9IChjbGllbnQuX29yaWdpbiA9PT0gJ2ZpbGU6Ly8nKSA/ICcqJyA6IGNsaWVudC5fb3JpZ2luO1xuXG4gICAgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgIGlmIChjbGllbnQuX2Nvbm5lY3RlZCkgcmV0dXJuIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgaWYgKCFjbGllbnQuX2h1YikgcmV0dXJuO1xuXG4gICAgICBjbGllbnQuX2h1Yi5wb3N0TWVzc2FnZSgnY3Jvc3Mtc3RvcmFnZTpwb2xsJywgdGFyZ2V0T3JpZ2luKTtcbiAgICB9LCAxMDAwKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBpRnJhbWUgY29udGFpbmluZyB0aGUgaHViLiBBcHBsaWVzIHRoZSBuZWNlc3Nhcnkgc3R5bGVzIHRvXG4gICAqIGhpZGUgdGhlIGVsZW1lbnQgZnJvbSB2aWV3LCBwcmlvciB0byBhZGRpbmcgaXQgdG8gdGhlIGRvY3VtZW50IGJvZHkuXG4gICAqIFJldHVybnMgdGhlIGNyZWF0ZWQgZWxlbWVudC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgICAgICAgIHVybCBUaGUgdXJsIHRvIHRoZSBodWJcbiAgICogcmV0dXJucyB7SFRNTElGcmFtZUVsZW1lbnR9IFRoZSBpRnJhbWUgZWxlbWVudCBpdHNlbGZcbiAgICovXG4gIENyb3NzU3RvcmFnZUNsaWVudC5wcm90b3R5cGUuX2NyZWF0ZUZyYW1lID0gZnVuY3Rpb24odXJsKSB7XG4gICAgdmFyIGZyYW1lLCBrZXk7XG5cbiAgICBmcmFtZSA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgICBmcmFtZS5pZCA9IHRoaXMuX2ZyYW1lSWQ7XG5cbiAgICAvLyBTdHlsZSB0aGUgaWZyYW1lXG4gICAgZm9yIChrZXkgaW4gQ3Jvc3NTdG9yYWdlQ2xpZW50LmZyYW1lU3R5bGUpIHtcbiAgICAgIGlmIChDcm9zc1N0b3JhZ2VDbGllbnQuZnJhbWVTdHlsZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIGZyYW1lLnN0eWxlW2tleV0gPSBDcm9zc1N0b3JhZ2VDbGllbnQuZnJhbWVTdHlsZVtrZXldO1xuICAgICAgfVxuICAgIH1cblxuICAgIHdpbmRvdy5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZyYW1lKTtcbiAgICBmcmFtZS5zcmMgPSB1cmw7XG5cbiAgICByZXR1cm4gZnJhbWU7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNlbmRzIGEgbWVzc2FnZSBjb250YWluaW5nIHRoZSBnaXZlbiBtZXRob2QgYW5kIHBhcmFtcyB0byB0aGUgaHViLiBTdG9yZXNcbiAgICogYSBjYWxsYmFjayBpbiB0aGUgX3JlcXVlc3RzIG9iamVjdCBmb3IgbGF0ZXIgaW52b2NhdGlvbiBvbiBtZXNzYWdlLCBvclxuICAgKiBkZWxldGlvbiBvbiB0aW1lb3V0LiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IGlzIHNldHRsZWQgaW4gZWl0aGVyIGluc3RhbmNlLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBAcGFyYW0gICB7c3RyaW5nfSAgbWV0aG9kIFRoZSBtZXRob2QgdG8gaW52b2tlXG4gICAqIEBwYXJhbSAgIHsqfSAgICAgICBwYXJhbXMgVGhlIGFyZ3VtZW50cyB0byBwYXNzXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBBIHByb21pc2UgdGhhdCBpcyBzZXR0bGVkIG9uIGh1YiByZXNwb25zZSBvciB0aW1lb3V0XG4gICAqL1xuICBDcm9zc1N0b3JhZ2VDbGllbnQucHJvdG90eXBlLl9yZXF1ZXN0ID0gZnVuY3Rpb24obWV0aG9kLCBwYXJhbXMpIHtcbiAgICB2YXIgcmVxLCBjbGllbnQ7XG5cbiAgICBpZiAodGhpcy5fY2xvc2VkKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdDcm9zc1N0b3JhZ2VDbGllbnQgaGFzIGNsb3NlZCcpKTtcbiAgICB9XG5cbiAgICBjbGllbnQgPSB0aGlzO1xuICAgIGNsaWVudC5fY291bnQrKztcblxuICAgIHJlcSA9IHtcbiAgICAgIGlkOiAgICAgdGhpcy5faWQgKyAnOicgKyBjbGllbnQuX2NvdW50LFxuICAgICAgbWV0aG9kOiAnY3Jvc3Mtc3RvcmFnZTonICsgbWV0aG9kLFxuICAgICAgcGFyYW1zOiBwYXJhbXNcbiAgICB9O1xuXG4gICAgcmV0dXJuIG5ldyB0aGlzLl9wcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIHRpbWVvdXQsIG9yaWdpbmFsVG9KU09OLCB0YXJnZXRPcmlnaW47XG5cbiAgICAgIC8vIFRpbWVvdXQgaWYgYSByZXNwb25zZSBpc24ndCByZWNlaXZlZCBhZnRlciA0c1xuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghY2xpZW50Ll9yZXF1ZXN0c1tyZXEuaWRdKSByZXR1cm47XG5cbiAgICAgICAgZGVsZXRlIGNsaWVudC5fcmVxdWVzdHNbcmVxLmlkXTtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignVGltZW91dDogY291bGQgbm90IHBlcmZvcm0gJyArIHJlcS5tZXRob2QpKTtcbiAgICAgIH0sIGNsaWVudC5fdGltZW91dCk7XG5cbiAgICAgIC8vIEFkZCByZXF1ZXN0IGNhbGxiYWNrXG4gICAgICBjbGllbnQuX3JlcXVlc3RzW3JlcS5pZF0gPSBmdW5jdGlvbihlcnIsIHJlc3VsdCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgIGRlbGV0ZSBjbGllbnQuX3JlcXVlc3RzW3JlcS5pZF07XG4gICAgICAgIGlmIChlcnIpIHJldHVybiByZWplY3QobmV3IEVycm9yKGVycikpO1xuICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICB9O1xuXG4gICAgICAvLyBJbiBjYXNlIHdlIGhhdmUgYSBicm9rZW4gQXJyYXkucHJvdG90eXBlLnRvSlNPTiwgZS5nLiBiZWNhdXNlIG9mXG4gICAgICAvLyBvbGQgdmVyc2lvbnMgb2YgcHJvdG90eXBlXG4gICAgICBpZiAoQXJyYXkucHJvdG90eXBlLnRvSlNPTikge1xuICAgICAgICBvcmlnaW5hbFRvSlNPTiA9IEFycmF5LnByb3RvdHlwZS50b0pTT047XG4gICAgICAgIEFycmF5LnByb3RvdHlwZS50b0pTT04gPSBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyBwb3N0TWVzc2FnZSByZXF1aXJlcyB0aGF0IHRoZSB0YXJnZXQgb3JpZ2luIGJlIHNldCB0byBcIipcIiBmb3IgXCJmaWxlOi8vXCJcbiAgICAgIHRhcmdldE9yaWdpbiA9IChjbGllbnQuX29yaWdpbiA9PT0gJ2ZpbGU6Ly8nKSA/ICcqJyA6IGNsaWVudC5fb3JpZ2luO1xuXG4gICAgICAvLyBTZW5kIHNlcmlhbGl6ZWQgbWVzc2FnZVxuICAgICAgY2xpZW50Ll9odWIucG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkocmVxKSwgdGFyZ2V0T3JpZ2luKTtcblxuICAgICAgLy8gUmVzdG9yZSBvcmlnaW5hbCB0b0pTT05cbiAgICAgIGlmIChvcmlnaW5hbFRvSlNPTikge1xuICAgICAgICBBcnJheS5wcm90b3R5cGUudG9KU09OID0gb3JpZ2luYWxUb0pTT047XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEV4cG9ydCBmb3IgdmFyaW91cyBlbnZpcm9ubWVudHMuXG4gICAqL1xuICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IENyb3NzU3RvcmFnZUNsaWVudDtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBleHBvcnRzLkNyb3NzU3RvcmFnZUNsaWVudCA9IENyb3NzU3RvcmFnZUNsaWVudDtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoW10sIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIENyb3NzU3RvcmFnZUNsaWVudDtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICByb290LkNyb3NzU3RvcmFnZUNsaWVudCA9IENyb3NzU3RvcmFnZUNsaWVudDtcbiAgfVxufSh0aGlzKSk7XG4iLCI7KGZ1bmN0aW9uKHJvb3QpIHtcbiAgdmFyIENyb3NzU3RvcmFnZUh1YiA9IHt9O1xuXG4gIC8qKlxuICAgKiBBY2NlcHRzIGFuIGFycmF5IG9mIG9iamVjdHMgd2l0aCB0d28ga2V5czogb3JpZ2luIGFuZCBhbGxvdy4gVGhlIHZhbHVlXG4gICAqIG9mIG9yaWdpbiBpcyBleHBlY3RlZCB0byBiZSBhIFJlZ0V4cCwgYW5kIGFsbG93LCBhbiBhcnJheSBvZiBzdHJpbmdzLlxuICAgKiBUaGUgY3Jvc3Mgc3RvcmFnZSBodWIgaXMgdGhlbiBpbml0aWFsaXplZCB0byBhY2NlcHQgcmVxdWVzdHMgZnJvbSBhbnkgb2ZcbiAgICogdGhlIG1hdGNoaW5nIG9yaWdpbnMsIGFsbG93aW5nIGFjY2VzcyB0byB0aGUgYXNzb2NpYXRlZCBsaXN0cyBvZiBtZXRob2RzLlxuICAgKiBNZXRob2RzIG1heSBpbmNsdWRlIGFueSBvZjogZ2V0LCBzZXQsIGRlbCwgZ2V0S2V5cyBhbmQgY2xlYXIuIEEgJ3JlYWR5J1xuICAgKiBtZXNzYWdlIGlzIHNlbnQgdG8gdGhlIHBhcmVudCB3aW5kb3cgb25jZSBjb21wbGV0ZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogLy8gU3ViZG9tYWluIGNhbiBnZXQsIGJ1dCBvbmx5IHJvb3QgZG9tYWluIGNhbiBzZXQgYW5kIGRlbFxuICAgKiBDcm9zc1N0b3JhZ2VIdWIuaW5pdChbXG4gICAqICAge29yaWdpbjogL1xcLmV4YW1wbGUuY29tJC8sICAgICAgICBhbGxvdzogWydnZXQnXX0sXG4gICAqICAge29yaWdpbjogLzood3d3XFwuKT9leGFtcGxlLmNvbSQvLCBhbGxvdzogWydnZXQnLCAnc2V0JywgJ2RlbCddfVxuICAgKiBdKTtcbiAgICpcbiAgICogQHBhcmFtIHthcnJheX0gcGVybWlzc2lvbnMgQW4gYXJyYXkgb2Ygb2JqZWN0cyB3aXRoIG9yaWdpbiBhbmQgYWxsb3dcbiAgICovXG4gIENyb3NzU3RvcmFnZUh1Yi5pbml0ID0gZnVuY3Rpb24ocGVybWlzc2lvbnMpIHtcbiAgICB2YXIgYXZhaWxhYmxlID0gdHJ1ZTtcblxuICAgIC8vIFJldHVybiBpZiBsb2NhbFN0b3JhZ2UgaXMgdW5hdmFpbGFibGUsIG9yIHRoaXJkIHBhcnR5XG4gICAgLy8gYWNjZXNzIGlzIGRpc2FibGVkXG4gICAgdHJ5IHtcbiAgICAgIGlmICghd2luZG93LmxvY2FsU3RvcmFnZSkgYXZhaWxhYmxlID0gZmFsc2U7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgYXZhaWxhYmxlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCFhdmFpbGFibGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKCdjcm9zcy1zdG9yYWdlOnVuYXZhaWxhYmxlJywgJyonKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIENyb3NzU3RvcmFnZUh1Yi5fcGVybWlzc2lvbnMgPSBwZXJtaXNzaW9ucyB8fCBbXTtcbiAgICBDcm9zc1N0b3JhZ2VIdWIuX2luc3RhbGxMaXN0ZW5lcigpO1xuICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UoJ2Nyb3NzLXN0b3JhZ2U6cmVhZHknLCAnKicpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbnN0YWxscyB0aGUgbmVjZXNzYXJ5IGxpc3RlbmVyIGZvciB0aGUgd2luZG93IG1lc3NhZ2UgZXZlbnQuIEFjY29tbW9kYXRlc1xuICAgKiBJRTggYW5kIHVwLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgQ3Jvc3NTdG9yYWdlSHViLl9pbnN0YWxsTGlzdGVuZXIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGlzdGVuZXIgPSBDcm9zc1N0b3JhZ2VIdWIuX2xpc3RlbmVyO1xuICAgIGlmICh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsaXN0ZW5lciwgZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aW5kb3cuYXR0YWNoRXZlbnQoJ29ubWVzc2FnZScsIGxpc3RlbmVyKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFRoZSBtZXNzYWdlIGhhbmRsZXIgZm9yIGFsbCByZXF1ZXN0cyBwb3N0ZWQgdG8gdGhlIHdpbmRvdy4gSXQgaWdub3JlcyBhbnlcbiAgICogbWVzc2FnZXMgaGF2aW5nIGFuIG9yaWdpbiB0aGF0IGRvZXMgbm90IG1hdGNoIHRoZSBvcmlnaW5hbGx5IHN1cHBsaWVkXG4gICAqIHBhdHRlcm4uIEdpdmVuIGEgSlNPTiBvYmplY3Qgd2l0aCBvbmUgb2YgZ2V0LCBzZXQsIGRlbCBvciBnZXRLZXlzIGFzIHRoZVxuICAgKiBtZXRob2QsIHRoZSBmdW5jdGlvbiBwZXJmb3JtcyB0aGUgcmVxdWVzdGVkIGFjdGlvbiBhbmQgcmV0dXJucyBpdHMgcmVzdWx0LlxuICAgKlxuICAgKiBAcGFyYW0ge01lc3NhZ2VFdmVudH0gbWVzc2FnZSBBIG1lc3NhZ2UgdG8gYmUgcHJvY2Vzc2VkXG4gICAqL1xuICBDcm9zc1N0b3JhZ2VIdWIuX2xpc3RlbmVyID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICAgIHZhciBvcmlnaW4sIHRhcmdldE9yaWdpbiwgcmVxdWVzdCwgbWV0aG9kLCBlcnJvciwgcmVzdWx0LCByZXNwb25zZTtcblxuICAgIC8vIHBvc3RNZXNzYWdlIHJldHVybnMgdGhlIHN0cmluZyBcIm51bGxcIiBhcyB0aGUgb3JpZ2luIGZvciBcImZpbGU6Ly9cIlxuICAgIG9yaWdpbiA9IChtZXNzYWdlLm9yaWdpbiA9PT0gJ251bGwnKSA/ICdmaWxlOi8vJyA6IG1lc3NhZ2Uub3JpZ2luO1xuXG4gICAgLy8gSGFuZGxlIHBvbGxpbmcgZm9yIGEgcmVhZHkgbWVzc2FnZVxuICAgIGlmIChtZXNzYWdlLmRhdGEgPT09ICdjcm9zcy1zdG9yYWdlOnBvbGwnKSB7XG4gICAgICByZXR1cm4gd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSgnY3Jvc3Mtc3RvcmFnZTpyZWFkeScsIG1lc3NhZ2Uub3JpZ2luKTtcbiAgICB9XG5cbiAgICAvLyBJZ25vcmUgdGhlIHJlYWR5IG1lc3NhZ2Ugd2hlbiB2aWV3aW5nIHRoZSBodWIgZGlyZWN0bHlcbiAgICBpZiAobWVzc2FnZS5kYXRhID09PSAnY3Jvc3Mtc3RvcmFnZTpyZWFkeScpIHJldHVybjtcblxuICAgIC8vIENoZWNrIHdoZXRoZXIgbWVzc2FnZS5kYXRhIGlzIGEgdmFsaWQganNvblxuICAgIHRyeSB7XG4gICAgICByZXF1ZXN0ID0gSlNPTi5wYXJzZShtZXNzYWdlLmRhdGEpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENoZWNrIHdoZXRoZXIgcmVxdWVzdC5tZXRob2QgaXMgYSBzdHJpbmdcbiAgICBpZiAoIXJlcXVlc3QgfHwgdHlwZW9mIHJlcXVlc3QubWV0aG9kICE9PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG1ldGhvZCA9IHJlcXVlc3QubWV0aG9kLnNwbGl0KCdjcm9zcy1zdG9yYWdlOicpWzFdO1xuXG4gICAgaWYgKCFtZXRob2QpIHtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKCFDcm9zc1N0b3JhZ2VIdWIuX3Blcm1pdHRlZChvcmlnaW4sIG1ldGhvZCkpIHtcbiAgICAgIGVycm9yID0gJ0ludmFsaWQgcGVybWlzc2lvbnMgZm9yICcgKyBtZXRob2Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJlc3VsdCA9IENyb3NzU3RvcmFnZUh1YlsnXycgKyBtZXRob2RdKHJlcXVlc3QucGFyYW1zKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBlcnJvciA9IGVyci5tZXNzYWdlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJlc3BvbnNlID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgaWQ6IHJlcXVlc3QuaWQsXG4gICAgICBlcnJvcjogZXJyb3IsXG4gICAgICByZXN1bHQ6IHJlc3VsdFxuICAgIH0pO1xuXG4gICAgLy8gcG9zdE1lc3NhZ2UgcmVxdWlyZXMgdGhhdCB0aGUgdGFyZ2V0IG9yaWdpbiBiZSBzZXQgdG8gXCIqXCIgZm9yIFwiZmlsZTovL1wiXG4gICAgdGFyZ2V0T3JpZ2luID0gKG9yaWdpbiA9PT0gJ2ZpbGU6Ly8nKSA/ICcqJyA6IG9yaWdpbjtcblxuICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UocmVzcG9uc2UsIHRhcmdldE9yaWdpbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciBvciBub3QgdGhlIHJlcXVlc3RlZCBtZXRob2QgaXNcbiAgICogcGVybWl0dGVkIGZvciB0aGUgZ2l2ZW4gb3JpZ2luLiBUaGUgYXJndW1lbnQgcGFzc2VkIHRvIG1ldGhvZCBpcyBleHBlY3RlZFxuICAgKiB0byBiZSBvbmUgb2YgJ2dldCcsICdzZXQnLCAnZGVsJyBvciAnZ2V0S2V5cycuXG4gICAqXG4gICAqIEBwYXJhbSAgIHtzdHJpbmd9IG9yaWdpbiBUaGUgb3JpZ2luIGZvciB3aGljaCB0byBkZXRlcm1pbmUgcGVybWlzc2lvbnNcbiAgICogQHBhcmFtICAge3N0cmluZ30gbWV0aG9kIFJlcXVlc3RlZCBhY3Rpb25cbiAgICogQHJldHVybnMge2Jvb2x9ICAgV2hldGhlciBvciBub3QgdGhlIHJlcXVlc3QgaXMgcGVybWl0dGVkXG4gICAqL1xuICBDcm9zc1N0b3JhZ2VIdWIuX3Blcm1pdHRlZCA9IGZ1bmN0aW9uKG9yaWdpbiwgbWV0aG9kKSB7XG4gICAgdmFyIGF2YWlsYWJsZSwgaSwgZW50cnksIG1hdGNoO1xuXG4gICAgYXZhaWxhYmxlID0gWydnZXQnLCAnc2V0JywgJ2RlbCcsICdjbGVhcicsICdnZXRLZXlzJ107XG4gICAgaWYgKCFDcm9zc1N0b3JhZ2VIdWIuX2luQXJyYXkobWV0aG9kLCBhdmFpbGFibGUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZm9yIChpID0gMDsgaSA8IENyb3NzU3RvcmFnZUh1Yi5fcGVybWlzc2lvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGVudHJ5ID0gQ3Jvc3NTdG9yYWdlSHViLl9wZXJtaXNzaW9uc1tpXTtcbiAgICAgIGlmICghKGVudHJ5Lm9yaWdpbiBpbnN0YW5jZW9mIFJlZ0V4cCkgfHwgIShlbnRyeS5hbGxvdyBpbnN0YW5jZW9mIEFycmF5KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgbWF0Y2ggPSBlbnRyeS5vcmlnaW4udGVzdChvcmlnaW4pO1xuICAgICAgaWYgKG1hdGNoICYmIENyb3NzU3RvcmFnZUh1Yi5faW5BcnJheShtZXRob2QsIGVudHJ5LmFsbG93KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHMgYSBrZXkgdG8gdGhlIHNwZWNpZmllZCB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IHBhcmFtcyBBbiBvYmplY3Qgd2l0aCBrZXkgYW5kIHZhbHVlXG4gICAqL1xuICBDcm9zc1N0b3JhZ2VIdWIuX3NldCA9IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShwYXJhbXMua2V5LCBwYXJhbXMudmFsdWUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBY2NlcHRzIGFuIG9iamVjdCB3aXRoIGFuIGFycmF5IG9mIGtleXMgZm9yIHdoaWNoIHRvIHJldHJpZXZlIHRoZWlyIHZhbHVlcy5cbiAgICogUmV0dXJucyBhIHNpbmdsZSB2YWx1ZSBpZiBvbmx5IG9uZSBrZXkgd2FzIHN1cHBsaWVkLCBvdGhlcndpc2UgaXQgcmV0dXJuc1xuICAgKiBhbiBhcnJheS4gQW55IGtleXMgbm90IHNldCByZXN1bHQgaW4gYSBudWxsIGVsZW1lbnQgaW4gdGhlIHJlc3VsdGluZyBhcnJheS5cbiAgICpcbiAgICogQHBhcmFtICAge29iamVjdH0gcGFyYW1zIEFuIG9iamVjdCB3aXRoIGFuIGFycmF5IG9mIGtleXNcbiAgICogQHJldHVybnMgeyp8KltdfSAgRWl0aGVyIGEgc2luZ2xlIHZhbHVlLCBvciBhbiBhcnJheVxuICAgKi9cbiAgQ3Jvc3NTdG9yYWdlSHViLl9nZXQgPSBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICB2YXIgc3RvcmFnZSwgcmVzdWx0LCBpLCB2YWx1ZTtcblxuICAgIHN0b3JhZ2UgPSB3aW5kb3cubG9jYWxTdG9yYWdlO1xuICAgIHJlc3VsdCA9IFtdO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IHBhcmFtcy5rZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YWx1ZSA9IHN0b3JhZ2UuZ2V0SXRlbShwYXJhbXMua2V5c1tpXSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHZhbHVlID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiAocmVzdWx0Lmxlbmd0aCA+IDEpID8gcmVzdWx0IDogcmVzdWx0WzBdO1xuICB9O1xuXG4gIC8qKlxuICAgKiBEZWxldGVzIGFsbCBrZXlzIHNwZWNpZmllZCBpbiB0aGUgYXJyYXkgZm91bmQgYXQgcGFyYW1zLmtleXMuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXMgQW4gb2JqZWN0IHdpdGggYW4gYXJyYXkgb2Yga2V5c1xuICAgKi9cbiAgQ3Jvc3NTdG9yYWdlSHViLl9kZWwgPSBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhcmFtcy5rZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0ocGFyYW1zLmtleXNbaV0pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQ2xlYXJzIGxvY2FsU3RvcmFnZS5cbiAgICovXG4gIENyb3NzU3RvcmFnZUh1Yi5fY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gYXJyYXkgb2YgYWxsIGtleXMgc3RvcmVkIGluIGxvY2FsU3RvcmFnZS5cbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ1tdfSBUaGUgYXJyYXkgb2Yga2V5c1xuICAgKi9cbiAgQ3Jvc3NTdG9yYWdlSHViLl9nZXRLZXlzID0gZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgdmFyIGksIGxlbmd0aCwga2V5cztcblxuICAgIGtleXMgPSBbXTtcbiAgICBsZW5ndGggPSB3aW5kb3cubG9jYWxTdG9yYWdlLmxlbmd0aDtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAga2V5cy5wdXNoKHdpbmRvdy5sb2NhbFN0b3JhZ2Uua2V5KGkpKTtcbiAgICB9XG5cbiAgICByZXR1cm4ga2V5cztcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCBhIHZhbHVlIGlzIHByZXNlbnQgaW4gdGhlIGFycmF5LiBDb25zaXN0cyBvZiBhblxuICAgKiBhbHRlcm5hdGl2ZSB0byBleHRlbmRpbmcgdGhlIGFycmF5IHByb3RvdHlwZSBmb3IgaW5kZXhPZiwgc2luY2UgaXQnc1xuICAgKiB1bmF2YWlsYWJsZSBmb3IgSUU4LlxuICAgKlxuICAgKiBAcGFyYW0gICB7Kn0gICAgdmFsdWUgVGhlIHZhbHVlIHRvIGZpbmRcbiAgICogQHBhcm1hICAge1tdKn0gIGFycmF5IFRoZSBhcnJheSBpbiB3aGljaCB0byBzZWFyY2hcbiAgICogQHJldHVybnMge2Jvb2x9IFdoZXRoZXIgb3Igbm90IHRoZSB2YWx1ZSB3YXMgZm91bmRcbiAgICovXG4gIENyb3NzU3RvcmFnZUh1Yi5faW5BcnJheSA9IGZ1bmN0aW9uKHZhbHVlLCBhcnJheSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gYXJyYXlbaV0pIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvKipcbiAgICogQSBjcm9zcy1icm93c2VyIHZlcnNpb24gb2YgRGF0ZS5ub3cgY29tcGF0aWJsZSB3aXRoIElFOCB0aGF0IGF2b2lkc1xuICAgKiBtb2RpZnlpbmcgdGhlIERhdGUgb2JqZWN0LlxuICAgKlxuICAgKiBAcmV0dXJuIHtpbnR9IFRoZSBjdXJyZW50IHRpbWVzdGFtcCBpbiBtaWxsaXNlY29uZHNcbiAgICovXG4gIENyb3NzU3RvcmFnZUh1Yi5fbm93ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHR5cGVvZiBEYXRlLm5vdyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIERhdGUubm93KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBFeHBvcnQgZm9yIHZhcmlvdXMgZW52aXJvbm1lbnRzLlxuICAgKi9cbiAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBDcm9zc1N0b3JhZ2VIdWI7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgZXhwb3J0cy5Dcm9zc1N0b3JhZ2VIdWIgPSBDcm9zc1N0b3JhZ2VIdWI7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKFtdLCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBDcm9zc1N0b3JhZ2VIdWI7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcm9vdC5Dcm9zc1N0b3JhZ2VIdWIgPSBDcm9zc1N0b3JhZ2VIdWI7XG4gIH1cbn0odGhpcykpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSB7XG4gIENyb3NzU3RvcmFnZUNsaWVudDogcmVxdWlyZSgnLi9jbGllbnQuanMnKSxcbiAgQ3Jvc3NTdG9yYWdlSHViOiAgICByZXF1aXJlKCcuL2h1Yi5qcycpXG59O1xuIiwiLyohXG5cbkNvcHlyaWdodCAoQykgMjAxNC0yMDE2IGJ5IEFuZHJlYSBHaWFtbWFyY2hpIC0gQFdlYlJlZmxlY3Rpb25cblxuUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxub2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xudG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG5mdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbklNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG5BVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG5MSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuVEhFIFNPRlRXQVJFLlxuXG4qL1xuLy8gZ2xvYmFsIHdpbmRvdyBPYmplY3Rcbi8vIG9wdGlvbmFsIHBvbHlmaWxsIGluZm9cbi8vICAgICdhdXRvJyB1c2VkIGJ5IGRlZmF1bHQsIGV2ZXJ5dGhpbmcgaXMgZmVhdHVyZSBkZXRlY3RlZFxuLy8gICAgJ2ZvcmNlJyB1c2UgdGhlIHBvbHlmaWxsIGV2ZW4gaWYgbm90IGZ1bGx5IG5lZWRlZFxuZnVuY3Rpb24gaW5zdGFsbEN1c3RvbUVsZW1lbnRzKHdpbmRvdywgcG9seWZpbGwpIHsndXNlIHN0cmljdCc7XG5cbiAgLy8gRE8gTk9UIFVTRSBUSElTIEZJTEUgRElSRUNUTFksIElUIFdPTidUIFdPUktcbiAgLy8gVEhJUyBJUyBBIFBST0pFQ1QgQkFTRUQgT04gQSBCVUlMRCBTWVNURU1cbiAgLy8gVEhJUyBGSUxFIElTIEpVU1QgV1JBUFBFRCBVUCBSRVNVTFRJTkcgSU5cbiAgLy8gYnVpbGQvZG9jdW1lbnQtcmVnaXN0ZXItZWxlbWVudC5ub2RlLmpzXG5cbiAgdmFyXG4gICAgZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQsXG4gICAgT2JqZWN0ID0gd2luZG93Lk9iamVjdFxuICA7XG5cbiAgdmFyIGh0bWxDbGFzcyA9IChmdW5jdGlvbiAoaW5mbykge1xuICAgIC8vIChDKSBBbmRyZWEgR2lhbW1hcmNoaSAtIEBXZWJSZWZsZWN0aW9uIC0gTUlUIFN0eWxlXG4gICAgdmFyXG4gICAgICBjYXRjaENsYXNzID0gL15bQS1aXStbYS16XS8sXG4gICAgICBmaWx0ZXJCeSA9IGZ1bmN0aW9uIChyZSkge1xuICAgICAgICB2YXIgYXJyID0gW10sIHRhZztcbiAgICAgICAgZm9yICh0YWcgaW4gcmVnaXN0ZXIpIHtcbiAgICAgICAgICBpZiAocmUudGVzdCh0YWcpKSBhcnIucHVzaCh0YWcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnI7XG4gICAgICB9LFxuICAgICAgYWRkID0gZnVuY3Rpb24gKENsYXNzLCB0YWcpIHtcbiAgICAgICAgdGFnID0gdGFnLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmICghKHRhZyBpbiByZWdpc3RlcikpIHtcbiAgICAgICAgICByZWdpc3RlcltDbGFzc10gPSAocmVnaXN0ZXJbQ2xhc3NdIHx8IFtdKS5jb25jYXQodGFnKTtcbiAgICAgICAgICByZWdpc3Rlclt0YWddID0gKHJlZ2lzdGVyW3RhZy50b1VwcGVyQ2FzZSgpXSA9IENsYXNzKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHJlZ2lzdGVyID0gKE9iamVjdC5jcmVhdGUgfHwgT2JqZWN0KShudWxsKSxcbiAgICAgIGh0bWxDbGFzcyA9IHt9LFxuICAgICAgaSwgc2VjdGlvbiwgdGFncywgQ2xhc3NcbiAgICA7XG4gICAgZm9yIChzZWN0aW9uIGluIGluZm8pIHtcbiAgICAgIGZvciAoQ2xhc3MgaW4gaW5mb1tzZWN0aW9uXSkge1xuICAgICAgICB0YWdzID0gaW5mb1tzZWN0aW9uXVtDbGFzc107XG4gICAgICAgIHJlZ2lzdGVyW0NsYXNzXSA9IHRhZ3M7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0YWdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgcmVnaXN0ZXJbdGFnc1tpXS50b0xvd2VyQ2FzZSgpXSA9XG4gICAgICAgICAgcmVnaXN0ZXJbdGFnc1tpXS50b1VwcGVyQ2FzZSgpXSA9IENsYXNzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGh0bWxDbGFzcy5nZXQgPSBmdW5jdGlvbiBnZXQodGFnT3JDbGFzcykge1xuICAgICAgcmV0dXJuIHR5cGVvZiB0YWdPckNsYXNzID09PSAnc3RyaW5nJyA/XG4gICAgICAgIChyZWdpc3Rlclt0YWdPckNsYXNzXSB8fCAoY2F0Y2hDbGFzcy50ZXN0KHRhZ09yQ2xhc3MpID8gW10gOiAnJykpIDpcbiAgICAgICAgZmlsdGVyQnkodGFnT3JDbGFzcyk7XG4gICAgfTtcbiAgICBodG1sQ2xhc3Muc2V0ID0gZnVuY3Rpb24gc2V0KHRhZywgQ2xhc3MpIHtcbiAgICAgIHJldHVybiAoY2F0Y2hDbGFzcy50ZXN0KHRhZykgP1xuICAgICAgICBhZGQodGFnLCBDbGFzcykgOlxuICAgICAgICBhZGQoQ2xhc3MsIHRhZylcbiAgICAgICksIGh0bWxDbGFzcztcbiAgICB9O1xuICAgIHJldHVybiBodG1sQ2xhc3M7XG4gIH0oe1xuICAgIFwiY29sbGVjdGlvbnNcIjoge1xuICAgICAgXCJIVE1MQWxsQ29sbGVjdGlvblwiOiBbXG4gICAgICAgIFwiYWxsXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxDb2xsZWN0aW9uXCI6IFtcbiAgICAgICAgXCJmb3Jtc1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRm9ybUNvbnRyb2xzQ29sbGVjdGlvblwiOiBbXG4gICAgICAgIFwiZWxlbWVudHNcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE9wdGlvbnNDb2xsZWN0aW9uXCI6IFtcbiAgICAgICAgXCJvcHRpb25zXCJcbiAgICAgIF1cbiAgICB9LFxuICAgIFwiZWxlbWVudHNcIjoge1xuICAgICAgXCJFbGVtZW50XCI6IFtcbiAgICAgICAgXCJlbGVtZW50XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxBbmNob3JFbGVtZW50XCI6IFtcbiAgICAgICAgXCJhXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxBcHBsZXRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJhcHBsZXRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEFyZWFFbGVtZW50XCI6IFtcbiAgICAgICAgXCJhcmVhXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxBdHRhY2htZW50RWxlbWVudFwiOiBbXG4gICAgICAgIFwiYXR0YWNobWVudFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQXVkaW9FbGVtZW50XCI6IFtcbiAgICAgICAgXCJhdWRpb1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQlJFbGVtZW50XCI6IFtcbiAgICAgICAgXCJiclwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQmFzZUVsZW1lbnRcIjogW1xuICAgICAgICBcImJhc2VcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEJvZHlFbGVtZW50XCI6IFtcbiAgICAgICAgXCJib2R5XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxCdXR0b25FbGVtZW50XCI6IFtcbiAgICAgICAgXCJidXR0b25cIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTENhbnZhc0VsZW1lbnRcIjogW1xuICAgICAgICBcImNhbnZhc1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQ29udGVudEVsZW1lbnRcIjogW1xuICAgICAgICBcImNvbnRlbnRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTERMaXN0RWxlbWVudFwiOiBbXG4gICAgICAgIFwiZGxcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTERhdGFFbGVtZW50XCI6IFtcbiAgICAgICAgXCJkYXRhXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxEYXRhTGlzdEVsZW1lbnRcIjogW1xuICAgICAgICBcImRhdGFsaXN0XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxEZXRhaWxzRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZGV0YWlsc1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRGlhbG9nRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZGlhbG9nXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxEaXJlY3RvcnlFbGVtZW50XCI6IFtcbiAgICAgICAgXCJkaXJcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTERpdkVsZW1lbnRcIjogW1xuICAgICAgICBcImRpdlwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRG9jdW1lbnRcIjogW1xuICAgICAgICBcImRvY3VtZW50XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxFbGVtZW50XCI6IFtcbiAgICAgICAgXCJlbGVtZW50XCIsXG4gICAgICAgIFwiYWJiclwiLFxuICAgICAgICBcImFkZHJlc3NcIixcbiAgICAgICAgXCJhcnRpY2xlXCIsXG4gICAgICAgIFwiYXNpZGVcIixcbiAgICAgICAgXCJiXCIsXG4gICAgICAgIFwiYmRpXCIsXG4gICAgICAgIFwiYmRvXCIsXG4gICAgICAgIFwiY2l0ZVwiLFxuICAgICAgICBcImNvZGVcIixcbiAgICAgICAgXCJjb21tYW5kXCIsXG4gICAgICAgIFwiZGRcIixcbiAgICAgICAgXCJkZm5cIixcbiAgICAgICAgXCJkdFwiLFxuICAgICAgICBcImVtXCIsXG4gICAgICAgIFwiZmlnY2FwdGlvblwiLFxuICAgICAgICBcImZpZ3VyZVwiLFxuICAgICAgICBcImZvb3RlclwiLFxuICAgICAgICBcImhlYWRlclwiLFxuICAgICAgICBcImlcIixcbiAgICAgICAgXCJrYmRcIixcbiAgICAgICAgXCJtYXJrXCIsXG4gICAgICAgIFwibmF2XCIsXG4gICAgICAgIFwibm9zY3JpcHRcIixcbiAgICAgICAgXCJycFwiLFxuICAgICAgICBcInJ0XCIsXG4gICAgICAgIFwicnVieVwiLFxuICAgICAgICBcInNcIixcbiAgICAgICAgXCJzYW1wXCIsXG4gICAgICAgIFwic2VjdGlvblwiLFxuICAgICAgICBcInNtYWxsXCIsXG4gICAgICAgIFwic3Ryb25nXCIsXG4gICAgICAgIFwic3ViXCIsXG4gICAgICAgIFwic3VtbWFyeVwiLFxuICAgICAgICBcInN1cFwiLFxuICAgICAgICBcInVcIixcbiAgICAgICAgXCJ2YXJcIixcbiAgICAgICAgXCJ3YnJcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEVtYmVkRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZW1iZWRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEZpZWxkU2V0RWxlbWVudFwiOiBbXG4gICAgICAgIFwiZmllbGRzZXRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEZvbnRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJmb250XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxGb3JtRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZm9ybVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRnJhbWVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJmcmFtZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRnJhbWVTZXRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJmcmFtZXNldFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MSFJFbGVtZW50XCI6IFtcbiAgICAgICAgXCJoclwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MSGVhZEVsZW1lbnRcIjogW1xuICAgICAgICBcImhlYWRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEhlYWRpbmdFbGVtZW50XCI6IFtcbiAgICAgICAgXCJoMVwiLFxuICAgICAgICBcImgyXCIsXG4gICAgICAgIFwiaDNcIixcbiAgICAgICAgXCJoNFwiLFxuICAgICAgICBcImg1XCIsXG4gICAgICAgIFwiaDZcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEh0bWxFbGVtZW50XCI6IFtcbiAgICAgICAgXCJodG1sXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxJRnJhbWVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJpZnJhbWVcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEltYWdlRWxlbWVudFwiOiBbXG4gICAgICAgIFwiaW1nXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxJbnB1dEVsZW1lbnRcIjogW1xuICAgICAgICBcImlucHV0XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxLZXlnZW5FbGVtZW50XCI6IFtcbiAgICAgICAgXCJrZXlnZW5cIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTExJRWxlbWVudFwiOiBbXG4gICAgICAgIFwibGlcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTExhYmVsRWxlbWVudFwiOiBbXG4gICAgICAgIFwibGFiZWxcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTExlZ2VuZEVsZW1lbnRcIjogW1xuICAgICAgICBcImxlZ2VuZFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MTGlua0VsZW1lbnRcIjogW1xuICAgICAgICBcImxpbmtcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE1hcEVsZW1lbnRcIjogW1xuICAgICAgICBcIm1hcFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MTWFycXVlZUVsZW1lbnRcIjogW1xuICAgICAgICBcIm1hcnF1ZWVcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE1lZGlhRWxlbWVudFwiOiBbXG4gICAgICAgIFwibWVkaWFcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE1lbnVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJtZW51XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxNZW51SXRlbUVsZW1lbnRcIjogW1xuICAgICAgICBcIm1lbnVpdGVtXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxNZXRhRWxlbWVudFwiOiBbXG4gICAgICAgIFwibWV0YVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MTWV0ZXJFbGVtZW50XCI6IFtcbiAgICAgICAgXCJtZXRlclwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MTW9kRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZGVsXCIsXG4gICAgICAgIFwiaW5zXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxPTGlzdEVsZW1lbnRcIjogW1xuICAgICAgICBcIm9sXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxPYmplY3RFbGVtZW50XCI6IFtcbiAgICAgICAgXCJvYmplY3RcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE9wdEdyb3VwRWxlbWVudFwiOiBbXG4gICAgICAgIFwib3B0Z3JvdXBcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE9wdGlvbkVsZW1lbnRcIjogW1xuICAgICAgICBcIm9wdGlvblwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MT3V0cHV0RWxlbWVudFwiOiBbXG4gICAgICAgIFwib3V0cHV0XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxQYXJhZ3JhcGhFbGVtZW50XCI6IFtcbiAgICAgICAgXCJwXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxQYXJhbUVsZW1lbnRcIjogW1xuICAgICAgICBcInBhcmFtXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxQaWN0dXJlRWxlbWVudFwiOiBbXG4gICAgICAgIFwicGljdHVyZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MUHJlRWxlbWVudFwiOiBbXG4gICAgICAgIFwicHJlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxQcm9ncmVzc0VsZW1lbnRcIjogW1xuICAgICAgICBcInByb2dyZXNzXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxRdW90ZUVsZW1lbnRcIjogW1xuICAgICAgICBcImJsb2NrcXVvdGVcIixcbiAgICAgICAgXCJxXCIsXG4gICAgICAgIFwicXVvdGVcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFNjcmlwdEVsZW1lbnRcIjogW1xuICAgICAgICBcInNjcmlwdFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MU2VsZWN0RWxlbWVudFwiOiBbXG4gICAgICAgIFwic2VsZWN0XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxTaGFkb3dFbGVtZW50XCI6IFtcbiAgICAgICAgXCJzaGFkb3dcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFNsb3RFbGVtZW50XCI6IFtcbiAgICAgICAgXCJzbG90XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxTb3VyY2VFbGVtZW50XCI6IFtcbiAgICAgICAgXCJzb3VyY2VcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFNwYW5FbGVtZW50XCI6IFtcbiAgICAgICAgXCJzcGFuXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxTdHlsZUVsZW1lbnRcIjogW1xuICAgICAgICBcInN0eWxlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUYWJsZUNhcHRpb25FbGVtZW50XCI6IFtcbiAgICAgICAgXCJjYXB0aW9uXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUYWJsZUNlbGxFbGVtZW50XCI6IFtcbiAgICAgICAgXCJ0ZFwiLFxuICAgICAgICBcInRoXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUYWJsZUNvbEVsZW1lbnRcIjogW1xuICAgICAgICBcImNvbFwiLFxuICAgICAgICBcImNvbGdyb3VwXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUYWJsZUVsZW1lbnRcIjogW1xuICAgICAgICBcInRhYmxlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUYWJsZVJvd0VsZW1lbnRcIjogW1xuICAgICAgICBcInRyXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50XCI6IFtcbiAgICAgICAgXCJ0aGVhZFwiLFxuICAgICAgICBcInRib2R5XCIsXG4gICAgICAgIFwidGZvb3RcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFRlbXBsYXRlRWxlbWVudFwiOiBbXG4gICAgICAgIFwidGVtcGxhdGVcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFRleHRBcmVhRWxlbWVudFwiOiBbXG4gICAgICAgIFwidGV4dGFyZWFcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFRpbWVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJ0aW1lXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUaXRsZUVsZW1lbnRcIjogW1xuICAgICAgICBcInRpdGxlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUcmFja0VsZW1lbnRcIjogW1xuICAgICAgICBcInRyYWNrXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxVTGlzdEVsZW1lbnRcIjogW1xuICAgICAgICBcInVsXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxVbmtub3duRWxlbWVudFwiOiBbXG4gICAgICAgIFwidW5rbm93blwiLFxuICAgICAgICBcInZoZ3JvdXB2XCIsXG4gICAgICAgIFwidmtleWdlblwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVmlkZW9FbGVtZW50XCI6IFtcbiAgICAgICAgXCJ2aWRlb1wiXG4gICAgICBdXG4gICAgfSxcbiAgICBcIm5vZGVzXCI6IHtcbiAgICAgIFwiQXR0clwiOiBbXG4gICAgICAgIFwibm9kZVwiXG4gICAgICBdLFxuICAgICAgXCJBdWRpb1wiOiBbXG4gICAgICAgIFwiYXVkaW9cIlxuICAgICAgXSxcbiAgICAgIFwiQ0RBVEFTZWN0aW9uXCI6IFtcbiAgICAgICAgXCJub2RlXCJcbiAgICAgIF0sXG4gICAgICBcIkNoYXJhY3RlckRhdGFcIjogW1xuICAgICAgICBcIm5vZGVcIlxuICAgICAgXSxcbiAgICAgIFwiQ29tbWVudFwiOiBbXG4gICAgICAgIFwiI2NvbW1lbnRcIlxuICAgICAgXSxcbiAgICAgIFwiRG9jdW1lbnRcIjogW1xuICAgICAgICBcIiNkb2N1bWVudFwiXG4gICAgICBdLFxuICAgICAgXCJEb2N1bWVudEZyYWdtZW50XCI6IFtcbiAgICAgICAgXCIjZG9jdW1lbnQtZnJhZ21lbnRcIlxuICAgICAgXSxcbiAgICAgIFwiRG9jdW1lbnRUeXBlXCI6IFtcbiAgICAgICAgXCJub2RlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxEb2N1bWVudFwiOiBbXG4gICAgICAgIFwiI2RvY3VtZW50XCJcbiAgICAgIF0sXG4gICAgICBcIkltYWdlXCI6IFtcbiAgICAgICAgXCJpbWdcIlxuICAgICAgXSxcbiAgICAgIFwiT3B0aW9uXCI6IFtcbiAgICAgICAgXCJvcHRpb25cIlxuICAgICAgXSxcbiAgICAgIFwiUHJvY2Vzc2luZ0luc3RydWN0aW9uXCI6IFtcbiAgICAgICAgXCJub2RlXCJcbiAgICAgIF0sXG4gICAgICBcIlNoYWRvd1Jvb3RcIjogW1xuICAgICAgICBcIiNzaGFkb3ctcm9vdFwiXG4gICAgICBdLFxuICAgICAgXCJUZXh0XCI6IFtcbiAgICAgICAgXCIjdGV4dFwiXG4gICAgICBdLFxuICAgICAgXCJYTUxEb2N1bWVudFwiOiBbXG4gICAgICAgIFwieG1sXCJcbiAgICAgIF1cbiAgICB9XG4gIH0pKTtcbiAgXG4gIFxuICAgIFxuICAvLyBwYXNzZWQgYXQgcnVudGltZSwgY29uZmlndXJhYmxlXG4gIC8vIHZpYSBub2RlanMgbW9kdWxlXG4gIGlmICghcG9seWZpbGwpIHBvbHlmaWxsID0gJ2F1dG8nO1xuICBcbiAgdmFyXG4gICAgLy8gVjAgcG9seWZpbGwgZW50cnlcbiAgICBSRUdJU1RFUl9FTEVNRU5UID0gJ3JlZ2lzdGVyRWxlbWVudCcsXG4gIFxuICAgIC8vIElFIDwgMTEgb25seSArIG9sZCBXZWJLaXQgZm9yIGF0dHJpYnV0ZXMgKyBmZWF0dXJlIGRldGVjdGlvblxuICAgIEVYUEFORE9fVUlEID0gJ19fJyArIFJFR0lTVEVSX0VMRU1FTlQgKyAod2luZG93Lk1hdGgucmFuZG9tKCkgKiAxMGU0ID4+IDApLFxuICBcbiAgICAvLyBzaG9ydGN1dHMgYW5kIGNvc3RhbnRzXG4gICAgQUREX0VWRU5UX0xJU1RFTkVSID0gJ2FkZEV2ZW50TGlzdGVuZXInLFxuICAgIEFUVEFDSEVEID0gJ2F0dGFjaGVkJyxcbiAgICBDQUxMQkFDSyA9ICdDYWxsYmFjaycsXG4gICAgREVUQUNIRUQgPSAnZGV0YWNoZWQnLFxuICAgIEVYVEVORFMgPSAnZXh0ZW5kcycsXG4gIFxuICAgIEFUVFJJQlVURV9DSEFOR0VEX0NBTExCQUNLID0gJ2F0dHJpYnV0ZUNoYW5nZWQnICsgQ0FMTEJBQ0ssXG4gICAgQVRUQUNIRURfQ0FMTEJBQ0sgPSBBVFRBQ0hFRCArIENBTExCQUNLLFxuICAgIENPTk5FQ1RFRF9DQUxMQkFDSyA9ICdjb25uZWN0ZWQnICsgQ0FMTEJBQ0ssXG4gICAgRElTQ09OTkVDVEVEX0NBTExCQUNLID0gJ2Rpc2Nvbm5lY3RlZCcgKyBDQUxMQkFDSyxcbiAgICBDUkVBVEVEX0NBTExCQUNLID0gJ2NyZWF0ZWQnICsgQ0FMTEJBQ0ssXG4gICAgREVUQUNIRURfQ0FMTEJBQ0sgPSBERVRBQ0hFRCArIENBTExCQUNLLFxuICBcbiAgICBBRERJVElPTiA9ICdBRERJVElPTicsXG4gICAgTU9ESUZJQ0FUSU9OID0gJ01PRElGSUNBVElPTicsXG4gICAgUkVNT1ZBTCA9ICdSRU1PVkFMJyxcbiAgXG4gICAgRE9NX0FUVFJfTU9ESUZJRUQgPSAnRE9NQXR0ck1vZGlmaWVkJyxcbiAgICBET01fQ09OVEVOVF9MT0FERUQgPSAnRE9NQ29udGVudExvYWRlZCcsXG4gICAgRE9NX1NVQlRSRUVfTU9ESUZJRUQgPSAnRE9NU3VidHJlZU1vZGlmaWVkJyxcbiAgXG4gICAgUFJFRklYX1RBRyA9ICc8JyxcbiAgICBQUkVGSVhfSVMgPSAnPScsXG4gIFxuICAgIC8vIHZhbGlkIGFuZCBpbnZhbGlkIG5vZGUgbmFtZXNcbiAgICB2YWxpZE5hbWUgPSAvXltBLVpdW0EtWjAtOV0qKD86LVtBLVowLTldKykrJC8sXG4gICAgaW52YWxpZE5hbWVzID0gW1xuICAgICAgJ0FOTk9UQVRJT04tWE1MJyxcbiAgICAgICdDT0xPUi1QUk9GSUxFJyxcbiAgICAgICdGT05ULUZBQ0UnLFxuICAgICAgJ0ZPTlQtRkFDRS1TUkMnLFxuICAgICAgJ0ZPTlQtRkFDRS1VUkknLFxuICAgICAgJ0ZPTlQtRkFDRS1GT1JNQVQnLFxuICAgICAgJ0ZPTlQtRkFDRS1OQU1FJyxcbiAgICAgICdNSVNTSU5HLUdMWVBIJ1xuICAgIF0sXG4gIFxuICAgIC8vIHJlZ2lzdGVyZWQgdHlwZXMgYW5kIHRoZWlyIHByb3RvdHlwZXNcbiAgICB0eXBlcyA9IFtdLFxuICAgIHByb3RvcyA9IFtdLFxuICBcbiAgICAvLyB0byBxdWVyeSBzdWJub2Rlc1xuICAgIHF1ZXJ5ID0gJycsXG4gIFxuICAgIC8vIGh0bWwgc2hvcnRjdXQgdXNlZCB0byBmZWF0dXJlIGRldGVjdFxuICAgIGRvY3VtZW50RWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcbiAgXG4gICAgLy8gRVM1IGlubGluZSBoZWxwZXJzIHx8IGJhc2ljIHBhdGNoZXNcbiAgICBpbmRleE9mID0gdHlwZXMuaW5kZXhPZiB8fCBmdW5jdGlvbiAodikge1xuICAgICAgZm9yKHZhciBpID0gdGhpcy5sZW5ndGg7IGktLSAmJiB0aGlzW2ldICE9PSB2Oyl7fVxuICAgICAgcmV0dXJuIGk7XG4gICAgfSxcbiAgXG4gICAgLy8gb3RoZXIgaGVscGVycyAvIHNob3J0Y3V0c1xuICAgIE9QID0gT2JqZWN0LnByb3RvdHlwZSxcbiAgICBoT1AgPSBPUC5oYXNPd25Qcm9wZXJ0eSxcbiAgICBpUE8gPSBPUC5pc1Byb3RvdHlwZU9mLFxuICBcbiAgICBkZWZpbmVQcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSxcbiAgICBlbXB0eSA9IFtdLFxuICAgIGdPUEQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLFxuICAgIGdPUE4gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyxcbiAgICBnUE8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YsXG4gICAgc1BPID0gT2JqZWN0LnNldFByb3RvdHlwZU9mLFxuICBcbiAgICAvLyBqc2hpbnQgcHJvdG86IHRydWVcbiAgICBoYXNQcm90byA9ICEhT2JqZWN0Ll9fcHJvdG9fXyxcbiAgXG4gICAgLy8gVjEgaGVscGVyc1xuICAgIGZpeEdldENsYXNzID0gZmFsc2UsXG4gICAgRFJFQ0VWMSA9ICdfX2RyZUNFdjEnLFxuICAgIGN1c3RvbUVsZW1lbnRzID0gd2luZG93LmN1c3RvbUVsZW1lbnRzLFxuICAgIHVzYWJsZUN1c3RvbUVsZW1lbnRzID0gcG9seWZpbGwgIT09ICdmb3JjZScgJiYgISEoXG4gICAgICBjdXN0b21FbGVtZW50cyAmJlxuICAgICAgY3VzdG9tRWxlbWVudHMuZGVmaW5lICYmXG4gICAgICBjdXN0b21FbGVtZW50cy5nZXQgJiZcbiAgICAgIGN1c3RvbUVsZW1lbnRzLndoZW5EZWZpbmVkXG4gICAgKSxcbiAgICBEaWN0ID0gT2JqZWN0LmNyZWF0ZSB8fCBPYmplY3QsXG4gICAgTWFwID0gd2luZG93Lk1hcCB8fCBmdW5jdGlvbiBNYXAoKSB7XG4gICAgICB2YXIgSyA9IFtdLCBWID0gW10sIGk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uIChrKSB7XG4gICAgICAgICAgcmV0dXJuIFZbaW5kZXhPZi5jYWxsKEssIGspXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoaywgdikge1xuICAgICAgICAgIGkgPSBpbmRleE9mLmNhbGwoSywgayk7XG4gICAgICAgICAgaWYgKGkgPCAwKSBWW0sucHVzaChrKSAtIDFdID0gdjtcbiAgICAgICAgICBlbHNlIFZbaV0gPSB2O1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0sXG4gICAgUHJvbWlzZSA9IHdpbmRvdy5Qcm9taXNlIHx8IGZ1bmN0aW9uIChmbikge1xuICAgICAgdmFyXG4gICAgICAgIG5vdGlmeSA9IFtdLFxuICAgICAgICBkb25lID0gZmFsc2UsXG4gICAgICAgIHAgPSB7XG4gICAgICAgICAgJ2NhdGNoJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgICAgfSxcbiAgICAgICAgICAndGhlbic6IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgbm90aWZ5LnB1c2goY2IpO1xuICAgICAgICAgICAgaWYgKGRvbmUpIHNldFRpbWVvdXQocmVzb2x2ZSwgMSk7XG4gICAgICAgICAgICByZXR1cm4gcDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIDtcbiAgICAgIGZ1bmN0aW9uIHJlc29sdmUodmFsdWUpIHtcbiAgICAgICAgZG9uZSA9IHRydWU7XG4gICAgICAgIHdoaWxlIChub3RpZnkubGVuZ3RoKSBub3RpZnkuc2hpZnQoKSh2YWx1ZSk7XG4gICAgICB9XG4gICAgICBmbihyZXNvbHZlKTtcbiAgICAgIHJldHVybiBwO1xuICAgIH0sXG4gICAganVzdENyZWF0ZWQgPSBmYWxzZSxcbiAgICBjb25zdHJ1Y3RvcnMgPSBEaWN0KG51bGwpLFxuICAgIHdhaXRpbmdMaXN0ID0gRGljdChudWxsKSxcbiAgICBub2RlTmFtZXMgPSBuZXcgTWFwKCksXG4gICAgc2Vjb25kQXJndW1lbnQgPSBTdHJpbmcsXG4gIFxuICAgIC8vIHVzZWQgdG8gY3JlYXRlIHVuaXF1ZSBpbnN0YW5jZXNcbiAgICBjcmVhdGUgPSBPYmplY3QuY3JlYXRlIHx8IGZ1bmN0aW9uIEJyaWRnZShwcm90bykge1xuICAgICAgLy8gc2lsbHkgYnJva2VuIHBvbHlmaWxsIHByb2JhYmx5IGV2ZXIgdXNlZCBidXQgc2hvcnQgZW5vdWdoIHRvIHdvcmtcbiAgICAgIHJldHVybiBwcm90byA/ICgoQnJpZGdlLnByb3RvdHlwZSA9IHByb3RvKSwgbmV3IEJyaWRnZSgpKSA6IHRoaXM7XG4gICAgfSxcbiAgXG4gICAgLy8gd2lsbCBzZXQgdGhlIHByb3RvdHlwZSBpZiBwb3NzaWJsZVxuICAgIC8vIG9yIGNvcHkgb3ZlciBhbGwgcHJvcGVydGllc1xuICAgIHNldFByb3RvdHlwZSA9IHNQTyB8fCAoXG4gICAgICBoYXNQcm90byA/XG4gICAgICAgIGZ1bmN0aW9uIChvLCBwKSB7XG4gICAgICAgICAgby5fX3Byb3RvX18gPSBwO1xuICAgICAgICAgIHJldHVybiBvO1xuICAgICAgICB9IDogKFxuICAgICAgKGdPUE4gJiYgZ09QRCkgP1xuICAgICAgICAoZnVuY3Rpb24oKXtcbiAgICAgICAgICBmdW5jdGlvbiBzZXRQcm9wZXJ0aWVzKG8sIHApIHtcbiAgICAgICAgICAgIGZvciAodmFyXG4gICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgbmFtZXMgPSBnT1BOKHApLFxuICAgICAgICAgICAgICBpID0gMCwgbGVuZ3RoID0gbmFtZXMubGVuZ3RoO1xuICAgICAgICAgICAgICBpIDwgbGVuZ3RoOyBpKytcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBrZXkgPSBuYW1lc1tpXTtcbiAgICAgICAgICAgICAgaWYgKCFoT1AuY2FsbChvLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgZGVmaW5lUHJvcGVydHkobywga2V5LCBnT1BEKHAsIGtleSkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAobywgcCkge1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICBzZXRQcm9wZXJ0aWVzKG8sIHApO1xuICAgICAgICAgICAgfSB3aGlsZSAoKHAgPSBnUE8ocCkpICYmICFpUE8uY2FsbChwLCBvKSk7XG4gICAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgICB9O1xuICAgICAgICB9KCkpIDpcbiAgICAgICAgZnVuY3Rpb24gKG8sIHApIHtcbiAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gcCkge1xuICAgICAgICAgICAgb1trZXldID0gcFtrZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgfVxuICAgICkpLFxuICBcbiAgICAvLyBET00gc2hvcnRjdXRzIGFuZCBoZWxwZXJzLCBpZiBhbnlcbiAgXG4gICAgTXV0YXRpb25PYnNlcnZlciA9IHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyIHx8XG4gICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLFxuICBcbiAgICBIVE1MRWxlbWVudFByb3RvdHlwZSA9IChcbiAgICAgIHdpbmRvdy5IVE1MRWxlbWVudCB8fFxuICAgICAgd2luZG93LkVsZW1lbnQgfHxcbiAgICAgIHdpbmRvdy5Ob2RlXG4gICAgKS5wcm90b3R5cGUsXG4gIFxuICAgIElFOCA9ICFpUE8uY2FsbChIVE1MRWxlbWVudFByb3RvdHlwZSwgZG9jdW1lbnRFbGVtZW50KSxcbiAgXG4gICAgc2FmZVByb3BlcnR5ID0gSUU4ID8gZnVuY3Rpb24gKG8sIGssIGQpIHtcbiAgICAgIG9ba10gPSBkLnZhbHVlO1xuICAgICAgcmV0dXJuIG87XG4gICAgfSA6IGRlZmluZVByb3BlcnR5LFxuICBcbiAgICBpc1ZhbGlkTm9kZSA9IElFOCA/XG4gICAgICBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZS5ub2RlVHlwZSA9PT0gMTtcbiAgICAgIH0gOlxuICAgICAgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIGlQTy5jYWxsKEhUTUxFbGVtZW50UHJvdG90eXBlLCBub2RlKTtcbiAgICAgIH0sXG4gIFxuICAgIHRhcmdldHMgPSBJRTggJiYgW10sXG4gIFxuICAgIGF0dGFjaFNoYWRvdyA9IEhUTUxFbGVtZW50UHJvdG90eXBlLmF0dGFjaFNoYWRvdyxcbiAgICBjbG9uZU5vZGUgPSBIVE1MRWxlbWVudFByb3RvdHlwZS5jbG9uZU5vZGUsXG4gICAgZGlzcGF0Y2hFdmVudCA9IEhUTUxFbGVtZW50UHJvdG90eXBlLmRpc3BhdGNoRXZlbnQsXG4gICAgZ2V0QXR0cmlidXRlID0gSFRNTEVsZW1lbnRQcm90b3R5cGUuZ2V0QXR0cmlidXRlLFxuICAgIGhhc0F0dHJpYnV0ZSA9IEhUTUxFbGVtZW50UHJvdG90eXBlLmhhc0F0dHJpYnV0ZSxcbiAgICByZW1vdmVBdHRyaWJ1dGUgPSBIVE1MRWxlbWVudFByb3RvdHlwZS5yZW1vdmVBdHRyaWJ1dGUsXG4gICAgc2V0QXR0cmlidXRlID0gSFRNTEVsZW1lbnRQcm90b3R5cGUuc2V0QXR0cmlidXRlLFxuICBcbiAgICAvLyByZXBsYWNlZCBsYXRlciBvblxuICAgIGNyZWF0ZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50LFxuICAgIHBhdGNoZWRDcmVhdGVFbGVtZW50ID0gY3JlYXRlRWxlbWVudCxcbiAgXG4gICAgLy8gc2hhcmVkIG9ic2VydmVyIGZvciBhbGwgYXR0cmlidXRlc1xuICAgIGF0dHJpYnV0ZXNPYnNlcnZlciA9IE11dGF0aW9uT2JzZXJ2ZXIgJiYge1xuICAgICAgYXR0cmlidXRlczogdHJ1ZSxcbiAgICAgIGNoYXJhY3RlckRhdGE6IHRydWUsXG4gICAgICBhdHRyaWJ1dGVPbGRWYWx1ZTogdHJ1ZVxuICAgIH0sXG4gIFxuICAgIC8vIHVzZWZ1bCB0byBkZXRlY3Qgb25seSBpZiB0aGVyZSdzIG5vIE11dGF0aW9uT2JzZXJ2ZXJcbiAgICBET01BdHRyTW9kaWZpZWQgPSBNdXRhdGlvbk9ic2VydmVyIHx8IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGRvZXNOb3RTdXBwb3J0RE9NQXR0ck1vZGlmaWVkID0gZmFsc2U7XG4gICAgICBkb2N1bWVudEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgRE9NX0FUVFJfTU9ESUZJRUQsXG4gICAgICAgIERPTUF0dHJNb2RpZmllZFxuICAgICAgKTtcbiAgICB9LFxuICBcbiAgICAvLyB3aWxsIGJvdGggYmUgdXNlZCB0byBtYWtlIERPTU5vZGVJbnNlcnRlZCBhc3luY2hyb25vdXNcbiAgICBhc2FwUXVldWUsXG4gICAgYXNhcFRpbWVyID0gMCxcbiAgXG4gICAgLy8gaW50ZXJuYWwgZmxhZ3NcbiAgICBWMCA9IFJFR0lTVEVSX0VMRU1FTlQgaW4gZG9jdW1lbnQsXG4gICAgc2V0TGlzdGVuZXIgPSB0cnVlLFxuICAgIGp1c3RTZXR1cCA9IGZhbHNlLFxuICAgIGRvZXNOb3RTdXBwb3J0RE9NQXR0ck1vZGlmaWVkID0gdHJ1ZSxcbiAgICBkcm9wRG9tQ29udGVudExvYWRlZCA9IHRydWUsXG4gIFxuICAgIC8vIG5lZWRlZCBmb3IgdGhlIGlubmVySFRNTCBoZWxwZXJcbiAgICBub3RGcm9tSW5uZXJIVE1MSGVscGVyID0gdHJ1ZSxcbiAgXG4gICAgLy8gb3B0aW9uYWxseSBkZWZpbmVkIGxhdGVyIG9uXG4gICAgb25TdWJ0cmVlTW9kaWZpZWQsXG4gICAgY2FsbERPTUF0dHJNb2RpZmllZCxcbiAgICBnZXRBdHRyaWJ1dGVzTWlycm9yLFxuICAgIG9ic2VydmVyLFxuICAgIG9ic2VydmUsXG4gIFxuICAgIC8vIGJhc2VkIG9uIHNldHRpbmcgcHJvdG90eXBlIGNhcGFiaWxpdHlcbiAgICAvLyB3aWxsIGNoZWNrIHByb3RvIG9yIHRoZSBleHBhbmRvIGF0dHJpYnV0ZVxuICAgIC8vIGluIG9yZGVyIHRvIHNldHVwIHRoZSBub2RlIG9uY2VcbiAgICBwYXRjaElmTm90QWxyZWFkeSxcbiAgICBwYXRjaFxuICA7XG4gIFxuICAvLyBvbmx5IGlmIG5lZWRlZFxuICBpZiAoIVYwKSB7XG4gIFxuICAgIGlmIChzUE8gfHwgaGFzUHJvdG8pIHtcbiAgICAgICAgcGF0Y2hJZk5vdEFscmVhZHkgPSBmdW5jdGlvbiAobm9kZSwgcHJvdG8pIHtcbiAgICAgICAgICBpZiAoIWlQTy5jYWxsKHByb3RvLCBub2RlKSkge1xuICAgICAgICAgICAgc2V0dXBOb2RlKG5vZGUsIHByb3RvKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHBhdGNoID0gc2V0dXBOb2RlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHBhdGNoSWZOb3RBbHJlYWR5ID0gZnVuY3Rpb24gKG5vZGUsIHByb3RvKSB7XG4gICAgICAgICAgaWYgKCFub2RlW0VYUEFORE9fVUlEXSkge1xuICAgICAgICAgICAgbm9kZVtFWFBBTkRPX1VJRF0gPSBPYmplY3QodHJ1ZSk7XG4gICAgICAgICAgICBzZXR1cE5vZGUobm9kZSwgcHJvdG8pO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcGF0Y2ggPSBwYXRjaElmTm90QWxyZWFkeTtcbiAgICB9XG4gIFxuICAgIGlmIChJRTgpIHtcbiAgICAgIGRvZXNOb3RTdXBwb3J0RE9NQXR0ck1vZGlmaWVkID0gZmFsc2U7XG4gICAgICAoZnVuY3Rpb24gKCl7XG4gICAgICAgIHZhclxuICAgICAgICAgIGRlc2NyaXB0b3IgPSBnT1BEKEhUTUxFbGVtZW50UHJvdG90eXBlLCBBRERfRVZFTlRfTElTVEVORVIpLFxuICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIgPSBkZXNjcmlwdG9yLnZhbHVlLFxuICAgICAgICAgIHBhdGNoZWRSZW1vdmVBdHRyaWJ1dGUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgdmFyIGUgPSBuZXcgQ3VzdG9tRXZlbnQoRE9NX0FUVFJfTU9ESUZJRUQsIHtidWJibGVzOiB0cnVlfSk7XG4gICAgICAgICAgICBlLmF0dHJOYW1lID0gbmFtZTtcbiAgICAgICAgICAgIGUucHJldlZhbHVlID0gZ2V0QXR0cmlidXRlLmNhbGwodGhpcywgbmFtZSk7XG4gICAgICAgICAgICBlLm5ld1ZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIGVbUkVNT1ZBTF0gPSBlLmF0dHJDaGFuZ2UgPSAyO1xuICAgICAgICAgICAgcmVtb3ZlQXR0cmlidXRlLmNhbGwodGhpcywgbmFtZSk7XG4gICAgICAgICAgICBkaXNwYXRjaEV2ZW50LmNhbGwodGhpcywgZSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBwYXRjaGVkU2V0QXR0cmlidXRlID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgaGFkID0gaGFzQXR0cmlidXRlLmNhbGwodGhpcywgbmFtZSksXG4gICAgICAgICAgICAgIG9sZCA9IGhhZCAmJiBnZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLCBuYW1lKSxcbiAgICAgICAgICAgICAgZSA9IG5ldyBDdXN0b21FdmVudChET01fQVRUUl9NT0RJRklFRCwge2J1YmJsZXM6IHRydWV9KVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgc2V0QXR0cmlidXRlLmNhbGwodGhpcywgbmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgZS5hdHRyTmFtZSA9IG5hbWU7XG4gICAgICAgICAgICBlLnByZXZWYWx1ZSA9IGhhZCA/IG9sZCA6IG51bGw7XG4gICAgICAgICAgICBlLm5ld1ZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAoaGFkKSB7XG4gICAgICAgICAgICAgIGVbTU9ESUZJQ0FUSU9OXSA9IGUuYXR0ckNoYW5nZSA9IDE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBlW0FERElUSU9OXSA9IGUuYXR0ckNoYW5nZSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXNwYXRjaEV2ZW50LmNhbGwodGhpcywgZSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBvblByb3BlcnR5Q2hhbmdlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIC8vIGpzaGludCBlcW51bGw6dHJ1ZVxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIG5vZGUgPSBlLmN1cnJlbnRUYXJnZXQsXG4gICAgICAgICAgICAgIHN1cGVyU2VjcmV0ID0gbm9kZVtFWFBBTkRPX1VJRF0sXG4gICAgICAgICAgICAgIHByb3BlcnR5TmFtZSA9IGUucHJvcGVydHlOYW1lLFxuICAgICAgICAgICAgICBldmVudFxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgaWYgKHN1cGVyU2VjcmV0Lmhhc093blByb3BlcnR5KHByb3BlcnR5TmFtZSkpIHtcbiAgICAgICAgICAgICAgc3VwZXJTZWNyZXQgPSBzdXBlclNlY3JldFtwcm9wZXJ0eU5hbWVdO1xuICAgICAgICAgICAgICBldmVudCA9IG5ldyBDdXN0b21FdmVudChET01fQVRUUl9NT0RJRklFRCwge2J1YmJsZXM6IHRydWV9KTtcbiAgICAgICAgICAgICAgZXZlbnQuYXR0ck5hbWUgPSBzdXBlclNlY3JldC5uYW1lO1xuICAgICAgICAgICAgICBldmVudC5wcmV2VmFsdWUgPSBzdXBlclNlY3JldC52YWx1ZSB8fCBudWxsO1xuICAgICAgICAgICAgICBldmVudC5uZXdWYWx1ZSA9IChzdXBlclNlY3JldC52YWx1ZSA9IG5vZGVbcHJvcGVydHlOYW1lXSB8fCBudWxsKTtcbiAgICAgICAgICAgICAgaWYgKGV2ZW50LnByZXZWYWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRbQURESVRJT05dID0gZXZlbnQuYXR0ckNoYW5nZSA9IDA7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZXZlbnRbTU9ESUZJQ0FUSU9OXSA9IGV2ZW50LmF0dHJDaGFuZ2UgPSAxO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGRpc3BhdGNoRXZlbnQuY2FsbChub2RlLCBldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICA7XG4gICAgICAgIGRlc2NyaXB0b3IudmFsdWUgPSBmdW5jdGlvbiAodHlwZSwgaGFuZGxlciwgY2FwdHVyZSkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHR5cGUgPT09IERPTV9BVFRSX01PRElGSUVEICYmXG4gICAgICAgICAgICB0aGlzW0FUVFJJQlVURV9DSEFOR0VEX0NBTExCQUNLXSAmJlxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUgIT09IHBhdGNoZWRTZXRBdHRyaWJ1dGVcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXNbRVhQQU5ET19VSURdID0ge1xuICAgICAgICAgICAgICBjbGFzc05hbWU6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnY2xhc3MnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLmNsYXNzTmFtZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUgPSBwYXRjaGVkU2V0QXR0cmlidXRlO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUgPSBwYXRjaGVkUmVtb3ZlQXR0cmlidXRlO1xuICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lci5jYWxsKHRoaXMsICdwcm9wZXJ0eWNoYW5nZScsIG9uUHJvcGVydHlDaGFuZ2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhZGRFdmVudExpc3RlbmVyLmNhbGwodGhpcywgdHlwZSwgaGFuZGxlciwgY2FwdHVyZSk7XG4gICAgICAgIH07XG4gICAgICAgIGRlZmluZVByb3BlcnR5KEhUTUxFbGVtZW50UHJvdG90eXBlLCBBRERfRVZFTlRfTElTVEVORVIsIGRlc2NyaXB0b3IpO1xuICAgICAgfSgpKTtcbiAgICB9IGVsc2UgaWYgKCFNdXRhdGlvbk9ic2VydmVyKSB7XG4gICAgICBkb2N1bWVudEVsZW1lbnRbQUREX0VWRU5UX0xJU1RFTkVSXShET01fQVRUUl9NT0RJRklFRCwgRE9NQXR0ck1vZGlmaWVkKTtcbiAgICAgIGRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoRVhQQU5ET19VSUQsIDEpO1xuICAgICAgZG9jdW1lbnRFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShFWFBBTkRPX1VJRCk7XG4gICAgICBpZiAoZG9lc05vdFN1cHBvcnRET01BdHRyTW9kaWZpZWQpIHtcbiAgICAgICAgb25TdWJ0cmVlTW9kaWZpZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHZhclxuICAgICAgICAgICAgbm9kZSA9IHRoaXMsXG4gICAgICAgICAgICBvbGRBdHRyaWJ1dGVzLFxuICAgICAgICAgICAgbmV3QXR0cmlidXRlcyxcbiAgICAgICAgICAgIGtleVxuICAgICAgICAgIDtcbiAgICAgICAgICBpZiAobm9kZSA9PT0gZS50YXJnZXQpIHtcbiAgICAgICAgICAgIG9sZEF0dHJpYnV0ZXMgPSBub2RlW0VYUEFORE9fVUlEXTtcbiAgICAgICAgICAgIG5vZGVbRVhQQU5ET19VSURdID0gKG5ld0F0dHJpYnV0ZXMgPSBnZXRBdHRyaWJ1dGVzTWlycm9yKG5vZGUpKTtcbiAgICAgICAgICAgIGZvciAoa2V5IGluIG5ld0F0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG9sZEF0dHJpYnV0ZXMpKSB7XG4gICAgICAgICAgICAgICAgLy8gYXR0cmlidXRlIHdhcyBhZGRlZFxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsRE9NQXR0ck1vZGlmaWVkKFxuICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgICBvbGRBdHRyaWJ1dGVzW2tleV0sXG4gICAgICAgICAgICAgICAgICBuZXdBdHRyaWJ1dGVzW2tleV0sXG4gICAgICAgICAgICAgICAgICBBRERJVElPTlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAobmV3QXR0cmlidXRlc1trZXldICE9PSBvbGRBdHRyaWJ1dGVzW2tleV0pIHtcbiAgICAgICAgICAgICAgICAvLyBhdHRyaWJ1dGUgd2FzIGNoYW5nZWRcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbERPTUF0dHJNb2RpZmllZChcbiAgICAgICAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgb2xkQXR0cmlidXRlc1trZXldLFxuICAgICAgICAgICAgICAgICAgbmV3QXR0cmlidXRlc1trZXldLFxuICAgICAgICAgICAgICAgICAgTU9ESUZJQ0FUSU9OXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY2hlY2tpbmcgaWYgaXQgaGFzIGJlZW4gcmVtb3ZlZFxuICAgICAgICAgICAgZm9yIChrZXkgaW4gb2xkQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gbmV3QXR0cmlidXRlcykpIHtcbiAgICAgICAgICAgICAgICAvLyBhdHRyaWJ1dGUgcmVtb3ZlZFxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsRE9NQXR0ck1vZGlmaWVkKFxuICAgICAgICAgICAgICAgICAgMixcbiAgICAgICAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgICBvbGRBdHRyaWJ1dGVzW2tleV0sXG4gICAgICAgICAgICAgICAgICBuZXdBdHRyaWJ1dGVzW2tleV0sXG4gICAgICAgICAgICAgICAgICBSRU1PVkFMXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY2FsbERPTUF0dHJNb2RpZmllZCA9IGZ1bmN0aW9uIChcbiAgICAgICAgICBhdHRyQ2hhbmdlLFxuICAgICAgICAgIGN1cnJlbnRUYXJnZXQsXG4gICAgICAgICAgYXR0ck5hbWUsXG4gICAgICAgICAgcHJldlZhbHVlLFxuICAgICAgICAgIG5ld1ZhbHVlLFxuICAgICAgICAgIGFjdGlvblxuICAgICAgICApIHtcbiAgICAgICAgICB2YXIgZSA9IHtcbiAgICAgICAgICAgIGF0dHJDaGFuZ2U6IGF0dHJDaGFuZ2UsXG4gICAgICAgICAgICBjdXJyZW50VGFyZ2V0OiBjdXJyZW50VGFyZ2V0LFxuICAgICAgICAgICAgYXR0ck5hbWU6IGF0dHJOYW1lLFxuICAgICAgICAgICAgcHJldlZhbHVlOiBwcmV2VmFsdWUsXG4gICAgICAgICAgICBuZXdWYWx1ZTogbmV3VmFsdWVcbiAgICAgICAgICB9O1xuICAgICAgICAgIGVbYWN0aW9uXSA9IGF0dHJDaGFuZ2U7XG4gICAgICAgICAgb25ET01BdHRyTW9kaWZpZWQoZSk7XG4gICAgICAgIH07XG4gICAgICAgIGdldEF0dHJpYnV0ZXNNaXJyb3IgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgIGZvciAodmFyXG4gICAgICAgICAgICBhdHRyLCBuYW1lLFxuICAgICAgICAgICAgcmVzdWx0ID0ge30sXG4gICAgICAgICAgICBhdHRyaWJ1dGVzID0gbm9kZS5hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgaSA9IDAsIGxlbmd0aCA9IGF0dHJpYnV0ZXMubGVuZ3RoO1xuICAgICAgICAgICAgaSA8IGxlbmd0aDsgaSsrXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBhdHRyID0gYXR0cmlidXRlc1tpXTtcbiAgICAgICAgICAgIG5hbWUgPSBhdHRyLm5hbWU7XG4gICAgICAgICAgICBpZiAobmFtZSAhPT0gJ3NldEF0dHJpYnV0ZScpIHtcbiAgICAgICAgICAgICAgcmVzdWx0W25hbWVdID0gYXR0ci52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gIFxuICAgIC8vIHNldCBhcyBlbnVtZXJhYmxlLCB3cml0YWJsZSBhbmQgY29uZmlndXJhYmxlXG4gICAgZG9jdW1lbnRbUkVHSVNURVJfRUxFTUVOVF0gPSBmdW5jdGlvbiByZWdpc3RlckVsZW1lbnQodHlwZSwgb3B0aW9ucykge1xuICAgICAgdXBwZXJUeXBlID0gdHlwZS50b1VwcGVyQ2FzZSgpO1xuICAgICAgaWYgKHNldExpc3RlbmVyKSB7XG4gICAgICAgIC8vIG9ubHkgZmlyc3QgdGltZSBkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQgaXMgdXNlZFxuICAgICAgICAvLyB3ZSBuZWVkIHRvIHNldCB0aGlzIGxpc3RlbmVyXG4gICAgICAgIC8vIHNldHRpbmcgaXQgYnkgZGVmYXVsdCBtaWdodCBzbG93IGRvd24gZm9yIG5vIHJlYXNvblxuICAgICAgICBzZXRMaXN0ZW5lciA9IGZhbHNlO1xuICAgICAgICBpZiAoTXV0YXRpb25PYnNlcnZlcikge1xuICAgICAgICAgIG9ic2VydmVyID0gKGZ1bmN0aW9uKGF0dGFjaGVkLCBkZXRhY2hlZCl7XG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja0VtQWxsKGxpc3QsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBsaXN0Lmxlbmd0aDsgaSA8IGxlbmd0aDsgY2FsbGJhY2sobGlzdFtpKytdKSl7fVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uIChyZWNvcmRzKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyXG4gICAgICAgICAgICAgICAgY3VycmVudCwgbm9kZSwgbmV3VmFsdWUsXG4gICAgICAgICAgICAgICAgaSA9IDAsIGxlbmd0aCA9IHJlY29yZHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKytcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IHJlY29yZHNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQudHlwZSA9PT0gJ2NoaWxkTGlzdCcpIHtcbiAgICAgICAgICAgICAgICAgIGNoZWNrRW1BbGwoY3VycmVudC5hZGRlZE5vZGVzLCBhdHRhY2hlZCk7XG4gICAgICAgICAgICAgICAgICBjaGVja0VtQWxsKGN1cnJlbnQucmVtb3ZlZE5vZGVzLCBkZXRhY2hlZCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG5vZGUgPSBjdXJyZW50LnRhcmdldDtcbiAgICAgICAgICAgICAgICAgIGlmIChub3RGcm9tSW5uZXJIVE1MSGVscGVyICYmXG4gICAgICAgICAgICAgICAgICAgICAgbm9kZVtBVFRSSUJVVEVfQ0hBTkdFRF9DQUxMQkFDS10gJiZcbiAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50LmF0dHJpYnV0ZU5hbWUgIT09ICdzdHlsZScpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgPSBnZXRBdHRyaWJ1dGUuY2FsbChub2RlLCBjdXJyZW50LmF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3VmFsdWUgIT09IGN1cnJlbnQub2xkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICBub2RlW0FUVFJJQlVURV9DSEFOR0VEX0NBTExCQUNLXShcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQuYXR0cmlidXRlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQub2xkVmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0oZXhlY3V0ZUFjdGlvbihBVFRBQ0hFRCksIGV4ZWN1dGVBY3Rpb24oREVUQUNIRUQpKSk7XG4gICAgICAgICAgb2JzZXJ2ZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKFxuICAgICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgICAgICAgICAgIHN1YnRyZWU6IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgIH07XG4gICAgICAgICAgb2JzZXJ2ZShkb2N1bWVudCk7XG4gICAgICAgICAgaWYgKGF0dGFjaFNoYWRvdykge1xuICAgICAgICAgICAgSFRNTEVsZW1lbnRQcm90b3R5cGUuYXR0YWNoU2hhZG93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZShhdHRhY2hTaGFkb3cuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhc2FwUXVldWUgPSBbXTtcbiAgICAgICAgICBkb2N1bWVudFtBRERfRVZFTlRfTElTVEVORVJdKCdET01Ob2RlSW5zZXJ0ZWQnLCBvbkRPTU5vZGUoQVRUQUNIRUQpKTtcbiAgICAgICAgICBkb2N1bWVudFtBRERfRVZFTlRfTElTVEVORVJdKCdET01Ob2RlUmVtb3ZlZCcsIG9uRE9NTm9kZShERVRBQ0hFRCkpO1xuICAgICAgICB9XG4gIFxuICAgICAgICBkb2N1bWVudFtBRERfRVZFTlRfTElTVEVORVJdKERPTV9DT05URU5UX0xPQURFRCwgb25SZWFkeVN0YXRlQ2hhbmdlKTtcbiAgICAgICAgZG9jdW1lbnRbQUREX0VWRU5UX0xJU1RFTkVSXSgncmVhZHlzdGF0ZWNoYW5nZScsIG9uUmVhZHlTdGF0ZUNoYW5nZSk7XG4gIFxuICAgICAgICBIVE1MRWxlbWVudFByb3RvdHlwZS5jbG9uZU5vZGUgPSBmdW5jdGlvbiAoZGVlcCkge1xuICAgICAgICAgIHZhclxuICAgICAgICAgICAgbm9kZSA9IGNsb25lTm9kZS5jYWxsKHRoaXMsICEhZGVlcCksXG4gICAgICAgICAgICBpID0gZ2V0VHlwZUluZGV4KG5vZGUpXG4gICAgICAgICAgO1xuICAgICAgICAgIGlmICgtMSA8IGkpIHBhdGNoKG5vZGUsIHByb3Rvc1tpXSk7XG4gICAgICAgICAgaWYgKGRlZXAgJiYgcXVlcnkubGVuZ3RoKSBsb29wQW5kU2V0dXAobm9kZS5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJ5KSk7XG4gICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICB9XG4gIFxuICAgICAgaWYgKGp1c3RTZXR1cCkgcmV0dXJuIChqdXN0U2V0dXAgPSBmYWxzZSk7XG4gIFxuICAgICAgaWYgKC0yIDwgKFxuICAgICAgICBpbmRleE9mLmNhbGwodHlwZXMsIFBSRUZJWF9JUyArIHVwcGVyVHlwZSkgK1xuICAgICAgICBpbmRleE9mLmNhbGwodHlwZXMsIFBSRUZJWF9UQUcgKyB1cHBlclR5cGUpXG4gICAgICApKSB7XG4gICAgICAgIHRocm93VHlwZUVycm9yKHR5cGUpO1xuICAgICAgfVxuICBcbiAgICAgIGlmICghdmFsaWROYW1lLnRlc3QodXBwZXJUeXBlKSB8fCAtMSA8IGluZGV4T2YuY2FsbChpbnZhbGlkTmFtZXMsIHVwcGVyVHlwZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgdHlwZSAnICsgdHlwZSArICcgaXMgaW52YWxpZCcpO1xuICAgICAgfVxuICBcbiAgICAgIHZhclxuICAgICAgICBjb25zdHJ1Y3RvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gZXh0ZW5kaW5nID9cbiAgICAgICAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobm9kZU5hbWUsIHVwcGVyVHlwZSkgOlxuICAgICAgICAgICAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudChub2RlTmFtZSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9wdCA9IG9wdGlvbnMgfHwgT1AsXG4gICAgICAgIGV4dGVuZGluZyA9IGhPUC5jYWxsKG9wdCwgRVhURU5EUyksXG4gICAgICAgIG5vZGVOYW1lID0gZXh0ZW5kaW5nID8gb3B0aW9uc1tFWFRFTkRTXS50b1VwcGVyQ2FzZSgpIDogdXBwZXJUeXBlLFxuICAgICAgICB1cHBlclR5cGUsXG4gICAgICAgIGlcbiAgICAgIDtcbiAgXG4gICAgICBpZiAoZXh0ZW5kaW5nICYmIC0xIDwgKFxuICAgICAgICBpbmRleE9mLmNhbGwodHlwZXMsIFBSRUZJWF9UQUcgKyBub2RlTmFtZSlcbiAgICAgICkpIHtcbiAgICAgICAgdGhyb3dUeXBlRXJyb3Iobm9kZU5hbWUpO1xuICAgICAgfVxuICBcbiAgICAgIGkgPSB0eXBlcy5wdXNoKChleHRlbmRpbmcgPyBQUkVGSVhfSVMgOiBQUkVGSVhfVEFHKSArIHVwcGVyVHlwZSkgLSAxO1xuICBcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuY29uY2F0KFxuICAgICAgICBxdWVyeS5sZW5ndGggPyAnLCcgOiAnJyxcbiAgICAgICAgZXh0ZW5kaW5nID8gbm9kZU5hbWUgKyAnW2lzPVwiJyArIHR5cGUudG9Mb3dlckNhc2UoKSArICdcIl0nIDogbm9kZU5hbWVcbiAgICAgICk7XG4gIFxuICAgICAgY29uc3RydWN0b3IucHJvdG90eXBlID0gKFxuICAgICAgICBwcm90b3NbaV0gPSBoT1AuY2FsbChvcHQsICdwcm90b3R5cGUnKSA/XG4gICAgICAgICAgb3B0LnByb3RvdHlwZSA6XG4gICAgICAgICAgY3JlYXRlKEhUTUxFbGVtZW50UHJvdG90eXBlKVxuICAgICAgKTtcbiAgXG4gICAgICBpZiAocXVlcnkubGVuZ3RoKSBsb29wQW5kVmVyaWZ5KFxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJ5KSxcbiAgICAgICAgQVRUQUNIRURcbiAgICAgICk7XG4gIFxuICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yO1xuICAgIH07XG4gIFxuICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgPSAocGF0Y2hlZENyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAobG9jYWxOYW1lLCB0eXBlRXh0ZW5zaW9uKSB7XG4gICAgICB2YXJcbiAgICAgICAgaXMgPSBnZXRJcyh0eXBlRXh0ZW5zaW9uKSxcbiAgICAgICAgbm9kZSA9IGlzID9cbiAgICAgICAgICBjcmVhdGVFbGVtZW50LmNhbGwoZG9jdW1lbnQsIGxvY2FsTmFtZSwgc2Vjb25kQXJndW1lbnQoaXMpKSA6XG4gICAgICAgICAgY3JlYXRlRWxlbWVudC5jYWxsKGRvY3VtZW50LCBsb2NhbE5hbWUpLFxuICAgICAgICBuYW1lID0gJycgKyBsb2NhbE5hbWUsXG4gICAgICAgIGkgPSBpbmRleE9mLmNhbGwoXG4gICAgICAgICAgdHlwZXMsXG4gICAgICAgICAgKGlzID8gUFJFRklYX0lTIDogUFJFRklYX1RBRykgK1xuICAgICAgICAgIChpcyB8fCBuYW1lKS50b1VwcGVyQ2FzZSgpXG4gICAgICAgICksXG4gICAgICAgIHNldHVwID0gLTEgPCBpXG4gICAgICA7XG4gICAgICBpZiAoaXMpIHtcbiAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2lzJywgaXMgPSBpcy50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgaWYgKHNldHVwKSB7XG4gICAgICAgICAgc2V0dXAgPSBpc0luUVNBKG5hbWUudG9VcHBlckNhc2UoKSwgaXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBub3RGcm9tSW5uZXJIVE1MSGVscGVyID0gIWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQuaW5uZXJIVE1MSGVscGVyO1xuICAgICAgaWYgKHNldHVwKSBwYXRjaChub2RlLCBwcm90b3NbaV0pO1xuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfSk7XG4gIFxuICB9XG4gIFxuICBmdW5jdGlvbiBBU0FQKCkge1xuICAgIHZhciBxdWV1ZSA9IGFzYXBRdWV1ZS5zcGxpY2UoMCwgYXNhcFF1ZXVlLmxlbmd0aCk7XG4gICAgYXNhcFRpbWVyID0gMDtcbiAgICB3aGlsZSAocXVldWUubGVuZ3RoKSB7XG4gICAgICBxdWV1ZS5zaGlmdCgpLmNhbGwoXG4gICAgICAgIG51bGwsIHF1ZXVlLnNoaWZ0KClcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIFxuICBmdW5jdGlvbiBsb29wQW5kVmVyaWZ5KGxpc3QsIGFjdGlvbikge1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBsaXN0Lmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2ZXJpZnlBbmRTZXR1cEFuZEFjdGlvbihsaXN0W2ldLCBhY3Rpb24pO1xuICAgIH1cbiAgfVxuICBcbiAgZnVuY3Rpb24gbG9vcEFuZFNldHVwKGxpc3QpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gbGlzdC5sZW5ndGgsIG5vZGU7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgbm9kZSA9IGxpc3RbaV07XG4gICAgICBwYXRjaChub2RlLCBwcm90b3NbZ2V0VHlwZUluZGV4KG5vZGUpXSk7XG4gICAgfVxuICB9XG4gIFxuICBmdW5jdGlvbiBleGVjdXRlQWN0aW9uKGFjdGlvbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgaWYgKGlzVmFsaWROb2RlKG5vZGUpKSB7XG4gICAgICAgIHZlcmlmeUFuZFNldHVwQW5kQWN0aW9uKG5vZGUsIGFjdGlvbik7XG4gICAgICAgIGlmIChxdWVyeS5sZW5ndGgpIGxvb3BBbmRWZXJpZnkoXG4gICAgICAgICAgbm9kZS5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJ5KSxcbiAgICAgICAgICBhY3Rpb25cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIFxuICBmdW5jdGlvbiBnZXRUeXBlSW5kZXgodGFyZ2V0KSB7XG4gICAgdmFyXG4gICAgICBpcyA9IGdldEF0dHJpYnV0ZS5jYWxsKHRhcmdldCwgJ2lzJyksXG4gICAgICBub2RlTmFtZSA9IHRhcmdldC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpLFxuICAgICAgaSA9IGluZGV4T2YuY2FsbChcbiAgICAgICAgdHlwZXMsXG4gICAgICAgIGlzID9cbiAgICAgICAgICAgIFBSRUZJWF9JUyArIGlzLnRvVXBwZXJDYXNlKCkgOlxuICAgICAgICAgICAgUFJFRklYX1RBRyArIG5vZGVOYW1lXG4gICAgICApXG4gICAgO1xuICAgIHJldHVybiBpcyAmJiAtMSA8IGkgJiYgIWlzSW5RU0Eobm9kZU5hbWUsIGlzKSA/IC0xIDogaTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gaXNJblFTQShuYW1lLCB0eXBlKSB7XG4gICAgcmV0dXJuIC0xIDwgcXVlcnkuaW5kZXhPZihuYW1lICsgJ1tpcz1cIicgKyB0eXBlICsgJ1wiXScpO1xuICB9XG4gIFxuICBmdW5jdGlvbiBvbkRPTUF0dHJNb2RpZmllZChlKSB7XG4gICAgdmFyXG4gICAgICBub2RlID0gZS5jdXJyZW50VGFyZ2V0LFxuICAgICAgYXR0ckNoYW5nZSA9IGUuYXR0ckNoYW5nZSxcbiAgICAgIGF0dHJOYW1lID0gZS5hdHRyTmFtZSxcbiAgICAgIHRhcmdldCA9IGUudGFyZ2V0LFxuICAgICAgYWRkaXRpb24gPSBlW0FERElUSU9OXSB8fCAyLFxuICAgICAgcmVtb3ZhbCA9IGVbUkVNT1ZBTF0gfHwgM1xuICAgIDtcbiAgICBpZiAobm90RnJvbUlubmVySFRNTEhlbHBlciAmJlxuICAgICAgICAoIXRhcmdldCB8fCB0YXJnZXQgPT09IG5vZGUpICYmXG4gICAgICAgIG5vZGVbQVRUUklCVVRFX0NIQU5HRURfQ0FMTEJBQ0tdICYmXG4gICAgICAgIGF0dHJOYW1lICE9PSAnc3R5bGUnICYmIChcbiAgICAgICAgICBlLnByZXZWYWx1ZSAhPT0gZS5uZXdWYWx1ZSB8fFxuICAgICAgICAgIC8vIElFOSwgSUUxMCwgYW5kIE9wZXJhIDEyIGdvdGNoYVxuICAgICAgICAgIGUubmV3VmFsdWUgPT09ICcnICYmIChcbiAgICAgICAgICAgIGF0dHJDaGFuZ2UgPT09IGFkZGl0aW9uIHx8XG4gICAgICAgICAgICBhdHRyQ2hhbmdlID09PSByZW1vdmFsXG4gICAgICAgICAgKVxuICAgICkpIHtcbiAgICAgIG5vZGVbQVRUUklCVVRFX0NIQU5HRURfQ0FMTEJBQ0tdKFxuICAgICAgICBhdHRyTmFtZSxcbiAgICAgICAgYXR0ckNoYW5nZSA9PT0gYWRkaXRpb24gPyBudWxsIDogZS5wcmV2VmFsdWUsXG4gICAgICAgIGF0dHJDaGFuZ2UgPT09IHJlbW92YWwgPyBudWxsIDogZS5uZXdWYWx1ZVxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIG9uRE9NTm9kZShhY3Rpb24pIHtcbiAgICB2YXIgZXhlY3V0b3IgPSBleGVjdXRlQWN0aW9uKGFjdGlvbik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XG4gICAgICBhc2FwUXVldWUucHVzaChleGVjdXRvciwgZS50YXJnZXQpO1xuICAgICAgaWYgKGFzYXBUaW1lcikgY2xlYXJUaW1lb3V0KGFzYXBUaW1lcik7XG4gICAgICBhc2FwVGltZXIgPSBzZXRUaW1lb3V0KEFTQVAsIDEpO1xuICAgIH07XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIG9uUmVhZHlTdGF0ZUNoYW5nZShlKSB7XG4gICAgaWYgKGRyb3BEb21Db250ZW50TG9hZGVkKSB7XG4gICAgICBkcm9wRG9tQ29udGVudExvYWRlZCA9IGZhbHNlO1xuICAgICAgZS5jdXJyZW50VGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoRE9NX0NPTlRFTlRfTE9BREVELCBvblJlYWR5U3RhdGVDaGFuZ2UpO1xuICAgIH1cbiAgICBpZiAocXVlcnkubGVuZ3RoKSBsb29wQW5kVmVyaWZ5KFxuICAgICAgKGUudGFyZ2V0IHx8IGRvY3VtZW50KS5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJ5KSxcbiAgICAgIGUuZGV0YWlsID09PSBERVRBQ0hFRCA/IERFVEFDSEVEIDogQVRUQUNIRURcbiAgICApO1xuICAgIGlmIChJRTgpIHB1cmdlKCk7XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIHBhdGNoZWRTZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpIHtcbiAgICAvLyBqc2hpbnQgdmFsaWR0aGlzOnRydWVcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2V0QXR0cmlidXRlLmNhbGwoc2VsZiwgbmFtZSwgdmFsdWUpO1xuICAgIG9uU3VidHJlZU1vZGlmaWVkLmNhbGwoc2VsZiwge3RhcmdldDogc2VsZn0pO1xuICB9XG4gIFxuICBmdW5jdGlvbiBzZXR1cE5vZGUobm9kZSwgcHJvdG8pIHtcbiAgICBzZXRQcm90b3R5cGUobm9kZSwgcHJvdG8pO1xuICAgIGlmIChvYnNlcnZlcikge1xuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShub2RlLCBhdHRyaWJ1dGVzT2JzZXJ2ZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZG9lc05vdFN1cHBvcnRET01BdHRyTW9kaWZpZWQpIHtcbiAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUgPSBwYXRjaGVkU2V0QXR0cmlidXRlO1xuICAgICAgICBub2RlW0VYUEFORE9fVUlEXSA9IGdldEF0dHJpYnV0ZXNNaXJyb3Iobm9kZSk7XG4gICAgICAgIG5vZGVbQUREX0VWRU5UX0xJU1RFTkVSXShET01fU1VCVFJFRV9NT0RJRklFRCwgb25TdWJ0cmVlTW9kaWZpZWQpO1xuICAgICAgfVxuICAgICAgbm9kZVtBRERfRVZFTlRfTElTVEVORVJdKERPTV9BVFRSX01PRElGSUVELCBvbkRPTUF0dHJNb2RpZmllZCk7XG4gICAgfVxuICAgIGlmIChub2RlW0NSRUFURURfQ0FMTEJBQ0tdICYmIG5vdEZyb21Jbm5lckhUTUxIZWxwZXIpIHtcbiAgICAgIG5vZGUuY3JlYXRlZCA9IHRydWU7XG4gICAgICBub2RlW0NSRUFURURfQ0FMTEJBQ0tdKCk7XG4gICAgICBub2RlLmNyZWF0ZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIHB1cmdlKCkge1xuICAgIGZvciAodmFyXG4gICAgICBub2RlLFxuICAgICAgaSA9IDAsXG4gICAgICBsZW5ndGggPSB0YXJnZXRzLmxlbmd0aDtcbiAgICAgIGkgPCBsZW5ndGg7IGkrK1xuICAgICkge1xuICAgICAgbm9kZSA9IHRhcmdldHNbaV07XG4gICAgICBpZiAoIWRvY3VtZW50RWxlbWVudC5jb250YWlucyhub2RlKSkge1xuICAgICAgICBsZW5ndGgtLTtcbiAgICAgICAgdGFyZ2V0cy5zcGxpY2UoaS0tLCAxKTtcbiAgICAgICAgdmVyaWZ5QW5kU2V0dXBBbmRBY3Rpb24obm9kZSwgREVUQUNIRUQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgZnVuY3Rpb24gdGhyb3dUeXBlRXJyb3IodHlwZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignQSAnICsgdHlwZSArICcgdHlwZSBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQnKTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gdmVyaWZ5QW5kU2V0dXBBbmRBY3Rpb24obm9kZSwgYWN0aW9uKSB7XG4gICAgdmFyXG4gICAgICBmbixcbiAgICAgIGkgPSBnZXRUeXBlSW5kZXgobm9kZSlcbiAgICA7XG4gICAgaWYgKC0xIDwgaSkge1xuICAgICAgcGF0Y2hJZk5vdEFscmVhZHkobm9kZSwgcHJvdG9zW2ldKTtcbiAgICAgIGkgPSAwO1xuICAgICAgaWYgKGFjdGlvbiA9PT0gQVRUQUNIRUQgJiYgIW5vZGVbQVRUQUNIRURdKSB7XG4gICAgICAgIG5vZGVbREVUQUNIRURdID0gZmFsc2U7XG4gICAgICAgIG5vZGVbQVRUQUNIRURdID0gdHJ1ZTtcbiAgICAgICAgaSA9IDE7XG4gICAgICAgIGlmIChJRTggJiYgaW5kZXhPZi5jYWxsKHRhcmdldHMsIG5vZGUpIDwgMCkge1xuICAgICAgICAgIHRhcmdldHMucHVzaChub2RlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IERFVEFDSEVEICYmICFub2RlW0RFVEFDSEVEXSkge1xuICAgICAgICBub2RlW0FUVEFDSEVEXSA9IGZhbHNlO1xuICAgICAgICBub2RlW0RFVEFDSEVEXSA9IHRydWU7XG4gICAgICAgIGkgPSAxO1xuICAgICAgfVxuICAgICAgaWYgKGkgJiYgKGZuID0gbm9kZVthY3Rpb24gKyBDQUxMQkFDS10pKSBmbi5jYWxsKG5vZGUpO1xuICAgIH1cbiAgfVxuICBcbiAgXG4gIFxuICAvLyBWMSBpbiBkYSBIb3VzZSFcbiAgZnVuY3Rpb24gQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5KCkge31cbiAgXG4gIEN1c3RvbUVsZW1lbnRSZWdpc3RyeS5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IEN1c3RvbUVsZW1lbnRSZWdpc3RyeSxcbiAgICAvLyBhIHdvcmthcm91bmQgZm9yIHRoZSBzdHViYm9ybiBXZWJLaXRcbiAgICBkZWZpbmU6IHVzYWJsZUN1c3RvbUVsZW1lbnRzID9cbiAgICAgIGZ1bmN0aW9uIChuYW1lLCBDbGFzcywgb3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucykge1xuICAgICAgICAgIENFUkRlZmluZShuYW1lLCBDbGFzcywgb3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIE5BTUUgPSBuYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgY29uc3RydWN0b3JzW05BTUVdID0ge1xuICAgICAgICAgICAgY29uc3RydWN0b3I6IENsYXNzLFxuICAgICAgICAgICAgY3JlYXRlOiBbTkFNRV1cbiAgICAgICAgICB9O1xuICAgICAgICAgIG5vZGVOYW1lcy5zZXQoQ2xhc3MsIE5BTUUpO1xuICAgICAgICAgIGN1c3RvbUVsZW1lbnRzLmRlZmluZShuYW1lLCBDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgIH0gOlxuICAgICAgQ0VSRGVmaW5lLFxuICAgIGdldDogdXNhYmxlQ3VzdG9tRWxlbWVudHMgP1xuICAgICAgZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGN1c3RvbUVsZW1lbnRzLmdldChuYW1lKSB8fCBnZXQobmFtZSk7XG4gICAgICB9IDpcbiAgICAgIGdldCxcbiAgICB3aGVuRGVmaW5lZDogdXNhYmxlQ3VzdG9tRWxlbWVudHMgP1xuICAgICAgZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmFjZShbXG4gICAgICAgICAgY3VzdG9tRWxlbWVudHMud2hlbkRlZmluZWQobmFtZSksXG4gICAgICAgICAgd2hlbkRlZmluZWQobmFtZSlcbiAgICAgICAgXSk7XG4gICAgICB9IDpcbiAgICAgIHdoZW5EZWZpbmVkXG4gIH07XG4gIFxuICBmdW5jdGlvbiBDRVJEZWZpbmUobmFtZSwgQ2xhc3MsIG9wdGlvbnMpIHtcbiAgICB2YXJcbiAgICAgIGlzID0gb3B0aW9ucyAmJiBvcHRpb25zW0VYVEVORFNdIHx8ICcnLFxuICAgICAgQ1Byb3RvID0gQ2xhc3MucHJvdG90eXBlLFxuICAgICAgcHJvdG8gPSBjcmVhdGUoQ1Byb3RvKSxcbiAgICAgIGF0dHJpYnV0ZXMgPSBDbGFzcy5vYnNlcnZlZEF0dHJpYnV0ZXMgfHwgZW1wdHksXG4gICAgICBkZWZpbml0aW9uID0ge3Byb3RvdHlwZTogcHJvdG99XG4gICAgO1xuICAgIC8vIFRPRE86IGlzIHRoaXMgbmVlZGVkIGF0IGFsbCBzaW5jZSBpdCdzIGluaGVyaXRlZD9cbiAgICAvLyBkZWZpbmVQcm9wZXJ0eShwcm90bywgJ2NvbnN0cnVjdG9yJywge3ZhbHVlOiBDbGFzc30pO1xuICAgIHNhZmVQcm9wZXJ0eShwcm90bywgQ1JFQVRFRF9DQUxMQkFDSywge1xuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChqdXN0Q3JlYXRlZCkganVzdENyZWF0ZWQgPSBmYWxzZTtcbiAgICAgICAgICBlbHNlIGlmICghdGhpc1tEUkVDRVYxXSkge1xuICAgICAgICAgICAgdGhpc1tEUkVDRVYxXSA9IHRydWU7XG4gICAgICAgICAgICBuZXcgQ2xhc3ModGhpcyk7XG4gICAgICAgICAgICBpZiAoQ1Byb3RvW0NSRUFURURfQ0FMTEJBQ0tdKVxuICAgICAgICAgICAgICBDUHJvdG9bQ1JFQVRFRF9DQUxMQkFDS10uY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHZhciBpbmZvID0gY29uc3RydWN0b3JzW25vZGVOYW1lcy5nZXQoQ2xhc3MpXTtcbiAgICAgICAgICAgIGlmICghdXNhYmxlQ3VzdG9tRWxlbWVudHMgfHwgaW5mby5jcmVhdGUubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICBub3RpZnlBdHRyaWJ1dGVzKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBzYWZlUHJvcGVydHkocHJvdG8sIEFUVFJJQlVURV9DSEFOR0VEX0NBTExCQUNLLCB7XG4gICAgICB2YWx1ZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgaWYgKC0xIDwgaW5kZXhPZi5jYWxsKGF0dHJpYnV0ZXMsIG5hbWUpKVxuICAgICAgICAgIENQcm90b1tBVFRSSUJVVEVfQ0hBTkdFRF9DQUxMQkFDS10uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoQ1Byb3RvW0NPTk5FQ1RFRF9DQUxMQkFDS10pIHtcbiAgICAgIHNhZmVQcm9wZXJ0eShwcm90bywgQVRUQUNIRURfQ0FMTEJBQ0ssIHtcbiAgICAgICAgdmFsdWU6IENQcm90b1tDT05ORUNURURfQ0FMTEJBQ0tdXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKENQcm90b1tESVNDT05ORUNURURfQ0FMTEJBQ0tdKSB7XG4gICAgICBzYWZlUHJvcGVydHkocHJvdG8sIERFVEFDSEVEX0NBTExCQUNLLCB7XG4gICAgICAgIHZhbHVlOiBDUHJvdG9bRElTQ09OTkVDVEVEX0NBTExCQUNLXVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChpcykgZGVmaW5pdGlvbltFWFRFTkRTXSA9IGlzO1xuICAgIG5hbWUgPSBuYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgY29uc3RydWN0b3JzW25hbWVdID0ge1xuICAgICAgY29uc3RydWN0b3I6IENsYXNzLFxuICAgICAgY3JlYXRlOiBpcyA/IFtpcywgc2Vjb25kQXJndW1lbnQobmFtZSldIDogW25hbWVdXG4gICAgfTtcbiAgICBub2RlTmFtZXMuc2V0KENsYXNzLCBuYW1lKTtcbiAgICBkb2N1bWVudFtSRUdJU1RFUl9FTEVNRU5UXShuYW1lLnRvTG93ZXJDYXNlKCksIGRlZmluaXRpb24pO1xuICAgIHdoZW5EZWZpbmVkKG5hbWUpO1xuICAgIHdhaXRpbmdMaXN0W25hbWVdLnIoKTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gZ2V0KG5hbWUpIHtcbiAgICB2YXIgaW5mbyA9IGNvbnN0cnVjdG9yc1tuYW1lLnRvVXBwZXJDYXNlKCldO1xuICAgIHJldHVybiBpbmZvICYmIGluZm8uY29uc3RydWN0b3I7XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIGdldElzKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnID9cbiAgICAgICAgb3B0aW9ucyA6IChvcHRpb25zICYmIG9wdGlvbnMuaXMgfHwgJycpO1xuICB9XG4gIFxuICBmdW5jdGlvbiBub3RpZnlBdHRyaWJ1dGVzKHNlbGYpIHtcbiAgICB2YXJcbiAgICAgIGNhbGxiYWNrID0gc2VsZltBVFRSSUJVVEVfQ0hBTkdFRF9DQUxMQkFDS10sXG4gICAgICBhdHRyaWJ1dGVzID0gY2FsbGJhY2sgPyBzZWxmLmF0dHJpYnV0ZXMgOiBlbXB0eSxcbiAgICAgIGkgPSBhdHRyaWJ1dGVzLmxlbmd0aCxcbiAgICAgIGF0dHJpYnV0ZVxuICAgIDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBhdHRyaWJ1dGUgPSAgYXR0cmlidXRlc1tpXTsgLy8gfHwgYXR0cmlidXRlcy5pdGVtKGkpO1xuICAgICAgY2FsbGJhY2suY2FsbChcbiAgICAgICAgc2VsZixcbiAgICAgICAgYXR0cmlidXRlLm5hbWUgfHwgYXR0cmlidXRlLm5vZGVOYW1lLFxuICAgICAgICBudWxsLFxuICAgICAgICBhdHRyaWJ1dGUudmFsdWUgfHwgYXR0cmlidXRlLm5vZGVWYWx1ZVxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIHdoZW5EZWZpbmVkKG5hbWUpIHtcbiAgICBuYW1lID0gbmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgIGlmICghKG5hbWUgaW4gd2FpdGluZ0xpc3QpKSB7XG4gICAgICB3YWl0aW5nTGlzdFtuYW1lXSA9IHt9O1xuICAgICAgd2FpdGluZ0xpc3RbbmFtZV0ucCA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgIHdhaXRpbmdMaXN0W25hbWVdLnIgPSByZXNvbHZlO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB3YWl0aW5nTGlzdFtuYW1lXS5wO1xuICB9XG4gIFxuICBmdW5jdGlvbiBwb2x5ZmlsbFYxKCkge1xuICAgIGlmIChjdXN0b21FbGVtZW50cykgZGVsZXRlIHdpbmRvdy5jdXN0b21FbGVtZW50cztcbiAgICBkZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdjdXN0b21FbGVtZW50cycsIHtcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBuZXcgQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5KClcbiAgICB9KTtcbiAgICBkZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdDdXN0b21FbGVtZW50UmVnaXN0cnknLCB7XG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5XG4gICAgfSk7XG4gICAgZm9yICh2YXJcbiAgICAgIHBhdGNoQ2xhc3MgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgQ2xhc3MgPSB3aW5kb3dbbmFtZV07XG4gICAgICAgIGlmIChDbGFzcykge1xuICAgICAgICAgIHdpbmRvd1tuYW1lXSA9IGZ1bmN0aW9uIEN1c3RvbUVsZW1lbnRzVjEoc2VsZikge1xuICAgICAgICAgICAgdmFyIGluZm8sIGlzTmF0aXZlO1xuICAgICAgICAgICAgaWYgKCFzZWxmKSBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIGlmICghc2VsZltEUkVDRVYxXSkge1xuICAgICAgICAgICAgICBqdXN0Q3JlYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgIGluZm8gPSBjb25zdHJ1Y3RvcnNbbm9kZU5hbWVzLmdldChzZWxmLmNvbnN0cnVjdG9yKV07XG4gICAgICAgICAgICAgIGlzTmF0aXZlID0gdXNhYmxlQ3VzdG9tRWxlbWVudHMgJiYgaW5mby5jcmVhdGUubGVuZ3RoID09PSAxO1xuICAgICAgICAgICAgICBzZWxmID0gaXNOYXRpdmUgP1xuICAgICAgICAgICAgICAgIFJlZmxlY3QuY29uc3RydWN0KENsYXNzLCBlbXB0eSwgaW5mby5jb25zdHJ1Y3RvcikgOlxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQuYXBwbHkoZG9jdW1lbnQsIGluZm8uY3JlYXRlKTtcbiAgICAgICAgICAgICAgc2VsZltEUkVDRVYxXSA9IHRydWU7XG4gICAgICAgICAgICAgIGp1c3RDcmVhdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgIGlmICghaXNOYXRpdmUpIG5vdGlmeUF0dHJpYnV0ZXMoc2VsZik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgICB9O1xuICAgICAgICAgIHdpbmRvd1tuYW1lXS5wcm90b3R5cGUgPSBDbGFzcy5wcm90b3R5cGU7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIENsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHdpbmRvd1tuYW1lXTtcbiAgICAgICAgICB9IGNhdGNoKFdlYktpdCkge1xuICAgICAgICAgICAgZml4R2V0Q2xhc3MgPSB0cnVlO1xuICAgICAgICAgICAgZGVmaW5lUHJvcGVydHkoQ2xhc3MsIERSRUNFVjEsIHt2YWx1ZTogd2luZG93W25hbWVdfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgQ2xhc3NlcyA9IGh0bWxDbGFzcy5nZXQoL15IVE1MW0EtWl0qW2Etel0vKSxcbiAgICAgIGkgPSBDbGFzc2VzLmxlbmd0aDtcbiAgICAgIGktLTtcbiAgICAgIHBhdGNoQ2xhc3MoQ2xhc3Nlc1tpXSlcbiAgICApIHt9XG4gICAgKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAobmFtZSwgb3B0aW9ucykge1xuICAgICAgdmFyIGlzID0gZ2V0SXMob3B0aW9ucyk7XG4gICAgICByZXR1cm4gaXMgP1xuICAgICAgICBwYXRjaGVkQ3JlYXRlRWxlbWVudC5jYWxsKHRoaXMsIG5hbWUsIHNlY29uZEFyZ3VtZW50KGlzKSkgOlxuICAgICAgICBwYXRjaGVkQ3JlYXRlRWxlbWVudC5jYWxsKHRoaXMsIG5hbWUpO1xuICAgIH0pO1xuICAgIGlmICghVjApIHtcbiAgICAgIGp1c3RTZXR1cCA9IHRydWU7XG4gICAgICBkb2N1bWVudFtSRUdJU1RFUl9FTEVNRU5UXSgnJyk7XG4gICAgfVxuICB9XG4gIFxuICAvLyBpZiBjdXN0b21FbGVtZW50cyBpcyBub3QgdGhlcmUgYXQgYWxsXG4gIGlmICghY3VzdG9tRWxlbWVudHMgfHwgcG9seWZpbGwgPT09ICdmb3JjZScpIHBvbHlmaWxsVjEoKTtcbiAgZWxzZSB7XG4gICAgLy8gaWYgYXZhaWxhYmxlIHRlc3QgZXh0ZW5kcyB3b3JrIGFzIGV4cGVjdGVkXG4gICAgdHJ5IHtcbiAgICAgIChmdW5jdGlvbiAoRFJFLCBvcHRpb25zLCBuYW1lKSB7XG4gICAgICAgIG9wdGlvbnNbRVhURU5EU10gPSAnYSc7XG4gICAgICAgIERSRS5wcm90b3R5cGUgPSBjcmVhdGUoSFRNTEFuY2hvckVsZW1lbnQucHJvdG90eXBlKTtcbiAgICAgICAgRFJFLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IERSRTtcbiAgICAgICAgd2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZShuYW1lLCBEUkUsIG9wdGlvbnMpO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZ2V0QXR0cmlidXRlLmNhbGwoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScsIHtpczogbmFtZX0pLCAnaXMnKSAhPT0gbmFtZSB8fFxuICAgICAgICAgICh1c2FibGVDdXN0b21FbGVtZW50cyAmJiBnZXRBdHRyaWJ1dGUuY2FsbChuZXcgRFJFKCksICdpcycpICE9PSBuYW1lKVxuICAgICAgICApIHtcbiAgICAgICAgICB0aHJvdyBvcHRpb25zO1xuICAgICAgICB9XG4gICAgICB9KFxuICAgICAgICBmdW5jdGlvbiBEUkUoKSB7XG4gICAgICAgICAgcmV0dXJuIFJlZmxlY3QuY29uc3RydWN0KEhUTUxBbmNob3JFbGVtZW50LCBbXSwgRFJFKTtcbiAgICAgICAgfSxcbiAgICAgICAge30sXG4gICAgICAgICdkb2N1bWVudC1yZWdpc3Rlci1lbGVtZW50LWEnXG4gICAgICApKTtcbiAgICB9IGNhdGNoKG9fTykge1xuICAgICAgLy8gb3IgZm9yY2UgdGhlIHBvbHlmaWxsIGlmIG5vdFxuICAgICAgLy8gYW5kIGtlZXAgaW50ZXJuYWwgb3JpZ2luYWwgcmVmZXJlbmNlXG4gICAgICBwb2x5ZmlsbFYxKCk7XG4gICAgfVxuICB9XG4gIFxuICB0cnkge1xuICAgIGNyZWF0ZUVsZW1lbnQuY2FsbChkb2N1bWVudCwgJ2EnLCAnYScpO1xuICB9IGNhdGNoKEZpcmVGb3gpIHtcbiAgICBzZWNvbmRBcmd1bWVudCA9IGZ1bmN0aW9uIChpcykge1xuICAgICAgcmV0dXJuIHtpczogaXN9O1xuICAgIH07XG4gIH1cbiAgXG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW5zdGFsbEN1c3RvbUVsZW1lbnRzO1xuaW5zdGFsbEN1c3RvbUVsZW1lbnRzKGdsb2JhbCk7XG4iLCJ2YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJ2lzLWZ1bmN0aW9uJylcblxubW9kdWxlLmV4cG9ydHMgPSBmb3JFYWNoXG5cbnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmdcbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHlcblxuZnVuY3Rpb24gZm9yRWFjaChsaXN0LCBpdGVyYXRvciwgY29udGV4dCkge1xuICAgIGlmICghaXNGdW5jdGlvbihpdGVyYXRvcikpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaXRlcmF0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uJylcbiAgICB9XG5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgY29udGV4dCA9IHRoaXNcbiAgICB9XG4gICAgXG4gICAgaWYgKHRvU3RyaW5nLmNhbGwobGlzdCkgPT09ICdbb2JqZWN0IEFycmF5XScpXG4gICAgICAgIGZvckVhY2hBcnJheShsaXN0LCBpdGVyYXRvciwgY29udGV4dClcbiAgICBlbHNlIGlmICh0eXBlb2YgbGlzdCA9PT0gJ3N0cmluZycpXG4gICAgICAgIGZvckVhY2hTdHJpbmcobGlzdCwgaXRlcmF0b3IsIGNvbnRleHQpXG4gICAgZWxzZVxuICAgICAgICBmb3JFYWNoT2JqZWN0KGxpc3QsIGl0ZXJhdG9yLCBjb250ZXh0KVxufVxuXG5mdW5jdGlvbiBmb3JFYWNoQXJyYXkoYXJyYXksIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGFycmF5LCBpKSkge1xuICAgICAgICAgICAgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBhcnJheVtpXSwgaSwgYXJyYXkpXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZvckVhY2hTdHJpbmcoc3RyaW5nLCBpdGVyYXRvciwgY29udGV4dCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzdHJpbmcubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgLy8gbm8gc3VjaCB0aGluZyBhcyBhIHNwYXJzZSBzdHJpbmcuXG4gICAgICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgc3RyaW5nLmNoYXJBdChpKSwgaSwgc3RyaW5nKVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZm9yRWFjaE9iamVjdChvYmplY3QsIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gICAgZm9yICh2YXIgayBpbiBvYmplY3QpIHtcbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrKSkge1xuICAgICAgICAgICAgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmplY3Rba10sIGssIG9iamVjdClcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB3aW5kb3c7XG59IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbDtcbn0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIpe1xuICAgIG1vZHVsZS5leHBvcnRzID0gc2VsZjtcbn0gZWxzZSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7fTtcbn1cbiIsIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL2FycmF5L2Zyb21cIiksIF9fZXNNb2R1bGU6IHRydWUgfTsiLCJtb2R1bGUuZXhwb3J0cyA9IHsgXCJkZWZhdWx0XCI6IHJlcXVpcmUoXCJjb3JlLWpzL2xpYnJhcnkvZm4vZ2V0LWl0ZXJhdG9yXCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07IiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9hc3NpZ25cIiksIF9fZXNNb2R1bGU6IHRydWUgfTsiLCJtb2R1bGUuZXhwb3J0cyA9IHsgXCJkZWZhdWx0XCI6IHJlcXVpcmUoXCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eVwiKSwgX19lc01vZHVsZTogdHJ1ZSB9OyIsIm1vZHVsZS5leHBvcnRzID0geyBcImRlZmF1bHRcIjogcmVxdWlyZShcImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5c1wiKSwgX19lc01vZHVsZTogdHJ1ZSB9OyIsIm1vZHVsZS5leHBvcnRzID0geyBcImRlZmF1bHRcIjogcmVxdWlyZShcImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlXCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07IiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL3NldFwiKSwgX19lc01vZHVsZTogdHJ1ZSB9OyIsIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59O1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgX09iamVjdCRkZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoXCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2RlZmluZS1wcm9wZXJ0eVwiKVtcImRlZmF1bHRcIl07XG5cbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gKGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG5cbiAgICAgIF9PYmplY3QkZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICAgIGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDoge1xuICAgIFwiZGVmYXVsdFwiOiBvYmpcbiAgfTtcbn07XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfQXJyYXkkZnJvbSA9IHJlcXVpcmUoXCJiYWJlbC1ydW50aW1lL2NvcmUtanMvYXJyYXkvZnJvbVwiKVtcImRlZmF1bHRcIl07XG5cbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gZnVuY3Rpb24gKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgYXJyMltpXSA9IGFycltpXTtcblxuICAgIHJldHVybiBhcnIyO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBfQXJyYXkkZnJvbShhcnIpO1xuICB9XG59O1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvcicpO1xucmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lczYuYXJyYXkuZnJvbScpO1xubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLi8uLi9tb2R1bGVzLyQuY29yZScpLkFycmF5LmZyb207IiwicmVxdWlyZSgnLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlJyk7XG5yZXF1aXJlKCcuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3InKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi4vbW9kdWxlcy9jb3JlLmdldC1pdGVyYXRvcicpOyIsInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5hc3NpZ24nKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy8kLmNvcmUnKS5PYmplY3QuYXNzaWduOyIsInZhciAkID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy8kJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KGl0LCBrZXksIGRlc2Mpe1xuICByZXR1cm4gJC5zZXREZXNjKGl0LCBrZXksIGRlc2MpO1xufTsiLCJyZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cycpO1xubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLi8uLi9tb2R1bGVzLyQuY29yZScpLk9iamVjdC5rZXlzOyIsInJlcXVpcmUoJy4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmcnKTtcbnJlcXVpcmUoJy4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvcicpO1xucmVxdWlyZSgnLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlJyk7XG5yZXF1aXJlKCcuLi9tb2R1bGVzL2VzNi5wcm9taXNlJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uL21vZHVsZXMvJC5jb3JlJykuUHJvbWlzZTsiLCJyZXF1aXJlKCcuLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nJyk7XG5yZXF1aXJlKCcuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3InKTtcbnJlcXVpcmUoJy4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZScpO1xucmVxdWlyZSgnLi4vbW9kdWxlcy9lczYuc2V0Jyk7XG5yZXF1aXJlKCcuLi9tb2R1bGVzL2VzNy5zZXQudG8tanNvbicpO1xubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLi9tb2R1bGVzLyQuY29yZScpLlNldDsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgaWYodHlwZW9mIGl0ICE9ICdmdW5jdGlvbicpdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYSBmdW5jdGlvbiEnKTtcbiAgcmV0dXJuIGl0O1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCl7IC8qIGVtcHR5ICovIH07IiwidmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi8kLmlzLW9iamVjdCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIGlmKCFpc09iamVjdChpdCkpdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYW4gb2JqZWN0IScpO1xuICByZXR1cm4gaXQ7XG59OyIsIi8vIGdldHRpbmcgdGFnIGZyb20gMTkuMS4zLjYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZygpXG52YXIgY29mID0gcmVxdWlyZSgnLi8kLmNvZicpXG4gICwgVEFHID0gcmVxdWlyZSgnLi8kLndrcycpKCd0b1N0cmluZ1RhZycpXG4gIC8vIEVTMyB3cm9uZyBoZXJlXG4gICwgQVJHID0gY29mKGZ1bmN0aW9uKCl7IHJldHVybiBhcmd1bWVudHM7IH0oKSkgPT0gJ0FyZ3VtZW50cyc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICB2YXIgTywgVCwgQjtcbiAgcmV0dXJuIGl0ID09PSB1bmRlZmluZWQgPyAnVW5kZWZpbmVkJyA6IGl0ID09PSBudWxsID8gJ051bGwnXG4gICAgLy8gQEB0b1N0cmluZ1RhZyBjYXNlXG4gICAgOiB0eXBlb2YgKFQgPSAoTyA9IE9iamVjdChpdCkpW1RBR10pID09ICdzdHJpbmcnID8gVFxuICAgIC8vIGJ1aWx0aW5UYWcgY2FzZVxuICAgIDogQVJHID8gY29mKE8pXG4gICAgLy8gRVMzIGFyZ3VtZW50cyBmYWxsYmFja1xuICAgIDogKEIgPSBjb2YoTykpID09ICdPYmplY3QnICYmIHR5cGVvZiBPLmNhbGxlZSA9PSAnZnVuY3Rpb24nID8gJ0FyZ3VtZW50cycgOiBCO1xufTsiLCJ2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKGl0KS5zbGljZSg4LCAtMSk7XG59OyIsIid1c2Ugc3RyaWN0JztcbnZhciAkICAgICAgICAgICAgPSByZXF1aXJlKCcuLyQnKVxuICAsIGhpZGUgICAgICAgICA9IHJlcXVpcmUoJy4vJC5oaWRlJylcbiAgLCByZWRlZmluZUFsbCAgPSByZXF1aXJlKCcuLyQucmVkZWZpbmUtYWxsJylcbiAgLCBjdHggICAgICAgICAgPSByZXF1aXJlKCcuLyQuY3R4JylcbiAgLCBzdHJpY3ROZXcgICAgPSByZXF1aXJlKCcuLyQuc3RyaWN0LW5ldycpXG4gICwgZGVmaW5lZCAgICAgID0gcmVxdWlyZSgnLi8kLmRlZmluZWQnKVxuICAsIGZvck9mICAgICAgICA9IHJlcXVpcmUoJy4vJC5mb3Itb2YnKVxuICAsICRpdGVyRGVmaW5lICA9IHJlcXVpcmUoJy4vJC5pdGVyLWRlZmluZScpXG4gICwgc3RlcCAgICAgICAgID0gcmVxdWlyZSgnLi8kLml0ZXItc3RlcCcpXG4gICwgSUQgICAgICAgICAgID0gcmVxdWlyZSgnLi8kLnVpZCcpKCdpZCcpXG4gICwgJGhhcyAgICAgICAgID0gcmVxdWlyZSgnLi8kLmhhcycpXG4gICwgaXNPYmplY3QgICAgID0gcmVxdWlyZSgnLi8kLmlzLW9iamVjdCcpXG4gICwgc2V0U3BlY2llcyAgID0gcmVxdWlyZSgnLi8kLnNldC1zcGVjaWVzJylcbiAgLCBERVNDUklQVE9SUyAgPSByZXF1aXJlKCcuLyQuZGVzY3JpcHRvcnMnKVxuICAsIGlzRXh0ZW5zaWJsZSA9IE9iamVjdC5pc0V4dGVuc2libGUgfHwgaXNPYmplY3RcbiAgLCBTSVpFICAgICAgICAgPSBERVNDUklQVE9SUyA/ICdfcycgOiAnc2l6ZSdcbiAgLCBpZCAgICAgICAgICAgPSAwO1xuXG52YXIgZmFzdEtleSA9IGZ1bmN0aW9uKGl0LCBjcmVhdGUpe1xuICAvLyByZXR1cm4gcHJpbWl0aXZlIHdpdGggcHJlZml4XG4gIGlmKCFpc09iamVjdChpdCkpcmV0dXJuIHR5cGVvZiBpdCA9PSAnc3ltYm9sJyA/IGl0IDogKHR5cGVvZiBpdCA9PSAnc3RyaW5nJyA/ICdTJyA6ICdQJykgKyBpdDtcbiAgaWYoISRoYXMoaXQsIElEKSl7XG4gICAgLy8gY2FuJ3Qgc2V0IGlkIHRvIGZyb3plbiBvYmplY3RcbiAgICBpZighaXNFeHRlbnNpYmxlKGl0KSlyZXR1cm4gJ0YnO1xuICAgIC8vIG5vdCBuZWNlc3NhcnkgdG8gYWRkIGlkXG4gICAgaWYoIWNyZWF0ZSlyZXR1cm4gJ0UnO1xuICAgIC8vIGFkZCBtaXNzaW5nIG9iamVjdCBpZFxuICAgIGhpZGUoaXQsIElELCArK2lkKTtcbiAgLy8gcmV0dXJuIG9iamVjdCBpZCB3aXRoIHByZWZpeFxuICB9IHJldHVybiAnTycgKyBpdFtJRF07XG59O1xuXG52YXIgZ2V0RW50cnkgPSBmdW5jdGlvbih0aGF0LCBrZXkpe1xuICAvLyBmYXN0IGNhc2VcbiAgdmFyIGluZGV4ID0gZmFzdEtleShrZXkpLCBlbnRyeTtcbiAgaWYoaW5kZXggIT09ICdGJylyZXR1cm4gdGhhdC5faVtpbmRleF07XG4gIC8vIGZyb3plbiBvYmplY3QgY2FzZVxuICBmb3IoZW50cnkgPSB0aGF0Ll9mOyBlbnRyeTsgZW50cnkgPSBlbnRyeS5uKXtcbiAgICBpZihlbnRyeS5rID09IGtleSlyZXR1cm4gZW50cnk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXRDb25zdHJ1Y3RvcjogZnVuY3Rpb24od3JhcHBlciwgTkFNRSwgSVNfTUFQLCBBRERFUil7XG4gICAgdmFyIEMgPSB3cmFwcGVyKGZ1bmN0aW9uKHRoYXQsIGl0ZXJhYmxlKXtcbiAgICAgIHN0cmljdE5ldyh0aGF0LCBDLCBOQU1FKTtcbiAgICAgIHRoYXQuX2kgPSAkLmNyZWF0ZShudWxsKTsgLy8gaW5kZXhcbiAgICAgIHRoYXQuX2YgPSB1bmRlZmluZWQ7ICAgICAgLy8gZmlyc3QgZW50cnlcbiAgICAgIHRoYXQuX2wgPSB1bmRlZmluZWQ7ICAgICAgLy8gbGFzdCBlbnRyeVxuICAgICAgdGhhdFtTSVpFXSA9IDA7ICAgICAgICAgICAvLyBzaXplXG4gICAgICBpZihpdGVyYWJsZSAhPSB1bmRlZmluZWQpZm9yT2YoaXRlcmFibGUsIElTX01BUCwgdGhhdFtBRERFUl0sIHRoYXQpO1xuICAgIH0pO1xuICAgIHJlZGVmaW5lQWxsKEMucHJvdG90eXBlLCB7XG4gICAgICAvLyAyMy4xLjMuMSBNYXAucHJvdG90eXBlLmNsZWFyKClcbiAgICAgIC8vIDIzLjIuMy4yIFNldC5wcm90b3R5cGUuY2xlYXIoKVxuICAgICAgY2xlYXI6IGZ1bmN0aW9uIGNsZWFyKCl7XG4gICAgICAgIGZvcih2YXIgdGhhdCA9IHRoaXMsIGRhdGEgPSB0aGF0Ll9pLCBlbnRyeSA9IHRoYXQuX2Y7IGVudHJ5OyBlbnRyeSA9IGVudHJ5Lm4pe1xuICAgICAgICAgIGVudHJ5LnIgPSB0cnVlO1xuICAgICAgICAgIGlmKGVudHJ5LnApZW50cnkucCA9IGVudHJ5LnAubiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBkZWxldGUgZGF0YVtlbnRyeS5pXTtcbiAgICAgICAgfVxuICAgICAgICB0aGF0Ll9mID0gdGhhdC5fbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhhdFtTSVpFXSA9IDA7XG4gICAgICB9LFxuICAgICAgLy8gMjMuMS4zLjMgTWFwLnByb3RvdHlwZS5kZWxldGUoa2V5KVxuICAgICAgLy8gMjMuMi4zLjQgU2V0LnByb3RvdHlwZS5kZWxldGUodmFsdWUpXG4gICAgICAnZGVsZXRlJzogZnVuY3Rpb24oa2V5KXtcbiAgICAgICAgdmFyIHRoYXQgID0gdGhpc1xuICAgICAgICAgICwgZW50cnkgPSBnZXRFbnRyeSh0aGF0LCBrZXkpO1xuICAgICAgICBpZihlbnRyeSl7XG4gICAgICAgICAgdmFyIG5leHQgPSBlbnRyeS5uXG4gICAgICAgICAgICAsIHByZXYgPSBlbnRyeS5wO1xuICAgICAgICAgIGRlbGV0ZSB0aGF0Ll9pW2VudHJ5LmldO1xuICAgICAgICAgIGVudHJ5LnIgPSB0cnVlO1xuICAgICAgICAgIGlmKHByZXYpcHJldi5uID0gbmV4dDtcbiAgICAgICAgICBpZihuZXh0KW5leHQucCA9IHByZXY7XG4gICAgICAgICAgaWYodGhhdC5fZiA9PSBlbnRyeSl0aGF0Ll9mID0gbmV4dDtcbiAgICAgICAgICBpZih0aGF0Ll9sID09IGVudHJ5KXRoYXQuX2wgPSBwcmV2O1xuICAgICAgICAgIHRoYXRbU0laRV0tLTtcbiAgICAgICAgfSByZXR1cm4gISFlbnRyeTtcbiAgICAgIH0sXG4gICAgICAvLyAyMy4yLjMuNiBTZXQucHJvdG90eXBlLmZvckVhY2goY2FsbGJhY2tmbiwgdGhpc0FyZyA9IHVuZGVmaW5lZClcbiAgICAgIC8vIDIzLjEuMy41IE1hcC5wcm90b3R5cGUuZm9yRWFjaChjYWxsYmFja2ZuLCB0aGlzQXJnID0gdW5kZWZpbmVkKVxuICAgICAgZm9yRWFjaDogZnVuY3Rpb24gZm9yRWFjaChjYWxsYmFja2ZuIC8qLCB0aGF0ID0gdW5kZWZpbmVkICovKXtcbiAgICAgICAgdmFyIGYgPSBjdHgoY2FsbGJhY2tmbiwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQsIDMpXG4gICAgICAgICAgLCBlbnRyeTtcbiAgICAgICAgd2hpbGUoZW50cnkgPSBlbnRyeSA/IGVudHJ5Lm4gOiB0aGlzLl9mKXtcbiAgICAgICAgICBmKGVudHJ5LnYsIGVudHJ5LmssIHRoaXMpO1xuICAgICAgICAgIC8vIHJldmVydCB0byB0aGUgbGFzdCBleGlzdGluZyBlbnRyeVxuICAgICAgICAgIHdoaWxlKGVudHJ5ICYmIGVudHJ5LnIpZW50cnkgPSBlbnRyeS5wO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLy8gMjMuMS4zLjcgTWFwLnByb3RvdHlwZS5oYXMoa2V5KVxuICAgICAgLy8gMjMuMi4zLjcgU2V0LnByb3RvdHlwZS5oYXModmFsdWUpXG4gICAgICBoYXM6IGZ1bmN0aW9uIGhhcyhrZXkpe1xuICAgICAgICByZXR1cm4gISFnZXRFbnRyeSh0aGlzLCBrZXkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmKERFU0NSSVBUT1JTKSQuc2V0RGVzYyhDLnByb3RvdHlwZSwgJ3NpemUnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCl7XG4gICAgICAgIHJldHVybiBkZWZpbmVkKHRoaXNbU0laRV0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBDO1xuICB9LFxuICBkZWY6IGZ1bmN0aW9uKHRoYXQsIGtleSwgdmFsdWUpe1xuICAgIHZhciBlbnRyeSA9IGdldEVudHJ5KHRoYXQsIGtleSlcbiAgICAgICwgcHJldiwgaW5kZXg7XG4gICAgLy8gY2hhbmdlIGV4aXN0aW5nIGVudHJ5XG4gICAgaWYoZW50cnkpe1xuICAgICAgZW50cnkudiA9IHZhbHVlO1xuICAgIC8vIGNyZWF0ZSBuZXcgZW50cnlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhhdC5fbCA9IGVudHJ5ID0ge1xuICAgICAgICBpOiBpbmRleCA9IGZhc3RLZXkoa2V5LCB0cnVlKSwgLy8gPC0gaW5kZXhcbiAgICAgICAgazoga2V5LCAgICAgICAgICAgICAgICAgICAgICAgIC8vIDwtIGtleVxuICAgICAgICB2OiB2YWx1ZSwgICAgICAgICAgICAgICAgICAgICAgLy8gPC0gdmFsdWVcbiAgICAgICAgcDogcHJldiA9IHRoYXQuX2wsICAgICAgICAgICAgIC8vIDwtIHByZXZpb3VzIGVudHJ5XG4gICAgICAgIG46IHVuZGVmaW5lZCwgICAgICAgICAgICAgICAgICAvLyA8LSBuZXh0IGVudHJ5XG4gICAgICAgIHI6IGZhbHNlICAgICAgICAgICAgICAgICAgICAgICAvLyA8LSByZW1vdmVkXG4gICAgICB9O1xuICAgICAgaWYoIXRoYXQuX2YpdGhhdC5fZiA9IGVudHJ5O1xuICAgICAgaWYocHJldilwcmV2Lm4gPSBlbnRyeTtcbiAgICAgIHRoYXRbU0laRV0rKztcbiAgICAgIC8vIGFkZCB0byBpbmRleFxuICAgICAgaWYoaW5kZXggIT09ICdGJyl0aGF0Ll9pW2luZGV4XSA9IGVudHJ5O1xuICAgIH0gcmV0dXJuIHRoYXQ7XG4gIH0sXG4gIGdldEVudHJ5OiBnZXRFbnRyeSxcbiAgc2V0U3Ryb25nOiBmdW5jdGlvbihDLCBOQU1FLCBJU19NQVApe1xuICAgIC8vIGFkZCAua2V5cywgLnZhbHVlcywgLmVudHJpZXMsIFtAQGl0ZXJhdG9yXVxuICAgIC8vIDIzLjEuMy40LCAyMy4xLjMuOCwgMjMuMS4zLjExLCAyMy4xLjMuMTIsIDIzLjIuMy41LCAyMy4yLjMuOCwgMjMuMi4zLjEwLCAyMy4yLjMuMTFcbiAgICAkaXRlckRlZmluZShDLCBOQU1FLCBmdW5jdGlvbihpdGVyYXRlZCwga2luZCl7XG4gICAgICB0aGlzLl90ID0gaXRlcmF0ZWQ7ICAvLyB0YXJnZXRcbiAgICAgIHRoaXMuX2sgPSBraW5kOyAgICAgIC8vIGtpbmRcbiAgICAgIHRoaXMuX2wgPSB1bmRlZmluZWQ7IC8vIHByZXZpb3VzXG4gICAgfSwgZnVuY3Rpb24oKXtcbiAgICAgIHZhciB0aGF0ICA9IHRoaXNcbiAgICAgICAgLCBraW5kICA9IHRoYXQuX2tcbiAgICAgICAgLCBlbnRyeSA9IHRoYXQuX2w7XG4gICAgICAvLyByZXZlcnQgdG8gdGhlIGxhc3QgZXhpc3RpbmcgZW50cnlcbiAgICAgIHdoaWxlKGVudHJ5ICYmIGVudHJ5LnIpZW50cnkgPSBlbnRyeS5wO1xuICAgICAgLy8gZ2V0IG5leHQgZW50cnlcbiAgICAgIGlmKCF0aGF0Ll90IHx8ICEodGhhdC5fbCA9IGVudHJ5ID0gZW50cnkgPyBlbnRyeS5uIDogdGhhdC5fdC5fZikpe1xuICAgICAgICAvLyBvciBmaW5pc2ggdGhlIGl0ZXJhdGlvblxuICAgICAgICB0aGF0Ll90ID0gdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gc3RlcCgxKTtcbiAgICAgIH1cbiAgICAgIC8vIHJldHVybiBzdGVwIGJ5IGtpbmRcbiAgICAgIGlmKGtpbmQgPT0gJ2tleXMnICApcmV0dXJuIHN0ZXAoMCwgZW50cnkuayk7XG4gICAgICBpZihraW5kID09ICd2YWx1ZXMnKXJldHVybiBzdGVwKDAsIGVudHJ5LnYpO1xuICAgICAgcmV0dXJuIHN0ZXAoMCwgW2VudHJ5LmssIGVudHJ5LnZdKTtcbiAgICB9LCBJU19NQVAgPyAnZW50cmllcycgOiAndmFsdWVzJyAsICFJU19NQVAsIHRydWUpO1xuXG4gICAgLy8gYWRkIFtAQHNwZWNpZXNdLCAyMy4xLjIuMiwgMjMuMi4yLjJcbiAgICBzZXRTcGVjaWVzKE5BTUUpO1xuICB9XG59OyIsIi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9EYXZpZEJydWFudC9NYXAtU2V0LnByb3RvdHlwZS50b0pTT05cbnZhciBmb3JPZiAgID0gcmVxdWlyZSgnLi8kLmZvci1vZicpXG4gICwgY2xhc3NvZiA9IHJlcXVpcmUoJy4vJC5jbGFzc29mJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKE5BTUUpe1xuICByZXR1cm4gZnVuY3Rpb24gdG9KU09OKCl7XG4gICAgaWYoY2xhc3NvZih0aGlzKSAhPSBOQU1FKXRocm93IFR5cGVFcnJvcihOQU1FICsgXCIjdG9KU09OIGlzbid0IGdlbmVyaWNcIik7XG4gICAgdmFyIGFyciA9IFtdO1xuICAgIGZvck9mKHRoaXMsIGZhbHNlLCBhcnIucHVzaCwgYXJyKTtcbiAgICByZXR1cm4gYXJyO1xuICB9O1xufTsiLCIndXNlIHN0cmljdCc7XG52YXIgJCAgICAgICAgICAgICAgPSByZXF1aXJlKCcuLyQnKVxuICAsIGdsb2JhbCAgICAgICAgID0gcmVxdWlyZSgnLi8kLmdsb2JhbCcpXG4gICwgJGV4cG9ydCAgICAgICAgPSByZXF1aXJlKCcuLyQuZXhwb3J0JylcbiAgLCBmYWlscyAgICAgICAgICA9IHJlcXVpcmUoJy4vJC5mYWlscycpXG4gICwgaGlkZSAgICAgICAgICAgPSByZXF1aXJlKCcuLyQuaGlkZScpXG4gICwgcmVkZWZpbmVBbGwgICAgPSByZXF1aXJlKCcuLyQucmVkZWZpbmUtYWxsJylcbiAgLCBmb3JPZiAgICAgICAgICA9IHJlcXVpcmUoJy4vJC5mb3Itb2YnKVxuICAsIHN0cmljdE5ldyAgICAgID0gcmVxdWlyZSgnLi8kLnN0cmljdC1uZXcnKVxuICAsIGlzT2JqZWN0ICAgICAgID0gcmVxdWlyZSgnLi8kLmlzLW9iamVjdCcpXG4gICwgc2V0VG9TdHJpbmdUYWcgPSByZXF1aXJlKCcuLyQuc2V0LXRvLXN0cmluZy10YWcnKVxuICAsIERFU0NSSVBUT1JTICAgID0gcmVxdWlyZSgnLi8kLmRlc2NyaXB0b3JzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oTkFNRSwgd3JhcHBlciwgbWV0aG9kcywgY29tbW9uLCBJU19NQVAsIElTX1dFQUspe1xuICB2YXIgQmFzZSAgPSBnbG9iYWxbTkFNRV1cbiAgICAsIEMgICAgID0gQmFzZVxuICAgICwgQURERVIgPSBJU19NQVAgPyAnc2V0JyA6ICdhZGQnXG4gICAgLCBwcm90byA9IEMgJiYgQy5wcm90b3R5cGVcbiAgICAsIE8gICAgID0ge307XG4gIGlmKCFERVNDUklQVE9SUyB8fCB0eXBlb2YgQyAhPSAnZnVuY3Rpb24nIHx8ICEoSVNfV0VBSyB8fCBwcm90by5mb3JFYWNoICYmICFmYWlscyhmdW5jdGlvbigpe1xuICAgIG5ldyBDKCkuZW50cmllcygpLm5leHQoKTtcbiAgfSkpKXtcbiAgICAvLyBjcmVhdGUgY29sbGVjdGlvbiBjb25zdHJ1Y3RvclxuICAgIEMgPSBjb21tb24uZ2V0Q29uc3RydWN0b3Iod3JhcHBlciwgTkFNRSwgSVNfTUFQLCBBRERFUik7XG4gICAgcmVkZWZpbmVBbGwoQy5wcm90b3R5cGUsIG1ldGhvZHMpO1xuICB9IGVsc2Uge1xuICAgIEMgPSB3cmFwcGVyKGZ1bmN0aW9uKHRhcmdldCwgaXRlcmFibGUpe1xuICAgICAgc3RyaWN0TmV3KHRhcmdldCwgQywgTkFNRSk7XG4gICAgICB0YXJnZXQuX2MgPSBuZXcgQmFzZTtcbiAgICAgIGlmKGl0ZXJhYmxlICE9IHVuZGVmaW5lZClmb3JPZihpdGVyYWJsZSwgSVNfTUFQLCB0YXJnZXRbQURERVJdLCB0YXJnZXQpO1xuICAgIH0pO1xuICAgICQuZWFjaC5jYWxsKCdhZGQsY2xlYXIsZGVsZXRlLGZvckVhY2gsZ2V0LGhhcyxzZXQsa2V5cyx2YWx1ZXMsZW50cmllcycuc3BsaXQoJywnKSxmdW5jdGlvbihLRVkpe1xuICAgICAgdmFyIElTX0FEREVSID0gS0VZID09ICdhZGQnIHx8IEtFWSA9PSAnc2V0JztcbiAgICAgIGlmKEtFWSBpbiBwcm90byAmJiAhKElTX1dFQUsgJiYgS0VZID09ICdjbGVhcicpKWhpZGUoQy5wcm90b3R5cGUsIEtFWSwgZnVuY3Rpb24oYSwgYil7XG4gICAgICAgIGlmKCFJU19BRERFUiAmJiBJU19XRUFLICYmICFpc09iamVjdChhKSlyZXR1cm4gS0VZID09ICdnZXQnID8gdW5kZWZpbmVkIDogZmFsc2U7XG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLl9jW0tFWV0oYSA9PT0gMCA/IDAgOiBhLCBiKTtcbiAgICAgICAgcmV0dXJuIElTX0FEREVSID8gdGhpcyA6IHJlc3VsdDtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGlmKCdzaXplJyBpbiBwcm90bykkLnNldERlc2MoQy5wcm90b3R5cGUsICdzaXplJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpe1xuICAgICAgICByZXR1cm4gdGhpcy5fYy5zaXplO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgc2V0VG9TdHJpbmdUYWcoQywgTkFNRSk7XG5cbiAgT1tOQU1FXSA9IEM7XG4gICRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5XICsgJGV4cG9ydC5GLCBPKTtcblxuICBpZighSVNfV0VBSyljb21tb24uc2V0U3Ryb25nKEMsIE5BTUUsIElTX01BUCk7XG5cbiAgcmV0dXJuIEM7XG59OyIsInZhciBjb3JlID0gbW9kdWxlLmV4cG9ydHMgPSB7dmVyc2lvbjogJzEuMi42J307XG5pZih0eXBlb2YgX19lID09ICdudW1iZXInKV9fZSA9IGNvcmU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWYiLCIvLyBvcHRpb25hbCAvIHNpbXBsZSBjb250ZXh0IGJpbmRpbmdcbnZhciBhRnVuY3Rpb24gPSByZXF1aXJlKCcuLyQuYS1mdW5jdGlvbicpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmbiwgdGhhdCwgbGVuZ3RoKXtcbiAgYUZ1bmN0aW9uKGZuKTtcbiAgaWYodGhhdCA9PT0gdW5kZWZpbmVkKXJldHVybiBmbjtcbiAgc3dpdGNoKGxlbmd0aCl7XG4gICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24oYSl7XG4gICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhKTtcbiAgICB9O1xuICAgIGNhc2UgMjogcmV0dXJuIGZ1bmN0aW9uKGEsIGIpe1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYik7XG4gICAgfTtcbiAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbihhLCBiLCBjKXtcbiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEsIGIsIGMpO1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uKC8qIC4uLmFyZ3MgKi8pe1xuICAgIHJldHVybiBmbi5hcHBseSh0aGF0LCBhcmd1bWVudHMpO1xuICB9O1xufTsiLCIvLyA3LjIuMSBSZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGFyZ3VtZW50KVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIGlmKGl0ID09IHVuZGVmaW5lZCl0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgXCIgKyBpdCk7XG4gIHJldHVybiBpdDtcbn07IiwiLy8gVGhhbmsncyBJRTggZm9yIGhpcyBmdW5ueSBkZWZpbmVQcm9wZXJ0eVxubW9kdWxlLmV4cG9ydHMgPSAhcmVxdWlyZSgnLi8kLmZhaWxzJykoZnVuY3Rpb24oKXtcbiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ2EnLCB7Z2V0OiBmdW5jdGlvbigpeyByZXR1cm4gNzsgfX0pLmEgIT0gNztcbn0pOyIsInZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vJC5pcy1vYmplY3QnKVxuICAsIGRvY3VtZW50ID0gcmVxdWlyZSgnLi8kLmdsb2JhbCcpLmRvY3VtZW50XG4gIC8vIGluIG9sZCBJRSB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCBpcyAnb2JqZWN0J1xuICAsIGlzID0gaXNPYmplY3QoZG9jdW1lbnQpICYmIGlzT2JqZWN0KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIHJldHVybiBpcyA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaXQpIDoge307XG59OyIsInZhciBnbG9iYWwgICAgPSByZXF1aXJlKCcuLyQuZ2xvYmFsJylcbiAgLCBjb3JlICAgICAgPSByZXF1aXJlKCcuLyQuY29yZScpXG4gICwgY3R4ICAgICAgID0gcmVxdWlyZSgnLi8kLmN0eCcpXG4gICwgUFJPVE9UWVBFID0gJ3Byb3RvdHlwZSc7XG5cbnZhciAkZXhwb3J0ID0gZnVuY3Rpb24odHlwZSwgbmFtZSwgc291cmNlKXtcbiAgdmFyIElTX0ZPUkNFRCA9IHR5cGUgJiAkZXhwb3J0LkZcbiAgICAsIElTX0dMT0JBTCA9IHR5cGUgJiAkZXhwb3J0LkdcbiAgICAsIElTX1NUQVRJQyA9IHR5cGUgJiAkZXhwb3J0LlNcbiAgICAsIElTX1BST1RPICA9IHR5cGUgJiAkZXhwb3J0LlBcbiAgICAsIElTX0JJTkQgICA9IHR5cGUgJiAkZXhwb3J0LkJcbiAgICAsIElTX1dSQVAgICA9IHR5cGUgJiAkZXhwb3J0LldcbiAgICAsIGV4cG9ydHMgICA9IElTX0dMT0JBTCA/IGNvcmUgOiBjb3JlW25hbWVdIHx8IChjb3JlW25hbWVdID0ge30pXG4gICAgLCB0YXJnZXQgICAgPSBJU19HTE9CQUwgPyBnbG9iYWwgOiBJU19TVEFUSUMgPyBnbG9iYWxbbmFtZV0gOiAoZ2xvYmFsW25hbWVdIHx8IHt9KVtQUk9UT1RZUEVdXG4gICAgLCBrZXksIG93biwgb3V0O1xuICBpZihJU19HTE9CQUwpc291cmNlID0gbmFtZTtcbiAgZm9yKGtleSBpbiBzb3VyY2Upe1xuICAgIC8vIGNvbnRhaW5zIGluIG5hdGl2ZVxuICAgIG93biA9ICFJU19GT1JDRUQgJiYgdGFyZ2V0ICYmIGtleSBpbiB0YXJnZXQ7XG4gICAgaWYob3duICYmIGtleSBpbiBleHBvcnRzKWNvbnRpbnVlO1xuICAgIC8vIGV4cG9ydCBuYXRpdmUgb3IgcGFzc2VkXG4gICAgb3V0ID0gb3duID8gdGFyZ2V0W2tleV0gOiBzb3VyY2Vba2V5XTtcbiAgICAvLyBwcmV2ZW50IGdsb2JhbCBwb2xsdXRpb24gZm9yIG5hbWVzcGFjZXNcbiAgICBleHBvcnRzW2tleV0gPSBJU19HTE9CQUwgJiYgdHlwZW9mIHRhcmdldFtrZXldICE9ICdmdW5jdGlvbicgPyBzb3VyY2Vba2V5XVxuICAgIC8vIGJpbmQgdGltZXJzIHRvIGdsb2JhbCBmb3IgY2FsbCBmcm9tIGV4cG9ydCBjb250ZXh0XG4gICAgOiBJU19CSU5EICYmIG93biA/IGN0eChvdXQsIGdsb2JhbClcbiAgICAvLyB3cmFwIGdsb2JhbCBjb25zdHJ1Y3RvcnMgZm9yIHByZXZlbnQgY2hhbmdlIHRoZW0gaW4gbGlicmFyeVxuICAgIDogSVNfV1JBUCAmJiB0YXJnZXRba2V5XSA9PSBvdXQgPyAoZnVuY3Rpb24oQyl7XG4gICAgICB2YXIgRiA9IGZ1bmN0aW9uKHBhcmFtKXtcbiAgICAgICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBDID8gbmV3IEMocGFyYW0pIDogQyhwYXJhbSk7XG4gICAgICB9O1xuICAgICAgRltQUk9UT1RZUEVdID0gQ1tQUk9UT1RZUEVdO1xuICAgICAgcmV0dXJuIEY7XG4gICAgLy8gbWFrZSBzdGF0aWMgdmVyc2lvbnMgZm9yIHByb3RvdHlwZSBtZXRob2RzXG4gICAgfSkob3V0KSA6IElTX1BST1RPICYmIHR5cGVvZiBvdXQgPT0gJ2Z1bmN0aW9uJyA/IGN0eChGdW5jdGlvbi5jYWxsLCBvdXQpIDogb3V0O1xuICAgIGlmKElTX1BST1RPKShleHBvcnRzW1BST1RPVFlQRV0gfHwgKGV4cG9ydHNbUFJPVE9UWVBFXSA9IHt9KSlba2V5XSA9IG91dDtcbiAgfVxufTtcbi8vIHR5cGUgYml0bWFwXG4kZXhwb3J0LkYgPSAxOyAgLy8gZm9yY2VkXG4kZXhwb3J0LkcgPSAyOyAgLy8gZ2xvYmFsXG4kZXhwb3J0LlMgPSA0OyAgLy8gc3RhdGljXG4kZXhwb3J0LlAgPSA4OyAgLy8gcHJvdG9cbiRleHBvcnQuQiA9IDE2OyAvLyBiaW5kXG4kZXhwb3J0LlcgPSAzMjsgLy8gd3JhcFxubW9kdWxlLmV4cG9ydHMgPSAkZXhwb3J0OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZXhlYyl7XG4gIHRyeSB7XG4gICAgcmV0dXJuICEhZXhlYygpO1xuICB9IGNhdGNoKGUpe1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59OyIsInZhciBjdHggICAgICAgICA9IHJlcXVpcmUoJy4vJC5jdHgnKVxuICAsIGNhbGwgICAgICAgID0gcmVxdWlyZSgnLi8kLml0ZXItY2FsbCcpXG4gICwgaXNBcnJheUl0ZXIgPSByZXF1aXJlKCcuLyQuaXMtYXJyYXktaXRlcicpXG4gICwgYW5PYmplY3QgICAgPSByZXF1aXJlKCcuLyQuYW4tb2JqZWN0JylcbiAgLCB0b0xlbmd0aCAgICA9IHJlcXVpcmUoJy4vJC50by1sZW5ndGgnKVxuICAsIGdldEl0ZXJGbiAgID0gcmVxdWlyZSgnLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXRlcmFibGUsIGVudHJpZXMsIGZuLCB0aGF0KXtcbiAgdmFyIGl0ZXJGbiA9IGdldEl0ZXJGbihpdGVyYWJsZSlcbiAgICAsIGYgICAgICA9IGN0eChmbiwgdGhhdCwgZW50cmllcyA/IDIgOiAxKVxuICAgICwgaW5kZXggID0gMFxuICAgICwgbGVuZ3RoLCBzdGVwLCBpdGVyYXRvcjtcbiAgaWYodHlwZW9mIGl0ZXJGbiAhPSAnZnVuY3Rpb24nKXRocm93IFR5cGVFcnJvcihpdGVyYWJsZSArICcgaXMgbm90IGl0ZXJhYmxlIScpO1xuICAvLyBmYXN0IGNhc2UgZm9yIGFycmF5cyB3aXRoIGRlZmF1bHQgaXRlcmF0b3JcbiAgaWYoaXNBcnJheUl0ZXIoaXRlckZuKSlmb3IobGVuZ3RoID0gdG9MZW5ndGgoaXRlcmFibGUubGVuZ3RoKTsgbGVuZ3RoID4gaW5kZXg7IGluZGV4Kyspe1xuICAgIGVudHJpZXMgPyBmKGFuT2JqZWN0KHN0ZXAgPSBpdGVyYWJsZVtpbmRleF0pWzBdLCBzdGVwWzFdKSA6IGYoaXRlcmFibGVbaW5kZXhdKTtcbiAgfSBlbHNlIGZvcihpdGVyYXRvciA9IGl0ZXJGbi5jYWxsKGl0ZXJhYmxlKTsgIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lOyApe1xuICAgIGNhbGwoaXRlcmF0b3IsIGYsIHN0ZXAudmFsdWUsIGVudHJpZXMpO1xuICB9XG59OyIsIi8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy84NiNpc3N1ZWNvbW1lbnQtMTE1NzU5MDI4XG52YXIgZ2xvYmFsID0gbW9kdWxlLmV4cG9ydHMgPSB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnICYmIHdpbmRvdy5NYXRoID09IE1hdGhcbiAgPyB3aW5kb3cgOiB0eXBlb2Ygc2VsZiAhPSAndW5kZWZpbmVkJyAmJiBzZWxmLk1hdGggPT0gTWF0aCA/IHNlbGYgOiBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuaWYodHlwZW9mIF9fZyA9PSAnbnVtYmVyJylfX2cgPSBnbG9iYWw7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWYiLCJ2YXIgaGFzT3duUHJvcGVydHkgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIGtleSl7XG4gIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGl0LCBrZXkpO1xufTsiLCJ2YXIgJCAgICAgICAgICA9IHJlcXVpcmUoJy4vJCcpXG4gICwgY3JlYXRlRGVzYyA9IHJlcXVpcmUoJy4vJC5wcm9wZXJ0eS1kZXNjJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vJC5kZXNjcmlwdG9ycycpID8gZnVuY3Rpb24ob2JqZWN0LCBrZXksIHZhbHVlKXtcbiAgcmV0dXJuICQuc2V0RGVzYyhvYmplY3QsIGtleSwgY3JlYXRlRGVzYygxLCB2YWx1ZSkpO1xufSA6IGZ1bmN0aW9uKG9iamVjdCwga2V5LCB2YWx1ZSl7XG4gIG9iamVjdFtrZXldID0gdmFsdWU7XG4gIHJldHVybiBvYmplY3Q7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi8kLmdsb2JhbCcpLmRvY3VtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsiLCIvLyBmYXN0IGFwcGx5LCBodHRwOi8vanNwZXJmLmxua2l0LmNvbS9mYXN0LWFwcGx5LzVcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZm4sIGFyZ3MsIHRoYXQpe1xuICB2YXIgdW4gPSB0aGF0ID09PSB1bmRlZmluZWQ7XG4gIHN3aXRjaChhcmdzLmxlbmd0aCl7XG4gICAgY2FzZSAwOiByZXR1cm4gdW4gPyBmbigpXG4gICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQpO1xuICAgIGNhc2UgMTogcmV0dXJuIHVuID8gZm4oYXJnc1swXSlcbiAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSk7XG4gICAgY2FzZSAyOiByZXR1cm4gdW4gPyBmbihhcmdzWzBdLCBhcmdzWzFdKVxuICAgICAgICAgICAgICAgICAgICAgIDogZm4uY2FsbCh0aGF0LCBhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICBjYXNlIDM6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pXG4gICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICAgIGNhc2UgNDogcmV0dXJuIHVuID8gZm4oYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSlcbiAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSk7XG4gIH0gcmV0dXJuICAgICAgICAgICAgICBmbi5hcHBseSh0aGF0LCBhcmdzKTtcbn07IiwiLy8gZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBhbmQgbm9uLWVudW1lcmFibGUgb2xkIFY4IHN0cmluZ3NcbnZhciBjb2YgPSByZXF1aXJlKCcuLyQuY29mJyk7XG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdCgneicpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApID8gT2JqZWN0IDogZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gY29mKGl0KSA9PSAnU3RyaW5nJyA/IGl0LnNwbGl0KCcnKSA6IE9iamVjdChpdCk7XG59OyIsIi8vIGNoZWNrIG9uIGRlZmF1bHQgQXJyYXkgaXRlcmF0b3JcbnZhciBJdGVyYXRvcnMgID0gcmVxdWlyZSgnLi8kLml0ZXJhdG9ycycpXG4gICwgSVRFUkFUT1IgICA9IHJlcXVpcmUoJy4vJC53a3MnKSgnaXRlcmF0b3InKVxuICAsIEFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gaXQgIT09IHVuZGVmaW5lZCAmJiAoSXRlcmF0b3JzLkFycmF5ID09PSBpdCB8fCBBcnJheVByb3RvW0lURVJBVE9SXSA9PT0gaXQpO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIHR5cGVvZiBpdCA9PT0gJ29iamVjdCcgPyBpdCAhPT0gbnVsbCA6IHR5cGVvZiBpdCA9PT0gJ2Z1bmN0aW9uJztcbn07IiwiLy8gY2FsbCBzb21ldGhpbmcgb24gaXRlcmF0b3Igc3RlcCB3aXRoIHNhZmUgY2xvc2luZyBvbiBlcnJvclxudmFyIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi8kLmFuLW9iamVjdCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdGVyYXRvciwgZm4sIHZhbHVlLCBlbnRyaWVzKXtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZW50cmllcyA/IGZuKGFuT2JqZWN0KHZhbHVlKVswXSwgdmFsdWVbMV0pIDogZm4odmFsdWUpO1xuICAvLyA3LjQuNiBJdGVyYXRvckNsb3NlKGl0ZXJhdG9yLCBjb21wbGV0aW9uKVxuICB9IGNhdGNoKGUpe1xuICAgIHZhciByZXQgPSBpdGVyYXRvclsncmV0dXJuJ107XG4gICAgaWYocmV0ICE9PSB1bmRlZmluZWQpYW5PYmplY3QocmV0LmNhbGwoaXRlcmF0b3IpKTtcbiAgICB0aHJvdyBlO1xuICB9XG59OyIsIid1c2Ugc3RyaWN0JztcbnZhciAkICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vJCcpXG4gICwgZGVzY3JpcHRvciAgICAgPSByZXF1aXJlKCcuLyQucHJvcGVydHktZGVzYycpXG4gICwgc2V0VG9TdHJpbmdUYWcgPSByZXF1aXJlKCcuLyQuc2V0LXRvLXN0cmluZy10YWcnKVxuICAsIEl0ZXJhdG9yUHJvdG90eXBlID0ge307XG5cbi8vIDI1LjEuMi4xLjEgJUl0ZXJhdG9yUHJvdG90eXBlJVtAQGl0ZXJhdG9yXSgpXG5yZXF1aXJlKCcuLyQuaGlkZScpKEl0ZXJhdG9yUHJvdG90eXBlLCByZXF1aXJlKCcuLyQud2tzJykoJ2l0ZXJhdG9yJyksIGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzOyB9KTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihDb25zdHJ1Y3RvciwgTkFNRSwgbmV4dCl7XG4gIENvbnN0cnVjdG9yLnByb3RvdHlwZSA9ICQuY3JlYXRlKEl0ZXJhdG9yUHJvdG90eXBlLCB7bmV4dDogZGVzY3JpcHRvcigxLCBuZXh0KX0pO1xuICBzZXRUb1N0cmluZ1RhZyhDb25zdHJ1Y3RvciwgTkFNRSArICcgSXRlcmF0b3InKTtcbn07IiwiJ3VzZSBzdHJpY3QnO1xudmFyIExJQlJBUlkgICAgICAgID0gcmVxdWlyZSgnLi8kLmxpYnJhcnknKVxuICAsICRleHBvcnQgICAgICAgID0gcmVxdWlyZSgnLi8kLmV4cG9ydCcpXG4gICwgcmVkZWZpbmUgICAgICAgPSByZXF1aXJlKCcuLyQucmVkZWZpbmUnKVxuICAsIGhpZGUgICAgICAgICAgID0gcmVxdWlyZSgnLi8kLmhpZGUnKVxuICAsIGhhcyAgICAgICAgICAgID0gcmVxdWlyZSgnLi8kLmhhcycpXG4gICwgSXRlcmF0b3JzICAgICAgPSByZXF1aXJlKCcuLyQuaXRlcmF0b3JzJylcbiAgLCAkaXRlckNyZWF0ZSAgICA9IHJlcXVpcmUoJy4vJC5pdGVyLWNyZWF0ZScpXG4gICwgc2V0VG9TdHJpbmdUYWcgPSByZXF1aXJlKCcuLyQuc2V0LXRvLXN0cmluZy10YWcnKVxuICAsIGdldFByb3RvICAgICAgID0gcmVxdWlyZSgnLi8kJykuZ2V0UHJvdG9cbiAgLCBJVEVSQVRPUiAgICAgICA9IHJlcXVpcmUoJy4vJC53a3MnKSgnaXRlcmF0b3InKVxuICAsIEJVR0dZICAgICAgICAgID0gIShbXS5rZXlzICYmICduZXh0JyBpbiBbXS5rZXlzKCkpIC8vIFNhZmFyaSBoYXMgYnVnZ3kgaXRlcmF0b3JzIHcvbyBgbmV4dGBcbiAgLCBGRl9JVEVSQVRPUiAgICA9ICdAQGl0ZXJhdG9yJ1xuICAsIEtFWVMgICAgICAgICAgID0gJ2tleXMnXG4gICwgVkFMVUVTICAgICAgICAgPSAndmFsdWVzJztcblxudmFyIHJldHVyblRoaXMgPSBmdW5jdGlvbigpeyByZXR1cm4gdGhpczsgfTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihCYXNlLCBOQU1FLCBDb25zdHJ1Y3RvciwgbmV4dCwgREVGQVVMVCwgSVNfU0VULCBGT1JDRUQpe1xuICAkaXRlckNyZWF0ZShDb25zdHJ1Y3RvciwgTkFNRSwgbmV4dCk7XG4gIHZhciBnZXRNZXRob2QgPSBmdW5jdGlvbihraW5kKXtcbiAgICBpZighQlVHR1kgJiYga2luZCBpbiBwcm90bylyZXR1cm4gcHJvdG9ba2luZF07XG4gICAgc3dpdGNoKGtpbmQpe1xuICAgICAgY2FzZSBLRVlTOiByZXR1cm4gZnVuY3Rpb24ga2V5cygpeyByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOyB9O1xuICAgICAgY2FzZSBWQUxVRVM6IHJldHVybiBmdW5jdGlvbiB2YWx1ZXMoKXsgcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0aGlzLCBraW5kKTsgfTtcbiAgICB9IHJldHVybiBmdW5jdGlvbiBlbnRyaWVzKCl7IHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7IH07XG4gIH07XG4gIHZhciBUQUcgICAgICAgID0gTkFNRSArICcgSXRlcmF0b3InXG4gICAgLCBERUZfVkFMVUVTID0gREVGQVVMVCA9PSBWQUxVRVNcbiAgICAsIFZBTFVFU19CVUcgPSBmYWxzZVxuICAgICwgcHJvdG8gICAgICA9IEJhc2UucHJvdG90eXBlXG4gICAgLCAkbmF0aXZlICAgID0gcHJvdG9bSVRFUkFUT1JdIHx8IHByb3RvW0ZGX0lURVJBVE9SXSB8fCBERUZBVUxUICYmIHByb3RvW0RFRkFVTFRdXG4gICAgLCAkZGVmYXVsdCAgID0gJG5hdGl2ZSB8fCBnZXRNZXRob2QoREVGQVVMVClcbiAgICAsIG1ldGhvZHMsIGtleTtcbiAgLy8gRml4IG5hdGl2ZVxuICBpZigkbmF0aXZlKXtcbiAgICB2YXIgSXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90bygkZGVmYXVsdC5jYWxsKG5ldyBCYXNlKSk7XG4gICAgLy8gU2V0IEBAdG9TdHJpbmdUYWcgdG8gbmF0aXZlIGl0ZXJhdG9yc1xuICAgIHNldFRvU3RyaW5nVGFnKEl0ZXJhdG9yUHJvdG90eXBlLCBUQUcsIHRydWUpO1xuICAgIC8vIEZGIGZpeFxuICAgIGlmKCFMSUJSQVJZICYmIGhhcyhwcm90bywgRkZfSVRFUkFUT1IpKWhpZGUoSXRlcmF0b3JQcm90b3R5cGUsIElURVJBVE9SLCByZXR1cm5UaGlzKTtcbiAgICAvLyBmaXggQXJyYXkje3ZhbHVlcywgQEBpdGVyYXRvcn0ubmFtZSBpbiBWOCAvIEZGXG4gICAgaWYoREVGX1ZBTFVFUyAmJiAkbmF0aXZlLm5hbWUgIT09IFZBTFVFUyl7XG4gICAgICBWQUxVRVNfQlVHID0gdHJ1ZTtcbiAgICAgICRkZWZhdWx0ID0gZnVuY3Rpb24gdmFsdWVzKCl7IHJldHVybiAkbmF0aXZlLmNhbGwodGhpcyk7IH07XG4gICAgfVxuICB9XG4gIC8vIERlZmluZSBpdGVyYXRvclxuICBpZigoIUxJQlJBUlkgfHwgRk9SQ0VEKSAmJiAoQlVHR1kgfHwgVkFMVUVTX0JVRyB8fCAhcHJvdG9bSVRFUkFUT1JdKSl7XG4gICAgaGlkZShwcm90bywgSVRFUkFUT1IsICRkZWZhdWx0KTtcbiAgfVxuICAvLyBQbHVnIGZvciBsaWJyYXJ5XG4gIEl0ZXJhdG9yc1tOQU1FXSA9ICRkZWZhdWx0O1xuICBJdGVyYXRvcnNbVEFHXSAgPSByZXR1cm5UaGlzO1xuICBpZihERUZBVUxUKXtcbiAgICBtZXRob2RzID0ge1xuICAgICAgdmFsdWVzOiAgREVGX1ZBTFVFUyAgPyAkZGVmYXVsdCA6IGdldE1ldGhvZChWQUxVRVMpLFxuICAgICAga2V5czogICAgSVNfU0VUICAgICAgPyAkZGVmYXVsdCA6IGdldE1ldGhvZChLRVlTKSxcbiAgICAgIGVudHJpZXM6ICFERUZfVkFMVUVTID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoJ2VudHJpZXMnKVxuICAgIH07XG4gICAgaWYoRk9SQ0VEKWZvcihrZXkgaW4gbWV0aG9kcyl7XG4gICAgICBpZighKGtleSBpbiBwcm90bykpcmVkZWZpbmUocHJvdG8sIGtleSwgbWV0aG9kc1trZXldKTtcbiAgICB9IGVsc2UgJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAoQlVHR1kgfHwgVkFMVUVTX0JVRyksIE5BTUUsIG1ldGhvZHMpO1xuICB9XG4gIHJldHVybiBtZXRob2RzO1xufTsiLCJ2YXIgSVRFUkFUT1IgICAgID0gcmVxdWlyZSgnLi8kLndrcycpKCdpdGVyYXRvcicpXG4gICwgU0FGRV9DTE9TSU5HID0gZmFsc2U7XG5cbnRyeSB7XG4gIHZhciByaXRlciA9IFs3XVtJVEVSQVRPUl0oKTtcbiAgcml0ZXJbJ3JldHVybiddID0gZnVuY3Rpb24oKXsgU0FGRV9DTE9TSU5HID0gdHJ1ZTsgfTtcbiAgQXJyYXkuZnJvbShyaXRlciwgZnVuY3Rpb24oKXsgdGhyb3cgMjsgfSk7XG59IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZXhlYywgc2tpcENsb3Npbmcpe1xuICBpZighc2tpcENsb3NpbmcgJiYgIVNBRkVfQ0xPU0lORylyZXR1cm4gZmFsc2U7XG4gIHZhciBzYWZlID0gZmFsc2U7XG4gIHRyeSB7XG4gICAgdmFyIGFyciAgPSBbN11cbiAgICAgICwgaXRlciA9IGFycltJVEVSQVRPUl0oKTtcbiAgICBpdGVyLm5leHQgPSBmdW5jdGlvbigpeyByZXR1cm4ge2RvbmU6IHNhZmUgPSB0cnVlfTsgfTtcbiAgICBhcnJbSVRFUkFUT1JdID0gZnVuY3Rpb24oKXsgcmV0dXJuIGl0ZXI7IH07XG4gICAgZXhlYyhhcnIpO1xuICB9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9XG4gIHJldHVybiBzYWZlO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGRvbmUsIHZhbHVlKXtcbiAgcmV0dXJuIHt2YWx1ZTogdmFsdWUsIGRvbmU6ICEhZG9uZX07XG59OyIsIm1vZHVsZS5leHBvcnRzID0ge307IiwidmFyICRPYmplY3QgPSBPYmplY3Q7XG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlOiAgICAgJE9iamVjdC5jcmVhdGUsXG4gIGdldFByb3RvOiAgICRPYmplY3QuZ2V0UHJvdG90eXBlT2YsXG4gIGlzRW51bTogICAgIHt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLFxuICBnZXREZXNjOiAgICAkT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcixcbiAgc2V0RGVzYzogICAgJE9iamVjdC5kZWZpbmVQcm9wZXJ0eSxcbiAgc2V0RGVzY3M6ICAgJE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzLFxuICBnZXRLZXlzOiAgICAkT2JqZWN0LmtleXMsXG4gIGdldE5hbWVzOiAgICRPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyxcbiAgZ2V0U3ltYm9sczogJE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsXG4gIGVhY2g6ICAgICAgIFtdLmZvckVhY2hcbn07IiwibW9kdWxlLmV4cG9ydHMgPSB0cnVlOyIsInZhciBnbG9iYWwgICAgPSByZXF1aXJlKCcuLyQuZ2xvYmFsJylcbiAgLCBtYWNyb3Rhc2sgPSByZXF1aXJlKCcuLyQudGFzaycpLnNldFxuICAsIE9ic2VydmVyICA9IGdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGdsb2JhbC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyXG4gICwgcHJvY2VzcyAgID0gZ2xvYmFsLnByb2Nlc3NcbiAgLCBQcm9taXNlICAgPSBnbG9iYWwuUHJvbWlzZVxuICAsIGlzTm9kZSAgICA9IHJlcXVpcmUoJy4vJC5jb2YnKShwcm9jZXNzKSA9PSAncHJvY2VzcydcbiAgLCBoZWFkLCBsYXN0LCBub3RpZnk7XG5cbnZhciBmbHVzaCA9IGZ1bmN0aW9uKCl7XG4gIHZhciBwYXJlbnQsIGRvbWFpbiwgZm47XG4gIGlmKGlzTm9kZSAmJiAocGFyZW50ID0gcHJvY2Vzcy5kb21haW4pKXtcbiAgICBwcm9jZXNzLmRvbWFpbiA9IG51bGw7XG4gICAgcGFyZW50LmV4aXQoKTtcbiAgfVxuICB3aGlsZShoZWFkKXtcbiAgICBkb21haW4gPSBoZWFkLmRvbWFpbjtcbiAgICBmbiAgICAgPSBoZWFkLmZuO1xuICAgIGlmKGRvbWFpbilkb21haW4uZW50ZXIoKTtcbiAgICBmbigpOyAvLyA8LSBjdXJyZW50bHkgd2UgdXNlIGl0IG9ubHkgZm9yIFByb21pc2UgLSB0cnkgLyBjYXRjaCBub3QgcmVxdWlyZWRcbiAgICBpZihkb21haW4pZG9tYWluLmV4aXQoKTtcbiAgICBoZWFkID0gaGVhZC5uZXh0O1xuICB9IGxhc3QgPSB1bmRlZmluZWQ7XG4gIGlmKHBhcmVudClwYXJlbnQuZW50ZXIoKTtcbn07XG5cbi8vIE5vZGUuanNcbmlmKGlzTm9kZSl7XG4gIG5vdGlmeSA9IGZ1bmN0aW9uKCl7XG4gICAgcHJvY2Vzcy5uZXh0VGljayhmbHVzaCk7XG4gIH07XG4vLyBicm93c2VycyB3aXRoIE11dGF0aW9uT2JzZXJ2ZXJcbn0gZWxzZSBpZihPYnNlcnZlcil7XG4gIHZhciB0b2dnbGUgPSAxXG4gICAgLCBub2RlICAgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG4gIG5ldyBPYnNlcnZlcihmbHVzaCkub2JzZXJ2ZShub2RlLCB7Y2hhcmFjdGVyRGF0YTogdHJ1ZX0pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ld1xuICBub3RpZnkgPSBmdW5jdGlvbigpe1xuICAgIG5vZGUuZGF0YSA9IHRvZ2dsZSA9IC10b2dnbGU7XG4gIH07XG4vLyBlbnZpcm9ubWVudHMgd2l0aCBtYXliZSBub24tY29tcGxldGVseSBjb3JyZWN0LCBidXQgZXhpc3RlbnQgUHJvbWlzZVxufSBlbHNlIGlmKFByb21pc2UgJiYgUHJvbWlzZS5yZXNvbHZlKXtcbiAgbm90aWZ5ID0gZnVuY3Rpb24oKXtcbiAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZsdXNoKTtcbiAgfTtcbi8vIGZvciBvdGhlciBlbnZpcm9ubWVudHMgLSBtYWNyb3Rhc2sgYmFzZWQgb246XG4vLyAtIHNldEltbWVkaWF0ZVxuLy8gLSBNZXNzYWdlQ2hhbm5lbFxuLy8gLSB3aW5kb3cucG9zdE1lc3NhZ1xuLy8gLSBvbnJlYWR5c3RhdGVjaGFuZ2Vcbi8vIC0gc2V0VGltZW91dFxufSBlbHNlIHtcbiAgbm90aWZ5ID0gZnVuY3Rpb24oKXtcbiAgICAvLyBzdHJhbmdlIElFICsgd2VicGFjayBkZXYgc2VydmVyIGJ1ZyAtIHVzZSAuY2FsbChnbG9iYWwpXG4gICAgbWFjcm90YXNrLmNhbGwoZ2xvYmFsLCBmbHVzaCk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYXNhcChmbil7XG4gIHZhciB0YXNrID0ge2ZuOiBmbiwgbmV4dDogdW5kZWZpbmVkLCBkb21haW46IGlzTm9kZSAmJiBwcm9jZXNzLmRvbWFpbn07XG4gIGlmKGxhc3QpbGFzdC5uZXh0ID0gdGFzaztcbiAgaWYoIWhlYWQpe1xuICAgIGhlYWQgPSB0YXNrO1xuICAgIG5vdGlmeSgpO1xuICB9IGxhc3QgPSB0YXNrO1xufTsiLCIvLyAxOS4xLjIuMSBPYmplY3QuYXNzaWduKHRhcmdldCwgc291cmNlLCAuLi4pXG52YXIgJCAgICAgICAgPSByZXF1aXJlKCcuLyQnKVxuICAsIHRvT2JqZWN0ID0gcmVxdWlyZSgnLi8kLnRvLW9iamVjdCcpXG4gICwgSU9iamVjdCAgPSByZXF1aXJlKCcuLyQuaW9iamVjdCcpO1xuXG4vLyBzaG91bGQgd29yayB3aXRoIHN5bWJvbHMgYW5kIHNob3VsZCBoYXZlIGRldGVybWluaXN0aWMgcHJvcGVydHkgb3JkZXIgKFY4IGJ1Zylcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi8kLmZhaWxzJykoZnVuY3Rpb24oKXtcbiAgdmFyIGEgPSBPYmplY3QuYXNzaWduXG4gICAgLCBBID0ge31cbiAgICAsIEIgPSB7fVxuICAgICwgUyA9IFN5bWJvbCgpXG4gICAgLCBLID0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0JztcbiAgQVtTXSA9IDc7XG4gIEsuc3BsaXQoJycpLmZvckVhY2goZnVuY3Rpb24oayl7IEJba10gPSBrOyB9KTtcbiAgcmV0dXJuIGEoe30sIEEpW1NdICE9IDcgfHwgT2JqZWN0LmtleXMoYSh7fSwgQikpLmpvaW4oJycpICE9IEs7XG59KSA/IGZ1bmN0aW9uIGFzc2lnbih0YXJnZXQsIHNvdXJjZSl7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgdmFyIFQgICAgID0gdG9PYmplY3QodGFyZ2V0KVxuICAgICwgJCQgICAgPSBhcmd1bWVudHNcbiAgICAsICQkbGVuID0gJCQubGVuZ3RoXG4gICAgLCBpbmRleCA9IDFcbiAgICAsIGdldEtleXMgICAgPSAkLmdldEtleXNcbiAgICAsIGdldFN5bWJvbHMgPSAkLmdldFN5bWJvbHNcbiAgICAsIGlzRW51bSAgICAgPSAkLmlzRW51bTtcbiAgd2hpbGUoJCRsZW4gPiBpbmRleCl7XG4gICAgdmFyIFMgICAgICA9IElPYmplY3QoJCRbaW5kZXgrK10pXG4gICAgICAsIGtleXMgICA9IGdldFN5bWJvbHMgPyBnZXRLZXlzKFMpLmNvbmNhdChnZXRTeW1ib2xzKFMpKSA6IGdldEtleXMoUylcbiAgICAgICwgbGVuZ3RoID0ga2V5cy5sZW5ndGhcbiAgICAgICwgaiAgICAgID0gMFxuICAgICAgLCBrZXk7XG4gICAgd2hpbGUobGVuZ3RoID4gailpZihpc0VudW0uY2FsbChTLCBrZXkgPSBrZXlzW2orK10pKVRba2V5XSA9IFNba2V5XTtcbiAgfVxuICByZXR1cm4gVDtcbn0gOiBPYmplY3QuYXNzaWduOyIsIi8vIG1vc3QgT2JqZWN0IG1ldGhvZHMgYnkgRVM2IHNob3VsZCBhY2NlcHQgcHJpbWl0aXZlc1xudmFyICRleHBvcnQgPSByZXF1aXJlKCcuLyQuZXhwb3J0JylcbiAgLCBjb3JlICAgID0gcmVxdWlyZSgnLi8kLmNvcmUnKVxuICAsIGZhaWxzICAgPSByZXF1aXJlKCcuLyQuZmFpbHMnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oS0VZLCBleGVjKXtcbiAgdmFyIGZuICA9IChjb3JlLk9iamVjdCB8fCB7fSlbS0VZXSB8fCBPYmplY3RbS0VZXVxuICAgICwgZXhwID0ge307XG4gIGV4cFtLRVldID0gZXhlYyhmbik7XG4gICRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogZmFpbHMoZnVuY3Rpb24oKXsgZm4oMSk7IH0pLCAnT2JqZWN0JywgZXhwKTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihiaXRtYXAsIHZhbHVlKXtcbiAgcmV0dXJuIHtcbiAgICBlbnVtZXJhYmxlICA6ICEoYml0bWFwICYgMSksXG4gICAgY29uZmlndXJhYmxlOiAhKGJpdG1hcCAmIDIpLFxuICAgIHdyaXRhYmxlICAgIDogIShiaXRtYXAgJiA0KSxcbiAgICB2YWx1ZSAgICAgICA6IHZhbHVlXG4gIH07XG59OyIsInZhciByZWRlZmluZSA9IHJlcXVpcmUoJy4vJC5yZWRlZmluZScpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih0YXJnZXQsIHNyYyl7XG4gIGZvcih2YXIga2V5IGluIHNyYylyZWRlZmluZSh0YXJnZXQsIGtleSwgc3JjW2tleV0pO1xuICByZXR1cm4gdGFyZ2V0O1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vJC5oaWRlJyk7IiwiLy8gNy4yLjkgU2FtZVZhbHVlKHgsIHkpXG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5pcyB8fCBmdW5jdGlvbiBpcyh4LCB5KXtcbiAgcmV0dXJuIHggPT09IHkgPyB4ICE9PSAwIHx8IDEgLyB4ID09PSAxIC8geSA6IHggIT0geCAmJiB5ICE9IHk7XG59OyIsIi8vIFdvcmtzIHdpdGggX19wcm90b19fIG9ubHkuIE9sZCB2OCBjYW4ndCB3b3JrIHdpdGggbnVsbCBwcm90byBvYmplY3RzLlxuLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cbnZhciBnZXREZXNjICA9IHJlcXVpcmUoJy4vJCcpLmdldERlc2NcbiAgLCBpc09iamVjdCA9IHJlcXVpcmUoJy4vJC5pcy1vYmplY3QnKVxuICAsIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi8kLmFuLW9iamVjdCcpO1xudmFyIGNoZWNrID0gZnVuY3Rpb24oTywgcHJvdG8pe1xuICBhbk9iamVjdChPKTtcbiAgaWYoIWlzT2JqZWN0KHByb3RvKSAmJiBwcm90byAhPT0gbnVsbCl0aHJvdyBUeXBlRXJyb3IocHJvdG8gKyBcIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSFcIik7XG59O1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHNldDogT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8ICgnX19wcm90b19fJyBpbiB7fSA/IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICBmdW5jdGlvbih0ZXN0LCBidWdneSwgc2V0KXtcbiAgICAgIHRyeSB7XG4gICAgICAgIHNldCA9IHJlcXVpcmUoJy4vJC5jdHgnKShGdW5jdGlvbi5jYWxsLCBnZXREZXNjKE9iamVjdC5wcm90b3R5cGUsICdfX3Byb3RvX18nKS5zZXQsIDIpO1xuICAgICAgICBzZXQodGVzdCwgW10pO1xuICAgICAgICBidWdneSA9ICEodGVzdCBpbnN0YW5jZW9mIEFycmF5KTtcbiAgICAgIH0gY2F0Y2goZSl7IGJ1Z2d5ID0gdHJ1ZTsgfVxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKE8sIHByb3RvKXtcbiAgICAgICAgY2hlY2soTywgcHJvdG8pO1xuICAgICAgICBpZihidWdneSlPLl9fcHJvdG9fXyA9IHByb3RvO1xuICAgICAgICBlbHNlIHNldChPLCBwcm90byk7XG4gICAgICAgIHJldHVybiBPO1xuICAgICAgfTtcbiAgICB9KHt9LCBmYWxzZSkgOiB1bmRlZmluZWQpLFxuICBjaGVjazogY2hlY2tcbn07IiwiJ3VzZSBzdHJpY3QnO1xudmFyIGNvcmUgICAgICAgID0gcmVxdWlyZSgnLi8kLmNvcmUnKVxuICAsICQgICAgICAgICAgID0gcmVxdWlyZSgnLi8kJylcbiAgLCBERVNDUklQVE9SUyA9IHJlcXVpcmUoJy4vJC5kZXNjcmlwdG9ycycpXG4gICwgU1BFQ0lFUyAgICAgPSByZXF1aXJlKCcuLyQud2tzJykoJ3NwZWNpZXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihLRVkpe1xuICB2YXIgQyA9IGNvcmVbS0VZXTtcbiAgaWYoREVTQ1JJUFRPUlMgJiYgQyAmJiAhQ1tTUEVDSUVTXSkkLnNldERlc2MoQywgU1BFQ0lFUywge1xuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzOyB9XG4gIH0pO1xufTsiLCJ2YXIgZGVmID0gcmVxdWlyZSgnLi8kJykuc2V0RGVzY1xuICAsIGhhcyA9IHJlcXVpcmUoJy4vJC5oYXMnKVxuICAsIFRBRyA9IHJlcXVpcmUoJy4vJC53a3MnKSgndG9TdHJpbmdUYWcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCwgdGFnLCBzdGF0KXtcbiAgaWYoaXQgJiYgIWhhcyhpdCA9IHN0YXQgPyBpdCA6IGl0LnByb3RvdHlwZSwgVEFHKSlkZWYoaXQsIFRBRywge2NvbmZpZ3VyYWJsZTogdHJ1ZSwgdmFsdWU6IHRhZ30pO1xufTsiLCJ2YXIgZ2xvYmFsID0gcmVxdWlyZSgnLi8kLmdsb2JhbCcpXG4gICwgU0hBUkVEID0gJ19fY29yZS1qc19zaGFyZWRfXydcbiAgLCBzdG9yZSAgPSBnbG9iYWxbU0hBUkVEXSB8fCAoZ2xvYmFsW1NIQVJFRF0gPSB7fSk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGtleSl7XG4gIHJldHVybiBzdG9yZVtrZXldIHx8IChzdG9yZVtrZXldID0ge30pO1xufTsiLCIvLyA3LjMuMjAgU3BlY2llc0NvbnN0cnVjdG9yKE8sIGRlZmF1bHRDb25zdHJ1Y3RvcilcbnZhciBhbk9iamVjdCAgPSByZXF1aXJlKCcuLyQuYW4tb2JqZWN0JylcbiAgLCBhRnVuY3Rpb24gPSByZXF1aXJlKCcuLyQuYS1mdW5jdGlvbicpXG4gICwgU1BFQ0lFUyAgID0gcmVxdWlyZSgnLi8kLndrcycpKCdzcGVjaWVzJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKE8sIEQpe1xuICB2YXIgQyA9IGFuT2JqZWN0KE8pLmNvbnN0cnVjdG9yLCBTO1xuICByZXR1cm4gQyA9PT0gdW5kZWZpbmVkIHx8IChTID0gYW5PYmplY3QoQylbU1BFQ0lFU10pID09IHVuZGVmaW5lZCA/IEQgOiBhRnVuY3Rpb24oUyk7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIENvbnN0cnVjdG9yLCBuYW1lKXtcbiAgaWYoIShpdCBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSl0aHJvdyBUeXBlRXJyb3IobmFtZSArIFwiOiB1c2UgdGhlICduZXcnIG9wZXJhdG9yIVwiKTtcbiAgcmV0dXJuIGl0O1xufTsiLCJ2YXIgdG9JbnRlZ2VyID0gcmVxdWlyZSgnLi8kLnRvLWludGVnZXInKVxuICAsIGRlZmluZWQgICA9IHJlcXVpcmUoJy4vJC5kZWZpbmVkJyk7XG4vLyB0cnVlICAtPiBTdHJpbmcjYXRcbi8vIGZhbHNlIC0+IFN0cmluZyNjb2RlUG9pbnRBdFxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihUT19TVFJJTkcpe1xuICByZXR1cm4gZnVuY3Rpb24odGhhdCwgcG9zKXtcbiAgICB2YXIgcyA9IFN0cmluZyhkZWZpbmVkKHRoYXQpKVxuICAgICAgLCBpID0gdG9JbnRlZ2VyKHBvcylcbiAgICAgICwgbCA9IHMubGVuZ3RoXG4gICAgICAsIGEsIGI7XG4gICAgaWYoaSA8IDAgfHwgaSA+PSBsKXJldHVybiBUT19TVFJJTkcgPyAnJyA6IHVuZGVmaW5lZDtcbiAgICBhID0gcy5jaGFyQ29kZUF0KGkpO1xuICAgIHJldHVybiBhIDwgMHhkODAwIHx8IGEgPiAweGRiZmYgfHwgaSArIDEgPT09IGwgfHwgKGIgPSBzLmNoYXJDb2RlQXQoaSArIDEpKSA8IDB4ZGMwMCB8fCBiID4gMHhkZmZmXG4gICAgICA/IFRPX1NUUklORyA/IHMuY2hhckF0KGkpIDogYVxuICAgICAgOiBUT19TVFJJTkcgPyBzLnNsaWNlKGksIGkgKyAyKSA6IChhIC0gMHhkODAwIDw8IDEwKSArIChiIC0gMHhkYzAwKSArIDB4MTAwMDA7XG4gIH07XG59OyIsInZhciBjdHggICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuLyQuY3R4JylcbiAgLCBpbnZva2UgICAgICAgICAgICAgPSByZXF1aXJlKCcuLyQuaW52b2tlJylcbiAgLCBodG1sICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuLyQuaHRtbCcpXG4gICwgY2VsICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi8kLmRvbS1jcmVhdGUnKVxuICAsIGdsb2JhbCAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vJC5nbG9iYWwnKVxuICAsIHByb2Nlc3MgICAgICAgICAgICA9IGdsb2JhbC5wcm9jZXNzXG4gICwgc2V0VGFzayAgICAgICAgICAgID0gZ2xvYmFsLnNldEltbWVkaWF0ZVxuICAsIGNsZWFyVGFzayAgICAgICAgICA9IGdsb2JhbC5jbGVhckltbWVkaWF0ZVxuICAsIE1lc3NhZ2VDaGFubmVsICAgICA9IGdsb2JhbC5NZXNzYWdlQ2hhbm5lbFxuICAsIGNvdW50ZXIgICAgICAgICAgICA9IDBcbiAgLCBxdWV1ZSAgICAgICAgICAgICAgPSB7fVxuICAsIE9OUkVBRFlTVEFURUNIQU5HRSA9ICdvbnJlYWR5c3RhdGVjaGFuZ2UnXG4gICwgZGVmZXIsIGNoYW5uZWwsIHBvcnQ7XG52YXIgcnVuID0gZnVuY3Rpb24oKXtcbiAgdmFyIGlkID0gK3RoaXM7XG4gIGlmKHF1ZXVlLmhhc093blByb3BlcnR5KGlkKSl7XG4gICAgdmFyIGZuID0gcXVldWVbaWRdO1xuICAgIGRlbGV0ZSBxdWV1ZVtpZF07XG4gICAgZm4oKTtcbiAgfVxufTtcbnZhciBsaXN0bmVyID0gZnVuY3Rpb24oZXZlbnQpe1xuICBydW4uY2FsbChldmVudC5kYXRhKTtcbn07XG4vLyBOb2RlLmpzIDAuOSsgJiBJRTEwKyBoYXMgc2V0SW1tZWRpYXRlLCBvdGhlcndpc2U6XG5pZighc2V0VGFzayB8fCAhY2xlYXJUYXNrKXtcbiAgc2V0VGFzayA9IGZ1bmN0aW9uIHNldEltbWVkaWF0ZShmbil7XG4gICAgdmFyIGFyZ3MgPSBbXSwgaSA9IDE7XG4gICAgd2hpbGUoYXJndW1lbnRzLmxlbmd0aCA+IGkpYXJncy5wdXNoKGFyZ3VtZW50c1tpKytdKTtcbiAgICBxdWV1ZVsrK2NvdW50ZXJdID0gZnVuY3Rpb24oKXtcbiAgICAgIGludm9rZSh0eXBlb2YgZm4gPT0gJ2Z1bmN0aW9uJyA/IGZuIDogRnVuY3Rpb24oZm4pLCBhcmdzKTtcbiAgICB9O1xuICAgIGRlZmVyKGNvdW50ZXIpO1xuICAgIHJldHVybiBjb3VudGVyO1xuICB9O1xuICBjbGVhclRhc2sgPSBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShpZCl7XG4gICAgZGVsZXRlIHF1ZXVlW2lkXTtcbiAgfTtcbiAgLy8gTm9kZS5qcyAwLjgtXG4gIGlmKHJlcXVpcmUoJy4vJC5jb2YnKShwcm9jZXNzKSA9PSAncHJvY2Vzcycpe1xuICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpe1xuICAgICAgcHJvY2Vzcy5uZXh0VGljayhjdHgocnVuLCBpZCwgMSkpO1xuICAgIH07XG4gIC8vIEJyb3dzZXJzIHdpdGggTWVzc2FnZUNoYW5uZWwsIGluY2x1ZGVzIFdlYldvcmtlcnNcbiAgfSBlbHNlIGlmKE1lc3NhZ2VDaGFubmVsKXtcbiAgICBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsO1xuICAgIHBvcnQgICAgPSBjaGFubmVsLnBvcnQyO1xuICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gbGlzdG5lcjtcbiAgICBkZWZlciA9IGN0eChwb3J0LnBvc3RNZXNzYWdlLCBwb3J0LCAxKTtcbiAgLy8gQnJvd3NlcnMgd2l0aCBwb3N0TWVzc2FnZSwgc2tpcCBXZWJXb3JrZXJzXG4gIC8vIElFOCBoYXMgcG9zdE1lc3NhZ2UsIGJ1dCBpdCdzIHN5bmMgJiB0eXBlb2YgaXRzIHBvc3RNZXNzYWdlIGlzICdvYmplY3QnXG4gIH0gZWxzZSBpZihnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lciAmJiB0eXBlb2YgcG9zdE1lc3NhZ2UgPT0gJ2Z1bmN0aW9uJyAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpe1xuICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpe1xuICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKGlkICsgJycsICcqJyk7XG4gICAgfTtcbiAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGxpc3RuZXIsIGZhbHNlKTtcbiAgLy8gSUU4LVxuICB9IGVsc2UgaWYoT05SRUFEWVNUQVRFQ0hBTkdFIGluIGNlbCgnc2NyaXB0Jykpe1xuICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpe1xuICAgICAgaHRtbC5hcHBlbmRDaGlsZChjZWwoJ3NjcmlwdCcpKVtPTlJFQURZU1RBVEVDSEFOR0VdID0gZnVuY3Rpb24oKXtcbiAgICAgICAgaHRtbC5yZW1vdmVDaGlsZCh0aGlzKTtcbiAgICAgICAgcnVuLmNhbGwoaWQpO1xuICAgICAgfTtcbiAgICB9O1xuICAvLyBSZXN0IG9sZCBicm93c2Vyc1xuICB9IGVsc2Uge1xuICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpe1xuICAgICAgc2V0VGltZW91dChjdHgocnVuLCBpZCwgMSksIDApO1xuICAgIH07XG4gIH1cbn1cbm1vZHVsZS5leHBvcnRzID0ge1xuICBzZXQ6ICAgc2V0VGFzayxcbiAgY2xlYXI6IGNsZWFyVGFza1xufTsiLCIvLyA3LjEuNCBUb0ludGVnZXJcbnZhciBjZWlsICA9IE1hdGguY2VpbFxuICAsIGZsb29yID0gTWF0aC5mbG9vcjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gaXNOYU4oaXQgPSAraXQpID8gMCA6IChpdCA+IDAgPyBmbG9vciA6IGNlaWwpKGl0KTtcbn07IiwiLy8gdG8gaW5kZXhlZCBvYmplY3QsIHRvT2JqZWN0IHdpdGggZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBzdHJpbmdzXG52YXIgSU9iamVjdCA9IHJlcXVpcmUoJy4vJC5pb2JqZWN0JylcbiAgLCBkZWZpbmVkID0gcmVxdWlyZSgnLi8kLmRlZmluZWQnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gSU9iamVjdChkZWZpbmVkKGl0KSk7XG59OyIsIi8vIDcuMS4xNSBUb0xlbmd0aFxudmFyIHRvSW50ZWdlciA9IHJlcXVpcmUoJy4vJC50by1pbnRlZ2VyJylcbiAgLCBtaW4gICAgICAgPSBNYXRoLm1pbjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICByZXR1cm4gaXQgPiAwID8gbWluKHRvSW50ZWdlcihpdCksIDB4MWZmZmZmZmZmZmZmZmYpIDogMDsgLy8gcG93KDIsIDUzKSAtIDEgPT0gOTAwNzE5OTI1NDc0MDk5MVxufTsiLCIvLyA3LjEuMTMgVG9PYmplY3QoYXJndW1lbnQpXG52YXIgZGVmaW5lZCA9IHJlcXVpcmUoJy4vJC5kZWZpbmVkJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIE9iamVjdChkZWZpbmVkKGl0KSk7XG59OyIsInZhciBpZCA9IDBcbiAgLCBweCA9IE1hdGgucmFuZG9tKCk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGtleSl7XG4gIHJldHVybiAnU3ltYm9sKCcuY29uY2F0KGtleSA9PT0gdW5kZWZpbmVkID8gJycgOiBrZXksICcpXycsICgrK2lkICsgcHgpLnRvU3RyaW5nKDM2KSk7XG59OyIsInZhciBzdG9yZSAgPSByZXF1aXJlKCcuLyQuc2hhcmVkJykoJ3drcycpXG4gICwgdWlkICAgID0gcmVxdWlyZSgnLi8kLnVpZCcpXG4gICwgU3ltYm9sID0gcmVxdWlyZSgnLi8kLmdsb2JhbCcpLlN5bWJvbDtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obmFtZSl7XG4gIHJldHVybiBzdG9yZVtuYW1lXSB8fCAoc3RvcmVbbmFtZV0gPVxuICAgIFN5bWJvbCAmJiBTeW1ib2xbbmFtZV0gfHwgKFN5bWJvbCB8fCB1aWQpKCdTeW1ib2wuJyArIG5hbWUpKTtcbn07IiwidmFyIGNsYXNzb2YgICA9IHJlcXVpcmUoJy4vJC5jbGFzc29mJylcbiAgLCBJVEVSQVRPUiAgPSByZXF1aXJlKCcuLyQud2tzJykoJ2l0ZXJhdG9yJylcbiAgLCBJdGVyYXRvcnMgPSByZXF1aXJlKCcuLyQuaXRlcmF0b3JzJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vJC5jb3JlJykuZ2V0SXRlcmF0b3JNZXRob2QgPSBmdW5jdGlvbihpdCl7XG4gIGlmKGl0ICE9IHVuZGVmaW5lZClyZXR1cm4gaXRbSVRFUkFUT1JdXG4gICAgfHwgaXRbJ0BAaXRlcmF0b3InXVxuICAgIHx8IEl0ZXJhdG9yc1tjbGFzc29mKGl0KV07XG59OyIsInZhciBhbk9iamVjdCA9IHJlcXVpcmUoJy4vJC5hbi1vYmplY3QnKVxuICAsIGdldCAgICAgID0gcmVxdWlyZSgnLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QnKTtcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi8kLmNvcmUnKS5nZXRJdGVyYXRvciA9IGZ1bmN0aW9uKGl0KXtcbiAgdmFyIGl0ZXJGbiA9IGdldChpdCk7XG4gIGlmKHR5cGVvZiBpdGVyRm4gIT0gJ2Z1bmN0aW9uJyl0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBpdGVyYWJsZSEnKTtcbiAgcmV0dXJuIGFuT2JqZWN0KGl0ZXJGbi5jYWxsKGl0KSk7XG59OyIsIid1c2Ugc3RyaWN0JztcbnZhciBjdHggICAgICAgICA9IHJlcXVpcmUoJy4vJC5jdHgnKVxuICAsICRleHBvcnQgICAgID0gcmVxdWlyZSgnLi8kLmV4cG9ydCcpXG4gICwgdG9PYmplY3QgICAgPSByZXF1aXJlKCcuLyQudG8tb2JqZWN0JylcbiAgLCBjYWxsICAgICAgICA9IHJlcXVpcmUoJy4vJC5pdGVyLWNhbGwnKVxuICAsIGlzQXJyYXlJdGVyID0gcmVxdWlyZSgnLi8kLmlzLWFycmF5LWl0ZXInKVxuICAsIHRvTGVuZ3RoICAgID0gcmVxdWlyZSgnLi8kLnRvLWxlbmd0aCcpXG4gICwgZ2V0SXRlckZuICAgPSByZXF1aXJlKCcuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCcpO1xuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhcmVxdWlyZSgnLi8kLml0ZXItZGV0ZWN0JykoZnVuY3Rpb24oaXRlcil7IEFycmF5LmZyb20oaXRlcik7IH0pLCAnQXJyYXknLCB7XG4gIC8vIDIyLjEuMi4xIEFycmF5LmZyb20oYXJyYXlMaWtlLCBtYXBmbiA9IHVuZGVmaW5lZCwgdGhpc0FyZyA9IHVuZGVmaW5lZClcbiAgZnJvbTogZnVuY3Rpb24gZnJvbShhcnJheUxpa2UvKiwgbWFwZm4gPSB1bmRlZmluZWQsIHRoaXNBcmcgPSB1bmRlZmluZWQqLyl7XG4gICAgdmFyIE8gICAgICAgPSB0b09iamVjdChhcnJheUxpa2UpXG4gICAgICAsIEMgICAgICAgPSB0eXBlb2YgdGhpcyA9PSAnZnVuY3Rpb24nID8gdGhpcyA6IEFycmF5XG4gICAgICAsICQkICAgICAgPSBhcmd1bWVudHNcbiAgICAgICwgJCRsZW4gICA9ICQkLmxlbmd0aFxuICAgICAgLCBtYXBmbiAgID0gJCRsZW4gPiAxID8gJCRbMV0gOiB1bmRlZmluZWRcbiAgICAgICwgbWFwcGluZyA9IG1hcGZuICE9PSB1bmRlZmluZWRcbiAgICAgICwgaW5kZXggICA9IDBcbiAgICAgICwgaXRlckZuICA9IGdldEl0ZXJGbihPKVxuICAgICAgLCBsZW5ndGgsIHJlc3VsdCwgc3RlcCwgaXRlcmF0b3I7XG4gICAgaWYobWFwcGluZyltYXBmbiA9IGN0eChtYXBmbiwgJCRsZW4gPiAyID8gJCRbMl0gOiB1bmRlZmluZWQsIDIpO1xuICAgIC8vIGlmIG9iamVjdCBpc24ndCBpdGVyYWJsZSBvciBpdCdzIGFycmF5IHdpdGggZGVmYXVsdCBpdGVyYXRvciAtIHVzZSBzaW1wbGUgY2FzZVxuICAgIGlmKGl0ZXJGbiAhPSB1bmRlZmluZWQgJiYgIShDID09IEFycmF5ICYmIGlzQXJyYXlJdGVyKGl0ZXJGbikpKXtcbiAgICAgIGZvcihpdGVyYXRvciA9IGl0ZXJGbi5jYWxsKE8pLCByZXN1bHQgPSBuZXcgQzsgIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lOyBpbmRleCsrKXtcbiAgICAgICAgcmVzdWx0W2luZGV4XSA9IG1hcHBpbmcgPyBjYWxsKGl0ZXJhdG9yLCBtYXBmbiwgW3N0ZXAudmFsdWUsIGluZGV4XSwgdHJ1ZSkgOiBzdGVwLnZhbHVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aCk7XG4gICAgICBmb3IocmVzdWx0ID0gbmV3IEMobGVuZ3RoKTsgbGVuZ3RoID4gaW5kZXg7IGluZGV4Kyspe1xuICAgICAgICByZXN1bHRbaW5kZXhdID0gbWFwcGluZyA/IG1hcGZuKE9baW5kZXhdLCBpbmRleCkgOiBPW2luZGV4XTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmVzdWx0Lmxlbmd0aCA9IGluZGV4O1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGFkZFRvVW5zY29wYWJsZXMgPSByZXF1aXJlKCcuLyQuYWRkLXRvLXVuc2NvcGFibGVzJylcbiAgLCBzdGVwICAgICAgICAgICAgID0gcmVxdWlyZSgnLi8kLml0ZXItc3RlcCcpXG4gICwgSXRlcmF0b3JzICAgICAgICA9IHJlcXVpcmUoJy4vJC5pdGVyYXRvcnMnKVxuICAsIHRvSU9iamVjdCAgICAgICAgPSByZXF1aXJlKCcuLyQudG8taW9iamVjdCcpO1xuXG4vLyAyMi4xLjMuNCBBcnJheS5wcm90b3R5cGUuZW50cmllcygpXG4vLyAyMi4xLjMuMTMgQXJyYXkucHJvdG90eXBlLmtleXMoKVxuLy8gMjIuMS4zLjI5IEFycmF5LnByb3RvdHlwZS52YWx1ZXMoKVxuLy8gMjIuMS4zLjMwIEFycmF5LnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vJC5pdGVyLWRlZmluZScpKEFycmF5LCAnQXJyYXknLCBmdW5jdGlvbihpdGVyYXRlZCwga2luZCl7XG4gIHRoaXMuX3QgPSB0b0lPYmplY3QoaXRlcmF0ZWQpOyAvLyB0YXJnZXRcbiAgdGhpcy5faSA9IDA7ICAgICAgICAgICAgICAgICAgIC8vIG5leHQgaW5kZXhcbiAgdGhpcy5fayA9IGtpbmQ7ICAgICAgICAgICAgICAgIC8vIGtpbmRcbi8vIDIyLjEuNS4yLjEgJUFycmF5SXRlcmF0b3JQcm90b3R5cGUlLm5leHQoKVxufSwgZnVuY3Rpb24oKXtcbiAgdmFyIE8gICAgID0gdGhpcy5fdFxuICAgICwga2luZCAgPSB0aGlzLl9rXG4gICAgLCBpbmRleCA9IHRoaXMuX2krKztcbiAgaWYoIU8gfHwgaW5kZXggPj0gTy5sZW5ndGgpe1xuICAgIHRoaXMuX3QgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHN0ZXAoMSk7XG4gIH1cbiAgaWYoa2luZCA9PSAna2V5cycgIClyZXR1cm4gc3RlcCgwLCBpbmRleCk7XG4gIGlmKGtpbmQgPT0gJ3ZhbHVlcycpcmV0dXJuIHN0ZXAoMCwgT1tpbmRleF0pO1xuICByZXR1cm4gc3RlcCgwLCBbaW5kZXgsIE9baW5kZXhdXSk7XG59LCAndmFsdWVzJyk7XG5cbi8vIGFyZ3VtZW50c0xpc3RbQEBpdGVyYXRvcl0gaXMgJUFycmF5UHJvdG9fdmFsdWVzJSAoOS40LjQuNiwgOS40LjQuNylcbkl0ZXJhdG9ycy5Bcmd1bWVudHMgPSBJdGVyYXRvcnMuQXJyYXk7XG5cbmFkZFRvVW5zY29wYWJsZXMoJ2tleXMnKTtcbmFkZFRvVW5zY29wYWJsZXMoJ3ZhbHVlcycpO1xuYWRkVG9VbnNjb3BhYmxlcygnZW50cmllcycpOyIsIi8vIDE5LjEuMy4xIE9iamVjdC5hc3NpZ24odGFyZ2V0LCBzb3VyY2UpXG52YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vJC5leHBvcnQnKTtcblxuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYsICdPYmplY3QnLCB7YXNzaWduOiByZXF1aXJlKCcuLyQub2JqZWN0LWFzc2lnbicpfSk7IiwiLy8gMTkuMS4yLjE0IE9iamVjdC5rZXlzKE8pXG52YXIgdG9PYmplY3QgPSByZXF1aXJlKCcuLyQudG8tb2JqZWN0Jyk7XG5cbnJlcXVpcmUoJy4vJC5vYmplY3Qtc2FwJykoJ2tleXMnLCBmdW5jdGlvbigka2V5cyl7XG4gIHJldHVybiBmdW5jdGlvbiBrZXlzKGl0KXtcbiAgICByZXR1cm4gJGtleXModG9PYmplY3QoaXQpKTtcbiAgfTtcbn0pOyIsbnVsbCwiJ3VzZSBzdHJpY3QnO1xudmFyICQgICAgICAgICAgPSByZXF1aXJlKCcuLyQnKVxuICAsIExJQlJBUlkgICAgPSByZXF1aXJlKCcuLyQubGlicmFyeScpXG4gICwgZ2xvYmFsICAgICA9IHJlcXVpcmUoJy4vJC5nbG9iYWwnKVxuICAsIGN0eCAgICAgICAgPSByZXF1aXJlKCcuLyQuY3R4JylcbiAgLCBjbGFzc29mICAgID0gcmVxdWlyZSgnLi8kLmNsYXNzb2YnKVxuICAsICRleHBvcnQgICAgPSByZXF1aXJlKCcuLyQuZXhwb3J0JylcbiAgLCBpc09iamVjdCAgID0gcmVxdWlyZSgnLi8kLmlzLW9iamVjdCcpXG4gICwgYW5PYmplY3QgICA9IHJlcXVpcmUoJy4vJC5hbi1vYmplY3QnKVxuICAsIGFGdW5jdGlvbiAgPSByZXF1aXJlKCcuLyQuYS1mdW5jdGlvbicpXG4gICwgc3RyaWN0TmV3ICA9IHJlcXVpcmUoJy4vJC5zdHJpY3QtbmV3JylcbiAgLCBmb3JPZiAgICAgID0gcmVxdWlyZSgnLi8kLmZvci1vZicpXG4gICwgc2V0UHJvdG8gICA9IHJlcXVpcmUoJy4vJC5zZXQtcHJvdG8nKS5zZXRcbiAgLCBzYW1lICAgICAgID0gcmVxdWlyZSgnLi8kLnNhbWUtdmFsdWUnKVxuICAsIFNQRUNJRVMgICAgPSByZXF1aXJlKCcuLyQud2tzJykoJ3NwZWNpZXMnKVxuICAsIHNwZWNpZXNDb25zdHJ1Y3RvciA9IHJlcXVpcmUoJy4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yJylcbiAgLCBhc2FwICAgICAgID0gcmVxdWlyZSgnLi8kLm1pY3JvdGFzaycpXG4gICwgUFJPTUlTRSAgICA9ICdQcm9taXNlJ1xuICAsIHByb2Nlc3MgICAgPSBnbG9iYWwucHJvY2Vzc1xuICAsIGlzTm9kZSAgICAgPSBjbGFzc29mKHByb2Nlc3MpID09ICdwcm9jZXNzJ1xuICAsIFAgICAgICAgICAgPSBnbG9iYWxbUFJPTUlTRV1cbiAgLCBlbXB0eSAgICAgID0gZnVuY3Rpb24oKXsgLyogZW1wdHkgKi8gfVxuICAsIFdyYXBwZXI7XG5cbnZhciB0ZXN0UmVzb2x2ZSA9IGZ1bmN0aW9uKHN1Yil7XG4gIHZhciB0ZXN0ID0gbmV3IFAoZW1wdHkpLCBwcm9taXNlO1xuICBpZihzdWIpdGVzdC5jb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKGV4ZWMpe1xuICAgIGV4ZWMoZW1wdHksIGVtcHR5KTtcbiAgfTtcbiAgKHByb21pc2UgPSBQLnJlc29sdmUodGVzdCkpWydjYXRjaCddKGVtcHR5KTtcbiAgcmV0dXJuIHByb21pc2UgPT09IHRlc3Q7XG59O1xuXG52YXIgVVNFX05BVElWRSA9IGZ1bmN0aW9uKCl7XG4gIHZhciB3b3JrcyA9IGZhbHNlO1xuICBmdW5jdGlvbiBQMih4KXtcbiAgICB2YXIgc2VsZiA9IG5ldyBQKHgpO1xuICAgIHNldFByb3RvKHNlbGYsIFAyLnByb3RvdHlwZSk7XG4gICAgcmV0dXJuIHNlbGY7XG4gIH1cbiAgdHJ5IHtcbiAgICB3b3JrcyA9IFAgJiYgUC5yZXNvbHZlICYmIHRlc3RSZXNvbHZlKCk7XG4gICAgc2V0UHJvdG8oUDIsIFApO1xuICAgIFAyLnByb3RvdHlwZSA9ICQuY3JlYXRlKFAucHJvdG90eXBlLCB7Y29uc3RydWN0b3I6IHt2YWx1ZTogUDJ9fSk7XG4gICAgLy8gYWN0dWFsIEZpcmVmb3ggaGFzIGJyb2tlbiBzdWJjbGFzcyBzdXBwb3J0LCB0ZXN0IHRoYXRcbiAgICBpZighKFAyLnJlc29sdmUoNSkudGhlbihmdW5jdGlvbigpe30pIGluc3RhbmNlb2YgUDIpKXtcbiAgICAgIHdvcmtzID0gZmFsc2U7XG4gICAgfVxuICAgIC8vIGFjdHVhbCBWOCBidWcsIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD00MTYyXG4gICAgaWYod29ya3MgJiYgcmVxdWlyZSgnLi8kLmRlc2NyaXB0b3JzJykpe1xuICAgICAgdmFyIHRoZW5hYmxlVGhlbkdvdHRlbiA9IGZhbHNlO1xuICAgICAgUC5yZXNvbHZlKCQuc2V0RGVzYyh7fSwgJ3RoZW4nLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKXsgdGhlbmFibGVUaGVuR290dGVuID0gdHJ1ZTsgfVxuICAgICAgfSkpO1xuICAgICAgd29ya3MgPSB0aGVuYWJsZVRoZW5Hb3R0ZW47XG4gICAgfVxuICB9IGNhdGNoKGUpeyB3b3JrcyA9IGZhbHNlOyB9XG4gIHJldHVybiB3b3Jrcztcbn0oKTtcblxuLy8gaGVscGVyc1xudmFyIHNhbWVDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKGEsIGIpe1xuICAvLyBsaWJyYXJ5IHdyYXBwZXIgc3BlY2lhbCBjYXNlXG4gIGlmKExJQlJBUlkgJiYgYSA9PT0gUCAmJiBiID09PSBXcmFwcGVyKXJldHVybiB0cnVlO1xuICByZXR1cm4gc2FtZShhLCBiKTtcbn07XG52YXIgZ2V0Q29uc3RydWN0b3IgPSBmdW5jdGlvbihDKXtcbiAgdmFyIFMgPSBhbk9iamVjdChDKVtTUEVDSUVTXTtcbiAgcmV0dXJuIFMgIT0gdW5kZWZpbmVkID8gUyA6IEM7XG59O1xudmFyIGlzVGhlbmFibGUgPSBmdW5jdGlvbihpdCl7XG4gIHZhciB0aGVuO1xuICByZXR1cm4gaXNPYmplY3QoaXQpICYmIHR5cGVvZiAodGhlbiA9IGl0LnRoZW4pID09ICdmdW5jdGlvbicgPyB0aGVuIDogZmFsc2U7XG59O1xudmFyIFByb21pc2VDYXBhYmlsaXR5ID0gZnVuY3Rpb24oQyl7XG4gIHZhciByZXNvbHZlLCByZWplY3Q7XG4gIHRoaXMucHJvbWlzZSA9IG5ldyBDKGZ1bmN0aW9uKCQkcmVzb2x2ZSwgJCRyZWplY3Qpe1xuICAgIGlmKHJlc29sdmUgIT09IHVuZGVmaW5lZCB8fCByZWplY3QgIT09IHVuZGVmaW5lZCl0aHJvdyBUeXBlRXJyb3IoJ0JhZCBQcm9taXNlIGNvbnN0cnVjdG9yJyk7XG4gICAgcmVzb2x2ZSA9ICQkcmVzb2x2ZTtcbiAgICByZWplY3QgID0gJCRyZWplY3Q7XG4gIH0pO1xuICB0aGlzLnJlc29sdmUgPSBhRnVuY3Rpb24ocmVzb2x2ZSksXG4gIHRoaXMucmVqZWN0ICA9IGFGdW5jdGlvbihyZWplY3QpXG59O1xudmFyIHBlcmZvcm0gPSBmdW5jdGlvbihleGVjKXtcbiAgdHJ5IHtcbiAgICBleGVjKCk7XG4gIH0gY2F0Y2goZSl7XG4gICAgcmV0dXJuIHtlcnJvcjogZX07XG4gIH1cbn07XG52YXIgbm90aWZ5ID0gZnVuY3Rpb24ocmVjb3JkLCBpc1JlamVjdCl7XG4gIGlmKHJlY29yZC5uKXJldHVybjtcbiAgcmVjb3JkLm4gPSB0cnVlO1xuICB2YXIgY2hhaW4gPSByZWNvcmQuYztcbiAgYXNhcChmdW5jdGlvbigpe1xuICAgIHZhciB2YWx1ZSA9IHJlY29yZC52XG4gICAgICAsIG9rICAgID0gcmVjb3JkLnMgPT0gMVxuICAgICAgLCBpICAgICA9IDA7XG4gICAgdmFyIHJ1biA9IGZ1bmN0aW9uKHJlYWN0aW9uKXtcbiAgICAgIHZhciBoYW5kbGVyID0gb2sgPyByZWFjdGlvbi5vayA6IHJlYWN0aW9uLmZhaWxcbiAgICAgICAgLCByZXNvbHZlID0gcmVhY3Rpb24ucmVzb2x2ZVxuICAgICAgICAsIHJlamVjdCAgPSByZWFjdGlvbi5yZWplY3RcbiAgICAgICAgLCByZXN1bHQsIHRoZW47XG4gICAgICB0cnkge1xuICAgICAgICBpZihoYW5kbGVyKXtcbiAgICAgICAgICBpZighb2spcmVjb3JkLmggPSB0cnVlO1xuICAgICAgICAgIHJlc3VsdCA9IGhhbmRsZXIgPT09IHRydWUgPyB2YWx1ZSA6IGhhbmRsZXIodmFsdWUpO1xuICAgICAgICAgIGlmKHJlc3VsdCA9PT0gcmVhY3Rpb24ucHJvbWlzZSl7XG4gICAgICAgICAgICByZWplY3QoVHlwZUVycm9yKCdQcm9taXNlLWNoYWluIGN5Y2xlJykpO1xuICAgICAgICAgIH0gZWxzZSBpZih0aGVuID0gaXNUaGVuYWJsZShyZXN1bHQpKXtcbiAgICAgICAgICAgIHRoZW4uY2FsbChyZXN1bHQsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSBlbHNlIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSBlbHNlIHJlamVjdCh2YWx1ZSk7XG4gICAgICB9IGNhdGNoKGUpe1xuICAgICAgICByZWplY3QoZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB3aGlsZShjaGFpbi5sZW5ndGggPiBpKXJ1bihjaGFpbltpKytdKTsgLy8gdmFyaWFibGUgbGVuZ3RoIC0gY2FuJ3QgdXNlIGZvckVhY2hcbiAgICBjaGFpbi5sZW5ndGggPSAwO1xuICAgIHJlY29yZC5uID0gZmFsc2U7XG4gICAgaWYoaXNSZWplY3Qpc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgdmFyIHByb21pc2UgPSByZWNvcmQucFxuICAgICAgICAsIGhhbmRsZXIsIGNvbnNvbGU7XG4gICAgICBpZihpc1VuaGFuZGxlZChwcm9taXNlKSl7XG4gICAgICAgIGlmKGlzTm9kZSl7XG4gICAgICAgICAgcHJvY2Vzcy5lbWl0KCd1bmhhbmRsZWRSZWplY3Rpb24nLCB2YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgIH0gZWxzZSBpZihoYW5kbGVyID0gZ2xvYmFsLm9udW5oYW5kbGVkcmVqZWN0aW9uKXtcbiAgICAgICAgICBoYW5kbGVyKHtwcm9taXNlOiBwcm9taXNlLCByZWFzb246IHZhbHVlfSk7XG4gICAgICAgIH0gZWxzZSBpZigoY29uc29sZSA9IGdsb2JhbC5jb25zb2xlKSAmJiBjb25zb2xlLmVycm9yKXtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb24nLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gcmVjb3JkLmEgPSB1bmRlZmluZWQ7XG4gICAgfSwgMSk7XG4gIH0pO1xufTtcbnZhciBpc1VuaGFuZGxlZCA9IGZ1bmN0aW9uKHByb21pc2Upe1xuICB2YXIgcmVjb3JkID0gcHJvbWlzZS5fZFxuICAgICwgY2hhaW4gID0gcmVjb3JkLmEgfHwgcmVjb3JkLmNcbiAgICAsIGkgICAgICA9IDBcbiAgICAsIHJlYWN0aW9uO1xuICBpZihyZWNvcmQuaClyZXR1cm4gZmFsc2U7XG4gIHdoaWxlKGNoYWluLmxlbmd0aCA+IGkpe1xuICAgIHJlYWN0aW9uID0gY2hhaW5baSsrXTtcbiAgICBpZihyZWFjdGlvbi5mYWlsIHx8ICFpc1VuaGFuZGxlZChyZWFjdGlvbi5wcm9taXNlKSlyZXR1cm4gZmFsc2U7XG4gIH0gcmV0dXJuIHRydWU7XG59O1xudmFyICRyZWplY3QgPSBmdW5jdGlvbih2YWx1ZSl7XG4gIHZhciByZWNvcmQgPSB0aGlzO1xuICBpZihyZWNvcmQuZClyZXR1cm47XG4gIHJlY29yZC5kID0gdHJ1ZTtcbiAgcmVjb3JkID0gcmVjb3JkLnIgfHwgcmVjb3JkOyAvLyB1bndyYXBcbiAgcmVjb3JkLnYgPSB2YWx1ZTtcbiAgcmVjb3JkLnMgPSAyO1xuICByZWNvcmQuYSA9IHJlY29yZC5jLnNsaWNlKCk7XG4gIG5vdGlmeShyZWNvcmQsIHRydWUpO1xufTtcbnZhciAkcmVzb2x2ZSA9IGZ1bmN0aW9uKHZhbHVlKXtcbiAgdmFyIHJlY29yZCA9IHRoaXNcbiAgICAsIHRoZW47XG4gIGlmKHJlY29yZC5kKXJldHVybjtcbiAgcmVjb3JkLmQgPSB0cnVlO1xuICByZWNvcmQgPSByZWNvcmQuciB8fCByZWNvcmQ7IC8vIHVud3JhcFxuICB0cnkge1xuICAgIGlmKHJlY29yZC5wID09PSB2YWx1ZSl0aHJvdyBUeXBlRXJyb3IoXCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZlwiKTtcbiAgICBpZih0aGVuID0gaXNUaGVuYWJsZSh2YWx1ZSkpe1xuICAgICAgYXNhcChmdW5jdGlvbigpe1xuICAgICAgICB2YXIgd3JhcHBlciA9IHtyOiByZWNvcmQsIGQ6IGZhbHNlfTsgLy8gd3JhcFxuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoZW4uY2FsbCh2YWx1ZSwgY3R4KCRyZXNvbHZlLCB3cmFwcGVyLCAxKSwgY3R4KCRyZWplY3QsIHdyYXBwZXIsIDEpKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAkcmVqZWN0LmNhbGwod3JhcHBlciwgZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZWNvcmQudiA9IHZhbHVlO1xuICAgICAgcmVjb3JkLnMgPSAxO1xuICAgICAgbm90aWZ5KHJlY29yZCwgZmFsc2UpO1xuICAgIH1cbiAgfSBjYXRjaChlKXtcbiAgICAkcmVqZWN0LmNhbGwoe3I6IHJlY29yZCwgZDogZmFsc2V9LCBlKTsgLy8gd3JhcFxuICB9XG59O1xuXG4vLyBjb25zdHJ1Y3RvciBwb2x5ZmlsbFxuaWYoIVVTRV9OQVRJVkUpe1xuICAvLyAyNS40LjMuMSBQcm9taXNlKGV4ZWN1dG9yKVxuICBQID0gZnVuY3Rpb24gUHJvbWlzZShleGVjdXRvcil7XG4gICAgYUZ1bmN0aW9uKGV4ZWN1dG9yKTtcbiAgICB2YXIgcmVjb3JkID0gdGhpcy5fZCA9IHtcbiAgICAgIHA6IHN0cmljdE5ldyh0aGlzLCBQLCBQUk9NSVNFKSwgICAgICAgICAvLyA8LSBwcm9taXNlXG4gICAgICBjOiBbXSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPC0gYXdhaXRpbmcgcmVhY3Rpb25zXG4gICAgICBhOiB1bmRlZmluZWQsICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPC0gY2hlY2tlZCBpbiBpc1VuaGFuZGxlZCByZWFjdGlvbnNcbiAgICAgIHM6IDAsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA8LSBzdGF0ZVxuICAgICAgZDogZmFsc2UsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDwtIGRvbmVcbiAgICAgIHY6IHVuZGVmaW5lZCwgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA8LSB2YWx1ZVxuICAgICAgaDogZmFsc2UsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDwtIGhhbmRsZWQgcmVqZWN0aW9uXG4gICAgICBuOiBmYWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPC0gbm90aWZ5XG4gICAgfTtcbiAgICB0cnkge1xuICAgICAgZXhlY3V0b3IoY3R4KCRyZXNvbHZlLCByZWNvcmQsIDEpLCBjdHgoJHJlamVjdCwgcmVjb3JkLCAxKSk7XG4gICAgfSBjYXRjaChlcnIpe1xuICAgICAgJHJlamVjdC5jYWxsKHJlY29yZCwgZXJyKTtcbiAgICB9XG4gIH07XG4gIHJlcXVpcmUoJy4vJC5yZWRlZmluZS1hbGwnKShQLnByb3RvdHlwZSwge1xuICAgIC8vIDI1LjQuNS4zIFByb21pc2UucHJvdG90eXBlLnRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpXG4gICAgdGhlbjogZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCl7XG4gICAgICB2YXIgcmVhY3Rpb24gPSBuZXcgUHJvbWlzZUNhcGFiaWxpdHkoc3BlY2llc0NvbnN0cnVjdG9yKHRoaXMsIFApKVxuICAgICAgICAsIHByb21pc2UgID0gcmVhY3Rpb24ucHJvbWlzZVxuICAgICAgICAsIHJlY29yZCAgID0gdGhpcy5fZDtcbiAgICAgIHJlYWN0aW9uLm9rICAgPSB0eXBlb2Ygb25GdWxmaWxsZWQgPT0gJ2Z1bmN0aW9uJyA/IG9uRnVsZmlsbGVkIDogdHJ1ZTtcbiAgICAgIHJlYWN0aW9uLmZhaWwgPSB0eXBlb2Ygb25SZWplY3RlZCA9PSAnZnVuY3Rpb24nICYmIG9uUmVqZWN0ZWQ7XG4gICAgICByZWNvcmQuYy5wdXNoKHJlYWN0aW9uKTtcbiAgICAgIGlmKHJlY29yZC5hKXJlY29yZC5hLnB1c2gocmVhY3Rpb24pO1xuICAgICAgaWYocmVjb3JkLnMpbm90aWZ5KHJlY29yZCwgZmFsc2UpO1xuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfSxcbiAgICAvLyAyNS40LjUuMSBQcm9taXNlLnByb3RvdHlwZS5jYXRjaChvblJlamVjdGVkKVxuICAgICdjYXRjaCc6IGZ1bmN0aW9uKG9uUmVqZWN0ZWQpe1xuICAgICAgcmV0dXJuIHRoaXMudGhlbih1bmRlZmluZWQsIG9uUmVqZWN0ZWQpO1xuICAgIH1cbiAgfSk7XG59XG5cbiRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5XICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIHtQcm9taXNlOiBQfSk7XG5yZXF1aXJlKCcuLyQuc2V0LXRvLXN0cmluZy10YWcnKShQLCBQUk9NSVNFKTtcbnJlcXVpcmUoJy4vJC5zZXQtc3BlY2llcycpKFBST01JU0UpO1xuV3JhcHBlciA9IHJlcXVpcmUoJy4vJC5jb3JlJylbUFJPTUlTRV07XG5cbi8vIHN0YXRpY3NcbiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIFBST01JU0UsIHtcbiAgLy8gMjUuNC40LjUgUHJvbWlzZS5yZWplY3QocilcbiAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3Qocil7XG4gICAgdmFyIGNhcGFiaWxpdHkgPSBuZXcgUHJvbWlzZUNhcGFiaWxpdHkodGhpcylcbiAgICAgICwgJCRyZWplY3QgICA9IGNhcGFiaWxpdHkucmVqZWN0O1xuICAgICQkcmVqZWN0KHIpO1xuICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7XG4gIH1cbn0pO1xuJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAoIVVTRV9OQVRJVkUgfHwgdGVzdFJlc29sdmUodHJ1ZSkpLCBQUk9NSVNFLCB7XG4gIC8vIDI1LjQuNC42IFByb21pc2UucmVzb2x2ZSh4KVxuICByZXNvbHZlOiBmdW5jdGlvbiByZXNvbHZlKHgpe1xuICAgIC8vIGluc3RhbmNlb2YgaW5zdGVhZCBvZiBpbnRlcm5hbCBzbG90IGNoZWNrIGJlY2F1c2Ugd2Ugc2hvdWxkIGZpeCBpdCB3aXRob3V0IHJlcGxhY2VtZW50IG5hdGl2ZSBQcm9taXNlIGNvcmVcbiAgICBpZih4IGluc3RhbmNlb2YgUCAmJiBzYW1lQ29uc3RydWN0b3IoeC5jb25zdHJ1Y3RvciwgdGhpcykpcmV0dXJuIHg7XG4gICAgdmFyIGNhcGFiaWxpdHkgPSBuZXcgUHJvbWlzZUNhcGFiaWxpdHkodGhpcylcbiAgICAgICwgJCRyZXNvbHZlICA9IGNhcGFiaWxpdHkucmVzb2x2ZTtcbiAgICAkJHJlc29sdmUoeCk7XG4gICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxufSk7XG4kZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICEoVVNFX05BVElWRSAmJiByZXF1aXJlKCcuLyQuaXRlci1kZXRlY3QnKShmdW5jdGlvbihpdGVyKXtcbiAgUC5hbGwoaXRlcilbJ2NhdGNoJ10oZnVuY3Rpb24oKXt9KTtcbn0pKSwgUFJPTUlTRSwge1xuICAvLyAyNS40LjQuMSBQcm9taXNlLmFsbChpdGVyYWJsZSlcbiAgYWxsOiBmdW5jdGlvbiBhbGwoaXRlcmFibGUpe1xuICAgIHZhciBDICAgICAgICAgID0gZ2V0Q29uc3RydWN0b3IodGhpcylcbiAgICAgICwgY2FwYWJpbGl0eSA9IG5ldyBQcm9taXNlQ2FwYWJpbGl0eShDKVxuICAgICAgLCByZXNvbHZlICAgID0gY2FwYWJpbGl0eS5yZXNvbHZlXG4gICAgICAsIHJlamVjdCAgICAgPSBjYXBhYmlsaXR5LnJlamVjdFxuICAgICAgLCB2YWx1ZXMgICAgID0gW107XG4gICAgdmFyIGFicnVwdCA9IHBlcmZvcm0oZnVuY3Rpb24oKXtcbiAgICAgIGZvck9mKGl0ZXJhYmxlLCBmYWxzZSwgdmFsdWVzLnB1c2gsIHZhbHVlcyk7XG4gICAgICB2YXIgcmVtYWluaW5nID0gdmFsdWVzLmxlbmd0aFxuICAgICAgICAsIHJlc3VsdHMgICA9IEFycmF5KHJlbWFpbmluZyk7XG4gICAgICBpZihyZW1haW5pbmcpJC5lYWNoLmNhbGwodmFsdWVzLCBmdW5jdGlvbihwcm9taXNlLCBpbmRleCl7XG4gICAgICAgIHZhciBhbHJlYWR5Q2FsbGVkID0gZmFsc2U7XG4gICAgICAgIEMucmVzb2x2ZShwcm9taXNlKS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICBpZihhbHJlYWR5Q2FsbGVkKXJldHVybjtcbiAgICAgICAgICBhbHJlYWR5Q2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICByZXN1bHRzW2luZGV4XSA9IHZhbHVlO1xuICAgICAgICAgIC0tcmVtYWluaW5nIHx8IHJlc29sdmUocmVzdWx0cyk7XG4gICAgICAgIH0sIHJlamVjdCk7XG4gICAgICB9KTtcbiAgICAgIGVsc2UgcmVzb2x2ZShyZXN1bHRzKTtcbiAgICB9KTtcbiAgICBpZihhYnJ1cHQpcmVqZWN0KGFicnVwdC5lcnJvcik7XG4gICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTtcbiAgfSxcbiAgLy8gMjUuNC40LjQgUHJvbWlzZS5yYWNlKGl0ZXJhYmxlKVxuICByYWNlOiBmdW5jdGlvbiByYWNlKGl0ZXJhYmxlKXtcbiAgICB2YXIgQyAgICAgICAgICA9IGdldENvbnN0cnVjdG9yKHRoaXMpXG4gICAgICAsIGNhcGFiaWxpdHkgPSBuZXcgUHJvbWlzZUNhcGFiaWxpdHkoQylcbiAgICAgICwgcmVqZWN0ICAgICA9IGNhcGFiaWxpdHkucmVqZWN0O1xuICAgIHZhciBhYnJ1cHQgPSBwZXJmb3JtKGZ1bmN0aW9uKCl7XG4gICAgICBmb3JPZihpdGVyYWJsZSwgZmFsc2UsIGZ1bmN0aW9uKHByb21pc2Upe1xuICAgICAgICBDLnJlc29sdmUocHJvbWlzZSkudGhlbihjYXBhYmlsaXR5LnJlc29sdmUsIHJlamVjdCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBpZihhYnJ1cHQpcmVqZWN0KGFicnVwdC5lcnJvcik7XG4gICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTtcbiAgfVxufSk7IiwiJ3VzZSBzdHJpY3QnO1xudmFyIHN0cm9uZyA9IHJlcXVpcmUoJy4vJC5jb2xsZWN0aW9uLXN0cm9uZycpO1xuXG4vLyAyMy4yIFNldCBPYmplY3RzXG5yZXF1aXJlKCcuLyQuY29sbGVjdGlvbicpKCdTZXQnLCBmdW5jdGlvbihnZXQpe1xuICByZXR1cm4gZnVuY3Rpb24gU2V0KCl7IHJldHVybiBnZXQodGhpcywgYXJndW1lbnRzLmxlbmd0aCA+IDAgPyBhcmd1bWVudHNbMF0gOiB1bmRlZmluZWQpOyB9O1xufSwge1xuICAvLyAyMy4yLjMuMSBTZXQucHJvdG90eXBlLmFkZCh2YWx1ZSlcbiAgYWRkOiBmdW5jdGlvbiBhZGQodmFsdWUpe1xuICAgIHJldHVybiBzdHJvbmcuZGVmKHRoaXMsIHZhbHVlID0gdmFsdWUgPT09IDAgPyAwIDogdmFsdWUsIHZhbHVlKTtcbiAgfVxufSwgc3Ryb25nKTsiLCIndXNlIHN0cmljdCc7XG52YXIgJGF0ICA9IHJlcXVpcmUoJy4vJC5zdHJpbmctYXQnKSh0cnVlKTtcblxuLy8gMjEuMS4zLjI3IFN0cmluZy5wcm90b3R5cGVbQEBpdGVyYXRvcl0oKVxucmVxdWlyZSgnLi8kLml0ZXItZGVmaW5lJykoU3RyaW5nLCAnU3RyaW5nJywgZnVuY3Rpb24oaXRlcmF0ZWQpe1xuICB0aGlzLl90ID0gU3RyaW5nKGl0ZXJhdGVkKTsgLy8gdGFyZ2V0XG4gIHRoaXMuX2kgPSAwOyAgICAgICAgICAgICAgICAvLyBuZXh0IGluZGV4XG4vLyAyMS4xLjUuMi4xICVTdHJpbmdJdGVyYXRvclByb3RvdHlwZSUubmV4dCgpXG59LCBmdW5jdGlvbigpe1xuICB2YXIgTyAgICAgPSB0aGlzLl90XG4gICAgLCBpbmRleCA9IHRoaXMuX2lcbiAgICAsIHBvaW50O1xuICBpZihpbmRleCA+PSBPLmxlbmd0aClyZXR1cm4ge3ZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWV9O1xuICBwb2ludCA9ICRhdChPLCBpbmRleCk7XG4gIHRoaXMuX2kgKz0gcG9pbnQubGVuZ3RoO1xuICByZXR1cm4ge3ZhbHVlOiBwb2ludCwgZG9uZTogZmFsc2V9O1xufSk7IiwiLy8gaHR0cHM6Ly9naXRodWIuY29tL0RhdmlkQnJ1YW50L01hcC1TZXQucHJvdG90eXBlLnRvSlNPTlxudmFyICRleHBvcnQgID0gcmVxdWlyZSgnLi8kLmV4cG9ydCcpO1xuXG4kZXhwb3J0KCRleHBvcnQuUCwgJ1NldCcsIHt0b0pTT046IHJlcXVpcmUoJy4vJC5jb2xsZWN0aW9uLXRvLWpzb24nKSgnU2V0Jyl9KTsiLCJyZXF1aXJlKCcuL2VzNi5hcnJheS5pdGVyYXRvcicpO1xudmFyIEl0ZXJhdG9ycyA9IHJlcXVpcmUoJy4vJC5pdGVyYXRvcnMnKTtcbkl0ZXJhdG9ycy5Ob2RlTGlzdCA9IEl0ZXJhdG9ycy5IVE1MQ29sbGVjdGlvbiA9IEl0ZXJhdG9ycy5BcnJheTsiLCJ2YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJ2lzLWZ1bmN0aW9uJylcblxubW9kdWxlLmV4cG9ydHMgPSBmb3JFYWNoXG5cbnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmdcbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHlcblxuZnVuY3Rpb24gZm9yRWFjaChsaXN0LCBpdGVyYXRvciwgY29udGV4dCkge1xuICAgIGlmICghaXNGdW5jdGlvbihpdGVyYXRvcikpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaXRlcmF0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uJylcbiAgICB9XG5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgY29udGV4dCA9IHRoaXNcbiAgICB9XG4gICAgXG4gICAgaWYgKHRvU3RyaW5nLmNhbGwobGlzdCkgPT09ICdbb2JqZWN0IEFycmF5XScpXG4gICAgICAgIGZvckVhY2hBcnJheShsaXN0LCBpdGVyYXRvciwgY29udGV4dClcbiAgICBlbHNlIGlmICh0eXBlb2YgbGlzdCA9PT0gJ3N0cmluZycpXG4gICAgICAgIGZvckVhY2hTdHJpbmcobGlzdCwgaXRlcmF0b3IsIGNvbnRleHQpXG4gICAgZWxzZVxuICAgICAgICBmb3JFYWNoT2JqZWN0KGxpc3QsIGl0ZXJhdG9yLCBjb250ZXh0KVxufVxuXG5mdW5jdGlvbiBmb3JFYWNoQXJyYXkoYXJyYXksIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGFycmF5LCBpKSkge1xuICAgICAgICAgICAgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBhcnJheVtpXSwgaSwgYXJyYXkpXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZvckVhY2hTdHJpbmcoc3RyaW5nLCBpdGVyYXRvciwgY29udGV4dCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzdHJpbmcubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgLy8gbm8gc3VjaCB0aGluZyBhcyBhIHNwYXJzZSBzdHJpbmcuXG4gICAgICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgc3RyaW5nLmNoYXJBdChpKSwgaSwgc3RyaW5nKVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZm9yRWFjaE9iamVjdChvYmplY3QsIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gICAgZm9yICh2YXIgayBpbiBvYmplY3QpIHtcbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrKSkge1xuICAgICAgICAgICAgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmplY3Rba10sIGssIG9iamVjdClcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB3aW5kb3c7XG59IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbDtcbn0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIpe1xuICAgIG1vZHVsZS5leHBvcnRzID0gc2VsZjtcbn0gZWxzZSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7fTtcbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gaXNGdW5jdGlvblxuXG52YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nXG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24gKGZuKSB7XG4gIHZhciBzdHJpbmcgPSB0b1N0cmluZy5jYWxsKGZuKVxuICByZXR1cm4gc3RyaW5nID09PSAnW29iamVjdCBGdW5jdGlvbl0nIHx8XG4gICAgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJyAmJiBzdHJpbmcgIT09ICdbb2JqZWN0IFJlZ0V4cF0nKSB8fFxuICAgICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAvLyBJRTggYW5kIGJlbG93XG4gICAgIChmbiA9PT0gd2luZG93LnNldFRpbWVvdXQgfHxcbiAgICAgIGZuID09PSB3aW5kb3cuYWxlcnQgfHxcbiAgICAgIGZuID09PSB3aW5kb3cuY29uZmlybSB8fFxuICAgICAgZm4gPT09IHdpbmRvdy5wcm9tcHQpKVxufTtcbiIsInZhciB0cmltID0gcmVxdWlyZSgndHJpbScpXG4gICwgZm9yRWFjaCA9IHJlcXVpcmUoJ2Zvci1lYWNoJylcbiAgLCBpc0FycmF5ID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgfVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChoZWFkZXJzKSB7XG4gIGlmICghaGVhZGVycylcbiAgICByZXR1cm4ge31cblxuICB2YXIgcmVzdWx0ID0ge31cblxuICBmb3JFYWNoKFxuICAgICAgdHJpbShoZWFkZXJzKS5zcGxpdCgnXFxuJylcbiAgICAsIGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gcm93LmluZGV4T2YoJzonKVxuICAgICAgICAgICwga2V5ID0gdHJpbShyb3cuc2xpY2UoMCwgaW5kZXgpKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgLCB2YWx1ZSA9IHRyaW0ocm93LnNsaWNlKGluZGV4ICsgMSkpXG5cbiAgICAgICAgaWYgKHR5cGVvZihyZXN1bHRba2V5XSkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZVxuICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXkocmVzdWx0W2tleV0pKSB7XG4gICAgICAgICAgcmVzdWx0W2tleV0ucHVzaCh2YWx1ZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHRba2V5XSA9IFsgcmVzdWx0W2tleV0sIHZhbHVlIF1cbiAgICAgICAgfVxuICAgICAgfVxuICApXG5cbiAgcmV0dXJuIHJlc3VsdFxufSIsIlxuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gdHJpbTtcblxuZnVuY3Rpb24gdHJpbShzdHIpe1xuICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMqfFxccyokL2csICcnKTtcbn1cblxuZXhwb3J0cy5sZWZ0ID0gZnVuY3Rpb24oc3RyKXtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzKi8sICcnKTtcbn07XG5cbmV4cG9ydHMucmlnaHQgPSBmdW5jdGlvbihzdHIpe1xuICByZXR1cm4gc3RyLnJlcGxhY2UoL1xccyokLywgJycpO1xufTtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIHdpbmRvdyA9IHJlcXVpcmUoXCJnbG9iYWwvd2luZG93XCIpXG52YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoXCJpcy1mdW5jdGlvblwiKVxudmFyIHBhcnNlSGVhZGVycyA9IHJlcXVpcmUoXCJwYXJzZS1oZWFkZXJzXCIpXG52YXIgeHRlbmQgPSByZXF1aXJlKFwieHRlbmRcIilcblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVYSFJcbmNyZWF0ZVhIUi5YTUxIdHRwUmVxdWVzdCA9IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCB8fCBub29wXG5jcmVhdGVYSFIuWERvbWFpblJlcXVlc3QgPSBcIndpdGhDcmVkZW50aWFsc1wiIGluIChuZXcgY3JlYXRlWEhSLlhNTEh0dHBSZXF1ZXN0KCkpID8gY3JlYXRlWEhSLlhNTEh0dHBSZXF1ZXN0IDogd2luZG93LlhEb21haW5SZXF1ZXN0XG5cbmZvckVhY2hBcnJheShbXCJnZXRcIiwgXCJwdXRcIiwgXCJwb3N0XCIsIFwicGF0Y2hcIiwgXCJoZWFkXCIsIFwiZGVsZXRlXCJdLCBmdW5jdGlvbihtZXRob2QpIHtcbiAgICBjcmVhdGVYSFJbbWV0aG9kID09PSBcImRlbGV0ZVwiID8gXCJkZWxcIiA6IG1ldGhvZF0gPSBmdW5jdGlvbih1cmksIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgICAgIG9wdGlvbnMgPSBpbml0UGFyYW1zKHVyaSwgb3B0aW9ucywgY2FsbGJhY2spXG4gICAgICAgIG9wdGlvbnMubWV0aG9kID0gbWV0aG9kLnRvVXBwZXJDYXNlKClcbiAgICAgICAgcmV0dXJuIF9jcmVhdGVYSFIob3B0aW9ucylcbiAgICB9XG59KVxuXG5mdW5jdGlvbiBmb3JFYWNoQXJyYXkoYXJyYXksIGl0ZXJhdG9yKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICBpdGVyYXRvcihhcnJheVtpXSlcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlzRW1wdHkob2JqKXtcbiAgICBmb3IodmFyIGkgaW4gb2JqKXtcbiAgICAgICAgaWYob2JqLmhhc093blByb3BlcnR5KGkpKSByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbn1cblxuZnVuY3Rpb24gaW5pdFBhcmFtcyh1cmksIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHBhcmFtcyA9IHVyaVxuXG4gICAgaWYgKGlzRnVuY3Rpb24ob3B0aW9ucykpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zXG4gICAgICAgIGlmICh0eXBlb2YgdXJpID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBwYXJhbXMgPSB7dXJpOnVyaX1cbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmFtcyA9IHh0ZW5kKG9wdGlvbnMsIHt1cmk6IHVyaX0pXG4gICAgfVxuXG4gICAgcGFyYW1zLmNhbGxiYWNrID0gY2FsbGJhY2tcbiAgICByZXR1cm4gcGFyYW1zXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVhIUih1cmksIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgb3B0aW9ucyA9IGluaXRQYXJhbXModXJpLCBvcHRpb25zLCBjYWxsYmFjaylcbiAgICByZXR1cm4gX2NyZWF0ZVhIUihvcHRpb25zKVxufVxuXG5mdW5jdGlvbiBfY3JlYXRlWEhSKG9wdGlvbnMpIHtcbiAgICBpZih0eXBlb2Ygb3B0aW9ucy5jYWxsYmFjayA9PT0gXCJ1bmRlZmluZWRcIil7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhbGxiYWNrIGFyZ3VtZW50IG1pc3NpbmdcIilcbiAgICB9XG5cbiAgICB2YXIgY2FsbGVkID0gZmFsc2VcbiAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiBjYk9uY2UoZXJyLCByZXNwb25zZSwgYm9keSl7XG4gICAgICAgIGlmKCFjYWxsZWQpe1xuICAgICAgICAgICAgY2FsbGVkID0gdHJ1ZVxuICAgICAgICAgICAgb3B0aW9ucy5jYWxsYmFjayhlcnIsIHJlc3BvbnNlLCBib2R5KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVhZHlzdGF0ZWNoYW5nZSgpIHtcbiAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSA0KSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGxvYWRGdW5jLCAwKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Qm9keSgpIHtcbiAgICAgICAgLy8gQ2hyb21lIHdpdGggcmVxdWVzdFR5cGU9YmxvYiB0aHJvd3MgZXJyb3JzIGFycm91bmQgd2hlbiBldmVuIHRlc3RpbmcgYWNjZXNzIHRvIHJlc3BvbnNlVGV4dFxuICAgICAgICB2YXIgYm9keSA9IHVuZGVmaW5lZFxuXG4gICAgICAgIGlmICh4aHIucmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGJvZHkgPSB4aHIucmVzcG9uc2VcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJvZHkgPSB4aHIucmVzcG9uc2VUZXh0IHx8IGdldFhtbCh4aHIpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNKc29uKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGJvZHkgPSBKU09OLnBhcnNlKGJvZHkpXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJvZHlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlcnJvckZ1bmMoZXZ0KSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0VGltZXIpXG4gICAgICAgIGlmKCEoZXZ0IGluc3RhbmNlb2YgRXJyb3IpKXtcbiAgICAgICAgICAgIGV2dCA9IG5ldyBFcnJvcihcIlwiICsgKGV2dCB8fCBcIlVua25vd24gWE1MSHR0cFJlcXVlc3QgRXJyb3JcIikgKVxuICAgICAgICB9XG4gICAgICAgIGV2dC5zdGF0dXNDb2RlID0gMFxuICAgICAgICByZXR1cm4gY2FsbGJhY2soZXZ0LCBmYWlsdXJlUmVzcG9uc2UpXG4gICAgfVxuXG4gICAgLy8gd2lsbCBsb2FkIHRoZSBkYXRhICYgcHJvY2VzcyB0aGUgcmVzcG9uc2UgaW4gYSBzcGVjaWFsIHJlc3BvbnNlIG9iamVjdFxuICAgIGZ1bmN0aW9uIGxvYWRGdW5jKCkge1xuICAgICAgICBpZiAoYWJvcnRlZCkgcmV0dXJuXG4gICAgICAgIHZhciBzdGF0dXNcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRUaW1lcilcbiAgICAgICAgaWYob3B0aW9ucy51c2VYRFIgJiYgeGhyLnN0YXR1cz09PXVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy9JRTggQ09SUyBHRVQgc3VjY2Vzc2Z1bCByZXNwb25zZSBkb2Vzbid0IGhhdmUgYSBzdGF0dXMgZmllbGQsIGJ1dCBib2R5IGlzIGZpbmVcbiAgICAgICAgICAgIHN0YXR1cyA9IDIwMFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RhdHVzID0gKHhoci5zdGF0dXMgPT09IDEyMjMgPyAyMDQgOiB4aHIuc3RhdHVzKVxuICAgICAgICB9XG4gICAgICAgIHZhciByZXNwb25zZSA9IGZhaWx1cmVSZXNwb25zZVxuICAgICAgICB2YXIgZXJyID0gbnVsbFxuXG4gICAgICAgIGlmIChzdGF0dXMgIT09IDApe1xuICAgICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICAgICAgYm9keTogZ2V0Qm9keSgpLFxuICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IHN0YXR1cyxcbiAgICAgICAgICAgICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7fSxcbiAgICAgICAgICAgICAgICB1cmw6IHVyaSxcbiAgICAgICAgICAgICAgICByYXdSZXF1ZXN0OiB4aHJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMpeyAvL3JlbWVtYmVyIHhociBjYW4gaW4gZmFjdCBiZSBYRFIgZm9yIENPUlMgaW4gSUVcbiAgICAgICAgICAgICAgICByZXNwb25zZS5oZWFkZXJzID0gcGFyc2VIZWFkZXJzKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVyciA9IG5ldyBFcnJvcihcIkludGVybmFsIFhNTEh0dHBSZXF1ZXN0IEVycm9yXCIpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVyciwgcmVzcG9uc2UsIHJlc3BvbnNlLmJvZHkpXG4gICAgfVxuXG4gICAgdmFyIHhociA9IG9wdGlvbnMueGhyIHx8IG51bGxcblxuICAgIGlmICgheGhyKSB7XG4gICAgICAgIGlmIChvcHRpb25zLmNvcnMgfHwgb3B0aW9ucy51c2VYRFIpIHtcbiAgICAgICAgICAgIHhociA9IG5ldyBjcmVhdGVYSFIuWERvbWFpblJlcXVlc3QoKVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHhociA9IG5ldyBjcmVhdGVYSFIuWE1MSHR0cFJlcXVlc3QoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGtleVxuICAgIHZhciBhYm9ydGVkXG4gICAgdmFyIHVyaSA9IHhoci51cmwgPSBvcHRpb25zLnVyaSB8fCBvcHRpb25zLnVybFxuICAgIHZhciBtZXRob2QgPSB4aHIubWV0aG9kID0gb3B0aW9ucy5tZXRob2QgfHwgXCJHRVRcIlxuICAgIHZhciBib2R5ID0gb3B0aW9ucy5ib2R5IHx8IG9wdGlvbnMuZGF0YVxuICAgIHZhciBoZWFkZXJzID0geGhyLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgfHwge31cbiAgICB2YXIgc3luYyA9ICEhb3B0aW9ucy5zeW5jXG4gICAgdmFyIGlzSnNvbiA9IGZhbHNlXG4gICAgdmFyIHRpbWVvdXRUaW1lclxuICAgIHZhciBmYWlsdXJlUmVzcG9uc2UgPSB7XG4gICAgICAgIGJvZHk6IHVuZGVmaW5lZCxcbiAgICAgICAgaGVhZGVyczoge30sXG4gICAgICAgIHN0YXR1c0NvZGU6IDAsXG4gICAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgICB1cmw6IHVyaSxcbiAgICAgICAgcmF3UmVxdWVzdDogeGhyXG4gICAgfVxuXG4gICAgaWYgKFwianNvblwiIGluIG9wdGlvbnMgJiYgb3B0aW9ucy5qc29uICE9PSBmYWxzZSkge1xuICAgICAgICBpc0pzb24gPSB0cnVlXG4gICAgICAgIGhlYWRlcnNbXCJhY2NlcHRcIl0gfHwgaGVhZGVyc1tcIkFjY2VwdFwiXSB8fCAoaGVhZGVyc1tcIkFjY2VwdFwiXSA9IFwiYXBwbGljYXRpb24vanNvblwiKSAvL0Rvbid0IG92ZXJyaWRlIGV4aXN0aW5nIGFjY2VwdCBoZWFkZXIgZGVjbGFyZWQgYnkgdXNlclxuICAgICAgICBpZiAobWV0aG9kICE9PSBcIkdFVFwiICYmIG1ldGhvZCAhPT0gXCJIRUFEXCIpIHtcbiAgICAgICAgICAgIGhlYWRlcnNbXCJjb250ZW50LXR5cGVcIl0gfHwgaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiXSB8fCAoaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiXSA9IFwiYXBwbGljYXRpb24vanNvblwiKSAvL0Rvbid0IG92ZXJyaWRlIGV4aXN0aW5nIGFjY2VwdCBoZWFkZXIgZGVjbGFyZWQgYnkgdXNlclxuICAgICAgICAgICAgYm9keSA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMuanNvbiA9PT0gdHJ1ZSA/IGJvZHkgOiBvcHRpb25zLmpzb24pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gcmVhZHlzdGF0ZWNoYW5nZVxuICAgIHhoci5vbmxvYWQgPSBsb2FkRnVuY1xuICAgIHhoci5vbmVycm9yID0gZXJyb3JGdW5jXG4gICAgLy8gSUU5IG11c3QgaGF2ZSBvbnByb2dyZXNzIGJlIHNldCB0byBhIHVuaXF1ZSBmdW5jdGlvbi5cbiAgICB4aHIub25wcm9ncmVzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gSUUgbXVzdCBkaWVcbiAgICB9XG4gICAgeGhyLm9uYWJvcnQgPSBmdW5jdGlvbigpe1xuICAgICAgICBhYm9ydGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgeGhyLm9udGltZW91dCA9IGVycm9yRnVuY1xuICAgIHhoci5vcGVuKG1ldGhvZCwgdXJpLCAhc3luYywgb3B0aW9ucy51c2VybmFtZSwgb3B0aW9ucy5wYXNzd29yZClcbiAgICAvL2hhcyB0byBiZSBhZnRlciBvcGVuXG4gICAgaWYoIXN5bmMpIHtcbiAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9ICEhb3B0aW9ucy53aXRoQ3JlZGVudGlhbHNcbiAgICB9XG4gICAgLy8gQ2Fubm90IHNldCB0aW1lb3V0IHdpdGggc3luYyByZXF1ZXN0XG4gICAgLy8gbm90IHNldHRpbmcgdGltZW91dCBvbiB0aGUgeGhyIG9iamVjdCwgYmVjYXVzZSBvZiBvbGQgd2Via2l0cyBldGMuIG5vdCBoYW5kbGluZyB0aGF0IGNvcnJlY3RseVxuICAgIC8vIGJvdGggbnBtJ3MgcmVxdWVzdCBhbmQganF1ZXJ5IDEueCB1c2UgdGhpcyBraW5kIG9mIHRpbWVvdXQsIHNvIHRoaXMgaXMgYmVpbmcgY29uc2lzdGVudFxuICAgIGlmICghc3luYyAmJiBvcHRpb25zLnRpbWVvdXQgPiAwICkge1xuICAgICAgICB0aW1lb3V0VGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZiAoYWJvcnRlZCkgcmV0dXJuXG4gICAgICAgICAgICBhYm9ydGVkID0gdHJ1ZS8vSUU5IG1heSBzdGlsbCBjYWxsIHJlYWR5c3RhdGVjaGFuZ2VcbiAgICAgICAgICAgIHhoci5hYm9ydChcInRpbWVvdXRcIilcbiAgICAgICAgICAgIHZhciBlID0gbmV3IEVycm9yKFwiWE1MSHR0cFJlcXVlc3QgdGltZW91dFwiKVxuICAgICAgICAgICAgZS5jb2RlID0gXCJFVElNRURPVVRcIlxuICAgICAgICAgICAgZXJyb3JGdW5jKGUpXG4gICAgICAgIH0sIG9wdGlvbnMudGltZW91dCApXG4gICAgfVxuXG4gICAgaWYgKHhoci5zZXRSZXF1ZXN0SGVhZGVyKSB7XG4gICAgICAgIGZvcihrZXkgaW4gaGVhZGVycyl7XG4gICAgICAgICAgICBpZihoZWFkZXJzLmhhc093blByb3BlcnR5KGtleSkpe1xuICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgaGVhZGVyc1trZXldKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLmhlYWRlcnMgJiYgIWlzRW1wdHkob3B0aW9ucy5oZWFkZXJzKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJIZWFkZXJzIGNhbm5vdCBiZSBzZXQgb24gYW4gWERvbWFpblJlcXVlc3Qgb2JqZWN0XCIpXG4gICAgfVxuXG4gICAgaWYgKFwicmVzcG9uc2VUeXBlXCIgaW4gb3B0aW9ucykge1xuICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gb3B0aW9ucy5yZXNwb25zZVR5cGVcbiAgICB9XG5cbiAgICBpZiAoXCJiZWZvcmVTZW5kXCIgaW4gb3B0aW9ucyAmJlxuICAgICAgICB0eXBlb2Ygb3B0aW9ucy5iZWZvcmVTZW5kID09PSBcImZ1bmN0aW9uXCJcbiAgICApIHtcbiAgICAgICAgb3B0aW9ucy5iZWZvcmVTZW5kKHhocilcbiAgICB9XG5cbiAgICAvLyBNaWNyb3NvZnQgRWRnZSBicm93c2VyIHNlbmRzIFwidW5kZWZpbmVkXCIgd2hlbiBzZW5kIGlzIGNhbGxlZCB3aXRoIHVuZGVmaW5lZCB2YWx1ZS5cbiAgICAvLyBYTUxIdHRwUmVxdWVzdCBzcGVjIHNheXMgdG8gcGFzcyBudWxsIGFzIGJvZHkgdG8gaW5kaWNhdGUgbm8gYm9keVxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbmF1Z3R1ci94aHIvaXNzdWVzLzEwMC5cbiAgICB4aHIuc2VuZChib2R5IHx8IG51bGwpXG5cbiAgICByZXR1cm4geGhyXG5cblxufVxuXG5mdW5jdGlvbiBnZXRYbWwoeGhyKSB7XG4gICAgaWYgKHhoci5yZXNwb25zZVR5cGUgPT09IFwiZG9jdW1lbnRcIikge1xuICAgICAgICByZXR1cm4geGhyLnJlc3BvbnNlWE1MXG4gICAgfVxuICAgIHZhciBmaXJlZm94QnVnVGFrZW5FZmZlY3QgPSB4aHIucmVzcG9uc2VYTUwgJiYgeGhyLnJlc3BvbnNlWE1MLmRvY3VtZW50RWxlbWVudC5ub2RlTmFtZSA9PT0gXCJwYXJzZXJlcnJvclwiXG4gICAgaWYgKHhoci5yZXNwb25zZVR5cGUgPT09IFwiXCIgJiYgIWZpcmVmb3hCdWdUYWtlbkVmZmVjdCkge1xuICAgICAgICByZXR1cm4geGhyLnJlc3BvbnNlWE1MXG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGxcbn1cblxuZnVuY3Rpb24gbm9vcCgpIHt9XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGV4dGVuZFxuXG52YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG5mdW5jdGlvbiBleHRlbmQoKSB7XG4gICAgdmFyIHRhcmdldCA9IHt9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldXG5cbiAgICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldFxufVxuIiwiLypcblRoZSBNSVQgTGljZW5zZSAoTUlUKVxuXG5Db3B5cmlnaHQgKGMpIDIwMTUgUGF0cmljaW8gR29uemFsZXogVml2byAoIGh0dHA6Ly93d3cucGF0cmljaW9nb256YWxlenZpdm8uY29tIClcblxuUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZlxudGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgJ1NvZnR3YXJlJyksIHRvIGRlYWwgaW5cbnRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG9cbnVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mXG50aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sXG5zdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsXG5jb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1NcbkZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUlxuQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSXG5JTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTlxuQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiovXG5cbmltcG9ydCB4aHIgZnJvbSAneGhyJztcblxuaW1wb3J0IHsgc2V0dXBXZWJHTCwgY3JlYXRlU2hhZGVyLCBjcmVhdGVQcm9ncmFtLCBwYXJzZVVuaWZvcm1zLCBsb2FkVGV4dHVyZSB9IGZyb20gJy4vZ2wvZ2wnO1xuaW1wb3J0IFRleHR1cmUgZnJvbSAnLi9nbC9UZXh0dXJlJztcblxuaW1wb3J0IHsgaXNDYW52YXNWaXNpYmxlLCBpc0RpZmYgfSBmcm9tICcuL3Rvb2xzL2NvbW1vbic7XG5pbXBvcnQgeyBzdWJzY3JpYmVNaXhpbiB9IGZyb20gJy4vdG9vbHMvbWl4aW4nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHbHNsQ2FudmFzIHtcbiAgICBjb25zdHJ1Y3RvcihjYW52YXMsIG9wdGlvbnMpIHtcbiAgICAgICAgc3Vic2NyaWJlTWl4aW4odGhpcyk7XG5cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgdGhpcy53aWR0aCA9IGNhbnZhcy5jbGllbnRXaWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBjYW52YXMuY2xpZW50SGVpZ2h0O1xuXG4gICAgICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xuICAgICAgICB0aGlzLmdsID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnByb2dyYW0gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudGV4dHVyZXMgPSB7fTtcbiAgICAgICAgdGhpcy51bmlmb3JtcyA9IHt9O1xuICAgICAgICB0aGlzLnZibyA9IHt9O1xuICAgICAgICB0aGlzLmlzVmFsaWQgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLnZlcnRleFN0cmluZyA9IG9wdGlvbnMudmVydGV4U3RyaW5nIHx8IGBcbiNpZmRlZiBHTF9FU1xucHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XG4jZW5kaWZcblxuYXR0cmlidXRlIHZlYzIgYV9wb3NpdGlvbjtcbmF0dHJpYnV0ZSB2ZWMyIGFfdGV4Y29vcmQ7XG5cbnZhcnlpbmcgdmVjMiB2X3RleGNvb3JkO1xuXG52b2lkIG1haW4oKSB7XG4gICAgZ2xfUG9zaXRpb24gPSB2ZWM0KGFfcG9zaXRpb24sIDAuMCwgMS4wKTtcbiAgICB2X3RleGNvb3JkID0gYV90ZXhjb29yZDtcbn1cbmA7XG4gICAgICAgIHRoaXMuZnJhZ21lbnRTdHJpbmcgPSBvcHRpb25zLmZyYWdtZW50U3RyaW5nIHx8IGBcbiNpZmRlZiBHTF9FU1xucHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XG4jZW5kaWZcblxudmFyeWluZyB2ZWMyIHZfdGV4Y29vcmQ7XG5cbnZvaWQgbWFpbigpe1xuICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMC4wKTtcbn1cbmA7XG5cbiAgICAgICAgLy8gR0wgQ29udGV4dFxuICAgICAgICBsZXQgZ2wgPSBzZXR1cFdlYkdMKGNhbnZhcywgb3B0aW9ucyk7XG4gICAgICAgIGlmICghZ2wpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmdsID0gZ2w7XG4gICAgICAgIHRoaXMudGltZUxvYWQgPSB0aGlzLnRpbWVQcmV2ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgIHRoaXMudGltZURlbHRhID0gMC47XG4gICAgICAgIHRoaXMuZm9yY2VSZW5kZXIgPSB0cnVlO1xuICAgICAgICB0aGlzLnBhdXNlZCA9IGZhbHNlO1xuXG4gICAgICAgIC8vIEFsbG93IGFscGhhXG4gICAgICAgIGNhbnZhcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBvcHRpb25zLmJhY2tncm91bmRDb2xvciB8fCAncmdiYSgxLDEsMSwwKSc7XG5cbiAgICAgICAgLy8gTG9hZCBzaGFkZXJcbiAgICAgICAgaWYgKGNhbnZhcy5oYXNBdHRyaWJ1dGUoJ2RhdGEtZnJhZ21lbnQnKSkge1xuICAgICAgICAgICAgdGhpcy5mcmFnbWVudFN0cmluZyA9IGNhbnZhcy5nZXRBdHRyaWJ1dGUoJ2RhdGEtZnJhZ21lbnQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjYW52YXMuaGFzQXR0cmlidXRlKCdkYXRhLWZyYWdtZW50LXVybCcpKSB7XG4gICAgICAgICAgICBsZXQgc291cmNlID0gY2FudmFzLmdldEF0dHJpYnV0ZSgnZGF0YS1mcmFnbWVudC11cmwnKTtcbiAgICAgICAgICAgIHhoci5nZXQoc291cmNlLCAoZXJyb3IsIHJlc3BvbnNlLCBib2R5KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkKGJvZHksIHRoaXMudmVydGV4U3RyaW5nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTG9hZCBzaGFkZXJcbiAgICAgICAgaWYgKGNhbnZhcy5oYXNBdHRyaWJ1dGUoJ2RhdGEtdmVydGV4JykpIHtcbiAgICAgICAgICAgIHRoaXMudmVydGV4U3RyaW5nID0gY2FudmFzLmdldEF0dHJpYnV0ZSgnZGF0YS12ZXJ0ZXgnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjYW52YXMuaGFzQXR0cmlidXRlKCdkYXRhLXZlcnRleC11cmwnKSkge1xuICAgICAgICAgICAgbGV0IHNvdXJjZSA9IGNhbnZhcy5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmVydGV4LXVybCcpO1xuICAgICAgICAgICAgeGhyLmdldChzb3VyY2UsIChlcnJvciwgcmVzcG9uc2UsIGJvZHkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWQodGhpcy5mcmFnbWVudFN0cmluZywgYm9keSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubG9hZCgpO1xuXG4gICAgICAgIGlmICghdGhpcy5wcm9ncmFtKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZWZpbmUgVmVydGV4IGJ1ZmZlclxuICAgICAgICBsZXQgdGV4Q29vcmRzTG9jID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5wcm9ncmFtLCAnYV90ZXhjb29yZCcpO1xuICAgICAgICB0aGlzLnZiby50ZXhDb29yZHMgPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICAgICAgdGhpcy5nbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy52Ym8udGV4Q29vcmRzKTtcbiAgICAgICAgdGhpcy5nbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShbMC4wLCAwLjAsIDEuMCwgMC4wLCAwLjAsIDEuMCwgMC4wLCAxLjAsIDEuMCwgMC4wLCAxLjAsIDEuMF0pLCBnbC5TVEFUSUNfRFJBVyk7XG4gICAgICAgIHRoaXMuZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGV4Q29vcmRzTG9jKTtcbiAgICAgICAgdGhpcy5nbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHRleENvb3Jkc0xvYywgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcblxuICAgICAgICBsZXQgdmVydGljZXNMb2MgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbih0aGlzLnByb2dyYW0sICdhX3Bvc2l0aW9uJyk7XG4gICAgICAgIHRoaXMudmJvLnZlcnRpY2VzID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgICAgIHRoaXMuZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMudmJvLnZlcnRpY2VzKTtcbiAgICAgICAgdGhpcy5nbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShbLTEuMCwgLTEuMCwgMS4wLCAtMS4wLCAtMS4wLCAxLjAsIC0xLjAsIDEuMCwgMS4wLCAtMS4wLCAxLjAsIDEuMF0pLCBnbC5TVEFUSUNfRFJBVyk7XG4gICAgICAgIHRoaXMuZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodmVydGljZXNMb2MpO1xuICAgICAgICB0aGlzLmdsLnZlcnRleEF0dHJpYlBvaW50ZXIodmVydGljZXNMb2MsIDIsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG5cbiAgICAgICAgLy8gbG9hZCBURVhUVVJFU1xuICAgICAgICBpZiAoY2FudmFzLmhhc0F0dHJpYnV0ZSgnZGF0YS10ZXh0dXJlcycpKSB7XG4gICAgICAgICAgICBsZXQgaW1nTGlzdCA9IGNhbnZhcy5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGV4dHVyZXMnKS5zcGxpdCgnLCcpO1xuICAgICAgICAgICAgZm9yIChsZXQgbkltZyBpbiBpbWdMaXN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRVbmlmb3JtKCd1X3RleCcgKyBuSW1nLCBpbWdMaXN0W25JbWddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09IEVWRU5UU1xuICAgICAgICBsZXQgbW91c2UgPSB7XG4gICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgeTogMFxuICAgICAgICB9O1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCAoZSkgPT4ge1xuICAgICAgICAgICAgbW91c2UueCA9IGUuY2xpZW50WCB8fCBlLnBhZ2VYO1xuICAgICAgICAgICAgbW91c2UueSA9IGUuY2xpZW50WSB8fCBlLnBhZ2VZO1xuICAgICAgICB9LCBmYWxzZSk7XG5cbiAgICAgICAgbGV0IHNhbmRib3ggPSB0aGlzO1xuICAgICAgICBmdW5jdGlvbiBSZW5kZXJMb29wKCkge1xuICAgICAgICAgICAgaWYgKHNhbmRib3gubk1vdXNlID4gMSkge1xuICAgICAgICAgICAgICAgIHNhbmRib3guc2V0TW91c2UobW91c2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2FuZGJveC5yZW5kZXIoKTtcbiAgICAgICAgICAgIHNhbmRib3guZm9yY2VSZW5kZXIgPSBzYW5kYm94LnJlc2l6ZSgpO1xuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShSZW5kZXJMb29wKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFN0YXJ0XG4gICAgICAgIHRoaXMuc2V0TW91c2UoeyB4OiAwLCB5OiAwIH0pO1xuICAgICAgICBSZW5kZXJMb29wKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuYW5pbWF0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IHRleCBpbiB0aGlzLnRleHR1cmVzKSB7XG4gICAgICAgICAgICB0aGlzLmdsLmRlbGV0ZVRleHR1cmUodGV4KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHR1cmVzID0ge307XG4gICAgICAgIGZvciAobGV0IGF0dCBpbiB0aGlzLmF0dHJpYnMpIHtcbiAgICAgICAgICAgIHRoaXMuZ2wuZGVsZXRlQnVmZmVyKHRoaXMuYXR0cmlic1thdHRdKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmdsLnVzZVByb2dyYW0obnVsbCk7XG4gICAgICAgIHRoaXMuZ2wuZGVsZXRlUHJvZ3JhbSh0aGlzLnByb2dyYW0pO1xuICAgICAgICB0aGlzLnByb2dyYW0gPSBudWxsO1xuICAgICAgICB0aGlzLmdsID0gbnVsbDtcbiAgICB9XG5cbiAgICBsb2FkIChmcmFnU3RyaW5nLCB2ZXJ0U3RyaW5nKSB7XG4gICAgICAgIC8vIExvYWQgdmVydGV4IHNoYWRlciBpZiB0aGVyZSBpcyBvbmVcbiAgICAgICAgaWYgKHZlcnRTdHJpbmcpIHtcbiAgICAgICAgICAgIHRoaXMudmVydGV4U3RyaW5nID0gdmVydFN0cmluZztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExvYWQgZnJhZ21lbnQgc2hhZGVyIGlmIHRoZXJlIGlzIG9uZVxuICAgICAgICBpZiAoZnJhZ1N0cmluZykge1xuICAgICAgICAgICAgdGhpcy5mcmFnbWVudFN0cmluZyA9IGZyYWdTdHJpbmc7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmFuaW1hdGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMubkRlbHRhID0gKHRoaXMuZnJhZ21lbnRTdHJpbmcubWF0Y2goL3VfZGVsdGEvZykgfHwgW10pLmxlbmd0aDtcbiAgICAgICAgdGhpcy5uVGltZSA9ICh0aGlzLmZyYWdtZW50U3RyaW5nLm1hdGNoKC91X3RpbWUvZykgfHwgW10pLmxlbmd0aDtcbiAgICAgICAgdGhpcy5uRGF0ZSA9ICh0aGlzLmZyYWdtZW50U3RyaW5nLm1hdGNoKC91X2RhdGUvZykgfHwgW10pLmxlbmd0aDtcbiAgICAgICAgdGhpcy5uTW91c2UgPSAodGhpcy5mcmFnbWVudFN0cmluZy5tYXRjaCgvdV9tb3VzZS9nKSB8fCBbXSkubGVuZ3RoO1xuICAgICAgICB0aGlzLmFuaW1hdGVkID0gdGhpcy5uRGF0ZSA+IDEgfHwgdGhpcy5uVGltZSA+IDEgfHwgdGhpcy5uTW91c2UgPiAxO1xuXG4gICAgICAgIGxldCBuVGV4dHVyZXMgPSB0aGlzLmZyYWdtZW50U3RyaW5nLnNlYXJjaCgvc2FtcGxlcjJEL2cpO1xuICAgICAgICBpZiAoblRleHR1cmVzKSB7XG4gICAgICAgICAgICBsZXQgbGluZXMgPSB0aGlzLmZyYWdtZW50U3RyaW5nLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgbWF0Y2ggPSBsaW5lc1tpXS5tYXRjaCgvdW5pZm9ybVxccypzYW1wbGVyMkRcXHMqKFtcXHddKik7XFxzKlxcL1xcL1xccyooW1xcd3xcXDpcXC9cXC98XFwufFxcLXxcXF9dKikvaSk7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBleHQgPSBtYXRjaFsyXS5zcGxpdCgnLicpLnBvcCgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaFsxXSAmJiAgbWF0Y2hbMl0gJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAoZXh0ID09PSAnanBnJyB8fCBleHQgPT09ICdqcGVnJyB8fCBleHQgPT09ICdwbmcnIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgIGV4dCA9PT0gJ29ndicgfHwgZXh0ID09PSAnd2VibScgfHwgZXh0ID09PSAnbXA0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VW5pZm9ybShtYXRjaFsxXSwgbWF0Y2hbMl0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBtYWluID0gbGluZXNbaV0ubWF0Y2goL1xccyp2b2lkXFxzKm1haW5cXHMqL2cpO1xuICAgICAgICAgICAgICAgIGlmIChtYWluKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB2ZXJ0ZXhTaGFkZXIgPSBjcmVhdGVTaGFkZXIodGhpcywgdGhpcy52ZXJ0ZXhTdHJpbmcsIHRoaXMuZ2wuVkVSVEVYX1NIQURFUik7XG4gICAgICAgIGxldCBmcmFnbWVudFNoYWRlciA9IGNyZWF0ZVNoYWRlcih0aGlzLCB0aGlzLmZyYWdtZW50U3RyaW5nLCB0aGlzLmdsLkZSQUdNRU5UX1NIQURFUik7XG5cbiAgICAgICAgLy8gSWYgRnJhZ21lbnQgc2hhZGVyIGZhaWxzIGxvYWQgYSBlbXB0eSBvbmUgdG8gc2lnbiB0aGUgZXJyb3JcbiAgICAgICAgaWYgKCFmcmFnbWVudFNoYWRlcikge1xuICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXIgPSBjcmVhdGVTaGFkZXIodGhpcywgJ3ZvaWQgbWFpbigpe1xcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoMS4wKTtcXG59JywgdGhpcy5nbC5GUkFHTUVOVF9TSEFERVIpO1xuICAgICAgICAgICAgdGhpcy5pc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmlzVmFsaWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXRlIGFuZCB1c2UgcHJvZ3JhbVxuICAgICAgICBsZXQgcHJvZ3JhbSA9IGNyZWF0ZVByb2dyYW0odGhpcywgW3ZlcnRleFNoYWRlciwgZnJhZ21lbnRTaGFkZXJdKTsvLywgWzAsMV0sWydhX3RleGNvb3JkJywnYV9wb3NpdGlvbiddKTtcbiAgICAgICAgdGhpcy5nbC51c2VQcm9ncmFtKHByb2dyYW0pO1xuXG4gICAgICAgIC8vIERlbGV0ZSBzaGFkZXJzXG4gICAgICAgIC8vIHRoaXMuZ2wuZGV0YWNoU2hhZGVyKHByb2dyYW0sIHZlcnRleFNoYWRlcik7XG4gICAgICAgIC8vIHRoaXMuZ2wuZGV0YWNoU2hhZGVyKHByb2dyYW0sIGZyYWdtZW50U2hhZGVyKTtcbiAgICAgICAgdGhpcy5nbC5kZWxldGVTaGFkZXIodmVydGV4U2hhZGVyKTtcbiAgICAgICAgdGhpcy5nbC5kZWxldGVTaGFkZXIoZnJhZ21lbnRTaGFkZXIpO1xuXG4gICAgICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW07XG4gICAgICAgIHRoaXMuY2hhbmdlID0gdHJ1ZTtcblxuICAgICAgICAvLyBUcmlnZ2VyIGV2ZW50XG4gICAgICAgIHRoaXMudHJpZ2dlcignbG9hZCcsIHt9KTtcblxuICAgICAgICB0aGlzLmZvcmNlUmVuZGVyID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB0ZXN0IChjYWxsYmFjaywgZnJhZ1N0cmluZywgdmVydFN0cmluZykge1xuICAgICAgICAvLyBUaGFua3MgdG8gQHRoZXNwaXRlIGZvciB0aGUgaGVscCBoZXJlXG4gICAgICAgIC8vIGh0dHBzOi8vd3d3Lmtocm9ub3Mub3JnL3JlZ2lzdHJ5L3dlYmdsL2V4dGVuc2lvbnMvRVhUX2Rpc2pvaW50X3RpbWVyX3F1ZXJ5L1xuICAgICAgICBsZXQgcHJlX3Rlc3RfdmVydCA9IHRoaXMudmVydGV4U3RyaW5nO1xuICAgICAgICBsZXQgcHJlX3Rlc3RfZnJhZyA9IHRoaXMuZnJhZ21lbnRTdHJpbmc7XG4gICAgICAgIGxldCBwcmVfdGVzdF9wYXVzZWQgPSB0aGlzLnBhdXNlZDtcblxuICAgICAgICBsZXQgZXh0ID0gdGhpcy5nbC5nZXRFeHRlbnNpb24oJ0VYVF9kaXNqb2ludF90aW1lcl9xdWVyeScpO1xuICAgICAgICBsZXQgcXVlcnkgPSBleHQuY3JlYXRlUXVlcnlFWFQoKTtcbiAgICAgICAgbGV0IHdhc1ZhbGlkID0gdGhpcy5pc1ZhbGlkO1xuXG4gICAgICAgIGlmIChmcmFnU3RyaW5nIHx8IHZlcnRTdHJpbmcpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZChmcmFnU3RyaW5nLCB2ZXJ0U3RyaW5nKTtcbiAgICAgICAgICAgIHdhc1ZhbGlkID0gdGhpcy5pc1ZhbGlkO1xuICAgICAgICAgICAgdGhpcy5mb3JjZVJlbmRlciA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wYXVzZWQgPSB0cnVlO1xuICAgICAgICBleHQuYmVnaW5RdWVyeUVYVChleHQuVElNRV9FTEFQU0VEX0VYVCwgcXVlcnkpO1xuICAgICAgICB0aGlzLmZvcmNlUmVuZGVyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgZXh0LmVuZFF1ZXJ5RVhUKGV4dC5USU1FX0VMQVBTRURfRVhUKTtcblxuICAgICAgICBsZXQgc2FuZGJveCA9IHRoaXM7XG4gICAgICAgIGZ1bmN0aW9uIGZpbmlzaFRlc3QoKSB7XG4gICAgICAgICAgICAvLyBSZXZlcnQgY2hhbmdlcy4uLiBnbyBiYWNrIHRvIG5vcm1hbFxuICAgICAgICAgICAgc2FuZGJveC5wYXVzZWQgPSBwcmVfdGVzdF9wYXVzZWQ7XG4gICAgICAgICAgICBpZiAoZnJhZ1N0cmluZyB8fCB2ZXJ0U3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgc2FuZGJveC5sb2FkKHByZV90ZXN0X2ZyYWcsIHByZV90ZXN0X3ZlcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHdhaXRGb3JUZXN0KCkge1xuICAgICAgICAgICAgc2FuZGJveC5mb3JjZVJlbmRlciA9IHRydWU7XG4gICAgICAgICAgICBzYW5kYm94LnJlbmRlcigpO1xuICAgICAgICAgICAgbGV0IGF2YWlsYWJsZSA9IGV4dC5nZXRRdWVyeU9iamVjdEVYVChxdWVyeSwgZXh0LlFVRVJZX1JFU1VMVF9BVkFJTEFCTEVfRVhUKTtcbiAgICAgICAgICAgIGxldCBkaXNqb2ludCA9IHNhbmRib3guZ2wuZ2V0UGFyYW1ldGVyKGV4dC5HUFVfRElTSk9JTlRfRVhUKTtcbiAgICAgICAgICAgIGlmIChhdmFpbGFibGUgJiYgIWRpc2pvaW50KSB7XG4gICAgICAgICAgICAgICAgbGV0IHJldCA9IHtcbiAgICAgICAgICAgICAgICAgICAgd2FzVmFsaWQ6IHdhc1ZhbGlkLFxuICAgICAgICAgICAgICAgICAgICBmcmFnOiBmcmFnU3RyaW5nIHx8IHNhbmRib3guZnJhZ21lbnRTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgIHZlcnQ6IHZlcnRTdHJpbmcgfHwgc2FuZGJveC52ZXJ0ZXhTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVFbGFwc2VkTXM6IGV4dC5nZXRRdWVyeU9iamVjdEVYVChxdWVyeSwgZXh0LlFVRVJZX1JFU1VMVF9FWFQpLzEwMDAwMDAuMFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZmluaXNoVGVzdCgpO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJldCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUod2FpdEZvclRlc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHdhaXRGb3JUZXN0KCk7XG4gICAgfVxuXG4gICAgbG9hZFRleHR1cmUgKG5hbWUsIHVybEVsZW1lbnRPckRhdGEsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFvcHRpb25zKSB7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIHVybEVsZW1lbnRPckRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBvcHRpb25zLnVybCA9IHVybEVsZW1lbnRPckRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHVybEVsZW1lbnRPckRhdGEgPT09ICdvYmplY3QnICYmIHVybEVsZW1lbnRPckRhdGEuZGF0YSAmJiB1cmxFbGVtZW50T3JEYXRhLndpZHRoICYmIHVybEVsZW1lbnRPckRhdGEuaGVpZ2h0KSB7XG4gICAgICAgICAgICBvcHRpb25zLmRhdGEgPSB1cmxFbGVtZW50T3JEYXRhLmRhdGE7XG4gICAgICAgICAgICBvcHRpb25zLndpZHRoID0gdXJsRWxlbWVudE9yRGF0YS53aWR0aDtcbiAgICAgICAgICAgIG9wdGlvbnMuaGVpZ2h0ID0gdXJsRWxlbWVudE9yRGF0YS5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHVybEVsZW1lbnRPckRhdGEgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBvcHRpb25zLmVsZW1lbnQgPSB1cmxFbGVtZW50T3JEYXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMudGV4dHVyZXNbbmFtZV0pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRleHR1cmVzW25hbWVdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0dXJlc1tuYW1lXS5sb2FkKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dHVyZXNbbmFtZV0ub24oJ2xvYWRlZCcsIChhcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9yY2VSZW5kZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50ZXh0dXJlc1tuYW1lXSA9IG5ldyBUZXh0dXJlKHRoaXMuZ2wsIG5hbWUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy50ZXh0dXJlc1tuYW1lXS5vbignbG9hZGVkJywgKGFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcmNlUmVuZGVyID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cblxuICAgIHJlZnJlc2hVbmlmb3JtcygpIHtcbiAgICAgICAgdGhpcy51bmlmb3JtcyA9IHt9O1xuICAgIH1cblxuICAgIHNldFVuaWZvcm0obmFtZSwgLi4udmFsdWUpIHtcbiAgICAgICAgbGV0IHUgPSB7fTtcbiAgICAgICAgdVtuYW1lXSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnNldFVuaWZvcm1zKHUpO1xuICAgIH1cblxuICAgIHNldFVuaWZvcm1zKHVuaWZvcm1zKSB7XG4gICAgICAgIGxldCBwYXJzZWQgPSBwYXJzZVVuaWZvcm1zKHVuaWZvcm1zKTtcbiAgICAgICAgLy8gU2V0IGVhY2ggdW5pZm9ybVxuICAgICAgICBmb3IgKGxldCB1IGluIHBhcnNlZCkge1xuICAgICAgICAgICAgaWYgKHBhcnNlZFt1XS50eXBlID09PSAnc2FtcGxlcjJEJykge1xuICAgICAgICAgICAgICAgIC8vIEZvciB0ZXh0dXJlcywgd2UgbmVlZCB0byB0cmFjayB0ZXh0dXJlIHVuaXRzLCBzbyB3ZSBoYXZlIGEgc3BlY2lhbCBzZXR0ZXJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnVuaWZvcm1UZXh0dXJlKHBhcnNlZFt1XS5uYW1lLCBwYXJzZWRbdV0udmFsdWVbMF0pO1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZFRleHR1cmUocGFyc2VkW3VdLm5hbWUsIHBhcnNlZFt1XS52YWx1ZVswXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuaWZvcm0ocGFyc2VkW3VdLm1ldGhvZCwgcGFyc2VkW3VdLnR5cGUsIHBhcnNlZFt1XS5uYW1lLCBwYXJzZWRbdV0udmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuZm9yY2VSZW5kZXIgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0TW91c2UobW91c2UpIHtcbiAgICAgICAgLy8gc2V0IHRoZSBtb3VzZSB1bmlmb3JtXG4gICAgICAgIGxldCByZWN0ID0gdGhpcy5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGlmIChtb3VzZSAmJlxuICAgICAgICAgICAgbW91c2UueCAmJiBtb3VzZS54ID49IHJlY3QubGVmdCAmJiBtb3VzZS54IDw9IHJlY3QucmlnaHQgJiZcbiAgICAgICAgICAgIG1vdXNlLnkgJiYgbW91c2UueSA+PSByZWN0LnRvcCAmJiBtb3VzZS55IDw9IHJlY3QuYm90dG9tKSB7XG4gICAgICAgICAgICB0aGlzLnVuaWZvcm0oJzJmJywgJ3ZlYzInLCAndV9tb3VzZScsIG1vdXNlLnggLSByZWN0LmxlZnQsIHRoaXMuY2FudmFzLmhlaWdodCAtIChtb3VzZS55IC0gcmVjdC50b3ApKTtcbiAgICAgICAgfVxuICAgIH1cblxuXHQvLyBleDogcHJvZ3JhbS51bmlmb3JtKCczZicsICdwb3NpdGlvbicsIHgsIHksIHopO1xuICAgIHVuaWZvcm0gKG1ldGhvZCwgdHlwZSwgbmFtZSwgLi4udmFsdWUpIHsgLy8gJ3ZhbHVlJyBpcyBhIG1ldGhvZC1hcHByb3ByaWF0ZSBhcmd1bWVudHMgbGlzdFxuICAgICAgICB0aGlzLnVuaWZvcm1zW25hbWVdID0gdGhpcy51bmlmb3Jtc1tuYW1lXSB8fCB7fTtcbiAgICAgICAgbGV0IHVuaWZvcm0gPSB0aGlzLnVuaWZvcm1zW25hbWVdO1xuICAgICAgICBsZXQgY2hhbmdlID0gaXNEaWZmKHVuaWZvcm0udmFsdWUsIHZhbHVlKTtcbiAgICAgICAgaWYgKGNoYW5nZSB8fCB0aGlzLmNoYW5nZSB8fCB1bmlmb3JtLmxvY2F0aW9uID09PSB1bmRlZmluZWQgfHwgdW5pZm9ybS52YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB1bmlmb3JtLm5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgdW5pZm9ybS52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgdW5pZm9ybS50eXBlID0gdHlwZTtcbiAgICAgICAgICAgIHVuaWZvcm0ubWV0aG9kID0gJ3VuaWZvcm0nICsgbWV0aG9kO1xuICAgICAgICAgICAgdW5pZm9ybS5sb2NhdGlvbiA9IHRoaXMuZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSwgbmFtZSk7XG5cbiAgICAgICAgICAgIHRoaXMuZ2xbdW5pZm9ybS5tZXRob2RdLmFwcGx5KHRoaXMuZ2wsIFt1bmlmb3JtLmxvY2F0aW9uXS5jb25jYXQodW5pZm9ybS52YWx1ZSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdW5pZm9ybVRleHR1cmUobmFtZSwgdGV4dHVyZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy50ZXh0dXJlc1tuYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRUZXh0dXJlKG5hbWUsIHRleHR1cmUsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy51bmlmb3JtKCcxaScsICdzYW1wbGVyMkQnLCBuYW1lLCB0aGlzLnRleHVyZUluZGV4KTtcbiAgICAgICAgICAgIHRoaXMudGV4dHVyZXNbbmFtZV0uYmluZCh0aGlzLnRleHVyZUluZGV4KTtcbiAgICAgICAgICAgIHRoaXMudW5pZm9ybSgnMmYnLCAndmVjMicsIG5hbWUgKyAnUmVzb2x1dGlvbicsIHRoaXMudGV4dHVyZXNbbmFtZV0ud2lkdGgsIHRoaXMudGV4dHVyZXNbbmFtZV0uaGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMudGV4dXJlSW5kZXgrKztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlc2l6ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMud2lkdGggIT09IHRoaXMuY2FudmFzLmNsaWVudFdpZHRoIHx8XG4gICAgICAgICAgICB0aGlzLmhlaWdodCAhPT0gdGhpcy5jYW52YXMuY2xpZW50SGVpZ2h0KSB7XG4gICAgICAgICAgICBsZXQgcmVhbFRvQ1NTUGl4ZWxzID0gd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMTtcblxuICAgICAgICAgICAgLy8gTG9va3VwIHRoZSBzaXplIHRoZSBicm93c2VyIGlzIGRpc3BsYXlpbmcgdGhlIGNhbnZhcyBpbiBDU1MgcGl4ZWxzXG4gICAgICAgICAgICAvLyBhbmQgY29tcHV0ZSBhIHNpemUgbmVlZGVkIHRvIG1ha2Ugb3VyIGRyYXdpbmdidWZmZXIgbWF0Y2ggaXQgaW5cbiAgICAgICAgICAgIC8vIGRldmljZSBwaXhlbHMuXG4gICAgICAgICAgICBsZXQgZGlzcGxheVdpZHRoID0gTWF0aC5mbG9vcih0aGlzLmdsLmNhbnZhcy5jbGllbnRXaWR0aCAqIHJlYWxUb0NTU1BpeGVscyk7XG4gICAgICAgICAgICBsZXQgZGlzcGxheUhlaWdodCA9IE1hdGguZmxvb3IodGhpcy5nbC5jYW52YXMuY2xpZW50SGVpZ2h0ICogcmVhbFRvQ1NTUGl4ZWxzKTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNhbnZhcyBpcyBub3QgdGhlIHNhbWUgc2l6ZS5cbiAgICAgICAgICAgIGlmICh0aGlzLmdsLmNhbnZhcy53aWR0aCAhPT0gZGlzcGxheVdpZHRoIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5nbC5jYW52YXMuaGVpZ2h0ICE9PSBkaXNwbGF5SGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgLy8gTWFrZSB0aGUgY2FudmFzIHRoZSBzYW1lIHNpemVcbiAgICAgICAgICAgICAgICB0aGlzLmdsLmNhbnZhcy53aWR0aCA9IGRpc3BsYXlXaWR0aDtcbiAgICAgICAgICAgICAgICB0aGlzLmdsLmNhbnZhcy5oZWlnaHQgPSBkaXNwbGF5SGVpZ2h0O1xuICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgdmlld3BvcnQgdG8gbWF0Y2hcbiAgICAgICAgICAgICAgICB0aGlzLmdsLnZpZXdwb3J0KDAsIDAsIHRoaXMuZ2wuY2FudmFzLndpZHRoLCB0aGlzLmdsLmNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIC8vIHRoaXMuZ2wudmlld3BvcnQoMCwgMCwgdGhpcy5nbC5kcmF3aW5nQnVmZmVyV2lkdGgsIHRoaXMuZ2wuZHJhd2luZ0J1ZmZlckhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLndpZHRoID0gdGhpcy5jYW52YXMuY2xpZW50V2lkdGg7XG4gICAgICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMuY2FudmFzLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyICgpIHtcbiAgICAgICAgdGhpcy52aXNpYmxlID0gaXNDYW52YXNWaXNpYmxlKHRoaXMuY2FudmFzKTtcbiAgICAgICAgaWYgKHRoaXMuZm9yY2VSZW5kZXIgfHxcbiAgICAgICAgICAgICh0aGlzLmFuaW1hdGVkICYmIHRoaXMudmlzaWJsZSAmJiAhIHRoaXMucGF1c2VkKSkge1xuXG4gICAgICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICBsZXQgbm93ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgICAgICB0aGlzLnRpbWVEZWx0YSA9ICAobm93IC0gdGhpcy50aW1lUHJldikgLyAxMDAwLjA7XG4gICAgICAgICAgICB0aGlzLnRpbWVQcmV2ID0gbm93O1xuICAgICAgICAgICAgaWYgKHRoaXMubkRlbHRhID4gMSkge1xuICAgICAgICAgICAgICAgIC8vIHNldCB0aGUgZGVsdGEgdGltZSB1bmlmb3JtXG4gICAgICAgICAgICAgICAgdGhpcy51bmlmb3JtKCcxZicsICdmbG9hdCcsICd1X2RlbHRhJywgdGhpcy50aW1lRGVsdGEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5uVGltZSA+IDEgKSB7XG4gICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBlbGFwc2VkIHRpbWUgdW5pZm9ybVxuICAgICAgICAgICAgICAgIHRoaXMudW5pZm9ybSgnMWYnLCAnZmxvYXQnLCAndV90aW1lJywgKG5vdyAtIHRoaXMudGltZUxvYWQpIC8gMTAwMC4wKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMubkRhdGUpIHtcbiAgICAgICAgICAgICAgICAvLyBTZXQgZGF0ZSB1bmlmb3JtOiB5ZWFyL21vbnRoL2RheS90aW1lX2luX3NlY1xuICAgICAgICAgICAgICAgIHRoaXMudW5pZm9ybSgnNGYnLCAnZmxvYXQnLCAndV9kYXRlJywgZGF0ZS5nZXRGdWxsWWVhcigpLCBkYXRlLmdldE1vbnRoKCksIGRhdGUuZ2V0RGF0ZSgpLCBkYXRlLmdldEhvdXJzKCkqMzYwMCArIGRhdGUuZ2V0TWludXRlcygpKjYwICsgZGF0ZS5nZXRTZWNvbmRzKCkgKyBkYXRlLmdldE1pbGxpc2Vjb25kcygpICogMC4wMDEgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gc2V0IHRoZSByZXNvbHV0aW9uIHVuaWZvcm1cbiAgICAgICAgICAgIHRoaXMudW5pZm9ybSgnMmYnLCAndmVjMicsICd1X3Jlc29sdXRpb24nLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcblxuICAgICAgICAgICAgdGhpcy50ZXh1cmVJbmRleCA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCB0ZXggaW4gdGhpcy50ZXh0dXJlcykge1xuICAgICAgICAgICAgICAgIHRoaXMudW5pZm9ybVRleHR1cmUodGV4KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRHJhdyB0aGUgcmVjdGFuZ2xlLlxuICAgICAgICAgICAgdGhpcy5nbC5kcmF3QXJyYXlzKHRoaXMuZ2wuVFJJQU5HTEVTLCAwLCA2KTtcblxuICAgICAgICAgICAgLy8gVHJpZ2dlciBldmVudFxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdyZW5kZXInLCB7fSk7XG5cbiAgICAgICAgICAgIHRoaXMuY2hhbmdlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmZvcmNlUmVuZGVyID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwYXVzZSAoKSB7XG4gICAgICAgIHRoaXMucGF1c2VkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBwbGF5ICgpIHtcbiAgICAgICAgdGhpcy5wYXVzZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB2ZXJzaW9uKCkge1xuICAgICAgICByZXR1cm4gJzAuMC4yNSc7XG4gICAgfVxufVxuXG53aW5kb3cuR2xzbENhbnZhcyA9IEdsc2xDYW52YXM7XG5cbmZ1bmN0aW9uIGxvYWRBbGxHbHNsQ2FudmFzKCkge1xuICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ2xzbENhbnZhcycpO1xuICAgIGlmIChsaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgd2luZG93Lmdsc2xDYW52YXNlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBzYW5kYm94ID0gbmV3IEdsc2xDYW52YXMobGlzdFtpXSk7XG4gICAgICAgICAgICBpZiAoc2FuZGJveC5pc1ZhbGlkKSB7XG4gICAgICAgICAgICAgICAgd2luZG93Lmdsc2xDYW52YXNlcy5wdXNoKHNhbmRib3gpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBsb2FkQWxsR2xzbENhbnZhcygpO1xufSk7XG4iLCIvLyBUZXh0dXJlIG1hbmFnZW1lbnRcbmltcG9ydCB7IGlzUG93ZXJPZjIsIGlzU2FmYXJpIH0gZnJvbSAnLi4vdG9vbHMvY29tbW9uJztcbmltcG9ydCB7IHN1YnNjcmliZU1peGluIH0gZnJvbSAnLi4vdG9vbHMvbWl4aW4nO1xuXG4vLyBHTCB0ZXh0dXJlIHdyYXBwZXIgb2JqZWN0IGZvciBrZWVwaW5nIHRyYWNrIG9mIGEgZ2xvYmFsIHNldCBvZiB0ZXh0dXJlcywga2V5ZWQgYnkgYSB1bmlxdWUgdXNlci1kZWZpbmVkIG5hbWVcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRleHR1cmUge1xuICAgIGNvbnN0cnVjdG9yKGdsLCBuYW1lLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3Vic2NyaWJlTWl4aW4odGhpcyk7XG5cbiAgICAgICAgdGhpcy5nbCA9IGdsO1xuICAgICAgICB0aGlzLnRleHR1cmUgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XG4gICAgICAgIGlmICh0aGlzLnRleHR1cmUpIHtcbiAgICAgICAgICAgIHRoaXMudmFsaWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYmluZCgpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuc291cmNlID0gbnVsbDtcbiAgICAgICAgdGhpcy5zb3VyY2VUeXBlID0gbnVsbDtcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gbnVsbDsgLy8gYSBQcm9taXNlIG9iamVjdCB0byB0cmFjayB0aGUgbG9hZGluZyBzdGF0ZSBvZiB0aGlzIHRleHR1cmVcblxuICAgICAgICAvLyBEZWZhdWx0IHRvIGEgMS1waXhlbCBibGFjayB0ZXh0dXJlIHNvIHdlIGNhbiBzYWZlbHkgcmVuZGVyIHdoaWxlIHdlIHdhaXQgZm9yIGFuIGltYWdlIHRvIGxvYWRcbiAgICAgICAgLy8gU2VlOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE5NzIyMjQ3L3dlYmdsLXdhaXQtZm9yLXRleHR1cmUtdG8tbG9hZFxuICAgICAgICB0aGlzLnNldERhdGEoMSwgMSwgbmV3IFVpbnQ4QXJyYXkoWzAsIDAsIDAsIDI1NV0pLCB7IGZpbHRlcmluZzogJ2xpbmVhcicgfSk7XG4gICAgICAgIHRoaXMuc2V0RmlsdGVyaW5nKG9wdGlvbnMuZmlsdGVyaW5nKTtcblxuICAgICAgICB0aGlzLmxvYWQob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgLy8gRGVzdHJveSBhIHNpbmdsZSB0ZXh0dXJlIGluc3RhbmNlXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnZhbGlkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5nbC5kZWxldGVUZXh0dXJlKHRoaXMudGV4dHVyZSk7XG4gICAgICAgIHRoaXMudGV4dHVyZSA9IG51bGw7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmRhdGE7XG4gICAgICAgIHRoaXMuZGF0YSA9IG51bGw7XG4gICAgICAgIHRoaXMudmFsaWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBiaW5kKHVuaXQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnZhbGlkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB1bml0ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgaWYgKFRleHR1cmUuYWN0aXZlVW5pdCAhPT0gdW5pdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2wuYWN0aXZlVGV4dHVyZSh0aGlzLmdsLlRFWFRVUkUwICsgdW5pdCk7XG4gICAgICAgICAgICAgICAgVGV4dHVyZS5hY3RpdmVVbml0ID0gdW5pdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoVGV4dHVyZS5hY3RpdmVUZXh0dXJlICE9PSB0aGlzLnRleHR1cmUpIHtcbiAgICAgICAgICAgIHRoaXMuZ2wuYmluZFRleHR1cmUodGhpcy5nbC5URVhUVVJFXzJELCB0aGlzLnRleHR1cmUpO1xuICAgICAgICAgICAgVGV4dHVyZS5hY3RpdmVUZXh0dXJlID0gdGhpcy50ZXh0dXJlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbG9hZChvcHRpb25zID0ge30pIHtcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gbnVsbDtcblxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMudXJsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaWYgKHRoaXMudXJsID09PSB1bmRlZmluZWQgfHwgb3B0aW9ucy51cmwgIT09IHRoaXMudXJsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRVcmwob3B0aW9ucy51cmwsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMuZWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5zZXRFbGVtZW50KG9wdGlvbnMuZWxlbWVudCwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucy5kYXRhICYmIG9wdGlvbnMud2lkdGggJiYgb3B0aW9ucy5oZWlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0RGF0YShvcHRpb25zLndpZHRoLCBvcHRpb25zLmhlaWdodCwgb3B0aW9ucy5kYXRhLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNldHMgdGV4dHVyZSBmcm9tIGFuIHVybFxuICAgIHNldFVybCh1cmwsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBpZiAoIXRoaXMudmFsaWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudXJsID0gdXJsOyAvLyBzYXZlIFVSTCByZWZlcmVuY2UgKHdpbGwgYmUgb3ZlcndyaXR0ZW4gd2hlbiBlbGVtZW50IGlzIGxvYWRlZCBiZWxvdylcbiAgICAgICAgdGhpcy5zb3VyY2UgPSB0aGlzLnVybDtcbiAgICAgICAgdGhpcy5zb3VyY2VUeXBlID0gJ3VybCc7XG5cbiAgICAgICAgdGhpcy5sb2FkaW5nID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgbGV0IGV4dCA9IHVybC5zcGxpdCgnLicpLnBvcCgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBsZXQgaXNWaWRlbyA9IChleHQgPT09ICdvZ3YnIHx8IGV4dCA9PT0gJ3dlYm0nIHx8IGV4dCA9PT0gJ21wNCcpO1xuXG4gICAgICAgICAgICBsZXQgZWxlbWVudCA9IHVuZGVmaW5lZFxuICAgICAgICAgICAgaWYgKGlzVmlkZW8pIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmF1dG9wbGF5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmZpbHRlcmluZyA9ICduZWFyZXN0JztcbiAgICAgICAgICAgICAgICAvLyBlbGVtZW50LnByZWxvYWQgPSAnYXV0byc7XG4gICAgICAgICAgICAgICAgLy8gZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZWxlbWVudC5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRFbGVtZW50KGVsZW1lbnQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgVGV4dHVyZSAnJHt0aGlzLm5hbWV9JzogZmFpbGVkIHRvIGxvYWQgdXJsOiAnJHt0aGlzLnNvdXJjZX0nYCwgZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZWxlbWVudC5vbmVycm9yID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gV2FybiBhbmQgcmVzb2x2ZSBvbiBlcnJvclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBUZXh0dXJlICcke3RoaXMubmFtZX0nOiBmYWlsZWQgdG8gbG9hZCB1cmw6ICcke3RoaXMuc291cmNlfSdgLCBlLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gU2FmYXJpIGhhcyBhIGJ1ZyBsb2FkaW5nIGRhdGEtVVJMIGVsZW1lbnRzIHdpdGggQ09SUyBlbmFibGVkLCBzbyBpdCBtdXN0IGJlIGRpc2FibGVkIGluIHRoYXQgY2FzZVxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEyMzk3OFxuICAgICAgICAgICAgaWYgKCEoaXNTYWZhcmkoKSAmJiB0aGlzLnNvdXJjZS5zbGljZSgwLCA1KSA9PT0gJ2RhdGE6JykpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNyb3NzT3JpZ2luID0gJ2Fub255bW91cyc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsZW1lbnQuc3JjID0gdGhpcy5zb3VyY2U7XG4gICAgICAgICAgICBpZiAoaXNWaWRlbykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0RWxlbWVudChlbGVtZW50LCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRpbmc7XG4gICAgfVxuXG4gICAgLy8gU2V0cyB0ZXh0dXJlIHRvIGEgcmF3IGltYWdlIGJ1ZmZlclxuICAgIHNldERhdGEod2lkdGgsIGhlaWdodCwgZGF0YSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5zb3VyY2UgPSBkYXRhO1xuICAgICAgICB0aGlzLnNvdXJjZVR5cGUgPSAnZGF0YSc7XG5cbiAgICAgICAgdGhpcy51cGRhdGUob3B0aW9ucyk7XG4gICAgICAgIHRoaXMuc2V0RmlsdGVyaW5nKG9wdGlvbnMpO1xuXG4gICAgICAgIHRoaXMubG9hZGluZyA9IFByb21pc2UucmVzb2x2ZSh0aGlzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9hZGluZztcbiAgICB9XG5cbiAgICAvLyBTZXRzIHRoZSB0ZXh0dXJlIHRvIHRyYWNrIGEgZWxlbWVudCAoY2FudmFzL2ltYWdlKVxuICAgIHNldEVsZW1lbnQoZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgICBsZXQgZWwgPSBlbGVtZW50O1xuXG4gICAgICAgIC8vIGEgc3RyaW5nIGVsZW1lbnQgaXMgaW50ZXJwZXRlZCBhcyBhIENTUyBzZWxlY3RvclxuICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbGVtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQgfHxcbiAgICAgICAgICAgIGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50IHx8XG4gICAgICAgICAgICBlbGVtZW50IGluc3RhbmNlb2YgSFRNTFZpZGVvRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5zb3VyY2UgPSBlbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VUeXBlID0gJ2VsZW1lbnQnO1xuXG4gICAgICAgICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NhbnBsYXl0aHJvdWdoJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVydmFsSUQgPSBzZXRJbnRlcnZhbCgoKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGUob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDE1KTtcbiAgICAgICAgICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmN1cnJlbnRUaW1lID0gMDtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5wbGF5KCk7XG4gICAgICAgICAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKG9wdGlvbnMpO1xuICAgICAgICAgICAgfSAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zZXRGaWx0ZXJpbmcob3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgbXNnID0gYHRoZSAnZWxlbWVudCcgcGFyYW1ldGVyIChcXGBlbGVtZW50OiAke0pTT04uc3RyaW5naWZ5KGVsKX1cXGApIG11c3QgYmUgYSBDU1MgYDtcbiAgICAgICAgICAgIG1zZyArPSBgc2VsZWN0b3Igc3RyaW5nLCBvciBhIDxjYW52YXM+LCA8aW1hZ2U+IG9yIDx2aWRlbz4gb2JqZWN0YDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBUZXh0dXJlICcke3RoaXMubmFtZX0nOiAke21zZ31gLCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubG9hZGluZyA9IFByb21pc2UucmVzb2x2ZSh0aGlzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9hZGluZztcbiAgICB9XG5cbiAgICAvLyBVcGxvYWRzIGN1cnJlbnQgaW1hZ2Ugb3IgYnVmZmVyIHRvIHRoZSBHUFUgKGNhbiBiZSB1c2VkIHRvIHVwZGF0ZSBhbmltYXRlZCB0ZXh0dXJlcyBvbiB0aGUgZmx5KVxuICAgIHVwZGF0ZShvcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKCF0aGlzLnZhbGlkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmJpbmQoKTtcbiAgICAgICAgdGhpcy5nbC5waXhlbFN0b3JlaSh0aGlzLmdsLlVOUEFDS19GTElQX1lfV0VCR0wsIChvcHRpb25zLlVOUEFDS19GTElQX1lfV0VCR0wgPT09IGZhbHNlID8gZmFsc2UgOiB0cnVlKSk7XG4gICAgICAgIHRoaXMuZ2wucGl4ZWxTdG9yZWkodGhpcy5nbC5VTlBBQ0tfUFJFTVVMVElQTFlfQUxQSEFfV0VCR0wsIG9wdGlvbnMuVU5QQUNLX1BSRU1VTFRJUExZX0FMUEhBX1dFQkdMIHx8IGZhbHNlKTtcblxuICAgICAgICAvLyBJbWFnZSBvciBDYW52YXMgZWxlbWVudFxuICAgICAgICBpZiAodGhpcy5zb3VyY2VUeXBlID09PSAnZWxlbWVudCcgJiZcbiAgICAgICAgICAgICgodGhpcy5zb3VyY2UgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkgfHwgXG4gICAgICAgICAgICAgKHRoaXMuc291cmNlIGluc3RhbmNlb2YgSFRNTFZpZGVvRWxlbWVudCkgfHxcbiAgICAgICAgICAgICAodGhpcy5zb3VyY2UgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50ICYmIHRoaXMuc291cmNlLmNvbXBsZXRlKSkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNvdXJjZSBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndpZHRoID0gdGhpcy5zb3VyY2UudmlkZW9XaWR0aDtcbiAgICAgICAgICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMuc291cmNlLnZpZGVvSGVpZ2h0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLndpZHRoID0gdGhpcy5zb3VyY2Uud2lkdGg7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLnNvdXJjZS5oZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmdsLnRleEltYWdlMkQodGhpcy5nbC5URVhUVVJFXzJELCAwLCB0aGlzLmdsLlJHQkEsIHRoaXMuZ2wuUkdCQSwgdGhpcy5nbC5VTlNJR05FRF9CWVRFLCB0aGlzLnNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmF3IGltYWdlIGJ1ZmZlclxuICAgICAgICBlbHNlIGlmICh0aGlzLnNvdXJjZVR5cGUgPT09ICdkYXRhJykge1xuICAgICAgICAgICAgdGhpcy5nbC50ZXhJbWFnZTJEKHRoaXMuZ2wuVEVYVFVSRV8yRCwgMCwgdGhpcy5nbC5SR0JBLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCwgMCwgdGhpcy5nbC5SR0JBLCB0aGlzLmdsLlVOU0lHTkVEX0JZVEUsIHRoaXMuc291cmNlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRyaWdnZXIoJ2xvYWRlZCcsIHRoaXMpO1xuICAgIH1cblxuICAgIC8vIERldGVybWluZXMgYXBwcm9wcmlhdGUgZmlsdGVyaW5nIG1vZGVcbiAgICBzZXRGaWx0ZXJpbmcgKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBpZiAoIXRoaXMudmFsaWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucG93ZXJPZjIgPSBpc1Bvd2VyT2YyKHRoaXMud2lkdGgpICYmIGlzUG93ZXJPZjIodGhpcy5oZWlnaHQpO1xuICAgICAgICBsZXQgZGVmdWFsdEZpbHRlciA9ICh0aGlzLnBvd2VyT2YyID8gJ21pcG1hcCcgOiAnbGluZWFyJyk7XG4gICAgICAgIHRoaXMuZmlsdGVyaW5nID0gb3B0aW9ucy5maWx0ZXJpbmcgfHwgZGVmdWFsdEZpbHRlcjtcblxuICAgICAgICB2YXIgZ2wgPSB0aGlzLmdsO1xuICAgICAgICB0aGlzLmJpbmQoKTtcblxuICAgICAgICAvLyBGb3IgcG93ZXItb2YtMiB0ZXh0dXJlcywgdGhlIGZvbGxvd2luZyBwcmVzZXRzIGFyZSBhdmFpbGFibGU6XG4gICAgICAgIC8vIG1pcG1hcDogbGluZWFyIGJsZW5kIGZyb20gbmVhcmVzdCBtaXBcbiAgICAgICAgLy8gbGluZWFyOiBsaW5lYXIgYmxlbmQgZnJvbSBvcmlnaW5hbCBpbWFnZSAobm8gbWlwcylcbiAgICAgICAgLy8gbmVhcmVzdDogbmVhcmVzdCBwaXhlbCBmcm9tIG9yaWdpbmFsIGltYWdlIChubyBtaXBzLCAnYmxvY2t5JyBsb29rKVxuICAgICAgICBpZiAodGhpcy5wb3dlck9mMikge1xuICAgICAgICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfUywgb3B0aW9ucy5URVhUVVJFX1dSQVBfUyB8fCAob3B0aW9ucy5yZXBlYXQgJiYgZ2wuUkVQRUFUKSB8fCBnbC5DTEFNUF9UT19FREdFKTtcbiAgICAgICAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1QsIG9wdGlvbnMuVEVYVFVSRV9XUkFQX1QgfHwgKG9wdGlvbnMucmVwZWF0ICYmIGdsLlJFUEVBVCkgfHwgZ2wuQ0xBTVBfVE9fRURHRSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlcmluZyA9PT0gJ21pcG1hcCcpIHtcbiAgICAgICAgICAgICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTElORUFSX01JUE1BUF9MSU5FQVIpOyAvLyBUT0RPOiB1c2UgdHJpbGluZWFyIGZpbHRlcmluZyBieSBkZWZ1YWx0IGluc3RlYWQ/XG4gICAgICAgICAgICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLkxJTkVBUik7XG4gICAgICAgICAgICAgICAgZ2wuZ2VuZXJhdGVNaXBtYXAoZ2wuVEVYVFVSRV8yRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmZpbHRlcmluZyA9PT0gJ2xpbmVhcicpIHtcbiAgICAgICAgICAgICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTElORUFSKTtcbiAgICAgICAgICAgICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTElORUFSKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZmlsdGVyaW5nID09PSAnbmVhcmVzdCcpIHtcbiAgICAgICAgICAgICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTkVBUkVTVCk7XG4gICAgICAgICAgICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLk5FQVJFU1QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gV2ViR0wgaGFzIHN0cmljdCByZXF1aXJlbWVudHMgb24gbm9uLXBvd2VyLW9mLTIgdGV4dHVyZXM6XG4gICAgICAgICAgICAvLyBObyBtaXBtYXBzIGFuZCBtdXN0IGNsYW1wIHRvIGVkZ2VcbiAgICAgICAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1MsIGdsLkNMQU1QX1RPX0VER0UpO1xuICAgICAgICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfVCwgZ2wuQ0xBTVBfVE9fRURHRSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlcmluZyA9PT0gJ21pcG1hcCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlcmluZyA9ICdsaW5lYXInO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5maWx0ZXJpbmcgPT09ICduZWFyZXN0Jykge1xuICAgICAgICAgICAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NSU5fRklMVEVSLCBnbC5ORUFSRVNUKTtcbiAgICAgICAgICAgICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTkVBUkVTVCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHsgLy8gZGVmYXVsdCB0byBsaW5lYXIgZm9yIG5vbi1wb3dlci1vZi0yIHRleHR1cmVzXG4gICAgICAgICAgICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01JTl9GSUxURVIsIGdsLkxJTkVBUik7XG4gICAgICAgICAgICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLkxJTkVBUik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIFJlcG9ydCBtYXggdGV4dHVyZSBzaXplIGZvciBhIEdMIGNvbnRleHRcblRleHR1cmUuZ2V0TWF4VGV4dHVyZVNpemUgPSBmdW5jdGlvbiAoZ2wpIHtcbiAgICByZXR1cm4gZ2wuZ2V0UGFyYW1ldGVyKGdsLk1BWF9URVhUVVJFX1NJWkUpO1xufTtcblxuLy8gR2xvYmFsIHNldCBvZiB0ZXh0dXJlcywgYnkgbmFtZVxuVGV4dHVyZS5hY3RpdmVVbml0ID0gLTE7XG4iLCJsZXQgbGFzdEVycm9yID0gJyc7XG5cbi8qKlxuICogQ3JlYXRlcyB0aGUgSFRMTSBmb3IgYSBmYWlsdXJlIG1lc3NhZ2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBjYW52YXNDb250YWluZXJJZCBpZCBvZiBjb250YWluZXIgb2YgdGhcbiAqICAgICAgICBjYW52YXMuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBodG1sLlxuICovXG5mdW5jdGlvbiBtYWtlRmFpbEhUTUwobXNnKSB7XG4gICAgcmV0dXJuIGBcbjx0YWJsZSBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICM4Q0U7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7XCI+PHRyPlxuPHRkIGFsaWduPVwiY2VudGVyXCI+XG48ZGl2IHN0eWxlPVwiZGlzcGxheTogdGFibGUtY2VsbDsgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcIj5cbjxkaXYgc3R5bGU9XCJcIj5gICsgbXNnICsgYDwvZGl2PlxuPC9kaXY+XG48L3RkPjwvdHI+PC90YWJsZT5cbmA7XG59XG5cbi8qKlxuICogTWVzYXNnZSBmb3IgZ2V0dGluZyBhIHdlYmdsIGJyb3dzZXJcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmxldCBHRVRfQV9XRUJHTF9CUk9XU0VSID0gYFxuXHRUaGlzIHBhZ2UgcmVxdWlyZXMgYSBicm93c2VyIHRoYXQgc3VwcG9ydHMgV2ViR0wuPGJyLz5cblx0PGEgaHJlZj1cImh0dHA6Ly9nZXQud2ViZ2wub3JnXCI+Q2xpY2sgaGVyZSB0byB1cGdyYWRlIHlvdXIgYnJvd3Nlci48L2E+XG5gO1xuXG4vKipcbiAqIE1lc2FzZ2UgZm9yIG5lZWQgYmV0dGVyIGhhcmR3YXJlXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5sZXQgT1RIRVJfUFJPQkxFTSA9IGBcblx0SXQgZG9lcyBub3QgYXBwZWFyIHlvdXIgY29tcHV0ZXIgY2FuIHN1cHBvcnQgV2ViR0wuPGJyLz5cblx0PGEgaHJlZj1cImh0dHA6Ly9nZXQud2ViZ2wub3JnL3Ryb3VibGVzaG9vdGluZy9cIj5DbGljayBoZXJlIGZvciBtb3JlIGluZm9ybWF0aW9uLjwvYT5cbmA7XG5cbi8qKlxuICogQ3JlYXRlcyBhIHdlYmdsIGNvbnRleHQuIElmIGNyZWF0aW9uIGZhaWxzIGl0IHdpbGxcbiAqIGNoYW5nZSB0aGUgY29udGVudHMgb2YgdGhlIGNvbnRhaW5lciBvZiB0aGUgPGNhbnZhcz5cbiAqIHRhZyB0byBhbiBlcnJvciBtZXNzYWdlIHdpdGggdGhlIGNvcnJlY3QgbGlua3MgZm9yIFdlYkdMLlxuICogQHBhcmFtIHtFbGVtZW50fSBjYW52YXMuIFRoZSBjYW52YXMgZWxlbWVudCB0byBjcmVhdGUgYVxuICogICAgIGNvbnRleHQgZnJvbS5cbiAqIEBwYXJhbSB7V2ViR0xDb250ZXh0Q3JlYXRpb25BdHRpcmJ1dGVzfSBvcHRBdHRyaWJzIEFueVxuICogICAgIGNyZWF0aW9uIGF0dHJpYnV0ZXMgeW91IHdhbnQgdG8gcGFzcyBpbi5cbiAqIEByZXR1cm4ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gVGhlIGNyZWF0ZWQgY29udGV4dC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldHVwV2ViR0wgKGNhbnZhcywgb3B0QXR0cmlicykge1xuICAgIGZ1bmN0aW9uIHNob3dMaW5rKHN0cikge1xuICAgICAgICBsZXQgY29udGFpbmVyID0gY2FudmFzLnBhcmVudE5vZGU7XG4gICAgICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBtYWtlRmFpbEhUTUwoc3RyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICghd2luZG93LldlYkdMUmVuZGVyaW5nQ29udGV4dCkge1xuICAgICAgICBzaG93TGluayhHRVRfQV9XRUJHTF9CUk9XU0VSKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgbGV0IGNvbnRleHQgPSBjcmVhdGUzRENvbnRleHQoY2FudmFzLCBvcHRBdHRyaWJzKTtcbiAgICBpZiAoIWNvbnRleHQpIHtcbiAgICAgICAgc2hvd0xpbmsoT1RIRVJfUFJPQkxFTSk7XG4gICAgfVxuICAgIGNvbnRleHQuZ2V0RXh0ZW5zaW9uKCdPRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMnKTtcbiAgICByZXR1cm4gY29udGV4dDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgd2ViZ2wgY29udGV4dC5cbiAqIEBwYXJhbSB7IUNhbnZhc30gY2FudmFzIFRoZSBjYW52YXMgdGFnIHRvIGdldCBjb250ZXh0XG4gKiAgICAgZnJvbS4gSWYgb25lIGlzIG5vdCBwYXNzZWQgaW4gb25lIHdpbGwgYmUgY3JlYXRlZC5cbiAqIEByZXR1cm4geyFXZWJHTENvbnRleHR9IFRoZSBjcmVhdGVkIGNvbnRleHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUzRENvbnRleHQoY2FudmFzLCBvcHRBdHRyaWJzKSB7XG4gICAgbGV0IG5hbWVzID0gWyd3ZWJnbCcsICdleHBlcmltZW50YWwtd2ViZ2wnXTtcbiAgICBsZXQgY29udGV4dCA9IG51bGw7XG4gICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IG5hbWVzLmxlbmd0aDsgKytpaSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KG5hbWVzW2lpXSwgb3B0QXR0cmlicyk7XG4gICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgaWYgKGNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29udGV4dDtcbn1cblxuLypcbiAqXHRDcmVhdGUgYSBWZXJ0ZXggb2YgYSBzcGVjaWZpYyB0eXBlIChnbC5WRVJURVhfU0hBREVSLylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNoYWRlcihtYWluLCBzb3VyY2UsIHR5cGUpIHtcbiAgICBsZXQgZ2wgPSBtYWluLmdsO1xuXG4gICAgbGV0IHNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcih0eXBlKTtcbiAgICBnbC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBzb3VyY2UpO1xuICAgIGdsLmNvbXBpbGVTaGFkZXIoc2hhZGVyKTtcblxuICAgIGxldCBjb21waWxlZCA9IGdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTKTtcblxuICAgIGlmICghY29tcGlsZWQpIHtcbiAgICAgICAgLy8gU29tZXRoaW5nIHdlbnQgd3JvbmcgZHVyaW5nIGNvbXBpbGF0aW9uOyBnZXQgdGhlIGVycm9yXG4gICAgICAgIGxhc3RFcnJvciA9IGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignKioqIEVycm9yIGNvbXBpbGluZyBzaGFkZXIgJyArIHNoYWRlciArICc6JyArIGxhc3RFcnJvcik7XG4gICAgICAgIG1haW4udHJpZ2dlcignZXJyb3InLCB7IHNoYWRlcjogc2hhZGVyLCBzb3VyY2U6IHNvdXJjZSwgdHlwZTogdHlwZSwgZXJyb3I6IGxhc3RFcnJvciB9KTtcbiAgICAgICAgZ2wuZGVsZXRlU2hhZGVyKHNoYWRlcik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBzaGFkZXI7XG59XG5cbi8qKlxuICogTG9hZHMgYSBzaGFkZXIuXG4gKiBAcGFyYW0geyFXZWJHTENvbnRleHR9IGdsIFRoZSBXZWJHTENvbnRleHQgdG8gdXNlLlxuICogQHBhcmFtIHtzdHJpbmd9IHNoYWRlclNvdXJjZSBUaGUgc2hhZGVyIHNvdXJjZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaGFkZXJUeXBlIFRoZSB0eXBlIG9mIHNoYWRlci5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nKTogdm9pZCkgb3B0X2Vycm9yQ2FsbGJhY2sgY2FsbGJhY2sgZm9yIGVycm9ycy5cbiAqIEByZXR1cm4geyFXZWJHTFNoYWRlcn0gVGhlIGNyZWF0ZWQgc2hhZGVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJvZ3JhbShtYWluLCBzaGFkZXJzLCBvcHRBdHRyaWJzLCBvcHRMb2NhdGlvbnMpIHtcbiAgICBsZXQgZ2wgPSBtYWluLmdsO1xuXG4gICAgbGV0IHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XG4gICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IHNoYWRlcnMubGVuZ3RoOyArK2lpKSB7XG4gICAgICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBzaGFkZXJzW2lpXSk7XG4gICAgfVxuICAgIGlmIChvcHRBdHRyaWJzKSB7XG4gICAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBvcHRBdHRyaWJzLmxlbmd0aDsgKytpaSkge1xuICAgICAgICAgICAgZ2wuYmluZEF0dHJpYkxvY2F0aW9uKFxuICAgICAgICAgICAgcHJvZ3JhbSxcbiAgICAgICAgICAgIG9wdExvY2F0aW9ucyA/IG9wdExvY2F0aW9uc1tpaV0gOiBpaSxcbiAgICAgICAgICAgIG9wdEF0dHJpYnNbaWldKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnbC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcblxuICAgIC8vIENoZWNrIHRoZSBsaW5rIHN0YXR1c1xuICAgIGxldCBsaW5rZWQgPSBnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIGdsLkxJTktfU1RBVFVTKTtcbiAgICBpZiAoIWxpbmtlZCkge1xuICAgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZyB3aXRoIHRoZSBsaW5rXG4gICAgICAgIGxhc3RFcnJvciA9IGdsLmdldFByb2dyYW1JbmZvTG9nKHByb2dyYW0pO1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgaW4gcHJvZ3JhbSBsaW5raW5nOicgKyBsYXN0RXJyb3IpO1xuICAgICAgICBnbC5kZWxldGVQcm9ncmFtKHByb2dyYW0pO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHByb2dyYW07XG59XG5cbi8vIEJ5IEJyZXR0IENhbWJlciBvblxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3RhbmdyYW1zL3RhbmdyYW0vYmxvYi9tYXN0ZXIvc3JjL2dsL2dsc2wuanNcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVVuaWZvcm1zKHVuaWZvcm1zLCBwcmVmaXggPSBudWxsKSB7XG4gICAgbGV0IHBhcnNlZCA9IFtdO1xuXG4gICAgZm9yIChsZXQgbmFtZSBpbiB1bmlmb3Jtcykge1xuICAgICAgICBsZXQgdW5pZm9ybSA9IHVuaWZvcm1zW25hbWVdO1xuICAgICAgICBsZXQgdTtcblxuICAgICAgICBpZiAocHJlZml4KSB7XG4gICAgICAgICAgICBuYW1lID0gcHJlZml4ICsgJy4nICsgbmFtZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNpbmdsZSBmbG9hdFxuICAgICAgICBpZiAodHlwZW9mIHVuaWZvcm0gPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBwYXJzZWQucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2Zsb2F0JyxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICcxZicsXG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdW5pZm9ybVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQXJyYXk6IHZlY3RvciwgYXJyYXkgb2YgZmxvYXRzLCBhcnJheSBvZiB0ZXh0dXJlcywgb3IgYXJyYXkgb2Ygc3RydWN0c1xuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHVuaWZvcm0pKSB7XG4gICAgICAgICAgICAvLyBOdW1lcmljIHZhbHVlc1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB1bmlmb3JtWzBdID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIC8vIGZsb2F0IHZlY3RvcnMgKHZlYzIsIHZlYzMsIHZlYzQpXG4gICAgICAgICAgICAgICAgaWYgKHVuaWZvcm0ubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmbG9hdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICcxZicsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHVuaWZvcm1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGZsb2F0IHZlY3RvcnMgKHZlYzIsIHZlYzMsIHZlYzQpXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodW5pZm9ybS5sZW5ndGggPj0gMiAmJiB1bmlmb3JtLmxlbmd0aCA8PSA0KSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2ZWMnICsgdW5pZm9ybS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IHVuaWZvcm0ubGVuZ3RoICsgJ2Z2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdW5pZm9ybVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gZmxvYXQgYXJyYXlcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh1bmlmb3JtLmxlbmd0aCA+IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Zsb2F0W10nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnMWZ2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUgKyAnWzBdJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB1bmlmb3JtXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBhc3N1bWUgbWF0cml4IGZvciAodHlwZW9mID09IEZsb2F0MzJBcnJheSAmJiBsZW5ndGggPT0gMTYpP1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQXJyYXkgb2YgdGV4dHVyZXNcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiB1bmlmb3JtWzBdID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHBhcnNlZC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NhbXBsZXIyRCcsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJzFpJyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHVuaWZvcm1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEFycmF5IG9mIGFycmF5cyAtIGJ1dCBvbmx5IGFycmF5cyBvZiB2ZWN0b3JzIGFyZSBhbGxvd2VkIGluIHRoaXMgY2FzZVxuICAgICAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh1bmlmb3JtWzBdKSAmJiB0eXBlb2YgdW5pZm9ybVswXVswXSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAvLyBmbG9hdCB2ZWN0b3JzICh2ZWMyLCB2ZWMzLCB2ZWM0KVxuICAgICAgICAgICAgICAgIGlmICh1bmlmb3JtWzBdLmxlbmd0aCA+PSAyICYmIHVuaWZvcm1bMF0ubGVuZ3RoIDw9IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0IGVhY2ggdmVjdG9yIGluIHRoZSBhcnJheVxuICAgICAgICAgICAgICAgICAgICBmb3IgKHUgPSAwOyB1IDwgdW5pZm9ybS5sZW5ndGg7IHUrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2ZWMnICsgdW5pZm9ybVswXS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiB1bmlmb3JtW3VdLmxlbmd0aCArICdmdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZSArICdbJyArIHUgKyAnXScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHVuaWZvcm1bdV1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGVsc2UgZXJyb3I/XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBBcnJheSBvZiBzdHJ1Y3R1cmVzXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgdW5pZm9ybVswXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHUgPSAwOyB1IDwgdW5pZm9ybS5sZW5ndGg7IHUrKykge1xuICAgICAgICAgICAgICAgICAgICAvLyBTZXQgZWFjaCBzdHJ1Y3QgaW4gdGhlIGFycmF5XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZC5wdXNoKC4uLnBhcnNlVW5pZm9ybXModW5pZm9ybVt1XSwgbmFtZSArICdbJyArIHUgKyAnXScpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQm9vbGVhblxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdW5pZm9ybSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICBwYXJzZWQucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2Jvb2wnLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJzFpJyxcbiAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB1bmlmb3JtXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUZXh0dXJlXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB1bmlmb3JtID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcGFyc2VkLnB1c2goe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzYW1wbGVyMkQnLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJzFpJyxcbiAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB1bmlmb3JtXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTdHJ1Y3R1cmVcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHVuaWZvcm0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAvLyBTZXQgZWFjaCBmaWVsZCBpbiB0aGUgc3RydWN0XG4gICAgICAgICAgICBwYXJzZWQucHVzaCguLi5wYXJzZVVuaWZvcm1zKHVuaWZvcm0sIG5hbWUpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPOiBzdXBwb3J0IG90aGVyIG5vbi1mbG9hdCB0eXBlcz8gKGludCwgZXRjLilcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlZDtcbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBpc0NhbnZhc1Zpc2libGUoY2FudmFzKSB7XG4gICAgcmV0dXJuXHQoKGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyBjYW52YXMuaGVpZ2h0KSA+IDApICYmXG4gICAgICAgIChjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIDwgKHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1Bvd2VyT2YyKHZhbHVlKSB7XG4gICAgcmV0dXJuICh2YWx1ZSAmICh2YWx1ZSAtIDEpKSA9PT0gMDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzU2FmYXJpICgpIHtcbiAgICByZXR1cm4gL14oKD8hY2hyb21lfGFuZHJvaWQpLikqc2FmYXJpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBuZXh0SGlnaGVzdFBvd2VyT2ZUd28oeCkge1xuICAgIC0teDtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IDMyOyBpIDw8PSAxKSB7XG4gICAgICAgIHggPSB4IHwgeCA+PiBpO1xuICAgIH1cbiAgICByZXR1cm4geCArIDE7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBGb3JtYXROdW1iZXJMZW5ndGgobnVtLCBsZW5ndGgpIHtcbiAgICBsZXQgciA9IG51bS50b1N0cmluZygpO1xuICAgIHdoaWxlIChyLmxlbmd0aCA8IGxlbmd0aCkge1xuICAgICAgICByID0gJzAnICsgcjtcbiAgICB9XG4gICAgcmV0dXJuIHI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNb3VzZVBvcyhjYW52YXMsIGV2dCkge1xuICAgIGxldCByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHg6IGV2dC5jbGllbnRYIC0gcmVjdC5sZWZ0LFxuICAgICAgICB5OiBldnQuY2xpZW50WSAtIHJlY3QudG9wXG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRGlmZihhLCBiKSB7XG4gICAgaWYgKGEgJiYgYikge1xuICAgICAgICByZXR1cm4gYS50b1N0cmluZygpICE9PSBiLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN1YnNjcmliZU1peGluICh0YXJnZXQpIHtcbiAgICB2YXIgbGlzdGVuZXJzID0gbmV3IFNldCgpO1xuXG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24odGFyZ2V0LCB7XG5cbiAgICAgICAgc3Vic2NyaWJlKGxpc3RlbmVyKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTtcbiAgICAgICAgfSxcblxuICAgICAgICBvbih0eXBlLCBmKSB7XG4gICAgICAgICAgICBsZXQgbGlzdGVuZXIgPSB7fTtcbiAgICAgICAgICAgIGxpc3RlbmVyW3R5cGVdID0gZjtcbiAgICAgICAgICAgIGxpc3RlbmVycy5hZGQobGlzdGVuZXIpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHVuc3Vic2NyaWJlKGxpc3RlbmVyKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyKTtcbiAgICAgICAgfSxcblxuICAgICAgICB1bnN1YnNjcmliZUFsbCgpIHtcbiAgICAgICAgICAgIGxpc3RlbmVycy5jbGVhcigpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHRyaWdnZXIoZXZlbnQsIC4uLmRhdGEpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGxpc3RlbmVyIG9mIGxpc3RlbmVycykge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbGlzdGVuZXJbZXZlbnRdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyW2V2ZW50XSguLi5kYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBzdWJzY3JpYmVNaXhpbiAodGFyZ2V0KSB7XG4gICAgdmFyIGxpc3RlbmVycyA9IG5ldyBTZXQoKTtcblxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHRhcmdldCwge1xuXG4gICAgICAgIG9uKHR5cGUsIGYpIHtcbiAgICAgICAgICAgIGxldCBsaXN0ZW5lciA9IHt9O1xuICAgICAgICAgICAgbGlzdGVuZXJbdHlwZV0gPSBmO1xuICAgICAgICAgICAgbGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb2ZmKHR5cGUsIGYpIHtcbiAgICAgICAgICAgIGlmIChmKSB7XG4gICAgICAgICAgICAgICAgbGV0IGxpc3RlbmVyID0ge307XG4gICAgICAgICAgICAgICAgbGlzdGVuZXJbdHlwZV0gPSBmO1xuICAgICAgICAgICAgICAgIGxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiBsaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQga2V5IG9mIE9iamVjdC5rZXlzKGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSB0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXJzLmRlbGV0ZShpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgbGlzdFN1YnNjcmlwdGlvbnMoKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpdGVtIG9mIGxpc3RlbmVycykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHN1YnNjcmliZShsaXN0ZW5lcikge1xuICAgICAgICAgICAgbGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdW5zdWJzY3JpYmUobGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHVuc3Vic2NyaWJlQWxsKCkge1xuICAgICAgICAgICAgbGlzdGVuZXJzLmNsZWFyKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdHJpZ2dlcihldmVudCwgLi4uZGF0YSkge1xuICAgICAgICAgICAgZm9yICh2YXIgbGlzdGVuZXIgb2YgbGlzdGVuZXJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lcltldmVudF0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXJbZXZlbnRdKC4uLmRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBpc0Z1bmN0aW9uXG5cbnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmdcblxuZnVuY3Rpb24gaXNGdW5jdGlvbiAoZm4pIHtcbiAgdmFyIHN0cmluZyA9IHRvU3RyaW5nLmNhbGwoZm4pXG4gIHJldHVybiBzdHJpbmcgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXScgfHxcbiAgICAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nICYmIHN0cmluZyAhPT0gJ1tvYmplY3QgUmVnRXhwXScpIHx8XG4gICAgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgIC8vIElFOCBhbmQgYmVsb3dcbiAgICAgKGZuID09PSB3aW5kb3cuc2V0VGltZW91dCB8fFxuICAgICAgZm4gPT09IHdpbmRvdy5hbGVydCB8fFxuICAgICAgZm4gPT09IHdpbmRvdy5jb25maXJtIHx8XG4gICAgICBmbiA9PT0gd2luZG93LnByb21wdCkpXG59O1xuIiwidmFyIHRyaW0gPSByZXF1aXJlKCd0cmltJylcbiAgLCBmb3JFYWNoID0gcmVxdWlyZSgnZm9yLWVhY2gnKVxuICAsIGlzQXJyYXkgPSBmdW5jdGlvbihhcmcpIHtcbiAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJnKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgICB9XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGhlYWRlcnMpIHtcbiAgaWYgKCFoZWFkZXJzKVxuICAgIHJldHVybiB7fVxuXG4gIHZhciByZXN1bHQgPSB7fVxuXG4gIGZvckVhY2goXG4gICAgICB0cmltKGhlYWRlcnMpLnNwbGl0KCdcXG4nKVxuICAgICwgZnVuY3Rpb24gKHJvdykge1xuICAgICAgICB2YXIgaW5kZXggPSByb3cuaW5kZXhPZignOicpXG4gICAgICAgICAgLCBrZXkgPSB0cmltKHJvdy5zbGljZSgwLCBpbmRleCkpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAsIHZhbHVlID0gdHJpbShyb3cuc2xpY2UoaW5kZXggKyAxKSlcblxuICAgICAgICBpZiAodHlwZW9mKHJlc3VsdFtrZXldKSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICByZXN1bHRba2V5XSA9IHZhbHVlXG4gICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheShyZXN1bHRba2V5XSkpIHtcbiAgICAgICAgICByZXN1bHRba2V5XS5wdXNoKHZhbHVlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdFtrZXldID0gWyByZXN1bHRba2V5XSwgdmFsdWUgXVxuICAgICAgICB9XG4gICAgICB9XG4gIClcblxuICByZXR1cm4gcmVzdWx0XG59IiwiXG5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSB0cmltO1xuXG5mdW5jdGlvbiB0cmltKHN0cil7XG4gIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyp8XFxzKiQvZywgJycpO1xufVxuXG5leHBvcnRzLmxlZnQgPSBmdW5jdGlvbihzdHIpe1xuICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMqLywgJycpO1xufTtcblxuZXhwb3J0cy5yaWdodCA9IGZ1bmN0aW9uKHN0cil7XG4gIHJldHVybiBzdHIucmVwbGFjZSgvXFxzKiQvLCAnJyk7XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgd2luZG93ID0gcmVxdWlyZShcImdsb2JhbC93aW5kb3dcIilcbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZShcImlzLWZ1bmN0aW9uXCIpXG52YXIgcGFyc2VIZWFkZXJzID0gcmVxdWlyZShcInBhcnNlLWhlYWRlcnNcIilcbnZhciB4dGVuZCA9IHJlcXVpcmUoXCJ4dGVuZFwiKVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZVhIUlxuY3JlYXRlWEhSLlhNTEh0dHBSZXF1ZXN0ID0gd2luZG93LlhNTEh0dHBSZXF1ZXN0IHx8IG5vb3BcbmNyZWF0ZVhIUi5YRG9tYWluUmVxdWVzdCA9IFwid2l0aENyZWRlbnRpYWxzXCIgaW4gKG5ldyBjcmVhdGVYSFIuWE1MSHR0cFJlcXVlc3QoKSkgPyBjcmVhdGVYSFIuWE1MSHR0cFJlcXVlc3QgOiB3aW5kb3cuWERvbWFpblJlcXVlc3RcblxuZm9yRWFjaEFycmF5KFtcImdldFwiLCBcInB1dFwiLCBcInBvc3RcIiwgXCJwYXRjaFwiLCBcImhlYWRcIiwgXCJkZWxldGVcIl0sIGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgIGNyZWF0ZVhIUlttZXRob2QgPT09IFwiZGVsZXRlXCIgPyBcImRlbFwiIDogbWV0aG9kXSA9IGZ1bmN0aW9uKHVyaSwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICAgICAgb3B0aW9ucyA9IGluaXRQYXJhbXModXJpLCBvcHRpb25zLCBjYWxsYmFjaylcbiAgICAgICAgb3B0aW9ucy5tZXRob2QgPSBtZXRob2QudG9VcHBlckNhc2UoKVxuICAgICAgICByZXR1cm4gX2NyZWF0ZVhIUihvcHRpb25zKVxuICAgIH1cbn0pXG5cbmZ1bmN0aW9uIGZvckVhY2hBcnJheShhcnJheSwgaXRlcmF0b3IpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGl0ZXJhdG9yKGFycmF5W2ldKVxuICAgIH1cbn1cblxuZnVuY3Rpb24gaXNFbXB0eShvYmope1xuICAgIGZvcih2YXIgaSBpbiBvYmope1xuICAgICAgICBpZihvYmouaGFzT3duUHJvcGVydHkoaSkpIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxufVxuXG5mdW5jdGlvbiBpbml0UGFyYW1zKHVyaSwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICB2YXIgcGFyYW1zID0gdXJpXG5cbiAgICBpZiAoaXNGdW5jdGlvbihvcHRpb25zKSkge1xuICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnNcbiAgICAgICAgaWYgKHR5cGVvZiB1cmkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHBhcmFtcyA9IHt1cmk6dXJpfVxuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcGFyYW1zID0geHRlbmQob3B0aW9ucywge3VyaTogdXJpfSlcbiAgICB9XG5cbiAgICBwYXJhbXMuY2FsbGJhY2sgPSBjYWxsYmFja1xuICAgIHJldHVybiBwYXJhbXNcbn1cblxuZnVuY3Rpb24gY3JlYXRlWEhSKHVyaSwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICBvcHRpb25zID0gaW5pdFBhcmFtcyh1cmksIG9wdGlvbnMsIGNhbGxiYWNrKVxuICAgIHJldHVybiBfY3JlYXRlWEhSKG9wdGlvbnMpXG59XG5cbmZ1bmN0aW9uIF9jcmVhdGVYSFIob3B0aW9ucykge1xuICAgIGlmKHR5cGVvZiBvcHRpb25zLmNhbGxiYWNrID09PSBcInVuZGVmaW5lZFwiKXtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FsbGJhY2sgYXJndW1lbnQgbWlzc2luZ1wiKVxuICAgIH1cblxuICAgIHZhciBjYWxsZWQgPSBmYWxzZVxuICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uIGNiT25jZShlcnIsIHJlc3BvbnNlLCBib2R5KXtcbiAgICAgICAgaWYoIWNhbGxlZCl7XG4gICAgICAgICAgICBjYWxsZWQgPSB0cnVlXG4gICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrKGVyciwgcmVzcG9uc2UsIGJvZHkpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWFkeXN0YXRlY2hhbmdlKCkge1xuICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQobG9hZEZ1bmMsIDApXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRCb2R5KCkge1xuICAgICAgICAvLyBDaHJvbWUgd2l0aCByZXF1ZXN0VHlwZT1ibG9iIHRocm93cyBlcnJvcnMgYXJyb3VuZCB3aGVuIGV2ZW4gdGVzdGluZyBhY2Nlc3MgdG8gcmVzcG9uc2VUZXh0XG4gICAgICAgIHZhciBib2R5ID0gdW5kZWZpbmVkXG5cbiAgICAgICAgaWYgKHhoci5yZXNwb25zZSkge1xuICAgICAgICAgICAgYm9keSA9IHhoci5yZXNwb25zZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYm9keSA9IHhoci5yZXNwb25zZVRleHQgfHwgZ2V0WG1sKHhocilcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0pzb24pIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYm9keSA9IEpTT04ucGFyc2UoYm9keSlcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYm9keVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVycm9yRnVuYyhldnQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRUaW1lcilcbiAgICAgICAgaWYoIShldnQgaW5zdGFuY2VvZiBFcnJvcikpe1xuICAgICAgICAgICAgZXZ0ID0gbmV3IEVycm9yKFwiXCIgKyAoZXZ0IHx8IFwiVW5rbm93biBYTUxIdHRwUmVxdWVzdCBFcnJvclwiKSApXG4gICAgICAgIH1cbiAgICAgICAgZXZ0LnN0YXR1c0NvZGUgPSAwXG4gICAgICAgIHJldHVybiBjYWxsYmFjayhldnQsIGZhaWx1cmVSZXNwb25zZSlcbiAgICB9XG5cbiAgICAvLyB3aWxsIGxvYWQgdGhlIGRhdGEgJiBwcm9jZXNzIHRoZSByZXNwb25zZSBpbiBhIHNwZWNpYWwgcmVzcG9uc2Ugb2JqZWN0XG4gICAgZnVuY3Rpb24gbG9hZEZ1bmMoKSB7XG4gICAgICAgIGlmIChhYm9ydGVkKSByZXR1cm5cbiAgICAgICAgdmFyIHN0YXR1c1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dFRpbWVyKVxuICAgICAgICBpZihvcHRpb25zLnVzZVhEUiAmJiB4aHIuc3RhdHVzPT09dW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvL0lFOCBDT1JTIEdFVCBzdWNjZXNzZnVsIHJlc3BvbnNlIGRvZXNuJ3QgaGF2ZSBhIHN0YXR1cyBmaWVsZCwgYnV0IGJvZHkgaXMgZmluZVxuICAgICAgICAgICAgc3RhdHVzID0gMjAwXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdGF0dXMgPSAoeGhyLnN0YXR1cyA9PT0gMTIyMyA/IDIwNCA6IHhoci5zdGF0dXMpXG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc3BvbnNlID0gZmFpbHVyZVJlc3BvbnNlXG4gICAgICAgIHZhciBlcnIgPSBudWxsXG5cbiAgICAgICAgaWYgKHN0YXR1cyAhPT0gMCl7XG4gICAgICAgICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICBib2R5OiBnZXRCb2R5KCksXG4gICAgICAgICAgICAgICAgc3RhdHVzQ29kZTogc3RhdHVzLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHt9LFxuICAgICAgICAgICAgICAgIHVybDogdXJpLFxuICAgICAgICAgICAgICAgIHJhd1JlcXVlc3Q6IHhoclxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycyl7IC8vcmVtZW1iZXIgeGhyIGNhbiBpbiBmYWN0IGJlIFhEUiBmb3IgQ09SUyBpbiBJRVxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmhlYWRlcnMgPSBwYXJzZUhlYWRlcnMoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXJyID0gbmV3IEVycm9yKFwiSW50ZXJuYWwgWE1MSHR0cFJlcXVlc3QgRXJyb3JcIilcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyLCByZXNwb25zZSwgcmVzcG9uc2UuYm9keSlcbiAgICB9XG5cbiAgICB2YXIgeGhyID0gb3B0aW9ucy54aHIgfHwgbnVsbFxuXG4gICAgaWYgKCF4aHIpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuY29ycyB8fCBvcHRpb25zLnVzZVhEUikge1xuICAgICAgICAgICAgeGhyID0gbmV3IGNyZWF0ZVhIUi5YRG9tYWluUmVxdWVzdCgpXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgeGhyID0gbmV3IGNyZWF0ZVhIUi5YTUxIdHRwUmVxdWVzdCgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIga2V5XG4gICAgdmFyIGFib3J0ZWRcbiAgICB2YXIgdXJpID0geGhyLnVybCA9IG9wdGlvbnMudXJpIHx8IG9wdGlvbnMudXJsXG4gICAgdmFyIG1ldGhvZCA9IHhoci5tZXRob2QgPSBvcHRpb25zLm1ldGhvZCB8fCBcIkdFVFwiXG4gICAgdmFyIGJvZHkgPSBvcHRpb25zLmJvZHkgfHwgb3B0aW9ucy5kYXRhXG4gICAgdmFyIGhlYWRlcnMgPSB4aHIuaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycyB8fCB7fVxuICAgIHZhciBzeW5jID0gISFvcHRpb25zLnN5bmNcbiAgICB2YXIgaXNKc29uID0gZmFsc2VcbiAgICB2YXIgdGltZW91dFRpbWVyXG4gICAgdmFyIGZhaWx1cmVSZXNwb25zZSA9IHtcbiAgICAgICAgYm9keTogdW5kZWZpbmVkLFxuICAgICAgICBoZWFkZXJzOiB7fSxcbiAgICAgICAgc3RhdHVzQ29kZTogMCxcbiAgICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICAgIHVybDogdXJpLFxuICAgICAgICByYXdSZXF1ZXN0OiB4aHJcbiAgICB9XG5cbiAgICBpZiAoXCJqc29uXCIgaW4gb3B0aW9ucyAmJiBvcHRpb25zLmpzb24gIT09IGZhbHNlKSB7XG4gICAgICAgIGlzSnNvbiA9IHRydWVcbiAgICAgICAgaGVhZGVyc1tcImFjY2VwdFwiXSB8fCBoZWFkZXJzW1wiQWNjZXB0XCJdIHx8IChoZWFkZXJzW1wiQWNjZXB0XCJdID0gXCJhcHBsaWNhdGlvbi9qc29uXCIpIC8vRG9uJ3Qgb3ZlcnJpZGUgZXhpc3RpbmcgYWNjZXB0IGhlYWRlciBkZWNsYXJlZCBieSB1c2VyXG4gICAgICAgIGlmIChtZXRob2QgIT09IFwiR0VUXCIgJiYgbWV0aG9kICE9PSBcIkhFQURcIikge1xuICAgICAgICAgICAgaGVhZGVyc1tcImNvbnRlbnQtdHlwZVwiXSB8fCBoZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdIHx8IChoZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdID0gXCJhcHBsaWNhdGlvbi9qc29uXCIpIC8vRG9uJ3Qgb3ZlcnJpZGUgZXhpc3RpbmcgYWNjZXB0IGhlYWRlciBkZWNsYXJlZCBieSB1c2VyXG4gICAgICAgICAgICBib2R5ID0gSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5qc29uID09PSB0cnVlID8gYm9keSA6IG9wdGlvbnMuanNvbilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSByZWFkeXN0YXRlY2hhbmdlXG4gICAgeGhyLm9ubG9hZCA9IGxvYWRGdW5jXG4gICAgeGhyLm9uZXJyb3IgPSBlcnJvckZ1bmNcbiAgICAvLyBJRTkgbXVzdCBoYXZlIG9ucHJvZ3Jlc3MgYmUgc2V0IHRvIGEgdW5pcXVlIGZ1bmN0aW9uLlxuICAgIHhoci5vbnByb2dyZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBJRSBtdXN0IGRpZVxuICAgIH1cbiAgICB4aHIub25hYm9ydCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGFib3J0ZWQgPSB0cnVlO1xuICAgIH1cbiAgICB4aHIub250aW1lb3V0ID0gZXJyb3JGdW5jXG4gICAgeGhyLm9wZW4obWV0aG9kLCB1cmksICFzeW5jLCBvcHRpb25zLnVzZXJuYW1lLCBvcHRpb25zLnBhc3N3b3JkKVxuICAgIC8vaGFzIHRvIGJlIGFmdGVyIG9wZW5cbiAgICBpZighc3luYykge1xuICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gISFvcHRpb25zLndpdGhDcmVkZW50aWFsc1xuICAgIH1cbiAgICAvLyBDYW5ub3Qgc2V0IHRpbWVvdXQgd2l0aCBzeW5jIHJlcXVlc3RcbiAgICAvLyBub3Qgc2V0dGluZyB0aW1lb3V0IG9uIHRoZSB4aHIgb2JqZWN0LCBiZWNhdXNlIG9mIG9sZCB3ZWJraXRzIGV0Yy4gbm90IGhhbmRsaW5nIHRoYXQgY29ycmVjdGx5XG4gICAgLy8gYm90aCBucG0ncyByZXF1ZXN0IGFuZCBqcXVlcnkgMS54IHVzZSB0aGlzIGtpbmQgb2YgdGltZW91dCwgc28gdGhpcyBpcyBiZWluZyBjb25zaXN0ZW50XG4gICAgaWYgKCFzeW5jICYmIG9wdGlvbnMudGltZW91dCA+IDAgKSB7XG4gICAgICAgIHRpbWVvdXRUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmIChhYm9ydGVkKSByZXR1cm5cbiAgICAgICAgICAgIGFib3J0ZWQgPSB0cnVlLy9JRTkgbWF5IHN0aWxsIGNhbGwgcmVhZHlzdGF0ZWNoYW5nZVxuICAgICAgICAgICAgeGhyLmFib3J0KFwidGltZW91dFwiKVxuICAgICAgICAgICAgdmFyIGUgPSBuZXcgRXJyb3IoXCJYTUxIdHRwUmVxdWVzdCB0aW1lb3V0XCIpXG4gICAgICAgICAgICBlLmNvZGUgPSBcIkVUSU1FRE9VVFwiXG4gICAgICAgICAgICBlcnJvckZ1bmMoZSlcbiAgICAgICAgfSwgb3B0aW9ucy50aW1lb3V0IClcbiAgICB9XG5cbiAgICBpZiAoeGhyLnNldFJlcXVlc3RIZWFkZXIpIHtcbiAgICAgICAgZm9yKGtleSBpbiBoZWFkZXJzKXtcbiAgICAgICAgICAgIGlmKGhlYWRlcnMuaGFzT3duUHJvcGVydHkoa2V5KSl7XG4gICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoa2V5LCBoZWFkZXJzW2tleV0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuaGVhZGVycyAmJiAhaXNFbXB0eShvcHRpb25zLmhlYWRlcnMpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkhlYWRlcnMgY2Fubm90IGJlIHNldCBvbiBhbiBYRG9tYWluUmVxdWVzdCBvYmplY3RcIilcbiAgICB9XG5cbiAgICBpZiAoXCJyZXNwb25zZVR5cGVcIiBpbiBvcHRpb25zKSB7XG4gICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSBvcHRpb25zLnJlc3BvbnNlVHlwZVxuICAgIH1cblxuICAgIGlmIChcImJlZm9yZVNlbmRcIiBpbiBvcHRpb25zICYmXG4gICAgICAgIHR5cGVvZiBvcHRpb25zLmJlZm9yZVNlbmQgPT09IFwiZnVuY3Rpb25cIlxuICAgICkge1xuICAgICAgICBvcHRpb25zLmJlZm9yZVNlbmQoeGhyKVxuICAgIH1cblxuICAgIC8vIE1pY3Jvc29mdCBFZGdlIGJyb3dzZXIgc2VuZHMgXCJ1bmRlZmluZWRcIiB3aGVuIHNlbmQgaXMgY2FsbGVkIHdpdGggdW5kZWZpbmVkIHZhbHVlLlxuICAgIC8vIFhNTEh0dHBSZXF1ZXN0IHNwZWMgc2F5cyB0byBwYXNzIG51bGwgYXMgYm9keSB0byBpbmRpY2F0ZSBubyBib2R5XG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9uYXVndHVyL3hoci9pc3N1ZXMvMTAwLlxuICAgIHhoci5zZW5kKGJvZHkgfHwgbnVsbClcblxuICAgIHJldHVybiB4aHJcblxuXG59XG5cbmZ1bmN0aW9uIGdldFhtbCh4aHIpIHtcbiAgICBpZiAoeGhyLnJlc3BvbnNlVHlwZSA9PT0gXCJkb2N1bWVudFwiKSB7XG4gICAgICAgIHJldHVybiB4aHIucmVzcG9uc2VYTUxcbiAgICB9XG4gICAgdmFyIGZpcmVmb3hCdWdUYWtlbkVmZmVjdCA9IHhoci5yZXNwb25zZVhNTCAmJiB4aHIucmVzcG9uc2VYTUwuZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lID09PSBcInBhcnNlcmVycm9yXCJcbiAgICBpZiAoeGhyLnJlc3BvbnNlVHlwZSA9PT0gXCJcIiAmJiAhZmlyZWZveEJ1Z1Rha2VuRWZmZWN0KSB7XG4gICAgICAgIHJldHVybiB4aHIucmVzcG9uc2VYTUxcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbFxufVxuXG5mdW5jdGlvbiBub29wKCkge31cbiIsIm1vZHVsZS5leHBvcnRzID0gZXh0ZW5kXG5cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbmZ1bmN0aW9uIGV4dGVuZCgpIHtcbiAgICB2YXIgdGFyZ2V0ID0ge31cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV1cblxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGFyZ2V0XG59XG4iLCJpbXBvcnQgJ2RvY3VtZW50LXJlZ2lzdGVyLWVsZW1lbnQnO1xuaW1wb3J0IFNoYWRlciBmcm9tICcuL2NvcmUvU2hhZGVyJztcbmltcG9ydCB7IGluaXRFZGl0b3IsIGZvY3VzQWxsIH0gZnJvbSAnLi9jb3JlL0VkaXRvcic7XG5cbmltcG9ydCBNZW51IGZyb20gJy4vdWkvTWVudSc7XG5pbXBvcnQgSGVscGVycyBmcm9tICcuL3VpL0hlbHBlcnMnO1xuaW1wb3J0IEVycm9yc0Rpc3BsYXkgZnJvbSAnLi91aS9FcnJvcnNEaXNwbGF5JztcbmltcG9ydCBWaXN1YWxEZWJ1Z2dlciBmcm9tICcuL3VpL1Zpc3VhbERlYnVnZ2VyJztcbmltcG9ydCBFeHBvcnRJY29uIGZyb20gJy4vdWkvRXhwb3J0SWNvbic7XG5cbmltcG9ydCBGaWxlRHJvcCBmcm9tICcuL2lvL0ZpbGVEcm9wJztcbmltcG9ydCBIYXNoV2F0Y2ggZnJvbSAnLi9pby9IYXNoV2F0Y2gnO1xuaW1wb3J0IEJ1ZmZlck1hbmFnZXIgZnJvbSAnLi9pby9CdWZmZXJNYW5hZ2VyJztcbmltcG9ydCBMb2NhbFN0b3JhZ2UgZnJvbSAnLi9pby9Mb2NhbFN0b3JhZ2UnO1xuY29uc3QgU1RPUkFHRV9MQVNUX0VESVRPUl9DT05URU5UID0gJ2xhc3QtY29udGVudCc7XG5cbi8vIEltcG9ydCBVdGlsc1xuaW1wb3J0IHhociBmcm9tICd4aHInO1xuaW1wb3J0IHsgc3Vic2NyaWJlTWl4aW4gfSBmcm9tICcuL3Rvb2xzL21peGluJztcblxuLy8gM2VyIFBhcnRpZXNcbmltcG9ydCB7IHNhdmVBcyB9IGZyb20gJy4vdmVuZG9yL0ZpbGVTYXZlci5taW4uanMnO1xuXG4vLyBDcm9zcyBzdG9yYWdlIGZvciBPcGVuZnJhbWUgLS0gYWxsb3dzIHJlc3RyaWN0ZWQgYWNjZXNzIHRvIGNlcnRhaW4gbG9jYWxTdG9yYWdlIG9wZXJhdGlvbnNcbi8vIG9uIHRoZSBvcGVuZnJhbWUgZG9tYWluXG5pbXBvcnQgeyBDcm9zc1N0b3JhZ2VDbGllbnQgfSBmcm9tICdjcm9zcy1zdG9yYWdlJztcblxuY29uc3QgRU1QVFlfRlJBR19TSEFERVIgPSBgLy8gQXV0aG9yOlxuLy8gVGl0bGU6XG5cbiNpZmRlZiBHTF9FU1xucHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XG4jZW5kaWZcblxudW5pZm9ybSB2ZWMyIHVfcmVzb2x1dGlvbjtcbnVuaWZvcm0gdmVjMiB1X21vdXNlO1xudW5pZm9ybSBmbG9hdCB1X3RpbWU7XG5cbnZvaWQgbWFpbigpIHtcbiAgICB2ZWMyIHN0ID0gZ2xfRnJhZ0Nvb3JkLnh5L3VfcmVzb2x1dGlvbi54eTtcbiAgICBzdC54ICo9IHVfcmVzb2x1dGlvbi54L3VfcmVzb2x1dGlvbi55O1xuXG4gICAgdmVjMyBjb2xvciA9IHZlYzMoMC4pO1xuICAgIGNvbG9yID0gdmVjMyhzdC54LHN0LnksYWJzKHNpbih1X3RpbWUpKSk7XG5cbiAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KGNvbG9yLDEuMCk7XG59YDtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2xzbEVkaXRvciB7XG4gICAgY29uc3RydWN0b3IgKHNlbGVjdG9yLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuY3JlYXRlRm9udExpbmsoKTtcbiAgICAgICAgc3Vic2NyaWJlTWl4aW4odGhpcyk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBzZWxlY3RvciA9PT0gJ29iamVjdCcgJiYgc2VsZWN0b3Iubm9kZVR5cGUgJiYgc2VsZWN0b3Iubm9kZVR5cGUgPT09IDEpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyID0gc2VsZWN0b3I7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHNlbGVjdG9yID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciwgdHlwZSAnICsgdHlwZW9mIHNlbGVjdG9yICsgJyBvZiAnICsgc2VsZWN0b3IgKyAnIGlzIHVua25vd24nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHt9O1xuICAgICAgICB0aGlzLmNoYW5nZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmF1dG91cGRhdGUgPSB0cnVlO1xuXG4gICAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5pbWdzKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuaW1ncyA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kaXNwbGF5TWVudSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuZGlzcGxheU1lbnUgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyLmhhc0F0dHJpYnV0ZSgnZGF0YS10ZXh0dXJlcycpKSB7XG4gICAgICAgICAgICBsZXQgaW1nTGlzdCA9IHRoaXMuY29udGFpbmVyLmdldEF0dHJpYnV0ZSgnZGF0YS10ZXh0dXJlcycpLnNwbGl0KCcsJyk7XG4gICAgICAgICAgICBmb3IgKGxldCBpIGluIGltZ0xpc3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuaW1ncy5wdXNoKGltZ0xpc3RbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGVmYXVsdCBUaGVtZVxuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy50aGVtZSkge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnRoZW1lID0gJ2RlZmF1bHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGVmYXVsdCBDb250ZXh0XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmZyYWcpIHtcbiAgICAgICAgICAgIHZhciBpbm5lckhUTUwgPSB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwucmVwbGFjZSgvJmx0O2JyJmd0Oy9nLFwiXCIpO1xuICAgICAgICAgICAgaW5uZXJIVE1MID0gaW5uZXJIVE1MLnJlcGxhY2UoLzxicj4vZyxcIlwiKTtcbiAgICAgICAgICAgIGlubmVySFRNTCA9IGlubmVySFRNTC5yZXBsYWNlKC8mbmJzcDsvZyxcIlwiKTtcbiAgICAgICAgICAgIGlubmVySFRNTCA9IGlubmVySFRNTC5yZXBsYWNlKC8mbHQ7L2csXCI8XCIpO1xuICAgICAgICAgICAgaW5uZXJIVE1MID0gaW5uZXJIVE1MLnJlcGxhY2UoLyZndDsvZyxcIj5cIik7XG4gICAgICAgICAgICBpbm5lckhUTUwgPSBpbm5lckhUTUwucmVwbGFjZSgvJmFtcDsvZyxcIiZcIik7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuZnJhZyA9IGlubmVySFRNTCB8fCBFTVBUWV9GUkFHX1NIQURFUjtcblxuICAgICAgICAgICAgaWYgKGlubmVySFRNTCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGVmYXVsdCBpbnZpc2libGUgRnJhZ21lbnQgaGVhZGVyXG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmZyYWdfaGVhZGVyKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuZnJhZ19oZWFkZXIgPSAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERlZmF1bHQgaW52aXNpYmxlIEZyYWdtZW50IGZvb3RlclxuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5mcmFnX2Zvb3Rlcikge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmZyYWdfZm9vdGVyID0gJyc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBMaXN0ZW4gdG8gaGFzaCBjaGFuZ2VzXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMud2F0Y2hIYXNoKSB7XG4gICAgICAgICAgICBuZXcgSGFzaFdhdGNoKHRoaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTG9hZCBVSVxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLm1lbnUpIHtcbiAgICAgICAgICAgIHRoaXMubWVudSA9IG5ldyBNZW51KHRoaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3VwcG9ydCBmb3IgbXVsdGlwbGUgYnVmZmVyc1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLm11bHRpcGxlQnVmZmVycykge1xuICAgICAgICAgICAgdGhpcy5idWZmZXJNYW5hZ2VyID0gbmV3IEJ1ZmZlck1hbmFnZXIodGhpcyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBMaXN0ZW4gdG8gZmlsZSBkcm9wc1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmZpbGVEcm9wcykge1xuICAgICAgICAgICAgbmV3IEZpbGVEcm9wKHRoaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ09SRSBlbGVtZW50c1xuICAgICAgICB0aGlzLnNoYWRlciA9IG5ldyBTaGFkZXIodGhpcyk7XG4gICAgICAgIHRoaXMuZWRpdG9yID0gaW5pdEVkaXRvcih0aGlzKTtcblxuICAgICAgICB0aGlzLmhlbHBlcnMgPSBuZXcgSGVscGVycyh0aGlzKTtcbiAgICAgICAgdGhpcy5lcnJvcnNEaXNwbGF5ID0gbmV3IEVycm9yc0Rpc3BsYXkodGhpcyk7XG4gICAgICAgIHRoaXMudmlzdWFsRGVidWdnZXIgPSBuZXcgVmlzdWFsRGVidWdnZXIodGhpcyk7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5leHBvcnRJY29uKSB7XG4gICAgICAgICAgICB0aGlzLmV4cG9ydCA9IG5ldyBFeHBvcnRJY29uKHRoaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRVZFTlRTXG4gICAgICAgIHRoaXMuZWRpdG9yLm9uKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5hdXRvdXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jYW52YXNfZm9sbG93KSB7XG4gICAgICAgICAgICB0aGlzLnNoYWRlci5lbC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNhbnZhc19mbG9hdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hhZGVyLmVsLnN0eWxlLmZsb2F0ID0gdGhpcy5vcHRpb25zLmNhbnZhc19mbG9hdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWRpdG9yLm9uKCdjdXJzb3JBY3Rpdml0eScsIChjbSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBoZWlnaHQgPSBjbS5oZWlnaHRBdExpbmUoY20uZ2V0Q3Vyc29yKCkubGluZSArIDEsICdsb2NhbCcpIC0gdGhpcy5zaGFkZXIuZWwuY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgICAgIGlmIChoZWlnaHQgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IDAuMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zaGFkZXIuZWwuc3R5bGUudG9wID0gaGVpZ2h0LnRvU3RyaW5nKCkgKyAncHgnO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHRoZSB1c2VyIGJhaWxzIGZvciB3aGF0ZXZlciByZWFzb24sIGhhc3RpbHkgc2hvdmUgdGhlIGNvbnRlbnRzIG9mXG4gICAgICAgIC8vIHRoZSBlZGl0b3IgaW50byBzb21lIGtpbmQgb2Ygc3RvcmFnZS4gVGhpcyBvdmVyd3JpdGVzIHdoYXRldmVyIHdhc1xuICAgICAgICAvLyB0aGVyZSBiZWZvcmUuIE5vdGUgdGhhdCB0aGVyZSBpcyBub3QgcmVhbGx5IGEgd2F5IG9mIGhhbmRsaW5nIHVubG9hZFxuICAgICAgICAvLyB3aXRoIG91ciBvd24gVUkgYW5kIGxvZ2ljLCBzaW5jZSB0aGlzIGFsbG93cyBmb3Igd2lkZXNwcmVhZCBhYnVzZVxuICAgICAgICAvLyBvZiBub3JtYWwgYnJvd3NlciBmdW5jdGlvbmFsaXR5LlxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBsZXQgY29udGVudCA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuYnVmZmVyTWFuYWdlciAmJiBPYmplY3Qua2V5cyh0aGlzLmJ1ZmZlck1hbmFnZXIuYnVmZmVycykubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuYnVmZmVyTWFuYWdlci5idWZmZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRba2V5XSA9IHRoaXMuYnVmZmVyTWFuYWdlci5idWZmZXJzW2tleV0uZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250ZW50WyhuZXcgRGF0ZSgpLmdldFRpbWUoKSkudG9TdHJpbmcoKV0gPSB0aGlzLmVkaXRvci5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLm1lbnUpIHtcbiAgICAgICAgICAgICAgICBMb2NhbFN0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX0xBU1RfRURJVE9SX0NPTlRFTlQsIEpTT04uc3RyaW5naWZ5KGNvbnRlbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5tZW51KSB7XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBwcmV2aXVzIGNvbnRlbnQgbG9hZCBpdC5cbiAgICAgICAgICAgIGxldCBvbGRDb250ZW50ID0gSlNPTi5wYXJzZShMb2NhbFN0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX0xBU1RfRURJVE9SX0NPTlRFTlQpKTtcbiAgICAgICAgICAgIGlmIChvbGRDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG9sZENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuKG9sZENvbnRlbnRba2V5XSwga2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5ldygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5uZXcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMubWVudSB8fCB0aGlzLm9wdGlvbnMuZXhwb3J0SWNvbikge1xuICAgICAgICAgICAgLy8gc2V0dXAgQ3Jvc3NTdG9yYWdlIGNsaWVudFxuICAgICAgICAgICAgdGhpcy5zdG9yYWdlID0gbmV3IENyb3NzU3RvcmFnZUNsaWVudCgnaHR0cHM6Ly9vcGVuZnJhbWUuaW8vaHViLmh0bWwnKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcmFnZS5vbkNvbm5lY3QoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNvbm5lY3RlZCB0byBPcGVuRnJhbWUgW29dXCIpXG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBuZXcgKCkge1xuICAgICAgICB0aGlzLnNldENvbnRlbnQodGhpcy5vcHRpb25zLmZyYWcgfHwgRU1QVFlfRlJBR19TSEFERVIsIChuZXcgRGF0ZSgpLmdldFRpbWUoKSkudG9TdHJpbmcoKSk7XG4gICAgICAgIHRoaXMudHJpZ2dlcignbmV3X2NvbnRlbnQnLCB7fSk7XG4gICAgICAgIHRoaXMub3B0aW9ucy5mcmFnID0gbnVsbDtcbiAgICB9XG5cbiAgICBzZXRDb250ZW50KHNoYWRlciwgdGFiTmFtZSkge1xuICAgICAgICAvLyBJZiB0aGUgc3RyaW5nIGlzIENPREVcbiAgICAgICAgaWYgKHRoaXMuc2hhZGVyICYmIHRoaXMuc2hhZGVyLmNhbnZhcykge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGVidWdnaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWJ1Z2dpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBmb2N1c0FsbCh0aGlzLmVkaXRvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNoYWRlci5jYW52YXMubG9hZCh0aGlzLm9wdGlvbnMuZnJhZ19oZWFkZXIgKyBzaGFkZXIgKyB0aGlzLm9wdGlvbnMuZnJhZ19mb290ZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZWRpdG9yKSB7XG4gICAgICAgICAgICBpZiAodGFiTmFtZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMuYnVmZmVyTWFuYWdlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5idWZmZXJNYW5hZ2VyLm9wZW4odGFiTmFtZSwgc2hhZGVyKTtcbiAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlck1hbmFnZXIuc2VsZWN0KHRhYk5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0b3Iuc2V0VmFsdWUoc2hhZGVyKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRvci5zZXRTaXplKG51bGwsIHRoaXMuZWRpdG9yLmdldERvYygpLmhlaWdodCArICdweCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWRpdG9yLnNldFNpemUobnVsbCwgJ2F1dG8nKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGVuYW1lID0gdGFiTmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYW5nZSA9IHRydWU7XG4gICAgfVxuXG4gICAgb3BlbiAoc2hhZGVyLCB0YWJOYW1lKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2hhZGVyID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICAgIGxldCBnZSA9IHRoaXM7XG4gICAgICAgICAgICByZWFkZXIub25sb2FkID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICBnZS5zZXRDb250ZW50KGUudGFyZ2V0LnJlc3VsdCwgc2hhZGVyLm5hbWUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KHNoYWRlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHNoYWRlciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGlmICgvXFwuZnJhZyQvLnRlc3Qoc2hhZGVyKSB8fCAvXFwuZnMkLy50ZXN0KHNoYWRlcikpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgc3RyaW5nIGlzIGFuIFVSTFxuICAgICAgICAgICAgICAgIHhoci5nZXQoc2hhZGVyLCAoZXJyb3IsIHJlc3BvbnNlLCBib2R5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGRvd25sb2FkaW5nICcsIHNoYWRlciwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29udGVudChib2R5LCB0YWJOYW1lKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29udGVudChzaGFkZXIsIHRhYk5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0Q29udGVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWRpdG9yLmdldFZhbHVlKCk7XG4gICAgfVxuXG4gICAgZ2V0QXV0aG9yKCkge1xuICAgICAgICBsZXQgY29udGVudCA9IHRoaXMuZ2V0Q29udGVudCgpO1xuICAgICAgICBsZXQgcmVzdWx0ID0gY29udGVudC5tYXRjaCgvXFwvXFwvXFxzKltBfGFddXRob3JcXHMqW1xcOl0/XFxzKihbXFx3fFxcc3xcXEB8XFwofFxcKXxcXC18XFxfXSopL2kpO1xuICAgICAgICBpZiAocmVzdWx0ICYmICEocmVzdWx0WzFdID09PSAnICcgfHwgcmVzdWx0WzFdID09PSAnJykpIHtcbiAgICAgICAgICAgIGxldCBhdXRob3IgPSByZXN1bHRbMV0ucmVwbGFjZSgvKFxcclxcbnxcXG58XFxyKS9nbSwgJycpO1xuICAgICAgICAgICAgcmV0dXJuIGF1dGhvcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAndW5rbm93bic7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRUaXRsZSgpIHtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSB0aGlzLmdldENvbnRlbnQoKTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGNvbnRlbnQubWF0Y2goL1xcL1xcL1xccypbVHx0XWl0bGVcXHMqOlxccyooW1xcd3xcXHN8XFxAfFxcKHxcXCl8XFwtfFxcX10qKS9pKTtcbiAgICAgICAgaWYgKHJlc3VsdCAmJiAhKHJlc3VsdFsxXSA9PT0gJyAnIHx8IHJlc3VsdFsxXSA9PT0gJycpKSB7XG4gICAgICAgICAgICBsZXQgdGl0bGUgPSByZXN1bHRbMV0ucmVwbGFjZSgvKFxcclxcbnxcXG58XFxyKS9nbSwgJycpO1xuICAgICAgICAgICAgcmV0dXJuIHRpdGxlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuYnVmZmVyTWFuYWdlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5idWZmZXJNYW5hZ2VyLmN1cnJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJ3Vua25vd24nO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmV0dXJucyBQcm9taXNlXG4gICAgZ2V0T2ZUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmFnZS5nZXQoJ2FjY2Vzc1Rva2VuJyk7XG4gICAgfVxuXG4gICAgZG93bmxvYWQgKCkge1xuICAgICAgICBsZXQgY29udGVudCA9IHRoaXMuZ2V0Q29udGVudCgpO1xuICAgICAgICBsZXQgbmFtZSA9IHRoaXMuZ2V0VGl0bGUoKTtcbiAgICAgICAgaWYgKG5hbWUgIT09ICcnKSB7XG4gICAgICAgICAgICBuYW1lICs9ICctJztcbiAgICAgICAgfVxuICAgICAgICBuYW1lICs9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXG4gICAgICAgIC8vIERvd25sb2FkIGNvZGVcbiAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtjb250ZW50XSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSk7XG4gICAgICAgIHNhdmVBcyhibG9iLCBuYW1lICsgJy5mcmFnJyk7XG4gICAgICAgIHRoaXMuZWRpdG9yLmRvYy5tYXJrQ2xlYW4oKTtcbiAgICAgICAgdGhpcy5jaGFuZ2UgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB1cGRhdGUgKCkge1xuICAgICAgICBpZiAodGhpcy5kZWJ1Z2dpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuZGVidWdnaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBmb2N1c0FsbCh0aGlzLmVkaXRvcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy52aXN1YWxEZWJ1Z2dlci50ZXN0aW5nUmVzdWx0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMudmlzdWFsRGVidWdnZXIuY2xlYW4oKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNoYWRlci5jYW52YXMubG9hZCh0aGlzLm9wdGlvbnMuZnJhZ19oZWFkZXIgKyB0aGlzLmVkaXRvci5nZXRWYWx1ZSgpICsgdGhpcy5vcHRpb25zLmZyYWdfZm9vdGVyKTtcbiAgICB9XG5cbiAgICBjcmVhdGVGb250TGluaygpIHtcbiAgICAgICAgdmFyIGhlYWQgID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcbiAgICAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImxpbmtcIiApO1xuICAgICAgICBsaW5rLmhyZWYgPSBcImh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vaWNvbj9mYW1pbHk9TWF0ZXJpYWwrSWNvbnNcIjtcbiAgICAgICAgbGluay50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuICAgICAgICBsaW5rLnJlbCA9IFwic3R5bGVzaGVldFwiO1xuICAgICAgICBsaW5rLm1lZGlhID0gXCJzY3JlZW4scHJpbnRcIjtcbiAgICAgICAgaGVhZC5hcHBlbmRDaGlsZChsaW5rKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwiaGVhZFwiIClbMF0uYXBwZW5kQ2hpbGQoIGxpbmsgKTtcbiAgICB9XG5cbiAgICB0b2dnbGVQcmVzZW50YXRpb25XaW5kb3coZmxhZykge1xuICAgICAgdGhpcy5wV2luZG93T3BlbiA9IGZsYWc7XG4gICAgICBpZiAoZmxhZykge1xuICAgICAgICB0aGlzLnNoYWRlci5vcGVuV2luZG93KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNoYWRlci5jbG9zZVdpbmRvdygpO1xuICAgICAgfVxuICAgIH1cblxuICAgIG9uQ2xvc2VQcmVzZW50YXRpb25XaW5kb3coKSB7XG4gICAgICB0aGlzLnBXaW5kb3dPcGVuID0gZmFsc2U7XG4gICAgfVxufVxuXG53aW5kb3cuR2xzbEVkaXRvciA9IEdsc2xFZGl0b3I7XG5cbnZhciBHbHNsV2ViQ29tcG9uZW50ID0gZnVuY3Rpb24oKSB7fTtcbkdsc2xXZWJDb21wb25lbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShIVE1MRWxlbWVudC5wcm90b3R5cGUpXG5HbHNsV2ViQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVkQ2FsbGJhY2sgPSBmdW5jdGlvbiBjcmVhdGVkQ2FsbGJhY2soKSB7XG5cbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgY2FudmFzX3NpemU6IDE1MCxcbiAgICAgICAgY2FudmFzX2ZvbGxvdzogdHJ1ZSxcbiAgICAgICAgdG9vbHRpcHM6IHRydWVcbiAgICB9O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGF0dHJpYnV0ZSA9IHRoaXMuYXR0cmlidXRlc1tpXTtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZS5zcGVjaWZpZWQpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGF0dHJpYnV0ZS52YWx1ZTtcblxuICAgICAgICAgICAgaWYgKHZhbHVlID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAnZmFsc2UnKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyc2VJbnQodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBwYXJzZUludCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG9wdGlvbnNbYXR0cmlidXRlLm5hbWVdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmdsc2xFZGl0b3IgPSBuZXcgR2xzbEVkaXRvcih0aGlzLCBvcHRpb25zKTtcbn1cblxuZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50KCdnbHNsLWVkaXRvcicsIEdsc2xXZWJDb21wb25lbnQpO1xuIiwiLy8gSW1wb3J0IENvZGVNaXJyb3JcbmltcG9ydCBDb2RlTWlycm9yIGZyb20gJ2NvZGVtaXJyb3InO1xuXG4vLyBJbXBvcnQgQ29kZU1pcnJvciBhZGRvbnMgYW5kIG1vZHVsZXNcbmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9zZWFyY2gvc2VhcmNoJztcbmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9zZWFyY2gvc2VhcmNoY3Vyc29yJztcbmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9jb21tZW50L2NvbW1lbnQnO1xuaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL2RpYWxvZy9kaWFsb2cnO1xuaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL2VkaXQvbWF0Y2hicmFja2V0cyc7XG5pbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vZWRpdC9jbG9zZWJyYWNrZXRzJztcbmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi93cmFwL2hhcmR3cmFwJztcbmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9mb2xkL2ZvbGRjb2RlJztcbmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9mb2xkL2ZvbGRndXR0ZXInO1xuaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL2ZvbGQvaW5kZW50LWZvbGQnO1xuaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL2hpbnQvc2hvdy1oaW50JztcbmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9oaW50L2phdmFzY3JpcHQtaGludCc7XG5pbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vZGlzcGxheS9ydWxlcnMnO1xuaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL2Rpc3BsYXkvcGFuZWwnO1xuaW1wb3J0ICdjb2RlbWlycm9yL21vZGUvY2xpa2UvY2xpa2UuanMnO1xuXG4vLyBLZXltYXBcbmltcG9ydCAnY29kZW1pcnJvci9rZXltYXAvc3VibGltZSc7XG5cbmNvbnN0IFVORk9DVVNfQ0xBU1MgPSAnZ2VfZWRpdG9yLXVuZm9jdXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdEVkaXRvciAobWFpbikge1xuICAgIGlmIChtYWluLm9wdGlvbnMubGluZU51bWJlcnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBtYWluLm9wdGlvbnMubGluZU51bWJlcnMgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIENSRUFURSBBTkQgU1RBUlQgQ09ERU1JUlJPUlxuICAgIGxldCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZ2VfZWRpdG9yJyk7XG4gICAgXG4gICAgLy8gSWYgdGhlcmUgaXMgYSBtZW51IG9mZnNldCB0aGUgZWRpdG9yIHRvIGNvbWUgYWZ0ZXIgaXRcbiAgICBpZiAobWFpbi5tZW51KSB7XG4gICAgICAgIGVsLnN0eWxlLnBhZGRpbmdUb3AgPSAobWFpbi5tZW51LmVsLmNsaWVudEhlaWdodCB8fCBtYWluLm1lbnUuZWwub2Zmc2V0SGVpZ2h0IHx8IG1haW4ubWVudS5lbC5zY3JvbGxIZWlnaHQpICsgXCJweFwiO1xuICAgIH1cbiAgICBcbiAgICBtYWluLmNvbnRhaW5lci5hcHBlbmRDaGlsZChlbCk7XG5cbiAgICBsZXQgY20gPSBDb2RlTWlycm9yKGVsLCB7XG4gICAgICAgIHZhbHVlOiBtYWluLm9wdGlvbnMuZnJhZyxcbiAgICAgICAgdmlld3BvcnRNYXJnaW46IEluZmluaXR5LFxuICAgICAgICBsaW5lTnVtYmVyczogbWFpbi5vcHRpb25zLmxpbmVOdW1iZXJzLFxuICAgICAgICBtYXRjaEJyYWNrZXRzOiB0cnVlLFxuICAgICAgICBtb2RlOiAneC1zaGFkZXIveC1mcmFnbWVudCcsXG4gICAgICAgIGtleU1hcDogJ3N1YmxpbWUnLFxuICAgICAgICBhdXRvQ2xvc2VCcmFja2V0czogdHJ1ZSxcbiAgICAgICAgZXh0cmFLZXlzOiB7ICdDdHJsLVNwYWNlJzogJ2F1dG9jb21wbGV0ZScgfSxcbiAgICAgICAgc2hvd0N1cnNvcldoZW5TZWxlY3Rpbmc6IHRydWUsXG4gICAgICAgIHRoZW1lOiBtYWluLm9wdGlvbnMudGhlbWUsXG4gICAgICAgIGRyYWdEcm9wOiBmYWxzZSxcbiAgICAgICAgaW5kZW50VW5pdDogNCxcbiAgICAgICAgZ3V0dGVyczogbWFpbi5vcHRpb25zLmxpbmVOdW1iZXJzID8gWydDb2RlTWlycm9yLWxpbmVudW1iZXJzJywgJ2JyZWFrcG9pbnRzJ10gOiBmYWxzZSxcbiAgICAgICAgbGluZVdyYXBwaW5nOiB0cnVlLFxuICAgICAgICBhdXRvZm9jdXM6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gY207XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bmZvY3VzTGluZShjbSwgbGluZSkge1xuICAgIGlmIChsaW5lID09PSBudWxsKSByZXR1cm47XG4gICAgY20uZ2V0RG9jKCkuYWRkTGluZUNsYXNzKGxpbmUsICdndXR0ZXInLCBVTkZPQ1VTX0NMQVNTKTtcbiAgICBjbS5nZXREb2MoKS5hZGRMaW5lQ2xhc3MobGluZSwgJ3RleHQnLCBVTkZPQ1VTX0NMQVNTKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVuZm9jdXNBbGwoY20pIHtcbiAgICBmb3IgKGxldCBpID0gMCwgaiA9IGNtLmdldERvYygpLmxpbmVDb3VudCgpOyBpIDw9IGo7IGkrKykge1xuICAgICAgICB1bmZvY3VzTGluZShjbSwgaSk7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9jdXNMaW5lKGNtLCBsaW5lKSB7XG4gICAgaWYgKGxpbmUgPT09IG51bGwpIHJldHVybjtcbiAgICBjbS5nZXREb2MoKS5yZW1vdmVMaW5lQ2xhc3MobGluZSwgJ2d1dHRlcicsIFVORk9DVVNfQ0xBU1MpO1xuICAgIGNtLmdldERvYygpLnJlbW92ZUxpbmVDbGFzcyhsaW5lLCAndGV4dCcsIFVORk9DVVNfQ0xBU1MpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9jdXNBbGwoY20pIHtcbiAgICBmb3IgKGxldCBpID0gMCwgaiA9IGNtLmdldERvYygpLmxpbmVDb3VudCgpOyBpIDw9IGo7IGkrKykge1xuICAgICAgICBmb2N1c0xpbmUoY20sIGkpO1xuICAgIH1cbn1cbiIsImltcG9ydCBHbHNsQ2FudmFzIGZyb20gJ2dsc2xDYW52YXMnO1xuaW1wb3J0IHsgc3Vic2NyaWJlSW50ZXJhY3RpdmVEb20gfSBmcm9tICcuLi90b29scy9pbnRlcmFjdGl2ZURvbSc7XG5pbXBvcnQgTWVkaWFDYXB0dXJlIGZyb20gJy4uL3Rvb2xzL21lZGlhQ2FwdHVyZSc7XG5pbXBvcnQgTWVudUl0ZW0gZnJvbSAnLi4vdWkvTWVudUl0ZW0nO1xuLy8gM2VyIFBhcnRpZXNcbmltcG9ydCB7IHNhdmVBcyB9IGZyb20gJy4uL3ZlbmRvci9GaWxlU2F2ZXIubWluLmpzJztcblxudmFyIENPTlRST0xTX0NMQVNTTkFNRSA9ICdnZV9jb250cm9sJztcbnZhciBDT05UUk9MU19QQU5FTF9DTEFTU05BTUUgPSAnZ2VfY29udHJvbF9wYW5lbCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNoYWRlciB7XG4gICAgY29uc3RydWN0b3IgKG1haW4pIHtcbiAgICAgICAgdGhpcy5tYWluID0gbWFpbjtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gbWFpbi5vcHRpb25zO1xuICAgICAgICB0aGlzLmZyYWcgPSBcIlwiO1xuXG4gICAgICAgIC8vIERPTSBDT05UQUlORVJcbiAgICAgICAgdGhpcy5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aGlzLmVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZ2VfY2FudmFzX2NvbnRhaW5lcicpO1xuICAgICAgICAvLyBDUkVBVEUgQU5EIFNUQVJUIEdMU0xDQU5WQVNcbiAgICAgICAgdGhpcy5lbF9jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgdGhpcy5lbF9jYW52YXMuc2V0QXR0cmlidXRlKCdjbGFzcycsICdnZV9jYW52YXMnKTtcbiAgICAgICAgdGhpcy5lbF9jYW52YXMuc2V0QXR0cmlidXRlKCd3aWR0aCcsICh0aGlzLm9wdGlvbnMuY2FudmFzX3dpZHRoIHx8IHRoaXMub3B0aW9ucy5jYW52YXNfc2l6ZSB8fCAnMjUwJykgLyB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG4gICAgICAgIHRoaXMuZWxfY2FudmFzLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgKHRoaXMub3B0aW9ucy5jYW52YXNfaGVpZ2h0IHx8IHRoaXMub3B0aW9ucy5jYW52YXNfc2l6ZSB8fCAnMjUwJykgLyB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG4gICAgICAgIHRoaXMuZWxfY2FudmFzLnNldEF0dHJpYnV0ZSgnZGF0YS1mcmFnbWVudCcsIHRoaXMub3B0aW9ucy5mcmFnKTtcbiAgICAgICAgdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLmVsX2NhbnZhcyk7XG4gICAgICAgIGxldCBnbHNsY2FudmFzID0gbmV3IEdsc2xDYW52YXModGhpcy5lbF9jYW52YXMsIHsgcHJlbXVsdGlwbGllZEFscGhhOiBmYWxzZSwgcHJlc2VydmVEcmF3aW5nQnVmZmVyOiB0cnVlLCBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDEsMSwxLDEpJyB9KTtcblxuICAgICAgICB0aGlzLmNhbnZhcyA9IGdsc2xjYW52YXM7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5pbWdzICYmIHRoaXMub3B0aW9ucy5pbWdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgaW4gdGhpcy5vcHRpb25zLmltZ3MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5zZXRVbmlmb3JtKCd1X3RleCcgKyBpLCB0aGlzLm9wdGlvbnMuaW1nc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNZWRpYSBDYXB0dXJlXG4gICAgICAgIHRoaXMubWVkaWFfY2FwdHVyZSA9IG5ldyBNZWRpYUNhcHR1cmUoKTtcbiAgICAgICAgdGhpcy5tZWRpYV9jYXB0dXJlLnNldENhbnZhcyh0aGlzLmVsX2NhbnZhcyk7XG4gICAgICAgIHRoaXMuY2FudmFzLm9uKCdyZW5kZXInLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm1lZGlhX2NhcHR1cmUuY29tcGxldGVTY3JlZW5zaG90KCk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKG1haW4ub3B0aW9ucy5kaXNwbGF5TWVudSkge1xuICAgICAgICAgICAgLy8gQ09OVFJPTFNcbiAgICAgICAgICAgIHRoaXMuY29udHJvbHNfY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbHNfY29udGFpbmVyLmNsYXNzTmFtZSA9IENPTlRST0xTX0NMQVNTTkFNRTtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbF9wYW5uZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgICAgICAgICAgdGhpcy5jb250cm9sX3Bhbm5lbC5jbGFzc05hbWUgPSBDT05UUk9MU19QQU5FTF9DTEFTU05BTUU7XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xzX2NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNvbnRyb2xfcGFubmVsKTtcbiAgICAgICAgICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQodGhpcy5jb250cm9sc19jb250YWluZXIpO1xuICAgICAgICAgICAgdGhpcy5jb250cm9scyA9IHt9O1xuICAgICAgICAgICAgLy8gcGxheS9zdG9wXG4gICAgICAgICAgICAvLyB0aGlzLmNvbnRyb2xzLnBsYXlQYXVzZSA9IG5ldyBNZW51SXRlbSh0aGlzLmNvbnRyb2xfcGFubmVsLCAnZ2VfY29udHJvbF9lbGVtZW50JywgJzxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj5wYXVzZTwvaT4nLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbHMucGxheVBhdXNlID0gbmV3IE1lbnVJdGVtKHRoaXMuY29udHJvbF9wYW5uZWwsICdnZV9jb250cm9sX2VsZW1lbnQnLCAnPGkgY2xhc3M9XCJtYXRlcmlhbC1pY29uc1wiPnBhdXNlPC9pPicsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgaWYgKGdsc2xjYW52YXMucGF1c2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGdsc2xjYW52YXMucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmNvbnRyb2xzLnBsYXlQYXVzZS5uYW1lID0gJzxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj5wYXVzZTwvaT4nOy8vJ1BhdXNlJztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250cm9scy5wbGF5UGF1c2UubmFtZSA9ICc8aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zXCI+cGF1c2U8L2k+JzsvLydQYXVzZSc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZ2xzbGNhbnZhcy5wYXVzZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xzLnBsYXlQYXVzZS5uYW1lID0gJzxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj5wbGF5X2Fycm93PC9pPic7Ly8nUGxheSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyByZWNcbiAgICAgICAgICAgIHRoaXMuaXNDYXB0dXJpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIGxldCByZWMgPSBuZXcgTWVudUl0ZW0odGhpcy5jb250cm9sX3Bhbm5lbCwgJ2dlX2NvbnRyb2xfZWxlbWVudCcsICc8aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zXCI+ZmliZXJfbWFudWFsX3JlY29yZDwvaT4nLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGxldCByZWMgPSBuZXcgTWVudUl0ZW0odGhpcy5jb250cm9sX3Bhbm5lbCwgJ2dlX2NvbnRyb2xfZWxlbWVudCcsICc8aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zXCI+JiN4RTA2MTs8L2k+JywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0NhcHR1cmluZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3BWaWRlb0NhcHR1cmUoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0VmlkZW9DYXB0dXJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xzLnJlYyA9IHJlYztcbiAgICAgICAgICAgIHRoaXMuY29udHJvbHMucmVjLmJ1dHRvbi5zdHlsZS5jb2xvciA9ICdyZWQnO1xuXG4gICAgICAgICAgICAvLyBwcmVzZW50IG1vZGUgKG9ubHkgaWYgdGhlcmUgaXMgYSBwcmVzZW50YXRpb24uaHRtbCBmaWxlIHRvIHBvaW50IHRvKVxuICAgICAgICAgICAgLy8gdGhpcy5jb250cm9scy5wcmVzZW50YXRpb25Nb2RlID0gbmV3IE1lbnVJdGVtKHRoaXMuY29udHJvbF9wYW5uZWwsICdnZV9jb250cm9sX2VsZW1lbnQnLCAnPGkgY2xhc3M9XCJtYXRlcmlhbC1pY29uc1wiPm9wZW5faW5fbmV3PC9pPicsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb250cm9scy5wcmVzZW50YXRpb25Nb2RlID0gbmV3IE1lbnVJdGVtKHRoaXMuY29udHJvbF9wYW5uZWwsICdnZV9jb250cm9sX2VsZW1lbnQnLCAnPGkgY2xhc3M9XCJtYXRlcmlhbC1pY29uc1wiPm9wZW5faW5fbmV3PC9pPicsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgaWYgKG1haW4ucFdpbmRvd09wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgbWFpbi50b2dnbGVQcmVzZW50YXRpb25XaW5kb3coZmFsc2UpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1haW4udG9nZ2xlUHJlc2VudGF0aW9uV2luZG93KHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmVsX2NvbnRyb2wgPSB0aGlzLmVsLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoQ09OVFJPTFNfQ0xBU1NOQU1FKVswXTtcbiAgICAgICAgICAgIHRoaXMuZWxfY29udHJvbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKGV2ZW50KSA9PiB7IHRoaXMuc2hvd0NvbnRyb2xzKCk7IH0pO1xuICAgICAgICAgICAgdGhpcy5lbF9jb250cm9sLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoZXZlbnQpID0+IHsgdGhpcy5oaWRlQ29udHJvbHMoKTsgfSk7XG4gICAgICAgICAgICB0aGlzLmVsX2NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQub2Zmc2V0WT50aGlzLmVsX2NhbnZhcy5jbGllbnRIZWlnaHQqLjY2KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0NvbnRyb2xzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGVDb250cm9scygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLmhpZGVDb250cm9scygpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gPT09PT09PT09PSBFVkVOVFNcbiAgICAgICAgLy8gRHJhZ2dhYmxlL3Jlc2l6YWJsZS9zbmFwcGFibGVcbiAgICAgICAgaWYgKG1haW4ub3B0aW9ucy5jYW52YXNfZHJhZ2dhYmxlIHx8IG1haW4ub3B0aW9ucy5jYW52YXNfcmVzaXphYmxlIHx8IG1haW4ub3B0aW9ucy5jYW52YXNfc25hcGFibGUpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZUludGVyYWN0aXZlRG9tKHRoaXMuZWwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmU6IG1haW4ub3B0aW9ucy5jYW52YXNfZHJhZ2dhYmxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBtYWluLm9wdGlvbnMuY2FudmFzX3Jlc2l6YWJsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNuYXA6IG1haW4ub3B0aW9ucy5jYW52YXNfc25hcGFibGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChtYWluLm9wdGlvbnMuY2FudmFzX3NpemUgPT09ICdoYWxmc2NyZWVuJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZWwuc25hcFJpZ2h0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuZWwub24oJ21vdmUnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBldmVudC5lbC5zdHlsZS53aWR0aCA9IGV2ZW50LmVsLmNsaWVudFdpZHRoKydweCc7XG4gICAgICAgICAgICAgICAgZXZlbnQuZWwuc3R5bGUuaGVpZ2h0ID0gZXZlbnQuZWwuY2xpZW50SGVpZ2h0KydweCc7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy5lbC5vbigncmVzaXplJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgZ2xzbGNhbnZhcy5jYW52YXMuc3R5bGUud2lkdGggPSBldmVudC5lbC5jbGllbnRXaWR0aCsncHgnO1xuICAgICAgICAgICAgICAgIGdsc2xjYW52YXMuY2FudmFzLnN0eWxlLmhlaWdodCA9IGV2ZW50LmVsLmNsaWVudEhlaWdodCsncHgnO1xuICAgICAgICAgICAgICAgIGdsc2xjYW52YXMucmVzaXplKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYSBtZW51IG9mZnNldCB0aGUgZWRpdG9yIHRvIGNvbWUgYWZ0ZXIgaXRcbiAgICAgICAgaWYgKG1haW4ubWVudSkge1xuICAgICAgICAgICAgdGhpcy5lbC5zdHlsZS50b3AgPSAobWFpbi5tZW51LmVsLmNsaWVudEhlaWdodCB8fCBtYWluLm1lbnUuZWwub2Zmc2V0SGVpZ2h0IHx8IG1haW4ubWVudS5lbC5zY3JvbGxIZWlnaHQpICsgXCJweFwiO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIEFkZCBhbGwgdGhpcyB0byB0aGUgbWFpbiBjb250YWluZXJcbiAgICAgICAgbWFpbi5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5lbCk7ICAgIFxuICAgICAgICBnbHNsY2FudmFzLnJlc2l6ZSgpO1xuICAgIH1cblxuICAgIGhpZGVDb250cm9scyAoKSB7XG4gICAgICAgIGlmICh0aGlzLmVsX2NvbnRyb2wgJiYgdGhpcy5lbF9jb250cm9sLmNsYXNzTmFtZSA9PT0gQ09OVFJPTFNfQ0xBU1NOQU1FKSB7XG4gICAgICAgICAgICB0aGlzLmVsX2NvbnRyb2wuY2xhc3NOYW1lID0gQ09OVFJPTFNfQ0xBU1NOQU1FKycgJytDT05UUk9MU19DTEFTU05BTUUrJ19oaWRkZW4nO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2hvd0NvbnRyb2xzICgpIHtcbiAgICAgICAgaWYgKHRoaXMuZWxfY29udHJvbCAmJiB0aGlzLmVsX2NvbnRyb2wuY2xhc3NOYW1lID09PSBDT05UUk9MU19DTEFTU05BTUUrJyAnK0NPTlRST0xTX0NMQVNTTkFNRSsnX2hpZGRlbicpIHtcbiAgICAgICAgICAgIHRoaXMuZWxfY29udHJvbC5jbGFzc05hbWUgPSBDT05UUk9MU19DTEFTU05BTUU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXF1ZXN0UmVkcmF3KCkge1xuICAgICAgICB0aGlzLmNhbnZhcy5mb3JjZVJlbmRlciA9IHRydWU7XG4gICAgICAgIHRoaXMuY2FudmFzLnJlbmRlcigpO1xuICAgIH1cblxuICAgIHNjcmVlbnNob3QgKCkge1xuICAgICAgICB0aGlzLnJlcXVlc3RSZWRyYXcoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVkaWFfY2FwdHVyZS5zY3JlZW5zaG90KCk7XG4gICAgfVxuXG4gICAgc3RhcnRWaWRlb0NhcHR1cmUgKCkge1xuICAgICAgICB0aGlzLnJlcXVlc3RSZWRyYXcoKTtcbiAgICAgICAgaWYgKHRoaXMubWVkaWFfY2FwdHVyZS5zdGFydFZpZGVvQ2FwdHVyZSgpKSB7XG4gICAgICAgICAgICB0aGlzLmlzQ2FwdHVyaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbHMucmVjLmJ1dHRvbi5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XG4gICAgICAgICAgICAvLyB0aGlzLmNvbnRyb2xzLnJlYy5uYW1lID0gJzxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj5zdG9wPC9pPic7XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xzLnJlYy5uYW1lID0gJzxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj4mI3hFMDYxOzwvaT4nO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RvcFZpZGVvQ2FwdHVyZSAoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQ2FwdHVyaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmlzQ2FwdHVyaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xzLnJlYy5idXR0b24uc3R5bGUuY29sb3IgPSAncmVkJztcbiAgICAgICAgICAgIC8vIHRoaXMuY29udHJvbHMucmVjLm5hbWUgPSAnPGkgY2xhc3M9XCJtYXRlcmlhbC1pY29uc1wiPmZpYmVyX21hbnVhbF9yZWNvcmQ8L2k+JztcbiAgICAgICAgICAgIHRoaXMuY29udHJvbHMucmVjLm5hbWUgPSAnPGkgY2xhc3M9XCJtYXRlcmlhbC1pY29uc1wiPnN0b3A8L2k+JztcbiAgICAgICAgICAgIHRoaXMubWVkaWFfY2FwdHVyZS5zdG9wVmlkZW9DYXB0dXJlKCkudGhlbigodmlkZW8pID0+IHtcbiAgICAgICAgICAgICAgICBzYXZlQXModmlkZW8uYmxvYiwgYCR7K25ldyBEYXRlKCl9LndlYm1gKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb3BlbldpbmRvdygpIHtcbiAgICAgICAgdGhpcy5vcmlnaW5hbFNpemUgPSB7d2lkdGg6IHRoaXMuY2FudmFzLmNhbnZhcy5jbGllbnRXaWR0aCwgaGVpZ2h0OiB0aGlzLmNhbnZhcy5jYW52YXMuY2xpZW50SGVpZ2h0fTtcbiAgICAgICAgdGhpcy5wcmVzZW50YXRpb25XaW5kb3cgPSB3aW5kb3cub3BlbihcIlwiLCBcIl9ibGFua1wiLCBcInByZXNlbnRhdGlvbldpbmRvd1wiKTtcbiAgICAgICAgdGhpcy5zZXRVcFByZXNlbnRhdGlvbldpbmRvdygpO1xuICAgIH1cblxuICAgIGNsb3NlV2luZG93KCkge1xuICAgICAgICBpZiAodGhpcy5wcmVzZW50YXRpb25XaW5kb3cpIHtcbiAgICAgICAgICAgIHRoaXMucHJlc2VudGF0aW9uV2luZG93LmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRDYW52YXNTaXplKHcsIGgpIHtcbiAgICAgICAgdGhpcy5jYW52YXMuY2FudmFzLnN0eWxlLndpZHRoID0gdyArICdweCc7XG4gICAgICAgIHRoaXMuY2FudmFzLmNhbnZhcy5zdHlsZS5oZWlnaHQgPSBoICsgJ3B4JztcbiAgICB9XG5cbiAgICBzZXRVcFByZXNlbnRhdGlvbldpbmRvdygpIHtcbiAgICAgICAgdGhpcy5wcmVzZW50YXRpb25XaW5kb3cuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmNhbnZhcy5jYW52YXMpO1xuICAgICAgICB2YXIgZCA9IHRoaXMucHJlc2VudGF0aW9uV2luZG93LmRvY3VtZW50O1xuICAgICAgICB2YXIgZGl2ID0gZC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoZC5jcmVhdGVUZXh0Tm9kZShcIlByb2plY3RvciBtb2RlXCIpKTtcbiAgICAgICAgdmFyIHNwYW4gPSB0aGlzLnByZXNlbnRhdGlvbldpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKHNwYW4pO1xuICAgICAgICBzcGFuLmFwcGVuZENoaWxkKGQuY3JlYXRlVGV4dE5vZGUoXCIgLSBJZiB0aGUgY2FudmFzIGRvZXNuJ3QgdXBkYXRlLCBkcmFnIHRoaXMgd2luZG93IGFuZCByZXZlYWwgdGhlIGVkaXRvclwiKSk7XG4gICAgICAgIGQuYm9keS5hcHBlbmRDaGlsZChkaXYpO1xuXG4gICAgICAgIGQudGl0bGUgPSBcIkdMU0wgRWRpdG9yXCJcbiAgICAgICAgZC5ib2R5LnN0eWxlLnBhZGRpbmcgPSBcIjBcIjtcbiAgICAgICAgZC5ib2R5LnN0eWxlLm1hcmdpbiA9IFwiMFwiO1xuICBcdFx0XHRkLmJvZHkuc3R5bGUuYmFja2dyb3VuZCA9IFwiIzE3MWUyMlwiO1xuICBcdFx0XHRkLmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuXG4gICAgICAgIGRpdi5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICAgICAgZGl2LnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG4gICAgICAgIGRpdi5zdHlsZS5iYWNrZ3JvdW5kID0gXCJyZ2JhKDAsIDAsIDAsIDAuNSlcIjtcbiAgICAgICAgZGl2LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgICBkaXYuc3R5bGUudG9wID0gXCIwXCI7XG4gICAgICAgIGRpdi5zdHlsZS5sZWZ0ID0gXCIwXCI7XG4gICAgICAgIGRpdi5zdHlsZS5yaWdodCA9IFwiMFwiO1xuICAgICAgICBkaXYuc3R5bGUucGFkZGluZyA9IFwiMTZweFwiO1xuICAgICAgICBkaXYuc3R5bGUuY29sb3IgPSBcIiNmZmZmZmZcIjtcbiAgICAgICAgZGl2LnN0eWxlLmZvbnRTaXplID0gXCIxNHB4XCI7XG4gICAgICAgIGRpdi5zdHlsZS5mb250RmFtaWx5ID0gXCJIZWx2ZXRpY2EsIEdlbmV2YSwgc2Fucy1zZXJpZlwiO1xuICAgICAgICBkaXYuc3R5bGUuZm9udFdlaWdodCA9IFwiNDAwXCI7XG4gICAgICAgIGRpdi5zdHlsZS5sZXR0ZXJTcGFjaW5nID0gXCIwLjFlbVwiO1xuICAgICAgICBkaXYuc3R5bGUudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcbiAgICAgICAgZGl2LnN0eWxlLm9wYWNpdHkgPSBcIjFcIjtcbiAgICAgICAgZGl2LnN0eWxlLnpJbmRleCA9IFwiOTk5OVwiO1xuICAgICAgICBkaXYuc3R5bGUuc2V0UHJvcGVydHkoXCItd2Via2l0LXRyYW5zaXRpb25cIiwgXCJvcGFjaXR5IDEuNXNcIik7XG4gICAgICAgIGRpdi5zdHlsZS5zZXRQcm9wZXJ0eShcIi1tb3otdHJhbnNpdGlvblwiLCBcIm9wYWNpdHkgMS41c1wiKTtcbiAgICAgICAgZGl2LnN0eWxlLnNldFByb3BlcnR5KFwidHJhbnNpdGlvblwiLCBcIm9wYWNpdHkgMS41c1wiKTtcblxuICAgICAgICBzcGFuLnN0eWxlLmNvbG9yID0gXCJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSlcIjtcblxuICAgICAgICBzZXRUaW1lb3V0KCgpPT57XG4gICAgICAgICAgICBkaXYuc3R5bGUub3BhY2l0eSA9IDA7XG4gICAgICAgIH0sIDQwMDApO1xuXG4gICAgICAgIHRoaXMuc2V0Q2FudmFzU2l6ZSh0aGlzLnByZXNlbnRhdGlvbldpbmRvdy5pbm5lcldpZHRoLCB0aGlzLnByZXNlbnRhdGlvbldpbmRvdy5pbm5lckhlaWdodCk7XG4gICAgICAgIHRoaXMucHJlc2VudGF0aW9uV2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMub25QcmVzZW50YXRpb25XaW5kb3dSZXNpemUuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMucHJlc2VudGF0aW9uV2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ1bmxvYWRcIiwgdGhpcy5vblByZXNlbnRhdGlvbldpbmRvd0Nsb3NlLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIG9uUHJlc2VudGF0aW9uV2luZG93Q2xvc2UoKSB7XG4gICAgICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMuY2FudmFzKTtcbiAgICAgICAgdGhpcy5zZXRDYW52YXNTaXplKHRoaXMub3JpZ2luYWxTaXplLndpZHRoLCB0aGlzLm9yaWdpbmFsU2l6ZS5oZWlnaHQpO1xuICAgICAgICB0aGlzLmNhbnZhcy5yZXNpemUoKTtcblxuICAgICAgICB0aGlzLm1haW4ub25DbG9zZVByZXNlbnRhdGlvbldpbmRvdygpO1xuICAgICAgICB0aGlzLm1haW4ubWVudS5vbkNsb3NlUHJlc2VudGF0aW9uV2luZG93KCk7XG4gICAgICAgIHRoaXMucHJlc2VudGF0aW9uV2luZG93ID0gbnVsbDtcbiAgICB9XG5cbiAgICBvblByZXNlbnRhdGlvbldpbmRvd1Jlc2l6ZSgpIHtcbiAgICAgIGlmICh0aGlzLnByZXNlbnRhdGlvbldpbmRvdykge1xuICAgICAgICB0aGlzLnNldENhbnZhc1NpemUodGhpcy5wcmVzZW50YXRpb25XaW5kb3cuaW5uZXJXaWR0aCwgdGhpcy5wcmVzZW50YXRpb25XaW5kb3cuaW5uZXJIZWlnaHQpO1xuICAgICAgICB0aGlzLmNhbnZhcy5yZXNpemUoKTtcbiAgICAgIH1cbiAgICB9XG59XG4iLCIvLyBJbXBvcnQgQ29kZU1pcnJvclxuaW1wb3J0IENvZGVNaXJyb3IgZnJvbSAnY29kZW1pcnJvcic7XG5pbXBvcnQgJ2NvZGVtaXJyb3IvbW9kZS9jbGlrZS9jbGlrZS5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJ1ZmZlck1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yIChtYWluKSB7XG4gICAgICAgIHRoaXMubWFpbiA9IG1haW47XG4gICAgICAgIHRoaXMuYnVmZmVycyA9IHt9O1xuICAgICAgICB0aGlzLnRhYnMgPSB7fTtcbiAgICAgICAgdGhpcy5jdXJyZW50ID0gJ3VudGl0bGVkJztcbiAgICB9XG5cbiAgICBvcGVuIChuYW1lLCBjb250ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy5lbCkge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIERPTSBlbGVtZW50XG4gICAgICAgICAgICB0aGlzLmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICAgICAgICAgIHRoaXMuZWwuY2xhc3NOYW1lID0gJ2dlX3BhbmVsJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm1haW4uY2hhbmdlICYmIHRoaXMuY3VycmVudCA9PT0gJ3VudGl0bGVkJykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ09wZW4gQ3VycmVudCBpbiBhIGRpZmZlcmVudCB0YWInKTtcbiAgICAgICAgICAgIHRoaXMub3Blbih0aGlzLmN1cnJlbnQsIHRoaXMubWFpbi5nZXRDb250ZW50KCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5idWZmZXJzW25hbWVdID0gQ29kZU1pcnJvci5Eb2MoY29udGVudCwgJ3gtc2hhZGVyL3gtZnJhZ21lbnQnKTtcblxuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgdGFiXG4gICAgICAgIGxldCB0YWIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICB0YWIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdnZV9wYW5lbF90YWInKTtcbiAgICAgICAgdGFiLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgQ29kZU1pcnJvci5vbih0YWIsICdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0KG5hbWUpO1xuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgY2xvc2UgPSB0YWIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpKTtcbiAgICAgICAgY2xvc2UudGV4dENvbnRlbnQgPSAneCc7XG4gICAgICAgIGNsb3NlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZ2VfcGFuZWxfdGFiX2Nsb3NlJyk7XG4gICAgICAgIENvZGVNaXJyb3Iub24oY2xvc2UsICdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UobmFtZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQodGFiKTtcbiAgICAgICAgdGhpcy50YWJzW25hbWVdID0gdGFiO1xuXG4gICAgICAgIGlmICh0aGlzLmVsICYmICF0aGlzLnBhbmVsICYmIHRoaXMuZ2V0TGVuZ3RoKCkgPiAxKSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgUGFuZWwgQ00gZWxlbWVudFxuICAgICAgICAgICAgdGhpcy5wYW5lbCA9IHRoaXMubWFpbi5lZGl0b3IuYWRkUGFuZWwodGhpcy5lbCwgeyBwb3NpdGlvbjogJ3RvcCcgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZWxlY3QgKG5hbWUpIHtcbiAgICAgICAgbGV0IGJ1ZiA9IHRoaXMuYnVmZmVyc1tuYW1lXTtcblxuICAgICAgICBpZiAoYnVmID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChidWYuZ2V0RWRpdG9yKCkpIHtcbiAgICAgICAgICAgIGJ1ZiA9IGJ1Zi5saW5rZWREb2MoeyBzaGFyZWRIaXN0OiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgICAgIGxldCBvbGQgPSB0aGlzLm1haW4uZWRpdG9yLnN3YXBEb2MoYnVmKTtcbiAgICAgICAgbGV0IGxpbmtlZCA9IG9sZC5pdGVyTGlua2VkRG9jcyhmdW5jdGlvbihkb2MpIHtcbiAgICAgICAgICAgIGxpbmtlZCA9IGRvYztcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChsaW5rZWQpIHtcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgZG9jdW1lbnQgaW4gYnVmZmVycyBpcyB0aGUgb25lIHRoZSBvdGhlciB2aWV3IGlzIGxvb2tpbmcgYXRcbiAgICAgICAgICAgIGZvciAobGV0IGJ1ZmZlck5hbWUgaW4gdGhpcy5idWZmZXJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYnVmZmVyc1tidWZmZXJOYW1lXSA9PT0gb2xkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyc1tidWZmZXJOYW1lXSA9IGxpbmtlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvbGQudW5saW5rRG9jKGxpbmtlZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tYWluLmVkaXRvci5mb2N1cygpO1xuICAgICAgICB0aGlzLm1haW4uc2V0Q29udGVudCh0aGlzLm1haW4uZ2V0Q29udGVudCgpKTtcblxuICAgICAgICBpZiAodGhpcy50YWJzW3RoaXMuY3VycmVudF0pIHtcbiAgICAgICAgICAgIHRoaXMudGFic1t0aGlzLmN1cnJlbnRdLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZ2VfcGFuZWxfdGFiJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50YWJzW25hbWVdLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZ2VfcGFuZWxfdGFiX2FjdGl2ZScpO1xuICAgICAgICB0aGlzLmN1cnJlbnQgPSBuYW1lO1xuXG4gICAgICAgIHRoaXMubWFpbi5lZGl0b3Iuc2V0U2l6ZShudWxsLCAnYXV0bycpO1xuICAgICAgICB0aGlzLm1haW4uZWRpdG9yLmdldFdyYXBwZXJFbGVtZW50KCkuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xuXG4gICAgICAgIHRoaXMubWFpbi50cmlnZ2VyKCduZXdfY29udGVudCcsIHt9KTtcbiAgICB9XG5cbiAgICBjbG9zZSAobmFtZSkge1xuICAgICAgICBsZXQgbmVlZENoYW5nZSA9IG5hbWUgPT09IHRoaXMuZ2V0Q3VycmVudCgpO1xuXG4gICAgICAgIHRoaXMuZWwucmVtb3ZlQ2hpbGQodGhpcy50YWJzW25hbWVdKTtcbiAgICAgICAgZGVsZXRlIHRoaXMudGFic1tuYW1lXTtcbiAgICAgICAgZGVsZXRlIHRoaXMuYnVmZmVyc1tuYW1lXTtcblxuICAgICAgICBpZiAodGhpcy5nZXRMZW5ndGgoKSA9PT0gMSkge1xuICAgICAgICAgICAgdGhpcy5wYW5lbC5jbGVhcigpO1xuICAgICAgICAgICAgdGhpcy5wYW5lbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuZWwgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmVlZENoYW5nZSkge1xuICAgICAgICAgICAgZm9yIChsZXQgcHJvcCBpbiB0aGlzLnRhYnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdChwcm9wKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEN1cnJlbnQgKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50O1xuICAgIH1cblxuICAgIGdldExlbmd0aCAoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmJ1ZmZlcnMpLmxlbmd0aDtcbiAgICB9XG59XG4iLCIvKlxuT3JpZ2luYWw6IGh0dHBzOi8vZ2l0aHViLmNvbS90YW5ncmFtcy90YW5ncmFtLXBsYXkvYmxvYi9naC1wYWdlcy9zcmMvanMvYWRkb25zL3VpL0ZpbGVEcm9wLmpzXG5BdXRob3I6IExvdSBIdWFuZyAoQHNhaWtvZmlzaClcbiovXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpbGVEcm9wIHtcbiAgICBjb25zdHJ1Y3RvciAobWFpbikge1xuICAgICAgICAvLyBTZXQgdXAgZHJhZy9kcm9wIGZpbGUgbGlzdGVuZXJzXG4gICAgICAgIG1haW4uY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbnRlcicsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgLy8gQ2hlY2sgdG8gbWFrZSBzdXJlIHRoYXQgZHJvcHBlZCBpdGVtcyBhcmUgZmlsZXMuXG4gICAgICAgICAgICAvLyBUaGlzIHByZXZlbnRzIG90aGVyIGRyYWdzIChlLmcuIHRleHQgaW4gZWRpdG9yKVxuICAgICAgICAgICAgLy8gZnJvbSB0dXJuaW5nIG9uIHRoZSBmaWxlIGRyb3AgYXJlYS5cbiAgICAgICAgICAgIC8vIFNlZSBoZXJlOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzY4NDgwNDMvaG93LWRvLWktZGV0ZWN0LWEtZmlsZS1pcy1iZWluZy1kcmFnZ2VkLXJhdGhlci10aGFuLWEtZHJhZ2dhYmxlLWVsZW1lbnQtb24tbXktcGFcbiAgICAgICAgICAgIC8vIFRlc3RlZCBpbiBDaHJvbWUsIEZpcmVmb3gsIFNhZmFyaSA4XG4gICAgICAgICAgICB2YXIgdHlwZXMgPSBldmVudC5kYXRhVHJhbnNmZXIudHlwZXM7XG4gICAgICAgICAgICBpZiAodHlwZXMgIT09IG51bGwgJiYgKCh0eXBlcy5pbmRleE9mKSA/ICh0eXBlcy5pbmRleE9mKCdGaWxlcycpICE9PSAtMSkgOiB0eXBlcy5jb250YWlucygnYXBwbGljYXRpb24veC1tb3otZmlsZScpKSkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAnY29weSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHRydWUpO1xuXG4gICAgICAgIG1haW4uY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAvLyBSZXF1aXJlZCB0byBwcmV2ZW50IGJyb3dzZXIgZnJvbSBuYXZpZ2F0aW5nIHRvIGEgZmlsZVxuICAgICAgICAgICAgLy8gaW5zdGVhZCBvZiByZWNlaXZpbmcgYSBkYXRhIHRyYW5zZmVyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9LCBmYWxzZSk7XG5cbiAgICAgICAgbWFpbi5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9LCB0cnVlKTtcblxuICAgICAgICBtYWluLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlc1swXTtcbiAgICAgICAgICAgICAgICBtYWluLm9wZW4oZmlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBIYXNoV2F0Y2gge1xuICAgIGNvbnN0cnVjdG9yIChtYWluKSB7XG4gICAgICAgIHRoaXMubWFpbiA9IG1haW47XG4gICAgICAgIHRoaXMuY2hlY2soKTtcblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2hlY2soKTtcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgIH1cblxuICAgIGNoZWNrKCkge1xuICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhhc2ggIT09ICcnKSB7XG4gICAgICAgICAgICB0aGlzLm1haW4ub3B0aW9ucy5pbWdzID0gW107XG5cbiAgICAgICAgICAgIGxldCBoYXNoZXMgPSBsb2NhdGlvbi5oYXNoLnNwbGl0KCcmJyk7XG4gICAgICAgICAgICBmb3IgKGxldCBpIGluIGhhc2hlcykge1xuICAgICAgICAgICAgICAgIGxldCBleHQgPSBoYXNoZXNbaV0uc3Vic3RyKGhhc2hlc1tpXS5sYXN0SW5kZXhPZignLicpICsgMSk7XG4gICAgICAgICAgICAgICAgbGV0IHBhdGggPSBoYXNoZXNbaV07XG5cbiAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IGhhc2ggaWYgaXMgcHJlc2VudFxuICAgICAgICAgICAgICAgIGlmIChwYXRoLnNlYXJjaCgnIycpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoLnN1YnN0cigxKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsZXQgZmlsZW5hbWUgPSBwYXRoLnNwbGl0KCcvJykucG9wKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZXh0ID09PSAnZnJhZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluLm9wZW4ocGF0aCwgZmlsZW5hbWUucmVwbGFjZSgvXFwuW14vLl0rJC8sICcnKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV4dCA9PT0gJ3BuZycgfHwgZXh0ID09PSAnanBnJyB8fCBleHQgPT09ICdQTkcnIHx8IGV4dCA9PT0gJ0pQRycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluLm9wdGlvbnMuaW1ncy5wdXNoKHBhdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBxdWVyeSA9IHBhcnNlUXVlcnkod2luZG93LmxvY2F0aW9uLnNlYXJjaC5zbGljZSgxKSk7XG4gICAgICAgIGlmIChxdWVyeSkge1xuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIHF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCBrZXkgPT09ICdsb2cnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1haW4uYnVmZmVyTWFuYWdlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxvZ3MgPSBxdWVyeS5sb2cuc3BsaXQoJywnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgaW4gbG9ncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFpbi5vcGVuKCdodHRwczovL3RoZWJvb2tvZnNoYWRlcnMuY29tL2xvZy8nICsgbG9nc1tpXSArICcuZnJhZycsIGxvZ3NbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluLm9wZW4oJ2h0dHBzOi8vdGhlYm9va29mc2hhZGVycy5jb20vbG9nLycgKyBxdWVyeS5sb2cgKyAnLmZyYWcnLCBxdWVyeS5sb2cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gcXVlcnlba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSAndHJ1ZScgfHwgdmFsdWUgPT09ICdmYWxzZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gKHZhbHVlID09ICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlRmxvYXQodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFpbi5vcHRpb25zW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIHBhcnNlUXVlcnkgKHFzdHIpIHtcbiAgICBsZXQgcXVlcnkgPSB7fTtcbiAgICBsZXQgYSA9IHFzdHIuc3BsaXQoJyYnKTtcbiAgICBmb3IgKGxldCBpIGluIGEpIHtcbiAgICAgICAgbGV0IGIgPSBhW2ldLnNwbGl0KCc9Jyk7XG4gICAgICAgIHF1ZXJ5W2RlY29kZVVSSUNvbXBvbmVudChiWzBdKV0gPSBkZWNvZGVVUklDb21wb25lbnQoYlsxXSk7XG4gICAgfVxuICAgIHJldHVybiBxdWVyeTtcbn1cbiIsIi8qXG5PcmlnaW5hbDogaHR0cHM6Ly9naXRodWIuY29tL3RhbmdyYW1zL3RhbmdyYW0tcGxheS9ibG9iL2doLXBhZ2VzL3NyYy9qcy9hZGRvbnMvTG9jYWxTdG9yYWdlLmpzXG5BdXRob3I6IExvdSBIdWFuZyAoQHNhaWtvZmlzaClcbiovXG5cbi8qKlxuICogIExvY2FsIHN0b3JhZ2VcbiAqXG4gKiAgUHJvdmlkZXMgYSBjb21tb24gaW50ZXJmYWNlIGZvciB0aGUgYXBwbGljYXRpb24gd2hlcmUgbW9kdWxlcyBjYW5cbiAqICByZXF1ZXN0IHN0b3JhZ2Ugb2YgdmFsdWVzIGFjcm9zcyBtdWx0aXBsZSB1c2VyIHNlc3Npb25zIHZpYSB0aGVcbiAqICBicm93c2VyJ3MgTG9jYWxTdG9yYWdlIEFQSS5cbiAqXG4gKiAgQnJvd3NlciBzdXBwb3J0IGlzIGdvb2QsIHNvIG5vIGZhbGxiYWNrcyBhcmUgaW1wbGVtZW50ZWQuXG4gKiAgVGhpcyBtb2R1bGUgbWFuYWdlcyBuYW1lc3BhY2luZyBmb3IgVGFuZ3JhbSBQbGF5IHRvIHByZXZlbnQgbmFtZVxuICogIGNvbGxpc2lvbnMgd2l0aCBvdGhlciBsaWJyYXJpZXMsIGJyb3dzZXIgZXh0ZW5zaW9ucywgZXRjLlxuICovXG5jb25zdCBMT0NBTF9TVE9SQUdFX1BSRUZJWCA9ICdnbHNsRWRpdG9yLSc7XG5cbmNvbnN0IExvY2FsU3RvcmFnZSA9IHtcbiAgICAvKipcbiAgICAgKiAgc2V0SXRlbSgpXG4gICAgICogIE5hbWVzcGFjZXMga2V5IG5hbWUgdG8gVGFuZ3JhbSBQbGF5IGFwcGxpY2F0aW9uIGFuZCBhZGRzXG4gICAgICogIHRoZSB2YWx1ZSB0byBMb2NhbFN0b3JhZ2UuXG4gICAgICovXG4gICAgc2V0SXRlbSAoa2V5LCB2YWx1ZSkge1xuICAgICAgICBpZiAod2luZG93LmxvY2FsU3RvcmFnZSkge1xuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKExPQ0FMX1NUT1JBR0VfUFJFRklYICsga2V5LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogIHB1c2hJdGVtKClcbiAgICAgKiAgU3RvcmUgdmFsdWVzIGFzIGFuIGFycmF5LiBJZiB0aGUga2V5IGRvZXNuJ3QgZXhpc3QgYXMgYW4gb2JqZWN0LCBjcmVhdGUgaXQuXG4gICAgICogIE5vdGUgdGhhdCB0aGlzIG92ZXJ3cml0ZXMgYW4gb2xkIHZhbHVlIGlmIGl0IGlzIHByZXNlbnQgYW5kIG5vdCBhIEpTT04gb2JqZWN0IVxuICAgICAqICBJZiBpdCBleGlzdHMsIHJldHJlaXZlIGl0LCBzZXJpYWxpemUgaXQgaW50byBKU09OLCBwdXNoIHRoZSBuZXcgdmFsdWUsXG4gICAgICogIHJlLWVuY29kZSB0byBhIHN0cmluZyBhbmQgdGhlbiBzZXQgaXQgYmFjayBpbiBsb2NhbFN0b3JhZ2UuXG4gICAgICogIE5vIG90aGVyIGFycmF5IG1ldGhvZHMgYXJlIGltcGxlbWVudGVkLiBJZiB5b3UgbmVlZCB0byBkZWxldGUgaXRlbXMsIGV0Y1xuICAgICAqICB0aGVuIHJldHJpZXZlIHRoZSBzdHJpbmcgYXMgbm9ybWFsLCBkbyB0aGUgd29yayBpbiB5b3VyIHNjcmlwdCwgYW5kIHRoZW5cbiAgICAgKiAgc2V0IGl0IHRvIHRoZSBuZXcgc3RyaW5naWZpZWQgYXJyYXkgaW5zdGVhZCBvZiBwdXNoaW5nIGl0LlxuICAgICAqL1xuICAgIHB1c2hJdGVtIChrZXksIHZhbHVlKSB7XG4gICAgICAgIGxldCBzdG9yZWQ7XG4gICAgICAgIHN0b3JlZCA9IHRoaXMuZ2V0SXRlbShrZXkpO1xuICAgICAgICAvLyBJbiBjYXNlIHRoZXJlIGlzIGEgcHJldmlvdXNseSBzdG9yZWQgaXRlbSBoZXJlIHRoYXQgaXMgbm90XG4gICAgICAgIC8vIHBhcnNlYWJsZSBKU09OLCBkb24ndCBmYWlsXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzdG9yZWQgPSBKU09OLnBhcnNlKHN0b3JlZCk7XG4gICAgICAgICAgICBzdG9yZWQuYXJyID0gc3RvcmVkLmFyciB8fCBbXTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgc3RvcmVkID0geyBhcnI6IFtdIH07XG4gICAgICAgIH1cbiAgICAgICAgc3RvcmVkLmFyci5wdXNoKHZhbHVlKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkoc3RvcmVkKSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqICBnZXRJdGVtKClcbiAgICAgKiAgUmV0cmlldmVzIHZhbHVlIGZvciB0aGUgZ2l2ZW4ga2V5IG5hbWUgYW5kIGFwcGxpY2F0aW9uIG5hbWVzcGFjZS5cbiAgICAgKi9cbiAgICBnZXRJdGVtIChrZXkpIHtcbiAgICAgICAgaWYgKHdpbmRvdy5sb2NhbFN0b3JhZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oTE9DQUxfU1RPUkFHRV9QUkVGSVggKyBrZXkpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqICByZW1vdmVJdGVtKClcbiAgICAgKiAgUmVtb3ZlcyBrZXktdmFsdWUgcGFpciB1bmRlciB0aGUgYXBwbGljYXRpb24gbmFtZXNwYWNlLlxuICAgICAqL1xuICAgIHJlbW92ZUl0ZW0gKGtleSkge1xuICAgICAgICBpZiAod2luZG93LmxvY2FsU3RvcmFnZSkge1xuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKExPQ0FMX1NUT1JBR0VfUFJFRklYICsga2V5KTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiAgY2xlYXIoKVxuICAgICAqICBMb29wcyB0aHJvdWdoIGFsbCB2YWx1ZXMgaW4gbG9jYWxTdG9yYWdlIHVuZGVyIHRoZSBhcHBsaWNhdGlvblxuICAgICAqICBuYW1lc3BhY2UgYW5kIHJlbW92ZXMgdGhlbSwgcHJlc2VydmluZyBvdGhlciBrZXktdmFsdWUgcGFpcnMgaW5cbiAgICAgKiAgbG9jYWxTdG9yYWdlLlxuICAgICAqL1xuICAgIGNsZWFyICgpIHtcbiAgICAgICAgaWYgKHdpbmRvdy5sb2NhbFN0b3JhZ2UpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiB3aW5kb3cubG9jYWxTdG9yYWdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5pbmRleE9mKExPQ0FMX1NUT1JBR0VfUFJFRklYKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oTE9DQUxfU1RPUkFHRV9QUkVGSVggKyBrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBMb2NhbFN0b3JhZ2U7XG4iLCJ2YXIgbGFzdFJlcGxheTtcblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVPblNlcnZlciAoZ2UsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCFnZS5jaGFuZ2UgJiYgbGFzdFJlcGxheSkge1xuICAgICAgICBjYWxsYmFjayhsYXN0UmVwbGF5KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBjb250ZW50ID0gZ2UuZ2V0Q29udGVudCgpO1xuICAgIGxldCBuYW1lID0gZ2UuZ2V0QXV0aG9yKCk7XG4gICAgbGV0IHRpdGxlID0gZ2UuZ2V0VGl0bGUoKTtcblxuICAgIGlmIChuYW1lICE9PSAnJyAmJiB0aXRsZSAhPT0gJycpIHtcbiAgICAgICAgbmFtZSArPSAnLScgKyB0aXRsZTtcbiAgICB9XG5cbiAgICAvLyBTVE9SRSBBIENPUFkgb24gU0VSVkVSXG4gICAgbGV0IHVybCA9ICdodHRwczovL3RoZWJvb2tvZnNoYWRlcnMuY29tOjgwODAvJztcbiAgICAvLyBsZXQgdXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC8nO1xuICAgIGxldCBkYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgZGF0YS5hcHBlbmQoJ2NvZGUnLCBjb250ZW50KTtcblxuICAgIGxldCBkYXRhVVJMID0gZ2Uuc2hhZGVyLmVsX2NhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpO1xuICAgIGxldCBibG9iQmluID0gYXRvYihkYXRhVVJMLnNwbGl0KCcsJylbMV0pO1xuICAgIGxldCBhcnJheSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmxvYkJpbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBhcnJheS5wdXNoKGJsb2JCaW4uY2hhckNvZGVBdChpKSk7XG4gICAgfVxuICAgIGxldCBmaWxlID0gbmV3IEJsb2IoW25ldyBVaW50OEFycmF5KGFycmF5KV0sIHsgdHlwZTogJ2ltYWdlL3BuZycgfSk7XG4gICAgZGF0YS5hcHBlbmQoJ2ltYWdlJywgZmlsZSk7XG5cbiAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oJ1BPU1QnLCB1cmwgKyAnc2F2ZScsIHRydWUpO1xuICAgIHhoci5vbmxvYWQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgbGV0IG5hbWUgPSB4aHIucmVzcG9uc2VUZXh0O1xuICAgICAgICAgICAgbGV0IHJlcGxheSA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FsbGJhY2socmVwbGF5KTtcbiAgICAgICAgICAgIGxhc3RSZXBsYXkgPSByZXBsYXk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHhoci5zZW5kKGRhdGEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3BlbkZyYW1lQXJ0d29yayhnbHNsRWRpdG9yLCBuYW1lLCB1cmwsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgT0ZfQkFTRV9BUElfVVJMID0gJ2h0dHBzOi8vYXBpLm9wZW5mcmFtZS5pby92MCc7XG4gICAgY29uc3QgT0ZfQkFTRV9BUFBfVVJMID0gJ2h0dHBzOi8vb3BlbmZyYW1lLmlvJztcbiAgICAvLyBjb25zdCBPRl9CQVNFX0FQSV9VUkwgPSAnaHR0cDovL2xvY2FsaG9zdDo4ODg4L2FwaSc7IC8vIGZvciBsb2NhbCB0ZXN0aW5nXG4gICAgLy8gY29uc3QgT0ZfQkFTRV9BUFBfVVJMID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCc7IC8vIGZvciBsb2NhbCB0ZXN0aW5nXG4gICAgbGV0IHRpdGxlID0gZ2xzbEVkaXRvci5nZXRUaXRsZSgpO1xuICAgIGxldCBhdXRob3IgPSBnbHNsRWRpdG9yLmdldEF1dGhvcigpO1xuICAgIGdsc2xFZGl0b3IuZ2V0T2ZUb2tlbigpLnRoZW4oaW5pdGlhdGVPZlJlcXVlc3QpO1xuXG4gICAgZnVuY3Rpb24gaW5pdGlhdGVPZlJlcXVlc3Qob2ZUb2tlbikge1xuICAgICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgKCkgPT4ge307XG4gICAgICAgIC8vIGFueXdoZXJlIGluIHRoZSBBUEkgdGhhdCB1c2VyIHtpZH0gaXMgbmVlZGVkLCB0aGUgYWxpYXMgJ2N1cnJlbnQnIGNhbiBiZSB1c2VkIGZvciB0aGUgbG9nZ2VkLWluIHVzZXJcbiAgICAgICAgeGhyLm9wZW4oJ1BPU1QnLCBgJHtPRl9CQVNFX0FQSV9VUkx9L3VzZXJzL2N1cnJlbnQvY3JlYXRlZF9hcnR3b3JrYCk7XG4gICAgICAgIC8vIHNldCBjb250ZW50IHR5cGUgdG8gSlNPTi4uLlxuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCcpO1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQXV0aG9yaXphdGlvbicsIG9mVG9rZW4pO1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignYWNjZXNzX3Rva2VuJywgb2ZUb2tlbik7XG5cbiAgICAgICAgLy8gVGhpcyBpcyBlc3NlbnRpYWwgaW4gb3JkZXIgdG8gaW5jbHVkZSBhdXRoIGNvb2tpZXM6XG4gICAgICAgIHhoci5vbmxvYWQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvbmxvYWQnLCBldmVudCk7XG4gICAgICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5zdGF0dXMgPj0gNDAwKSB7XG4gICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oYCR7T0ZfQkFTRV9BUFBfVVJMfS9sb2dpbmAsICdsb2dpbicsICd3aWR0aD01MDAsaGVpZ2h0PTYwMCcpO1xuICAgICAgICAgICAgICAgIGxldCBzdWNjZXNzTGlzdGVuZXIgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmRhdGEgPT09ICdzdWNjZXNzJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlT3BlbkZyYW1lQXJ0d29yayhnbHNsRWRpdG9yLCBuYW1lLCB1cmwsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHN1Y2Nlc3NMaXN0ZW5lcik7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHN1Y2Nlc3NMaXN0ZW5lciwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB4aHIub25lcnJvciA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1N0YXR1czonLGV2ZW50LmN1cnJlbnRUYXJnZXQuc3RhdHVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgeGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICAgICAgYXV0aG9yX25hbWU6IGF1dGhvcixcbiAgICAgICAgICAgIGlzX3B1YmxpYzogZmFsc2UsXG4gICAgICAgICAgICBmb3JtYXQ6ICdvcGVuZnJhbWUtZ2xzbHZpZXdlcicsXG4gICAgICAgICAgICB1cmw6ICdodHRwczovL3RoZWJvb2tvZnNoYWRlcnMuY29tL2xvZy8nICsgbmFtZSArICcuZnJhZycsXG4gICAgICAgICAgICB0aHVtYl91cmw6ICdodHRwczovL3RoZWJvb2tvZnNoYWRlcnMuY29tL2xvZy8nICsgbmFtZSArICcucG5nJ1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGdldERvbU9yaWdpbiAoZWwpIHtcbiAgICBjb25zdCBib3ggPSAoZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KSA/IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIDogeyB0b3A6IDAsIGxlZnQ6IDAgfTtcbiAgICBjb25zdCBkb2MgPSBlbCAmJiBlbC5vd25lckRvY3VtZW50O1xuICAgIGNvbnN0IGJvZHkgPSBkb2MuYm9keTtcbiAgICBjb25zdCB3aW4gPSBkb2MuZGVmYXVsdFZpZXcgfHwgZG9jLnBhcmVudFdpbmRvdyB8fCB3aW5kb3c7XG4gICAgY29uc3QgZG9jRWxlbSA9IGRvYy5kb2N1bWVudEVsZW1lbnQgfHwgYm9keS5wYXJlbnROb2RlO1xuICAgIGNvbnN0IGNsaWVudFRvcCA9IGRvY0VsZW0uY2xpZW50VG9wIHx8IGJvZHkuY2xpZW50VG9wIHx8IDA7IC8vIGJvcmRlciBvbiBodG1sIG9yIGJvZHkgb3IgYm90aFxuICAgIGNvbnN0IGNsaWVudExlZnQgPSBkb2NFbGVtLmNsaWVudExlZnQgfHwgYm9keS5jbGllbnRMZWZ0IHx8IDA7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBsZWZ0OiBib3gubGVmdCArICh3aW4ucGFnZVhPZmZzZXQgfHwgZG9jRWxlbS5zY3JvbGxMZWZ0KSAtIGNsaWVudExlZnQsXG4gICAgICAgIHRvcDogYm94LnRvcCArICh3aW4ucGFnZVlPZmZzZXQgfHwgZG9jRWxlbS5zY3JvbGxUb3ApIC0gY2xpZW50VG9wXG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERldmljZVBpeGVsUmF0aW8gKGN0eCkge1xuICAgIGxldCBkZXZpY2VQaXhlbFJhdGlvID0gd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMTtcbiAgICBsZXQgYmFja2luZ1N0b3JlUmF0aW8gPSBjdHgud2Via2l0QmFja2luZ1N0b3JlUGl4ZWxSYXRpbyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5tb3pCYWNraW5nU3RvcmVQaXhlbFJhdGlvIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lm1zQmFja2luZ1N0b3JlUGl4ZWxSYXRpbyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5vQmFja2luZ1N0b3JlUGl4ZWxSYXRpbyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iYWNraW5nU3RvcmVQaXhlbFJhdGlvIHx8IDE7XG4gICAgcmV0dXJuIGRldmljZVBpeGVsUmF0aW8gLyBiYWNraW5nU3RvcmVSYXRpbztcbn1cbiIsIlxuZXhwb3J0IGZ1bmN0aW9uIGlzQ29tbWVudGVkKGNtLCBuTGluZSwgbWF0Y2gpIHtcbiAgICBsZXQgdG9rZW4gPSBjbS5nZXRUb2tlbkF0KHsgbGluZTogbkxpbmUsIGNoOiBtYXRjaC5pbmRleCB9KTtcbiAgICBpZiAodG9rZW4gJiYgdG9rZW4udHlwZSkge1xuICAgICAgICByZXR1cm4gdG9rZW4udHlwZSA9PT0gJ2NvbW1lbnQnO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0xpbmVBZnRlck1haW4oY20sIG5MaW5lKSB7XG4gICAgbGV0IHRvdGFsTGluZXMgPSBjbS5nZXREb2MoKS5zaXplO1xuICAgIGxldCB2b2lkUkUgPSBuZXcgUmVnRXhwKCd2b2lkIG1haW5cXFxccypcXFxcKFxcXFxzKlt2b2lkXSpcXFxcKScsICdpJyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuTGluZSAmJiBpIDwgdG90YWxMaW5lczsgaSsrKSB7XG4gICAgICAgIC8vIERvIG5vdCBzdGFydCB1bnRpbCBiZWluZyBpbnNpZGUgdGhlIG1haW4gZnVuY3Rpb25cbiAgICAgICAgbGV0IHZvaWRNYXRjaCA9IHZvaWRSRS5leGVjKGNtLmdldExpbmUoaSkpO1xuICAgICAgICBpZiAodm9pZE1hdGNoKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRWYXJpYWJsZVR5cGUoY20sIHNWYXJpYWJsZSkge1xuICAgIGxldCBuTGluZXMgPSBjbS5nZXREb2MoKS5zaXplO1xuXG4gICAgLy8gU2hvdyBsaW5lIHdoZXJlIHRoZSB2YWx1ZSBvZiB0aGUgdmFyaWFibGUgaXMgYmVlbiBhc2lnbmVkXG4gICAgbGV0IHVuaWZvcm1SRSA9IG5ldyBSZWdFeHAoJ1xcXFxzKnVuaWZvcm1cXFxccysoZmxvYXR8dmVjMnx2ZWMzfHZlYzQpXFxcXHMrJyArIHNWYXJpYWJsZSArICdcXFxccyo7Jyk7XG4gICAgbGV0IHZvaWRSRSA9IG5ldyBSZWdFeHAoJ3ZvaWQgbWFpblxcXFxzKlxcXFwoXFxcXHMqW3ZvaWRdKlxcXFwpJywgJ2knKTtcbiAgICBsZXQgdm9pZElOID0gZmFsc2U7XG4gICAgbGV0IGNvbnN0cnVjdFJFID0gbmV3IFJlZ0V4cCgnKGZsb2F0fHZlY1xcXFxkKVxcXFxzKygnICsgc1ZhcmlhYmxlICsgJylcXFxccypbO10/JywgJ2knKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5MaW5lczsgaSsrKSB7XG4gICAgICAgIGlmICghdm9pZElOKSB7XG4gICAgICAgICAgICAvLyBEbyBub3Qgc3RhcnQgdW50aWwgYmVpbmcgaW5zaWRlIHRoZSBtYWluIGZ1bmN0aW9uXG4gICAgICAgICAgICBsZXQgdm9pZE1hdGNoID0gdm9pZFJFLmV4ZWMoY20uZ2V0TGluZShpKSk7XG4gICAgICAgICAgICBpZiAodm9pZE1hdGNoKSB7XG4gICAgICAgICAgICAgICAgdm9pZElOID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IHVuaWZvcm1NYXRjaCA9IHVuaWZvcm1SRS5leGVjKGNtLmdldExpbmUoaSkpO1xuICAgICAgICAgICAgICAgIGlmICh1bmlmb3JtTWF0Y2ggJiYgIWlzQ29tbWVudGVkKGNtLCBpLCB1bmlmb3JtTWF0Y2gpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmlmb3JtTWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGNvbnN0cnVjdE1hdGNoID0gY29uc3RydWN0UkUuZXhlYyhjbS5nZXRMaW5lKGkpKTtcbiAgICAgICAgICAgIGlmIChjb25zdHJ1Y3RNYXRjaCAmJiBjb25zdHJ1Y3RNYXRjaFsxXSAmJiAhaXNDb21tZW50ZWQoY20sIGksIGNvbnN0cnVjdE1hdGNoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb25zdHJ1Y3RNYXRjaFsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gJ25vbmUnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2hhZGVyRm9yVHlwZVZhckluTGluZShjbSwgc1R5cGUsIHNWYXJpYWJsZSwgbkxpbmUpIHtcbiAgICBsZXQgZnJhZyA9ICcnO1xuICAgIGxldCBvZmZzZXQgPSAxO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbkxpbmUgKyAxICYmIGkgPCBjbS5nZXREb2MoKS5zaXplOyBpKyspIHtcbiAgICAgICAgaWYgKGNtLmdldExpbmUoaSkpIHtcbiAgICAgICAgICAgIGZyYWcgKz0gY20uZ2V0TGluZShpKSArICdcXG4nO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnJhZyArPSAnXFx0Z2xfRnJhZ0NvbG9yID0gJztcbiAgICBpZiAoc1R5cGUgPT09ICdmbG9hdCcpIHtcbiAgICAgICAgZnJhZyArPSAndmVjNCh2ZWMzKCcgKyBzVmFyaWFibGUgKyAnKSwxLiknO1xuICAgIH1cbiAgICBlbHNlIGlmIChzVHlwZSA9PT0gJ3ZlYzInKSB7XG4gICAgICAgIGZyYWcgKz0gJ3ZlYzQodmVjMygnICsgc1ZhcmlhYmxlICsgJywwLiksMS4pJztcbiAgICB9XG4gICAgZWxzZSBpZiAoc1R5cGUgPT09ICd2ZWMzJykge1xuICAgICAgICBmcmFnICs9ICd2ZWM0KCcgKyBzVmFyaWFibGUgKyAnLDEuKSc7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNUeXBlID09PSAndmVjNCcpIHtcbiAgICAgICAgZnJhZyArPSBzVmFyaWFibGU7XG4gICAgfVxuICAgIGZyYWcgKz0gJztcXG59XFxuJztcblxuICAgIHJldHVybiBmcmFnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVzdWx0UmFuZ2UodGVzdF9yZXN1bHRzKSB7XG4gICAgbGV0IG1pbl9tcyA9ICcxMDAwMDAwMC4wJztcbiAgICBsZXQgbWluX2xpbmUgPSAwO1xuICAgIGxldCBtYXhfbXMgPSAnMC4wJztcbiAgICBsZXQgbWF4X2xpbmUgPSAwO1xuICAgIGZvciAobGV0IGkgaW4gdGVzdF9yZXN1bHRzKSB7XG4gICAgICAgIGlmICh0ZXN0X3Jlc3VsdHNbaV0ubXMgPCBtaW5fbXMpIHtcbiAgICAgICAgICAgIG1pbl9tcyA9IHRlc3RfcmVzdWx0c1tpXS5tcztcbiAgICAgICAgICAgIG1pbl9saW5lID0gdGVzdF9yZXN1bHRzW2ldLmxpbmU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRlc3RfcmVzdWx0c1tpXS5tcyA+IG1heF9tcykge1xuICAgICAgICAgICAgbWF4X21zID0gdGVzdF9yZXN1bHRzW2ldLm1zO1xuICAgICAgICAgICAgbWF4X2xpbmUgPSB0ZXN0X3Jlc3VsdHNbaV0ubGluZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyBtaW46e2xpbmU6IG1pbl9saW5lLCBtczogbWluX21zfSwgbWF4OntsaW5lOiBtYXhfbGluZSwgbXM6IG1heF9tc30gfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE1lZGlhbih2YWx1ZXMpIHtcbiAgICB2YWx1ZXMuc29ydCggZnVuY3Rpb24oYSxiKSB7cmV0dXJuIGEgLSBiO30gKTtcblxuICAgIHZhciBoYWxmID0gTWF0aC5mbG9vcih2YWx1ZXMubGVuZ3RoLzIpO1xuXG4gICAgaWYodmFsdWVzLmxlbmd0aCAlIDIpXG4gICAgICAgIHJldHVybiB2YWx1ZXNbaGFsZl07XG4gICAgZWxzZVxuICAgICAgICByZXR1cm4gKHZhbHVlc1toYWxmLTFdICsgdmFsdWVzW2hhbGZdKSAvIDIuMDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERlbHRhU3VtKHRlc3RfcmVzdWx0cykge1xuICAgIGxldCB0b3RhbCA9IDAuMDtcbiAgICBmb3IgKGxldCBpIGluIHRlc3RfcmVzdWx0cykge1xuICAgICAgICBpZiAodGVzdF9yZXN1bHRzW2ldLmRlbHRhID4gMCkge1xuICAgICAgICAgICAgdG90YWwgKz0gdGVzdF9yZXN1bHRzW2ldLmRlbHRhO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0b3RhbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEhpdHModGVzdF9yZXN1bHRzKSB7XG4gICAgbGV0IHRvdGFsID0gMDtcbiAgICBmb3IgKGxldCBpIGluIHRlc3RfcmVzdWx0cykge1xuICAgICAgICBpZiAodGVzdF9yZXN1bHRzW2ldLmRlbHRhID4gMCkge1xuICAgICAgICAgICAgdG90YWwrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG90YWw7XG59IiwiLypcbiAqIE9yaWdpbmFsIGNvZGUgZnJvbTogaHR0cHM6Ly90d2l0dGVyLmNvbS9ibHVyc3BsaW5lIC8gaHR0cHM6Ly9naXRodWIuY29tL3p6ODVcbiAqIFNlZSBwb3N0IEAgaHR0cDovL3d3dy5sYWI0Z2FtZXMubmV0L3p6ODUvYmxvZy8yMDE0LzExLzE1L3Jlc2l6aW5nLW1vdmluZy1zbmFwcGluZy13aW5kb3dzLXdpdGgtanMtY3NzL1xuICovXG5cbmltcG9ydCB7IHN1YnNjcmliZU1peGluIH0gZnJvbSAnLi9taXhpbic7XG5cbi8vIFRocmVzaG9sZHNcbnZhciBGVUxMU0NSRUVOX01BUkdJTlMgPSAtMzA7XG52YXIgTUFSR0lOUyA9IDEwO1xuXG5mdW5jdGlvbiBzZXRCb3VuZHMoZWxlbWVudCwgeCwgeSwgdywgaCkge1xuICAgIGVsZW1lbnQuc3R5bGUubGVmdCA9IHggKyAncHgnO1xuICAgIGVsZW1lbnQuc3R5bGUudG9wID0geSArICdweCc7XG4gICAgZWxlbWVudC5zdHlsZS53aWR0aCA9IHcgKyAncHgnO1xuICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gaCArICdweCc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdWJzY3JpYmVJbnRlcmFjdGl2ZURvbSAoZG9tLCBvcHRpb25zKSB7XG4gICAgc3Vic2NyaWJlTWl4aW4oZG9tKTtcblxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIG9wdGlvbnMucmVzaXplID0gb3B0aW9ucy5yZXNpemUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucmVzaXplIDogZmFsc2U7XG4gICAgb3B0aW9ucy5tb3ZlID0gb3B0aW9ucy5tb3ZlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1vdmUgOiBmYWxzZTtcbiAgICBvcHRpb25zLnNuYXAgPSBvcHRpb25zLnNuYXAgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc25hcCA6IGZhbHNlO1xuXG4gICAgLy8gTWluaW11bSByZXNpemFibGUgYXJlYVxuICAgIHZhciBtaW5XaWR0aCA9IDEwMDtcbiAgICB2YXIgbWluSGVpZ2h0ID0gMTAwO1xuXG4gICAgLy8gRW5kIG9mIHdoYXQncyBjb25maWd1cmFibGUuXG4gICAgdmFyIGNsaWNrZWQgPSBudWxsO1xuICAgIHZhciBvblJpZ2h0RWRnZSwgb25Cb3R0b21FZGdlLCBvbkxlZnRFZGdlLCBvblRvcEVkZ2U7XG5cbiAgICB2YXIgcmlnaHRTY3JlZW5FZGdlLCBib3R0b21TY3JlZW5FZGdlO1xuXG4gICAgdmFyIHByZVNuYXBwZWQ7XG5cbiAgICB2YXIgYiwgeCwgeTtcblxuICAgIHZhciByZWRyYXcgPSBmYWxzZTtcblxuICAgIHZhciBnaG9zdGRvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGdob3N0ZG9tLmNsYXNzTmFtZSA9ICdnaG9zdGRvbSc7XG5cbiAgICBpZiAob3B0aW9ucy5zbmFwKSB7XG4gICAgICAgIGRvbS5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGdob3N0ZG9tKTtcbiAgICB9XG5cbiAgICAvLyBNb3VzZSBldmVudHNcbiAgICBkb20uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Nb3VzZURvd24pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uTW92ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uVXApO1xuXG4gICAgLy8gVG91Y2ggZXZlbnRzXG4gICAgZG9tLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvblRvdWNoRG93bik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgb25Ub3VjaE1vdmUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgb25Ub3VjaEVuZCk7XG5cbiAgICBmdW5jdGlvbiBoaW50SGlkZSgpIHtcbiAgICAgICAgc2V0Qm91bmRzKGdob3N0ZG9tLCBiLmxlZnQsIGIudG9wLCBiLndpZHRoLCBiLmhlaWdodCk7XG4gICAgICAgIGdob3N0ZG9tLnN0eWxlLm9wYWNpdHkgPSAwO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uVG91Y2hEb3duIChldmVudCkge1xuICAgICAgICBvbkRvd24oZXZlbnQudG91Y2hlc1swXSk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvblRvdWNoTW92ZSAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIG9uTW92ZShldmVudC50b3VjaGVzWzBdKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvblRvdWNoRW5kIChldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQudG91Y2hlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIG9uVXAoZS5jaGFuZ2VkVG91Y2hlc1swXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbk1vdXNlRG93biAoZXZlbnQpIHtcbiAgICAgICAgb25Eb3duKGV2ZW50KTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uRG93biAoZXZlbnQpIHtcbiAgICAgICAgY2FsYyhldmVudCk7XG4gICAgICAgIHZhciBpc1Jlc2l6aW5nID0gb3B0aW9ucy5yZXNpemUgJiYgKG9uUmlnaHRFZGdlIHx8IG9uQm90dG9tRWRnZSB8fCBvblRvcEVkZ2UgfHwgb25MZWZ0RWRnZSk7XG4gICAgICAgIGNsaWNrZWQgPSB7XG4gICAgICAgICAgICB4OiB4LFxuICAgICAgICAgICAgeTogeSxcbiAgICAgICAgICAgIGN4OiBldmVudC5jbGllbnRYLFxuICAgICAgICAgICAgY3k6IGV2ZW50LmNsaWVudFksXG4gICAgICAgICAgICB3OiBiLndpZHRoLFxuICAgICAgICAgICAgaDogYi5oZWlnaHQsXG4gICAgICAgICAgICBpc1Jlc2l6aW5nOiBpc1Jlc2l6aW5nLFxuICAgICAgICAgICAgaXNNb3Zpbmc6ICFpc1Jlc2l6aW5nICYmIGNhbk1vdmUoKSxcbiAgICAgICAgICAgIG9uVG9wRWRnZTogb25Ub3BFZGdlLFxuICAgICAgICAgICAgb25MZWZ0RWRnZTogb25MZWZ0RWRnZSxcbiAgICAgICAgICAgIG9uUmlnaHRFZGdlOiBvblJpZ2h0RWRnZSxcbiAgICAgICAgICAgIG9uQm90dG9tRWRnZTogb25Cb3R0b21FZGdlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FuTW92ZSgpIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMubW92ZSAmJiAoeCA+IDAgJiYgeCA8IGIud2lkdGggJiYgeSA+IDAgJiYgeSA8IGIuaGVpZ2h0KTsvLyAmJiB5IDwgMzA7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FsYyAoZXZlbnQpIHtcbiAgICAgICAgYiA9IGRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgeCA9IGV2ZW50LmNsaWVudFggLSBiLmxlZnQ7XG4gICAgICAgIHkgPSBldmVudC5jbGllbnRZIC0gYi50b3A7XG5cbiAgICAgICAgb25Ub3BFZGdlID0geSA8IE1BUkdJTlM7XG4gICAgICAgIG9uTGVmdEVkZ2UgPSB4IDwgTUFSR0lOUztcbiAgICAgICAgb25SaWdodEVkZ2UgPSB4ID49IGIud2lkdGggLSBNQVJHSU5TO1xuICAgICAgICBvbkJvdHRvbUVkZ2UgPSB5ID49IGIuaGVpZ2h0IC0gTUFSR0lOUztcblxuICAgICAgICByaWdodFNjcmVlbkVkZ2UgPSB3aW5kb3cuaW5uZXJXaWR0aCAtIE1BUkdJTlM7XG4gICAgICAgIGJvdHRvbVNjcmVlbkVkZ2UgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSBNQVJHSU5TO1xuICAgIH1cblxuICAgIHZhciBlO1xuXG4gICAgZnVuY3Rpb24gb25Nb3ZlKGV2ZW50KSB7XG4gICAgICAgIGNhbGMoZXZlbnQpO1xuICAgICAgICBlID0gZXZlbnQ7XG4gICAgICAgIHJlZHJhdyA9IHRydWU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYW5pbWF0ZSgpIHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xuXG4gICAgICAgIGlmICghcmVkcmF3KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmVkcmF3ID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKGNsaWNrZWQgJiYgY2xpY2tlZC5pc1Jlc2l6aW5nKSB7XG4gICAgICAgICAgICBpZiAoY2xpY2tlZC5vblJpZ2h0RWRnZSkge1xuICAgICAgICAgICAgICAgIGRvbS5zdHlsZS53aWR0aCA9IE1hdGgubWF4KHgsIG1pbldpZHRoKSArICdweCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2xpY2tlZC5vbkJvdHRvbUVkZ2UpIHtcbiAgICAgICAgICAgICAgICBkb20uc3R5bGUuaGVpZ2h0ID0gTWF0aC5tYXgoeSwgbWluSGVpZ2h0KSArICdweCc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjbGlja2VkLm9uTGVmdEVkZ2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFdpZHRoID0gTWF0aC5tYXgoY2xpY2tlZC5jeCAtIGUuY2xpZW50WCArIGNsaWNrZWQudywgbWluV2lkdGgpO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50V2lkdGggPiBtaW5XaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICBkb20uc3R5bGUud2lkdGggPSBjdXJyZW50V2lkdGggKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICBkb20uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3JpZ2h0Jyk7XG4gICAgICAgICAgICAgICAgICAgIGRvbS5zdHlsZS5sZWZ0ID0gZS5jbGllbnRYICsgJ3B4JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjbGlja2VkLm9uVG9wRWRnZSkge1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50SGVpZ2h0ID0gTWF0aC5tYXgoY2xpY2tlZC5jeSAtIGUuY2xpZW50WSArIGNsaWNrZWQuaCwgbWluSGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEhlaWdodCA+IG1pbkhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICBkb20uc3R5bGUuaGVpZ2h0ID0gY3VycmVudEhlaWdodCArICdweCc7XG4gICAgICAgICAgICAgICAgICAgIGRvbS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnYm90dG9tJyk7XG4gICAgICAgICAgICAgICAgICAgIGRvbS5zdHlsZS50b3AgPSBlLmNsaWVudFkgKyAncHgnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaGludEhpZGUoKTtcbiAgICAgICAgICAgIGRvbS50cmlnZ2VyKCdyZXNpemUnLCB7IGZpbmlzaDogZmFsc2UsIGVsOiBkb20gfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2xpY2tlZCAmJiBjbGlja2VkLmlzTW92aW5nKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5zbmFwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGIudG9wIDwgRlVMTFNDUkVFTl9NQVJHSU5TIHx8IGIubGVmdCA8IEZVTExTQ1JFRU5fTUFSR0lOUyB8fCBiLnJpZ2h0ID4gd2luZG93LmlubmVyV2lkdGggLSBGVUxMU0NSRUVOX01BUkdJTlMgfHwgYi5ib3R0b20gPiB3aW5kb3cuaW5uZXJIZWlnaHQgLSBGVUxMU0NSRUVOX01BUkdJTlMpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0Qm91bmRzKGdob3N0ZG9tLCAwLCAwLCB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgZ2hvc3Rkb20uc3R5bGUub3BhY2l0eSA9IDAuMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYi50b3AgPCBNQVJHSU5TKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEJvdW5kcyhnaG9zdGRvbSwgMCwgMCwgd2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCAvIDIpO1xuICAgICAgICAgICAgICAgICAgICBnaG9zdGRvbS5zdHlsZS5vcGFjaXR5ID0gMC4yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChiLmxlZnQgPCBNQVJHSU5TKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEJvdW5kcyhnaG9zdGRvbSwgMCwgMCwgd2luZG93LmlubmVyV2lkdGggLyAyLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBnaG9zdGRvbS5zdHlsZS5vcGFjaXR5ID0gMC4yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChiLnJpZ2h0ID4gcmlnaHRTY3JlZW5FZGdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEJvdW5kcyhnaG9zdGRvbSwgd2luZG93LmlubmVyV2lkdGggLyAyLCAwLCB3aW5kb3cuaW5uZXJXaWR0aCAvIDIsIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIGdob3N0ZG9tLnN0eWxlLm9wYWNpdHkgPSAwLjI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGIuYm90dG9tID4gYm90dG9tU2NyZWVuRWRnZSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRCb3VuZHMoZ2hvc3Rkb20sIDAsIHdpbmRvdy5pbm5lckhlaWdodCAvIDIsIHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJXaWR0aCAvIDIpO1xuICAgICAgICAgICAgICAgICAgICBnaG9zdGRvbS5zdHlsZS5vcGFjaXR5ID0gMC4yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaGludEhpZGUoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAocHJlU25hcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRCb3VuZHMoZG9tLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuY2xpZW50WCAtIHByZVNuYXBwZWQud2lkdGggLyAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuY2xpZW50WSAtIE1hdGgubWluKGNsaWNrZWQueSwgcHJlU25hcHBlZC5oZWlnaHQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZVNuYXBwZWQud2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlU25hcHBlZC5oZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gbW92aW5nXG4gICAgICAgICAgICAgICAgZG9tLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdyaWdodCcpO1xuICAgICAgICAgICAgICAgIGRvbS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnYm90dG9tJyk7XG4gICAgICAgICAgICAgICAgZG9tLnN0eWxlLnRvcCA9IChlLmNsaWVudFkgLSBjbGlja2VkLnkpICsgJ3B4JztcbiAgICAgICAgICAgICAgICBkb20uc3R5bGUubGVmdCA9IChlLmNsaWVudFggLSBjbGlja2VkLngpICsgJ3B4JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCB4ID0gKGUuY2xpZW50WCAtIGNsaWNrZWQueCk7XG4gICAgICAgICAgICAgICAgbGV0IHkgPSAoZS5jbGllbnRZIC0gY2xpY2tlZC55KTtcblxuICAgICAgICAgICAgICAgIGlmICh4IDwgMCkge1xuICAgICAgICAgICAgICAgICAgICB4ID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoeSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgeSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHggKyBkb20ub2Zmc2V0V2lkdGggPiB3aW5kb3cuaW5uZXJXaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICB4ID0gd2luZG93LmlubmVyV2lkdGggLSBkb20ub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHkgKyBkb20ub2Zmc2V0SGVpZ2h0ID4gd2luZG93LmlubmVySGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIHkgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSBkb20ub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRvbS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgncmlnaHQnKTtcbiAgICAgICAgICAgICAgICBkb20uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2JvdHRvbScpO1xuICAgICAgICAgICAgICAgIGRvbS5zdHlsZS5sZWZ0ID0geCArICdweCc7XG4gICAgICAgICAgICAgICAgZG9tLnN0eWxlLnRvcCA9IHkgKyAncHgnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkb20udHJpZ2dlcignbW92ZScsIHsgZmluaXNoOiBmYWxzZSwgZWw6IGRvbSB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGlzIGNvZGUgZXhlY3V0ZXMgd2hlbiBtb3VzZSBtb3ZlcyB3aXRob3V0IGNsaWNraW5nXG5cbiAgICAgICAgLy8gc3R5bGUgY3Vyc29yXG4gICAgICAgIGlmIChvcHRpb25zLnJlc2l6ZSAmJiAob25SaWdodEVkZ2UgJiYgb25Cb3R0b21FZGdlIHx8IG9uTGVmdEVkZ2UgJiYgb25Ub3BFZGdlKSkge1xuICAgICAgICAgICAgZG9tLnN0eWxlLmN1cnNvciA9ICdud3NlLXJlc2l6ZSc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucy5yZXNpemUgJiYgKG9uUmlnaHRFZGdlICYmIG9uVG9wRWRnZSB8fCBvbkJvdHRvbUVkZ2UgJiYgb25MZWZ0RWRnZSkpIHtcbiAgICAgICAgICAgIGRvbS5zdHlsZS5jdXJzb3IgPSAnbmVzdy1yZXNpemUnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMucmVzaXplICYmIChvblJpZ2h0RWRnZSB8fCBvbkxlZnRFZGdlKSkge1xuICAgICAgICAgICAgZG9tLnN0eWxlLmN1cnNvciA9ICdldy1yZXNpemUnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMucmVzaXplICYmIChvbkJvdHRvbUVkZ2UgfHwgb25Ub3BFZGdlKSkge1xuICAgICAgICAgICAgZG9tLnN0eWxlLmN1cnNvciA9ICducy1yZXNpemUnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNhbk1vdmUoKSkge1xuICAgICAgICAgICAgZG9tLnN0eWxlLmN1cnNvciA9ICdtb3ZlJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRvbS5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYW5pbWF0ZSgpO1xuXG4gICAgZnVuY3Rpb24gb25VcChlKSB7XG4gICAgICAgIGNhbGMoZSk7XG5cbiAgICAgICAgaWYgKGNsaWNrZWQgJiYgY2xpY2tlZC5pc1Jlc2l6aW5nKSB7XG4gICAgICAgICAgICBkb20udHJpZ2dlcigncmVzaXplJywgeyBmaW5pc2g6IHRydWUsIGVsOiBkb20gfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy5zbmFwICYmIGNsaWNrZWQgJiYgY2xpY2tlZC5pc01vdmluZykge1xuICAgICAgICAgICAgLy8gU25hcFxuICAgICAgICAgICAgdmFyIHNuYXBwZWQgPSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IGIud2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBiLmhlaWdodFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKGIudG9wIDwgRlVMTFNDUkVFTl9NQVJHSU5TIHx8IGIubGVmdCA8IEZVTExTQ1JFRU5fTUFSR0lOUyB8fCBiLnJpZ2h0ID4gd2luZG93LmlubmVyV2lkdGggLSBGVUxMU0NSRUVOX01BUkdJTlMgfHwgYi5ib3R0b20gPiB3aW5kb3cuaW5uZXJIZWlnaHQgLSBGVUxMU0NSRUVOX01BUkdJTlMpIHtcbiAgICAgICAgICAgICAgICBzZXRCb3VuZHMoZG9tLCAwLCAwLCB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBwcmVTbmFwcGVkID0gc25hcHBlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGIudG9wIDwgTUFSR0lOUykge1xuICAgICAgICAgICAgICAgIHNldEJvdW5kcyhkb20sIDAsIDAsIHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQgLyAyKTtcbiAgICAgICAgICAgICAgICBwcmVTbmFwcGVkID0gc25hcHBlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGIubGVmdCA8IE1BUkdJTlMpIHtcbiAgICAgICAgICAgICAgICBzZXRCb3VuZHMoZG9tLCAwLCAwLCB3aW5kb3cuaW5uZXJXaWR0aCAvIDIsIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gICAgICAgICAgICAgICAgcHJlU25hcHBlZCA9IHNuYXBwZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChiLnJpZ2h0ID4gcmlnaHRTY3JlZW5FZGdlKSB7XG4gICAgICAgICAgICAgICAgc2V0Qm91bmRzKGRvbSwgd2luZG93LmlubmVyV2lkdGggLyAyLCAwLCB3aW5kb3cuaW5uZXJXaWR0aCAvIDIsIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gICAgICAgICAgICAgICAgcHJlU25hcHBlZCA9IHNuYXBwZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChiLmJvdHRvbSA+IGJvdHRvbVNjcmVlbkVkZ2UpIHtcbiAgICAgICAgICAgICAgICBzZXRCb3VuZHMoZG9tLCAwLCB3aW5kb3cuaW5uZXJIZWlnaHQgLyAyLCB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVyV2lkdGggLyAyKTtcbiAgICAgICAgICAgICAgICBwcmVTbmFwcGVkID0gc25hcHBlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHByZVNuYXBwZWQgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGludEhpZGUoKTtcbiAgICAgICAgICAgIGRvbS50cmlnZ2VyKCdtb3ZlJywgeyBmaW5pc2g6IHRydWUsIGVsOiBkb20gfSk7XG4gICAgICAgICAgICBkb20udHJpZ2dlcigncmVzaXplJywgeyBmaW5pc2g6IHRydWUsIGVsOiBkb20gfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2xpY2tlZCA9IG51bGw7XG4gICAgfVxuXG4gICAgZG9tLnNuYXBSaWdodCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNuYXBwZWQgPSB7XG4gICAgICAgICAgICB3aWR0aDogZG9tLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBkb20uaGVpZ2h0XG4gICAgICAgIH07XG5cbiAgICAgICAgc2V0Qm91bmRzKGRvbSwgd2luZG93LmlubmVyV2lkdGggLyAyLCAwLCB3aW5kb3cuaW5uZXJXaWR0aCAvIDIsIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gICAgICAgIHByZVNuYXBwZWQgPSBzbmFwcGVkO1xuICAgICAgICAvLyBoaW50SGlkZSgpO1xuICAgICAgICBkb20udHJpZ2dlcignbW92ZScsIHsgZmluaXNoOiB0cnVlLCBlbDogZG9tIH0pO1xuICAgICAgICBkb20udHJpZ2dlcigncmVzaXplJywgeyBmaW5pc2g6IHRydWUsIGVsOiBkb20gfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRvbTtcbn1cbiIsIi8qIGdsb2JhbCBNZWRpYVJlY29yZGVyIFxuQXV0aG9yOiBCcmV0dCBDYW1wZXIgKEBwcm9mZXNzb3JsZW1lemEpXG5VUkw6IGh0dHBzOi8vZ2l0aHViLmNvbS90YW5ncmFtcy90YW5ncmFtL2Jsb2IvbWFzdGVyL3NyYy91dGlscy9tZWRpYV9jYXB0dXJlLmpzXG4qL1xuaW1wb3J0IHtjcmVhdGVPYmplY3RVUkx9IGZyb20gJy4vdXJscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1lZGlhQ2FwdHVyZSB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5xdWV1ZV9zY3JlZW5zaG90ID0gbnVsbDtcbiAgICAgICAgdGhpcy52aWRlb19jYXB0dXJlID0gbnVsbDtcbiAgICB9XG5cbiAgICBzZXRDYW52YXMgKGNhbnZhcykge1xuICAgICAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcbiAgICB9XG5cbiAgICAvLyBUYWtlIGEgc2NyZWVuc2hvdCwgcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBzY3JlZW5zaG90IGRhdGEgd2hlbiBhdmFpbGFibGVcbiAgICBzY3JlZW5zaG90ICgpIHtcbiAgICAgICAgaWYgKHRoaXMucXVldWVfc2NyZWVuc2hvdCAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZV9zY3JlZW5zaG90LnByb21pc2U7IC8vIG9ubHkgY2FwdHVyZSBvbmUgc2NyZWVuc2hvdCBhdCBhIHRpbWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdpbGwgcmVzb2x2ZSBvbmNlIHJlbmRlcmluZyBpcyBjb21wbGV0ZSBhbmQgcmVuZGVyIGJ1ZmZlciBpcyBjYXB0dXJlZFxuICAgICAgICB0aGlzLnF1ZXVlX3NjcmVlbnNob3QgPSB7fTtcbiAgICAgICAgdGhpcy5xdWV1ZV9zY3JlZW5zaG90LnByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnF1ZXVlX3NjcmVlbnNob3QucmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgICAgICAgICB0aGlzLnF1ZXVlX3NjcmVlbnNob3QucmVqZWN0ID0gcmVqZWN0O1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWVfc2NyZWVuc2hvdC5wcm9taXNlO1xuICAgIH1cblxuICAgIC8vIENhbGxlZCBhZnRlciByZW5kZXJpbmcsIGNhcHR1cmVzIHJlbmRlciBidWZmZXIgYW5kIHJlc29sdmVzIHByb21pc2Ugd2l0aCB0aGUgaW1hZ2UgZGF0YVxuICAgIGNvbXBsZXRlU2NyZWVuc2hvdCAoKSB7XG4gICAgICAgIGlmICh0aGlzLnF1ZXVlX3NjcmVlbnNob3QgIT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gR2V0IGRhdGEgVVJMLCBjb252ZXJ0IHRvIGJsb2JcbiAgICAgICAgICAgIC8vIFN0cmlwIGhvc3QvbWltZXR5cGUvZXRjLiwgY29udmVydCBiYXNlNjQgdG8gYmluYXJ5IHdpdGhvdXQgVVRGLTggbWFuZ2xpbmdcbiAgICAgICAgICAgIC8vIEFkYXB0ZWQgZnJvbTogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vdW5jb25lZC80MzcwODIyXG4gICAgICAgICAgICBjb25zdCB1cmwgPSB0aGlzLmNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpO1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF0b2IodXJsLnNsaWNlKDIyKSk7XG4gICAgICAgICAgICBjb25zdCBidWZmZXIgPSBuZXcgVWludDhBcnJheShkYXRhLmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBidWZmZXJbaV0gPSBkYXRhLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2J1ZmZlcl0sIHsgdHlwZTogJ2ltYWdlL3BuZycgfSk7XG5cbiAgICAgICAgICAgIC8vIFJlc29sdmUgd2l0aCBzY3JlZW5zaG90IGRhdGFcbiAgICAgICAgICAgIHRoaXMucXVldWVfc2NyZWVuc2hvdC5yZXNvbHZlKHsgdXJsLCBibG9iLCB0eXBlOiAncG5nJyB9KTtcbiAgICAgICAgICAgIHRoaXMucXVldWVfc2NyZWVuc2hvdCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTdGFydHMgY2FwdHVyaW5nIGEgdmlkZW8gc3RyZWFtIGZyb20gdGhlIGNhbnZhc1xuICAgIHN0YXJ0VmlkZW9DYXB0dXJlICgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cuTWVkaWFSZWNvcmRlciAhPT0gJ2Z1bmN0aW9uJyB8fCAhdGhpcy5jYW52YXMgfHwgdHlwZW9mIHRoaXMuY2FudmFzLmNhcHR1cmVTdHJlYW0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd3YXJuOiBWaWRlbyBjYXB0dXJlIChDYW52YXMuY2FwdHVyZVN0cmVhbSBhbmQvb3IgTWVkaWFSZWNvcmRlciBBUElzKSBub3Qgc3VwcG9ydGVkIGJ5IGJyb3dzZXInKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnZpZGVvX2NhcHR1cmUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd3YXJuOiBWaWRlbyBjYXB0dXJlIGFscmVhZHkgaW4gcHJvZ3Jlc3MsIGNhbGwgU2NlbmUuc3RvcFZpZGVvQ2FwdHVyZSgpIGZpcnN0Jyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTdGFydCBhIG5ldyBjYXB0dXJlXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgY2FwID0gdGhpcy52aWRlb19jYXB0dXJlID0ge307XG4gICAgICAgICAgICBjYXAuY2h1bmtzID0gW107XG4gICAgICAgICAgICBjYXAuc3RyZWFtID0gdGhpcy5jYW52YXMuY2FwdHVyZVN0cmVhbSgpO1xuICAgICAgICAgICAgY2FwLm9wdGlvbnMgPSB7IG1pbWVUeXBlOiAndmlkZW8vd2VibScgfTsgLy8gVE9ETzogc3VwcG9ydCBvdGhlciBmb3JtYXQgb3B0aW9uc1xuICAgICAgICAgICAgY2FwLm1lZGlhX3JlY29yZGVyID0gbmV3IE1lZGlhUmVjb3JkZXIoY2FwLnN0cmVhbSwgY2FwLm9wdGlvbnMpO1xuICAgICAgICAgICAgY2FwLm1lZGlhX3JlY29yZGVyLm9uZGF0YWF2YWlsYWJsZSA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC5kYXRhLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgY2FwLmNodW5rcy5wdXNoKGV2ZW50LmRhdGEpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFN0b3BwZWQgcmVjb3JkaW5nPyBDcmVhdGUgdGhlIGZpbmFsIGNhcHR1cmUgZmlsZSBibG9iXG4gICAgICAgICAgICAgICAgaWYgKGNhcC5yZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBibG9iID0gbmV3IEJsb2IoY2FwLmNodW5rcywgeyB0eXBlOiBjYXAub3B0aW9ucy5taW1lVHlwZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHVybCA9IGNyZWF0ZU9iamVjdFVSTChibG9iKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBFeHBsaWNpdGx5IHJlbW92ZSBhbGwgc3RyZWFtIHRyYWNrcywgYW5kIHNldCBvYmplY3RzIHRvIG51bGxcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhcC5zdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0cmFja3MgPSBjYXAuc3RyZWFtLmdldFRyYWNrcygpIHx8IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tzLmZvckVhY2godHJhY2sgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrLnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXAuc3RyZWFtLnJlbW92ZVRyYWNrKHRyYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhcC5zdHJlYW0gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBjYXAubWVkaWFfcmVjb3JkZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZGVvX2NhcHR1cmUgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhcC5yZXNvbHZlKHsgdXJsLCBibG9iLCB0eXBlOiAnd2VibScgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhcC5tZWRpYV9yZWNvcmRlci5zdGFydCgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLnZpZGVvX2NhcHR1cmUgPSBudWxsO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yOiBTY2VuZSB2aWRlbyBjYXB0dXJlIGZhaWxlZCcsIGUpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFN0b3BzIGNhcHR1cmluZyBhIHZpZGVvIHN0cmVhbSBmcm9tIHRoZSBjYW52YXMsIHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgdmlkZW8gd2hlbiBhdmFpbGFibGVcbiAgICBzdG9wVmlkZW9DYXB0dXJlICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnZpZGVvX2NhcHR1cmUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd3YXJuOiBObyBzY2VuZSB2aWRlbyBjYXB0dXJlIGluIHByb2dyZXNzLCBjYWxsIFNjZW5lLnN0YXJ0VmlkZW9DYXB0dXJlKCkgZmlyc3QnKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe30pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHJvbWlzZSB0aGF0IHdpbGwgcmVzb2x2ZSB3aGVuIGZpbmFsIHN0cmVhbSBpcyBhdmFpbGFibGVcbiAgICAgICAgdGhpcy52aWRlb19jYXB0dXJlLnByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnZpZGVvX2NhcHR1cmUucmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgICAgICAgICB0aGlzLnZpZGVvX2NhcHR1cmUucmVqZWN0ID0gcmVqZWN0O1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTdG9wIHJlY29yZGluZ1xuICAgICAgICB0aGlzLnZpZGVvX2NhcHR1cmUubWVkaWFfcmVjb3JkZXIuc3RvcCgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnZpZGVvX2NhcHR1cmUucHJvbWlzZTtcbiAgICB9XG5cbn0iLCIvKlxuQWRkIGV2ZW50cyB0byBhIGNsYXNzIG9yIG9iamVjdDpcbiAgICBjbGFzcyBNeUNsYXNzIHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVNaXhpbih0aGlzKTsgLy8gQWRkIHRoZSBtaXhpbmcgZnVuY3Rpb25zIHRvIHRoZSBjbGFzc1xuICAgICAgICAgICAgLi4uXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3NvbWV0aGluZycsIHsgb3duZXI6IHRoaXMsIGNvbnRlbnQ6ICd0aGF0J30pOyAvLyB0cmlnZ2VyIGFuIGV2ZW50IHBhc3Npbmcgc29tZSBhcmd1bWVudHNcblxuU3Vic2NyaWJlIHRvIGV2ZW50cyBieSBkb2luZzpcbiAgICBteUNsYXNzLm9uKCdzb21ldGhpbmcnLCAoYXJncykgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhhcmdzKTtcbiAgICB9KTtcblxuVW5zdWJzY3JpYmUgdG8gZXZlbnRzIGJ5IGRvaW5nOlxuICAgIG15Q2xhc3Mub2ZmKCdzb21ldGhpbmcnKTtcblxub3IgbW9yZSBwcmVzaWNlbGx5OlxuICAgIG15Q2xhc3Mub2ZmKCdzb21ldGhpbmcnLCAoYXJncykgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhhcmdzKTtcbiAgICB9KTtcblxuVW5zdWJzY3JpYmUgdG8gYWxsIGV2ZW50cyBieTpcbiAgICBteUNsYXNzLm9mZkFsbCgpO1xuKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN1YnNjcmliZU1peGluICh0YXJnZXQpIHtcbiAgICB2YXIgbGlzdGVuZXJzID0gbmV3IFNldCgpO1xuXG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24odGFyZ2V0LCB7XG5cbiAgICAgICAgb24gKHR5cGUsIGYpIHtcbiAgICAgICAgICAgIGxldCBsaXN0ZW5lciA9IHt9O1xuICAgICAgICAgICAgbGlzdGVuZXJbdHlwZV0gPSBmO1xuICAgICAgICAgICAgbGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb2ZmICh0eXBlLCBmKSB7XG4gICAgICAgICAgICBpZiAoZikge1xuICAgICAgICAgICAgICAgIGxldCBsaXN0ZW5lciA9IHt9O1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyW3R5cGVdID0gZjtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgbGlzdGVuZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGtleSBvZiBPYmplY3Qua2V5cyhpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gdHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmVycy5kZWxldGUoaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIG9mZkFsbCAoKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnMuY2xlYXIoKTtcbiAgICAgICAgfSxcblxuICAgICAgICB0cmlnZ2VyIChldmVudCwgLi4uZGF0YSkge1xuICAgICAgICAgICAgZm9yICh2YXIgbGlzdGVuZXIgb2YgbGlzdGVuZXJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lcltldmVudF0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXJbZXZlbnRdKC4uLmRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBsaXN0U3Vic2NyaXB0aW9ucyAoKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpdGVtIG9mIGxpc3RlbmVycykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG4iLCJsZXQgX2NyZWF0ZU9iamVjdFVSTDtcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPYmplY3RVUkwgKHVybCkge1xuICAgIGlmIChfY3JlYXRlT2JqZWN0VVJMID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgX2NyZWF0ZU9iamVjdFVSTCA9ICh3aW5kb3cuVVJMICYmIHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKSB8fCAod2luZG93LndlYmtpdFVSTCAmJiB3aW5kb3cud2Via2l0VVJMLmNyZWF0ZU9iamVjdFVSTCk7XG4gICAgICAgIGlmICh0eXBlb2YgX2NyZWF0ZU9iamVjdFVSTCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgX2NyZWF0ZU9iamVjdFVSTCA9IG51bGw7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwgKG9yIHZlbmRvciBwcmVmaXgpIG5vdCBmb3VuZCwgdW5hYmxlIHRvIGNyZWF0ZSBsb2NhbCBibG9iIFVSTHMnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChfY3JlYXRlT2JqZWN0VVJMKSB7XG4gICAgICAgIHJldHVybiBfY3JlYXRlT2JqZWN0VVJMKHVybCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdXJsO1xuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBFcnJvcnNEaXNwbGF5IHtcbiAgICBjb25zdHJ1Y3RvcihtYWluKSB7XG4gICAgICAgIHRoaXMubWFpbiA9IG1haW47XG5cbiAgICAgICAgLy8gIHByaXZhdGUgdmFyaWFibGVzXG4gICAgICAgIHRoaXMud2lkZ2V0cyA9IFtdO1xuXG4gICAgICAgIC8vIEVWRU5UU1xuICAgICAgICB0aGlzLm1haW4uc2hhZGVyLmNhbnZhcy5vbignZXJyb3InLCAoYXJnKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5tYWluLnZpc3VhbERlYnVnZ2VyICYmIHRoaXMubWFpbi52aXN1YWxEZWJ1Z2dlci50ZXN0aW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhbigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFuKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRFcnJvcihhcmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLm1haW4uZWRpdG9yLm9uKCdjaGFuZ2VzJywgKGNtLCBjaGFuZ2VzT2JqcykgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMubWFpbi5zaGFkZXIuY2FudmFzLmlzVmFsaWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNsZWFuKCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMud2lkZ2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5tYWluLmVkaXRvci5yZW1vdmVMaW5lV2lkZ2V0KHRoaXMud2lkZ2V0c1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53aWRnZXRzLmxlbmd0aCA9IDA7XG4gICAgfVxuXG4gICAgYWRkRXJyb3IoYXJncykge1xuICAgICAgICBsZXQgcmUgPSAvRVJST1I6XFxzK1xcZCs6KFxcZCspOlxccysoJy4qKS9nO1xuICAgICAgICBsZXQgbWF0Y2hlcyA9IHJlLmV4ZWMoYXJncy5lcnJvcik7XG4gICAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgICAgICBsZXQgbGluZSA9IHBhcnNlSW50KG1hdGNoZXNbMV0pIC0gMTtcbiAgICAgICAgICAgIGxldCBlciA9IG1hdGNoZXNbMl07XG4gICAgICAgICAgICBsZXQgbXNnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgICAgIGxldCBpY29uID0gbXNnLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSk7XG4gICAgICAgICAgICBpY29uLmNsYXNzTmFtZSA9ICdnZS1lcnJvci1pY29uJztcbiAgICAgICAgICAgIGljb24uaW5uZXJIVE1MID0gJ3gnO1xuICAgICAgICAgICAgbXNnLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGVyKSk7XG4gICAgICAgICAgICBtc2cuY2xhc3NOYW1lID0gJ2dlLWVycm9yJztcbiAgICAgICAgICAgIHRoaXMud2lkZ2V0cy5wdXNoKHRoaXMubWFpbi5lZGl0b3IuYWRkTGluZVdpZGdldChsaW5lLCBtc2cpKTsvLywgeyBjb3Zlckd1dHRlcjogZmFsc2UsIG5vSFNjcm9sbDogdHJ1ZSB9KSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgRXhwb3J0TW9kYWwgZnJvbSAnLi9tb2RhbHMvRXhwb3J0TW9kYWwnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFeHBvcnRJY29uIHtcbiAgICBjb25zdHJ1Y3RvciAobWFpbikge1xuICAgICAgICB0aGlzLm1haW4gPSBtYWluO1xuXG4gICAgICAgIHRoaXMuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2dlX2V4cG9ydF9pY29uJyk7XG4gICAgICAgIHRoaXMuZWwuaW5uZXJIVE1MID0gJ+KWsyc7XG4gICAgICAgIC8vIHRoaXMuZWwuaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj5tb3JlX3ZlcnQ8L2k+JztcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1haW4uY2hhbmdlIHx8ICF0aGlzLm1vZGFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb2RhbCA9IG5ldyBFeHBvcnRNb2RhbCgnZ2VfZXhwb3J0JywgeyBtYWluOiBtYWluIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tb2RhbC5wcmVzZW50TW9kYWwoZXZlbnQudGFyZ2V0Lm9mZnNldExlZnQsIGV2ZW50LnRhcmdldC5vZmZzZXRUb3ApO1xuICAgICAgICB9LCB0cnVlKTtcblxuICAgICAgICB0aGlzLm1haW4uY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZWwpO1xuICAgIH1cbn1cbiIsImltcG9ydCBDb2xvclBpY2tlciBmcm9tICcuL3BpY2tlcnMvQ29sb3JQaWNrZXInO1xuaW1wb3J0IFZlYzNQaWNrZXIgZnJvbSAnLi9waWNrZXJzL1ZlYzNQaWNrZXInO1xuaW1wb3J0IFZlYzJQaWNrZXIgZnJvbSAnLi9waWNrZXJzL1ZlYzJQaWNrZXInO1xuaW1wb3J0IEZsb2F0UGlja2VyIGZyb20gJy4vcGlja2Vycy9GbG9hdFBpY2tlcic7XG5cbmltcG9ydCBDb2xvciBmcm9tICcuL3BpY2tlcnMvdHlwZXMvQ29sb3InO1xuXG5pbXBvcnQgTW9kYWwgZnJvbSAnLi9tb2RhbHMvTW9kYWwnO1xuXG4vLyBSZXR1cm4gYWxsIHBhdHRlcm4gbWF0Y2hlcyB3aXRoIGNhcHR1cmVkIGdyb3Vwc1xuUmVnRXhwLnByb3RvdHlwZS5leGVjQWxsID0gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgbGV0IG1hdGNoID0gbnVsbDtcbiAgICBsZXQgbWF0Y2hlcyA9IFtdO1xuICAgIHdoaWxlIChtYXRjaCA9IHRoaXMuZXhlYyhzdHJpbmcpKSB7XG4gICAgICAgIGxldCBtYXRjaEFycmF5ID0gW107XG4gICAgICAgIGZvciAobGV0IGkgaW4gbWF0Y2gpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZUludChpKSA9PSBpKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hBcnJheS5wdXNoKG1hdGNoW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBtYXRjaEFycmF5LmluZGV4ID0gbWF0Y2guaW5kZXg7XG4gICAgICAgIG1hdGNoZXMucHVzaChtYXRjaEFycmF5KTtcbiAgICB9XG4gICAgcmV0dXJuIG1hdGNoZXM7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIZWxwZXJzIHtcbiAgICBjb25zdHJ1Y3RvciAobWFpbikge1xuICAgICAgICB0aGlzLm1haW4gPSBtYWluO1xuICAgICAgICB0aGlzLm1haW4uZGVidWdnaW5nID0gZmFsc2U7XG5cbiAgICAgICAgbGV0IHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUobWFpbi5lZGl0b3IuZ2V0V3JhcHBlckVsZW1lbnQoKSwgbnVsbCk7XG4gICAgICAgIGxldCBiZ0NvbG9yID0gbmV3IENvbG9yKHN0eWxlLmJhY2tncm91bmQgIT09ICcnID8gc3R5bGUuYmFja2dyb3VuZCA6IHN0eWxlLmJhY2tncm91bmRDb2xvcik7XG4gICAgICAgIGxldCBmZ0NvbG9yID0gbmV3IENvbG9yKHN0eWxlLmNvbG9yKTtcblxuICAgICAgICB0aGlzLnByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICBiZ0NvbG9yOiBiZ0NvbG9yLmdldFN0cmluZygncmdiJyksXG4gICAgICAgICAgICBmbkNvbG9yOiBmZ0NvbG9yLmdldFN0cmluZygncmdiJyksXG4gICAgICAgICAgICBkaW1Db2xvcjogJ3JnYigxMjcsIDEyNywgMTI3KScsXG4gICAgICAgICAgICBzZWxDb2xvcjogJ3JnYig0MCwgMTY4LCAxMDcpJyxcbiAgICAgICAgICAgIGxpbmtfYnV0dG9uOiB0cnVlXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gRVZFTlRTXG4gICAgICAgIGxldCB3cmFwcGVyID0gdGhpcy5tYWluLmVkaXRvci5nZXRXcmFwcGVyRWxlbWVudCgpO1xuICAgICAgICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBsZXQgY3Vyc29yID0gdGhpcy5tYWluLmVkaXRvci5nZXRDdXJzb3IodHJ1ZSk7XG4gICAgICAgICAgICBsZXQgdG9rZW4gPSB0aGlzLm1haW4uZWRpdG9yLmdldFRva2VuQXQoY3Vyc29yKTtcbiAgICAgICAgICAgIGlmICh0b2tlbi50eXBlID09PSAndmFyaWFibGUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYWluLnZpc3VhbERlYnVnZ2VyLmRlYnVnKHRva2VuLnN0cmluZywgY3Vyc29yLmxpbmUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1haW4udXBkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgLy8gYmFpbCBvdXQgaWYgd2Ugd2VyZSBkb2luZyBhIHNlbGVjdGlvbiBhbmQgbm90IGEgY2xpY2tcbiAgICAgICAgICAgIGlmICh0aGlzLm1haW4uZWRpdG9yLnNvbWV0aGluZ1NlbGVjdGVkKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBjdXJzb3IgPSB0aGlzLm1haW4uZWRpdG9yLmdldEN1cnNvcih0cnVlKTtcblxuICAgICAgICAgICAgLy8gc2VlIGlmIHRoZXJlIGlzIGEgbWF0Y2ggb24gdGhlIGN1cnNvciBjbGlja1xuICAgICAgICAgICAgbGV0IG1hdGNoID0gdGhpcy5nZXRNYXRjaChjdXJzb3IpO1xuICAgICAgICAgICAgbGV0IHRva2VuID0gdGhpcy5tYWluLmVkaXRvci5nZXRUb2tlbkF0KGN1cnNvcik7XG4gICAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1haW4udmlzdWFsRGVidWdnZXIuY2xlYW4oZXZlbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMubWFpbi51cGRhdGUoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBUb2dnbGVzIHRoZSB0cmFja3BhZCB0byBiZSBvZmYgaWYgaXQncyBhbHJlYWR5IHByZXNlbnQuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlTW9kYWwgJiYgdGhpcy5hY3RpdmVNb2RhbC5pc1Zpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVNb2RhbC5yZW1vdmVNb2RhbCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoLnR5cGUgPT09ICdjb2xvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVNb2RhbCA9IG5ldyBDb2xvclBpY2tlcihtYXRjaC5zdHJpbmcsIHRoaXMucHJvcGVydGllcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlTW9kYWwuc2hvd0F0KHRoaXMubWFpbi5lZGl0b3IpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZU1vZGFsLm9uKCdjaGFuZ2VkJywgKGNvbG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3Q29sb3IgPSBjb2xvci5nZXRTdHJpbmcoJ3ZlYycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXJ0ID0geyBsaW5lOiBjdXJzb3IubGluZSwgY2g6IG1hdGNoLnN0YXJ0IH07XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZW5kID0geyBsaW5lOiBjdXJzb3IubGluZSwgY2g6IG1hdGNoLmVuZCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2guZW5kID0gbWF0Y2guc3RhcnQgKyBuZXdDb2xvci5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1haW4uZWRpdG9yLnJlcGxhY2VSYW5nZShuZXdDb2xvciwgc3RhcnQsIGVuZCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlTW9kYWwub24oJ2xpbmtfYnV0dG9uJywgKGNvbG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZU1vZGFsID0gbmV3IFZlYzNQaWNrZXIoY29sb3IuZ2V0U3RyaW5nKCd2ZWMnKSwgdGhpcy5wcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlTW9kYWwuc2hvd0F0KHRoaXMubWFpbi5lZGl0b3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVNb2RhbC5vbignY2hhbmdlZCcsIChkaXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3RGlyID0gZGlyLmdldFN0cmluZygndmVjMycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdGFydCA9IHsgbGluZTogY3Vyc29yLmxpbmUsIGNoOiBtYXRjaC5zdGFydCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlbmQgPSB7IGxpbmU6IGN1cnNvci5saW5lLCBjaDogbWF0Y2guZW5kIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2guZW5kID0gbWF0Y2guc3RhcnQgKyBuZXdEaXIubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFpbi5lZGl0b3IucmVwbGFjZVJhbmdlKG5ld0Rpciwgc3RhcnQsIGVuZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtYXRjaC50eXBlID09PSAndmVjMycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVNb2RhbCA9IG5ldyBWZWMzUGlja2VyKG1hdGNoLnN0cmluZywgdGhpcy5wcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVNb2RhbC5zaG93QXQodGhpcy5tYWluLmVkaXRvcik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlTW9kYWwub24oJ2NoYW5nZWQnLCAoZGlyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3RGlyID0gZGlyLmdldFN0cmluZygndmVjMycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXJ0ID0geyBsaW5lOiBjdXJzb3IubGluZSwgY2g6IG1hdGNoLnN0YXJ0IH07XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZW5kID0geyBsaW5lOiBjdXJzb3IubGluZSwgY2g6IG1hdGNoLmVuZCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2guZW5kID0gbWF0Y2guc3RhcnQgKyBuZXdEaXIubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluLmVkaXRvci5yZXBsYWNlUmFuZ2UobmV3RGlyLCBzdGFydCwgZW5kKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1hdGNoLnR5cGUgPT09ICd2ZWMyJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZU1vZGFsID0gbmV3IFZlYzJQaWNrZXIobWF0Y2guc3RyaW5nLCB0aGlzLnByb3BlcnRpZXMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZU1vZGFsLnNob3dBdCh0aGlzLm1haW4uZWRpdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVNb2RhbC5vbignY2hhbmdlZCcsIChwb3MpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdwb3MgPSBwb3MuZ2V0U3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RhcnQgPSB7IGxpbmU6IGN1cnNvci5saW5lLCBjaDogbWF0Y2guc3RhcnQgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlbmQgPSB7IGxpbmU6IGN1cnNvci5saW5lLCBjaDogbWF0Y2guZW5kIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaC5lbmQgPSBtYXRjaC5zdGFydCArIG5ld3Bvcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1haW4uZWRpdG9yLnJlcGxhY2VSYW5nZShuZXdwb3MsIHN0YXJ0LCBlbmQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobWF0Y2gudHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVNb2RhbCA9IG5ldyBGbG9hdFBpY2tlcihtYXRjaC5zdHJpbmcsIHRoaXMucHJvcGVydGllcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlTW9kYWwuc2hvd0F0KHRoaXMubWFpbi5lZGl0b3IpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZU1vZGFsLm9uKCdjaGFuZ2VkJywgKG51bWJlcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld051bWJlciA9IG51bWJlci5nZXRTdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdGFydCA9IHsgbGluZTogY3Vyc29yLmxpbmUsIGNoOiBtYXRjaC5zdGFydCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVuZCA9IHsgbGluZTogY3Vyc29yLmxpbmUsIGNoOiBtYXRjaC5lbmQgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoLmVuZCA9IG1hdGNoLnN0YXJ0ICsgbmV3TnVtYmVyLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFpbi5lZGl0b3IucmVwbGFjZVJhbmdlKG5ld051bWJlciwgc3RhcnQsIGVuZCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMubWFpbi5vcHRpb25zLnRvb2x0aXBzICYmICh0b2tlbi50eXBlID09PSAnYnVpbHRpbicgfHwgdG9rZW4udHlwZSA9PT0gJ3ZhcmlhYmxlLTMnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubWFpbi52aXN1YWxEZWJ1Z2dlci5jbGVhbihldmVudCk7XG4gICAgICAgICAgICAgICAgbGV0IGh0bWwgPSAnPHA+TGVhcm4gbW9yZSBhYm91dDogPGEgaHJlZj1cImh0dHBzOi8vdGhlYm9va29mc2hhZGVycy5jb20vZ2xvc3NhcnkvP3NlYXJjaD0nICsgdG9rZW4uc3RyaW5nICsgJ1wiIHRhcmdldD1cIl9ibGFua1wiPicgKyB0b2tlbi5zdHJpbmcgKyAnPC9hPjwvcD4nO1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlTW9kYWwgPSBuZXcgTW9kYWwoJ2dlX3Rvb2x0aXAnLCB7IGlubmVySFRNTDogaHRtbCB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZU1vZGFsLnNob3dBdCh0aGlzLm1haW4uZWRpdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRva2VuLnR5cGUgPT09ICd2YXJpYWJsZScpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tYWluLnZpc3VhbERlYnVnZ2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFpbi52aXN1YWxEZWJ1Z2dlci5jbGVhbihldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFpbi52aXN1YWxEZWJ1Z2dlci5pbHVtaW5hdGUodG9rZW4uc3RyaW5nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldE1hdGNoIChjdXJzb3IpIHtcbiAgICAgICAgbGV0IHR5cGVzID0gWydjb2xvcicsICd2ZWMzJyAsJ3ZlYzInLCAnbnVtYmVyJ107XG4gICAgICAgIGxldCBydGE7XG4gICAgICAgIGZvciAobGV0IGkgaW4gdHlwZXMpIHtcbiAgICAgICAgICAgIHJ0YSA9IHRoaXMuZ2V0VHlwZU1hdGNoKGN1cnNvciwgdHlwZXNbaV0pO1xuICAgICAgICAgICAgaWYgKHJ0YSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBydGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGdldFR5cGVNYXRjaCAoY3Vyc29yLCB0eXBlKSB7XG4gICAgICAgIGlmICghdHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCByZTtcbiAgICAgICAgc3dpdGNoKHR5cGUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgY2FzZSAnY29sb3InOlxuICAgICAgICAgICAgICAgIHJlID0gL3ZlY1szfDRdXFwoW1xcZHwufCxcXHNdKlxcKS9nO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndmVjMyc6XG4gICAgICAgICAgICAgICAgcmUgPSAvdmVjM1xcKFstfFxcZHwufCxcXHNdKlxcKS9nO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndmVjMic6XG4gICAgICAgICAgICAgICAgcmUgPSAvdmVjMlxcKFstfFxcZHwufCxcXHNdKlxcKS9nO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgICByZSA9IC9bLV0/XFxkK1xcLlxcZCt8XFxkK1xcLnxcXC5cXGQrL2c7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2ludmFsaWQgbWF0Y2ggc2VsZWN0aW9uJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCBsaW5lID0gdGhpcy5tYWluLmVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKTtcbiAgICAgICAgbGV0IG1hdGNoZXMgPSByZS5leGVjQWxsKGxpbmUpO1xuXG4gICAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hdGNoZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgdmFsID0gbWF0Y2hlc1tpXVswXTtcbiAgICAgICAgICAgICAgICBsZXQgbGVuID0gdmFsLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBsZXQgc3RhcnQgPSBtYXRjaGVzW2ldLmluZGV4O1xuICAgICAgICAgICAgICAgIGxldCBlbmQgPSBtYXRjaGVzW2ldLmluZGV4ICsgbGVuO1xuICAgICAgICAgICAgICAgIGlmIChjdXJzb3IuY2ggPj0gc3RhcnQgJiYgY3Vyc29yLmNoIDw9IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBzdGFydCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogZW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nOiB2YWxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn1cbiIsImltcG9ydCBNZW51SXRlbSBmcm9tICcuL01lbnVJdGVtJztcbmltcG9ydCBFeHBvcnRNb2RhbCBmcm9tICcuL21vZGFscy9FeHBvcnRNb2RhbCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1lbnUge1xuICAgIGNvbnN0cnVjdG9yIChtYWluKSB7XG4gICAgICAgIHRoaXMubWFpbiA9IG1haW47XG4gICAgICAgIHRoaXMubWVudXMgPSB7fTtcblxuICAgICAgICAvLyBDUkVBVEUgTUVOVSBDb250YWluZXJcbiAgICAgICAgdGhpcy5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsICdnZV9tZW51X2JhcicpO1xuXG4gICAgICAgIC8vIE5FV1xuICAgICAgICB0aGlzLm1lbnVzLm5ldyA9IG5ldyBNZW51SXRlbSh0aGlzLmVsLCAnZ2VfbWVudScsICc8aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zXCI+YWRkPC9pPiBOZXcnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIG1haW4ubmV3KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIE9QRU5cbiAgICAgICAgdGhpcy5maWxlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICB0aGlzLmZpbGVJbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnZmlsZScpO1xuICAgICAgICB0aGlzLmZpbGVJbnB1dC5zZXRBdHRyaWJ1dGUoJ2FjY2VwdCcsICd0ZXh0L3gteWFtbCcpO1xuICAgICAgICB0aGlzLmZpbGVJbnB1dC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB0aGlzLmZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIG1haW4ub3BlbihldmVudC50YXJnZXQuZmlsZXNbMF0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tZW51cy5vcGVuID0gbmV3IE1lbnVJdGVtKHRoaXMuZWwsICdnZV9tZW51JywgJzxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj5mb2xkZXJfb3BlbjwvaT4gIE9wZW4nLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZmlsZUlucHV0LmNsaWNrKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIHRoaXMubWVudXMuYXV0b3VwZGF0ZS5idXR0b24uc3R5bGUuY29sb3IgPSBtYWluLmF1dG91cGRhdGUgPyAnd2hpdGUnIDogJ2dyYXknO1xuXG4gICAgICAgIC8vIFRFU1RcbiAgICAgICAgdGhpcy5tZW51cy50ZXN0ID0gbmV3IE1lbnVJdGVtKHRoaXMuZWwsICdnZV9tZW51JywgJzxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj50aW1lbGluZTwvaT4gVGVzdCcsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgbWFpbi52aXN1YWxEZWJ1Z2dlci5jaGVjaygpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTSEFSRVxuICAgICAgICB0aGlzLm1lbnVzLnNoYXJlID0gbmV3IE1lbnVJdGVtKHRoaXMuZWwsICdnZV9tZW51JywgJzxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj5hcnJvd191cHdhcmQ8L2k+IEV4cG9ydCcsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1haW4uY2hhbmdlIHx8ICF0aGlzLmV4cG9ydE1vZGFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHBvcnRNb2RhbCA9IG5ldyBFeHBvcnRNb2RhbCgnZ2VfZXhwb3J0JywgeyBtYWluOiBtYWluLCBwb3NpdGlvbjogJ2ZpeGVkJyB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGJib3ggPSB0aGlzLm1lbnVzLnNoYXJlLmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdGhpcy5leHBvcnRNb2RhbC5wcmVzZW50TW9kYWwoYmJveC5sZWZ0IC0gNSwgYmJveC50b3AgKyBiYm94LmhlaWdodCArIDUpO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgICAgLy8gQVVUT1VQREFURVxuICAgICAgICAgIHRoaXMubWVudXMuYXV0b3VwZGF0ZSA9IG5ldyBNZW51SXRlbSh0aGlzLmVsLCAnZ2VfbWVudScsICcgPGkgY2xhc3M9XCJtYXRlcmlhbC1pY29uc1wiPmF1dG9yZW5ldzwvaT4gVXBkYXRlOiBPTicsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBpZiAobWFpbi5hdXRvdXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgICBtYWluLmF1dG91cGRhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIHRoaXMubWVudXMuYXV0b3VwZGF0ZS5uYW1lID0gJzxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj5hdXRvcmVuZXc8L2k+IFVwZGF0ZTogT0ZGJztcbiAgICAgICAgICAgICAgICAgIC8vIHRoaXMubWVudXMuYXV0b3VwZGF0ZS5idXR0b24uc3R5bGUuY29sb3IgPSAnZ3JheSc7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBtYWluLmF1dG91cGRhdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgbWFpbi51cGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgIHRoaXMubWVudXMuYXV0b3VwZGF0ZS5uYW1lID0gJzxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj5hdXRvcmVuZXc8L2k+IFVwZGF0ZTogT04nO1xuICAgICAgICAgICAgICAgICAgLy8gdGhpcy5tZW51cy5hdXRvdXBkYXRlLmJ1dHRvbi5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICBtYWluLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmVsKTtcbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBNZW51SXRlbSB7XG4gICAgY29uc3RydWN0b3IgKGNvbnRhaW5lciwgY2xhc3NOYW1lLCBuYW1lLCBvbkNsaWNrKSB7XG4gICAgICAgIHRoaXMuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICB0aGlzLmJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICB0aGlzLmJ1dHRvbi5jbGFzc05hbWUgPSBjbGFzc05hbWUrJ19idXR0b24nO1xuICAgICAgICB0aGlzLmVsLmFwcGVuZENoaWxkKHRoaXMuYnV0dG9uKTtcbiAgICAgICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy5idXR0b24uaW5uZXJIVE1MID0gbmFtZTtcbiAgICAgICAgdGhpcy5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgICAgIHRoaXMuaGlkZGVuQ2xhc3MgPSBjbGFzc05hbWUgKyAnLS1oaWRkZW4nO1xuXG4gICAgICAgIC8vIEF0dGFjaCBsaXN0ZW5lcnMsIGluY2x1ZGluZyB0aG9zZSBmb3IgdG9vbHRpcCBiZWhhdmlvclxuICAgICAgICB0aGlzLmJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2ssIHRydWUpO1xuXG4gICAgICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmVsKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldCBuYW1lIChuYW1lKSB7XG4gICAgICAgIHRoaXMuYnV0dG9uLmlubmVySFRNTCA9IG5hbWU7XG4gICAgfVxuXG4gICAgaGlkZSAoKSB7XG4gICAgICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIHRoaXMuY2xhc3NOYW1lICsgJyAnICsgdGhpcy5oaWRkZW5DbGFzcyk7XG4gICAgfVxuXG4gICAgc2hvdyAoKSB7XG4gICAgICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIHRoaXMuY2xhc3NOYW1lKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBpc0NvbW1lbnRlZCwgaXNMaW5lQWZ0ZXJNYWluLCBnZXRWYXJpYWJsZVR5cGUsIGdldFNoYWRlckZvclR5cGVWYXJJbkxpbmUsIGdldFJlc3VsdFJhbmdlLCBnZXREZWx0YVN1bSwgZ2V0SGl0cywgZ2V0TWVkaWFuIH0gZnJvbSAnLi4vdG9vbHMvZGVidWdnaW5nJztcbmltcG9ydCB7IHVuZm9jdXNMaW5lLCBmb2N1c0xpbmUsIHVuZm9jdXNBbGwsIGZvY3VzQWxsIH0gZnJvbSAnLi4vY29yZS9FZGl0b3IuanMnO1xuXG52YXIgbWFpbl9nZSA9IHt9O1xudmFyIE5fU0FNUExFUyA9IDMwO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaXN1YWxEZWJ1Z2dlciB7XG4gICAgY29uc3RydWN0b3IgKG1haW4pIHtcbiAgICAgICAgdGhpcy5tYWluID0gbWFpbjtcbiAgICAgICAgdGhpcy5icmVha3BvaW50ID0gbnVsbDtcbiAgICAgICAgbWFpbl9nZSA9IG1haW47XG5cbiAgICAgICAgdGhpcy50ZXN0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMudGVzdGluZ0ZyYWcgPSBcIlwiO1xuICAgICAgICB0aGlzLnRlc3RpbmdMaW5lID0gMDtcbiAgICAgICAgdGhpcy50ZXN0aW5nUmVzdWx0cyA9IFtdO1xuICAgICAgICB0aGlzLnRlc3RpbmdTYW1wbGVzID0gW107XG5cbiAgICAgICAgdGhpcy5tYWluLmVkaXRvci5vbignZ3V0dGVyQ2xpY2snLCAoY20sIG4pID0+IHtcbiAgICAgICAgICAgIGxldCBpbmZvID0gY20ubGluZUluZm8obik7XG4gICAgICAgICAgICBpZiAoaW5mbyAmJiBpbmZvLmd1dHRlck1hcmtlcnMgJiYgaW5mby5ndXR0ZXJNYXJrZXJzLmJyZWFrcG9pbnRzKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIGFuIGFjdGl2ZSB2YXJpYWJsZSAoYSB2YXJpYWJsZSB0aGF0IGhhdmUgYmVlbiBkZWNsYXJlIG9yIG1vZGlmeSBpbiB0aGlzIGxpbmUpXG4gICAgICAgICAgICAgICAgbGV0IHZhcmlhYmxlUkUgPSBuZXcgUmVnRXhwKCdcXFxccypbZmxvYXR8dmVjMnx2ZWMzfHZlYzRdP1xcXFxzKyhbXFxcXHd8XFxcXF9dKilbXFxcXC5cXFxcd10qP1xcXFxzK1tcXFxcK3xcXFxcLXxcXFxcXFxcXHxcXFxcKl0/XFxcXD0nLCAnaScpO1xuICAgICAgICAgICAgICAgIGxldCBtYXRjaCA9IHZhcmlhYmxlUkUuZXhlYyhpbmZvLnRleHQpO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlYnVnKG1hdGNoWzFdLCBpbmZvLmxpbmUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJyZWFrcG9pbnQgPSBpbmZvLmxpbmU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjaGVjaygpIHtcbiAgICAgICAgLy8gQ2xlYW4gcHJldml1cyByZWNvcmRzXG4gICAgICAgIHRoaXMudGVzdGluZ1Jlc3VsdHMgPSBbXTtcblxuICAgICAgICBsZXQgY20gPSB0aGlzLm1haW4uZWRpdG9yO1xuICAgICAgICBsZXQgbkxpbmVzID0gY20uZ2V0RG9jKCkuc2l6ZTtcblxuICAgICAgICBsZXQgbWFpblN0YXJ0c0F0ID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuTGluZXM7IGkrKykge1xuICAgICAgICAgICAgaWYgKGlzTGluZUFmdGVyTWFpbihjbSwgaSkpIHtcbiAgICAgICAgICAgICAgICBtYWluU3RhcnRzQXQgPSBpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudGVzdExpbmUobWFpblN0YXJ0c0F0KTtcbiAgICB9XG5cbiAgICB0ZXN0TGluZShuTGluZSkge1xuICAgICAgICBsZXQgY20gPSBtYWluX2dlLmVkaXRvcjtcbiAgICAgICAgbGV0IHZpc3VhbERlYnVnZ2VyID0gbWFpbl9nZS52aXN1YWxEZWJ1Z2dlcjtcbiAgICAgICAgXG4gICAgICAgIC8vIElmIGlzIGRvbmUgdGVzdGluZy4uLlxuICAgICAgICBpZiAobkxpbmUgPj0gY20uZ2V0RG9jKCkuc2l6ZSkge1xuICAgICAgICAgICAgdmlzdWFsRGVidWdnZXIudGVzdGluZ0xpbmUgPSAwO1xuICAgICAgICAgICAgdmlzdWFsRGVidWdnZXIudGVzdGluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICBsZXQgcmVzdWx0cyA9IHZpc3VhbERlYnVnZ2VyLnRlc3RpbmdSZXN1bHRzO1xuICAgICAgICAgICAgbGV0IHJhbmdlID0gZ2V0UmVzdWx0UmFuZ2UocmVzdWx0cyk7XG4gICAgICAgICAgICBsZXQgc3VtID0gZ2V0RGVsdGFTdW0ocmVzdWx0cyk7XG4gICAgICAgICAgICBsZXQgaGl0cyA9IGdldEhpdHMocmVzdWx0cylcblxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1Rlc3Q6ICcscmFuZ2UubWF4Lm1zKydtcycsIHJlc3VsdHMpO1xuICAgICAgICAgICAgY20uY2xlYXJHdXR0ZXIoJ2JyZWFrcG9pbnRzJyk7XG4gICAgICAgICAgICBmb3IgKGxldCBpIGluIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgcGN0ID0gKHJlc3VsdHNbaV0uZGVsdGEvc3VtKSoxMDA7XG4gICAgICAgICAgICAgICAgbGV0IHNpemUgPSAocmVzdWx0c1tpXS5kZWx0YS9zdW0pKjMwO1xuICAgICAgICAgICAgICAgIGxldCBtYXJrZXJfaHRtbCA9ICc8ZGl2PicgK3Jlc3VsdHNbaV0ubXMudG9GaXhlZCgyKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0c1tpXS5kZWx0YSA+IDAuKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlcl9odG1sICs9ICc8c3BhbiBjbGFzcz1cImdlX2Fzc2luZ19tYXJrZXJfcGN0ICc7XG4gICAgICAgICAgICAgICAgICAgIGlmICggcGN0ID4gKDEwMC4wL2hpdHMpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VyX2h0bWwgKz0gJ2dlX2Fzc2luZ19tYXJrZXJfc2xvd2VyJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBtYXJrZXJfaHRtbCArPSAnXCIgc3R5bGU9XCJ3aWR0aDogJytzaXplLnRvRml4ZWQoMCkrJ3B4O1wiIGRhdGE9XCInK3BjdC50b0ZpeGVkKDApKyclXCI+PC9zcGFuPidcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY20uc2V0R3V0dGVyTWFya2VyKHJlc3VsdHNbaV0ubGluZSwgJ2JyZWFrcG9pbnRzJywgbWFrZU1hcmtlcihtYXJrZXJfaHRtbCsnPC9kaXY+JykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzTGluZUFmdGVyTWFpbihjbSwgbkxpbmUpKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgbGluZSBpcyBpbnNpZGUgdGhlIG1haW4gZnVuY3Rpb25cbiAgICAgICAgICAgIGxldCBzaGFkZXIgPSBtYWluX2dlLnNoYWRlci5jYW52YXM7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBhbiBhY3RpdmUgdmFyaWFibGUgKGEgdmFyaWFibGUgdGhhdCBoYXZlIGJlZW4gZGVjbGFyZSBvciBtb2RpZnkgaW4gdGhpcyBsaW5lKVxuICAgICAgICAgICAgbGV0IHZhcmlhYmxlUkUgPSBuZXcgUmVnRXhwKCdcXFxccypbZmxvYXR8dmVjMnx2ZWMzfHZlYzRdP1xcXFxzKyhbXFxcXHd8XFxcXF9dKilbXFxcXC5cXFxcd10qP1xcXFxzK1tcXFxcK3xcXFxcLXxcXFxcXFxcXHxcXFxcKl0/XFxcXD0nLCAnaScpO1xuICAgICAgICAgICAgbGV0IG1hdGNoID0gdmFyaWFibGVSRS5leGVjKGNtLmdldExpbmUobkxpbmUpKTtcbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIGFuIGFjdGl2ZSB2YXJpYWJsZSwgZ2V0IHdoYXQgdHlwZSBpc1xuICAgICAgICAgICAgICAgIGxldCB2YXJpYWJsZSA9IG1hdGNoWzFdO1xuICAgICAgICAgICAgICAgIGxldCB0eXBlID0gZ2V0VmFyaWFibGVUeXBlKGNtLCB2YXJpYWJsZSk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdub25lJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiBpdCBmYWlscyBvbiBmaW5kaW5nIHRoZSB0eXBlIGtlZXAgZ29pbmcgd2l0aCB0aGUgdGVzdCBvbiBhbm90aGVyIGxpbmVcbiAgICAgICAgICAgICAgICAgICAgdmlzdWFsRGVidWdnZXIudGVzdExpbmUobkxpbmUrMSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBQcmVwYXJlIFxuICAgICAgICAgICAgICAgIHZpc3VhbERlYnVnZ2VyLnRlc3RpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHZpc3VhbERlYnVnZ2VyLnRlc3RpbmdMaW5lID0gbkxpbmU7XG4gICAgICAgICAgICAgICAgdmlzdWFsRGVidWdnZXIudGVzdGluZ0ZyYWcgPSBnZXRTaGFkZXJGb3JUeXBlVmFySW5MaW5lKGNtLCB0eXBlLCB2YXJpYWJsZSwgbkxpbmUpO1xuICAgICAgICAgICAgICAgIHZpc3VhbERlYnVnZ2VyLnRlc3RpbmdTYW1wbGVzID0gW107XG5cbiAgICAgICAgICAgICAgICB1bmZvY3VzQWxsKGNtKTtcbiAgICAgICAgICAgICAgICBmb2N1c0xpbmUoY20sIG5MaW5lKTtcbiAgICAgICAgICAgICAgICBtYWluX2dlLmRlYnVnZ2luZyA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICBzaGFkZXIudGVzdCh0aGlzLm9uVGVzdCwgIHZpc3VhbERlYnVnZ2VyLnRlc3RpbmdGcmFnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmlzdWFsRGVidWdnZXIudGVzdExpbmUobkxpbmUrMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgbGluZSBpcyBub3QgaW5zaWRlIG1haW4gZnVuY3Rpb24sIHRlc3QgdGhlIG5leHQgb25lLi4uXG4gICAgICAgICAgICB2aXN1YWxEZWJ1Z2dlci50ZXN0TGluZShuTGluZSsxKTtcbiAgICAgICAgfSBcbiAgICB9XG5cbiAgICBvblRlc3QgKHRhcmdldCkge1xuICAgICAgICBsZXQgY20gPSBtYWluX2dlLmVkaXRvcjtcbiAgICAgICAgbGV0IHNoYWRlciA9IG1haW5fZ2Uuc2hhZGVyLmNhbnZhcztcbiAgICAgICAgbGV0IHZpc3VhbERlYnVnZ2VyID0gbWFpbl9nZS52aXN1YWxEZWJ1Z2dlcjtcblxuICAgICAgICAvLyBJZiB0aGUgdGVzdCBzaGFkZXIgY29tcGlsZWQuLi5cbiAgICAgICAgaWYgKHRhcmdldC53YXNWYWxpZCkge1xuICAgICAgICAgICAgLy8gZ2V0IGRhdGEsIHByb2Nlc3MgYW5kIHN0b3JlLlxuICAgICAgICAgICAgbGV0IGVsYXBzZWRNcyA9IHRhcmdldC50aW1lRWxhcHNlZE1zO1xuXG4gICAgICAgICAgICBpZiAodmlzdWFsRGVidWdnZXIudGVzdGluZ1NhbXBsZXMubGVuZ3RoIDwgTl9TQU1QTEVTLTEpe1xuICAgICAgICAgICAgICAgIHZpc3VhbERlYnVnZ2VyLnRlc3RpbmdTYW1wbGVzLnB1c2goZWxhcHNlZE1zKTtcbiAgICAgICAgICAgICAgICBzaGFkZXIudGVzdCh2aXN1YWxEZWJ1Z2dlci5vblRlc3QsIHZpc3VhbERlYnVnZ2VyLnRlc3RpbmdGcmFnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9jdXNBbGwoY20pO1xuICAgICAgICAgICAgICAgIG1haW5fZ2UuZGVidWdnaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmlzdWFsRGVidWdnZXIudGVzdGluZ1NhbXBsZXMucHVzaChlbGFwc2VkTXMpO1xuICAgICAgICAgICAgICAgIGVsYXBzZWRNcyA9IGdldE1lZGlhbih2aXN1YWxEZWJ1Z2dlci50ZXN0aW5nU2FtcGxlcyk7XG5cbiAgICAgICAgICAgICAgICBsZXQgcmFuZ2UgPSBnZXRSZXN1bHRSYW5nZSh2aXN1YWxEZWJ1Z2dlci50ZXN0aW5nUmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgbGV0IGRlbHRhID0gZWxhcHNlZE1zIC0gcmFuZ2UubWF4Lm1zO1xuICAgICAgICAgICAgICAgIGlmICh2aXN1YWxEZWJ1Z2dlci50ZXN0aW5nUmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsdGEgPSAwLjA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZpc3VhbERlYnVnZ2VyLnRlc3RpbmdSZXN1bHRzLnB1c2goe2xpbmU6dmlzdWFsRGVidWdnZXIudGVzdGluZ0xpbmUsIG1zOnRhcmdldC50aW1lRWxhcHNlZE1zLCBkZWx0YTpkZWx0YX0pO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdUZXN0aW5nIGxpbmU6JywgdmlzdWFsRGVidWdnZXIudGVzdGluZ0xpbmUsIGVsYXBzZWRNcywgZGVsdGEsIHJhbmdlKTtcblxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBndXR0ZXIgbWFya2VyXG4gICAgICAgICAgICAgICAgY20uc2V0R3V0dGVyTWFya2VyKCB2aXN1YWxEZWJ1Z2dlci50ZXN0aW5nTGluZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnJlYWtwb2ludHMnLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VNYXJrZXIoZWxhcHNlZE1zLnRvRml4ZWQoMikpKTtcblxuICAgICAgICAgICAgICAgIC8vIFRlc3QgbmV4dCBsaW5lXG4gICAgICAgICAgICAgICAgdmlzdWFsRGVidWdnZXIudGVzdExpbmUodmlzdWFsRGVidWdnZXIudGVzdGluZ0xpbmUrMSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0YXJnZXQpXG4gICAgICAgICAgICAvLyBUZXN0IG5leHQgbGluZVxuICAgICAgICAgICAgdmlzdWFsRGVidWdnZXIudGVzdExpbmUodmlzdWFsRGVidWdnZXIudGVzdGluZ0xpbmUrMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkZWJ1ZyAodmFyaWFibGUsIG5MaW5lKSB7XG4gICAgICAgIGZvY3VzQWxsKHRoaXMubWFpbi5lZGl0b3IpO1xuICAgICAgICB0aGlzLm1haW4uZGVidWdnaW5nID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKGlzTGluZUFmdGVyTWFpbih0aGlzLm1haW4uZWRpdG9yLCBuTGluZSkpIHtcbiAgICAgICAgICAgIHZhciB0eXBlID0gZ2V0VmFyaWFibGVUeXBlKHRoaXMubWFpbi5lZGl0b3IsIHZhcmlhYmxlKTtcbiAgICAgICAgICAgIGlmICh0eXBlICE9PSAnbm9uZScpIHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMubWFpbi5zaGFkZXIuY2FudmFzLmxvYWQoZ2V0U2hhZGVyRm9yVHlwZVZhckluTGluZSh0aGlzLm1haW4uZWRpdG9yLCB0eXBlLCB2YXJpYWJsZSwgbkxpbmUpKTtcbiAgICAgICAgICAgICAgICB1bmZvY3VzQWxsKHRoaXMubWFpbi5lZGl0b3IpO1xuICAgICAgICAgICAgICAgIGZvY3VzTGluZSh0aGlzLm1haW4uZWRpdG9yLCBuTGluZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5tYWluLmRlYnVnZ2luZyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1haW4udXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpbHVtaW5hdGUgKHZhcmlhYmxlKSB7XG4gICAgICAgIGlmICh0aGlzLm1haW4uZGViYnVnaW5nICYmIHRoaXMudmFyaWFibGUgPT09IHRoaXMudmFyaWFibGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyB0aGlzLmNsZWFuKCk7XG5cbiAgICAgICAgbGV0IGNtID0gdGhpcy5tYWluLmVkaXRvcjtcblxuICAgICAgICAvLyBIaWdobGlnaHQgYWxsIGNhbGxzIHRvIGEgdmFyaWFibGVcbiAgICAgICAgdGhpcy5vdmVybGF5ID0gc2VhcmNoT3ZlcmxheSh2YXJpYWJsZSwgdHJ1ZSk7XG4gICAgICAgIGNtLmFkZE92ZXJsYXkodGhpcy5vdmVybGF5KTtcbiAgICAgICAgaWYgKGNtLnNob3dNYXRjaGVzT25TY3JvbGxiYXIpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFubm90YXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbm5vdGF0ZS5jbGVhcigpOyB0aGlzLmFubm90YXRlID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYW5ub3RhdGUgPSBjbS5zaG93TWF0Y2hlc09uU2Nyb2xsYmFyKHZhcmlhYmxlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNsZWFuIChldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQgJiYgZXZlbnQudGFyZ2V0ICYmIGV2ZW50LnRhcmdldC5jbGFzc05hbWUgPT09ICdnZV9hc3NpbmdfbWFya2VyJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGNtID0gdGhpcy5tYWluLmVkaXRvcjtcbiAgICAgICAgY20uY2xlYXJHdXR0ZXIoJ2JyZWFrcG9pbnRzJyk7XG4gICAgICAgIGlmICh0aGlzLm92ZXJsYXkpIHtcbiAgICAgICAgICAgIGNtLnJlbW92ZU92ZXJsYXkodGhpcy5vdmVybGF5LCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnR5cGUgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5tYWluLmRlYmJ1Z2luZykge1xuICAgICAgICAgICAgdGhpcy5tYWluLnNoYWRlci5jYW52YXMubG9hZCh0aGlzLm1haW4ub3B0aW9ucy5mcmFnX2hlYWRlciArIHRoaXMubWFpbi5lZGl0b3IuZ2V0VmFsdWUoKSArIHRoaXMubWFpbi5vcHRpb25zLmZyYWdfZm9vdGVyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1haW4uZGViYnVnaW5nID0gZmFsc2U7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBtYWtlTWFya2VyKGh0bWwsZXh0cmFfY2xhc3MpIHtcbiAgICBsZXQgbWFya2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbWFya2VyLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZ2VfYXNzaW5nX21hcmtlcicgKTtcbiAgICBtYXJrZXIuaW5uZXJIVE1MID0gaHRtbDtcbiAgICByZXR1cm4gbWFya2VyO1xufVxuXG5mdW5jdGlvbiBzZWFyY2hPdmVybGF5KHF1ZXJ5LCBjYXNlSW5zZW5zaXRpdmUpIHtcbiAgICBpZiAodHlwZW9mIHF1ZXJ5ID09PSAnc3RyaW5nJykge1xuICAgICAgICBxdWVyeSA9IG5ldyBSZWdFeHAocXVlcnkucmVwbGFjZSgvW1xcLVxcW1xcXVxcL1xce1xcfVxcKFxcKVxcKlxcK1xcP1xcLlxcXFxcXF5cXCRcXHxdL2csICdcXFxcJCYnKSwgY2FzZUluc2Vuc2l0aXZlID8gJ2dpJyA6ICdnJyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKCFxdWVyeS5nbG9iYWwpIHtcbiAgICAgICAgcXVlcnkgPSBuZXcgUmVnRXhwKHF1ZXJ5LnNvdXJjZSwgcXVlcnkuaWdub3JlQ2FzZSA/ICdnaScgOiAnZycpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHRva2VuOiBmdW5jdGlvbihzdHJlYW0pIHtcbiAgICAgICAgICAgIHF1ZXJ5Lmxhc3RJbmRleCA9IHN0cmVhbS5wb3M7XG4gICAgICAgICAgICB2YXIgbWF0Y2ggPSBxdWVyeS5leGVjKHN0cmVhbS5zdHJpbmcpO1xuICAgICAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoLmluZGV4ID09PSBzdHJlYW0ucG9zKSB7XG4gICAgICAgICAgICAgICAgc3RyZWFtLnBvcyArPSBtYXRjaFswXS5sZW5ndGggfHwgMTtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3NlYXJjaGluZyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgIHN0cmVhbS5wb3MgPSBtYXRjaC5pbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0cmVhbS5za2lwVG9FbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG4iLCJpbXBvcnQgTWVudUl0ZW0gZnJvbSAnLi4vTWVudUl0ZW0nO1xuaW1wb3J0IE1vZGFsIGZyb20gJy4vTW9kYWwnO1xuaW1wb3J0IHsgc2F2ZU9uU2VydmVyLCBjcmVhdGVPcGVuRnJhbWVBcnR3b3JrIH0gZnJvbSAnLi4vLi4vaW8vc2hhcmUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFeHBvcnRNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBjb25zdHJ1Y3RvciAoQ1NTX1BSRUZJWCwgcHJvcGVydGllcykge1xuICAgICAgICBzdXBlcihDU1NfUFJFRklYLCBwcm9wZXJ0aWVzKTtcbiAgICAgICAgdGhpcy5tYWluID0gcHJvcGVydGllcy5tYWluO1xuXG4gICAgICAgIHRoaXMuc2F2ZSA9IG5ldyBNZW51SXRlbSh0aGlzLmVsLCAnZ2Vfc3ViX21lbnUnLCAnRG93bmxvYWQgZmlsZScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgcHJvcGVydGllcy5tYWluLmRvd25sb2FkKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuY29kZVVSTCA9IG5ldyBNZW51SXRlbSh0aGlzLmVsLCAnZ2Vfc3ViX21lbnUnLCAnQ29kZSBVUkwuLi4nLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHNhdmVPblNlcnZlcih0aGlzLm1haW4sIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHByb21wdCgnVXNlIHRoaXMgdXJsIHRvIHNoYXJlIHlvdXIgY29kZScsICdodHRwOi8vdGhlYm9va29mc2hhZGVycy5jb20vZWRpdC5waHA/bG9nPScgKyBldmVudC5uYW1lKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZU1vZGFsKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zaGFkZXJVUkwgPSBuZXcgTWVudUl0ZW0odGhpcy5lbCwgJ2dlX3N1Yl9tZW51JywgJ0FydHdvcmsgVVJMLi4uJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBzYXZlT25TZXJ2ZXIodGhpcy5tYWluLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBwcm9tcHQoJ1VzZSB0aGlzIHVybCB0byBzaGFyZSB5b3VyIGFydHdvcmsnLCAnaHR0cDovL3BsYXllci50aGVib29rb2ZzaGFkZXJzLmNvbS8/bG9nPScgKyBldmVudC5uYW1lKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZU1vZGFsKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IHNoYXJlT0YgPSBuZXcgTWVudUl0ZW0odGhpcy5lbCwgJ2dlX3N1Yl9tZW51JywgJ0FydHdvcmsgdG8gW29dJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBzaGFyZU9GLmVsLmlubmVySFRNTCA9ICdBcnR3b3JrIHRvIFtvXTogYWRkaW5nIHRvIGNvbGxlY3Rpb24nO1xuICAgICAgICAgICAgc2F2ZU9uU2VydmVyKHRoaXMubWFpbiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgY3JlYXRlT3BlbkZyYW1lQXJ0d29yayh0aGlzLm1haW4sIGV2ZW50Lm5hbWUsIGV2ZW50LnVybCwgKHN1Y2Nlc3MpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJlT0YuZWwuaW5uZXJIVE1MID0gJ0FydHdvcmsgdG8gW29dOiBhZGRlZCEnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmVPRi5lbC5pbm5lckhUTUwgPSAnQXJ0d29yayB0byBbb106IGZhaWxlZCA6KCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFyZU9GLmVsLmlubmVySFRNTCA9ICdbb10nO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVNb2RhbCgpO1xuICAgICAgICAgICAgICAgICAgICB9LCA0MDAwKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBzdWJzY3JpYmVNaXhpbiB9IGZyb20gJy4uLy4uL3Rvb2xzL21peGluJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWwge1xuICAgIGNvbnN0cnVjdG9yIChDU1NfUFJFRklYLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHN1YnNjcmliZU1peGluKHRoaXMpO1xuICAgICAgICB0aGlzLkNTU19QUkVGSVggPSBDU1NfUFJFRklYO1xuXG4gICAgICAgIHByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzIHx8IHt9O1xuICAgICAgICBmb3IgKGxldCBwcm9wIGluIHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHRoaXNbcHJvcF0gPSBwcm9wZXJ0aWVzW3Byb3BdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aGlzLmVsLmNsYXNzTmFtZSA9IHRoaXMuQ1NTX1BSRUZJWCArICdfbW9kYWwgZ2VfbW9kYWwnO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuYmdDb2xvcjtcbiAgICAgICAgdGhpcy5lbC5pbm5lckhUTUwgPSB0aGlzLmlubmVySFRNTCB8fCAnJztcblxuICAgICAgICBpZiAodGhpcy5lbGVtZW50cykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnRzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgY2xvc2UgKCkge1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ2Nsb3NlJyk7XG4gICAgfVxuXG4gICAgc2hvd0F0IChjbSkge1xuICAgICAgICBsZXQgY3Vyc29yID0gY20uY3Vyc29yQ29vcmRzKHRydWUsICdwYWdlJyk7XG4gICAgICAgIGxldCB4ID0gY3Vyc29yLmxlZnQ7XG4gICAgICAgIGxldCB5ID0gY3Vyc29yLnRvcDtcblxuICAgICAgICB5ICs9IDMwO1xuXG4gICAgICAgIHRoaXMucHJlc2VudE1vZGFsKHgsIHkpO1xuICAgIH1cblxuICAgIHByZXNlbnRNb2RhbCAoeCwgeSkge1xuICAgICAgICAvLyBMaXN0ZW4gZm9yIGludGVyYWN0aW9uIG91dHNpZGUgb2YgdGhlIG1vZGFsXG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25DbGlja091dHNpZGVIYW5kbGVyID0gYWRkRXZlbnQoZG9jdW1lbnQuYm9keSwgJ2NsaWNrJywgdGhpcy5vbkNsaWNrT3V0c2lkZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLm9uS2V5UHJlc3NIYW5kbGVyID0gYWRkRXZlbnQod2luZG93LCAna2V5ZG93bicsIHRoaXMub25LZXlQcmVzcywgdGhpcyk7XG4gICAgICAgIH0sIDApO1xuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IHRydWU7XG5cbiAgICAgICAgdGhpcy5lbC5zdHlsZS5sZWZ0ID0geCArICdweCc7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUudG9wID0geSArICdweCc7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUud2lkdGggPSB0aGlzLndpZHRoICsgJ3B4JztcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5oZWlnaHQgPSB0aGlzLmhlaWdodCArICdweCc7XG5cbiAgICAgICAgaWYgKHRoaXMucG9zaXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuZWwuc3R5bGUucG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmVsKTtcblxuICAgICAgICB0aGlzLnRyaWdnZXIoJ3Nob3cnKTtcbiAgICB9XG5cbiAgICBnZXRNb2RhbENsYXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5DU1NfUFJFRklYICsgJ21vZGFsJztcbiAgICB9XG5cbiAgICBvbktleVByZXNzIChldmVudCkge1xuICAgICAgICB0aGlzLnJlbW92ZU1vZGFsKCk7XG4gICAgfVxuXG4gICAgb25DbGlja091dHNpZGUgKGV2ZW50KSB7XG4gICAgICAgIC8vIEhBQ0tZISFcbiAgICAgICAgLy8gQSBjbGljayBldmVudCBmaXJlcyBvbiB0aGUgYm9keSBhZnRlciBtb3VzZWRvd24gLSBtb3VzZW1vdmUsIHNpbXVsdGFuZW91c2x5IHdpdGhcbiAgICAgICAgLy8gbW91c2V1cC4gU28gaWYgc29tZW9uZSBzdGFydGVkIGEgbW91c2UgYWN0aW9uIGluc2lkZSB0aGUgbW9kYWwgYW5kIHRoZW5cbiAgICAgICAgLy8gbW91c2V1cCdkIG91dHNpZGUgb2YgaXQsIGl0IGZpcmVzIGEgY2xpY2sgZXZlbnQgb24gdGhlIGJvZHksIHRodXMsIGNhdXNpbmcgdGhlXG4gICAgICAgIC8vIG1vZGFsIHRvIGRpc2FwcGVhciB3aGVuIHRoZSB1c2VyIGRvZXMgbm90IGV4cGVjdCBpdCB0bywgc2luY2UgdGhlIG1vdXNlIGRvd24gZXZlbnRcbiAgICAgICAgLy8gZGlkIG5vdCBzdGFydCBvdXRzaWRlIHRoZSBtb2RhbC5cbiAgICAgICAgLy8gVGhlcmUgbWlnaHQgYmUgKG9yIHNob3VsZCBiZSkgYSBiZXR0ZXIgd2F5IHRvIHRyYWNrIHRoaXMsIGJ1dCByaWdodCBub3csIGp1c3QgY2FuY2VsXG4gICAgICAgIC8vIHRoZSBldmVudCBpZiB0aGUgdGFyZ2V0IGVuZHMgdXAgYmVpbmcgb24gdGhlIGJvZHkgZGlyZWN0bHkgcmF0aGVyIHRoYW4gb24gb25lIG9mIHRoZVxuICAgICAgICAvLyBvdGhlciBjaGlsZCBlbGVtZW50cy5cbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVuZCB0aGlzIHNwZWNpZmljIGhhY2t5IHBhcnRcbiAgICAgICAgbGV0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgd2hpbGUgKHRhcmdldCAhPT0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmICF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuZ2V0TW9kYWxDbGFzcygpKSkge1xuICAgICAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnModGhpcy5nZXRNb2RhbENsYXNzKCkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVNb2RhbCgpO1xuICAgICAgICAgICAgfSAgICBcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqICBSZW1vdmVzIG1vZGFsIGZyb20gRE9NIGFuZCBkZXN0cm95cyByZWxhdGVkIGV2ZW50IGxpc3RlbmVyc1xuICAgICAqL1xuICAgIHJlbW92ZU1vZGFsICgpIHtcbiAgICAgICAgaWYgKHRoaXMuZWwgJiYgdGhpcy5lbC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICB0aGlzLmVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmVtb3ZlRXZlbnQoZG9jdW1lbnQuYm9keSwgJ2NsaWNrJywgdGhpcy5vbkNsaWNrT3V0c2lkZUhhbmRsZXIpO1xuICAgICAgICB0aGlzLm9uQ2xpY2tPdXRzaWRlSGFuZGxlciA9IG51bGw7XG4gICAgICAgIHJlbW92ZUV2ZW50KHdpbmRvdywgJ2tleWRvd24nLCB0aGlzLm9uS2V5UHJlc3NIYW5kbGVyKTtcbiAgICAgICAgdGhpcy5vbktleVByZXNzSGFuZGxlciA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuICAgIH1cbn1cblxuLyogRXZlbnQgaGFuZGxpbmcgKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRFdmVudCAoZWxlbWVudCwgZXZlbnQsIGNhbGxiYWNrLCBjYWxsZXIpIHtcbiAgICBsZXQgaGFuZGxlcjtcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBjYWxsYmFjay5jYWxsKGNhbGxlciwgZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIHJldHVybiBoYW5kbGVyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRXZlbnQgKGVsZW1lbnQsIGV2ZW50LCBjYWxsYmFjaykge1xuICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgY2FsbGJhY2ssIGZhbHNlKTtcbn1cbiIsIi8qXG5PcmlnaW5hbDogaHR0cHM6Ly9naXRodWIuY29tL3RhbmdyYW1zL3RhbmdyYW0tcGxheS9ibG9iL2doLXBhZ2VzL3NyYy9qcy9hZGRvbnMvdWkvd2lkZ2V0cy9Db2xvclBpY2tlck1vZGFsLmpzXG5BdXRob3I6IExvdSBIdWFuZyAoQHNhaWtvZmlzaClcbiovXG5cbmltcG9ydCBQaWNrZXIgZnJvbSAnLi9QaWNrZXInO1xuaW1wb3J0IENvbG9yIGZyb20gJy4vdHlwZXMvQ29sb3InO1xuaW1wb3J0IHsgYWRkRXZlbnQsIHJlbW92ZUV2ZW50IH0gZnJvbSAnLi9QaWNrZXInO1xuaW1wb3J0IHsgZ2V0RGV2aWNlUGl4ZWxSYXRpbyB9IGZyb20gJy4uLy4uL3Rvb2xzL2NvbW1vbic7XG5cbmltcG9ydCB7IHN1YnNjcmliZUludGVyYWN0aXZlRG9tIH0gZnJvbSAnLi4vLi4vdG9vbHMvaW50ZXJhY3RpdmVEb20nO1xuXG4vLyBTb21lIGNvbW1vbiB1c2UgdmFyaWFibGVzXG5sZXQgY3VycmVudFRhcmdldDtcbmxldCBjdXJyZW50VGFyZ2V0SGVpZ2h0ID0gMDtcbmxldCBkb21DYWNoZTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29sb3JQaWNrZXIgZXh0ZW5kcyBQaWNrZXIge1xuICAgIGNvbnN0cnVjdG9yIChjb2xvciA9ICd2ZWMzKDEuMCwwLjAsMC4wKScsIHByb3BlcnRpZXMgPSB7fSkge1xuICAgICAgICBzdXBlcignZ2VfY29sb3JwaWNrZXJfJywgcHJvcGVydGllcyk7XG5cbiAgICAgICAgdGhpcy53aWR0aCA9IDI1MDsgLy8gaW4gcGl4ZWxzXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMjUwOyAvLyBpbiBwaXhlbHNcblxuICAgICAgICB0aGlzLmRpc2MgPSB7IHdpZHRoOiAyMDAsIGhlaWdodDogMjAwIH07XG4gICAgICAgIHRoaXMuYmFybHVtID0geyB3aWR0aDogMjUsIGhlaWdodDogMjAwIH07XG5cbiAgICAgICAgdGhpcy5zZXRWYWx1ZShjb2xvcik7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH1cblxuICAgIGluaXQoKSB7XG4gICAgICAgIGlmICghZG9tQ2FjaGUpIHtcbiAgICAgICAgICAgIGxldCBtb2RhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgbGV0IHBhdGNoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBsZXQgbWFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBsZXQgZGlzYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICAgICAgbGV0IGNvdmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBsZXQgY3Vyc29yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBsZXQgYmFyYmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGxldCBiYXJ3aGl0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgbGV0IGJhcmx1bSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICAgICAgbGV0IGJhcmN1cnNvcnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGxldCBsZWZ0Y3Vyc29yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBsZXQgcmlnaHRjdXJzb3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICAgICAgbW9kYWwuY2xhc3NOYW1lID0gdGhpcy5DU1NfUFJFRklYICsgJ21vZGFsIGdlX3BpY2tlcl9tb2RhbCc7XG4gICAgICAgICAgICBtb2RhbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmJnQ29sb3I7XG4gICAgICAgICAgICBwYXRjaC5jbGFzc05hbWUgPSB0aGlzLkNTU19QUkVGSVggKyAncGF0Y2gnO1xuICAgICAgICAgICAgcGF0Y2guc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5iZ0NvbG9yO1xuICAgICAgICAgICAgbWFwLmNsYXNzTmFtZSA9IHRoaXMuQ1NTX1BSRUZJWCArICdoc3YtbWFwJztcbiAgICAgICAgICAgIGRpc2MuY2xhc3NOYW1lID0gdGhpcy5DU1NfUFJFRklYICsgJ2Rpc2MnO1xuICAgICAgICAgICAgZGlzYy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmJnQ29sb3I7XG4gICAgICAgICAgICBjb3Zlci5jbGFzc05hbWUgPSB0aGlzLkNTU19QUkVGSVggKyAnZGlzYy1jb3Zlcic7XG4gICAgICAgICAgICBjdXJzb3IuY2xhc3NOYW1lID0gdGhpcy5DU1NfUFJFRklYICsgJ2Rpc2MtY3Vyc29yJztcbiAgICAgICAgICAgIGJhcmJnLmNsYXNzTmFtZSA9IHRoaXMuQ1NTX1BSRUZJWCArICdiYXItYmcnO1xuICAgICAgICAgICAgYmFyd2hpdGUuY2xhc3NOYW1lID0gdGhpcy5DU1NfUFJFRklYICsgJ2Jhci13aGl0ZSc7XG4gICAgICAgICAgICBiYXJsdW0uY2xhc3NOYW1lID0gdGhpcy5DU1NfUFJFRklYICsgJ2Jhci1sdW1pbmFuY2UnO1xuICAgICAgICAgICAgYmFyY3Vyc29ycy5jbGFzc05hbWUgPSB0aGlzLkNTU19QUkVGSVggKyAnYmFyLWN1cnNvcnMnO1xuICAgICAgICAgICAgbGVmdGN1cnNvci5jbGFzc05hbWUgPSB0aGlzLkNTU19QUkVGSVggKyAnYmFyLWN1cnNvci1sZWZ0JztcbiAgICAgICAgICAgIHJpZ2h0Y3Vyc29yLmNsYXNzTmFtZSA9IHRoaXMuQ1NTX1BSRUZJWCArICdiYXItY3Vyc29yLXJpZ2h0JztcblxuICAgICAgICAgICAgbWFwLmlkID0gJ2NwLW1hcCc7XG4gICAgICAgICAgICBiYXJjdXJzb3JzLmlkID0gJ2NwLWJhcic7XG5cbiAgICAgICAgICAgIG1vZGFsLmFwcGVuZENoaWxkKHBhdGNoKTtcbiAgICAgICAgICAgIG1vZGFsLmFwcGVuZENoaWxkKG1hcCk7XG5cbiAgICAgICAgICAgIG1hcC5hcHBlbmRDaGlsZChkaXNjKTtcbiAgICAgICAgICAgIG1hcC5hcHBlbmRDaGlsZChjb3Zlcik7XG4gICAgICAgICAgICBtYXAuYXBwZW5kQ2hpbGQoY3Vyc29yKTtcbiAgICAgICAgICAgIG1hcC5hcHBlbmRDaGlsZChiYXJiZyk7XG4gICAgICAgICAgICBtYXAuYXBwZW5kQ2hpbGQoYmFyd2hpdGUpO1xuICAgICAgICAgICAgbWFwLmFwcGVuZENoaWxkKGJhcmx1bSk7XG4gICAgICAgICAgICBtYXAuYXBwZW5kQ2hpbGQoYmFyY3Vyc29ycyk7XG4gICAgICAgICAgICBiYXJjdXJzb3JzLmFwcGVuZENoaWxkKGxlZnRjdXJzb3IpO1xuICAgICAgICAgICAgYmFyY3Vyc29ycy5hcHBlbmRDaGlsZChyaWdodGN1cnNvcik7XG5cbiAgICAgICAgICAgIGRvbUNhY2hlID0gbW9kYWw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXR1cm5zIGEgY2xvbmUgb2YgdGhlIGNhY2hlZCBkb2N1bWVudCBmcmFnbWVudFxuICAgICAgICB0aGlzLmVsID0gZG9tQ2FjaGUuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICBzdWJzY3JpYmVJbnRlcmFjdGl2ZURvbSh0aGlzLmVsLCB7IG1vdmU6IHRydWUsIHJlc2l6ZTogZmFsc2UsIHNuYXA6IGZhbHNlIH0pO1xuXG4gICAgICAgIC8vIFRPRE86IEltcHJvdmUgdGhlc2UgcmVmZXJlbmNlc1xuICAgICAgICAvLyBUaGUgY2FjaGluZyBvZiByZWZlcmVuY2VzIGlzIGxpa2VseSB0byBiZSBpbXBvcnRhbnQgZm9yIHNwZWVkXG4gICAgICAgIHRoaXMuZG9tID0ge307XG4gICAgICAgIHRoaXMuZG9tLmhzdk1hcCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLmdlX2NvbG9ycGlja2VyX2hzdi1tYXAnKTtcbiAgICAgICAgdGhpcy5kb20uaHN2TWFwQ292ZXIgPSB0aGlzLmRvbS5oc3ZNYXAuY2hpbGRyZW5bMV07IC8vIHdlbGwuLi5cbiAgICAgICAgdGhpcy5kb20uaHN2TWFwQ3Vyc29yID0gdGhpcy5kb20uaHN2TWFwLmNoaWxkcmVuWzJdO1xuICAgICAgICB0aGlzLmRvbS5oc3ZCYXJCR0xheWVyID0gdGhpcy5kb20uaHN2TWFwLmNoaWxkcmVuWzNdO1xuICAgICAgICB0aGlzLmRvbS5oc3ZCYXJXaGl0ZUxheWVyID0gdGhpcy5kb20uaHN2TWFwLmNoaWxkcmVuWzRdO1xuICAgICAgICB0aGlzLmRvbS5oc3ZCYXJDdXJzb3JzID0gdGhpcy5kb20uaHN2TWFwLmNoaWxkcmVuWzZdO1xuICAgICAgICB0aGlzLmRvbS5oc3ZMZWZ0Q3Vyc29yID0gdGhpcy5kb20uaHN2QmFyQ3Vyc29ycy5jaGlsZHJlblswXTtcbiAgICAgICAgdGhpcy5kb20uaHN2UmlnaHRDdXJzb3IgPSB0aGlzLmRvbS5oc3ZCYXJDdXJzb3JzLmNoaWxkcmVuWzFdO1xuXG4gICAgICAgIHRoaXMuZG9tLmNvbG9yRGlzYyA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLmdlX2NvbG9ycGlja2VyX2Rpc2MnKTtcbiAgICAgICAgdGhpcy5kb20ubHVtaW5hbmNlQmFyID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcuZ2VfY29sb3JwaWNrZXJfYmFyLWx1bWluYW5jZScpO1xuXG4gICAgICAgIGlmICh0aGlzLmxpbmtfYnV0dG9uKSB7XG4gICAgICAgICAgICBsZXQgbGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgbGJ1dHRvbi5pbm5lckhUTUwgPSAnKyc7XG4gICAgICAgICAgICBsYnV0dG9uLmNsYXNzTmFtZSA9IHRoaXMuQ1NTX1BSRUZJWCArICdsaW5rLWJ1dHRvbic7XG4gICAgICAgICAgICBsYnV0dG9uLnN0eWxlLmNvbG9yID0gdGhpcy5mZ0NvbG9yO1xuICAgICAgICAgICAgdGhpcy5lbC5hcHBlbmRDaGlsZChsYnV0dG9uKTtcblxuICAgICAgICAgICAgbGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2xpbmtfYnV0dG9uJywgdGhpcy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmxpbmtfYnV0dG9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlua19idXR0b24odGhpcy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlTW9kYWwoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZHJhdyAoKSB7XG4gICAgICAgIC8vICBSZW5kZXIgY29sb3IgcGF0Y2hcbiAgICAgICAgbGV0IHBhdGNoID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcuZ2VfY29sb3JwaWNrZXJfcGF0Y2gnKTtcbiAgICAgICAgcGF0Y2guc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy52YWx1ZS5nZXRTdHJpbmcoJ3JnYicpO1xuXG4gICAgICAgIC8vICBSZW5kZXIgSFNWIHBpY2tlclxuICAgICAgICBsZXQgY29sb3IgPSB0aGlzLnZhbHVlLmNvbG9ycztcbiAgICAgICAgbGV0IGNvbG9yRGlzY1JhZGl1cyA9IHRoaXMuZG9tLmNvbG9yRGlzYy5vZmZzZXRIZWlnaHQgLyAyO1xuICAgICAgICBsZXQgcGkyID0gTWF0aC5QSSAqIDI7XG4gICAgICAgIGxldCB4ID0gTWF0aC5jb3MocGkyIC0gY29sb3IuaHN2LmggKiBwaTIpO1xuICAgICAgICBsZXQgeSA9IE1hdGguc2luKHBpMiAtIGNvbG9yLmhzdi5oICogcGkyKTtcbiAgICAgICAgbGV0IHIgPSBjb2xvci5oc3YucyAqIChjb2xvckRpc2NSYWRpdXMgLSA1KTtcblxuICAgICAgICB0aGlzLmRvbS5oc3ZNYXBDb3Zlci5zdHlsZS5vcGFjaXR5ID0gMSAtIGNvbG9yLmhzdi52IC8gMjU1O1xuICAgICAgICAvLyB0aGlzIGlzIHRoZSBmYXN0ZXIgdmVyc2lvbi4uLlxuICAgICAgICB0aGlzLmRvbS5oc3ZCYXJXaGl0ZUxheWVyLnN0eWxlLm9wYWNpdHkgPSAxIC0gY29sb3IuaHN2LnM7XG4gICAgICAgIHRoaXMuZG9tLmhzdkJhckJHTGF5ZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JnYignICtcbiAgICAgICAgICAgIGNvbG9yLmh1ZVJHQi5yICsgJywnICtcbiAgICAgICAgICAgIGNvbG9yLmh1ZVJHQi5nICsgJywnICtcbiAgICAgICAgICAgIGNvbG9yLmh1ZVJHQi5iICsgJyknO1xuXG4gICAgICAgIHRoaXMuZG9tLmhzdk1hcEN1cnNvci5zdHlsZS5jc3NUZXh0ID1cbiAgICAgICAgICAgICdsZWZ0OiAnICsgKHggKiByICsgY29sb3JEaXNjUmFkaXVzKSArICdweDsnICtcbiAgICAgICAgICAgICd0b3A6ICcgKyAoeSAqIHIgKyBjb2xvckRpc2NSYWRpdXMpICsgJ3B4OycgK1xuICAgICAgICAgICAgJ2JvcmRlci1jb2xvcjogJyArIChjb2xvci5sdW1pbmFuY2UgPiAwLjIyID8gJyMzMzM7JyA6ICcjZGRkJyk7XG5cbiAgICAgICAgaWYgKGNvbG9yLmx1bWluYW5jZSA+IDAuMjIpIHtcbiAgICAgICAgICAgIHRoaXMuZG9tLmhzdkJhckN1cnNvcnMuY2xhc3NMaXN0LmFkZCgnZ2VfY29sb3JwaWNrZXJfZGFyaycpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kb20uaHN2QmFyQ3Vyc29ycy5jbGFzc0xpc3QucmVtb3ZlKCdnZV9jb2xvcnBpY2tlcl9kYXJrJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5kb20uaHN2TGVmdEN1cnNvcikge1xuICAgICAgICAgICAgdGhpcy5kb20uaHN2TGVmdEN1cnNvci5zdHlsZS50b3AgPSB0aGlzLmRvbS5oc3ZSaWdodEN1cnNvci5zdHlsZS50b3AgPSAoKDEgLSBjb2xvci5oc3YudiAvIDI1NSkgKiBjb2xvckRpc2NSYWRpdXMgKiAyKSArICdweCc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcmVzZW50TW9kYWwgKHgsIHkpIHtcbiAgICAgICAgc3VwZXIucHJlc2VudE1vZGFsKHgsIHkpO1xuXG4gICAgICAgIC8vIC8vIExpc3RlbiBmb3IgaW50ZXJhY3Rpb24gb24gdGhlIEhTViBtYXBcbiAgICAgICAgdGhpcy5vbkhzdkRvd25IYW5kbGVyID0gYWRkRXZlbnQodGhpcy5kb20uaHN2TWFwLCAnbW91c2Vkb3duJywgdGhpcy5vbkhzdkRvd24sIHRoaXMpO1xuXG4gICAgICAgIGxldCBjb2xvckRpc2MgPSB0aGlzLmRvbS5jb2xvckRpc2M7XG5cbiAgICAgICAgaWYgKGNvbG9yRGlzYy5nZXRDb250ZXh0KSB7XG4gICAgICAgICAgICAvLyBIU1YgY29sb3Igd2hlZWwgd2l0aCB3aGl0ZSBjZW50ZXJcbiAgICAgICAgICAgIGxldCBkaXNrQ29udGV4dCA9IGNvbG9yRGlzYy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgICAgbGV0IHJhdGlvID0gZ2V0RGV2aWNlUGl4ZWxSYXRpbyhkaXNrQ29udGV4dCk7XG4gICAgICAgICAgICBsZXQgd2lkdGggPSB0aGlzLmRpc2Mud2lkdGggLyByYXRpbztcbiAgICAgICAgICAgIGxldCBoZWlnaHQgPSB0aGlzLmRpc2MuaGVpZ2h0IC8gcmF0aW87XG4gICAgICAgICAgICB0aGlzLmRvbS5jb2xvckRpc2Mud2lkdGggPSB3aWR0aCAqIHJhdGlvO1xuICAgICAgICAgICAgdGhpcy5kb20uY29sb3JEaXNjLmhlaWdodCA9IGhlaWdodCAqIHJhdGlvO1xuICAgICAgICAgICAgZGlza0NvbnRleHQuc2NhbGUocmF0aW8sIHJhdGlvKTtcblxuICAgICAgICAgICAgZHJhd0Rpc2soXG4gICAgICAgICAgICAgICAgZGlza0NvbnRleHQsXG4gICAgICAgICAgICAgICAgW3dpZHRoIC8gMiwgaGVpZ2h0IC8gMl0sXG4gICAgICAgICAgICAgICAgW3dpZHRoIC8gMiAtIDEsIGhlaWdodCAvIDIgLSAxXSxcbiAgICAgICAgICAgICAgICAzNjAsXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKGN0eCwgYW5nbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGdyYWRpZW50ID0gY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KDEsIDEsIDEsIDEsIDEsIDApO1xuICAgICAgICAgICAgICAgICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMCwgJ2hzbCgnICsgKDM2MCAtIGFuZ2xlICsgMCkgKyAnLCAxMDAlLCA1MCUpJyk7XG4gICAgICAgICAgICAgICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgxLCAnI2ZmZicpO1xuXG4gICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBncmFkaWVudDtcbiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBncmF5IGJvcmRlclxuICAgICAgICAgICAgZHJhd0NpcmNsZShcbiAgICAgICAgICAgICAgICBkaXNrQ29udGV4dCxcbiAgICAgICAgICAgICAgICBbd2lkdGggLyAyLCBoZWlnaHQgLyAyXSxcbiAgICAgICAgICAgICAgICBbd2lkdGggLyAyLCBoZWlnaHQgLyAyXSxcbiAgICAgICAgICAgICAgICB0aGlzLmJnQ29sb3IsLy8gJyMzMDMwMzAnLFxuICAgICAgICAgICAgICAgIDIgLyByYXRpb1xuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gZHJhdyB0aGUgbHVtaW5hbmNlQmFyIGJhclxuICAgICAgICAgICAgbGV0IGN0eCA9IHRoaXMuZG9tLmx1bWluYW5jZUJhci5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgICAgdGhpcy5kb20ubHVtaW5hbmNlQmFyLndpZHRoID0gdGhpcy5iYXJsdW0ud2lkdGg7XG4gICAgICAgICAgICB0aGlzLmRvbS5sdW1pbmFuY2VCYXIuaGVpZ2h0ID0gdGhpcy5iYXJsdW0uaGVpZ2h0ICogcmF0aW87XG4gICAgICAgICAgICBjdHguc2NhbGUocmF0aW8sIHJhdGlvKTtcbiAgICAgICAgICAgIGxldCBncmFkaWVudCA9IGN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLCAwLCAwLCB0aGlzLmJhcmx1bS5oZWlnaHQgLyByYXRpbyk7XG5cbiAgICAgICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLCAndHJhbnNwYXJlbnQnKTtcbiAgICAgICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgxLCAnYmxhY2snKTtcblxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGdyYWRpZW50O1xuICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIDMwLCAyMDApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZHJhdygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqICBVcGRhdGVzIG9ubHkgdGhlIGNvbG9yIHZhbHVlIG9mIHRoZSBjb2xvciBwaWNrZXJcbiAgICAgKiAgYW5kIHRoZSB2aWV3LiBEZXNpZ25lZCB0byBiZSBjYWxsZWQgYnkgZXh0ZXJuYWwgbW9kdWxlc1xuICAgICAqICBzbyB0aGF0IGl0IGNhbiB1cGRhdGUgaXRzIGludGVybmFsIHZhbHVlIGZyb20gYW4gb3V0c2lkZSBzb3VyY2UuXG4gICAgICogIERvZXMgbm8gRE9NIGNyZWF0aW9uICYgb3RoZXIgaW5pdGlhbGl6YXRpb24gd29yay5cbiAgICAgKi9cbiAgICBzZXRWYWx1ZSAoY29sb3IpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IG5ldyBDb2xvcihjb2xvcik7XG4gICAgfVxuXG4gICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAgIC8qIC0tLS0gSFNWLWNpcmNsZSBjb2xvciBwaWNrZXIgLS0tLS0gKi9cbiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgICAvLyBBY3Rpb25zIHdoZW4gdXNlciBtb3VzZXMgZG93biBvbiBIU1YgY29sb3IgbWFwXG4gICAgb25Ic3ZEb3duIChldmVudCkge1xuICAgICAgICBsZXQgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LnNyY0VsZW1lbnQ7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgY3VycmVudFRhcmdldCA9IHRhcmdldC5pZCA/IHRhcmdldCA6IHRhcmdldC5wYXJlbnROb2RlO1xuICAgICAgICBjdXJyZW50VGFyZ2V0SGVpZ2h0ID0gY3VycmVudFRhcmdldC5vZmZzZXRIZWlnaHQ7IC8vIGFzIGRpYW1ldGVyIG9mIGNpcmNsZVxuXG4gICAgICAgIC8vIFN0YXJ0cyBsaXN0ZW5pbmcgZm9yIG1vdXNlbW92ZSBhbmQgbW91c2V1cCBldmVudHNcbiAgICAgICAgdGhpcy5vbkhzdk1vdmVIYW5kbGVyID0gYWRkRXZlbnQodGhpcy5lbCwgJ21vdXNlbW92ZScsIHRoaXMub25Ic3ZNb3ZlLCB0aGlzKTtcbiAgICAgICAgdGhpcy5vbkhzdlVwSGFuZGxlciA9IGFkZEV2ZW50KHdpbmRvdywgJ21vdXNldXAnLCB0aGlzLm9uSHN2VXAsIHRoaXMpO1xuXG4gICAgICAgIHRoaXMub25Ic3ZNb3ZlKGV2ZW50KTtcblxuICAgICAgICAvLyBIaWRlcyBtb3VzZSBjdXJzb3IgYW5kIGJlZ2lucyByZW5kZXJpbmcgbG9vcFxuICAgICAgICB0aGlzLmRvbS5oc3ZNYXAuY2xhc3NMaXN0LmFkZCgnZ2VfY29sb3JwaWNrZXJfbm8tY3Vyc29yJyk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc3RhcnQoKTtcbiAgICB9XG5cbiAgICAvLyBBY3Rpb25zIHdoZW4gdXNlciBtb3ZlcyBhcm91bmQgb24gSFNWIGNvbG9yIG1hcFxuICAgIG9uSHN2TW92ZSAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgbGV0IHIsIHgsIHksIGgsIHM7XG4gICAgICAgIGlmIChldmVudC50YXJnZXQgPT09IHRoaXMuZG9tLmhzdk1hcENvdmVyICYmIGN1cnJlbnRUYXJnZXQgPT09IHRoaXMuZG9tLmhzdk1hcCkgeyAvLyB0aGUgY2lyY2xlXG4gICAgICAgICAgICByID0gY3VycmVudFRhcmdldEhlaWdodCAvIDIsXG4gICAgICAgICAgICB4ID0gZXZlbnQub2Zmc2V0WCAtIHIsXG4gICAgICAgICAgICB5ID0gZXZlbnQub2Zmc2V0WSAtIHIsXG4gICAgICAgICAgICBoID0gKDM2MCAtICgoTWF0aC5hdGFuMih5LCB4KSAqIDE4MCAvIE1hdGguUEkpICsgKHkgPCAwID8gMzYwIDogMCkpKSAvIDM2MCxcbiAgICAgICAgICAgIHMgPSAoTWF0aC5zcXJ0KCh4ICogeCkgKyAoeSAqIHkpKSAvIHIpO1xuICAgICAgICAgICAgdGhpcy52YWx1ZS5zZXQoeyBoLCBzIH0sICdoc3YnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChldmVudC50YXJnZXQgPT09IHRoaXMuZG9tLmhzdkJhckN1cnNvcnMgJiYgY3VycmVudFRhcmdldCA9PT0gdGhpcy5kb20uaHN2QmFyQ3Vyc29ycykgeyAvLyB0aGUgbHVtaW5hbmNlQmFyXG4gICAgICAgICAgICBsZXQgdiA9IChjdXJyZW50VGFyZ2V0SGVpZ2h0IC0gKGV2ZW50Lm9mZnNldFkpKSAvIGN1cnJlbnRUYXJnZXRIZWlnaHQ7XG4gICAgICAgICAgICB2ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgdikpICogMjU1O1xuICAgICAgICAgICAgdGhpcy52YWx1ZS5zZXQoeyB2OiB2IH0sICdoc3YnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlcignY2hhbmdlZCcsIHRoaXMudmFsdWUpO1xuICAgIH1cblxuICAgIC8vIEFjdGlvbnMgd2hlbiB1c2VyIG1vdXNlcyB1cCBvbiBIU1YgY29sb3IgbWFwXG4gICAgb25Ic3ZVcCAoZXZlbnQpIHtcbiAgICAgICAgLy8gU3RvcHMgcmVuZGVyaW5nIGFuZCByZXR1cm5zIG1vdXNlIGN1cnNvclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnN0b3AoKTtcbiAgICAgICAgdGhpcy5kb20uaHN2TWFwLmNsYXNzTGlzdC5yZW1vdmUoJ2dlX2NvbG9ycGlja2VyX25vLWN1cnNvcicpO1xuICAgICAgICB0aGlzLmRlc3Ryb3lFdmVudHMoKTtcbiAgICB9XG5cbiAgICAvLyBEZXN0cm95IGV2ZW50IGxpc3RlbmVycyB0aGF0IGV4aXN0IGR1cmluZyBtb3VzZWRvd24gY29sb3JwaWNrZXIgaW50ZXJhY3Rpb25cbiAgICBkZXN0cm95RXZlbnRzICgpIHtcbiAgICAgICAgcmVtb3ZlRXZlbnQodGhpcy5lbCwgJ21vdXNlbW92ZScsIHRoaXMub25Ic3ZNb3ZlSGFuZGxlcik7XG4gICAgICAgIHRoaXMub25Ic3ZNb3ZlSGFuZGxlciA9IG51bGw7XG4gICAgICAgIHJlbW92ZUV2ZW50KHdpbmRvdywgJ21vdXNldXAnLCB0aGlzLm9uSHN2VXBIYW5kbGVyKTtcbiAgICAgICAgdGhpcy5vbkhzdlVwSGFuZGxlciA9IG51bGw7XG4gICAgfVxuXG4gICAgY2xvc2UgKCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3lFdmVudHMoKTtcbiAgICAgICAgcmVtb3ZlRXZlbnQodGhpcy5kb20uaHN2TWFwLCAnbW91c2Vkb3duJywgdGhpcy5vbkhzdkRvd25IYW5kbGVyKTtcbiAgICAgICAgdGhpcy5vbkhzdkRvd25IYW5kbGVyID0gbnVsbDtcbiAgICB9XG59XG5cbi8vIGdlbmVyaWMgZnVuY3Rpb24gZm9yIGRyYXdpbmcgYSBjYW52YXMgZGlzY1xuZnVuY3Rpb24gZHJhd0Rpc2sgKGN0eCwgY29vcmRzLCByYWRpdXMsIHN0ZXBzLCBjb2xvckNhbGxiYWNrKSB7XG4gICAgbGV0IHggPSBjb29yZHNbMF0gfHwgY29vcmRzOyAvLyBjb29yZGluYXRlIG9uIHgtYXhpc1xuICAgIGxldCB5ID0gY29vcmRzWzFdIHx8IGNvb3JkczsgLy8gY29vcmRpbmF0ZSBvbiB5LWF4aXNcbiAgICBsZXQgYSA9IHJhZGl1c1swXSB8fCByYWRpdXM7IC8vIHJhZGl1cyBvbiB4LWF4aXNcbiAgICBsZXQgYiA9IHJhZGl1c1sxXSB8fCByYWRpdXM7IC8vIHJhZGl1cyBvbiB5LWF4aXNcbiAgICBsZXQgYW5nbGUgPSAzNjA7XG4gICAgbGV0IGNvZWYgPSBNYXRoLlBJIC8gMTgwO1xuXG4gICAgY3R4LnNhdmUoKTtcbiAgICBjdHgudHJhbnNsYXRlKHggLSBhLCB5IC0gYik7XG4gICAgY3R4LnNjYWxlKGEsIGIpO1xuXG4gICAgc3RlcHMgPSAoYW5nbGUgLyBzdGVwcykgfHwgMzYwO1xuXG4gICAgZm9yICg7IGFuZ2xlID4gMCA7IGFuZ2xlIC09IHN0ZXBzKSB7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgaWYgKHN0ZXBzICE9PSAzNjApIHtcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8oMSwgMSk7IC8vIHN0cm9rZVxuICAgICAgICB9XG4gICAgICAgIGN0eC5hcmMoMSwgMSwgMSxcbiAgICAgICAgICAgIChhbmdsZSAtIChzdGVwcyAvIDIpIC0gMSkgKiBjb2VmLFxuICAgICAgICAgICAgKGFuZ2xlICsgKHN0ZXBzIC8gMikgKyAxKSAqIGNvZWYpO1xuXG4gICAgICAgIGlmIChjb2xvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjb2xvckNhbGxiYWNrKGN0eCwgYW5nbGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdibGFjayc7XG4gICAgICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGN0eC5yZXN0b3JlKCk7XG59XG5cbmZ1bmN0aW9uIGRyYXdDaXJjbGUgKGN0eCwgY29vcmRzLCByYWRpdXMsIGNvbG9yLCB3aWR0aCkgeyAvLyB1c2VzIGRyYXdEaXNrXG4gICAgd2lkdGggPSB3aWR0aCB8fCAxO1xuICAgIHJhZGl1cyA9IFtcbiAgICAgICAgKHJhZGl1c1swXSB8fCByYWRpdXMpIC0gd2lkdGggLyAyLFxuICAgICAgICAocmFkaXVzWzFdIHx8IHJhZGl1cykgLSB3aWR0aCAvIDJcbiAgICBdO1xuICAgIGRyYXdEaXNrKGN0eCwgY29vcmRzLCByYWRpdXMsIDEsIGZ1bmN0aW9uIChjdHgsIGFuZ2xlKSB7XG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSB3aWR0aDtcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3IgfHwgJyMwMDAnO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgfSk7XG59XG4iLCJpbXBvcnQgUGlja2VyIGZyb20gJy4vUGlja2VyJztcbmltcG9ydCBGbG9hdCBmcm9tICcuL3R5cGVzL0Zsb2F0JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmxvYXRQaWNrZXIgZXh0ZW5kcyBQaWNrZXIge1xuICAgIGNvbnN0cnVjdG9yIChudW1iZXIsIHByb3BlcnRpZXMpIHtcbiAgICAgICAgc3VwZXIoJ2dlX2Zsb2F0cGlja2VyXycsIHByb3BlcnRpZXMpO1xuXG4gICAgICAgIHRoaXMud2lkdGggPSB0aGlzLndpZHRoIHx8IDI1MDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLmhlaWdodCB8fCA0MDtcblxuICAgICAgICB0aGlzLnByZXZPZmZzZXQgPSAwO1xuICAgICAgICB0aGlzLnNjYWxlID0gMjtcblxuICAgICAgICB0aGlzLnNldFZhbHVlKG51bWJlciB8fCAxKTtcbiAgICAgICAgdGhpcy5jcmVhdGUoKTtcbiAgICB9XG5cbiAgICBkcmF3ICgpIHtcbiAgICAgICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcblxuICAgICAgICAvLyBob3Jpem9udGFsIGxpbmVcbiAgICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmRpbUNvbG9yO1xuICAgICAgICB0aGlzLmN0eC5saW5lV2lkdGggPSAxO1xuICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgdGhpcy5jdHgubW92ZVRvKDAsIDAuNSArIHRoaXMuaGVpZ2h0ICogMC41KTtcbiAgICAgICAgdGhpcy5jdHgubGluZVRvKDAgKyB0aGlzLndpZHRoLCAwLjUgKyB0aGlzLmhlaWdodCAqIDAuNSk7XG4gICAgICAgIHRoaXMuY3R4LmNsb3NlUGF0aCgpO1xuICAgICAgICB0aGlzLmN0eC5zdHJva2UoKTtcblxuICAgICAgICAvLyB2ZXJ0aWNhbCBsaW5lXG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5mbkNvbG9yO1xuICAgICAgICB0aGlzLmN0eC5saW5lV2lkdGggPSAxO1xuICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgdGhpcy5jdHgubW92ZVRvKHRoaXMud2lkdGggKiAwLjUsIDApO1xuICAgICAgICB0aGlzLmN0eC5saW5lVG8odGhpcy53aWR0aCAqIDAuNSwgdGhpcy5oZWlnaHQpO1xuICAgICAgICB0aGlzLmN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgdGhpcy5jdHguc3Ryb2tlKCk7XG5cbiAgICAgICAgLy8gVHJpYW5nbGUgbGluZVxuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSB0aGlzLm92ZXJQb2ludCA/IHRoaXMuc2VsQ29sb3IgOiB0aGlzLmZuQ29sb3I7XG4gICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICB0aGlzLmN0eC5tb3ZlVG8odGhpcy53aWR0aCAqIDAuNSwgNSk7XG4gICAgICAgIHRoaXMuY3R4LmxpbmVUbyh0aGlzLndpZHRoICogMC40OCwgMCk7XG4gICAgICAgIHRoaXMuY3R4LmxpbmVUbyh0aGlzLndpZHRoICogMC41MiwgMCk7XG4gICAgICAgIHRoaXMuY3R4LmNsb3NlUGF0aCgpO1xuICAgICAgICB0aGlzLmN0eC5maWxsKCk7XG5cbiAgICAgICAgbGV0IHRpbWVzID0gMztcbiAgICAgICAgbGV0IHVuaXQgPSA0MDtcbiAgICAgICAgbGV0IHN0ZXAgPSB0aGlzLndpZHRoIC8gdW5pdDtcbiAgICAgICAgbGV0IHNlY3Rpb25zID0gdW5pdCAqIHRpbWVzO1xuXG4gICAgICAgIGxldCBvZmZzZXRYID0gdGhpcy5vZmZzZXRYO1xuXG4gICAgICAgIGlmIChNYXRoLmFicyh0aGlzLm9mZnNldFggLSB0aGlzLndpZHRoICogMC41KSA+IHRoaXMud2lkdGggKiAwLjUpIHtcbiAgICAgICAgICAgIG9mZnNldFggPSAodGhpcy5vZmZzZXRYIC0gdGhpcy53aWR0aCAqIDAuNSkgJSAodGhpcy53aWR0aCAqIDAuNSkgKyB0aGlzLndpZHRoO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmRpbUNvbG9yO1xuICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWN0aW9uczsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgbCA9IChpICUgKHVuaXQgLyAyKSA9PT0gMCkgPyB0aGlzLmhlaWdodCAqIDAuMzUgOiAoaSAlICh1bml0IC8gNCkgPT09IDApID8gdGhpcy5oZWlnaHQgKiAwLjIgOiB0aGlzLmhlaWdodCAqIDAuMTtcbiAgICAgICAgICAgIHRoaXMuY3R4Lm1vdmVUbyhpICogc3RlcCAtIG9mZnNldFgsIHRoaXMuaGVpZ2h0ICogMC41IC0gbCk7XG4gICAgICAgICAgICB0aGlzLmN0eC5saW5lVG8oaSAqIHN0ZXAgLSBvZmZzZXRYLCB0aGlzLmhlaWdodCAqIDAuNSArIGwpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuXG4gICAgICAgIGxldCB2YWwgPSBNYXRoLnJvdW5kKCgodGhpcy52YWx1ZSAtIHRoaXMubWluKSAvIHRoaXMucmFuZ2UpICogdGhpcy53aWR0aCk7XG5cbiAgICAgICAgLy8gcG9pbnRcbiAgICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSB0aGlzLm92ZXJQb2ludCA/IHRoaXMuc2VsQ29sb3IgOiB0aGlzLmZuQ29sb3I7XG4gICAgICAgIHRoaXMuY3R4LmxpbmVXaWR0aCA9IDE7XG4gICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICB0aGlzLmN0eC5tb3ZlVG8odGhpcy5vZmZzZXRYICsgdmFsLCB0aGlzLmhlaWdodCAqIDAuNSk7XG4gICAgICAgIHRoaXMuY3R4LmxpbmVUbyh0aGlzLm9mZnNldFggKyB2YWwsIHRoaXMuaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5jdHguY2xvc2VQYXRoKCk7XG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuXG4gICAgICAgIHRoaXMub3ZlclBvaW50ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgb25Nb3VzZURvd24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMucHJldk9mZnNldCA9IGV2ZW50Lm9mZnNldFg7XG4gICAgICAgIHN1cGVyLm9uTW91c2VEb3duKGV2ZW50KTtcbiAgICB9XG5cbiAgICAvLyBBY3Rpb25zIHdoZW4gdXNlciBtb3ZlcyBhcm91bmQgb24gSFNWIGNvbG9yIG1hcFxuICAgIG9uTW91c2VNb3ZlIChldmVudCkge1xuICAgICAgICBsZXQgeCA9IGV2ZW50Lm9mZnNldFg7XG5cbiAgICAgICAgbGV0IHZlbCA9IHggLSB0aGlzLnByZXZPZmZzZXQ7XG4gICAgICAgIGxldCBvZmZzZXQgPSB0aGlzLm9mZnNldFggLSB2ZWw7XG5cbiAgICAgICAgbGV0IGNlbnRlciA9IHRoaXMud2lkdGggLyB0aGlzLnNjYWxlO1xuICAgICAgICB0aGlzLnNldFZhbHVlKG9mZnNldCAvIGNlbnRlcik7XG4gICAgICAgIHRoaXMucHJldk9mZnNldCA9IHg7XG5cbiAgICAgICAgLy8gZmlyZSAnY2hhbmdlZCdcbiAgICAgICAgdmFyIG51bWJlciA9IG5ldyBGbG9hdCh0aGlzLmdldFZhbHVlKCkpO1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ2NoYW5nZWQnLCBudW1iZXIpO1xuICAgICAgICB0aGlzLm92ZXJQb2ludCA9IHRydWU7XG4gICAgfVxuXG4gICAgc2V0VmFsdWUgKHZhbHVlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjZW50ZXIgPSAodGhpcy53aWR0aCAvIHRoaXMuc2NhbGUpO1xuICAgICAgICB0aGlzLm9mZnNldFggPSB0aGlzLnZhbHVlICogY2VudGVyO1xuICAgIH1cbn1cblxuIiwiLypcbk9yaWdpbmFsOiBodHRwczovL2dpdGh1Yi5jb20vdGFuZ3JhbXMvdGFuZ3JhbS1wbGF5L2Jsb2IvZ2gtcGFnZXMvc3JjL2pzL2FkZG9ucy91aS93aWRnZXRzL0NvbG9yUGlja2VyTW9kYWwuanNcbkF1dGhvcjogTG91IEh1YW5nIChAc2Fpa29maXNoKVxuKi9cblxuaW1wb3J0IHsgZ2V0RGV2aWNlUGl4ZWxSYXRpbyB9IGZyb20gJy4uLy4uL3Rvb2xzL2NvbW1vbic7XG5pbXBvcnQgeyBzdWJzY3JpYmVNaXhpbiB9IGZyb20gJy4uLy4uL3Rvb2xzL21peGluJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGlja2VyIHtcbiAgICBjb25zdHJ1Y3RvciAoQ1NTX1BSRUZJWCwgcHJvcGVydGllcykge1xuICAgICAgICBzdWJzY3JpYmVNaXhpbih0aGlzKTtcbiAgICAgICAgdGhpcy5DU1NfUFJFRklYID0gQ1NTX1BSRUZJWDtcblxuICAgICAgICB0aGlzLmJnQ29sb3IgPSAncmdiKDQ2LCA0OCwgNTEpJztcbiAgICAgICAgdGhpcy5kaW1Db2xvciA9ICdyZ2IoMTAwLCAxMDAsIDEwMCknO1xuICAgICAgICB0aGlzLmZuQ29sb3IgPSAncmdiKDIzMCwgMjMwLCAyMzApJztcbiAgICAgICAgdGhpcy5zZWxDb2xvciA9ICdyZ2IoMTMzLCAyMDQsIDE5NiknO1xuXG4gICAgICAgIHByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzIHx8IHt9O1xuICAgICAgICBmb3IgKGxldCBwcm9wIGluIHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHRoaXNbcHJvcF0gPSBwcm9wZXJ0aWVzW3Byb3BdO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqICBUaGlzIGluaXRpYWxpemVzIHRoZSByZW5kZXJlci4gSXQgdXNlcyByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKSB0b1xuICAgICAgICAgKiAgc21vb3RobHkgcmVuZGVyIGNoYW5nZXMgaW4gdGhlIGNvbG9yIHBpY2tlciBhcyB1c2VyIGludGVyYWN0cyB3aXRoIGl0LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHtcbiAgICAgICAgICAgIC8vIFN0b3JlcyBhIHJlZmVyZW5jZSB0byB0aGUgYW5pbWF0aW9uIHJlbmRlcmluZyBsb29wLlxuICAgICAgICAgICAgZnJhbWU6IG51bGwsXG5cbiAgICAgICAgICAgIGRyYXdGcmFtZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5lbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLy8gU3RhcnRzIGFuaW1hdGlvbiByZW5kZXJpbmcgbG9vcFxuICAgICAgICAgICAgc3RhcnQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmRyYXdGcmFtZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuZnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMucmVuZGVyZXIuc3RhcnQpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLy8gU3RvcHMgYW5pbWF0aW9uIHJlbmRlcmluZyBsb29wXG4gICAgICAgICAgICBzdG9wOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMucmVuZGVyZXIuZnJhbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIGNyZWF0ZSAoKSB7XG4gICAgICAgIHRoaXMuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5lbC5jbGFzc05hbWUgPSB0aGlzLkNTU19QUkVGSVggKyAnbW9kYWwgZ2VfcGlja2VyX21vZGFsJztcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmJnQ29sb3I7XG5cbiAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgdGhpcy5jYW52YXMuY2xhc3NOYW1lID0gdGhpcy5DU1NfUFJFRklYICsgJ2NhbnZhcyBnZV9waWNrZXJfY2FudmFzJztcbiAgICAgICAgdGhpcy5jYW52YXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5iZ0NvbG9yO1xuXG4gICAgICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpO1xuICAgICAgICB0aGlzLmN0eCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgICAgICAgbGV0IHJhdGlvID0gZ2V0RGV2aWNlUGl4ZWxSYXRpbyh0aGlzLmN0eCk7XG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy53aWR0aCAqIHJhdGlvO1xuICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmhlaWdodCAqIHJhdGlvO1xuICAgICAgICB0aGlzLmN0eC5zY2FsZShyYXRpbywgcmF0aW8pO1xuICAgIH1cblxuICAgIGRyYXcgKCkge1xuICAgICAgICAvLyByZW5kZXIgcnV0aW5lXG4gICAgfVxuXG4gICAgY2xvc2UgKCkge1xuICAgICAgICAvLyBDbG9zZSBydXRpbmVcbiAgICAgICAgdGhpcy5kZXN0cm95RXZlbnRzKCk7XG4gICAgICAgIHJlbW92ZUV2ZW50KHRoaXMuZWwsICdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VEb3duSGFuZGxlcik7XG4gICAgICAgIHRoaXMub25Nb3VzZURvd25IYW5kbGVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBkZXN0cm95RXZlbnRzICgpIHtcbiAgICAgICAgcmVtb3ZlRXZlbnQodGhpcy5lbCwgJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmVIYW5kbGVyKTtcbiAgICAgICAgdGhpcy5vbk1vdXNlTW92ZUhhbmRsZXIgPSBudWxsO1xuICAgICAgICByZW1vdmVFdmVudCh3aW5kb3csICdtb3VzZXVwJywgdGhpcy5vbk1vdXNlVXBIYW5kbGVyKTtcbiAgICAgICAgdGhpcy5vbk1vdXNlVXBIYW5kbGVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBzZXRWYWx1ZSAodmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldFZhbHVlICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgfVxuXG4gICAgc2hvd0F0IChjbSkge1xuICAgICAgICBsZXQgY3Vyc29yID0gY20uY3Vyc29yQ29vcmRzKHRydWUsICdwYWdlJyk7XG4gICAgICAgIGxldCB4ID0gY3Vyc29yLmxlZnQ7XG4gICAgICAgIGxldCB5ID0gY3Vyc29yLnRvcDtcblxuICAgICAgICB4IC09IHRoaXMud2lkdGggKiAwLjU7XG4gICAgICAgIHkgKz0gMzA7XG5cbiAgICAgICAgLy8gLy8gQ2hlY2sgaWYgZGVzaXJlZCB4LCB5IHdpbGwgYmUgb3V0c2lkZSB0aGUgdmlld3BvcnQuXG4gICAgICAgIC8vIC8vIERvIG5vdCBhbGxvdyB0aGUgbW9kYWwgdG8gZGlzYXBwZWFyIG9mZiB0aGUgZWRnZSBvZiB0aGUgd2luZG93LlxuICAgICAgICAvLyB4ID0gKHggKyB0aGlzLndpZHRoIDwgd2luZG93LmlubmVyV2lkdGgpID8geCA6ICh3aW5kb3cuaW5uZXJXaWR0aCAtIDIwIC0gdGhpcy53aWR0aCk7XG4gICAgICAgIC8vIHkgPSAoeSArIHRoaXMuaGVpZ2h0IDwgd2luZG93LmlubmVySGVpZ2h0KSA/IHkgOiAod2luZG93LmlubmVySGVpZ2h0IC0gMjAgLSB0aGlzLmhlaWdodCk7XG5cbiAgICAgICAgdGhpcy5wcmVzZW50TW9kYWwoeCwgeSk7XG4gICAgfVxuXG4gICAgcHJlc2VudE1vZGFsICh4LCB5KSB7XG4gICAgICAgIC8vIExpc3RlbiBmb3IgaW50ZXJhY3Rpb24gb3V0c2lkZSBvZiB0aGUgbW9kYWxcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5vbkNsaWNrT3V0c2lkZUhhbmRsZXIgPSBhZGRFdmVudChkb2N1bWVudC5ib2R5LCAnY2xpY2snLCB0aGlzLm9uQ2xpY2tPdXRzaWRlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMub25LZXlQcmVzc0hhbmRsZXIgPSBhZGRFdmVudCh3aW5kb3csICdrZXlkb3duJywgdGhpcy5vbktleVByZXNzLCB0aGlzKTtcbiAgICAgICAgfSwgMCk7XG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLmVsLnN0eWxlLmxlZnQgPSB4ICsgJ3B4JztcbiAgICAgICAgdGhpcy5lbC5zdHlsZS50b3AgPSB5ICsgJ3B4JztcbiAgICAgICAgdGhpcy5lbC5zdHlsZS53aWR0aCA9IHRoaXMud2lkdGggKyAncHgnO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLmhlaWdodCA9IHRoaXMuaGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmVsKTtcblxuICAgICAgICB0aGlzLm9uTW91c2VEb3duSGFuZGxlciA9IGFkZEV2ZW50KHRoaXMuZWwsICdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VEb3duLCB0aGlzKTtcblxuICAgICAgICB0aGlzLnJlbmRlcmVyLmRyYXdGcmFtZSgpO1xuICAgIH1cblxuICAgICAvKipcbiAgICAgKiAgUmVtb3ZlcyBtb2RhbCBmcm9tIERPTSBhbmQgZGVzdHJveXMgcmVsYXRlZCBldmVudCBsaXN0ZW5lcnNcbiAgICAgKi9cbiAgICByZW1vdmVNb2RhbCAoKSB7XG4gICAgICAgIGlmICh0aGlzLmVsICYmIHRoaXMuZWwucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgdGhpcy5lbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWwpO1xuICAgICAgICB9XG4gICAgICAgIHJlbW92ZUV2ZW50KGRvY3VtZW50LmJvZHksICdjbGljaycsIHRoaXMub25DbGlja091dHNpZGVIYW5kbGVyKTtcbiAgICAgICAgdGhpcy5vbkNsaWNrT3V0c2lkZUhhbmRsZXIgPSBudWxsO1xuICAgICAgICByZW1vdmVFdmVudCh3aW5kb3csICdrZXlkb3duJywgdGhpcy5vbktleVByZXNzSGFuZGxlcik7XG4gICAgICAgIHRoaXMub25LZXlQcmVzc0hhbmRsZXIgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBvbktleVByZXNzIChldmVudCkge1xuICAgICAgICB0aGlzLnJlbW92ZU1vZGFsKCk7XG4gICAgfVxuXG4gICAgb25DbGlja091dHNpZGUgKGV2ZW50KSB7XG4gICAgICAgIC8vIEhBQ0tZISFcbiAgICAgICAgLy8gQSBjbGljayBldmVudCBmaXJlcyBvbiB0aGUgYm9keSBhZnRlciBtb3VzZWRvd24gLSBtb3VzZW1vdmUsIHNpbXVsdGFuZW91c2x5IHdpdGhcbiAgICAgICAgLy8gbW91c2V1cC4gU28gaWYgc29tZW9uZSBzdGFydGVkIGEgbW91c2UgYWN0aW9uIGluc2lkZSB0aGUgbW9kYWwgYW5kIHRoZW5cbiAgICAgICAgLy8gbW91c2V1cCdkIG91dHNpZGUgb2YgaXQsIGl0IGZpcmVzIGEgY2xpY2sgZXZlbnQgb24gdGhlIGJvZHksIHRodXMsIGNhdXNpbmcgdGhlXG4gICAgICAgIC8vIG1vZGFsIHRvIGRpc2FwcGVhciB3aGVuIHRoZSB1c2VyIGRvZXMgbm90IGV4cGVjdCBpdCB0bywgc2luY2UgdGhlIG1vdXNlIGRvd24gZXZlbnRcbiAgICAgICAgLy8gZGlkIG5vdCBzdGFydCBvdXRzaWRlIHRoZSBtb2RhbC5cbiAgICAgICAgLy8gVGhlcmUgbWlnaHQgYmUgKG9yIHNob3VsZCBiZSkgYSBiZXR0ZXIgd2F5IHRvIHRyYWNrIHRoaXMsIGJ1dCByaWdodCBub3csIGp1c3QgY2FuY2VsXG4gICAgICAgIC8vIHRoZSBldmVudCBpZiB0aGUgdGFyZ2V0IGVuZHMgdXAgYmVpbmcgb24gdGhlIGJvZHkgZGlyZWN0bHkgcmF0aGVyIHRoYW4gb24gb25lIG9mIHRoZVxuICAgICAgICAvLyBvdGhlciBjaGlsZCBlbGVtZW50cy5cbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVuZCB0aGlzIHNwZWNpZmljIGhhY2t5IHBhcnRcblxuICAgICAgICBsZXQgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuXG4gICAgICAgIHdoaWxlICh0YXJnZXQgIT09IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyh0aGlzLkNTU19QUkVGSVggKyAnbW9kYWwnKSkge1xuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnModGhpcy5DU1NfUFJFRklYICsgJ21vZGFsJykpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlTW9kYWwoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uTW91c2VEb3duIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIC8vIFN0YXJ0cyBsaXN0ZW5pbmcgZm9yIG1vdXNlbW92ZSBhbmQgbW91c2V1cCBldmVudHNcbiAgICAgICAgdGhpcy5vbk1vdXNlTW92ZUhhbmRsZXIgPSBhZGRFdmVudCh0aGlzLmVsLCAnbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZSwgdGhpcyk7XG4gICAgICAgIHRoaXMub25Nb3VzZVVwSGFuZGxlciA9IGFkZEV2ZW50KHdpbmRvdywgJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcCwgdGhpcyk7XG5cbiAgICAgICAgdGhpcy5vbk1vdXNlTW92ZShldmVudCk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJlci5zdGFydCgpO1xuICAgIH1cblxuICAgIG9uTW91c2VNb3ZlIChldmVudCkge1xuICAgIH1cblxuICAgIG9uTW91c2VVcCAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zdG9wKCk7XG4gICAgICAgIHRoaXMuZGVzdHJveUV2ZW50cygpO1xuICAgIH1cbn1cblxuLyogRXZlbnQgaGFuZGxpbmcgKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRFdmVudCAoZWxlbWVudCwgZXZlbnQsIGNhbGxiYWNrLCBjYWxsZXIpIHtcbiAgICBsZXQgaGFuZGxlcjtcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBjYWxsYmFjay5jYWxsKGNhbGxlciwgZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIHJldHVybiBoYW5kbGVyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRXZlbnQgKGVsZW1lbnQsIGV2ZW50LCBjYWxsYmFjaykge1xuICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgY2FsbGJhY2ssIGZhbHNlKTtcbn1cbiIsImltcG9ydCBQaWNrZXIgZnJvbSAnLi9QaWNrZXInO1xuaW1wb3J0IFZlY3RvciBmcm9tICcuL3R5cGVzL1ZlY3Rvcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZlYzJQaWNrZXIgZXh0ZW5kcyBQaWNrZXIge1xuICAgIGNvbnN0cnVjdG9yIChwb3MsIHByb3BlcnRpZXMpIHtcbiAgICAgICAgc3VwZXIoJ2dlX3ZlYzJwaWNrZXJfJywgcHJvcGVydGllcyk7XG5cbiAgICAgICAgdGhpcy53aWR0aCA9IHRoaXMud2lkdGggfHwgMjAwO1xuICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMuaGVpZ2h0IHx8IDIwMDtcblxuICAgICAgICB0aGlzLm1pbiA9IHRoaXMubWluIHx8IC0xO1xuICAgICAgICB0aGlzLm1heCA9IHRoaXMubWF4IHx8IDE7XG4gICAgICAgIHRoaXMuc2l6ZSA9IHRoaXMuc2l6ZSB8fCA2O1xuICAgICAgICB0aGlzLnJhbmdlID0gdGhpcy5tYXggLSB0aGlzLm1pbjtcbiAgICAgICAgdGhpcy5vdmVyUG9pbnQgPSBmYWxzZTtcblxuICAgICAgICBsZXQgY2VudGVyID0gKCh0aGlzLnJhbmdlIC8gMikgLSB0aGlzLm1heCkgKiAtMTtcbiAgICAgICAgdGhpcy5zZXRWYWx1ZShwb3MgfHwgW2NlbnRlcixjZW50ZXJdKTtcbiAgICAgICAgdGhpcy5jcmVhdGUoKTtcbiAgICB9XG5cbiAgICBkcmF3ICgpIHtcbiAgICAgICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcblxuICAgICAgICAvLyBmcmFtZVxuICAgICAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IHRoaXMuZGltQ29sb3I7XG4gICAgICAgIHRoaXMuY3R4LmxpbmVXaWR0aCA9IDI7XG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZVJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuXG4gICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICB0aGlzLmN0eC5saW5lV2lkdGggPSAwLjI1O1xuICAgICAgICBsZXQgc2VjdGlvbnMgPSAyMDtcbiAgICAgICAgbGV0IHN0ZXAgPSB0aGlzLndpZHRoIC8gc2VjdGlvbnM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VjdGlvbnM7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5jdHgubW92ZVRvKGkgKiBzdGVwLCAwKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmxpbmVUbyhpICogc3RlcCwgdGhpcy5oZWlnaHQpO1xuICAgICAgICAgICAgdGhpcy5jdHgubW92ZVRvKDAsIGkgKiBzdGVwKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmxpbmVUbyh0aGlzLndpZHRoLCBpICogc3RlcCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdHguc3Ryb2tlKCk7XG5cbiAgICAgICAgLy8gaG9yaXpvbnRhbCBsaW5lXG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5kaW1Db2xvcjtcbiAgICAgICAgdGhpcy5jdHgubGluZVdpZHRoID0gMS4wO1xuICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgdGhpcy5jdHgubW92ZVRvKDAsIDAuNSArIHRoaXMuaGVpZ2h0ICogMC41KTtcbiAgICAgICAgdGhpcy5jdHgubGluZVRvKHRoaXMud2lkdGgsIDAuNSArIHRoaXMuaGVpZ2h0ICogMC41KTtcbiAgICAgICAgdGhpcy5jdHguY2xvc2VQYXRoKCk7XG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuXG4gICAgICAgIC8vIHZlcnRpY2FsIGxpbmVcbiAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIHRoaXMuY3R4Lm1vdmVUbygwLjUgKyB0aGlzLndpZHRoICogMC41LCAwKTtcbiAgICAgICAgdGhpcy5jdHgubGluZVRvKDAuNSArIHRoaXMud2lkdGggKiAwLjUsIHRoaXMuaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5jdHguY2xvc2VQYXRoKCk7XG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuXG4gICAgICAgIC8vIC8vIFRyaWFuZ2xlIGxpbmVcbiAgICAgICAgLy8gdGhpcy5jdHguZmlsbFN0eWxlID0gdGhpcy5kaW1Db2xvcjtcbiAgICAgICAgLy8gdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIC8vIHRoaXMuY3R4Lm1vdmVUbyh0aGlzLndpZHRoICogMC41LCA1KTtcbiAgICAgICAgLy8gdGhpcy5jdHgubGluZVRvKHRoaXMud2lkdGggKiAwLjQ4LCAwKTtcbiAgICAgICAgLy8gdGhpcy5jdHgubGluZVRvKHRoaXMud2lkdGggKiAwLjUyLCAwKTtcbiAgICAgICAgLy8gdGhpcy5jdHguY2xvc2VQYXRoKCk7XG4gICAgICAgIC8vIHRoaXMuY3R4LmZpbGwoKTtcblxuICAgICAgICBsZXQgeCA9IE1hdGgucm91bmQoKCh0aGlzLnZhbHVlLnggLSB0aGlzLm1pbikgLyB0aGlzLnJhbmdlKSAqIHRoaXMud2lkdGgpO1xuICAgICAgICBsZXQgeSA9IE1hdGgucm91bmQoKCgxIC0gKHRoaXMudmFsdWUueSAtIHRoaXMubWluKSAvIHRoaXMucmFuZ2UpKSAqIHRoaXMuaGVpZ2h0KTtcblxuICAgICAgICBsZXQgaGFsZiA9IHRoaXMuc2l6ZSAvIDI7XG5cbiAgICAgICAgaWYgKHggPCBoYWxmKSB7XG4gICAgICAgICAgICB4ID0gaGFsZjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoeCA+IHRoaXMud2lkdGggLSBoYWxmKSB7XG4gICAgICAgICAgICB4ID0gdGhpcy53aWR0aCAtIGhhbGY7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHkgPCBoYWxmKSB7XG4gICAgICAgICAgICB5ID0gaGFsZjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoeSA+IHRoaXMuaGVpZ2h0IC0gaGFsZikge1xuICAgICAgICAgICAgeSA9IHRoaXMuaGVpZ2h0IC0gaGFsZjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHBvaW50XG4gICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHRoaXMub3ZlclBvaW50ID8gdGhpcy5zZWxDb2xvciA6IHRoaXMuZm5Db2xvcjtcbiAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGxldCByYWRpdXMgPSB0aGlzLm92ZXJQb2ludCA/IDQgOiAyO1xuICAgICAgICB0aGlzLmN0eC5hcmMoeCwgeSwgcmFkaXVzLCAwLCAyICogTWF0aC5QSSwgZmFsc2UpO1xuICAgICAgICB0aGlzLmN0eC5maWxsKCk7XG5cbiAgICAgICAgdGhpcy5jdHgucmVzdG9yZSgpO1xuICAgICAgICB0aGlzLm92ZXJQb2ludCA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIEFjdGlvbnMgd2hlbiB1c2VyIG1vdmVzIGFyb3VuZCBvbiBIU1YgY29sb3IgbWFwXG4gICAgb25Nb3VzZU1vdmUgKGV2ZW50KSB7XG4gICAgICAgIGxldCB4ID0gZXZlbnQub2Zmc2V0WDtcbiAgICAgICAgbGV0IHkgPSBldmVudC5vZmZzZXRZO1xuXG4gICAgICAgIHRoaXMudmFsdWUueCA9ICgodGhpcy5yYW5nZSAvIHRoaXMud2lkdGgpICogeCkgLSAodGhpcy5yYW5nZSAtIHRoaXMubWF4KTtcbiAgICAgICAgdGhpcy52YWx1ZS55ID0gKCgodGhpcy5yYW5nZSAvIHRoaXMuaGVpZ2h0KSAqIHkpIC0gKHRoaXMucmFuZ2UgLSB0aGlzLm1heCkpICogLTE7XG5cbiAgICAgICAgLy8gZmlyZSAnY2hhbmdlZCdcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdjaGFuZ2VkJywgdGhpcy52YWx1ZSk7XG4gICAgICAgIHRoaXMub3ZlclBvaW50ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBzZXRWYWx1ZSAocG9zKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBuZXcgVmVjdG9yKHBvcyk7XG4gICAgfVxufVxuIiwiaW1wb3J0IFBpY2tlciBmcm9tICcuL1BpY2tlcic7XG5pbXBvcnQgVmVjdG9yIGZyb20gJy4vdHlwZXMvVmVjdG9yJztcbmltcG9ydCBNYXRyaXggZnJvbSAnLi90eXBlcy9NYXRyaXgnO1xuaW1wb3J0IHsgYWRkRXZlbnQsIHJlbW92ZUV2ZW50IH0gZnJvbSAnLi9QaWNrZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWZWMzUGlja2VyIGV4dGVuZHMgUGlja2VyIHtcbiAgICBjb25zdHJ1Y3RvciAoZGlyLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHN1cGVyKCdnZV92ZWMzcGlja2VyXycsIHByb3BlcnRpZXMpO1xuXG4gICAgICAgIHRoaXMud2lkdGggPSB0aGlzLndpZHRoIHx8IDIwMDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLndpZHRoIHx8IDIwMDtcbiAgICAgICAgdGhpcy5zY2FsZSA9IDUwO1xuXG4gICAgICAgIHRoaXMuc2V0VmFsdWUoZGlyIHx8IFswLCAwLCAxXSk7XG4gICAgICAgIHRoaXMuY3JlYXRlKCk7XG5cbiAgICAgICAgdGhpcy5jYW1lcmEgPSBuZXcgTWF0cml4KCk7XG4gICAgICAgIHRoaXMuc2hhcGVzID0gW107XG4gICAgICAgIHRoaXMuY2VudGVyID0gWzAsIDAsIDBdO1xuXG4gICAgICAgIHRoaXMuc2hhcGVzLnB1c2goe1xuICAgICAgICAgICAgZWRnZUNvbG91cjogdGhpcy5kaW1Db2xvcixcbiAgICAgICAgICAgIG5vZGVzOiBbW3RoaXMud2lkdGggLyAyIC0gNTAsIHRoaXMuaGVpZ2h0IC8gMiwgMTAwXSwgW3RoaXMud2lkdGggLyAyICsgNTAsIHRoaXMuaGVpZ2h0IC8gMiwgMTAwXSxcbiAgICAgICAgICAgICAgICAgICAgW3RoaXMud2lkdGggLyAyLCB0aGlzLmhlaWdodCAvIDIgLSA1MCwgMTAwXSwgW3RoaXMud2lkdGggLyAyLCB0aGlzLmhlaWdodCAvIDIgKyA1MCwgMTAwXSxcbiAgICAgICAgICAgICAgICAgICAgW3RoaXMud2lkdGggLyAyLCB0aGlzLmhlaWdodCAvIDIsIDUwXSwgW3RoaXMud2lkdGggLyAyLCB0aGlzLmhlaWdodCAvIDIsIDE1MF0gXSxcbiAgICAgICAgICAgIGVkZ2VzOiBbWzAsMV0sIFsyLDNdLCBbNCw1XV1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zaGFwZXMucHVzaCh7XG4gICAgICAgICAgICB0ZXh0Q29sb3VyOiB0aGlzLmZuQ29sb3IsXG4gICAgICAgICAgICBub2RlczogW1t0aGlzLndpZHRoIC8gMiArIDY4LCB0aGlzLmhlaWdodCAvIDIsIDEwMF0sIFt0aGlzLndpZHRoIC8gMiAtIDY4LCB0aGlzLmhlaWdodCAvIDIsIDEwMF0sXG4gICAgICAgICAgICAgICAgICAgIFt0aGlzLndpZHRoIC8gMiwgdGhpcy5oZWlnaHQgLyAyICsgNjgsIDEwMF0sIFt0aGlzLndpZHRoIC8gMiwgdGhpcy5oZWlnaHQgLyAyIC0gNjgsIDEwMF0sXG4gICAgICAgICAgICAgICAgICAgIFt0aGlzLndpZHRoIC8gMiwgdGhpcy5oZWlnaHQgLyAyLCAxNjhdLCBbdGhpcy53aWR0aCAvIDIsIHRoaXMuaGVpZ2h0IC8gMiwgMzJdIF0sXG4gICAgICAgICAgICB0ZXh0OiBbJ3gnLCAnLXgnLCAneScsICcteScsICd6JywgJy16J11cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zZXRDZW50ZXIodGhpcy53aWR0aCAvIDIsIHRoaXMuaGVpZ2h0IC8gMiwgMTAwKTtcblxuICAgICAgICAvLyBNb3VzZSBldmVudHNcbiAgICAgICAgdGhpcy5kcmFnT2Zmc2V0ID0gWzAsIDBdO1xuICAgICAgICB0aGlzLm92ZXJQb2ludCA9IGZhbHNlO1xuICAgIH1cblxuICAgIHNldENlbnRlciAoeCwgeSwgeikge1xuICAgICAgICBmb3IgKGxldCBzIGluIHRoaXMuc2hhcGVzKSB7XG4gICAgICAgICAgICBsZXQgc2hhcGUgPSB0aGlzLnNoYXBlc1tzXTtcblxuICAgICAgICAgICAgZm9yIChsZXQgbiBpbiBzaGFwZS5ub2Rlcykge1xuICAgICAgICAgICAgICAgIHNoYXBlLm5vZGVzW25dWzBdIC09IHg7XG4gICAgICAgICAgICAgICAgc2hhcGUubm9kZXNbbl1bMV0gLT0geTtcbiAgICAgICAgICAgICAgICBzaGFwZS5ub2Rlc1tuXVsyXSAtPSB6O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2VudGVyID0gW3gsIHksIHpdO1xuICAgIH1cblxuICAgIHZpZXdGcm9tQ2FtZXJhIChub2RlKSB7XG4gICAgICAgIGxldCBBID0gdGhpcy5jYW1lcmEuZ2V0TXVsdChub2RlKTtcbiAgICAgICAgQS5hZGQodGhpcy5jZW50ZXIpO1xuICAgICAgICByZXR1cm4gW0EueCwgdGhpcy5oZWlnaHQgLSBBLnldO1xuICAgIH1cblxuICAgIGRyYXcgKCkge1xuICAgICAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuXG4gICAgICAgIGZvciAobGV0IHMgaW4gdGhpcy5zaGFwZXMpIHtcbiAgICAgICAgICAgIGxldCBzaGFwZSA9IHRoaXMuc2hhcGVzW3NdO1xuICAgICAgICAgICAgaWYgKHNoYXBlLmVkZ2VDb2xvdXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdTaGFwZUVkZ2VzKHNoYXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzaGFwZS5ub2RlQ29sb3VyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3U2hhcGVOb2RlcyhzaGFwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2hhcGUudGV4dCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhd1NoYXBlVGV4dChzaGFwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRyYXdTaGFwZUVkZ2VzKHtcbiAgICAgICAgICAgIGVkZ2VDb2xvdXI6IHRoaXMuZm5Db2xvcixcbiAgICAgICAgICAgIG5vZGVzOiBbWzAsMCwwXSwgdGhpcy5wb2ludF0sXG4gICAgICAgICAgICBlZGdlczogW1swLDFdXVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmRyYXdTaGFwZU5vZGVzKHtcbiAgICAgICAgICAgIG5vZGVDb2xvdXI6IHRoaXMub3ZlclBvaW50ID8gdGhpcy5zZWxDb2xvciA6IHRoaXMuZm5Db2xvcixcbiAgICAgICAgICAgIG5vZGVSYWRpdXM6IHRoaXMub3ZlclBvaW50ID8gNCA6IDIsXG4gICAgICAgICAgICBub2RlczogW3RoaXMucG9pbnRdXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGRyYXdTaGFwZUVkZ2VzIChzaGFwZSkge1xuICAgICAgICBsZXQgbm9kZXMgPSBzaGFwZS5ub2RlcztcblxuICAgICAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IHNoYXBlLmVkZ2VDb2xvdXI7XG4gICAgICAgIGZvciAobGV0IGUgaW4gc2hhcGUuZWRnZXMpIHtcbiAgICAgICAgICAgIGxldCBjb29yZCA9IHRoaXMudmlld0Zyb21DYW1lcmEobm9kZXNbc2hhcGUuZWRnZXNbZV1bMF1dKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmxpbmVXaWR0aCA9IDE7XG4gICAgICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIHRoaXMuY3R4Lm1vdmVUbyhjb29yZFswXSwgY29vcmRbMV0pO1xuICAgICAgICAgICAgY29vcmQgPSB0aGlzLnZpZXdGcm9tQ2FtZXJhKG5vZGVzW3NoYXBlLmVkZ2VzW2VdWzFdXSk7XG4gICAgICAgICAgICB0aGlzLmN0eC5saW5lVG8oY29vcmRbMF0sIGNvb3JkWzFdKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZHJhd1NoYXBlTm9kZXMgKHNoYXBlKSB7XG4gICAgICAgIGxldCByYWRpdXMgPSBzaGFwZS5ub2RlUmFkaXVzIHx8IDQ7XG4gICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHNoYXBlLm5vZGVDb2xvdXI7XG4gICAgICAgIGZvciAobGV0IG4gaW4gc2hhcGUubm9kZXMpIHtcbiAgICAgICAgICAgIGxldCBjb29yZCA9IHRoaXMudmlld0Zyb21DYW1lcmEoc2hhcGUubm9kZXNbbl0pO1xuICAgICAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICB0aGlzLmN0eC5hcmMoY29vcmRbMF0sIGNvb3JkWzFdLCByYWRpdXMsIDAgLCAyICogTWF0aC5QSSwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5jdHguZmlsbCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZHJhd1NoYXBlVGV4dCAoc2hhcGUpIHtcbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gc2hhcGUudGV4dENvbG91cjtcbiAgICAgICAgZm9yIChsZXQgbiBpbiBzaGFwZS5ub2Rlcykge1xuICAgICAgICAgICAgbGV0IGNvb3JkID0gdGhpcy52aWV3RnJvbUNhbWVyYShzaGFwZS5ub2Rlc1tuXSk7XG4gICAgICAgICAgICB0aGlzLmN0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcbiAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxUZXh0KHNoYXBlLnRleHRbbl0sIGNvb3JkWzBdLCBjb29yZFsxXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbk1vdXNlRG93biAoZXZlbnQpIHtcbiAgICAgICAgbGV0IG1vdXNlID0gW2V2ZW50Lm9mZnNldFgsIGV2ZW50Lm9mZnNldFldO1xuICAgICAgICB0aGlzLmRyYWdPZmZzZXQgPSBtb3VzZTtcblxuICAgICAgICBsZXQgcG9zID0gbmV3IFZlY3Rvcih0aGlzLnZpZXdGcm9tQ2FtZXJhKHRoaXMucG9pbnQpKTtcbiAgICAgICAgbGV0IGRpZmYgPSBwb3MuZ2V0U3ViKG1vdXNlKTtcbiAgICAgICAgdGhpcy5vdmVyUG9pbnQgPSBkaWZmLmdldExlbmd0aCgpIDwgMTA7XG5cbiAgICAgICAgc3VwZXIub25Nb3VzZURvd24oZXZlbnQpO1xuICAgICAgICB0aGlzLm9uTW91c2VVcEhhbmRsZXIgPSBhZGRFdmVudCh0aGlzLmVsLCAnZGJsY2xpY2snLCB0aGlzLm9uRGJDbGljaywgdGhpcyk7XG4gICAgfVxuXG4gICAgLy8gQWN0aW9ucyB3aGVuIHVzZXIgbW92ZXMgYXJvdW5kIG9uIEhTViBjb2xvciBtYXBcbiAgICBvbk1vdXNlTW92ZSAoZXZlbnQpIHtcbiAgICAgICAgbGV0IHggPSBldmVudC5vZmZzZXRYO1xuICAgICAgICBsZXQgeSA9IGV2ZW50Lm9mZnNldFk7XG5cbiAgICAgICAgdmFyIGR4ID0gMC4wMSAqICh4IC0gdGhpcy5kcmFnT2Zmc2V0WzBdKTtcbiAgICAgICAgdmFyIGR5ID0gMC4wMSAqICh5IC0gdGhpcy5kcmFnT2Zmc2V0WzFdKTtcblxuICAgICAgICBpZiAodGhpcy5vdmVyUG9pbnQpIHtcbiAgICAgICAgICAgIGxldCBpbnZNID0gdGhpcy5jYW1lcmEuZ2V0SW52KCk7XG4gICAgICAgICAgICBsZXQgdmVsID0gaW52TS5nZXRNdWx0KFtkeCwgLWR5LCAwLjBdKTtcbiAgICAgICAgICAgIHZlbC5tdWx0KDIpO1xuICAgICAgICAgICAgdGhpcy52YWx1ZS5hZGQodmVsKTtcbiAgICAgICAgICAgIHRoaXMucG9pbnQgPSBbdGhpcy52YWx1ZS54ICogdGhpcy5zY2FsZSwgdGhpcy52YWx1ZS55ICogdGhpcy5zY2FsZSwgdGhpcy52YWx1ZS56ICogdGhpcy5zY2FsZV07XG4gICAgICAgICAgICAvLyBmaXJlICdjaGFuZ2VkJ1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdjaGFuZ2VkJywgdGhpcy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNhbWVyYS5yb3RhdGVYKGR5KTtcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLnJvdGF0ZVkoZHgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5kcmFnT2Zmc2V0ID0gW3gsIHldO1xuICAgIH1cblxuICAgIG9uRGJDbGljayAoZXZlbnQpIHtcbiAgICAgICAgbGV0IG1vdXNlID0gbmV3IFZlY3RvcihbZXZlbnQub2Zmc2V0WCwgZXZlbnQub2Zmc2V0WV0pO1xuICAgICAgICBsZXQgYXhpcyA9IHtcbiAgICAgICAgICAgIHg6IFs2OCwgMCwgMF0sXG4gICAgICAgICAgICBuZWdfeDogWy02OCwgMCwgMF0sXG4gICAgICAgICAgICB5OiBbMCwgNjgsIDEwMF0sXG4gICAgICAgICAgICBuZWdfeTogWzAsIC02OCwgMF1cbiAgICAgICAgfTtcbiAgICAgICAgbGV0IHNlbGVjdGVkID0gJyc7XG4gICAgICAgIGZvciAobGV0IGkgaW4gYXhpcykge1xuICAgICAgICAgICAgbGV0IHBvcyA9IG5ldyBWZWN0b3IodGhpcy52aWV3RnJvbUNhbWVyYShheGlzW2ldKSk7XG4gICAgICAgICAgICBsZXQgZGlmZiA9IHBvcy5nZXRTdWIobW91c2UpO1xuICAgICAgICAgICAgaWYgKGRpZmYuZ2V0TGVuZ3RoKCkgPCAxMCkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkID0gaTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbWVyYSA9IG5ldyBNYXRyaXgoKTtcblxuICAgICAgICBpZiAoc2VsZWN0ZWQgPT09ICd4Jykge1xuICAgICAgICAgICAgdGhpcy5jYW1lcmEucm90YXRlWSgtMS41NzA3OTYzMjY3OSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2VsZWN0ZWQgPT09ICduZWdfeCcpIHtcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLnJvdGF0ZVkoMS41NzA3OTYzMjY3OSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2VsZWN0ZWQgPT09ICd5Jykge1xuICAgICAgICAgICAgdGhpcy5jYW1lcmEucm90YXRlWCgtMS41NzA3OTYzMjY3OSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2VsZWN0ZWQgPT09ICduZWdfeScpIHtcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLnJvdGF0ZVgoMS41NzA3OTYzMjY3OSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRyYXcoKTtcbiAgICB9XG5cbiAgICBkZXN0cm95RXZlbnRzICgpIHtcbiAgICAgICAgc3VwZXIuZGVzdHJveUV2ZW50cygpO1xuICAgICAgICByZW1vdmVFdmVudCh0aGlzLmVsLCAnZGJsY2xpY2snLCB0aGlzLm9uRGJDbGljayk7XG4gICAgICAgIHRoaXMub25Nb3VzZU1vdmVIYW5kbGVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBzZXRWYWx1ZSAoZGlyKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBuZXcgVmVjdG9yKGRpcik7XG4gICAgICAgIHRoaXMucG9pbnQgPSBbdGhpcy52YWx1ZS54ICogdGhpcy5zY2FsZSwgdGhpcy52YWx1ZS55ICogdGhpcy5zY2FsZSwgdGhpcy52YWx1ZS56ICogdGhpcy5zY2FsZV07XG4gICAgfVxufVxuXG4iLCJpbXBvcnQgQ29sb3JDb252ZXJ0ZXIgZnJvbSAnLi9Db2xvckNvbnZlcnRlcic7XG5pbXBvcnQgeyBnZXRDb2xvckFzUkdCLCBnZXRWYWx1ZVJhbmdlcywgZ2V0THVtaW5hbmNlLCBsaW1pdFZhbHVlIH0gZnJvbSAnLi9Db2xvckNvbnZlcnRlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbG9yIHtcbiAgICBjb25zdHJ1Y3RvciAoY29sb3IpIHtcbiAgICAgICAgdGhpcy5jb2xvcnMgPSB7fTtcbiAgICAgICAgdGhpcy5zZXQoY29sb3IpO1xuICAgIH1cblxuICAgIHNldCAoY29sb3IsIHR5cGUpIHsgLy8gY29sb3Igb25seSBmdWxsIHJhbmdlXG4gICAgICAgIGlmICh0eXBlb2YgY29sb3IgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICB0eXBlID0gdHlwZSA/IHR5cGUgOiAncmdiJztcbiAgICAgICAgICAgIHRoaXMuY29sb3JzW3R5cGVdID0ge307XG4gICAgICAgICAgICBmb3IgKHZhciBuID0gMzsgbi0tOykge1xuICAgICAgICAgICAgICAgIGxldCBtID0gdHlwZVtuXSB8fCB0eXBlLmNoYXJBdChuKTsgLy8gSUU3XG4gICAgICAgICAgICAgICAgdGhpcy5jb2xvcnNbdHlwZV1bbV0gPSBjb2xvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgY29sb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBsZXQgcGFydHMgPSBjb2xvci5yZXBsYWNlKC8oPzojfFxcKXwlKS9nLCAnJykuc3BsaXQoJygnKTtcbiAgICAgICAgICAgIGlmIChwYXJ0c1sxXSkge1xuICAgICAgICAgICAgICAgIGxldCB2YWx1ZXMgPSAocGFydHNbMV0gfHwgJycpLnNwbGl0KC8sXFxzKi8pO1xuICAgICAgICAgICAgICAgIHR5cGUgPSB0eXBlID8gdHlwZSA6IChwYXJ0c1sxXSA/IHBhcnRzWzBdLnN1YnN0cigwLCAzKSA6ICdyZ2InKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldCh2YWx1ZXMsIHR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoZ2V0Q29sb3JBc1JHQihjb2xvciksICdyZ2InKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjb2xvcikge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29sb3IpKSB7XG4gICAgICAgICAgICAgICAgbGV0IG0gPSAnJztcbiAgICAgICAgICAgICAgICB0eXBlID0gdHlwZSB8fCAncmdiJztcblxuICAgICAgICAgICAgICAgIHRoaXMuY29sb3JzW3R5cGVdID0gdGhpcy5jb2xvcnNbdHlwZV0gfHwge307XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgbiA9IDM7IG4tLTspIHtcbiAgICAgICAgICAgICAgICAgICAgbSA9IHR5cGVbbl0gfHwgdHlwZS5jaGFyQXQobik7IC8vIElFN1xuICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IGNvbG9yLmxlbmd0aCA+PSAzID8gbiA6IDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sb3JzW3R5cGVdW21dID0gcGFyc2VGbG9hdChjb2xvcltpXSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGNvbG9yLmxlbmd0aCA9PT0gNCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbG9ycy5hbHBoYSA9IHBhcnNlRmxvYXQoY29sb3JbM10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBuIGluIGNvbG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sb3JzW3R5cGVdW25dID0gbGltaXRWYWx1ZShjb2xvcltuXSAvIGdldFZhbHVlUmFuZ2VzKHR5cGUpW25dWzFdLCAwLCAxKSAqIGdldFZhbHVlUmFuZ2VzKHR5cGUpW25dWzFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGUgIT09ICdyZ2InKSB7XG4gICAgICAgICAgICB2YXIgY29udmVydCA9IENvbG9yQ29udmVydGVyO1xuICAgICAgICAgICAgdGhpcy5jb2xvcnMucmdiID0gY29udmVydFt0eXBlICsgJzJyZ2InXSh0aGlzLmNvbG9yc1t0eXBlXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb252ZXJ0KHR5cGUpO1xuICAgICAgICB0aGlzLmNvbG9ycy5odWVSR0IgPSBDb2xvckNvbnZlcnRlci5odWUyUkdCKHRoaXMuY29sb3JzLmhzdi5oKTtcbiAgICAgICAgdGhpcy5jb2xvcnMubHVtaW5hbmNlID0gZ2V0THVtaW5hbmNlKHRoaXMuY29sb3JzLnJnYik7XG4gICAgfVxuXG4gICAgY29udmVydCAodHlwZSkge1xuICAgICAgICBsZXQgY29udmVydCA9IENvbG9yQ29udmVydGVyLFxuICAgICAgICAgICAgcmFuZ2VzID0gZ2V0VmFsdWVSYW5nZXMoKSxcbiAgICAgICAgICAgIGV4Y2VwdGlvbnMgPSB7IGhzbDogJ2hzdicsIGNteWs6ICdjbXknLCByZ2I6IHR5cGUgfTtcblxuICAgICAgICBpZiAodHlwZSAhPT0gJ2FscGhhJykge1xuICAgICAgICAgICAgZm9yIChsZXQgdHlwIGluIHJhbmdlcykge1xuICAgICAgICAgICAgICAgIGlmICghcmFuZ2VzW3R5cF1bdHlwXSkgeyAvLyBubyBhbHBoYXxIRVhcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgIT09IHR5cCAmJiB0eXAgIT09ICdYWVonKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZnJvbSA9IGV4Y2VwdGlvbnNbdHlwXSB8fCAncmdiJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sb3JzW3R5cF0gPSBjb252ZXJ0W2Zyb20gKyAnMicgKyB0eXBdKHRoaXMuY29sb3JzW2Zyb21dKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCAodHlwZSkge1xuICAgICAgICBpZiAodHlwZSAhPT0gJ3JnYicpIHtcbiAgICAgICAgICAgIHZhciBjb252ZXJ0ID0gQ29sb3JDb252ZXJ0ZXI7XG4gICAgICAgICAgICB0aGlzLmNvbG9yc1t0eXBlXSA9IGNvbnZlcnRbJ3JnYjInICsgdHlwZV0odGhpcy5jb2xvcnNbJ3JnYiddKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbG9yc1t0eXBlXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbG9yc1sncmdiJ107XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRTdHJpbmcgKHR5cGUpIHtcbiAgICAgICAgaWYgKHR5cGUgPT09ICdIRVgnKSB7XG4gICAgICAgICAgICB2YXIgY29udmVydCA9IENvbG9yQ29udmVydGVyO1xuICAgICAgICAgICAgcmV0dXJuIGNvbnZlcnRbJ3JnYjInICsgdHlwZV0odGhpcy5jb2xvcnNbJ3JnYiddKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBjb2xvciA9IHRoaXMuZ2V0KHR5cGUpO1xuICAgICAgICAgICAgbGV0IHN0ciA9IHR5cGUsXG4gICAgICAgICAgICAgICAgbSA9ICcnO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICd2ZWMnKSB7XG4gICAgICAgICAgICAgICAgc3RyICs9IHRoaXMuY29sb3JzLmFscGhhID8gNCA6IDM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdHIgKz0gJygnO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCAzOyBuKyspIHtcbiAgICAgICAgICAgICAgICBtID0gdHlwZVtuXSB8fCB0eXBlLmNoYXJBdChuKTsgLy8gSUU3XG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICd2ZWMnKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0ciArPSAoY29sb3JbbV0pLnRvRml4ZWQoMyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdHIgKz0gTWF0aC5mbG9vcihjb2xvclttXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChuICE9PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0ciArPSAnLCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5jb2xvcnMuYWxwaGEpIHtcbiAgICAgICAgICAgICAgICBzdHIgKz0gJywnICsgKHRoaXMuY29sb3JzLmFscGhhKS50b0ZpeGVkKDMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0ciArPSAnKSc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1bmlmb3JtVHlwZSAoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbG9ycy5hbHBoYSkge1xuICAgICAgICAgICAgcmV0dXJuICd2ZWM0JztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJ3ZlYzMnO1xuICAgIH1cblxuICAgIHVuaWZvcm1WYWx1ZSAoKSB7XG4gICAgICAgIHZhciB2ZWMgPSB0aGlzLmdldCgndmVjJylcbiAgICAgICAgdmFyIGFyciA9IFt2ZWMudiwgdmVjLmUsIHZlYy5jXTtcbiAgICAgICAgaWYgKHRoaXMuY29sb3JzLmFscGhhKSB7XG4gICAgICAgICAgICBhcnIucHVzaCh0aGlzLmNvbG9ycy5hbHBoYSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFycjtcbiAgICB9XG5cbiAgICB1bmlmb3JtTWV0aG9kICh0eXBlKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbG9ycy5hbHBoYSkge1xuICAgICAgICAgICAgcmV0dXJuICc0Zic7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICczZic7XG4gICAgfVxufVxuIiwidmFyIHZhbHVlUmFuZ2VzID0ge1xuICAgICAgICByZ2I6IHsgcjogWzAsIDI1NV0sIGc6IFswLCAyNTVdLCBiOiBbMCwgMjU1XSB9LFxuICAgICAgICBoc3Y6IHsgaDogWzAsIDFdLCBzOiBbMCwgMV0sIHY6IFswLCAyNTVdIH0sXG4gICAgICAgIGhzbDogeyBoOiBbMCwgMzYwXSwgczogWzAsIDEwMF0sIGw6IFswLCAxMDBdIH0sXG4gICAgICAgIGNteTogeyBjOiBbMCwgMTAwXSwgbTogWzAsIDEwMF0sIHk6IFswLCAxMDBdIH0sXG4gICAgICAgIGNteWs6IHsgYzogWzAsIDEwMF0sIG06IFswLCAxMDBdLCB5OiBbMCwgMTAwXSwgazogWzAsIDEwMF0gfSxcbiAgICAgICAgTGFiOiB7IEw6IFswLCAxMDBdLCBhOiBbLTEyOCwgMTI3XSwgYjogWy0xMjgsIDEyN10gfSxcbiAgICAgICAgWFlaOiB7IFg6IFswLCAxMDBdLCBZOiBbMCwgMTAwXSwgWjogWzAsIDEwMF0gfSxcbiAgICAgICAgdmVjOiB7IHY6IFswLCAxXSwgZTogWzAsIDFdLCBjOiBbMCwgMV0gfSxcbiAgICAgICAgYWxwaGE6IHsgYWxwaGE6IFswLCAxXSB9LFxuICAgICAgICBIRVg6IHsgSEVYOiBbMCwgMTY3NzcyMTVdIH0gLy8gbWF5YmUgd2UgZG9uJ3QgbmVlZCB0aGlzXG4gICAgfTtcblxuLy8gaHR0cDovL3d3dy5icnVjZWxpbmRibG9vbS5jb20vaW5kZXguaHRtbD9FcW5fUkdCX1hZWl9NYXRyaXguaHRtbCBmb3IgbW9yZVxudmFyIFhZWk1hdHJpeCA9IHsgLy8gT2JzZXJ2ZXIgPSAywrAgKENJRSAxOTMxKSwgSWxsdW1pbmFudCA9IEQ2NVxuICAgICAgICBYOiBbIDAuNDEyNDU2NCwgMC4zNTc1NzYxLCAwLjE4MDQzNzVdLFxuICAgICAgICBZOiBbIDAuMjEyNjcyOSwgMC43MTUxNTIyLCAwLjA3MjE3NTBdLFxuICAgICAgICBaOiBbIDAuMDE5MzMzOSwgMC4xMTkxOTIwLCAwLjk1MDMwNDFdLFxuICAgICAgICBSOiBbIDMuMjQwNDU0MiwgLTEuNTM3MTM4NSwgLTAuNDk4NTMxNF0sXG4gICAgICAgIEc6IFstMC45NjkyNjYwLCAxLjg3NjAxMDgsIDAuMDQxNTU2MF0sXG4gICAgICAgIEI6IFsgMC4wNTU2NDM0LCAtMC4yMDQwMjU5LCAxLjA1NzIyNTJdXG4gICAgfTtcblxudmFyIFhZWlJlZmVyZW5jZSA9IHtcbiAgICAgICAgWDogWFlaTWF0cml4LlhbMF0gKyBYWVpNYXRyaXguWFsxXSArIFhZWk1hdHJpeC5YWzJdLFxuICAgICAgICBZOiBYWVpNYXRyaXguWVswXSArIFhZWk1hdHJpeC5ZWzFdICsgWFlaTWF0cml4LllbMl0sXG4gICAgICAgIFo6IFhZWk1hdHJpeC5aWzBdICsgWFlaTWF0cml4LlpbMV0gKyBYWVpNYXRyaXguWlsyXVxuICAgIH07XG5cbnZhciBsdW1pbmFuY2UgPSB7IHI6IDAuMjEyNiwgZzogMC43MTUyLCBiOiAwLjA3MjIgfTsgLy8gVzNDIDIuMFxuXG52YXIgX2NvbG9ycztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29sb3JDb252ZXJ0ZXIge1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBWRUMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG4gICAgc3RhdGljIHZlYzJyZ2IgKHZlYykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcjogdmVjLnYgKiB2YWx1ZVJhbmdlc1sncmdiJ11bJ3InXVsxXSxcbiAgICAgICAgICAgIGc6IHZlYy5lICogdmFsdWVSYW5nZXNbJ3JnYiddWydnJ11bMV0sXG4gICAgICAgICAgICBiOiB2ZWMuYyAqIHZhbHVlUmFuZ2VzWydyZ2InXVsnYiddWzFdXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc3RhdGljIHJnYjJ2ZWMgKHJnYikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdjogcmdiLnIgLyB2YWx1ZVJhbmdlc1sncmdiJ11bJ3InXVsxXSxcbiAgICAgICAgICAgIGU6IHJnYi5nIC8gdmFsdWVSYW5nZXNbJ3JnYiddWydnJ11bMV0sXG4gICAgICAgICAgICBjOiByZ2IuYiAvIHZhbHVlUmFuZ2VzWydyZ2InXVsnYiddWzFdXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEhFWCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuICAgIHN0YXRpYyBSR0IySEVYIChyZ2IpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIChyZ2IuciA8IDE2ID8gJzAnIDogJycpICsgcmdiLnIudG9TdHJpbmcoMTYpICtcbiAgICAgICAgICAgIChyZ2IuZyA8IDE2ID8gJzAnIDogJycpICsgcmdiLmcudG9TdHJpbmcoMTYpICtcbiAgICAgICAgICAgIChyZ2IuYiA8IDE2ID8gJzAnIDogJycpICsgcmdiLmIudG9TdHJpbmcoMTYpXG4gICAgICAgICkudG9VcHBlckNhc2UoKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgSEVYMnJnYiAoSEVYKSB7XG4gICAgICAgIEhFWCA9IEhFWC5zcGxpdCgnJyk7IC8vIElFN1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcjogcGFyc2VJbnQoSEVYWzBdICsgSEVYW0hFWFszXSA/IDEgOiAwXSwgMTYpIC8gMjU1LFxuICAgICAgICAgICAgZzogcGFyc2VJbnQoSEVYW0hFWFszXSA/IDIgOiAxXSArIChIRVhbM10gfHwgSEVYWzFdKSwgMTYpIC8gMjU1LFxuICAgICAgICAgICAgYjogcGFyc2VJbnQoKEhFWFs0XSB8fCBIRVhbMl0pICsgKEhFWFs1XSB8fCBIRVhbMl0pLCAxNikgLyAyNTVcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gSFVFIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4gICAgc3RhdGljIGh1ZTJSR0IgKGh1ZSkge1xuICAgICAgICB2YXIgaCA9IGh1ZSAqIDYsXG4gICAgICAgICAgICAvLyBtb2QgPSB+fmggJSA2LCAvLyBNYXRoLmZsb29yKGgpIC0+IGZhc3RlciBpbiBtb3N0IGJyb3dzZXJzXG4gICAgICAgICAgICBtb2QgPSBNYXRoLmZsb29yKGgpLFxuICAgICAgICAgICAgaSA9IGggPT09IDYgPyAwIDogKGggLSBtb2QpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcjogTWF0aC5yb3VuZChbMSwgMSAtIGksIDAsIDAsIGksIDFdW21vZF0gKiAyNTUpLFxuICAgICAgICAgICAgZzogTWF0aC5yb3VuZChbaSwgMSwgMSwgMSAtIGksIDAsIDBdW21vZF0gKiAyNTUpLFxuICAgICAgICAgICAgYjogTWF0aC5yb3VuZChbMCwgMCwgaSwgMSwgMSwgMSAtIGldW21vZF0gKiAyNTUpXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEhTViAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuICAgIHN0YXRpYyByZ2IyaHN2IChyZ2IpIHsgLy8gZmFzdGVyXG4gICAgICAgIHZhciByID0gcmdiLnIsXG4gICAgICAgICAgICBnID0gcmdiLmcsXG4gICAgICAgICAgICBiID0gcmdiLmIsXG4gICAgICAgICAgICBrID0gMCxcbiAgICAgICAgICAgIGNocm9tYSxcbiAgICAgICAgICAgIG1pbixcbiAgICAgICAgICAgIHM7XG5cbiAgICAgICAgaWYgKGcgPCBiKSB7XG4gICAgICAgICAgICBnID0gYiArIChiID0gZywgMCk7XG4gICAgICAgICAgICBrID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgbWluID0gYjtcbiAgICAgICAgaWYgKHIgPCBnKSB7XG4gICAgICAgICAgICByID0gZyArIChnID0gciwgMCk7XG4gICAgICAgICAgICBrID0gLTIgLyA2IC0gaztcbiAgICAgICAgICAgIG1pbiA9IE1hdGgubWluKGcsIGIpOyAvLyBnIDwgYiA/IGcgOiBiOyA/Pz9cbiAgICAgICAgfVxuICAgICAgICBjaHJvbWEgPSByIC0gbWluO1xuICAgICAgICBzID0gciA/IChjaHJvbWEgLyByKSA6IDA7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBoOiBzIDwgMWUtMTUgPyAoKF9jb2xvcnMgJiYgX2NvbG9ycy5oc2wgJiYgX2NvbG9ycy5oc2wuaCkgfHwgMCkgOlxuICAgICAgICAgICAgICAgIGNocm9tYSA/IE1hdGguYWJzKGsgKyAoZyAtIGIpIC8gKDYgKiBjaHJvbWEpKSA6IDAsXG4gICAgICAgICAgICBzOiByID8gKGNocm9tYSAvIHIpIDogKChfY29sb3JzICYmIF9jb2xvcnMuaHN2ICYmIF9jb2xvcnMuaHN2LnMpIHx8IDApLCAvLyA/P19jb2xvcnMuaHN2LnMgfHwgMFxuICAgICAgICAgICAgdjogclxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHN0YXRpYyBoc3YycmdiIChoc3YpIHtcbiAgICAgICAgdmFyIGggPSBoc3YuaCAqIDYsXG4gICAgICAgICAgICBzID0gaHN2LnMsXG4gICAgICAgICAgICB2ID0gaHN2LnYsXG4gICAgICAgICAgICAvLyBpID0gfn5oLCAvLyBNYXRoLmZsb29yKGgpIC0+IGZhc3RlciBpbiBtb3N0IGJyb3dzZXJzXG4gICAgICAgICAgICBpID0gTWF0aC5mbG9vcihoKSxcbiAgICAgICAgICAgIGYgPSBoIC0gaSxcbiAgICAgICAgICAgIHAgPSB2ICogKDEgLSBzKSxcbiAgICAgICAgICAgIHEgPSB2ICogKDEgLSBmICogcyksXG4gICAgICAgICAgICB0ID0gdiAqICgxIC0gKDEgLSBmKSAqIHMpLFxuICAgICAgICAgICAgbW9kID0gaSAlIDY7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHI6IFt2LCBxLCBwLCBwLCB0LCB2XVttb2RdLFxuICAgICAgICAgICAgZzogW3QsIHYsIHYsIHEsIHAsIHBdW21vZF0sXG4gICAgICAgICAgICBiOiBbcCwgcCwgdCwgdiwgdiwgcV1bbW9kXVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBIU0wgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbiAgICBzdGF0aWMgaHN2MmhzbCAoaHN2KSB7XG4gICAgICAgIHZhciBsID0gKDIgLSBoc3YucykgKiBoc3YudixcbiAgICAgICAgICAgIHMgPSBoc3YucyAqIGhzdi52O1xuXG4gICAgICAgIHMgPSAhaHN2LnMgPyAwIDogbCA8IDEgPyAobCA/IHMgLyBsIDogMCkgOiBzIC8gKDIgLSBsKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaDogaHN2LmgsXG4gICAgICAgICAgICBzOiAhaHN2LnYgJiYgIXMgPyAoKF9jb2xvcnMgJiYgX2NvbG9ycy5oc2wgJiYgX2NvbG9ycy5oc2wucykgfHwgMCkgOiBzLCAvLyA/Pz9cbiAgICAgICAgICAgIGw6IGwgLyAyXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc3RhdGljIHJnYjJoc2wgKHJnYiwgZGVwZW5kZW50KSB7IC8vIG5vdCB1c2VkIGluIENvbG9yXG4gICAgICAgIHZhciBoc3YgPSBDb2xvckNvbnZlcnRlci5yZ2IyaHN2KHJnYik7XG5cbiAgICAgICAgcmV0dXJuIENvbG9yQ29udmVydGVyLmhzdjJoc2woZGVwZW5kZW50ID8gaHN2IDogKF9jb2xvcnMuaHN2ID0gaHN2KSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGhzbDJyZ2IgKGhzbCkge1xuICAgICAgICB2YXIgaCA9IGhzbC5oICogNixcbiAgICAgICAgICAgIHMgPSBoc2wucyxcbiAgICAgICAgICAgIGwgPSBoc2wubCxcbiAgICAgICAgICAgIHYgPSBsIDwgMC41ID8gbCAqICgxICsgcykgOiAobCArIHMpIC0gKHMgKiBsKSxcbiAgICAgICAgICAgIG0gPSBsICsgbCAtIHYsXG4gICAgICAgICAgICBzdiA9IHYgPyAoKHYgLSBtKSAvIHYpIDogMCxcbiAgICAgICAgICAgIC8vIHNleHRhbnQgPSB+fmgsIC8vIE1hdGguZmxvb3IoaCkgLT4gZmFzdGVyIGluIG1vc3QgYnJvd3NlcnNcbiAgICAgICAgICAgIHNleHRhbnQgPSBNYXRoLmZsb29yKGgpLFxuICAgICAgICAgICAgZnJhY3QgPSBoIC0gc2V4dGFudCxcbiAgICAgICAgICAgIHZzZiA9IHYgKiBzdiAqIGZyYWN0LFxuICAgICAgICAgICAgdCA9IG0gKyB2c2YsXG4gICAgICAgICAgICBxID0gdiAtIHZzZixcbiAgICAgICAgICAgIG1vZCA9IHNleHRhbnQgJSA2O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByOiBbdiwgcSwgbSwgbSwgdCwgdl1bbW9kXSxcbiAgICAgICAgICAgIGc6IFt0LCB2LCB2LCBxLCBtLCBtXVttb2RdLFxuICAgICAgICAgICAgYjogW20sIG0sIHQsIHYsIHYsIHFdW21vZF1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gQ01ZSyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cbiAgICAvLyBRdW90ZSBmcm9tIFdpa2lwZWRpYTpcbiAgICAvLyAnU2luY2UgUkdCIGFuZCBDTVlLIHNwYWNlcyBhcmUgYm90aCBkZXZpY2UtZGVwZW5kZW50IHNwYWNlcywgdGhlcmUgaXMgbm9cbiAgICAvLyBzaW1wbGUgb3IgZ2VuZXJhbCBjb252ZXJzaW9uIGZvcm11bGEgdGhhdCBjb252ZXJ0cyBiZXR3ZWVuIHRoZW0uXG4gICAgLy8gQ29udmVyc2lvbnMgYXJlIGdlbmVyYWxseSBkb25lIHRocm91Z2ggY29sb3IgbWFuYWdlbWVudCBzeXN0ZW1zLCB1c2luZ1xuICAgIC8vIGNvbG9yIHByb2ZpbGVzIHRoYXQgZGVzY3JpYmUgdGhlIHNwYWNlcyBiZWluZyBjb252ZXJ0ZWQuIE5ldmVydGhlbGVzcywgdGhlXG4gICAgLy8gY29udmVyc2lvbnMgY2Fubm90IGJlIGV4YWN0LCBzaW5jZSB0aGVzZSBzcGFjZXMgaGF2ZSB2ZXJ5IGRpZmZlcmVudCBnYW11dHMuJ1xuICAgIC8vIFRyYW5zbGF0aW9uOiB0aGUgZm9sbG93aW5nIGFyZSBqdXN0IHNpbXBsZSBSR0IgdG8gQ01ZKEspIGFuZCB2aXNhIHZlcnNhIGNvbnZlcnNpb24gZnVuY3Rpb25zLlxuXG4gICAgc3RhdGljIHJnYjJjbXkgKHJnYikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYzogMSAtIHJnYi5yLFxuICAgICAgICAgICAgbTogMSAtIHJnYi5nLFxuICAgICAgICAgICAgeTogMSAtIHJnYi5iXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc3RhdGljIGNteTJjbXlrIChjbXkpIHtcbiAgICAgICAgdmFyIGsgPSBNYXRoLm1pbihNYXRoLm1pbihjbXkuYywgY215Lm0pLCBjbXkueSksXG4gICAgICAgICAgICB0ID0gMSAtIGsgfHwgMWUtMjA7XG5cbiAgICAgICAgcmV0dXJuIHsgLy8gcmVndWxhclxuICAgICAgICAgICAgYzogKGNteS5jIC0gaykgLyB0LFxuICAgICAgICAgICAgbTogKGNteS5tIC0gaykgLyB0LFxuICAgICAgICAgICAgeTogKGNteS55IC0gaykgLyB0LFxuICAgICAgICAgICAgazoga1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHN0YXRpYyBjbXlrMmNteSAoY215aykge1xuICAgICAgICB2YXIgayA9IGNteWsuaztcblxuICAgICAgICByZXR1cm4geyAvLyByZWd1bGFyXG4gICAgICAgICAgICBjOiBjbXlrLmMgKiAoMSAtIGspICsgayxcbiAgICAgICAgICAgIG06IGNteWsubSAqICgxIC0gaykgKyBrLFxuICAgICAgICAgICAgeTogY215ay55ICogKDEgLSBrKSArIGtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBzdGF0aWMgY215MnJnYiAoY215KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByOiAxIC0gY215LmMsXG4gICAgICAgICAgICBnOiAxIC0gY215Lm0sXG4gICAgICAgICAgICBiOiAxIC0gY215LnlcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBzdGF0aWMgcmdiMmNteWsgKHJnYikge1xuICAgICAgICB2YXIgY215ID0gQ29sb3JDb252ZXJ0ZXIucmdiMmNteShyZ2IpOyAvLyBkb3BwZWx0Pz9cbiAgICAgICAgcmV0dXJuIENvbG9yQ29udmVydGVyLmNteTJjbXlrKGNteSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGNteWsycmdiIChjbXlrKSB7XG4gICAgICAgIHZhciBjbXkgPSBDb2xvckNvbnZlcnRlci5jbXlrMmNteShjbXlrKTsgLy8gZG9wcGVsdD8/XG4gICAgICAgIHJldHVybiBDb2xvckNvbnZlcnRlci5jbXkycmdiKGNteSk7XG4gICAgfVxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIExBQiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuICAgIHN0YXRpYyBYWVoycmdiIChYWVopIHtcbiAgICAgICAgdmFyIE0gPSBYWVpNYXRyaXgsXG4gICAgICAgICAgICBYID0gWFlaLlgsXG4gICAgICAgICAgICBZID0gWFlaLlksXG4gICAgICAgICAgICBaID0gWFlaLlosXG4gICAgICAgICAgICByID0gWCAqIE0uUlswXSArIFkgKiBNLlJbMV0gKyBaICogTS5SWzJdLFxuICAgICAgICAgICAgZyA9IFggKiBNLkdbMF0gKyBZICogTS5HWzFdICsgWiAqIE0uR1syXSxcbiAgICAgICAgICAgIGIgPSBYICogTS5CWzBdICsgWSAqIE0uQlsxXSArIFogKiBNLkJbMl0sXG4gICAgICAgICAgICBOID0gMSAvIDIuNDtcblxuICAgICAgICBNID0gMC4wMDMxMzA4O1xuXG4gICAgICAgIHIgPSAociA+IE0gPyAxLjA1NSAqIE1hdGgucG93KHIsIE4pIC0gMC4wNTUgOiAxMi45MiAqIHIpO1xuICAgICAgICBnID0gKGcgPiBNID8gMS4wNTUgKiBNYXRoLnBvdyhnLCBOKSAtIDAuMDU1IDogMTIuOTIgKiBnKTtcbiAgICAgICAgYiA9IChiID4gTSA/IDEuMDU1ICogTWF0aC5wb3coYiwgTikgLSAwLjA1NSA6IDEyLjkyICogYik7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHI6IGxpbWl0VmFsdWUociwgMCwgMSksXG4gICAgICAgICAgICBnOiBsaW1pdFZhbHVlKGcsIDAsIDEpLFxuICAgICAgICAgICAgYjogbGltaXRWYWx1ZShiLCAwLCAxKVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHN0YXRpYyByZ2IyWFlaIChyZ2IpIHtcbiAgICAgICAgdmFyIE0gPSBYWVpNYXRyaXgsXG4gICAgICAgICAgICByID0gcmdiLnIsXG4gICAgICAgICAgICBnID0gcmdiLmcsXG4gICAgICAgICAgICBiID0gcmdiLmIsXG4gICAgICAgICAgICBOID0gMC4wNDA0NTtcblxuICAgICAgICByID0gKHIgPiBOID8gTWF0aC5wb3coKHIgKyAwLjA1NSkgLyAxLjA1NSwgMi40KSA6IHIgLyAxMi45Mik7XG4gICAgICAgIGcgPSAoZyA+IE4gPyBNYXRoLnBvdygoZyArIDAuMDU1KSAvIDEuMDU1LCAyLjQpIDogZyAvIDEyLjkyKTtcbiAgICAgICAgYiA9IChiID4gTiA/IE1hdGgucG93KChiICsgMC4wNTUpIC8gMS4wNTUsIDIuNCkgOiBiIC8gMTIuOTIpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBYOiByICogTS5YWzBdICsgZyAqIE0uWFsxXSArIGIgKiBNLlhbMl0sXG4gICAgICAgICAgICBZOiByICogTS5ZWzBdICsgZyAqIE0uWVsxXSArIGIgKiBNLllbMl0sXG4gICAgICAgICAgICBaOiByICogTS5aWzBdICsgZyAqIE0uWlsxXSArIGIgKiBNLlpbMl1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBzdGF0aWMgWFlaMkxhYiAoWFlaKSB7XG4gICAgICAgIHZhciBSID0gWFlaUmVmZXJlbmNlLFxuICAgICAgICAgICAgWCA9IFhZWi5YIC8gUi5YLFxuICAgICAgICAgICAgWSA9IFhZWi5ZIC8gUi5ZLFxuICAgICAgICAgICAgWiA9IFhZWi5aIC8gUi5aLFxuICAgICAgICAgICAgTiA9IDE2IC8gMTE2LFxuICAgICAgICAgICAgTSA9IDEgLyAzLFxuICAgICAgICAgICAgSyA9IDAuMDA4ODU2LFxuICAgICAgICAgICAgTCA9IDcuNzg3MDM3O1xuXG4gICAgICAgIFggPSBYID4gSyA/IE1hdGgucG93KFgsIE0pIDogKEwgKiBYKSArIE47XG4gICAgICAgIFkgPSBZID4gSyA/IE1hdGgucG93KFksIE0pIDogKEwgKiBZKSArIE47XG4gICAgICAgIFogPSBaID4gSyA/IE1hdGgucG93KFosIE0pIDogKEwgKiBaKSArIE47XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIEw6ICgxMTYgKiBZKSAtIDE2LFxuICAgICAgICAgICAgYTogNTAwICogKFggLSBZKSxcbiAgICAgICAgICAgIGI6IDIwMCAqIChZIC0gWilcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBzdGF0aWMgTGFiMlhZWiAoTGFiKSB7XG4gICAgICAgIHZhciBSID0gWFlaUmVmZXJlbmNlLFxuICAgICAgICAgICAgWSA9IChMYWIuTCArIDE2KSAvIDExNixcbiAgICAgICAgICAgIFggPSBMYWIuYSAvIDUwMCArIFksXG4gICAgICAgICAgICBaID0gWSAtIExhYi5iIC8gMjAwLFxuICAgICAgICAgICAgWDMgPSBNYXRoLnBvdyhYLCAzKSxcbiAgICAgICAgICAgIFkzID0gTWF0aC5wb3coWSwgMyksXG4gICAgICAgICAgICBaMyA9IE1hdGgucG93KFosIDMpLFxuICAgICAgICAgICAgTiA9IDE2IC8gMTE2LFxuICAgICAgICAgICAgSyA9IDAuMDA4ODU2LFxuICAgICAgICAgICAgTCA9IDcuNzg3MDM3O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBYOiAoWDMgPiBLID8gWDMgOiAoWCAtIE4pIC8gTCkgKiBSLlgsXG4gICAgICAgICAgICBZOiAoWTMgPiBLID8gWTMgOiAoWSAtIE4pIC8gTCkgKiBSLlksXG4gICAgICAgICAgICBaOiAoWjMgPiBLID8gWjMgOiAoWiAtIE4pIC8gTCkgKiBSLlpcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBzdGF0aWMgcmdiMkxhYiAocmdiKSB7XG4gICAgICAgIHZhciBYWVogPSBDb2xvckNvbnZlcnRlci5yZ2IyWFlaKHJnYik7XG5cbiAgICAgICAgcmV0dXJuIENvbG9yQ29udmVydGVyLlhZWjJMYWIoWFlaKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgTGFiMnJnYiAoTGFiKSB7XG4gICAgICAgIHZhciBYWVogPSBDb2xvckNvbnZlcnRlci5MYWIyWFlaKExhYik7XG5cbiAgICAgICAgcmV0dXJuIENvbG9yQ29udmVydGVyLlhZWjJyZ2IoWFlaKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsaW1pdFZhbHVlKHZhbHVlLCBtaW4sIG1heCkge1xuICAgIC8vIHJldHVybiBNYXRoLm1heChtaW4sIE1hdGgubWluKG1heCwgdmFsdWUpKTsgLy8gZmFzdGVyPz9cbiAgICByZXR1cm4gKHZhbHVlID4gbWF4ID8gbWF4IDogdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRMdW1pbmFuY2UocmdiLCBub3JtYWxpemVkKSB7XG4gICAgdmFyIGRpdiA9IG5vcm1hbGl6ZWQgPyAxIDogMjU1LFxuICAgICAgICBSR0IgPSBbcmdiLnIgLyBkaXYsIHJnYi5nIC8gZGl2LCByZ2IuYiAvIGRpdl07XG5cbiAgICBmb3IgKHZhciBpID0gUkdCLmxlbmd0aDsgaS0tOykge1xuICAgICAgICBSR0JbaV0gPSBSR0JbaV0gPD0gMC4wMzkyOCA/IFJHQltpXSAvIDEyLjkyIDogTWF0aC5wb3coKChSR0JbaV0gKyAwLjA1NSkgLyAxLjA1NSksIDIuNCk7XG4gICAgfVxuICAgIHJldHVybiAoKGx1bWluYW5jZS5yICogUkdCWzBdKSArIChsdW1pbmFuY2UuZyAqIFJHQlsxXSkgKyAobHVtaW5hbmNlLmIgKiBSR0JbMl0pKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbG9yQXNSR0IgKGNvbG9yKSB7XG4gICAgLy8gQ3JlYXRlIGEgdGVzdCBlbGVtZW50IHRvIGFwcGx5IGEgQ1NTIGNvbG9yIGFuZCByZXRyaWV2ZVxuICAgIC8vIGEgbm9ybWFsaXplZCB2YWx1ZSBmcm9tLlxuICAgIGxldCB0ZXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGVzdC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcjtcblxuICAgIC8vIENocm9tZSByZXF1aXJlcyB0aGUgZWxlbWVudCB0byBiZSBpbiBET00gZm9yIHN0eWxlcyB0byBiZSBjb21wdXRlZC5cbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRlc3QpO1xuXG4gICAgLy8gR2V0IHRoZSBjb21wdXRlZCBzdHlsZSBmcm9tIHRoZSBicm93c2VyLCBpbiB0aGUgZm9ybWF0IG9mXG4gICAgLy8gcmdiKHgsIHgsIHgpXG4gICAgbGV0IG5vcm1hbGl6ZWQgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0ZXN0KS5iYWNrZ3JvdW5kQ29sb3I7XG5cbiAgICAvLyBJbiBjZXJ0YWluIGNhc2VzIGdldENvbXB1dGVkU3R5bGUoKSBtYXkgcmV0dXJuXG4gICAgLy8gJ3RyYW5zcGFyZW50JyBhcyBhIHZhbHVlLCB3aGljaCBpcyB1c2VsZXNzKD8pIGZvciB0aGUgY3VycmVudFxuICAgIC8vIGNvbG9yIHBpY2tlci4gQWNjb3JkaW5nIHRvIHNwZWNpZmljYXRpb25zLCB0cmFuc3BhcmVudFxuICAgIC8vIGlzIGEgYmxhY2sgd2l0aCAwIGFscGhhIC0gcmdiYSgwLCAwLCAwLCAwKSAtIGJ1dCBiZWNhdXNlXG4gICAgLy8gdGhlIHBpY2tlciBkb2VzIG5vdCBjdXJyZW50bHkgaGFuZGxlIGFscGhhLCB3ZSByZXR1cm4gdGhlXG4gICAgLy8gYmxhY2sgdmFsdWUuXG4gICAgaWYgKG5vcm1hbGl6ZWQgPT09ICd0cmFuc3BhcmVudCcpIHtcbiAgICAgICAgbm9ybWFsaXplZCA9ICdyZ2IoMCwgMCwgMCknO1xuICAgIH1cblxuICAgIC8vIEdhcmJhZ2UgY29sbGVjdGlvblxuICAgIHRlc3QucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0ZXN0KTtcblxuICAgIHJldHVybiBub3JtYWxpemVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmFsdWVSYW5nZXModHlwZSkge1xuICAgIGlmICghdHlwZSkge1xuICAgICAgICByZXR1cm4gdmFsdWVSYW5nZXM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsdWVSYW5nZXNbdHlwZV07XG4gICAgfVxufVxuIiwiXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGbG9hdCB7XG4gICAgY29uc3RydWN0b3IgKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXRTdHJpbmcgKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS50b0ZpeGVkKDMpO1xuICAgIH1cblxuICAgIHVuaWZvcm1UeXBlICgpIHtcbiAgICAgICAgcmV0dXJuICdmbG9hdCc7XG4gICAgfVxuXG4gICAgdW5pZm9ybVZhbHVlICgpIHtcbiAgICAgICAgcmV0dXJuIFt0aGlzLnZhbHVlXTtcbiAgICB9XG5cbiAgICB1bmlmb3JtTWV0aG9kICgpIHtcbiAgICAgICAgcmV0dXJuICcxZic7XG4gICAgfVxuXG59XG4iLCJpbXBvcnQgVmVjdG9yIGZyb20gJy4vVmVjdG9yJztcblxuLy8gVE9ETzpcbi8vICAgICAgLSBnZW5lcmFsaXplIHRoaXMgZm9yIG1hdDIsIG1hdDMgYW5kIG1hdDRcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWF0cml4IHtcbiAgICBjb25zdHJ1Y3RvcihtLCB0eXBlKSB7XG4gICAgICAgIHRoaXMuZGltID0gMztcbiAgICAgICAgdGhpcy52YWx1ZSA9IFtcbiAgICAgICAgICAgICAgICAgICAgWzEsIDAsIDBdLFxuICAgICAgICAgICAgICAgICAgICBbMCwgMSwgMF0sXG4gICAgICAgICAgICAgICAgICAgIFswLCAwLCAxXV07XG4gICAgICAgIGlmIChtKSB7XG4gICAgICAgICAgICB0aGlzLnNldChtLCB0eXBlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldCAobSwgdHlwZSkge1xuICAgICAgICBpZiAobS52YWx1ZVswXVswXSkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG0udmFsdWU7XG4gICAgICAgICAgICB0aGlzLmRpbSA9IG0uZGltO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1bMF1bMF0pIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBtO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcm90YXRlWCAodGhldGEpIHtcbiAgICAgICAgbGV0IGMgPSBNYXRoLmNvcyh0aGV0YSk7XG4gICAgICAgIGxldCBzID0gTWF0aC5zaW4odGhldGEpO1xuICAgICAgICBsZXQgVCA9IFtcbiAgICAgICAgICAgICAgICBbMSwgMCwgMF0sXG4gICAgICAgICAgICAgICAgWzAsIGMsIC1zXSxcbiAgICAgICAgICAgICAgICBbMCwgcywgY11dO1xuXG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmdldFRyYW5zZm9ybShUKTtcbiAgICB9XG5cbiAgICByb3RhdGVZICh0aGV0YSkge1xuICAgICAgICBsZXQgYyA9IE1hdGguY29zKHRoZXRhKTtcbiAgICAgICAgbGV0IHMgPSBNYXRoLnNpbih0aGV0YSk7XG4gICAgICAgIGxldCBUID0gW1xuICAgICAgICAgICAgICAgIFsgYywgMCwgc10sXG4gICAgICAgICAgICAgICAgWyAwLCAxLCAwXSxcbiAgICAgICAgICAgICAgICBbIC1zLCAwLCBjXV07XG5cbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuZ2V0VHJhbnNmb3JtKFQpO1xuICAgIH1cblxuICAgIGdldE11bHQgKHYpIHtcbiAgICAgICAgaWYgKHZbMF1bMF0gfHwgKHYudmFsdWUgJiYgdi52YWx1ZVswXVswXSkpIHtcbiAgICAgICAgICAgIC8vIFRPRE86IHdoYXQgSWYgdiBpcyBhIG1hdHJpeFxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1RPRE86IHdoYXQgSWYgdiBpcyBhIG1hdHJpeCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgdiBpcyBhIHZlY3RvclxuICAgICAgICAgICAgbGV0IEEgPSBuZXcgVmVjdG9yKHYpO1xuICAgICAgICAgICAgbGV0IEIgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQS5kaW07IGkrKykge1xuICAgICAgICAgICAgICAgIEIucHVzaChBLnZhbHVlWzBdICogdGhpcy52YWx1ZVtpXVswXSArIEEudmFsdWVbMV0gKiB0aGlzLnZhbHVlW2ldWzFdICsgQS52YWx1ZVsyXSAqIHRoaXMudmFsdWVbaV1bMl0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoQik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRUcmFuc2Zvcm0gKG0pIHtcbiAgICAgICAgbGV0IG5ld01hdHJpeCA9IFtdO1xuICAgICAgICBmb3IgKGxldCByb3cgaW4gbSkge1xuICAgICAgICAgICAgbGV0IHQgPSBtW3Jvd107XG4gICAgICAgICAgICBsZXQgbmV3Um93ID0gW107XG4gICAgICAgICAgICBuZXdSb3cucHVzaCh0WzBdICogdGhpcy52YWx1ZVswXVswXSArIHRbMV0gKiB0aGlzLnZhbHVlWzFdWzBdICsgdFsyXSAqIHRoaXMudmFsdWVbMl1bMF0pO1xuICAgICAgICAgICAgbmV3Um93LnB1c2godFswXSAqIHRoaXMudmFsdWVbMF1bMV0gKyB0WzFdICogdGhpcy52YWx1ZVsxXVsxXSArIHRbMl0gKiB0aGlzLnZhbHVlWzJdWzFdKTtcbiAgICAgICAgICAgIG5ld1Jvdy5wdXNoKHRbMF0gKiB0aGlzLnZhbHVlWzBdWzJdICsgdFsxXSAqIHRoaXMudmFsdWVbMV1bMl0gKyB0WzJdICogdGhpcy52YWx1ZVsyXVsyXSk7XG4gICAgICAgICAgICBuZXdNYXRyaXgucHVzaChuZXdSb3cpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdNYXRyaXg7XG4gICAgfVxuXG4gICAgZ2V0SW52KCkge1xuICAgICAgICBsZXQgTSA9IG5ldyBNYXRyaXgoKTtcbiAgICAgICAgbGV0IGRldGVybWluYW50ID0gdGhpcy52YWx1ZVswXVswXSAqICh0aGlzLnZhbHVlWzFdWzFdICogdGhpcy52YWx1ZVsyXVsyXSAtIHRoaXMudmFsdWVbMl1bMV0gKiB0aGlzLnZhbHVlWzFdWzJdKSAtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZVswXVsxXSAqICh0aGlzLnZhbHVlWzFdWzBdICogdGhpcy52YWx1ZVsyXVsyXSAtIHRoaXMudmFsdWVbMV1bMl0gKiB0aGlzLnZhbHVlWzJdWzBdKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZVswXVsyXSAqICh0aGlzLnZhbHVlWzFdWzBdICogdGhpcy52YWx1ZVsyXVsxXSAtIHRoaXMudmFsdWVbMV1bMV0gKiB0aGlzLnZhbHVlWzJdWzBdKTtcbiAgICAgICAgbGV0IGludmRldCA9IDEgLyBkZXRlcm1pbmFudDtcbiAgICAgICAgTS52YWx1ZVswXVswXSA9ICh0aGlzLnZhbHVlWzFdWzFdICogdGhpcy52YWx1ZVsyXVsyXSAtIHRoaXMudmFsdWVbMl1bMV0gKiB0aGlzLnZhbHVlWzFdWzJdKSAqIGludmRldDtcbiAgICAgICAgTS52YWx1ZVswXVsxXSA9IC0odGhpcy52YWx1ZVswXVsxXSAqIHRoaXMudmFsdWVbMl1bMl0gLSB0aGlzLnZhbHVlWzBdWzJdICogdGhpcy52YWx1ZVsyXVsxXSkgKiBpbnZkZXQ7XG4gICAgICAgIE0udmFsdWVbMF1bMl0gPSAodGhpcy52YWx1ZVswXVsxXSAqIHRoaXMudmFsdWVbMV1bMl0gLSB0aGlzLnZhbHVlWzBdWzJdICogdGhpcy52YWx1ZVsxXVsxXSkgKiBpbnZkZXQ7XG4gICAgICAgIE0udmFsdWVbMV1bMF0gPSAtKHRoaXMudmFsdWVbMV1bMF0gKiB0aGlzLnZhbHVlWzJdWzJdIC0gdGhpcy52YWx1ZVsxXVsyXSAqIHRoaXMudmFsdWVbMl1bMF0pICogaW52ZGV0O1xuICAgICAgICBNLnZhbHVlWzFdWzFdID0gKHRoaXMudmFsdWVbMF1bMF0gKiB0aGlzLnZhbHVlWzJdWzJdIC0gdGhpcy52YWx1ZVswXVsyXSAqIHRoaXMudmFsdWVbMl1bMF0pICogaW52ZGV0O1xuICAgICAgICBNLnZhbHVlWzFdWzJdID0gLSh0aGlzLnZhbHVlWzBdWzBdICogdGhpcy52YWx1ZVsxXVsyXSAtIHRoaXMudmFsdWVbMV1bMF0gKiB0aGlzLnZhbHVlWzBdWzJdKSAqIGludmRldDtcbiAgICAgICAgTS52YWx1ZVsyXVswXSA9ICh0aGlzLnZhbHVlWzFdWzBdICogdGhpcy52YWx1ZVsyXVsxXSAtIHRoaXMudmFsdWVbMl1bMF0gKiB0aGlzLnZhbHVlWzFdWzFdKSAqIGludmRldDtcbiAgICAgICAgTS52YWx1ZVsyXVsxXSA9IC0odGhpcy52YWx1ZVswXVswXSAqIHRoaXMudmFsdWVbMl1bMV0gLSB0aGlzLnZhbHVlWzJdWzBdICogdGhpcy52YWx1ZVswXVsxXSkgKiBpbnZkZXQ7XG4gICAgICAgIE0udmFsdWVbMl1bMl0gPSAodGhpcy52YWx1ZVswXVswXSAqIHRoaXMudmFsdWVbMV1bMV0gLSB0aGlzLnZhbHVlWzFdWzBdICogdGhpcy52YWx1ZVswXVsxXSkgKiBpbnZkZXQ7XG4gICAgICAgIHJldHVybiBNO1xuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFZlY3RvciB7XG4gICAgY29uc3RydWN0b3IgKHZlYywgdHlwZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gWzAsMF07XG4gICAgICAgIHRoaXMuZGltID0gMjtcbiAgICAgICAgdGhpcy5zZXQodmVjLCB0eXBlKTtcbiAgICB9XG5cbiAgICBzZXQgKHZlYywgdHlwZSkge1xuICAgICAgICBpZiAodHlwZW9mIHZlYyA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHR5cGUgPSB0eXBlIHx8ICd2ZWMyJztcbiAgICAgICAgICAgIHRoaXMuc2V0KFt2ZWNdLCB0eXBlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmVjID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgbGV0IHBhcnRzID0gdmVjLnJlcGxhY2UoLyg/OiN8XFwpfFxcXXwlKS9nLCAnJykuc3BsaXQoJygnKTtcbiAgICAgICAgICAgIGxldCBzdHJWYWx1ZXMgPSAocGFydHNbMV0gfHwgcGFydHNbMF0ucmVwbGFjZSgvKFxcWykvZywgJycpKS5zcGxpdCgvLFxccyovKTtcbiAgICAgICAgICAgIHR5cGUgPSB0eXBlIHx8IChwYXJ0c1sxXSA/IHBhcnRzWzBdLnN1YnN0cigwLCA0KSA6ICd2ZWMnICsgc3RyVmFsdWVzLmxlbmd0aCk7XG4gICAgICAgICAgICBsZXQgdmFsdWVzID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBpIGluIHN0clZhbHVlcykge1xuICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKHBhcnNlRmxvYXQoc3RyVmFsdWVzW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldCh2YWx1ZXMsIHR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZlYykge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmVjKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5kaW0gPSB0eXBlID8gTnVtYmVyKHR5cGUuc3Vic3RyKDMsIDQpKSA6IHZlYy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgbGV0IGZpbGxlciA9IHZlYy5sZW5ndGggPT09IDEgPyB2ZWNbMF0gOiAwO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kaW07IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlLnB1c2godmVjW2ldIHx8IGZpbGxlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodmVjLmRpbSkge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2ZWMudmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy5kaW0gPSB2ZWMuZGltO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0IHggKHYpIHtcbiAgICAgICAgdGhpcy52YWx1ZVswXSA9IHY7XG4gICAgfVxuXG4gICAgc2V0IHkgKHYpIHtcbiAgICAgICAgdGhpcy52YWx1ZVsxXSA9IHY7XG4gICAgfVxuXG4gICAgc2V0IHogKHYpIHtcbiAgICAgICAgaWYgKHRoaXMuZGltIDwgMykge1xuICAgICAgICAgICAgd2hpbGUgKHRoaXMuZGltIDwgMykge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUucHVzaCgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGltID0gMztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbHVlWzJdID0gdjtcbiAgICB9XG5cbiAgICBzZXQgdyAodikge1xuICAgICAgICBpZiAodGhpcy5kaW0gPCA0KSB7XG4gICAgICAgICAgICB3aGlsZSAodGhpcy5kaW0gPCA0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZS5wdXNoKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kaW0gPSA0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudmFsdWVbM10gPSB2O1xuICAgIH1cblxuICAgIGdldCB4ICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVbMF0gfHwgMC4wO1xuICAgIH1cblxuICAgIGdldCB5ICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVbMV0gfHwgMC4wO1xuICAgIH1cblxuICAgIGdldCB6ICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVbMl0gfHwgMC4wIDtcbiAgICB9XG5cbiAgICBnZXQgdyAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlWzNdIHx8IDAuMDtcbiAgICB9XG5cbiAgICBnZXRTdHJpbmcodHlwZSkge1xuICAgICAgICB0eXBlID0gdHlwZSB8fCAndmVjJyArIHRoaXMuZGltO1xuXG4gICAgICAgIGxldCBsZW4gPSB0aGlzLmRpbTtcbiAgICAgICAgbGV0IHN0ciA9ICcnO1xuICAgICAgICBsZXQgaGVhZCA9IHR5cGUgKyAnKCc7XG4gICAgICAgIGxldCBlbmQgPSAnKSc7XG5cbiAgICAgICAgaWYgKHR5cGUgPT09ICdhcnJheScpIHtcbiAgICAgICAgICAgIGhlYWQgPSAnWyc7XG4gICAgICAgICAgICBlbmQgPSAnXSc7XG4gICAgICAgICAgICBsZW4gPSB0aGlzLmRpbTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxlbiA9IE51bWJlcih0eXBlLnN1YnN0cigzLCA0KSk7XG4gICAgICAgIH1cblxuICAgICAgICBzdHIgPSBoZWFkO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBzdHIgKz0gdGhpcy52YWx1ZVtpXS50b0ZpeGVkKDMpO1xuICAgICAgICAgICAgaWYgKGkgIT09IGxlbiAtIDEpIHtcbiAgICAgICAgICAgICAgICBzdHIgKz0gJywnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHIgKz0gZW5kO1xuICAgIH1cblxuICAgIHVuaWZvcm1UeXBlICgpIHtcbiAgICAgICAgcmV0dXJuICd2ZWMnICsgdGhpcy5kaW07XG4gICAgfVxuXG4gICAgdW5pZm9ybVZhbHVlICgpIHtcbiAgICAgICAgdmFyIGFyciA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGltOyBpKyspIHtcbiAgICAgICAgICAgIGFyci5wdXNoKHRoaXMudmFsdWVbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnI7XG4gICAgfVxuXG4gICAgdW5pZm9ybU1ldGhvZCAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpbSArICdmJztcbiAgICB9XG5cbiAgICAvLyBWRUNUT1IgT1BFUkFUSU9OU1xuXG4gICAgYWRkICh2KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kaW07IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVbaV0gPSB0aGlzLnZhbHVlW2ldICsgdjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBBID0gbmV3IFZlY3Rvcih2KTtcbiAgICAgICAgICAgIGxldCBsaW0gPSBNYXRoLm1pbih0aGlzLmRpbSwgQS5kaW0pO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW07IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVbaV0gPSB0aGlzLnZhbHVlW2ldICsgQS52YWx1ZVtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN1YiAodikge1xuICAgICAgICBpZiAodHlwZW9mIHYgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGltOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlW2ldID0gdGhpcy52YWx1ZVtpXSAtIHY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgQSA9IG5ldyBWZWN0b3Iodik7XG4gICAgICAgICAgICBsZXQgbGltID0gTWF0aC5taW4odGhpcy5kaW0sIEEuZGltKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGltOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlW2ldID0gdGhpcy52YWx1ZVtpXSAtIEEudmFsdWVbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBtdWx0ICh2KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIC8vIE11bGl0cGx5IGJ5IHNjYWxhclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRpbTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZVtpXSA9IHRoaXMudmFsdWVbaV0gKiB2O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gTXVsdGlwbHkgdHdvIHZlY3RvcnNcbiAgICAgICAgICAgIGxldCBBID0gbmV3IFZlY3Rvcih2KTtcbiAgICAgICAgICAgIGxldCBsaW0gPSBNYXRoLm1pbih0aGlzLmRpbSwgQS5kaW0pO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW07IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVbaV0gPSB0aGlzLnZhbHVlW2ldICogQS52YWx1ZVtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRpdiAodikge1xuICAgICAgICBpZiAodHlwZW9mIHYgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAvLyBNdWxpdHBseSBieSBzY2FsYXJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kaW07IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVbaV0gPSB0aGlzLnZhbHVlW2ldIC8gdjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIE11bHRpcGx5IHR3byB2ZWN0b3JzXG4gICAgICAgICAgICBsZXQgQSA9IG5ldyBWZWN0b3Iodik7XG4gICAgICAgICAgICBsZXQgbGltID0gTWF0aC5taW4odGhpcy5kaW0sIEEuZGltKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGltOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlW2ldID0gdGhpcy52YWx1ZVtpXSAvIEEudmFsdWVbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBub3JtYWxpemUgKCkge1xuICAgICAgICBsZXQgbCA9IHRoaXMuZ2V0TGVuZ3RoKCk7XG4gICAgICAgIHRoaXMuZGl2KGwpO1xuICAgIH1cblxuICAgIGdldEFkZCAodikge1xuICAgICAgICB2YXIgQSA9IG5ldyBWZWN0b3IodGhpcyk7XG4gICAgICAgIEEuYWRkKHYpO1xuICAgICAgICByZXR1cm4gQTtcbiAgICB9XG5cbiAgICBnZXRTdWIgKHYpIHtcbiAgICAgICAgdmFyIEEgPSBuZXcgVmVjdG9yKHRoaXMpO1xuICAgICAgICBBLnN1Yih2KTtcbiAgICAgICAgcmV0dXJuIEE7XG4gICAgfVxuXG4gICAgZ2V0TXVsdCAodikge1xuICAgICAgICB2YXIgQSA9IG5ldyBWZWN0b3IodGhpcyk7XG4gICAgICAgIEEubXVsdCh2KTtcbiAgICAgICAgcmV0dXJuIEE7XG4gICAgfVxuXG4gICAgZ2V0RGl2ICh2KSB7XG4gICAgICAgIHZhciBBID0gbmV3IFZlY3Rvcih0aGlzKTtcbiAgICAgICAgQS5kaXYodik7XG4gICAgICAgIHJldHVybiBBO1xuICAgIH1cblxuICAgIGdldExlbmd0aFNxICgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGltID09PSAyKSB7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMudmFsdWVbMF0gKiB0aGlzLnZhbHVlWzBdICsgdGhpcy52YWx1ZVsxXSAqIHRoaXMudmFsdWVbMV0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLnZhbHVlWzBdICogdGhpcy52YWx1ZVswXSArIHRoaXMudmFsdWVbMV0gKiB0aGlzLnZhbHVlWzFdICsgdGhpcy52YWx1ZVsyXSAqIHRoaXMudmFsdWVbMl0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0TGVuZ3RoICgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCh0aGlzLmdldExlbmd0aFNxKCkpO1xuICAgIH1cbn1cbiIsIi8qISBAc291cmNlIGh0dHA6Ly9wdXJsLmVsaWdyZXkuY29tL2dpdGh1Yi9GaWxlU2F2ZXIuanMvYmxvYi9tYXN0ZXIvRmlsZVNhdmVyLmpzICovXG52YXIgc2F2ZUFzPXNhdmVBc3x8ZnVuY3Rpb24odmlldyl7XCJ1c2Ugc3RyaWN0XCI7aWYodHlwZW9mIG5hdmlnYXRvciE9PVwidW5kZWZpbmVkXCImJi9NU0lFIFsxLTldXFwuLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKXtyZXR1cm59dmFyIGRvYz12aWV3LmRvY3VtZW50LGdldF9VUkw9ZnVuY3Rpb24oKXtyZXR1cm4gdmlldy5VUkx8fHZpZXcud2Via2l0VVJMfHx2aWV3fSxzYXZlX2xpbms9ZG9jLmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIixcImFcIiksY2FuX3VzZV9zYXZlX2xpbms9XCJkb3dubG9hZFwiaW4gc2F2ZV9saW5rLGNsaWNrPWZ1bmN0aW9uKG5vZGUpe3ZhciBldmVudD1uZXcgTW91c2VFdmVudChcImNsaWNrXCIpO25vZGUuZGlzcGF0Y2hFdmVudChldmVudCl9LGlzX3NhZmFyaT0vVmVyc2lvblxcL1tcXGRcXC5dKy4qU2FmYXJpLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLHdlYmtpdF9yZXFfZnM9dmlldy53ZWJraXRSZXF1ZXN0RmlsZVN5c3RlbSxyZXFfZnM9dmlldy5yZXF1ZXN0RmlsZVN5c3RlbXx8d2Via2l0X3JlcV9mc3x8dmlldy5tb3pSZXF1ZXN0RmlsZVN5c3RlbSx0aHJvd19vdXRzaWRlPWZ1bmN0aW9uKGV4KXsodmlldy5zZXRJbW1lZGlhdGV8fHZpZXcuc2V0VGltZW91dCkoZnVuY3Rpb24oKXt0aHJvdyBleH0sMCl9LGZvcmNlX3NhdmVhYmxlX3R5cGU9XCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIixmc19taW5fc2l6ZT0wLGFyYml0cmFyeV9yZXZva2VfdGltZW91dD01MDAscmV2b2tlPWZ1bmN0aW9uKGZpbGUpe3ZhciByZXZva2VyPWZ1bmN0aW9uKCl7aWYodHlwZW9mIGZpbGU9PT1cInN0cmluZ1wiKXtnZXRfVVJMKCkucmV2b2tlT2JqZWN0VVJMKGZpbGUpfWVsc2V7ZmlsZS5yZW1vdmUoKX19O2lmKHZpZXcuY2hyb21lKXtyZXZva2VyKCl9ZWxzZXtzZXRUaW1lb3V0KHJldm9rZXIsYXJiaXRyYXJ5X3Jldm9rZV90aW1lb3V0KX19LGRpc3BhdGNoPWZ1bmN0aW9uKGZpbGVzYXZlcixldmVudF90eXBlcyxldmVudCl7ZXZlbnRfdHlwZXM9W10uY29uY2F0KGV2ZW50X3R5cGVzKTt2YXIgaT1ldmVudF90eXBlcy5sZW5ndGg7d2hpbGUoaS0tKXt2YXIgbGlzdGVuZXI9ZmlsZXNhdmVyW1wib25cIitldmVudF90eXBlc1tpXV07aWYodHlwZW9mIGxpc3RlbmVyPT09XCJmdW5jdGlvblwiKXt0cnl7bGlzdGVuZXIuY2FsbChmaWxlc2F2ZXIsZXZlbnR8fGZpbGVzYXZlcil9Y2F0Y2goZXgpe3Rocm93X291dHNpZGUoZXgpfX19fSxhdXRvX2JvbT1mdW5jdGlvbihibG9iKXtpZigvXlxccyooPzp0ZXh0XFwvXFxTKnxhcHBsaWNhdGlvblxcL3htbHxcXFMqXFwvXFxTKlxcK3htbClcXHMqOy4qY2hhcnNldFxccyo9XFxzKnV0Zi04L2kudGVzdChibG9iLnR5cGUpKXtyZXR1cm4gbmV3IEJsb2IoW1wiXFx1ZmVmZlwiLGJsb2JdLHt0eXBlOmJsb2IudHlwZX0pfXJldHVybiBibG9ifSxGaWxlU2F2ZXI9ZnVuY3Rpb24oYmxvYixuYW1lLG5vX2F1dG9fYm9tKXtpZighbm9fYXV0b19ib20pe2Jsb2I9YXV0b19ib20oYmxvYil9dmFyIGZpbGVzYXZlcj10aGlzLHR5cGU9YmxvYi50eXBlLGJsb2JfY2hhbmdlZD1mYWxzZSxvYmplY3RfdXJsLHRhcmdldF92aWV3LGRpc3BhdGNoX2FsbD1mdW5jdGlvbigpe2Rpc3BhdGNoKGZpbGVzYXZlcixcIndyaXRlc3RhcnQgcHJvZ3Jlc3Mgd3JpdGUgd3JpdGVlbmRcIi5zcGxpdChcIiBcIikpfSxmc19lcnJvcj1mdW5jdGlvbigpe2lmKHRhcmdldF92aWV3JiZpc19zYWZhcmkmJnR5cGVvZiBGaWxlUmVhZGVyIT09XCJ1bmRlZmluZWRcIil7dmFyIHJlYWRlcj1uZXcgRmlsZVJlYWRlcjtyZWFkZXIub25sb2FkZW5kPWZ1bmN0aW9uKCl7dmFyIGJhc2U2NERhdGE9cmVhZGVyLnJlc3VsdDt0YXJnZXRfdmlldy5sb2NhdGlvbi5ocmVmPVwiZGF0YTphdHRhY2htZW50L2ZpbGVcIitiYXNlNjREYXRhLnNsaWNlKGJhc2U2NERhdGEuc2VhcmNoKC9bLDtdLykpO2ZpbGVzYXZlci5yZWFkeVN0YXRlPWZpbGVzYXZlci5ET05FO2Rpc3BhdGNoX2FsbCgpfTtyZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTtmaWxlc2F2ZXIucmVhZHlTdGF0ZT1maWxlc2F2ZXIuSU5JVDtyZXR1cm59aWYoYmxvYl9jaGFuZ2VkfHwhb2JqZWN0X3VybCl7b2JqZWN0X3VybD1nZXRfVVJMKCkuY3JlYXRlT2JqZWN0VVJMKGJsb2IpfWlmKHRhcmdldF92aWV3KXt0YXJnZXRfdmlldy5sb2NhdGlvbi5ocmVmPW9iamVjdF91cmx9ZWxzZXt2YXIgbmV3X3RhYj12aWV3Lm9wZW4ob2JqZWN0X3VybCxcIl9ibGFua1wiKTtpZihuZXdfdGFiPT11bmRlZmluZWQmJmlzX3NhZmFyaSl7dmlldy5sb2NhdGlvbi5ocmVmPW9iamVjdF91cmx9fWZpbGVzYXZlci5yZWFkeVN0YXRlPWZpbGVzYXZlci5ET05FO2Rpc3BhdGNoX2FsbCgpO3Jldm9rZShvYmplY3RfdXJsKX0sYWJvcnRhYmxlPWZ1bmN0aW9uKGZ1bmMpe3JldHVybiBmdW5jdGlvbigpe2lmKGZpbGVzYXZlci5yZWFkeVN0YXRlIT09ZmlsZXNhdmVyLkRPTkUpe3JldHVybiBmdW5jLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fSxjcmVhdGVfaWZfbm90X2ZvdW5kPXtjcmVhdGU6dHJ1ZSxleGNsdXNpdmU6ZmFsc2V9LHNsaWNlO2ZpbGVzYXZlci5yZWFkeVN0YXRlPWZpbGVzYXZlci5JTklUO2lmKCFuYW1lKXtuYW1lPVwiZG93bmxvYWRcIn1pZihjYW5fdXNlX3NhdmVfbGluayl7b2JqZWN0X3VybD1nZXRfVVJMKCkuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtzYXZlX2xpbmsuaHJlZj1vYmplY3RfdXJsO3NhdmVfbGluay5kb3dubG9hZD1uYW1lO2NsaWNrKHNhdmVfbGluayk7ZGlzcGF0Y2hfYWxsKCk7cmV2b2tlKG9iamVjdF91cmwpO2ZpbGVzYXZlci5yZWFkeVN0YXRlPWZpbGVzYXZlci5ET05FfSk7cmV0dXJufWlmKHZpZXcuY2hyb21lJiZ0eXBlJiZ0eXBlIT09Zm9yY2Vfc2F2ZWFibGVfdHlwZSl7c2xpY2U9YmxvYi5zbGljZXx8YmxvYi53ZWJraXRTbGljZTtibG9iPXNsaWNlLmNhbGwoYmxvYiwwLGJsb2Iuc2l6ZSxmb3JjZV9zYXZlYWJsZV90eXBlKTtibG9iX2NoYW5nZWQ9dHJ1ZX1pZih3ZWJraXRfcmVxX2ZzJiZuYW1lIT09XCJkb3dubG9hZFwiKXtuYW1lKz1cIi5kb3dubG9hZFwifWlmKHR5cGU9PT1mb3JjZV9zYXZlYWJsZV90eXBlfHx3ZWJraXRfcmVxX2ZzKXt0YXJnZXRfdmlldz12aWV3fWlmKCFyZXFfZnMpe2ZzX2Vycm9yKCk7cmV0dXJufWZzX21pbl9zaXplKz1ibG9iLnNpemU7cmVxX2ZzKHZpZXcuVEVNUE9SQVJZLGZzX21pbl9zaXplLGFib3J0YWJsZShmdW5jdGlvbihmcyl7ZnMucm9vdC5nZXREaXJlY3RvcnkoXCJzYXZlZFwiLGNyZWF0ZV9pZl9ub3RfZm91bmQsYWJvcnRhYmxlKGZ1bmN0aW9uKGRpcil7dmFyIHNhdmU9ZnVuY3Rpb24oKXtkaXIuZ2V0RmlsZShuYW1lLGNyZWF0ZV9pZl9ub3RfZm91bmQsYWJvcnRhYmxlKGZ1bmN0aW9uKGZpbGUpe2ZpbGUuY3JlYXRlV3JpdGVyKGFib3J0YWJsZShmdW5jdGlvbih3cml0ZXIpe3dyaXRlci5vbndyaXRlZW5kPWZ1bmN0aW9uKGV2ZW50KXt0YXJnZXRfdmlldy5sb2NhdGlvbi5ocmVmPWZpbGUudG9VUkwoKTtmaWxlc2F2ZXIucmVhZHlTdGF0ZT1maWxlc2F2ZXIuRE9ORTtkaXNwYXRjaChmaWxlc2F2ZXIsXCJ3cml0ZWVuZFwiLGV2ZW50KTtyZXZva2UoZmlsZSl9O3dyaXRlci5vbmVycm9yPWZ1bmN0aW9uKCl7dmFyIGVycm9yPXdyaXRlci5lcnJvcjtpZihlcnJvci5jb2RlIT09ZXJyb3IuQUJPUlRfRVJSKXtmc19lcnJvcigpfX07XCJ3cml0ZXN0YXJ0IHByb2dyZXNzIHdyaXRlIGFib3J0XCIuc3BsaXQoXCIgXCIpLmZvckVhY2goZnVuY3Rpb24oZXZlbnQpe3dyaXRlcltcIm9uXCIrZXZlbnRdPWZpbGVzYXZlcltcIm9uXCIrZXZlbnRdfSk7d3JpdGVyLndyaXRlKGJsb2IpO2ZpbGVzYXZlci5hYm9ydD1mdW5jdGlvbigpe3dyaXRlci5hYm9ydCgpO2ZpbGVzYXZlci5yZWFkeVN0YXRlPWZpbGVzYXZlci5ET05FfTtmaWxlc2F2ZXIucmVhZHlTdGF0ZT1maWxlc2F2ZXIuV1JJVElOR30pLGZzX2Vycm9yKX0pLGZzX2Vycm9yKX07ZGlyLmdldEZpbGUobmFtZSx7Y3JlYXRlOmZhbHNlfSxhYm9ydGFibGUoZnVuY3Rpb24oZmlsZSl7ZmlsZS5yZW1vdmUoKTtzYXZlKCl9KSxhYm9ydGFibGUoZnVuY3Rpb24oZXgpe2lmKGV4LmNvZGU9PT1leC5OT1RfRk9VTkRfRVJSKXtzYXZlKCl9ZWxzZXtmc19lcnJvcigpfX0pKX0pLGZzX2Vycm9yKX0pLGZzX2Vycm9yKX0sRlNfcHJvdG89RmlsZVNhdmVyLnByb3RvdHlwZSxzYXZlQXM9ZnVuY3Rpb24oYmxvYixuYW1lLG5vX2F1dG9fYm9tKXtyZXR1cm4gbmV3IEZpbGVTYXZlcihibG9iLG5hbWUsbm9fYXV0b19ib20pfTtpZih0eXBlb2YgbmF2aWdhdG9yIT09XCJ1bmRlZmluZWRcIiYmbmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2Ipe3JldHVybiBmdW5jdGlvbihibG9iLG5hbWUsbm9fYXV0b19ib20pe2lmKCFub19hdXRvX2JvbSl7YmxvYj1hdXRvX2JvbShibG9iKX1yZXR1cm4gbmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IoYmxvYixuYW1lfHxcImRvd25sb2FkXCIpfX1GU19wcm90by5hYm9ydD1mdW5jdGlvbigpe3ZhciBmaWxlc2F2ZXI9dGhpcztmaWxlc2F2ZXIucmVhZHlTdGF0ZT1maWxlc2F2ZXIuRE9ORTtkaXNwYXRjaChmaWxlc2F2ZXIsXCJhYm9ydFwiKX07RlNfcHJvdG8ucmVhZHlTdGF0ZT1GU19wcm90by5JTklUPTA7RlNfcHJvdG8uV1JJVElORz0xO0ZTX3Byb3RvLkRPTkU9MjtGU19wcm90by5lcnJvcj1GU19wcm90by5vbndyaXRlc3RhcnQ9RlNfcHJvdG8ub25wcm9ncmVzcz1GU19wcm90by5vbndyaXRlPUZTX3Byb3RvLm9uYWJvcnQ9RlNfcHJvdG8ub25lcnJvcj1GU19wcm90by5vbndyaXRlZW5kPW51bGw7cmV0dXJuIHNhdmVBc30odHlwZW9mIHNlbGYhPT1cInVuZGVmaW5lZFwiJiZzZWxmfHx0eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIiYmd2luZG93fHx0aGlzLmNvbnRlbnQpO2lmKHR5cGVvZiBtb2R1bGUhPT1cInVuZGVmaW5lZFwiJiZtb2R1bGUuZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHMuc2F2ZUFzPXNhdmVBc31lbHNlIGlmKHR5cGVvZiBkZWZpbmUhPT1cInVuZGVmaW5lZFwiJiZkZWZpbmUhPT1udWxsJiZkZWZpbmUuYW1kIT1udWxsKXtkZWZpbmUoW10sZnVuY3Rpb24oKXtyZXR1cm4gc2F2ZUFzfSl9XG4iXX0=\n"],"sourceRoot":"/source/"}